(()=>{var e={};e.id=434,e.ids=[434],e.modules={64735:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=64735,e.exports=t},57343:e=>{"use strict";e.exports=require("graphql")},91165:e=>{"use strict";e.exports=require("graphql/execution/values")},36548:e=>{"use strict";e.exports=require("graphql/language")},62329:e=>{"use strict";e.exports=require("graphql/language/blockString")},43423:e=>{"use strict";e.exports=require("graphql/language/parser")},82260:e=>{"use strict";e.exports=require("graphql/language/printer")},589:e=>{"use strict";e.exports=require("graphql/type/definition")},46928:e=>{"use strict";e.exports=require("graphql/type/directives")},28754:e=>{"use strict";e.exports=require("graphql/type/introspection")},26755:e=>{"use strict";e.exports=require("graphql/type/scalars")},76736:e=>{"use strict";e.exports=require("graphql/utilities/astFromValue")},34295:e=>{"use strict";e.exports=require("graphql/validation")},54679:e=>{"use strict";e.exports=require("graphql/validation/ValidationContext")},7449:e=>{"use strict";e.exports=require("graphql/validation/specifiedRules")},30167:e=>{"use strict";e.exports=require("graphql/validation/validate")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},51807:e=>{"use strict";e.exports=require("console")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},84492:e=>{"use strict";e.exports=require("node:stream")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},60797:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{originalPathname:()=>re,patchFetch:()=>rt,requestAsyncStorage:()=>t6,routeModule:()=>t8,serverHooks:()=>t9,staticGenerationAsyncStorage:()=>t7});var i={};r.r(i),r.d(i,{GET:()=>t5,POST:()=>t5});var o=r(49303),a=r(88716),s=r(60670),l=r(45306),u=r(66007),c=r.n(u),p=r(57343);let d=e=>({onExecute:({setExecuteFn:t})=>{e.execute&&t(e.execute)},onParse:({setParseFn:t})=>{e.parse&&t(e.parse)},onValidate:({setValidationFn:t,addValidationRule:r})=>{e.validate&&t(e.validate),e.specifiedRules?.map(r)},onSubscribe:({setSubscribeFn:t})=>{e.subscribe&&t(e.subscribe)}}),f=e=>({async onContextBuilding({context:t,extendContext:r}){r(await e(t))}});Symbol("ENVELOP_IS_INTROSPECTION");let h=e=>(...t)=>e(function(e){return 1===e.length?e[0]:{schema:e[0],document:e[1],rootValue:e[2],contextValue:e[3],variableValues:e[4],operationName:e[5],fieldResolver:e[6],subscribeFieldResolver:e[7]}}(t));function y(e,t){let r=e[Symbol.asyncIterator]();async function n(e){if(e.done)return e;try{return{value:await t(e.value),done:!1}}catch(e){try{await r.return?.()}catch(e){}throw e}}let i={[Symbol.asyncIterator]:()=>i,next:async()=>await n(await r.next()),async return(){let e=r.return?.();return e?await n(await e):{value:void 0,done:!0}},async throw(e){let t=r.throw?.();if(t)return await n(await t);throw e}};return i}let m=e=>(...t)=>e(function(e){return 1===e.length?e[0]:{schema:e[0],document:e[1],rootValue:e[2],contextValue:e[3],variableValues:e[4],operationName:e[5],fieldResolver:e[6],typeResolver:e[7]}}(t));function v(e){return"object"==typeof e&&null!=e&&"function"==typeof e[Symbol.asyncIterator]}function g(e,t){if(v(e.result))return{onNext:t};t({args:e.args,result:e.result,setResult:e.setResult})}function b(e,t){let r=e[Symbol.asyncIterator](),n=!1,i={[Symbol.asyncIterator]:()=>i,async next(){let e=await r.next();return e.done&&!1===n&&(n=!0,t()),e},async return(){let e=r.return?.();return!1===n&&(n=!0,t()),e?await e:{done:!0,value:void 0}},async throw(e){let t=r.throw?.();if(t)return await t;throw e}};return i}let _=(n=globalThis.process?.env?.NODE_ENV==="development",(e,t)=>!function e(t){return t instanceof Error&&"GraphQLError"===t.name&&(null==t.originalError||e(t.originalError))}(e)?function(e,t,r){let n=Error(e);if(n.name="GraphQLError",r){let e=t instanceof Error?{message:t.message,stack:t.stack}:{message:String(t)};Object.defineProperty(n,"extensions",{get:()=>e})}return Object.defineProperty(n,"toJSON",{value:()=>({message:n.message,extensions:n.extensions})}),n}(t,e,n):e),T=(e,t)=>({result:r,setResult:n})=>{null!=r.errors&&n({...r,errors:r.errors.map(r=>e(r,t))})},E=new WeakMap;function O(e){throw Error(`No \`${e}\` function found! Register it using "useEngine" plugin.`)}function S(e){return null!=e}let w=e=>{throw e};class I{state;constructor(e){let t;try{t=e()}catch(e){this.state={status:"rejected",value:e};return}if(function(e){return null!=e&&"function"==typeof e.then}(t)){this.state={status:"pending",value:t};return}this.state={status:"fulfilled",value:t}}then(e,t){let r=this.state;if("pending"===r.status)return new I(()=>r.value.then(e,t));let n="function"==typeof t?t:w;if("rejected"===r.status)return new I(()=>n(r.value));try{let t="function"==typeof e?e:void 0;return new I(void 0===t?()=>r.value:()=>t(r.value))}catch(e){return new I(()=>n(e))}}catch(e){return this.then(void 0,e)}resolve(){let e=this.state;if("pending"===e.status)return Promise.resolve(e.value);if("rejected"===e.status)throw e.value;return e.value}static all(e){let t,r=!1,n=!1,i=[];for(let o of e){let e=o.state;if("rejected"===e.status){if(r)continue;r=!0,t=e.value;continue}"pending"===e.status&&(n=!0),i.push(e.value)}return n?r?(Promise.all(i).catch(()=>{}),new I(()=>{throw t})):new I(()=>Promise.all(i)):new I(()=>i)}}function N(e){let t=new WeakMap;return function(r){let n=t.get(r);if(void 0===n){let n=e(r);return t.set(r,n),n}return n}}class A extends Map{get[Symbol.toStringTag](){return"AccumulatorMap"}add(e,t){let r=this.get(e);void 0===r?this.set(e,[t]):r.push(t)}}let C=new p.GraphQLDirective({name:"defer",description:"Directs the executor to defer this fragment when the `if` argument is true or undefined.",locations:[p.DirectiveLocation.FRAGMENT_SPREAD,p.DirectiveLocation.INLINE_FRAGMENT],args:{if:{type:new p.GraphQLNonNull(p.GraphQLBoolean),description:"Deferred when true or undefined.",defaultValue:!0},label:{type:p.GraphQLString,description:"Unique name"}}}),P=new p.GraphQLDirective({name:"stream",description:"Directs the executor to stream plural fields when the `if` argument is true or undefined.",locations:[p.DirectiveLocation.FIELD],args:{if:{type:new p.GraphQLNonNull(p.GraphQLBoolean),description:"Stream when true or undefined.",defaultValue:!0},label:{type:p.GraphQLString,description:"Unique name"},initialCount:{defaultValue:0,type:p.GraphQLInt,description:"Number of items to return immediately"}}});function R(e,t,r,n,i,o,a,s){for(let l of i.selections)switch(l.kind){case p.Kind.FIELD:if(!F(r,l))continue;o.add(l.alias?l.alias.value:l.name.value,l);break;case p.Kind.INLINE_FRAGMENT:{if(!F(r,l)||!j(e,l,n))continue;let i=L(r,l);if(i){let o=new A;R(e,t,r,n,l.selectionSet,o,a,s),a.push({label:i.label,fields:o})}else R(e,t,r,n,l.selectionSet,o,a,s);break}case p.Kind.FRAGMENT_SPREAD:{let i=l.name.value;if(!F(r,l))continue;let u=L(r,l);if(s.has(i)&&!u)continue;let c=t[i];if(!c||!j(e,c,n))continue;if(u||s.add(i),u){let i=new A;R(e,t,r,n,c.selectionSet,i,a,s),a.push({label:u.label,fields:i})}else R(e,t,r,n,c.selectionSet,o,a,s)}}}function D(e,t,r,n,i){let o=new A,a=[];return R(e,t,r,n,i,o,a,new Set),{fields:o,patches:a}}function F(e,t){let r=(0,p.getDirectiveValues)(p.GraphQLSkipDirective,t,e);if(r?.if===!0)return!1;let n=(0,p.getDirectiveValues)(p.GraphQLIncludeDirective,t,e);return n?.if!==!1}function j(e,t,r){let n=t.typeCondition;if(!n)return!0;let i=(0,p.typeFromAST)(e,n);return i===r||!!(0,p.isAbstractType)(i)&&e.getPossibleTypes(i).includes(r)}function L(e,t){let r=(0,p.getDirectiveValues)(C,t,e);if(r&&!1!==r.if)return{label:"string"==typeof r.label?r.label:void 0}}let x=function(e){let t=new WeakMap;return function(r,n,i,o,a){let s=t.get(r);if(!s){s=new WeakMap,t.set(r,s);let l=new WeakMap;s.set(n,l);let u=new WeakMap;l.set(i,u);let c=new WeakMap;u.set(o,c);let p=e(r,n,i,o,a);return c.set(a,p),p}let l=s.get(n);if(!l){l=new WeakMap,s.set(n,l);let t=new WeakMap;l.set(i,t);let u=new WeakMap;t.set(o,u);let c=e(r,n,i,o,a);return u.set(a,c),c}let u=l.get(i);if(!u){u=new WeakMap,l.set(i,u);let t=new WeakMap;u.set(o,t);let s=e(r,n,i,o,a);return t.set(a,s),s}let c=u.get(o);if(!c){c=new WeakMap,u.set(o,c);let t=e(r,n,i,o,a);return c.set(a,t),t}let p=c.get(a);if(void 0===p){let t=e(r,n,i,o,a);return c.set(a,t),t}return p}}(function(e,t,r,n,i){let o=new A,a=new Set,s=[];for(let l of i)l.selectionSet&&R(e,t,r,n,l.selectionSet,o,s,a);return{fields:o,patches:s}}),M=["message","locations","path","nodes","source","positions","originalError","name","stack","extensions"];function k(e,t){var r;return t?.originalError&&!(t.originalError instanceof Error)&&null!=(r=t.originalError)&&"object"==typeof r&&Object.keys(r).every(e=>M.includes(e))&&(t.originalError=k(t.originalError.message,t.originalError)),p.versionInfo.major>=17?new p.GraphQLError(e,t):new p.GraphQLError(e,t?.nodes,t?.source,t?.positions,t?.path,t?.originalError,t?.extensions)}N(function(e){return new Set([...$(e)].map(e=>e.name))});let $=N(function(e){return new Set(U(e).values())}),U=N(function(e){let t=new Map,r=e.getQueryType();r&&t.set("query",r);let n=e.getMutationType();n&&t.set("mutation",n);let i=e.getSubscriptionType();return i&&t.set("subscription",i),t});function V(e){return"object"==typeof e&&null!==e}function G(e){return e?.then!=null}function q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function B(e,t,r){return{prev:e,key:t,typename:r}}function W(e){let t=[],r=e;for(;r;)t.push(r.key),r=r.prev;return t.reverse()}function H(e){return Q(e,[])}function Q(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){if(null===e)return"null";if(e instanceof Error)return"AggregateError"===e.name?K(e)+"\n"+z(e.errors,t):K(e);if(t.includes(e))return"[Circular]";let r=[...t,e];if("function"==typeof e.toJSON){let t=e.toJSON();if(t!==e)return"string"==typeof t?t:Q(t,r)}else if(Array.isArray(e))return z(e,r);return function(e,t){let r=Object.entries(e);return 0===r.length?"{}":t.length>3?"["+function(e){let t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){let t=e.constructor.name;if("string"==typeof t&&""!==t)return t}return t}(e)+"]":"{ "+r.map(([e,r])=>e+": "+Q(r,t)).join(", ")+" }"}(e,r)}(e,t);default:return String(e)}}function K(e){return e.name="GraphQLError",e.toString()}function z(e,t){if(0===e.length)return"[]";if(t.length>3)return"[Array]";let r=e.length,n=[];for(let i=0;i<r;++i)n.push(Q(e[i],t));return"["+n.join(", ")+"]"}function Y(e,t,r={}){let n={},i=(t.arguments??[]).reduce((e,t)=>({...e,[t.name.value]:t}),{});for(let{name:o,type:a,defaultValue:s}of e.args){let e=i[o];if(!e){if(void 0!==s)n[o]=s;else if((0,p.isNonNullType)(a))throw k(`Argument "${o}" of required type "${H(a)}" was not provided.`,{nodes:[t]});continue}let l=e.value,u=l.kind===p.Kind.NULL;if(l.kind===p.Kind.VARIABLE){let e=l.name.value;if(null==r||!q(r,e)){if(void 0!==s)n[o]=s;else if((0,p.isNonNullType)(a))throw k(`Argument "${o}" of required type "${H(a)}" was provided the variable "$${e}" which was not provided a runtime value.`,{nodes:[l]});continue}u=null==r[e]}if(u&&(0,p.isNonNullType)(a))throw k(`Argument "${o}" of non-null type "${H(a)}" must not be null.`,{nodes:[l]});let c=(0,p.valueFromAST)(l,a,r);if(void 0===c)throw k(`Argument "${o}" has invalid value ${(0,p.print)(l)}.`,{nodes:[l]});n[o]=c}return n}function J(e){return e?.[Symbol.asyncIterator]!=null}function X(e,t,r,n){let i,o,a,s;function l(e){return e.done?a?a(e):e:Z(e.value,t).then(ee,o)}return Symbol.asyncIterator in e&&(e=e[Symbol.asyncIterator]()),n&&(a=e=>{let t=n();return G(t)?t.then(()=>e):e}),"function"==typeof e.return&&(i=e.return,o=t=>{let r=()=>Promise.reject(t);return i.call(e).then(r,r)}),r&&(s=e=>Z(e,r).then(ee,o)),{next:()=>e.next().then(l,s),return(){let t=i?i.call(e).then(l,s):Promise.resolve({value:void 0,done:!0});return a?t.then(a):t},throw:t=>"function"==typeof e.throw?e.throw(t).then(l,s):Promise.reject(t).catch(o),[Symbol.asyncIterator](){return this}}}function Z(e,t){return new Promise(r=>r(t(e)))}function ee(e){return{value:e,done:!1}}function et(e){if(e instanceof Error)return e;if("object"==typeof e&&null!=e&&"message"in e&&"string"==typeof e.message){let t;"cause"in e&&(t={cause:e.cause});let r=Error(e.message,t);return"stack"in e&&"string"==typeof e.stack&&(r.stack=e.stack),"name"in e&&"string"==typeof e.name&&(r.name=e.name),r}return Error(String(e))}function er(e,t){if(!e)throw Error(null!=t?t:"Unexpected invariant triggered.")}async function en(e,t){let r=Object.create(null);return await new Promise((n,i)=>{t?.addEventListener("abort",()=>{i(t.reason)}),Promise.all(Object.entries(e).map(async([e,t])=>{r[e]=await t})).then(()=>n(),i)}),r}let ei=function(e){let t=new WeakMap;return function(r,n,i){let o=t.get(r);if(!o){o=new WeakMap,t.set(r,o);let a=new WeakMap;o.set(n,a);let s=e(r,n,i);return a.set(i,s),s}let a=o.get(n);if(!a){a=new WeakMap,o.set(n,a);let t=e(r,n,i);return a.set(i,t),t}let s=a.get(i);if(void 0===s){let t=e(r,n,i);return a.set(i,t),t}return s}}((e,t,r)=>x(e.schema,e.fragments,e.variableValues,t,r));function eo(e){if(e.signal?.aborted)throw e.signal.reason;return new I(()=>(function(e){let t;let{operation:r,schema:n,fragments:i,variableValues:o,rootValue:a}=e,s=function(e,t,r){let n=U(e).get(t);if(null==n)throw k(`Schema is not configured to execute ${t} operation.`,{nodes:r});return n}(n,r.operation,[r]);null==s&&k(`Schema is not configured to execute ${r.operation} operation.`,{nodes:r});let{fields:l,patches:u}=D(n,i,o,s,r.selectionSet),c=void 0;for(let n of(t="mutation"===r.operation?(function(e,t,r){let n=r;for(let r of e)n=G(n)?n.then(e=>t(e,r)):t(n,r);return n})(l,(t,[r,n])=>{let i=B(c,r,s.name);if(e.signal?.aborted)throw e.signal.reason;return new I(()=>ec(e,s,a,n,i)).then(e=>(void 0===e||(t[r]=e),t))},Object.create(null)).resolve():eu(e,s,a,c,l),u)){let{label:t,fields:r}=n;eA(e,s,a,r,t,c)}return t})(e)).then(t=>{let r=ea(t,e.errors);return e.subsequentPayloads.size>0?{initialResult:{...r,hasNext:!0},subsequentResults:function(e){let t=!1,r=new Promise((r,n)=>{e.signal?.addEventListener("abort",()=>{t=!0,n(e.signal?.reason)})});async function n(){if(t||(await Promise.race([r,...Array.from(e.subsequentPayloads).map(e=>e.promise)]),t))return{value:void 0,done:!0};let i=function(e){let t=[];for(let r of e.subsequentPayloads){let n={};if(r.isCompleted){if(e.subsequentPayloads.delete(r),ej(r)){let e=r.items;if(r.isCompletedIterator)continue;n.items=e}else{let e=r.data;n.data=e??null}n.path=r.path,r.label&&(n.label=r.label),r.errors.length>0&&(n.errors=r.errors),t.push(n)}}return t}(e),o=e.subsequentPayloads.size>0;return!i.length&&o?n():(o||(t=!0),{value:i.length?{incremental:i,hasNext:o}:{hasNext:o},done:!1})}function i(){let t=[];return e.subsequentPayloads.forEach(e=>{ej(e)&&e.iterator?.return&&t.push(e.iterator.return())}),Promise.all(t)}return{[Symbol.asyncIterator](){return this},next:n,return:async()=>(await i(),t=!0,{value:void 0,done:!0}),throw:async e=>(await i(),t=!0,Promise.reject(e))}}(e)}:r},t=>{if(e.signal?.aborted)throw e.signal.reason;return t.errors?e.errors.push(...t.errors):e.errors.push(t),ea(null,e.errors)}).resolve()}function ea(e,t){return 0===t.length?{data:e}:{errors:t,data:e}}let es=N(function(e){let t=Object.create(null);for(let r of e.definitions)r.kind===p.Kind.FRAGMENT_DEFINITION&&(t[r.name.value]=r);return t});function el(e){let t;let{schema:r,document:n,rootValue:i,contextValue:o,variableValues:a,operationName:s,fieldResolver:l,typeResolver:u,subscribeFieldResolver:c,signal:d}=e;(0,p.assertValidSchema)(r);let f=es(n);for(let e of n.definitions)if(e.kind===p.Kind.OPERATION_DEFINITION){if(null==s){if(void 0!==t)return[k("Must provide operation name if query contains multiple operations.")];t=e}else e.name?.value===s&&(t=e)}if(null==t)return null!=s?[k(`Unknown operation named "${s}".`)]:[k("Must provide an operation.")];let h=function(e,t,r,n){let i=[],o=n?.maxErrors;try{let n=function(e,t,r,n){let i={};for(let o of t){let t=o.variable.name.value,a=(0,p.typeFromAST)(e,o.type);if(!(0,p.isInputType)(a)){let e=(0,p.print)(o.type);n(k(`Variable "$${t}" expected value of type "${e}" which cannot be used as an input type.`,{nodes:o.type}));continue}if(!q(r,t)){if(o.defaultValue)i[t]=(0,p.valueFromAST)(o.defaultValue,a);else if((0,p.isNonNullType)(a)){let e=H(a);n(k(`Variable "$${t}" of required type "${e}" was not provided.`,{nodes:o}))}continue}let s=r[t];if(null===s&&(0,p.isNonNullType)(a)){let e=H(a);n(k(`Variable "$${t}" of non-null type "${e}" must not be null.`,{nodes:o}));continue}i[t]=(0,p.coerceInputValue)(s,a,(e,r,i)=>{let a=`Variable "$${t}" got invalid value `+H(r);e.length>0&&(a+=` at "${t}${e.map(e=>"number"==typeof e?"["+e.toString()+"]":"."+e).join("")}"`),n(k(a+"; "+i.message,{nodes:o,originalError:i}))})}return i}(e,t,r,e=>{if(null!=o&&i.length>=o)throw k("Too many errors processing variables, error limit reached. Execution aborted.");i.push(e)});if(0===i.length)return{coerced:n}}catch(e){i.push(e)}return{errors:i}}(r,t.variableDefinitions??[],a??{},{maxErrors:50});return h.errors?h.errors:{schema:r,fragments:f,rootValue:i,contextValue:o,operation:t,variableValues:h.coerced,fieldResolver:l??eE,typeResolver:u??eT,subscribeFieldResolver:c??eE,subsequentPayloads:new Set,errors:[],signal:d}}function eu(e,t,r,n,i,o){let a=Object.create(null),s=!1;try{for(let[l,u]of i){if(e.signal?.aborted)throw e.signal.reason;let i=B(n,l,t.name),c=ec(e,t,r,u,i,o);void 0!==c&&(a[l]=c,G(c)&&(s=!0))}}catch(t){if(s)return en(a,e.signal).finally(()=>{throw t});throw t}return s?en(a,e.signal):a}function ec(e,t,r,n,i,o){let a=o?.errors??e.errors,s=eL(e.schema,t,n[0]);if(!s)return;let l=s.type,u=s.resolve??e.fieldResolver,c=ep(e,s,n,t,i);try{let t;let d=Y(s,n[0],e.variableValues),f=e.contextValue,h=u(r,d,f,c);if(t=G(h)?h.then(t=>ef(e,l,n,c,i,t,o)):ef(e,l,n,c,i,h,o),G(t))return t.then(void 0,t=>{if(t instanceof AggregateError)return AggregateError(t.errors.map(t=>{t=et(t);let r=(0,p.locatedError)(t,n,W(i)),s=ed(r,l,a);return eR(e,i,o),s}));t=et(t);let r=(0,p.locatedError)(t,n,W(i)),s=ed(r,l,a);return eR(e,i,o),s});return t}catch(s){if(s instanceof AggregateError)return AggregateError(s.errors.map(e=>{let t=et(e);return ed((0,p.locatedError)(t,n,W(i)),l,a)}));let t=et(s),r=ed((0,p.locatedError)(t,n,W(i)),l,a);return eR(e,i,o),r}}function ep(e,t,r,n,i){return{fieldName:t.name,fieldNodes:r,returnType:t.type,parentType:n,path:i,schema:e.schema,fragments:e.fragments,rootValue:e.rootValue,operation:e.operation,variableValues:e.variableValues}}function ed(e,t,r){if((0,p.isNonNullType)(t)||e.extensions?.CRITICAL_ERROR)throw e;return r.push(e),null}function ef(e,t,r,n,i,o,a){if(o instanceof Error)throw o;if((0,p.isNonNullType)(t)){let s=ef(e,t.ofType,r,n,i,o,a);if(null===s)throw Error(`Cannot return null for non-nullable field ${n.parentType.name}.${n.fieldName}.`);return s}return null==o?null:(0,p.isListType)(t)?function(e,t,r,n,i,o,a){let s=t.ofType,l=a?.errors??e.errors;if(J(o))return ey(e,s,r,n,i,o[Symbol.asyncIterator](),a);if(!(null!=o&&"object"==typeof o&&Symbol.iterator in o))throw k(`Expected Iterable, but did not find one for field "${n.parentType.name}.${n.fieldName}".`);let u=eh(e,r,i),c=!1,d=a,f=[],h=0;for(let t of o){let o=B(i,h,void 0);if(u&&"number"==typeof u.initialCount&&h>=u.initialCount){d=function(e,t,r,n,i,o,a,s,l){let u,c;let d=new eF({label:s,path:t,parentContext:l,exeContext:n});try{try{u=G(r)?r.then(e=>ef(n,a,i,o,t,e,d)):ef(n,a,i,o,t,r,d),G(u)&&(u=u.then(void 0,e=>{e=et(e);let r=(0,p.locatedError)(e,i,W(t)),o=ed(r,a,d.errors);return eR(n,t,d),o}))}catch(o){let e=et(o),r=(0,p.locatedError)(e,i,W(t));u=ed(r,a,d.errors),eR(n,t,d)}}catch(t){return d.errors.push(t),eR(n,e,d),d.addItems(null),d}return c=G(u)?u.then(e=>[e],t=>(d.errors.push(t),eR(n,e,d),null)):[u],d.addItems(c),d}(i,o,t,e,r,n,s,u.label,d),h++;continue}em(t,f,l,e,s,r,n,o,a)&&(c=!0),h++}return c?Promise.all(f):f}(e,t,r,n,i,o,a):(0,p.isLeafType)(t)?function(e,t){let r;try{r=e.serialize(t)}catch(e){if(e instanceof p.GraphQLError)throw Error(e.message);throw e}if(null==r)throw Error(`Expected \`${H(e)}.serialize(${H(t)})\` to return non-nullable value, returned: ${H(r)}`);return r}(t,o):(0,p.isAbstractType)(t)?function(e,t,r,n,i,o,a){let s=(t.resolveType??e.typeResolver)(o,e.contextValue,n,t);return G(s)?s.then(s=>eg(e,ev(s,e,t,r,n,o),r,n,i,o,a)):eg(e,ev(s,e,t,r,n,o),r,n,i,o,a)}(e,t,r,n,i,o,a):(0,p.isObjectType)(t)?eg(e,t,r,n,i,o,a):void console.assert(!1,"Cannot complete value of unexpected output type: "+H(t))}function eh(e,t,r){if("number"==typeof r.key)return;let n=(0,p.getDirectiveValues)(P,t[0],e.variableValues);if(n&&!1!==n.if)return er("number"==typeof n.initialCount,"initialCount must be a number"),er(n.initialCount>=0,"initialCount must be a positive integer"),{initialCount:n.initialCount,label:"string"==typeof n.label?n.label:void 0}}async function ey(e,t,r,n,i,o,a){e.signal?.addEventListener("abort",()=>{o.return?.()});let s=a?.errors??e.errors,l=eh(e,r,i),u=!1,c=[],d=0;for(;;){let f;if(l&&"number"==typeof l.initialCount&&d>=l.initialCount){eP(d,o,e,r,n,t,i,l.label,a);break}let h=B(i,d,void 0);try{if((f=await o.next()).done)break}catch(i){let e=et(i),n=(0,p.locatedError)(e,r,W(h));c.push(ed(n,t,s));break}em(f.value,c,s,e,t,r,n,h,a)&&(u=!0),d+=1}return u?Promise.all(c):c}function em(e,t,r,n,i,o,a,s,l){try{let u;if(u=G(e)?e.then(e=>ef(n,i,o,a,s,e,l)):ef(n,i,o,a,s,e,l),G(u))return t.push(u.then(void 0,e=>{e=et(e);let t=(0,p.locatedError)(e,o,W(s)),a=ed(t,i,r);return eR(n,s,l),a})),!0;t.push(u)}catch(u){let e=et(u),a=ed((0,p.locatedError)(e,o,W(s)),i,r);eR(n,s,l),t.push(a)}return!1}function ev(e,t,r,n,i,o){if(null==e)throw k(`Abstract type "${r.name}" must resolve to an Object type at runtime for field "${i.parentType.name}.${i.fieldName}". Either the "${r.name}" type should provide a "resolveType" function or each possible type should provide an "isTypeOf" function.`,{nodes:n});if((0,p.isObjectType)(e)){if(p.versionInfo.major>=16)throw k("Support for returning GraphQLObjectType from resolveType was removed in graphql-js@16.0.0 please return type name instead.");e=e.name}if("string"!=typeof e)throw k(`Abstract type "${r.name}" must resolve to an Object type at runtime for field "${i.parentType.name}.${i.fieldName}" with value ${H(o)}, received "${H(e)}".`);let a=t.schema.getType(e);if(null==a)throw k(`Abstract type "${r.name}" was resolved to a type "${e}" that does not exist inside the schema.`,{nodes:n});if(!(0,p.isObjectType)(a))throw k(`Abstract type "${r.name}" was resolved to a non-object type "${e}".`,{nodes:n});if(!t.schema.isSubType(r,a))throw k(`Runtime Object type "${a.name}" is not a possible type for "${r.name}".`,{nodes:n});return a}function eg(e,t,r,n,i,o,a){if(t.isTypeOf){let s=t.isTypeOf(o,e.contextValue,n);if(G(s))return s.then(n=>{if(!n)throw eb(t,o,r);return e_(e,t,r,i,o,a)});if(!s)throw eb(t,o,r)}return e_(e,t,r,i,o,a)}function eb(e,t,r){return k(`Expected value of type "${e.name}" but got: ${H(t)}.`,{nodes:r})}function e_(e,t,r,n,i,o){let{fields:a,patches:s}=ei(e,t,r),l=eu(e,t,i,n,a,o);for(let r of s){let{label:a,fields:s}=r;eA(e,t,i,s,a,n,o)}return l}let eT=function(e,t,r,n){if(V(e)&&"string"==typeof e.__typename)return e.__typename;let i=r.schema.getPossibleTypes(n),o=[];for(let n=0;n<i.length;n++){let a=i[n];if(a.isTypeOf){let i=a.isTypeOf(e,t,r);if(G(i))o[n]=i;else if(i)return a.name}}if(o.length)return Promise.all(o).then(e=>{for(let t=0;t<e.length;t++)if(e[t])return i[t].name})},eE=function(e,t,r,n){if(V(e)||"function"==typeof e){let i=e[n.fieldName];return"function"==typeof i?e[n.fieldName](t,r,n):i}};function eO(e){let t=e.subsequentResults,r=!1,n=!1;return{[Symbol.asyncIterator](){return this},next:()=>n?Promise.resolve({value:void 0,done:n}):r?t.next():(r=!0,Promise.resolve({value:e.initialResult,done:n})),return:()=>(n=!0,t.return()),throw:e=>(n=!0,t.throw(e))}}async function*eS(e){"initialResult"in e?yield*eO(e):yield e}function ew(e,t){return J(t)?function(e){let t,r;let n=e[Symbol.asyncIterator](),i=!1;async function o(){if(i)return{value:void 0,done:!0};try{if(!t){let e;if(r)return await r,await o();r=new Promise(t=>{e=t});let a=await n.next();if(a.done)return i=!0,await o();return t=a.value[Symbol.asyncIterator](),r=void 0,e(),await o()}let e=t,a=await t.next();if(!a.done)return a;return t===e&&(t=void 0),await o()}catch(e){throw i=!0,e}}return{next:o,return:async()=>(i=!0,await Promise.all([t?.return?.(),n.return?.()]),{value:void 0,done:!0}),async throw(e){throw i=!0,await Promise.all([t?.throw?.(e),n.throw?.(e)]),e},[Symbol.asyncIterator](){return this}}}(X(t,async t=>eS(await eo({...e,rootValue:t,subsequentPayloads:new Set,errors:[]})),t=>{if(t instanceof AggregateError)throw AggregateError(t.errors.map(t=>eI(t,e.operation)),t.message);throw eI(t,e.operation)})):t}function eI(e,t){return k(e.message,{originalError:e,nodes:[t]})}function eN(e,t){if(e instanceof Error)throw e;if(!J(e))throw k(`Subscription field must return Async Iterable. Received: ${H(e)}.`);return{[Symbol.asyncIterator](){let r=e[Symbol.asyncIterator]();return t?.addEventListener("abort",()=>{r.return?.()}),r}}}function eA(e,t,r,n,i,o,a){let s;let l=new eD({label:i,path:o,parentContext:a,exeContext:e});try{s=eu(e,t,r,o,n,l),G(s)&&(s=s.then(null,e=>(l.errors.push(e),null)))}catch(e){l.errors.push(e),s=null}l.addData(s)}async function eC(e,t,r,n,i,o,a){let s,l;try{let{value:t,done:r}=await e.next();if(r)return o.setIsCompletedIterator(),{done:r,value:void 0};s=t}catch(t){let e=et(t);return{done:!0,value:ed((0,p.locatedError)(e,r,W(a)),i,o.errors)}}try{return l=ef(t,i,r,n,a,s,o),G(l)&&(l=l.then(void 0,e=>{let n=(0,p.locatedError)(e,r,W(a)),s=ed(n,i,o.errors);return eR(t,a,o),s})),{done:!1,value:l}}catch(n){let e=ed((0,p.locatedError)(n,r,W(a)),i,o.errors);return eR(t,a,o),{done:!1,value:e}}}async function eP(e,t,r,n,i,o,a,s,l){let u=e,c=l??void 0;for(;;){let e,l;let p=B(a,u,void 0),d=new eF({label:s,path:p,parentContext:c,iterator:t,exeContext:r});try{e=await eC(t,r,n,i,o,d,p)}catch(e){d.errors.push(e),eR(r,a,d),d.addItems(null),t?.return&&t.return().catch(()=>{});return}let{done:f,value:h}=e;if(l=G(h)?h.then(e=>[e],e=>(d.errors.push(e),eR(r,a,d),null)):[h],d.addItems(l),f)break;c=d,u++}}function eR(e,t,r){let n=W(t);e.subsequentPayloads.forEach(t=>{if(t!==r){for(let e=0;e<n.length;e++)if(t.path[e]!==n[e])return;ej(t)&&t.iterator?.return&&t.iterator.return().catch(()=>{}),e.subsequentPayloads.delete(t)}})}class eD{type;errors;label;path;promise;data;parentContext;isCompleted;_exeContext;_resolve;constructor(e){this.type="defer",this.label=e.label,this.path=W(e.path),this.parentContext=e.parentContext,this.errors=[],this._exeContext=e.exeContext,this._exeContext.subsequentPayloads.add(this),this.isCompleted=!1,this.data=null,this.promise=new Promise(e=>{this._resolve=t=>{e(t)}}).then(e=>{this.data=e,this.isCompleted=!0})}addData(e){let t=this.parentContext?.promise;if(t){this._resolve?.(t.then(()=>e));return}this._resolve?.(e)}}class eF{type;errors;label;path;items;promise;parentContext;iterator;isCompletedIterator;isCompleted;_exeContext;_resolve;constructor(e){this.type="stream",this.items=null,this.label=e.label,this.path=W(e.path),this.parentContext=e.parentContext,this.iterator=e.iterator,this.errors=[],this._exeContext=e.exeContext,this._exeContext.subsequentPayloads.add(this),this.isCompleted=!1,this.items=null,this.promise=new Promise(e=>{this._resolve=t=>{e(t)}}).then(e=>{this.items=e,this.isCompleted=!0})}addItems(e){let t=this.parentContext?.promise;if(t){this._resolve?.(t.then(()=>e));return}this._resolve?.(e)}setIsCompletedIterator(){this.isCompletedIterator=!0}}function ej(e){return"stream"===e.type}function eL(e,t,r){let n=r.name.value;return n===p.SchemaMetaFieldDef.name&&e.getQueryType()===t?p.SchemaMetaFieldDef:n===p.TypeMetaFieldDef.name&&e.getQueryType()===t?p.TypeMetaFieldDef:n===p.TypeNameMetaFieldDef.name?p.TypeNameMetaFieldDef:t.getFields()[n]}function ex(e){let t=(0,p.getOperationAST)(e.document,e.operationName);if(null==t)throw Error("Must provide an operation.");return"subscription"===t.operation?function(e){let t=el(e);if(!("schema"in t))return{errors:t.map(e=>(Object.defineProperty(e,"extensions",{value:{...e.extensions,http:{...e.extensions?.http,status:400}}}),e))};let r=function(e){try{let t=function(e){let{schema:t,fragments:r,operation:n,variableValues:i,rootValue:o}=e,a=t.getSubscriptionType();if(null==a)throw k("Schema is not configured to execute subscription operation.",{nodes:n});let{fields:s}=D(t,r,i,a,n.selectionSet),[l,u]=[...s.entries()][0],c=u[0].name.value,d=eL(t,a,u[0]);if(!d)throw k(`The subscription field "${c}" is not defined.`,{nodes:u});let f=B(void 0,l,a.name),h=ep(e,d,u,a,f);try{let t=Y(d,u[0],i),r=e.contextValue,n=(d.subscribe??e.subscribeFieldResolver)(o,t,r,h);if(G(n))return n.then(eN).then(void 0,e=>{throw(0,p.locatedError)(e,u,W(f))});return eN(n,e.signal)}catch(e){throw(0,p.locatedError)(e,u,W(f))}}(e);if(G(t))return t.then(void 0,e=>({errors:[e]}));return t}catch(e){return{errors:[e]}}}(t);return G(r)?r.then(e=>ew(t,e)):ew(t,r)}(e):new I(()=>(function(e){let t=el(e);return"schema"in t?eo(t):{errors:t.map(e=>(Object.defineProperty(e,"extensions",{value:{...e.extensions,http:{...e.extensions?.http,status:400}}}),e))}})(e)).then(e=>"initialResult"in e?eO(e):e).resolve()}let eM={red:"\x1b[31m",yellow:"\x1b[33m",magenta:"\x1b[35m",cyan:"\x1b[36m",reset:"\x1b[0m"},ek=eM.yellow+"WARN"+eM.reset,e$=eM.cyan+"INFO"+eM.reset,eU=eM.red+"ERR"+eM.reset,eV=eM.magenta+"DEBUG"+eM.reset,eG={debug:0,info:1,warn:2,error:3,silent:4},eq=()=>{},eB=e=>(...t)=>console.log(e,...t),eW=console.debug?(...e)=>console.debug(eV,...e):eB(eV),eH=console.info?(...e)=>console.info(e$,...e):eB(e$),eQ=console.warn?(...e)=>console.warn(ek,...e):eB(ek),eK=console.error?(...e)=>console.error(eU,...e):eB(eU),ez=(e=globalThis.process?.env.DEBUG==="1"?"debug":"info")=>{let t=eG[e];return{debug:t>eG.debug?eq:eW,info:t>eG.info?eq:eH,warn:t>eG.warn?eq:eQ,error:t>eG.error?eq:eK}};var eY=r(72600),eJ=r.t(eY,2);async function eX(e,t,r){let n=await t(e,r);return function(e,t){let r=e.headers.get("origin");if(!1===t||null==r)return null;let n={};if(null==t.origin||0===t.origin.length||t.origin.includes("*")?(n["Access-Control-Allow-Origin"]=r,n.Vary="Origin"):"string"==typeof t.origin?n["Access-Control-Allow-Origin"]=t.origin:Array.isArray(t.origin)&&(1===t.origin.length?n["Access-Control-Allow-Origin"]=t.origin[0]:t.origin.includes(r)?(n["Access-Control-Allow-Origin"]=r,n.Vary="Origin"):n["Access-Control-Allow-Origin"]="null"),t.methods?.length)n["Access-Control-Allow-Methods"]=t.methods.join(", ");else{let t=e.headers.get("access-control-request-method");t&&(n["Access-Control-Allow-Methods"]=t)}if(t.allowedHeaders?.length)n["Access-Control-Allow-Headers"]=t.allowedHeaders.join(", ");else{let t=e.headers.get("access-control-request-headers");t&&(n["Access-Control-Allow-Headers"]=t,n.Vary?n.Vary+=", Access-Control-Request-Headers":n.Vary="Access-Control-Request-Headers")}return null!=t.credentials?!0===t.credentials&&(n["Access-Control-Allow-Credentials"]="true"):"*"!==n["Access-Control-Allow-Origin"]&&(n["Access-Control-Allow-Credentials"]="true"),t.exposedHeaders&&(n["Access-Control-Expose-Headers"]=t.exposedHeaders.join(", ")),t.maxAge&&(n["Access-Control-Max-Age"]=t.maxAge.toString()),n}(e,n)}function eZ(e){return null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator]}class e0 extends EventTarget{aborted=!1;_onabort=null;reason;throwIfAborted(){if(this.aborted)throw this.reason}sendAbort(){this.reason=new DOMException("This operation was aborted","AbortError"),this.aborted=!0,this.dispatchEvent(new Event("abort"))}get onabort(){return this._onabort}set onabort(e){this._onabort=e,e?this.addEventListener("abort",e):this.removeEventListener("abort",e)}any(e){return AbortSignal.any([...e])}}let e1=!1,e2=new WeakMap;function e4(e){return null!=e.read}function e3(e){return null!=e&&null!=e.setHeader&&null!=e.end&&null!=e.once&&null!=e.write}function e5(e){e.end(null,null,null)}async function e8(e,t){let r=!1,n=()=>{r=!0};for await(let i of(e.once("error",n),e.once("close",n),e.once("finish",()=>{e.removeListener("close",n)}),t)){if(r)break;if(!e.write(i)){if(r)break;await new Promise(t=>e.once("drain",t))}}e5(e)}function e6(e,t,r){if(t.closed||t.destroyed||t.writableEnded)return;if(!e){t.statusCode=404,t.end();return}t.statusCode=e.status,t.statusMessage=e.statusText;let n=!1;e.headers.forEach((r,i)=>{if("set-cookie"===i){if(n)return;n=!0;let r=e.headers.getSetCookie?.();if(r){t.setHeader("set-cookie",r);return}}t.setHeader(i,r)});let i=e._buffer;if(i){t.write(i),e5(t);return}let o=e.body;if(null==o){e5(t);return}if("Uint8Array"===o[Symbol.toStringTag]){t.write(o),e5(t);return}if(r?.socket?.setTimeout?.(0),r?.socket?.setNoDelay?.(!0),r?.socket?.setKeepAlive?.(!0),e4(o)){t.once("close",()=>{o.destroy()}),o.pipe(t);return}if(eZ(o))return e8(t,o)}function e7(...e){let[t,...r]=e.filter(e=>null!=e&&"object"==typeof e);return r.forEach(e=>{let r=Object.getOwnPropertyNames(e).reduce((t,r)=>(Object.getOwnPropertyDescriptor(e,r)&&(t[r]=Object.getOwnPropertyDescriptor(e,r)),t),{});Object.getOwnPropertySymbols(e).forEach(t=>{let n=Object.getOwnPropertyDescriptor(e,t);n?.enumerable&&(r[t]=n)}),Object.defineProperties(t,r)}),t}function e9(e){return e?.then!=null}function te(e,t){let r=e[Symbol.iterator](),n=!1;function i(){n=!0}return function e(){let{done:o,value:a}=r.next();if(o)return;let s=t(a,i);return e9(s)?s.then(()=>{if(!n)return e()}):n?void 0:e()}()}function tt(e,t){return new t(e.stack||e.message||e.toString(),{status:e.status||500})}function tr(e,t){if(null==e){if(null==t)return{};e={}}let r={},n=new Set;return new Proxy(e,{get(e,i){if(null!=t&&"waitUntil"===i)return function(e){t.push(e.catch(e=>console.error(e)))};let o=r[i];return null!=o?"function"==typeof o?o.bind(r):o:n.has(i)?void 0:e[i]},set:(e,t,n)=>(r[t]=n,!0),has:(e,i)=>null!=t&&"waitUntil"===i||!n.has(i)&&(i in r||i in e),defineProperty:(e,t,n)=>Reflect.defineProperty(r,t,n),deleteProperty:(e,t)=>t in r?Reflect.deleteProperty(r,t):(n.add(t),!0),ownKeys(e){let i=Reflect.ownKeys(r),o=Reflect.ownKeys(e),a=Array.from(n),s=new Set(i.concat(o.filter(e=>!a.includes(e))));return null!=t&&s.add("waitUntil"),Array.from(s)},getOwnPropertyDescriptor:(e,t)=>t in r?Reflect.getOwnPropertyDescriptor(r,t):n.has(t)?void 0:Reflect.getOwnPropertyDescriptor(e,t)})}function tn(e,t){if(e9(e)&&t){let r,n;let i={promise:new Promise(function(e,t){r=e,n=t}),get resolve(){return r},get reject(){return n}};return t.addEventListener("abort",function(){i.reject(t.reason)}),e.then(function(e){i.resolve(e)}).catch(function(e){i.reject(e)}),i.promise}return e}function ti(e){return e.error?e.error():new e(null,{status:500})}async function to(e,t,r){for await(let n of t.body){if(r.aborted)return;e.cork(()=>{e.write(n)})}e.cork(()=>{e.end()})}function ta(e,t,r){if(!t){e.writeStatus("404 Not Found"),e.end();return}let n=t._buffer;if(!r.aborted&&(e.cork(()=>{for(let[r,n]of(e.writeStatus(`${t.status} ${t.statusText}`),t.headers))if("content-length"!==r){if("set-cookie"===r){let n=t.headers.getSetCookie?.();if(n){for(let t of n)e.writeHeader(r,t);continue}}e.writeHeader(r,n)}n&&e.end(n)}),!n)){if(!t.body){e.end();return}return to(e,t,r)}}async function ts(e){await Promise.allSettled(e)}new WeakMap,new WeakMap;let tl={};function tu(e){return e instanceof p.GraphQLError}function tc(e){return"object"==typeof e&&e?.constructor?.name==="DOMException"&&"AbortError"===e.name}function tp(e,t,r){let n=new Set;if(null!=e&&"object"==typeof e&&"errors"in e)for(let i of e.errors)for(let e of tp(i,t,r))n.add(e);else if(tc(e))r.debug("Request aborted");else if(t){let i=t.maskError(e,t.errorMessage,t.isDev);i!==e&&r.error(e),n.add(tu(i)?i:k(i.message,{originalError:i}))}else tu(e)?n.add(e):e instanceof Error?n.add(k(e.message,{originalError:e})):"string"==typeof e?n.add(k(e,{extensions:{unexpected:!0}})):null!=e&&"function"==typeof e.toString?n.add(k(e.toString(),{extensions:{unexpected:!0}})):(r.error(e),n.add(k("Unexpected error.",{extensions:{http:{unexpected:!0}}})));return Array.from(n)}function td(e,t={},r=!1){let n;let i=!1;if("extensions"in e&&e.extensions?.http&&(e.extensions.http.headers&&Object.assign(t,e.extensions.http.headers),e.extensions.http.status&&(n=e.extensions.http.status)),"errors"in e&&e.errors?.length)for(let o of e.errors)if(o.extensions?.http){if(o.extensions.http.headers&&Object.assign(t,o.extensions.http.headers),r&&o.extensions.http.spec)continue;o.extensions.http.status&&(!n||o.extensions.http.status>n)&&(n=o.extensions.http.status)}else(!function e(t){return t instanceof p.GraphQLError&&(null==t.originalError||e(t.originalError))}(o)||o.extensions?.unexpected)&&(i=!0);else n||=200;return n||(n=!i||"data"in e?200:500),{status:n,headers:t}}function tf(e){let t=e.get("operationName")||void 0,r=e.get("query")||void 0,n=e.get("variables")||void 0,i=e.get("extensions")||void 0;return{operationName:t,query:r,variables:n?JSON.parse(n):void 0,extensions:i?JSON.parse(i):void 0}}function th(e,t){let r=e.headers.get("content-type");return(r=r?.split(",")[0]||null)===t||!!r?.startsWith(`${t};`)}function ty(e){return"GET"===e.method}function tm(e){let[,t=""]=e.url.split("?");return tf(new eY.URLSearchParams(t))}function tv(e){return"POST"===e.method&&th(e,"application/x-www-form-urlencoded")}async function tg(e){var t;return t=await e.text(),tf(new eY.URLSearchParams(t))}function tb(e){return"POST"===e.method&&th(e,"application/graphql")}async function t_(e){return{query:await e.text()}}function tT(e){return"POST"===e.method&&(th(e,"application/json")||th(e,"application/graphql+json"))}async function tE(e){let t;try{t=await e.json()}catch(t){let e={http:{spec:!0,status:400}};throw t instanceof Error&&(e.originalError={name:t.name,message:t.message}),k("POST body sent invalid JSON.",{extensions:e})}if(null==t)throw k(`POST body is expected to be object but received ${t}`,{extensions:{http:{status:400}}});let r=typeof t;if("object"!==r)throw k(`POST body is expected to be object but received ${r}`,{extensions:{http:{status:400}}});return t}function tO(e){return"POST"===e.method&&th(e,"multipart/form-data")}async function tS(e){let t,r;try{t=await e.formData()}catch(e){if(e instanceof Error&&e.message.startsWith("File size limit exceeded: "))throw k(e.message,{extensions:{http:{status:413}}});throw e}let n=t.get("operations");if(!n)throw k('Missing multipart form field "operations"');if("string"!=typeof n)throw k('Multipart form field "operations" must be a string');try{r=JSON.parse(n)}catch(e){throw k('Multipart form field "operations" must be a valid JSON string')}let i=t.get("map");if(null!=i){let e;if("string"!=typeof i)throw k('Multipart form field "map" must be a string');try{e=JSON.parse(i)}catch(e){throw k('Multipart form field "map" must be a valid JSON string')}for(let n in e){let i=t.get(n);for(let t of e[n])!function(e,t,r){t.split&&(t=t.split("."));for(var n,i,o=0,a=t.length,s=e;o<a&&"__proto__"!==(i=t[o++])&&"constructor"!==i&&"prototype"!==i;)s=s[i]=o===a?r:typeof(n=s[i])==typeof t?n:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}(r,t,i)}}return r}let tw=new Set(["query","variables","operationName","extensions"]);function tI(e){return null===e?"null":Array.isArray(e)?"array":typeof e}let tN=e=>'<!doctype html><html lang=en><head><meta charset=utf-8><title>__TITLE__</title><link rel=icon href=https://raw.githubusercontent.com/dotansimha/graphql-yoga/main/website/public/favicon.ico><link rel=stylesheet href=https://unpkg.com/@graphql-yoga/graphiql@4.3.1/dist/style.css></head><body id=body class=no-focus-outline><noscript>You need to enable JavaScript to run this app.</noscript><div id=root></div><script type=module>import{renderYogaGraphiQL}from"https://unpkg.com/@graphql-yoga/graphiql@4.3.1/dist/yoga-graphiql.es.js";renderYogaGraphiQL(root,__OPTS__)</script></body></html>'.replace("__TITLE__",e?.title||"Yoga GraphiQL").replace("__OPTS__",JSON.stringify(e??{})),tA="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,tC=new Set,tP="object"==typeof process&&process?process:{},tR=(e,t,r,n)=>{"function"==typeof tP.emitWarning?tP.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`)},tD=globalThis.AbortController,tF=globalThis.AbortSignal;if(void 0===tD){tF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},tD=class{constructor(){t()}signal=new tF;abort(e){if(!this.signal.aborted){for(let t of(this.signal.reason=e,this.signal.aborted=!0,this.signal._onabort))t(e);this.signal.onabort?.(e)}}};let e=tP.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,tR("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}let tj=e=>!tC.has(e);Symbol("type");let tL=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),tx=e=>tL(e)?e<=256?Uint8Array:e<=65536?Uint16Array:e<=4294967296?Uint32Array:e<=Number.MAX_SAFE_INTEGER?tM:null:null;class tM extends Array{constructor(e){super(e),this.fill(0)}}class tk{heap;length;static #e=!1;static create(e){let t=tx(e);if(!t)return[];tk.#e=!0;let r=new tk(e,t);return tk.#e=!1,r}constructor(e,t){if(!tk.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class t${#t;#r;#n;#i;#o;#a;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#l;#u;#c;#p;#d;#f;#h;#y;#m;#v;#g;#b;#_;#T;#E;#O;static unsafeExposeInternals(e){return{starts:e.#b,ttls:e.#_,sizes:e.#g,keyMap:e.#u,keyList:e.#c,valList:e.#p,next:e.#d,prev:e.#f,get head(){return e.#h},get tail(){return e.#y},free:e.#m,isBackgroundFetch:t=>e.#S(t),backgroundFetch:(t,r,n,i)=>e.#w(t,r,n,i),moveToTail:t=>e.#I(t),indexes:t=>e.#N(t),rindexes:t=>e.#A(t),isStale:t=>e.#C(t)}}get max(){return this.#t}get maxSize(){return this.#r}get calculatedSize(){return this.#l}get size(){return this.#s}get fetchMethod(){return this.#o}get memoMethod(){return this.#a}get dispose(){return this.#n}get disposeAfter(){return this.#i}constructor(e){let{max:t=0,ttl:r,ttlResolution:n=1,ttlAutopurge:i,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:s,dispose:l,disposeAfter:u,noDisposeOnSet:c,noUpdateTTL:p,maxSize:d=0,maxEntrySize:f=0,sizeCalculation:h,fetchMethod:y,memoMethod:m,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:g,allowStaleOnFetchRejection:b,allowStaleOnFetchAbort:_,ignoreFetchAbort:T}=e;if(0!==t&&!tL(t))throw TypeError("max option must be a nonnegative integer");let E=t?tx(t):Array;if(!E)throw Error("invalid max value: "+t);if(this.#t=t,this.#r=d,this.maxEntrySize=f||this.#r,this.sizeCalculation=h,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==m&&"function"!=typeof m)throw TypeError("memoMethod must be a function if defined");if(this.#a=m,void 0!==y&&"function"!=typeof y)throw TypeError("fetchMethod must be a function if specified");if(this.#o=y,this.#E=!!y,this.#u=new Map,this.#c=Array(t).fill(void 0),this.#p=Array(t).fill(void 0),this.#d=new E(t),this.#f=new E(t),this.#h=0,this.#y=0,this.#m=tk.create(t),this.#s=0,this.#l=0,"function"==typeof l&&(this.#n=l),"function"==typeof u?(this.#i=u,this.#v=[]):(this.#i=void 0,this.#v=void 0),this.#T=!!this.#n,this.#O=!!this.#i,this.noDisposeOnSet=!!c,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!b,this.allowStaleOnFetchAbort=!!_,this.ignoreFetchAbort=!!T,0!==this.maxEntrySize){if(0!==this.#r&&!tL(this.#r))throw TypeError("maxSize must be a positive integer if specified");if(!tL(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#P()}if(this.allowStale=!!s,this.noDeleteOnStaleGet=!!g,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=tL(n)||0===n?n:1,this.ttlAutopurge=!!i,this.ttl=r||0,this.ttl){if(!tL(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#R()}if(0===this.#t&&0===this.ttl&&0===this.#r)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#r){let e="LRU_CACHE_UNBOUNDED";tj(e)&&(tC.add(e),tR("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,t$))}}getRemainingTTL(e){return this.#u.has(e)?1/0:0}#R(){let e=new tM(this.#t),t=new tM(this.#t);this.#_=e,this.#b=t,this.#D=(r,n,i=tA.now())=>{if(t[r]=0!==n?i:0,e[r]=n,0!==n&&this.ttlAutopurge){let e=setTimeout(()=>{this.#C(r)&&this.#F(this.#c[r],"expire")},n+1);e.unref&&e.unref()}},this.#j=r=>{t[r]=0!==e[r]?tA.now():0},this.#L=(i,o)=>{if(e[o]){let a=e[o],s=t[o];if(!a||!s)return;i.ttl=a,i.start=s,i.now=r||n();let l=i.now-s;i.remainingTTL=a-l}};let r=0,n=()=>{let e=tA.now();if(this.ttlResolution>0){r=e;let t=setTimeout(()=>r=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=i=>{let o=this.#u.get(i);if(void 0===o)return 0;let a=e[o],s=t[o];return a&&s?a-((r||n())-s):1/0},this.#C=i=>{let o=t[i],a=e[i];return!!a&&!!o&&(r||n())-o>a}}#j=()=>{};#L=()=>{};#D=()=>{};#C=()=>!1;#P(){let e=new tM(this.#t);this.#l=0,this.#g=e,this.#x=t=>{this.#l-=e[t],e[t]=0},this.#M=(e,t,r,n)=>{if(this.#S(t))return 0;if(!tL(r)){if(n){if("function"!=typeof n)throw TypeError("sizeCalculation must be a function");if(!tL(r=n(t,e)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return r},this.#k=(t,r,n)=>{if(e[t]=r,this.#r){let r=this.#r-e[t];for(;this.#l>r;)this.#$(!0)}this.#l+=e[t],n&&(n.entrySize=r,n.totalCalculatedSize=this.#l)}}#x=e=>{};#k=(e,t,r)=>{};#M=(e,t,r,n)=>{if(r||n)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#N({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#y;this.#U(t)&&((e||!this.#C(t))&&(yield t),t!==this.#h);)t=this.#f[t]}*#A({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#h;this.#U(t)&&((e||!this.#C(t))&&(yield t),t!==this.#y);)t=this.#d[t]}#U(e){return void 0!==e&&this.#u.get(this.#c[e])===e}*entries(){for(let e of this.#N())void 0===this.#p[e]||void 0===this.#c[e]||this.#S(this.#p[e])||(yield[this.#c[e],this.#p[e]])}*rentries(){for(let e of this.#A())void 0===this.#p[e]||void 0===this.#c[e]||this.#S(this.#p[e])||(yield[this.#c[e],this.#p[e]])}*keys(){for(let e of this.#N()){let t=this.#c[e];void 0===t||this.#S(this.#p[e])||(yield t)}}*rkeys(){for(let e of this.#A()){let t=this.#c[e];void 0===t||this.#S(this.#p[e])||(yield t)}}*values(){for(let e of this.#N())void 0===this.#p[e]||this.#S(this.#p[e])||(yield this.#p[e])}*rvalues(){for(let e of this.#A())void 0===this.#p[e]||this.#S(this.#p[e])||(yield this.#p[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#N()){let n=this.#p[r],i=this.#S(n)?n.__staleWhileFetching:n;if(void 0!==i&&e(i,this.#c[r],this))return this.get(this.#c[r],t)}}forEach(e,t=this){for(let r of this.#N()){let n=this.#p[r],i=this.#S(n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,this.#c[r],this)}}rforEach(e,t=this){for(let r of this.#A()){let n=this.#p[r],i=this.#S(n)?n.__staleWhileFetching:n;void 0!==i&&e.call(t,i,this.#c[r],this)}}purgeStale(){let e=!1;for(let t of this.#A({allowStale:!0}))this.#C(t)&&(this.#F(this.#c[t],"expire"),e=!0);return e}info(e){let t=this.#u.get(e);if(void 0===t)return;let r=this.#p[t],n=this.#S(r)?r.__staleWhileFetching:r;if(void 0===n)return;let i={value:n};if(this.#_&&this.#b){let e=this.#_[t],r=this.#b[t];if(e&&r){let t=e-(tA.now()-r);i.ttl=t,i.start=Date.now()}}return this.#g&&(i.size=this.#g[t]),i}dump(){let e=[];for(let t of this.#N({allowStale:!0})){let r=this.#c[t],n=this.#p[t],i=this.#S(n)?n.__staleWhileFetching:n;if(void 0===i||void 0===r)continue;let o={value:i};if(this.#_&&this.#b){o.ttl=this.#_[t];let e=tA.now()-this.#b[t];o.start=Math.floor(Date.now()-e)}this.#g&&(o.size=this.#g[t]),e.unshift([r,o])}return e}load(e){for(let[t,r]of(this.clear(),e)){if(r.start){let e=Date.now()-r.start;r.start=tA.now()-e}this.set(t,r.value,r)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;let{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:s}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,u=this.#M(e,t,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return s&&(s.set="miss",s.maxEntrySizeExceeded=!0),this.#F(e,"set"),this;let c=0===this.#s?void 0:this.#u.get(e);if(void 0===c)c=0===this.#s?this.#y:0!==this.#m.length?this.#m.pop():this.#s===this.#t?this.#$(!1):this.#s,this.#c[c]=e,this.#p[c]=t,this.#u.set(e,c),this.#d[this.#y]=c,this.#f[c]=this.#y,this.#y=c,this.#s++,this.#k(c,u,s),s&&(s.set="add"),l=!1;else{this.#I(c);let r=this.#p[c];if(t!==r){if(this.#E&&this.#S(r)){r.__abortController.abort(Error("replaced"));let{__staleWhileFetching:t}=r;void 0!==t&&!o&&(this.#T&&this.#n?.(t,e,"set"),this.#O&&this.#v?.push([t,e,"set"]))}else!o&&(this.#T&&this.#n?.(r,e,"set"),this.#O&&this.#v?.push([r,e,"set"]));if(this.#x(c),this.#k(c,u,s),this.#p[c]=t,s){s.set="replace";let e=r&&this.#S(r)?r.__staleWhileFetching:r;void 0!==e&&(s.oldValue=e)}}else s&&(s.set="update")}if(0===n||this.#_||this.#R(),this.#_&&(l||this.#D(c,n,i),s&&this.#L(s,c)),!o&&this.#O&&this.#v){let e;let t=this.#v;for(;e=t?.shift();)this.#i?.(...e)}return this}pop(){try{for(;this.#s;){let e=this.#p[this.#h];if(this.#$(!0),this.#S(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#O&&this.#v){let e;let t=this.#v;for(;e=t?.shift();)this.#i?.(...e)}}}#$(e){let t=this.#h,r=this.#c[t],n=this.#p[t];return this.#E&&this.#S(n)?n.__abortController.abort(Error("evicted")):(this.#T||this.#O)&&(this.#T&&this.#n?.(n,r,"evict"),this.#O&&this.#v?.push([n,r,"evict"])),this.#x(t),e&&(this.#c[t]=void 0,this.#p[t]=void 0,this.#m.push(t)),1===this.#s?(this.#h=this.#y=0,this.#m.length=0):this.#h=this.#d[t],this.#u.delete(r),this.#s--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=t,i=this.#u.get(e);if(void 0!==i){let e=this.#p[i];if(this.#S(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#C(i))return r&&this.#j(i),n&&(n.has="hit",this.#L(n,i)),!0;n&&(n.has="stale",this.#L(n,i))}else n&&(n.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,n=this.#u.get(e);if(void 0===n||!r&&this.#C(n))return;let i=this.#p[n];return this.#S(i)?i.__staleWhileFetching:i}#w(e,t,r,n){let i=void 0===t?void 0:this.#p[t];if(this.#S(i))return i;let o=new tD,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let s={signal:o.signal,options:r,context:n},l=(n,i=!1)=>{let{aborted:a}=o.signal,l=r.ignoreFetchAbort&&void 0!==n;return(r.status&&(a&&!i?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,l&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),!a||l||i)?(this.#p[t]===c&&(void 0===n?c.__staleWhileFetching?this.#p[t]=c.__staleWhileFetching:this.#F(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,n,s.options))),n):u(o.signal.reason)},u=n=>{let{aborted:i}=o.signal,a=i&&r.allowStaleOnFetchAbort,s=a||r.allowStaleOnFetchRejection,l=s||r.noDeleteOnFetchRejection;if(this.#p[t]!==c||(l&&void 0!==c.__staleWhileFetching?a||(this.#p[t]=c.__staleWhileFetching):this.#F(e,"fetch")),s)return r.status&&void 0!==c.__staleWhileFetching&&(r.status.returnedStale=!0),c.__staleWhileFetching;if(c.__returned===c)throw n};r.status&&(r.status.fetchDispatched=!0);let c=new Promise((t,n)=>{let a=this.#o?.(e,i,s);a&&a instanceof Promise&&a.then(e=>t(void 0===e?void 0:e),n),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>l(e,!0)))})}).then(l,e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),u(e))),p=Object.assign(c,{__abortController:o,__staleWhileFetching:i,__returned:void 0});return void 0===t?(this.set(e,p,{...s.options,status:void 0}),t=this.#u.get(e)):this.#p[t]=p,p}#S(e){return!!this.#E&&!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof tD}async fetch(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:s=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:h,forceRefresh:y=!1,status:m,signal:v}=t;if(!this.#E)return m&&(m.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,status:m});let g={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:s,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:f,ignoreFetchAbort:d,status:m,signal:v},b=this.#u.get(e);if(void 0===b){m&&(m.fetch="miss");let t=this.#w(e,b,g,h);return t.__returned=t}{let t=this.#p[b];if(this.#S(t)){let e=r&&void 0!==t.__staleWhileFetching;return m&&(m.fetch="inflight",e&&(m.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let i=this.#C(b);if(!y&&!i)return m&&(m.fetch="hit"),this.#I(b),n&&this.#j(b),m&&this.#L(m,b),t;let o=this.#w(e,b,g,h),a=void 0!==o.__staleWhileFetching&&r;return m&&(m.fetch=i?"stale":"refresh",a&&i&&(m.returnedStale=!0)),a?o.__staleWhileFetching:o.__returned=o}}async forceFetch(e,t={}){let r=await this.fetch(e,t);if(void 0===r)throw Error("fetch() returned undefined");return r}memo(e,t={}){let r=this.#a;if(!r)throw Error("no memoMethod provided to constructor");let{context:n,forceRefresh:i,...o}=t,a=this.get(e,o);if(!i&&void 0!==a)return a;let s=r(e,a,{options:o,context:n});return this.set(e,s,o),s}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=t,a=this.#u.get(e);if(void 0!==a){let t=this.#p[a],s=this.#S(t);return(o&&this.#L(o,a),this.#C(a))?(o&&(o.get="stale"),s)?(o&&r&&void 0!==t.__staleWhileFetching&&(o.returnedStale=!0),r?t.__staleWhileFetching:void 0):(i||this.#F(e,"expire"),o&&r&&(o.returnedStale=!0),r?t:void 0):(o&&(o.get="hit"),s)?t.__staleWhileFetching:(this.#I(a),n&&this.#j(a),t)}o&&(o.get="miss")}#V(e,t){this.#f[t]=e,this.#d[e]=t}#I(e){e!==this.#y&&(e===this.#h?this.#h=this.#d[e]:this.#V(this.#f[e],this.#d[e]),this.#V(this.#y,e),this.#y=e)}delete(e){return this.#F(e,"delete")}#F(e,t){let r=!1;if(0!==this.#s){let n=this.#u.get(e);if(void 0!==n){if(r=!0,1===this.#s)this.#G(t);else{this.#x(n);let r=this.#p[n];if(this.#S(r)?r.__abortController.abort(Error("deleted")):(this.#T||this.#O)&&(this.#T&&this.#n?.(r,e,t),this.#O&&this.#v?.push([r,e,t])),this.#u.delete(e),this.#c[n]=void 0,this.#p[n]=void 0,n===this.#y)this.#y=this.#f[n];else if(n===this.#h)this.#h=this.#d[n];else{let e=this.#f[n];this.#d[e]=this.#d[n];let t=this.#d[n];this.#f[t]=this.#f[n]}this.#s--,this.#m.push(n)}}}if(this.#O&&this.#v?.length){let e;let t=this.#v;for(;e=t?.shift();)this.#i?.(...e)}return r}clear(){return this.#G("delete")}#G(e){for(let t of this.#A({allowStale:!0})){let r=this.#p[t];if(this.#S(r))r.__abortController.abort(Error("deleted"));else{let n=this.#c[t];this.#T&&this.#n?.(r,n,e),this.#O&&this.#v?.push([r,n,e])}}if(this.#u.clear(),this.#p.fill(void 0),this.#c.fill(void 0),this.#_&&this.#b&&(this.#_.fill(0),this.#b.fill(0)),this.#g&&this.#g.fill(0),this.#h=0,this.#y=0,this.#m.length=0,this.#l=0,this.#s=0,this.#O&&this.#v){let e;let t=this.#v;for(;e=t?.shift();)this.#i?.(...e)}}}function tU({max:e=1024,ttl:t=36e5}={}){return new t$({max:e,ttl:t})}let tV=()=>!0;function tG(e){let t=e.match||tV;return{onRequestParse({request:r,setRequestParser:n}){t(r)&&n(e.parse)}}}function tq(e){if(Array.isArray(e))return`[${e.map(e=>{let t=tB(e);return(e.stringify||JSON.stringify)(t)}).join(",")}]`;let t=tB(e);return(e.stringify||JSON.stringify)(t)}function tB(e){if(e.errors?.length||e.extensions?.http){let t={...e};if(t.errors&&=t.errors.map(function e(t){if(tu(t)){let{http:r,unexpected:n,...i}=("toJSON"in t&&"function"==typeof t.toJSON?t.toJSON():Object(t)).extensions||{};return k(t.message,{nodes:t.nodes,source:t.source,positions:t.positions,path:t.path,originalError:e(t.originalError||void 0),extensions:Object.keys(i).length?i:void 0})}return t}),t.extensions){let{http:r,...n}=e.extensions;t.extensions=Object.keys(n).length?n:void 0}return t}return e}let tW={mediaTypes:["multipart/mixed"],asyncIterables:!0,processResult:function(e,t){let r;let n=td(e,{Connection:"keep-alive","Content-Type":'multipart/mixed; boundary="-"',"Transfer-Encoding":"chunked"}),i=new t.TextEncoder,o=new t.ReadableStream({start(t){if(v(e))r=e[Symbol.asyncIterator]();else{let t=!1;r={next:()=>t?Promise.resolve({done:!0,value:null}):(t=!0,Promise.resolve({done:!1,value:e}))}}t.enqueue(i.encode("\r\n")),t.enqueue(i.encode("---"))},async pull(e){try{let{done:t,value:n}=await r.next();if(null!=n){e.enqueue(i.encode("\r\n")),e.enqueue(i.encode("Content-Type: application/json; charset=utf-8")),e.enqueue(i.encode("\r\n"));let t=tq(n),r=i.encode(t);e.enqueue(i.encode("Content-Length: "+r.byteLength)),e.enqueue(i.encode("\r\n")),e.enqueue(i.encode("\r\n")),e.enqueue(r),e.enqueue(i.encode("\r\n")),e.enqueue(i.encode("---"))}t&&(e.enqueue(i.encode("--\r\n")),e.close())}catch(t){e.error(t)}},async cancel(e){await r.return?.(e)}});return new t.Response(o,n)}},tH={mediaTypes:["application/graphql-response+json","application/json"],asyncIterables:!1,processResult:function(e,t,r){var n;if(J(e))return new t.Response(null,{status:406,statusText:"Not Acceptable",headers:{accept:"application/json; charset=utf-8, application/graphql-response+json; charset=utf-8"}});let i=td(e,{"Content-Type":r+"; charset=utf-8"},"application/json"===r&&!Array.isArray(e)&&Array.isArray(n=e.errors)&&n.length>0&&n.some(tu)&&e.errors.some(e=>!e.extensions?.originalError||tu(e.extensions.originalError))),o=tq(e);return new t.Response(o,i)}},tQ=e=>{if(null==e)return{};if((0,p.isSchema)(e))return{onPluginInit({setSchema:t}){t(e)}};if("then"in e){let t;return{onRequestParse:()=>({async onRequestParseDone(){t||=await e}}),onEnveloped({setSchema:e}){if(!t)throw Error("You provide a promise of a schema but it hasn't been resolved yet. Make sure you use this plugin with GraphQL Yoga.");e(t)}}}let t=new WeakMap;return{onRequestParse:({request:r,serverContext:n})=>({async onRequestParseDone(){let i=await e({...n,request:r});t.set(r,i)}}),onEnveloped({setSchema:e,context:r}){if(r?.request==null)throw Error("Request object is not available in the context. Make sure you use this plugin with GraphQL Yoga.");let n=t.get(r.request);if(null==n)throw Error("No schema found for this request. Make sure you use this plugin with GraphQL Yoga.");e(n)}}},tK=function(e){return new e.fetchAPI.Response('<!doctype html><html lang=en><head><meta charset=utf-8><title>Welcome to GraphQL Yoga</title><link rel=icon href=https://raw.githubusercontent.com/dotansimha/graphql-yoga/main/website/public/favicon.ico><style>body,html{padding:0;margin:0;height:100%;font-family:Inter,-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Oxygen,Ubuntu,Cantarell,\'Fira Sans\',\'Droid Sans\',\'Helvetica Neue\',sans-serif;color:#fff;background-color:#000}main>section.hero{display:flex;height:90vh;justify-content:center;align-items:center;flex-direction:column}.logo{display:flex;align-items:center}.buttons{margin-top:24px}h1{font-size:80px}h2{color:#888;max-width:50%;margin-top:0;text-align:center}a{color:#fff;text-decoration:none;margin-left:10px;margin-right:10px;font-weight:700;transition:color .3s ease;padding:4px;overflow:visible}a.graphiql:hover{color:rgba(255,0,255,.7)}a.docs:hover{color:rgba(28,200,238,.7)}a.tutorial:hover{color:rgba(125,85,245,.7)}svg{margin-right:24px}.not-what-your-looking-for{margin-top:5vh}.not-what-your-looking-for>*{margin-left:auto;margin-right:auto}.not-what-your-looking-for>p{text-align:center}.not-what-your-looking-for>h2{color:#464646}.not-what-your-looking-for>p{max-width:600px;line-height:1.3em}.not-what-your-looking-for>pre{max-width:300px}</style></head><body id=body><main><section class=hero><div class=logo><div><svg xmlns=http://www.w3.org/2000/svg viewBox="-0.41 0.445 472.812 499.811" height=150><defs><linearGradient id=paint0_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse gradientTransform="matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint1_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse gradientTransform="matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint2_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse gradientTransform="matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint3_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint4_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><linearGradient id=paint5_linear_1677_11483 x1=16 y1=14 x2=87.2132 y2=44.5982 gradientUnits=userSpaceOnUse><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><filter id=filter0_f_1677_11483 x=23 y=-25 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter><filter id=filter1_f_1677_11483 x=-24 y=19 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter><linearGradient id=paint6_linear_1677_11483 x1=30 y1=28 x2=66.1645 y2=44.4363 gradientUnits=userSpaceOnUse gradientTransform="matrix(8.139854, 0, 0, 8.139854, -130.346407, -113.25101)"><stop stop-color=#7433FF /><stop offset=1 stop-color=#FFA3FD /></linearGradient><filter id=filter2_f_1677_11483 x=-12 y=-44 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter><filter id=filter3_f_1677_11483 x=13 y=19 width=100 height=100 filterUnits=userSpaceOnUse color-interpolation-filters=sRGB><feFlood flood-opacity=0 result=BackgroundImageFix /><feBlend mode=normal in=SourceGraphic in2=BackgroundImageFix result=shape /><feGaussianBlur stdDeviation=12 result=effect1_foregroundBlur_1677_11483 /></filter></defs><mask id=mask0_1677_11483 style=mask-type:alpha maskUnits=userSpaceOnUse x=16 y=14 width=58 height=62><path d="M21 25.3501C21.7279 25.3501 22.4195 25.5056 23.0433 25.7853L42.1439 14.8C43.0439 14.3 44.1439 14 45.1439 14C46.2439 14 47.2439 14.3 48.1439 14.8L64.5439 24.3C63.3439 25.1 62.4439 26.3 61.8439 27.7L45.9438 18.5C45.6439 18.3 45.344 18.3 45.0441 18.3C44.7441 18.3 44.4439 18.4 44.1439 18.5L25.8225 29.0251C25.9382 29.4471 26 29.8914 26 30.3501C26 33.1115 23.7614 35.3501 21 35.3501C18.2386 35.3501 16 33.1115 16 30.3501C16 27.5887 18.2386 25.3501 21 25.3501Z" fill=url(#paint3_linear_1677_11483) /><path d="M67.2438 35.0329C65.3487 34.3219 64 32.4934 64 30.35C64 27.5886 66.2386 25.35 69 25.35C71.7614 25.35 74 27.5886 74 30.35C74 32.1825 73.0142 33.7848 71.5439 34.6554V55.2C71.5439 57.4 70.3439 59.4 68.5439 60.5L52.1439 69.9C52.1439 68.4 51.6438 66.9 50.7438 65.8L66.3439 56.8C66.9439 56.5 67.2438 55.9 67.2438 55.2V35.0329Z" fill=url(#paint4_linear_1677_11483) /><path d="M49.8439 69.1055C49.9458 69.5034 50 69.9204 50 70.3501C50 73.1115 47.7614 75.3501 45 75.3501C42.5102 75.3501 40.4454 73.5302 40.0633 71.1481L21.8439 60.6C19.9439 59.5 18.8439 57.5 18.8439 55.3V36.8C19.5439 37 20.3439 37.2 21.0439 37.2C21.7439 37.2 22.4439 37.1 23.0439 36.9V55.3C23.0439 56 23.4438 56.6 23.9438 56.9L41.3263 66.9583C42.2398 65.9694 43.5476 65.3501 45 65.3501C47.3291 65.3501 49.2862 66.9426 49.8419 69.0981L49.8436 69.0997L49.8439 69.1055Z" fill=url(#paint5_linear_1677_11483) /></mask><mask id=mask1_1677_11483 style=mask-type:alpha maskUnits=userSpaceOnUse x=30 y=28 width=30 height=30><path fill-rule=evenodd clip-rule=evenodd d="M49.3945 32.3945C49.3945 34.7088 47.5796 38.5469 45 38.5469C42.4271 38.5469 40.6055 34.7112 40.6055 32.3945C40.6055 29.9714 42.5769 28 45 28C47.4231 28 49.3945 29.9714 49.3945 32.3945ZM35.332 49.0433V48.2148C35.332 42.8117 37.8535 41.0004 39.8796 39.545L39.8801 39.5447C40.3928 39.1767 40.8604 38.8404 41.2488 38.4742C42.3293 39.6642 43.626 40.3047 45 40.3047C46.3752 40.3047 47.6725 39.6642 48.7529 38.4754C49.1408 38.841 49.6078 39.1773 50.1199 39.5447L50.1204 39.545C52.1465 41.0004 54.668 42.8117 54.668 48.2148V49.0433L53.8406 49.092C49.9848 49.3185 46.8646 46.9002 45 43.5777C43.1159 46.935 39.9847 49.318 36.1594 49.092L35.332 49.0433ZM58.1463 51.0747L58.1463 51.0746C57.0179 50.891 50.0128 49.7507 45.0007 55.693C40.0116 49.7553 33.1965 50.8592 31.9095 51.0677L31.9095 51.0677C31.7906 51.087 31.7189 51.0986 31.7002 51.0963C31.7005 51.0969 31.7011 51.1045 31.7023 51.1187C31.726 51.4003 31.9682 54.2745 34.0566 56.2422L30 58H60L55.8956 56.2422C57.8537 54.4764 58.1396 52.2685 58.2508 51.4092V51.4091C58.2697 51.2628 58.2836 51.1556 58.2998 51.0963C58.2881 51.0977 58.2356 51.0892 58.1463 51.0747ZM40.4836 50.104C42.3956 49.3212 43.6746 48.1737 45 46.61C46.332 48.1841 47.6159 49.3259 49.5164 50.104C49.5356 50.1425 49.5557 50.1805 49.5756 50.2182C49.5793 50.2253 49.583 50.2323 49.5867 50.2393C48.0911 50.8127 46.4264 51.825 45.0047 53.1444C43.5906 51.8221 41.9673 50.8196 40.4256 50.2153C40.4455 50.1784 40.4648 50.1415 40.4836 50.104Z" fill=black /></mask><path d="M 40.59 93.095 C 46.517 93.095 52.14 94.365 57.22 96.635 L 212.7 7.22 C 220.025 3.149 228.978 0.706 237.12 0.706 C 246.073 0.706 254.213 3.149 261.54 7.22 L 395.032 84.547 C 385.264 91.059 377.939 100.827 373.055 112.224 L 243.631 37.338 C 241.19 35.71 238.747 35.71 236.305 35.71 C 233.863 35.71 231.42 36.523 228.978 37.338 L 79.84 123.009 C 80.786 126.443 81.29 130.058 81.29 133.793 C 81.29 156.269 63.065 174.493 40.59 174.493 C 18.116 174.493 -0.109 156.269 -0.109 133.793 C -0.109 111.32 18.116 93.095 40.59 93.095 Z" fill=url(#paint0_linear_1677_11483) /><path d="M 417.01 171.913 C 401.585 166.126 390.603 151.238 390.603 133.793 C 390.603 111.32 408.83 93.095 431.303 93.095 C 453.777 93.095 472.001 111.32 472.001 133.793 C 472.001 148.706 463.976 161.755 452.011 168.835 L 452.011 336.07 C 452.011 353.977 442.243 370.258 427.591 379.21 L 294.098 455.726 C 294.098 443.516 290.029 431.306 282.703 422.353 L 409.683 349.093 C 414.568 346.651 417.01 341.767 417.01 336.07 L 417.01 171.913 Z" fill=url(#paint1_linear_1677_11483) /><path d="M 275.376 449.253 C 276.206 452.495 276.646 455.889 276.646 459.389 C 276.646 481.863 258.422 500.087 235.947 500.087 C 215.679 500.087 198.87 485.272 195.761 465.883 L 47.46 380.025 C 31.995 371.071 23.041 354.792 23.041 336.884 L 23.041 186.296 C 28.738 187.923 35.25 189.553 40.948 189.553 C 46.646 189.553 52.345 188.738 57.228 187.111 L 57.228 336.884 C 57.228 342.582 60.485 347.465 64.554 349.908 L 206.042 431.777 C 213.481 423.728 224.127 418.689 235.947 418.689 C 254.905 418.689 270.833 431.656 275.36 449.196 L 275.376 449.214 L 275.376 449.253 Z" fill=url(#paint2_linear_1677_11483) /><g mask=url(#mask0_1677_11483) transform="matrix(8.139854, 0, 0, 8.139854, -130.346375, -113.251038)"><g filter=url(#filter0_f_1677_11483)><circle cx=73 cy=25 r=26 fill=#ED2E7E /></g><g filter=url(#filter1_f_1677_11483)><circle cx=26 cy=69 r=26 fill=#1CC8EE /></g></g><path fill-rule=evenodd clip-rule=evenodd d="M 271.713 150.431 C 271.713 169.275 256.948 200.517 235.947 200.517 C 215.003 200.517 200.172 169.292 200.172 150.431 C 200.172 130.708 216.225 114.666 235.947 114.666 C 255.67 114.666 271.713 130.708 271.713 150.431 Z M 157.251 285.952 L 157.251 279.212 C 157.251 235.233 177.771 220.485 194.27 208.641 C 198.447 205.644 202.247 202.901 205.414 199.923 C 214.204 209.608 224.763 214.826 235.947 214.826 C 247.138 214.826 257.697 209.608 266.496 199.931 C 269.653 202.911 273.456 205.644 277.622 208.641 C 294.114 220.485 314.642 235.233 314.642 279.212 L 314.642 285.952 L 307.912 286.351 C 276.525 288.191 251.128 268.509 235.947 241.468 C 220.611 268.795 195.126 288.191 163.981 286.351 L 157.251 285.952 Z M 342.953 302.492 C 333.771 300.994 276.751 291.715 235.955 340.082 C 195.345 291.749 139.865 300.734 129.389 302.436 C 128.428 302.59 127.841 302.688 127.687 302.665 C 127.687 302.673 127.695 302.729 127.702 302.85 C 127.897 305.138 129.867 328.532 146.872 344.55 L 113.849 358.862 L 358.044 358.862 L 324.639 344.55 C 340.576 330.177 342.905 312.202 343.807 305.212 C 343.962 304.022 344.077 303.153 344.206 302.665 C 344.108 302.68 343.686 302.606 342.953 302.492 Z M 199.188 294.59 C 214.751 288.215 225.161 278.879 235.947 266.15 C 246.788 278.96 257.241 288.255 272.707 294.59 C 272.869 294.898 273.031 295.207 273.196 295.518 C 273.219 295.574 273.252 295.631 273.285 295.688 C 261.107 300.361 247.555 308.598 235.989 319.334 C 224.477 308.573 211.258 300.417 198.715 295.493 C 198.87 295.191 199.033 294.891 199.188 294.59 Z" fill=url(#paint6_linear_1677_11483) /><g mask=url(#mask1_1677_11483) transform="matrix(8.139854, 0, 0, 8.139854, -130.346375, -113.251038)"><g filter=url(#filter2_f_1677_11483)><circle cx=38 cy=6 r=26 fill=#ED2E7E /></g><g filter=url(#filter3_f_1677_11483)><circle cx=63 cy=69 r=26 fill=#1CC8EE /></g></g></svg></div><h1>GraphQL Yoga</h1></div><h2>The batteries-included cross-platform GraphQL Server.</h2><div class=buttons><a href=https://www.the-guild.dev/graphql/yoga-server/docs class=docs>Read the Docs</a> <a href=https://www.the-guild.dev/graphql/yoga-server/tutorial/basic class=tutorial>Start the Tutorial </a><a href=__GRAPHIQL_LINK__ class=graphiql>Visit GraphiQL</a></div></section><section class=not-what-your-looking-for><h2>Not the page you are looking for? \uD83D\uDC40</h2><p>This page is shown be default whenever a 404 is hit.<br>You can disable this by behavior via the <code>landingPage</code> option.</p><pre>\n          <code>\nimport { createYoga } from \'graphql-yoga\';\n\nconst yoga = createYoga({\n  landingPage: false\n})\n          </code>\n        </pre><p>If you expected this page to be the GraphQL route, you need to configure Yoga. Currently, the GraphQL route is configured to be on <code>__GRAPHIQL_LINK__</code>.</p><pre>\n          <code>\nimport { createYoga } from \'graphql-yoga\';\n\nconst yoga = createYoga({\n  graphqlEndpoint: \'__REQUEST_PATH__\',\n})\n          </code>\n        </pre></section></main></body></html>'.replace(/__GRAPHIQL_LINK__/g,e.graphqlEndpoint).replace(/__REQUEST_PATH__/g,e.url.pathname),{status:200,statusText:"OK",headers:{"Content-Type":"text/html"}})};async function tz({request:e,result:t,fetchAPI:r,onResultProcessHooks:n,serverContext:i}){let o;let a=[],s="*/*";for(let r of n)await r({request:e,acceptableMediaTypes:a,result:t,setResult(e){t=e},resultProcessor:o,setResultProcessor(e,t){o=e,s=t},serverContext:i});return o?o(t,r,s):new r.Response(null,{status:406,statusText:"Not Acceptable",headers:{accept:a.join("; charset=utf-8, ")}})}async function tY({params:e,enveloped:t}){let r=t.parse(e.query),n=t.validate(t.schema,r);if(n.length>0)return{errors:n};let i=await t.contextFactory(),o={schema:t.schema,document:r,contextValue:i,variableValues:e.variables,operationName:e.operationName},a=(0,p.getOperationAST)(r,e.operationName);return(a?.operation==="subscription"?t.subscribe:t.execute)(o)}let tJ=(e,t,r=globalThis.process?.env?.NODE_ENV==="development")=>{if(tu(e)){if(e.originalError){if("GraphQLError"===e.originalError.name)return e;let n={...e.extensions,unexpected:!0};return r&&(n.originalError={message:e.originalError.message,stack:e.originalError.stack}),k(t,{nodes:e.nodes,source:e.source,positions:e.positions,path:e.path,extensions:n})}return e}return k(t,{extensions:{unexpected:!0,originalError:r?e instanceof Error?{message:e.message,stack:e.stack}:e:void 0}})};class tX{getEnveloped;logger;graphqlEndpoint;fetchAPI;plugins;onRequestParseHooks;onParamsHooks;onExecutionResultHooks;onResultProcessHooks;maskedErrorsOpts;id;constructor(e){var t;if(this.id=e?.id??"yoga",this.fetchAPI={...eJ},e?.fetchAPI)for(let t in e.fetchAPI)e.fetchAPI[t]&&(this.fetchAPI[t]=e.fetchAPI[t]);let r=e?.logging==null||e.logging;this.logger="boolean"==typeof r?!0===r?ez():ez("silent"):"string"==typeof r?ez(r):r;let n="object"==typeof e?.maskedErrors&&e.maskedErrors.maskError||tJ,i=new WeakSet;this.maskedErrorsOpts=e?.maskedErrors===!1?null:{errorMessage:"Unexpected error.",..."object"==typeof e?.maskedErrors?e.maskedErrors:{},maskError:(e,t)=>{if(i.has(e))return e;let r=n(e,t,this.maskedErrorsOpts?.isDev);return r!==e&&this.logger.error(e),i.add(r),r}};let o=null==this.maskedErrorsOpts?null:this.maskedErrorsOpts,a=0;e?.batching&&(a="boolean"==typeof e.batching?10:e.batching.limit??10),this.graphqlEndpoint=e?.graphqlEndpoint||"/graphql";let s=this.graphqlEndpoint;for(let r of(this.plugins=[d({parse:p.parse,validate:p.validate,execute:ex,subscribe:ex,specifiedRules:p.specifiedRules}),!!e?.schema&&tQ(e.schema),e?.context!=null&&f(t=>e?.context?"function"==typeof e.context?e.context(t):e.context:{}),function({id:e=Date.now().toString(),logger:t=console,endpoint:r="/health"}={}){return{onRequest({endResponse:n,fetchAPI:i,request:o}){o.url.endsWith(r)&&(t.debug("Responding Health Check"),n(new i.Response(null,{status:200,headers:{"x-yoga-id":e}})))}}}({id:this.id,logger:this.logger,endpoint:e?.healthCheckEndpoint}),e?.cors!==!1&&function(e){let t=()=>({});if(null!=e){if("function"==typeof e)t=e;else if("object"==typeof e){let r={...e};t=()=>r}else!1===e&&(t=()=>!1)}return{onRequest({request:e,fetchAPI:t,endResponse:r}){"OPTIONS"===e.method.toUpperCase()&&r(new t.Response(null,{status:204,headers:{"Content-Length":"0"}}))},async onResponse({request:e,serverContext:r,response:n}){let i=await eX(e,t,r);if(null!=i)for(let e in i)n.headers.set(e,i[e])}}}(e?.cors),e?.graphiql!==!1&&function(e){let t,r;let n=e.logger??console;t="function"==typeof e?.options?e?.options:"object"==typeof e?.options?()=>e?.options:e?.options===!1?()=>!1:()=>({});let i=e?.render??tN,o=({URLPattern:t})=>r||=new t({pathname:e.graphqlEndpoint});return{async onRequest({request:r,serverContext:a,fetchAPI:s,endResponse:l,url:u}){if(function({headers:e,method:t}){return"GET"===t&&!!e?.get("accept")?.includes("text/html")}(r)&&(r.url.endsWith(e.graphqlEndpoint)||r.url.endsWith(`${e.graphqlEndpoint}/`)||u.pathname===e.graphqlEndpoint||u.pathname===`${e.graphqlEndpoint}/`||o(s).test(u))){n.debug("Rendering GraphiQL");let e=await t(r,a);if(e){let t=await i({...!0===e?{}:e});l(new s.Response(t,{headers:{"Content-Type":"text/html"},status:200}))}}}}}({graphqlEndpoint:s,options:e?.graphiql,render:e?.renderGraphiQL,logger:this.logger}),tG({match:ty,parse:tm}),tG({match:tT,parse:tE}),e?.multipart!==!1&&tG({match:tO,parse:tS}),tG({match:tb,parse:t_}),tG({match:tv,parse:tg}),function(){let e=new WeakMap,t={mediaTypes:["text/event-stream"],asyncIterables:!0,processResult:function(e,t){let r,n,i=12e3;globalThis.process?.env?.NODE_ENV==="test"&&(i=300);let o=td(e,{"Content-Type":"text/event-stream",Connection:"keep-alive","Cache-Control":"no-cache","Content-Encoding":"none"},!0),a=new t.TextEncoder,s=new t.ReadableStream({start(t){if(t.enqueue(a.encode(":\n\n")),n=setInterval(()=>{if(!t.desiredSize){clearInterval(n);return}t.enqueue(a.encode(":\n\n"))},i),v(e))r=e[Symbol.asyncIterator]();else{let t=!1;r={next:()=>t?Promise.resolve({done:!0,value:null}):(t=!0,Promise.resolve({done:!1,value:e}))}}},async pull(e){try{let t=await r.next();if(null!=t.value){e.enqueue(a.encode(`event: next
`));let r=tq(t.value);e.enqueue(a.encode(`data: ${r}

`))}t.done&&(e.enqueue(a.encode(`event: complete
`)),e.enqueue(a.encode(`data:

`)),clearInterval(n),e.close())}catch(t){e.error(t)}},async cancel(e){clearInterval(n),await r.return?.(e)}});return new t.Response(s,o)}},r=[t,tW,tH],n=[t,tH];return{onSubscribe({args:{contextValue:t}}){t.request&&e.set(t.request,!0)},onResultProcess({request:t,result:i,acceptableMediaTypes:o,setResultProcessor:a}){let s=e.get(t),l=function(e){let t=(e.headers.get("accept")||"*/*").replace(/\s/g,"").toLowerCase().split(","),r=[];for(let e of t){let[t,...n]=e.split(";");"charset=utf-8"===(n?.find(e=>e.includes("charset="))||"charset=utf-8")&&r.push(t)}return r.reverse()}(t),u=v(i);for(let e of s?n:r)for(let t of l)if(!u||e.asyncIterables)for(let r of e.mediaTypes)o.push(r),function(e,t){let[r,n]=e.split("/"),[i,o]=t.split("/");return("*"===i||i===r)&&("*"===o||o===n)}(r,t)&&a(e.processResult,r)}}}(),(t=(e,t,r)=>tz({request:t,result:{errors:tp(e,this.maskedErrorsOpts,this.logger)},fetchAPI:this.fetchAPI,onResultProcessHooks:this.onResultProcessHooks,serverContext:r}),{onRequest({requestHandler:e,setRequestHandler:r,fetchAPI:n}){let i=t||function(e=eY.Response){return function(t){return t.details||t.status||t.headers||"HTTPError"===t.name?new e("object"==typeof t.details?JSON.stringify(t.details):t.message,{status:t.status,headers:t.headers||{}}):(console.error(t),ti(e))}}(n.Response);r(function(t,r){try{let o=e(t,r);if(e9(o))return o.catch(e=>i(e,t,r)||ti(n.Response));return o}catch(e){return i(e,t,r)||ti(n.Response)}})}}),...e?.plugins??[],{onPluginInit({addPlugin:t}){var r,n;e?.parserAndValidationCache!==!1&&t(function({documentCache:e=tU(),errorCache:t=tU(),validationCache:r=!0}){let n=tU();return{onParse({params:r,setParsedDocument:n}){let i=r.source.toString(),o=e.get(i);if(o){n(o);return}let a=t.get(i);if(a)throw a;return({result:r})=>{null!=r&&(r instanceof Error?t.set(i,r):e.set(i,r))}},onValidate({params:{schema:e,documentAST:t,rules:i},setResult:o}){if(null!=e&&!1!==r){let r=i?.map(e=>e.name).join(",")||"",a=n.get(r);a||(a=new WeakMap,n.set(r,a));let s=a.get(e);s||(s=new WeakMap,a.set(e,s));let l=s.get(t);if(l){o(l);return}return({result:e})=>{null!=e&&s?.set(t,e)}}}}}(e?.parserAndValidationCache&&e?.parserAndValidationCache!==!0?e?.parserAndValidationCache:{})),t((r=a,{onRequestParse:()=>({onRequestParseDone({requestParserResult:e}){if(Array.isArray(e)){if(!r)throw k("Batching is not supported.",{extensions:{http:{status:400}}});if(e.length>r)throw k(`Batching is limited to ${r} operations per request.`,{extensions:{http:{status:413}}})}}})})),t((n=e?.extraParamNames,{onParams({params:e}){(function(e,t){if("object"!==tI(e))throw k(`Expected params to be an object but given ${tI(e)}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}}}});if(function(e,t){if(null==e||"object"!=typeof e)throw k('Invalid "params" in the request body',{extensions:{http:{spec:!0,status:400}}});for(let r in e)if(null!=e[r]&&!tw.has(r)){if(t?.includes(r))continue;throw k(`Unexpected parameter "${r}" in the request body.`,{extensions:{http:{status:400}}})}}(e,t),null==e.query)throw k("Must provide query string.",{extensions:{http:{spec:!0,status:400,headers:{Allow:"GET, POST"}}}});let r=tI(e.query);if("string"!==r)throw k(`Expected "query" param to be a string, but given ${r}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}}}});let n=tI(e.variables);if(!["object","null","undefined"].includes(n))throw k(`Expected "variables" param to be empty or an object, but given ${n}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}}}});let i=tI(e.extensions);if(!["object","null","undefined"].includes(i))throw k(`Expected "extensions" param to be empty or an object, but given ${i}.`,{extensions:{http:{status:400,headers:{Allow:"GET, POST"}}}})})(e,n)}})),t(function(e){let t;function r({URLPattern:r}){return t||=new r({pathname:e.graphqlEndpoint})}let n=e.landingPageRenderer||tK;return{onRequest({request:t,fetchAPI:i,endResponse:o,url:a}){if(!t.url.endsWith(e.graphqlEndpoint)&&!t.url.endsWith(`${e.graphqlEndpoint}/`)&&a.pathname!==e.graphqlEndpoint&&a.pathname!==`${e.graphqlEndpoint}/`&&!r(i).test(a)){if(!0===e.showLandingPage&&"GET"===t.method&&t.headers?.get("accept")?.includes("text/html")){let s=n({request:t,fetchAPI:i,url:a,graphqlEndpoint:e.graphqlEndpoint,get urlPattern(){return r(i)}});return G(s)?s.then(o):void o(s)}o(new i.Response("",{status:404,statusText:"Not Found"}))}}}}({graphqlEndpoint:s,showLandingPage:!!(e?.landingPage??!0),landingPageRenderer:"function"==typeof e?.landingPage?e.landingPage:void 0})),t({onRequestParse({request:e}){var t;if(!("GET"===(t=e.method)||"POST"===t))throw k("GraphQL only supports GET and POST requests.",{extensions:{http:{status:405,headers:{Allow:"GET, POST"}}}})}}),t({onParse:()=>({result:e,context:{request:t,params:{operationName:r}={}}})=>{if(t){if(e instanceof Error)throw e instanceof p.GraphQLError&&(e.extensions.http={spec:!0,status:400}),e;!function(e,t,r){let n=t?(0,p.getOperationAST)(t,r)??void 0:void 0;if(!n)throw k("Could not determine what operation to execute.",{extensions:{http:{status:400}}});if("mutation"===n.operation&&"GET"===e)throw k("Can only perform a mutation operation from a POST request.",{extensions:{http:{status:405,headers:{Allow:"POST"}}}})}(t.method,e,r)}}}),o&&(t({onSubscribe:()=>({onSubscribeError({error:e}){if(tc(e))throw e}})}),t(function(e){let t=e?.maskError??_,r=e?.errorMessage||"Unexpected error.",n=T(t,r);return{onPluginInit(e){e.registerContextErrorHandler(({error:e,setError:n})=>{n(t(e,r))})},onExecute:()=>({onExecuteDone:e=>g(e,n)}),onSubscribe:()=>({onSubscribeResult:e=>g(e,n),onSubscribeError({error:e,setError:n}){n(t(e,r))}})}}(o))),t({onValidate:()=>({valid:e,result:t})=>{if(!e)for(let e of t)e.extensions.http={...e.extensions.http,spec:e.extensions.http?.spec??!0,status:e.extensions.http?.status??400}}})}}],this.getEnveloped=function(e){let t=e.plugins.filter(S),r=function({plugins:e}){let t=null,r=!1,n=()=>O("parse"),i=()=>O("validate"),o=()=>O("execute"),a=()=>O("subscribe"),s=(n,i=-1)=>{if(t=n,r)for(let[r,n]of e.entries())r!==i&&n.onSchemaChange&&n.onSchemaChange({schema:t,replaceSchema:e=>{s(e,r)}})},l=[];for(let t=0;t<e.length;t++){let r=e[t],n=[];r.onPluginInit&&r.onPluginInit({plugins:e,addPlugin:e=>{n.push(e)},setSchema:e=>s(e,t),registerContextErrorHandler:e=>l.push(e)}),n.length&&e.splice(t+1,0,...n)}let u={init:[],parse:[],validate:[],subscribe:[],execute:[],context:[]};for(let{onContextBuilding:t,onExecute:r,onParse:n,onSubscribe:i,onValidate:o,onEnveloped:a}of e)a&&u.init.push(a),t&&u.context.push(t),r&&u.execute.push(r),n&&u.parse.push(n),i&&u.subscribe.push(i),o&&u.validate.push(o);let c=u.parse.length?e=>(t,r)=>{let i=null,o=n,a=[];for(let n of u.parse){let s=n({context:e,extendContext:t=>{Object.assign(e,t)},params:{source:t,options:r},parseFn:o,setParseFn:e=>{o=e},setParsedDocument:e=>{i=e}});s&&a.push(s)}if(null===i)try{i=o(t,r)}catch(e){i=e}for(let t of a)t({context:e,extendContext:t=>{Object.assign(e,t)},replaceParseResult:e=>{i=e},result:i});if(null===i)throw Error("Failed to parse document.");if(i instanceof Error)throw i;return E.set(i,t.toString()),i}:()=>n,p=u.validate.length?e=>(t,r,n,o,a)=>{let s=n?[...n]:void 0,l=i,c=null,p=[];for(let n of u.validate){let i=n({context:e,extendContext:t=>{Object.assign(e,t)},params:{schema:t,documentAST:r,rules:s,typeInfo:o,options:a},validateFn:l,addValidationRule:e=>{s||(s=[]),s.push(e)},setValidationFn:e=>{l=e},setResult:e=>{c=e}});i&&p.push(i)}if(c||(c=l(t,r,s,o,a)),!c)return;let d=0===c.length;for(let t of p)t({valid:d,result:c,context:e,extendContext:t=>{Object.assign(e,t)},setResult:e=>{c=e}});return c}:()=>i,d=u.context.length?e=>async t=>{let r=[];t&&Object.assign(e,t);try{let t=!1;for(let n of u.context){let i=await n({context:e,extendContext:t=>{Object.assign(e,t)},breakContextBuilding:()=>{t=!0}});if("function"==typeof i&&r.push(i),!0===t)break}for(let t of r)t({context:e,extendContext:t=>{Object.assign(e,t)}});return e}catch(r){let t=r;for(let r of l)r({context:e,error:t,setError:e=>{t=e}});throw t}}:e=>t=>(t&&Object.assign(e,t),e),f=u.subscribe.length?h(async e=>{let t,r=a,n=[],i=[],o=e.contextValue||{};for(let a of u.subscribe){let s=await a({subscribeFn:r,setSubscribeFn:e=>{r=e},extendContext:e=>{Object.assign(o,e)},args:e,setResultAndStopExecution:e=>{t=e}});if(s&&(s.onSubscribeResult&&n.push(s.onSubscribeResult),s.onSubscribeError&&i.push(s.onSubscribeError)),void 0!==t)break}if(void 0===t&&(t=await r({...e,contextValue:o})),!t)return;let s=[],l=[];for(let r of n){let n=r({args:e,result:t,setResult:e=>{t=e}});n&&(n.onNext&&s.push(n.onNext),n.onEnd&&l.push(n.onEnd))}return s.length&&v(t)&&(t=y(t,async t=>{for(let r of s)await r({args:e,result:t,setResult:e=>t=e});return t})),l.length&&v(t)&&(t=b(t,()=>{for(let e of l)e()})),i.length&&v(t)&&(t=function(e,t){let r=e[Symbol.asyncIterator](),n={[Symbol.asyncIterator]:()=>n,async next(){try{return await r.next()}catch(e){return t(e),{done:!0,value:void 0}}},async return(){let e=r.return?.();return e?await e:{done:!0,value:void 0}},async throw(e){let t=r.throw?.();if(t)return await t;throw e}};return n}(t,e=>{let t=e;for(let e of i)e({error:t,setError:e=>{t=e}});throw t})),t}):h(a),g=u.execute.length?m(async e=>{let t,r=o,n=[],i=e.contextValue||{};for(let o of u.execute){let a=await o({executeFn:r,setExecuteFn:e=>{r=e},setResultAndStopExecution:e=>{t=e},extendContext:e=>{if("object"==typeof e)Object.assign(i,e);else throw Error(`Invalid context extension provided! Expected "object", got: "${JSON.stringify(e)}" (${typeof e})`)},args:e});if(a?.onExecuteDone&&n.push(a.onExecuteDone),void 0!==t)break}void 0===t&&(t=await r({...e,contextValue:i}));let a=[],s=[];for(let r of n){let n=await r({args:e,result:t,setResult:e=>{t=e}});n&&(n.onNext&&a.push(n.onNext),n.onEnd&&s.push(n.onEnd))}return a.length&&v(t)&&(t=y(t,async t=>{for(let r of a)await r({args:e,result:t,setResult:e=>{t=e}});return t})),s.length&&v(t)&&(t=b(t,()=>{for(let e of s)e()})),t}):m(o);if(r=!0,t)for(let[r,n]of e.entries())n.onSchemaChange&&n.onSchemaChange({schema:t,replaceSchema:e=>s(e,r)});return{getCurrentSchema:()=>t,init:e=>{for(let[t,r]of u.init.entries())r({context:e,extendContext:t=>{e&&Object.assign(e,t)},setSchema:e=>s(e,t)})},parse:c,validate:p,execute:g,subscribe:f,contextFactory:d}}({plugins:t}),n=(e={})=>(r.init(e),{parse:r.parse(e),validate:r.validate(e),contextFactory:r.contextFactory(e),execute:r.execute,subscribe:r.subscribe,schema:r.getCurrentSchema()});return n._plugins=t,n}({plugins:this.plugins}),this.plugins=this.getEnveloped._plugins,this.onRequestParseHooks=[],this.onParamsHooks=[],this.onExecutionResultHooks=[],this.onResultProcessHooks=[],this.plugins))r&&(r.onYogaInit&&r.onYogaInit({yoga:this}),r.onRequestParse&&this.onRequestParseHooks.push(r.onRequestParse),r.onParams&&this.onParamsHooks.push(r.onParams),r.onExecutionResult&&this.onExecutionResultHooks.push(r.onExecutionResult),r.onResultProcess&&this.onResultProcessHooks.push(r.onResultProcess))}async getResultForParams({params:e,request:t,batched:r},n){let i;let o=n;try{for(let r of this.onParamsHooks)await r({params:e,request:t,setParams(t){e=t},setResult(e){i=e},fetchAPI:this.fetchAPI});if(null==i){let a=n.request===t?{params:e}:{request:t,params:e};o=Object.assign(r?Object.create(n):n,a);let s=this.getEnveloped(o);this.logger.debug("Processing GraphQL Parameters"),i=await tY({params:e,enveloped:s}),this.logger.debug("Processing GraphQL Parameters done.")}if(v(i)){let e=i[Symbol.asyncIterator]();i=X(e,e=>e,e=>{if("AbortError"===e.name)throw this.logger.debug("Request aborted"),e;return{errors:tp(e,this.maskedErrorsOpts,this.logger)}})}}catch(e){i={errors:tp(e,this.maskedErrorsOpts,this.logger)}}for(let e of this.onExecutionResultHooks)await e({result:i,setResult(e){i=e},request:t,context:o});return i}handle=async(e,t)=>{let r,n=new Proxy({},{get:(t,r,i)=>Reflect.get(n=new this.fetchAPI.URL(e.url,"http://localhost"),r,n)}),i=[];for(let o of this.onRequestParseHooks){let a=await o({request:e,url:n,requestParser:r,serverContext:t,setRequestParser(e){r=e}});a?.onRequestParseDone!=null&&i.push(a.onRequestParseDone)}if(this.logger.debug("Parsing request to extract GraphQL parameters"),!r)return new this.fetchAPI.Response(null,{status:415,statusText:"Unsupported Media Type"});let o=await r(e);for(let e of i)await e({requestParserResult:o,setRequestParserResult(e){o=e}});let a=await (Array.isArray(o)?Promise.all(o.map(r=>this.getResultForParams({params:r,request:e,batched:!0},t))):this.getResultForParams({params:o,request:e,batched:!1},t));return tz({request:e,result:a,fetchAPI:this.fetchAPI,onResultProcessHooks:this.onResultProcessHooks,serverContext:t})}}let tZ=`

  type WorkOfArt {
    workOfArtId: ID!
    creationDate: Date
    width: Int
    height: Int
    url: String!
    fileName: String!
    title: String!
    medium: String!
    creator: [Artist!]! @relationship(type: "CREATED", direction: IN)
    style: [Style!]! @relationship(type: "CATEGORIZED_AS", direction: OUT)
  }
  
  type Artist {
    artistId: ID!
    name: String!
    nationality: String
    birthYear: Date!
    birthPlace: Point!
    works: [WorkOfArt!]! @relationship(type: "CREATED", direction: OUT)
    styles: [Style!]! @relationship(type: "ASSOCIATED_WITH", direction: OUT)
  }

  type Style {
    styleId: ID!
    name: String!
  }

  type Business {
    businessId: ID!
    waitTime: Int! @customResolver
    name: String!
    address: String!
    city: String!
    state: String!
    location: Point!
    averageStars: Float!
     #@authentication
     @cypher(
       statement: "MATCH (this)<-[:REVIEWS]-(r:Review) RETURN avg(r.stars) as avgStars"  
       columnName: "avgStars"
     )
    recommended(first: Int = 1): [Business!]!
      @cypher(
        statement: """
        MATCH (this)<-[:REVIEWS]-(:Review)<-[:WROTE]-(u:User)
        MATCH (u)-[:WROTE]->(:Review)-[:REVIEWS]->(rec:Business)
        WITH rec, COUNT(*) AS score
        RETURN rec ORDER BY score DESC LIMIT $first
        """
        columnName: "rec"
      )        
    #reviews: [Review!]! @relationship(type: "REVIEWS", direction: IN)
    #categories: [Category!]! @relationship(type: "IN_CATEGORY", direction: OUT)
  }

`,{NEO4J_URI:t0,NEO4J_USERNAME:t1,NEO4J_PASSWORD:t2}=process.env,t4=c().driver(t0,c().auth.basic(t1,t2)),t3=new l.Neo4jGraphQL({typeDefs:tZ,resolvers:{WorkOfArt:{fileName:(e,t,r,n)=>e.fileName.toString()},Business:{waitTime:(e,t,r,n)=>{let i=[0,5,10,15,30,45];return i[Math.floor(Math.random()*i.length)]}}},driver:t4,debug:!0,features:{authorization:{key:{url:"https://dev-spxf3pmvngdhjouv.us.auth0.com/.well-known/jwks.json"}}}}),{handleRequest:t5}=function(e){let t=new tX(e);return function(e,t){let r={...eJ,...t?.fetchAPI},n="function"==typeof e?e:e.handle,i=[],o=[];if(t?.plugins!=null)for(let e of t.plugins)e.onRequest&&i.push(e.onRequest),e.onResponse&&o.push(e.onResponse);let a=i.length>0||o.length>0?function(e,t){let a,s=n;if(0===i.length)return p();let l=new Proxy(tl,{get:(t,n,i)=>Reflect.get(l=new r.URL(e.url,"http://localhost"),n,l)}),u=te(i,(n,i)=>n({request:e,setRequest(t){e=t},serverContext:t,fetchAPI:r,url:l,requestHandler:s,setRequestHandler(e){s=e},endResponse(e){a=e,e&&i()}}));function c(n){if(0===o.length)return n;let i={request:e,response:n,serverContext:t,setResponse(e){n=e},fetchAPI:r},a=te(o,e=>e(i));return e9(a)?a.then(()=>n):n}function p(){if(!a){let r=s(e,t);return e9(r)?r.then(c):c(r)}return c(a)}return e9(u)?u.then(p):p()}:n;function s(e,...t){let n=t.length>1?e7(...t):t[0]||{};return a(function(e,t){let r;let n=e.raw||e.req||e,i=function(e){let t=function(e){if(e.headers?.[":authority"])return e.headers?.[":authority"];if(e.headers?.host)return e.headers?.host;let t=function(e){if(e.socket?.localPort)return e.socket?.localPort;let t=e.headers?.[":authority"]||e.headers?.host;return t?.split(":")?.[1]||80}(e);if(e.hostname)return e.hostname+":"+t;let r=e.socket?.localAddress;return!r||r?.includes("::")||r?.includes("ffff")?"localhost":`${r}:${t}`}(e),r=e.protocol||(e.socket?.encrypted?"https":"http"),n=e.originalUrl||e.url||"/graphql";return`${r}://${t}${n}`}(n);if(e.query){let t=new eY.URL(i);for(let r in e.query)t.searchParams.set(r,e.query[r]);i=t.toString()}let o=e2.get(e);e2.delete(e);let a=e.headers;if(e.headers?.[":method"])for(let t in a={},e.headers)t.startsWith(":")||(a[t]=e.headers[t]);if(o?.once){let e;if(t!==globalThis.Request)r=new e0,e=()=>r.sendAbort();else{let t=new AbortController;r=t.signal,e=()=>t.abort()}let i=()=>{r&&!r.aborted&&(n.aborted=!0,e())};o.once("error",i),o.once("close",i),o.once("finish",()=>{o.removeListener("close",i)})}if("GET"===e.method||"HEAD"===e.method)return new t(i,{method:e.method,headers:a,signal:r});let s=e.body;if(null!=s&&Object.keys(s).length>0){if(function(e){let t=e[Symbol.toStringTag];return!!("string"==typeof e||"Uint8Array"===t||"Blob"===t||"FormData"===t||"URLSearchParams"===t||eZ(e))}(s))return new t(i,{method:e.method,headers:a,body:s,signal:r});let n=new t(i,{method:e.method,headers:a,signal:r});return n.headers.get("content-type")?.includes("json")||n.headers.set("content-type","application/json; charset=utf-8"),new Proxy(n,{get:(e,t,r)=>{switch(t){case"json":return async()=>s;case"text":return async()=>JSON.stringify(s);default:return Reflect.get(e,t,r)}}})}return globalThis.process?.versions?.bun&&e4(n)?(e1||(e1=!0,console.warn(`You use Bun Node compatibility mode, which is not recommended!
It will affect your performance. Please check our Bun integration recipe, and avoid using 'http' for your server implementation.`)),new t(i,{method:e.method,headers:a,duplex:"half",body:new ReadableStream({start(e){n.on("data",t=>{e.enqueue(t)}),n.on("error",t=>{e.error(t)}),n.on("end",()=>{e.close()})},cancel(e){n.destroy(e)}}),signal:r})):new t(i,{method:e.method,headers:a,body:n,duplex:"half",signal:r})}(e,r.Request),n)}function l(e,t,...r){let n=t.raw||t;return e2.set(e,n),s(e,...r)}function u(e,t,...n){let i;let o=[];try{i=l(e,t,{req:e,res:t,waitUntil(e){o.push(e.catch(e=>console.error(e)))}},...n)}catch(e){i=tt(e,r.Response)}if(e9(i))return i.catch(e=>tt(e,r.Response)).then(r=>e6(r,t,e)).catch(e=>{console.error(`Unexpected error while handling request: ${e.message||e}`)});try{return e6(i,t,e)}catch(e){console.error(`Unexpected error while handling request: ${e.message||e}`)}}function c(e,t,...n){let i;let o=[],s={res:e,req:t,waitUntil(e){o.push(e.catch(e=>console.error(e)))}},l=n.filter(e=>null!=e).length>0?e7(s,...n):s,u=new e0,p=e.end.bind(e),d=!1;e.end=function(e){return d=!0,p(e)},e.onAborted.bind(e)(function(){u.sendAbort()}),e.onAborted=function(e){u.addEventListener("abort",e)};let f=function({req:e,res:t,fetchAPI:r,signal:n}){let i;let o=e.getMethod();if("get"!==o&&"head"!==o){let e;let o=(i=new r.ReadableStream({start(t){e=t}})).readable;if(o)n.addEventListener("abort",()=>{o.push(null)}),t.onData(function(e,t){let r=Buffer.from(e,0,e.byteLength);o.push(Buffer.from(r)),t&&o.push(null)});else{let r=!1;n.addEventListener("abort",()=>{r||(r=!0,e.close())}),t.onData(function(t,n){let i=Buffer.from(t,0,t.byteLength);e.enqueue(Buffer.from(i)),n&&(r=!0,e.close())})}}let a=new r.Headers;e.forEach((e,t)=>{a.append(e,t)});let s=`http://localhost${e.getUrl()}`,l=e.getQuery();return l&&(s+=`?${l}`),new r.Request(s,{method:o,headers:a,body:i,signal:n,duplex:"half"})}({req:t,res:e,fetchAPI:r,signal:u});try{i=a(f,l)}catch(e){i=tt(e,r.Response)}if(e9(i))return i.catch(e=>tt(e,r.Response)).then(t=>{if(!u.aborted&&!d)return ta(e,t,u)}).catch(e=>{console.error(`Unexpected error while handling request: 
${e.stack||e.message||e}`)});try{if(!u.aborted&&!d)return ta(e,i,u)}catch(e){console.error(`Unexpected error while handling request: 
${e.stack||e.message||e}`)}}function p(e,...t){if(!e.respondWith||!e.request)throw TypeError(`Expected FetchEvent, got ${e}`);let r=t.filter(e=>null!=e),n=r.length>0?e7({},e,...r):tr(e),i=a(e.request,n);e.respondWith(i)}function d(e,...t){let r;let n=t.filter(e=>null!=e),i=a(e,n.length>1?e7({},...n):tr(n[0],null==n[0]||null==n[0].waitUntil?r=[]:void 0));return r?.length?ts(r).then(()=>i):i}let f=(e,...t)=>{if("string"==typeof e||"href"in e){let[n,...i]=t;return null!=n&&"object"==typeof n&&("body"in n||"cache"in n||"credentials"in n||"headers"in n||"integrity"in n||"keepalive"in n||"method"in n||"mode"in n||"redirect"in n||"referrer"in n||"referrerPolicy"in n||"signal"in n||"window"in n)?tn(d(new r.Request(e,n),...i),n?.signal):d(new r.Request(e),...t)}return tn(d(e,...t),e._signal)},h=(e,...t)=>{let[r,...n]=t;if(e4(e)){if(!e3(r))throw TypeError(`Expected ServerResponse, got ${r}`);return u(e,r,...n)}if(e.onData)return c(e,r,...n);if(e3(r))throw TypeError("Got Node response without Node request");return function(e){try{return!!e?.request}catch{return!1}}(e)?null!=e&&null!=e.request&&null!=e.respondWith?p(e,...t):d(e.request,e,...t):f(e,...t)},y={handleRequest:d,fetch:f,handleNodeRequest:s,handleNodeRequestAndResponse:l,requestListener:u,handleEvent:p,handleUWS:c,handle:h},m=new Proxy(h,{has:(t,r)=>r in y||r in h||e&&r in e,get:(t,r)=>{let n=y[r];if(n)return n.bind?n.bind(y):n;let i=h[r];if(i)return i.bind?i.bind(h):i;if(e){let t=e[r];if(t)return t.bind?function(...t){let n=e[r](...t);return n===e?m:n}:t}},apply:(e,t,r)=>h(...r)});return m}(t,{fetchAPI:t.fetchAPI,plugins:t.plugins})}({schema:(async()=>(console.log("Building GraphQL server"),await t3.getSchema()))(),graphqlEndpoint:"/graphqlServer",fetchAPI:{Response},context:async({request:e})=>({token:e.headers.get("Authorization")})}),t8=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/graphqlServer/route",pathname:"/graphqlServer",filename:"route",bundlePath:"app/graphqlServer/route"},resolvedPagePath:"D:\\virtualMuseum\\seventhvirtualmuseum\\app\\graphqlServer\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:t6,staticGenerationAsyncStorage:t7,serverHooks:t9}=t8,re="/graphqlServer/route";function rt(){return(0,s.patchFetch)({serverHooks:t9,staticGenerationAsyncStorage:t7})}},92884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ARGUMENT_COMPOSITION_STRATEGIES=void 0;let n=r(48170),i=r(56563),o=r(24056);function a(e){return(t,r)=>{let n=e(t);return n.some(e=>(0,i.sameType)(e,r))?{valid:!0}:{valid:!1,supportedMsg:`type(s) ${n.join(", ")}`}}}function s(){return(e,t)=>(0,n.isNonNullType)(t)&&(0,n.isListType)(t.ofType)?{valid:!0}:{valid:!1,supportedMsg:"non nullable list types of any type"}}t.ARGUMENT_COMPOSITION_STRATEGIES={MAX:{name:"MAX",isTypeSupported:a(e=>[new n.NonNullType(e.intType())]),mergeValues:e=>Math.max(...e)},MIN:{name:"MIN",isTypeSupported:a(e=>[new n.NonNullType(e.intType())]),mergeValues:e=>Math.min(...e)},SUM:{name:"SUM",isTypeSupported:a(e=>[new n.NonNullType(e.intType())]),mergeValues:e=>e.reduce((e,t)=>e+t,0)},INTERSECTION:{name:"INTERSECTION",isTypeSupported:s(),mergeValues:e=>e.reduce((e,t)=>e.filter(e=>t.some(t=>(0,o.valueEquals)(e,t))),e[0])},UNION:{name:"UNION",isTypeSupported:s(),mergeValues:e=>e.reduce((e,t)=>{let r=t.filter(t=>!e.some(e=>(0,o.valueEquals)(t,e)));return e.concat(r)},[])},NULLABLE_AND:{name:"NULLABLE_AND",isTypeSupported:a(e=>[e.booleanType()]),mergeValues:e=>e.reduce((e,t)=>null==e?t:null==t?e:e&&t,void 0)},NULLABLE_MAX:{name:"NULLABLE_MAX",isTypeSupported:a(e=>[e.intType(),new n.NonNullType(e.intType())]),mergeValues:e=>e.reduce((e,t)=>void 0!==e&&void 0!==t?Math.max(e,t):null!=e?e:t,void 0)},NULLABLE_UNION:{name:"NULLABLE_UNION",isTypeSupported:(e,t)=>({valid:(0,n.isListType)(t)}),mergeValues:e=>{if(e.every(e=>void 0===e))return;let t=new Set;for(let r of e)if(Array.isArray(r))for(let e of r)t.add(e);return Array.from(t)}}}},62161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.builtTypeReference=t.buildSchemaFromAST=t.buildSchema=void 0;let n=r(57343),i=r(24056),o=r(48170),a=r(74533),s=r(93566);function l(e){return e?(0,i.valueFromASTUntyped)(e):void 0}function u(e,t){var r;let i=[],l=new o.Schema(null==t?void 0:t.blueprint),{directiveDefinitions:u,typeDefinitions:p,typeExtensions:h,schemaDefinitions:g,schemaExtensions:b}=function(e,t,r){let n=[],i=[],l=[],u=[],p=[];for(let d of e.definitions)switch(d.kind){case"OperationDefinition":case"FragmentDefinition":r.push(a.ERRORS.INVALID_GRAPHQL.err("Invalid executable definition found while building schema",{nodes:d}));continue;case"SchemaDefinition":u.push(d),t.schemaDefinition.preserveEmptyDefinition=!0;break;case"SchemaExtension":p.push(d);break;case"ScalarTypeDefinition":case"ObjectTypeDefinition":case"InterfaceTypeDefinition":case"UnionTypeDefinition":case"EnumTypeDefinition":case"InputObjectTypeDefinition":if(s.introspectionTypeNames.includes(d.name.value))continue;i.push(d);let e=t.type(d.name.value);if(!e||e.isBuiltIn)e=t.addType((0,o.newNamedType)(c(d.kind),d.name.value));else if(e.preserveEmptyDefinition)throw a.ERRORS.INVALID_GRAPHQL.err(`There can be only one type named "${d.name.value}"`);e.preserveEmptyDefinition=!0;break;case"ScalarTypeExtension":case"ObjectTypeExtension":case"InterfaceTypeExtension":case"UnionTypeExtension":case"EnumTypeExtension":case"InputObjectTypeExtension":if(s.introspectionTypeNames.includes(d.name.value))continue;l.push(d);let f=t.type(d.name.value);if(f){if(f.isBuiltIn)throw a.ERRORS.INVALID_GRAPHQL.err(`Cannot extend built-in type "${d.name.value}"`)}else t.addType((0,o.newNamedType)(c(d.kind),d.name.value));break;case"DirectiveDefinition":n.push(d),t.addDirectiveDefinition(d.name.value)}return{directiveDefinitions:n,typeDefinitions:i,typeExtensions:l,schemaDefinitions:u,schemaExtensions:p}}(e,l,i);for(let e of p)e.kind===n.Kind.ENUM_TYPE_DEFINITION&&m(e,l.type(e.name.value));for(let e of h)if(e.kind===n.Kind.ENUM_TYPE_EXTENSION){let t=l.type(e.name.value).newExtension();t.sourceAST=e,m(e,l.type(e.name.value),t)}for(let e of u)(function(e,t,r){var n;for(let i of null!==(n=e.arguments)&&void 0!==n?n:[])_(i,t.addArgument(i.name.value),r,!1);t.repeatable=e.repeatable;let i=e.locations.map(({value:e})=>e);t.addLocations(...i),v(e,t)})(e,l.directive(e.name.value),i);for(let e of g)d(e,l.schemaDefinition,i);for(let e of b)d(e,l.schemaDefinition,i,l.schemaDefinition.newExtension());for(let e of(i.push(...l.blueprint.onDirectiveDefinitionAndSchemaParsed(l)),u))(function(e,t,r){var n;for(let i of null!==(n=e.arguments)&&void 0!==n?n:[])f(i,t.argument(i.name.value),r)})(e,l.directive(e.name.value),i);for(let e of p)y(e,l.type(e.name.value),l.blueprint,i);for(let e of h){let t=l.type(e.name.value),r=t.newExtension();r.sourceAST=e,y(e,t,l.blueprint,i,r)}if(i.length>0)throw(0,o.ErrGraphQLValidationFailed)(i);return(null===(r=null==t?void 0:t.validate)||void 0===r||r)&&l.validate(),l}function c(e){let t=e.endsWith("Definition")?"Definition":"Extension";return e.slice(0,e.length-t.length)}function p(e,t,r){try{e()}catch(n){let e=(0,a.errorCauses)(n);if(e)for(let n of e){let e=n.nodes?[t,...n.nodes]:t;r.push((0,a.withModifiedErrorNodes)(n,e))}else throw n}}function d(e,t,r,n){var i,o;for(let o of null!==(i=e.operationTypes)&&void 0!==i?i:[])p(()=>t.setRoot(o.operation,o.type.name.value).setOfExtension(n),o,r);t.sourceAST=e,"description"in e&&(t.description=null===(o=e.description)||void 0===o?void 0:o.value),f(e,t,r,n)}function f(e,t,r,n){var i;for(let o of null!==(i=e.directives)&&void 0!==i?i:[])p(()=>{if(t===t.schema().schemaDefinition&&"link"!==o.name.value&&t.schema().blueprint.applyDirectivesAfterParsing())t.addUnappliedDirective({extension:n,directive:o,args:h(o),nameOrDef:o.name.value});else{let e=t.applyDirective(o.name.value,h(o));e.setOfExtension(n),e.sourceAST=o}},o,r)}function h(e){var t;let r=Object.create(null);for(let n of null!==(t=e.arguments)&&void 0!==t?t:[])r[n.name.value]=l(n.value);return r}function y(e,t,r,n,i){var s,u,c,d,h;switch(e.kind){case"EnumTypeDefinition":case"EnumTypeExtension":for(let r of null!==(s=e.values)&&void 0!==s?s:[])f(r,t.value(r.name.value),n);break;case"ObjectTypeDefinition":case"ObjectTypeExtension":case"InterfaceTypeDefinition":case"InterfaceTypeExtension":for(let s of null!==(u=e.fields)&&void 0!==u?u:[]){if(r.ignoreParsedField(t,s.name.value))continue;let e=t.addField(s.name.value);e.setOfExtension(i),function(e,t,r){var n,i;let s=b(e.type,t.schema());for(let i of(t.type=function(e,t,r,n){if((0,o.isOutputType)(e))return e;n.push(a.ERRORS.INVALID_GRAPHQL.err(`The type of "${t}" must be Output Type but got "${e}", a ${e.kind}.`,{nodes:r}))}(s,t.coordinate,e,r),null!==(n=e.arguments)&&void 0!==n?n:[]))_(i,t.addArgument(i.name.value),r,!0);f(e,t,r),t.description=null===(i=e.description)||void 0===i?void 0:i.value,t.sourceAST=e}(s,e,n)}for(let r of null!==(c=e.interfaces)&&void 0!==c?c:[])p(()=>{let e=r.name.value;if(t.implementsInterface(e))throw a.ERRORS.INVALID_GRAPHQL.err(`Type "${t}" can only implement "${e}" once.`);t.addImplementedInterface(e).setOfExtension(i)},r,n);break;case"UnionTypeDefinition":case"UnionTypeExtension":for(let r of null!==(d=e.types)&&void 0!==d?d:[])p(()=>{let e=r.name.value;if(t.hasTypeMember(e))throw a.ERRORS.INVALID_GRAPHQL.err(`Union type "${t}" can only include type "${e}" once.`);t.addType(e).setOfExtension(i)},r,n);break;case"InputObjectTypeDefinition":case"InputObjectTypeExtension":for(let r of null!==(h=e.fields)&&void 0!==h?h:[]){let e=t.addField(r.name.value);e.setOfExtension(i),function(e,t,r){var n;let i=b(e.type,t.schema());t.type=g(i,t.coordinate,e,r),t.defaultValue=l(e.defaultValue),f(e,t,r),t.description=null===(n=e.description)||void 0===n?void 0:n.value,t.sourceAST=e}(r,e,n)}}f(e,t,n,i),v(e,t)}function m(e,t,r){var n;for(let i of null!==(n=e.values)&&void 0!==n?n:[]){let e=t.addValue(i.name.value);i.description&&(e.description=i.description.value),e.setOfExtension(r)}v(e,t)}function v(e,t){e.description&&(t.description=e.description.value),t.sourceAST=e}function g(e,t,r,n){if((0,o.isInputType)(e))return e;n.push(a.ERRORS.INVALID_GRAPHQL.err(`The type of "${t}" must be Input Type but got "${e}", a ${e.kind}.`,{nodes:r}))}function b(e,t){switch(e.kind){case n.Kind.LIST_TYPE:return new o.ListType(b(e.type,t));case n.Kind.NON_NULL_TYPE:let r=b(e.type,t);if(r.kind==n.Kind.NON_NULL_TYPE)throw a.ERRORS.INVALID_GRAPHQL.err("Cannot apply the non-null operator (!) twice to the same type",{nodes:e});return new o.NonNullType(r);default:return function(e,t){let r=t.type(e.name.value);if(!r)throw a.ERRORS.INVALID_GRAPHQL.err(`Unknown type ${e.name.value}`,{nodes:e});return r}(e,t)}}function _(e,t,r,n){var i;let o=b(e.type,t.schema());t.type=g(o,t.coordinate,e,r),t.defaultValue=l(e.defaultValue),n&&f(e,t,r),t.description=null===(i=e.description)||void 0===i?void 0:i.value,t.sourceAST=e}t.buildSchema=function(e,t){return u((0,n.parse)(e),t)},t.buildSchemaFromAST=u,t.builtTypeReference=function(e,t){return b((0,n.parseType)(e),t)}},96436:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugLogger=t.newDebugLogger=void 0;let i=n(r(73004)),o=r(4749);function a(e){let t="";for(let r=0;r<e;r++)t+=i.default.blackBright(" ");return t}let s=0,l="",u=0,c=[];t.newDebugLogger=function(e){let t=function(e){let t=process.env.APOLLO_FEDERATION_DEBUG,r=(0,o.validateStringContainsBoolean)(t);return void 0!==r?r:t.split(",").map(e=>e.trim()).includes(e)}(e),n=new p(e,t);if(t)for(let t of(global.console=r(51807),c.push(n),u=Math.max(u,e.length),c))p.prototype.updateHeader.call(t,u);return n};class p{constructor(e,t){this.name=e,this.enabled=t,this.header=i.default.blackBright(`[${e}] `)}updateHeader(e){let t="";if(e>this.name.length){let r=e-this.name.length;for(let e=0;e<r;e++)t+=" "}this.header=i.default.blackBright("["+t+this.name+"] ")}doLog(e){let t=this.header+l,r=e.replace(/\n/g,"\n"+t+"  ");console.log(t+r)}log(e,t=i.default.yellow(" ")){return this.enabled&&("string"!=typeof e&&(e=e()),this.doLog(t+e)),this}groupedValues(e,t,r){if(!this.enabled)return this;for(let n of(this.group(r),e))this.doLog("- "+t(n));return this.groupEnd()}groupedEntries(e,t,r){if(!this.enabled)return this;for(let[n,i]of(this.group(),e.entries()))this.doLog("- "+t(n)+": "+r(i));return this.groupEnd()}group(e){return this.enabled&&(e&&this.log(e,i.default.blue(" ")),l=a(++s)),this}groupEnd(e){return this.enabled&&(s>0&&(l=a(--s)),e&&this.log(e,i.default.green(" "))),this}}t.DebugLogger=p},48170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoreFeature=t.defaultSchemaBlueprint=t.SchemaBlueprint=t.NamedSchemaElementWithType=t.NamedSchemaElement=t.SchemaElement=t.Extension=t.sourceASTs=t.DirectiveTargetElement=t.isLeafType=t.typeFromAST=t.typeToAST=t.isTypeSystemDirectiveLocation=t.typeSystemDirectiveLocations=t.isExecutableDirectiveLocation=t.executableDirectiveLocations=t.isConditionalDirective=t.supertypes=t.runtimeTypesIntersects=t.possibleRuntimeTypes=t.isCompositeType=t.isAbstractType=t.isNullableType=t.baseType=t.filterTypesOfKind=t.isTypeOfKind=t.isInputType=t.isOutputType=t.isInputObjectType=t.isUnionType=t.isEnumType=t.isInterfaceType=t.isObjectType=t.isIDType=t.isBooleanType=t.isFloatType=t.isStringType=t.isIntType=t.isCustomScalarType=t.isScalarType=t.isNonNullType=t.isListType=t.isWrapperType=t.isNamedType=t.isSchemaRootType=t.defaultRootName=t.allSchemaRootKinds=t.typenameFieldName=t.ErrGraphQLAPISchemaValidationFailed=t.ErrGraphQLValidationFailed=void 0,t.isFieldDefinition=t.copyDirectiveDefinitionToSchema=t.newNamedType=t.variableDefinitionFromAST=t.variableDefinitionsFromAST=t.VariableDefinitions=t.VariableDefinition=t.isVariable=t.VariableCollector=t.Variable=t.directiveApplicationsSubstraction=t.isDirectiveApplicationsSubset=t.sameDirectiveApplications=t.sameDirectiveApplication=t.directivesToDirectiveNodes=t.directivesToString=t.Directive=t.DirectiveDefinition=t.EnumValue=t.ArgumentDefinition=t.InputFieldDefinition=t.FieldDefinition=t.NonNullType=t.ListType=t.InputObjectType=t.EnumType=t.UnionType=t.UnionMember=t.InterfaceType=t.ObjectType=t.InterfaceImplementation=t.ScalarType=t.SchemaDefinition=t.RootType=t.Schema=t.CoreFeatures=void 0;let n=r(57343),i=r(59143),o=r(4749),a=r(24056),s=r(35422),l=r(41388),u=r(56563),c=r(93566),p=r(30167),d=r(7449),f=r(43466),h=r(30500),y=r(65550),m=r(74533),v=r(10556),g="The schema is not a valid GraphQL schema.",b=new Set;function _(e){return e.charAt(0).toUpperCase()+e.slice(1)}function T(e){return E(e)||O(e)}function E(e){return"ListType"==e.kind}function O(e){return"NonNullType"==e.kind}function S(e){return"ScalarType"==e.kind}function w(e){return"ObjectType"==e.kind}function I(e){return"InterfaceType"==e.kind}function N(e){return"EnumType"==e.kind}function A(e){return"UnionType"==e.kind}function C(e){switch(F(e).kind){case"ScalarType":case"ObjectType":case"UnionType":case"EnumType":case"InterfaceType":return!0;default:return!1}}function P(e){switch(F(e).kind){case"ScalarType":case"EnumType":case"InputObjectType":return!0;default:return!1}}function R(e,t){return e.kind===t}function D(e,t){return e.reduce((e,r)=>(R(r,t)&&e.push(r),e),[])}function F(e){return T(e)?e.baseType():e}function j(e){switch(e.kind){case"InterfaceType":return e.possibleRuntimeTypes();case"UnionType":return e.types();case"ObjectType":return[e]}}t.ErrGraphQLValidationFailed=(e,t=g)=>(0,m.aggregateError)("GraphQLValidationFailed",t,e),t.ErrGraphQLAPISchemaValidationFailed=e=>(0,m.aggregateError)("GraphQLAPISchemaValidationFailed","The supergraph schema failed to produce a valid API schema",e),t.typenameFieldName="__typename",t.allSchemaRootKinds=["query","mutation","subscription"],t.defaultRootName=_,t.isSchemaRootType=function(e){return w(e)&&e.isRootType()},t.isNamedType=function(e){return e instanceof H},t.isWrapperType=T,t.isListType=E,t.isNonNullType=O,t.isScalarType=S,t.isCustomScalarType=function(e){return S(e)&&!X.includes(e.name)},t.isIntType=function(e){return e===e.schema().intType()},t.isStringType=function(e){return e===e.schema().stringType()},t.isFloatType=function(e){return e===e.schema().floatType()},t.isBooleanType=function(e){return e===e.schema().booleanType()},t.isIDType=function(e){return e===e.schema().idType()},t.isObjectType=w,t.isInterfaceType=I,t.isEnumType=N,t.isUnionType=A,t.isInputObjectType=function(e){return"InputObjectType"==e.kind},t.isOutputType=C,t.isInputType=P,t.isTypeOfKind=R,t.filterTypesOfKind=D,t.baseType=F,t.isNullableType=function(e){return!O(e)},t.isAbstractType=function(e){return I(e)||A(e)},t.isCompositeType=function(e){return w(e)||I(e)||A(e)},t.possibleRuntimeTypes=j,t.runtimeTypesIntersects=function(e,t){if(e===t)return!0;let r=j(e),n=j(t);for(let e of r)if(n.some(t=>e.name===t.name))return!0;return!1},t.supertypes=function(e){switch(e.kind){case"InterfaceType":return e.interfaces();case"UnionType":return[];case"ObjectType":return e.interfaces().concat(e.unionsWhereMember())}},t.isConditionalDirective=function(e){return["include","skip"].includes(e.name)},t.executableDirectiveLocations=[n.DirectiveLocation.QUERY,n.DirectiveLocation.MUTATION,n.DirectiveLocation.SUBSCRIPTION,n.DirectiveLocation.FIELD,n.DirectiveLocation.FRAGMENT_DEFINITION,n.DirectiveLocation.FRAGMENT_SPREAD,n.DirectiveLocation.INLINE_FRAGMENT,n.DirectiveLocation.VARIABLE_DEFINITION];let L=new Set(t.executableDirectiveLocations);function x(e){return L.has(e)}t.isExecutableDirectiveLocation=x,t.typeSystemDirectiveLocations=[n.DirectiveLocation.SCHEMA,n.DirectiveLocation.SCALAR,n.DirectiveLocation.OBJECT,n.DirectiveLocation.FIELD_DEFINITION,n.DirectiveLocation.ARGUMENT_DEFINITION,n.DirectiveLocation.INTERFACE,n.DirectiveLocation.UNION,n.DirectiveLocation.ENUM,n.DirectiveLocation.ENUM_VALUE,n.DirectiveLocation.INPUT_OBJECT,n.DirectiveLocation.INPUT_FIELD_DEFINITION];let M=new Set(t.typeSystemDirectiveLocations);function k(e){return M.has(e)}function $(e){switch(e.kind){case"ListType":return{kind:n.Kind.LIST_TYPE,type:$(e.ofType)};case"NonNullType":return{kind:n.Kind.NON_NULL_TYPE,type:$(e.ofType)};default:return{kind:n.Kind.NAMED_TYPE,name:{kind:n.Kind.NAME,value:e.name}}}}function U(e,t){switch(t.kind){case n.Kind.LIST_TYPE:return new ey(U(e,t.type));case n.Kind.NON_NULL_TYPE:return new em(U(e,t.type));default:let r=e.type(t.name.value);if(!r)throw m.ERRORS.INVALID_GRAPHQL.err(`Unknown type "${t.name.value}"`,{nodes:t});return r}}t.isTypeSystemDirectiveLocation=k,t.typeToAST=$,t.typeFromAST=U,t.isLeafType=function(e){return S(e)||N(e)};class V{constructor(e,t=[]){this._schema=e,this.appliedDirectives=t.map(e=>this.attachDirective(e))}schema(){return this._schema}attachDirective(e){let t=e.isAttached()?new eE(e.name,e.arguments()):e;return G.prototype.setParent.call(t,this),t}appliedDirectivesOf(e){let t="string"==typeof e?e:e.name;return this.appliedDirectives.filter(e=>e.name==t)}hasAppliedDirective(e){let t="string"==typeof e?e:e.name;return this.appliedDirectives.some(e=>e.name==t)}appliedDirectivesToDirectiveNodes(){return eS(this.appliedDirectives)}appliedDirectivesToString(){return eO(this.appliedDirectives)}collectVariablesInAppliedDirectives(e){for(let t of this.appliedDirectives)e.collectInArguments(t.arguments())}}t.DirectiveTargetElement=V,t.sourceASTs=function(...e){return e.map(e=>null==e?void 0:e.sourceAST).filter(e=>void 0!==e)};class G{schema(){let e=this.schemaInternal();return(0,o.assert)(e,"requested schema does not exist. Probably because the element is unattached"),e}schemaInternal(){if(this._parent){if(this._parent instanceof er)return this._parent;if(this._parent instanceof B)return this._parent.schemaInternal();if(this._parent instanceof V)return this._parent.schema();(0,o.assert)(!1,"unreachable code. parent is of unknown type")}}get parent(){return(0,o.assert)(this._parent,"trying to access non-existent parent"),this._parent}isAttached(){return!!this._parent}setParent(e){(0,o.assert)(!this._parent,"Cannot set parent of an already attached element"),this._parent=e,this.onAttached()}onAttached(){}checkUpdate(){(0,o.assert)(this.isAttached(),()=>`Cannot modify detached element ${this}`)}}class q{get extendedElement(){return this._extendedElement}setExtendedElement(e){(0,o.assert)(!this._extendedElement,"Cannot attached already attached extension"),this._extendedElement=e}}t.Extension=q;class B extends G{addUnappliedDirective({nameOrDef:e,args:t,extension:r,directive:n}){let i={nameOrDef:e,args:null!=t?t:{},extension:r,directive:n};this._unappliedDirectives?this._unappliedDirectives.push(i):this._unappliedDirectives=[i]}processUnappliedDirectives(){var e;for(let{nameOrDef:t,args:r,extension:n,directive:i}of null!==(e=this._unappliedDirectives)&&void 0!==e?e:[]){let e=this.applyDirective(t,r);e.setOfExtension(n),e.sourceAST=i}this._unappliedDirectives=void 0}get appliedDirectives(){var e;return null!==(e=this._appliedDirectives)&&void 0!==e?e:[]}appliedDirectivesOf(e){let t="string"==typeof e?e:e.name;return this.appliedDirectives.filter(e=>e.name==t)}hasAppliedDirective(e){return 0!==this.appliedDirectivesOf(e).length}applyDirective(e,r,n=!1){var i;let o;if("string"==typeof e){this.checkUpdate(),o=new eE(e,null!=r?r:Object.create(null));let n=null!==(i=this.schema().directive(e))&&void 0!==i?i:this.schema().blueprint.onMissingDirectiveDefinition(this.schema(),o);if(!n)throw this.schema().blueprint.onGraphQLJSValidationError(this.schema(),m.ERRORS.INVALID_GRAPHQL.err(`Unknown directive "@${e}".`));if(Array.isArray(n))throw(0,t.ErrGraphQLValidationFailed)(n)}else this.checkUpdate(e),o=new eE(e.name,null!=r?r:Object.create(null));return G.prototype.setParent.call(o,this),this._appliedDirectives?n?this._appliedDirectives.unshift(o):this._appliedDirectives.push(o):this._appliedDirectives=[o],eT.prototype.addReferencer.call(o.definition,o),this.onModification(),o}removeAppliedDirectives(){this._appliedDirectives&&this._appliedDirectives.concat().forEach(e=>e.remove())}onModification(){let e=this.schemaInternal();e&&er.prototype.onModification.call(e)}isElementBuiltIn(){return!1}removeTypeReferenceInternal(e){this.removeTypeReference(e)}checkRemoval(){(0,o.assert)(!this.isElementBuiltIn()||er.prototype.canModifyBuiltIn.call(this.schema()),()=>`Cannot modify built-in ${this}`)}checkUpdate(e){if(super.checkUpdate(),!er.prototype.canModifyBuiltIn.call(this.schema())){let e=this;for(;e&&e instanceof B;)(0,o.assert)(!e.isElementBuiltIn(),()=>`Cannot modify built-in (or part of built-in) ${this}`),e=e.parent}if(e&&e.isAttached()){let t=e.schema();(0,o.assert)(!t||t===this.schema(),()=>`Cannot add element ${e} to ${this} as it is attached to another schema`)}}}t.SchemaElement=B;class W extends B{constructor(e){super(),this._name=e}get name(){return this._name}}t.NamedSchemaElement=W;class H extends W{constructor(e,t=!1){super(e),this.isBuiltIn=t,this.preserveEmptyDefinition=!1}addReferencer(e){var t;null!==(t=this._referencers)&&void 0!==t||(this._referencers=new Set),this._referencers.add(e)}removeReferencer(e){var t;null===(t=this._referencers)||void 0===t||t.delete(e)}get coordinate(){return this.name}*allChildElements(){}extensions(){var e;return null!==(e=this._extensions)&&void 0!==e?e:[]}hasExtension(e){var t,r;return null!==(r=null===(t=this._extensions)||void 0===t?void 0:t.includes(e))&&void 0!==r&&r}newExtension(){return this.addExtension(new q)}addExtension(e){return this.checkUpdate(),this.hasExtension(e)||((0,o.assert)(!e.extendedElement,()=>`Cannot add extension to type ${this}: it is already added to another type`),this._extensions?this._extensions.push(e):this._extensions=[e],q.prototype.setExtendedElement.call(e,this),this.onModification()),e}removeExtensions(){if(this._extensions){for(let e of(this._extensions=void 0,this.appliedDirectives))e.removeOfExtension();this.removeInnerElementsExtensions()}}isIntrospectionType(){return(0,c.isIntrospectionName)(this.name)}hasExtensionElements(){return!!this._extensions}hasNonExtensionElements(){return this.preserveEmptyDefinition||this.appliedDirectives.some(e=>void 0===e.ofExtension())||this.hasNonExtensionInnerElements()}isElementBuiltIn(){return this.isBuiltIn}rename(e){this.checkUpdate();let t=this._name;this._name=e,er.prototype.renameTypeInternal.call(this._parent,t,e),this.onModification()}remove(){var e;if(!this._parent)return[];this.checkRemoval(),this.onModification(),this.sourceAST=void 0,this.removeAppliedDirectives(),this.removeInnerElements();let t=[];return null===(e=this._referencers)||void 0===e||e.forEach(e=>{B.prototype.removeTypeReferenceInternal.call(e,this),t.push(e)}),this._referencers=void 0,er.prototype.removeTypeInternal.call(this._parent,this),this._parent=void 0,t}removeRecursive(){this.remove().forEach(e=>this.removeReferenceRecursive(e))}referencers(){var e;return null!==(e=this._referencers)&&void 0!==e?e:b}isReferenced(){return!!this._referencers}toString(){return this.name}}class Q extends W{get type(){return this._type}set type(e){e?this.checkUpdate(e):this.checkRemoval(),this._type&&eD(this,this._type),this._type=e,e&&eR(this,e)}removeTypeReference(e){(0,o.assert)(this._type&&F(this._type)===e,()=>`Cannot remove reference to type ${e} on ${this} as its type is ${this._type}`),this._type=void 0}}t.NamedSchemaElementWithType=Q;class K extends G{ofExtension(){return this._extension}removeOfExtension(){this._extension=void 0}setOfExtension(e){var t;this.checkUpdate(),(0,o.assert)(!e||(null===(t=this._parent)||void 0===t?void 0:t.hasExtension(e)),()=>`Cannot set object as part of the provided extension: it is not an extension of parent ${this.parent}`),this._extension=e}remove(){this.removeInner(),er.prototype.onModification.call(this.schema()),this._extension=void 0,this._parent=void 0}}class z{onMissingDirectiveDefinition(e,t){}onDirectiveDefinitionAndSchemaParsed(e){return[]}ignoreParsedField(e,t){return!1}onConstructed(e){}onAddedCoreFeature(e,t){}onInvalidation(e){}onValidation(e){return[]}validationRules(){return d.specifiedSDLRules}onGraphQLJSValidationError(e,t){var r;let n=/^Unknown directive "@(?<directive>[_A-Za-z][_0-9A-Za-z]*)"\.$/.exec(t.message),i=null===(r=null==n?void 0:n.groups)||void 0===r?void 0:r.directive;if(!i)return t;let o=e.allDirectives().map(e=>e.name),a=(0,y.suggestionList)(i,o);return 0===a.length?this.onUnknownDirectiveValidationError(e,i,t):(0,m.withModifiedErrorMessage)(t,`${t.message}${(0,y.didYouMean)(a.map(e=>"@"+e))}`)}onUnknownDirectiveValidationError(e,t,r){return r}applyDirectivesAfterParsing(){return!1}}t.SchemaBlueprint=z,t.defaultSchemaBlueprint=new z;class Y{constructor(e,t,r,n,i){this.url=e,this.nameInSchema=t,this.directive=r,this.imports=n,this.purpose=i}isFeatureDefinition(e){let t="DirectiveDefinition"===e.kind?"@"+e.name:e.name;return e.name.startsWith(this.nameInSchema+"__")||"DirectiveDefinition"===e.kind&&e.name===this.nameInSchema||!!this.imports.find(e=>{var r;return t===(null!==(r=e.as)&&void 0!==r?r:e.name)})}directiveNameInSchema(e){var t,r;let n=this.imports.find(t=>"@"===t.name.charAt(0)&&t.name.slice(1)===e);return n?null!==(r=null===(t=n.as)||void 0===t?void 0:t.slice(1))&&void 0!==r?r:e:e===this.url.name?this.nameInSchema:this.nameInSchema+"__"+e}typeNameInSchema(e){var t;let r=this.imports.find(t=>t.name===e);return r?null!==(t=r.as)&&void 0!==t?t:e:this.nameInSchema+"__"+e}minimumFederationVersion(){var e;return null===(e=(0,v.coreFeatureDefinitionIfKnown)(this.url))||void 0===e?void 0:e.minimumFederationVersion}}t.CoreFeature=Y;class J{constructor(e){this.coreItself=e,this.byAlias=new Map,this.byIdentity=new Map,this.add(e);let t=(0,i.findCoreSpecVersion)(e.url);if(!t)throw m.ERRORS.UNKNOWN_LINK_VERSION.err(`Schema uses unknown version ${e.url.version} of the ${e.url.name} spec`);this.coreDefinition=t}getByIdentity(e){return this.byIdentity.get(e)}allFeatures(){return this.byIdentity.values()}removeFeature(e){let t=this.byIdentity.get(e);t&&(this.byIdentity.delete(e),this.byAlias.delete(t.nameInSchema))}maybeAddFeature(e){var t,r;if((null===(t=e.definition)||void 0===t?void 0:t.name)!==this.coreItself.nameInSchema)return;let n=e.arguments(),o=this.coreDefinition.extractFeatureUrl(n);if(this.byIdentity.get(o.identity))throw m.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err(`Duplicate inclusion of feature ${o.identity}`);let a=(0,i.extractCoreFeatureImports)(o,e),s=new Y(o,null!==(r=n.as)&&void 0!==r?r:o.name,e,a,n.for);return this.add(s),e.schema().blueprint.onAddedCoreFeature(e.schema(),s),s}add(e){this.byAlias.set(e.nameInSchema,e),this.byIdentity.set(e.url.identity,e)}sourceFeature(e){var t,r;let n=e instanceof eT||e instanceof eE,i=e.name.split("__");if(i.length>1){let e=this.byAlias.get(i[0]);return e?{feature:e,nameInFeature:i[1],isImported:!1}:void 0}{let i=n?"@"+e.name:e.name;for(let e of[this.coreItself,...this.byIdentity.values()])for(let{as:t,name:r}of e.imports)if((null!=t?t:r)===i)return{feature:e,nameInFeature:r.slice(1),isImported:!0};let o=this.byAlias.get(e.name);return o&&n?{feature:o,nameInFeature:null!==(r=null===(t=o.imports.find(t=>t.as===`@${e.name}`))||void 0===t?void 0:t.name.slice(1))&&void 0!==r?r:e.name,isImported:!0}:void 0}}}t.CoreFeatures=J;let X=["Int","Float","String","Boolean","ID"],Z=X.map(e=>(0,h.createScalarTypeSpecification)({name:e})),ee=[(0,h.createDirectiveSpecification)({name:"include",locations:[n.DirectiveLocation.FIELD,n.DirectiveLocation.FRAGMENT_SPREAD,n.DirectiveLocation.INLINE_FRAGMENT],args:[{name:"if",type:e=>new em(e.booleanType())}]}),(0,h.createDirectiveSpecification)({name:"skip",locations:[n.DirectiveLocation.FIELD,n.DirectiveLocation.FRAGMENT_SPREAD,n.DirectiveLocation.INLINE_FRAGMENT],args:[{name:"if",type:e=>new em(e.booleanType())}]}),(0,h.createDirectiveSpecification)({name:"deprecated",locations:[n.DirectiveLocation.FIELD_DEFINITION,n.DirectiveLocation.ENUM_VALUE,n.DirectiveLocation.ARGUMENT_DEFINITION,n.DirectiveLocation.INPUT_FIELD_DEFINITION],args:[{name:"reason",type:e=>e.stringType(),defaultValue:"No longer supported"}]}),(0,h.createDirectiveSpecification)({name:"specifiedBy",locations:[n.DirectiveLocation.SCALAR],args:[{name:"url",type:e=>new em(e.stringType())}]}),(0,h.createDirectiveSpecification)({name:"defer",locations:[n.DirectiveLocation.FRAGMENT_SPREAD,n.DirectiveLocation.INLINE_FRAGMENT],args:[{name:"label",type:e=>e.stringType()},{name:"if",type:e=>new em(e.booleanType()),defaultValue:!0}]}),(0,h.createDirectiveSpecification)({name:"stream",locations:[n.DirectiveLocation.FIELD],args:[{name:"label",type:e=>e.stringType()},{name:"initialCount",type:e=>e.intType(),defaultValue:0},{name:"if",type:e=>new em(e.booleanType()),defaultValue:!0}]})],et=/^@?[_A-Za-z][_0-9A-Za-z]*(\.[_A-Za-z][_0-9A-Za-z]*)?(\([_A-Za-z][_0-9A-Za-z]*:\))?$/;class er{constructor(e=t.defaultSchemaBlueprint,r={}){this.blueprint=e,this.config=r,this._builtInTypes=new o.MapWithCachedArrays,this._types=new o.MapWithCachedArrays,this._builtInDirectives=new o.MapWithCachedArrays,this._directives=new o.MapWithCachedArrays,this.isConstructed=!1,this.isValidated=!1,this._schemaDefinition=new ei,G.prototype.setParent.call(this._schemaDefinition,this),Z.forEach(e=>e.checkOrAdd(this,void 0,!0)),ee.forEach(e=>e.checkOrAdd(this,void 0,!0)),e.onConstructed(this),this.isConstructed=!0}canModifyBuiltIn(){return!this.isConstructed}runWithBuiltInModificationAllowed(e){let t=this.isConstructed;this.isConstructed=!1,e(),this.isConstructed=t}renameTypeInternal(e,t){this._types.set(t,this._types.get(e)),this._types.delete(e)}removeTypeInternal(e){this._types.delete(e.name)}removeDirectiveInternal(e){this._directives.delete(e.name)}markAsCoreSchema(e){this._coreFeatures=new J(e)}unmarkAsCoreSchema(){this._coreFeatures=void 0}onModification(){this.isConstructed&&(this.invalidate(),this.cachedDocument=void 0,this.apiSchema=void 0)}isCoreSchema(){return void 0!==this.coreFeatures}get coreFeatures(){return this._coreFeatures}toAST(){var e;if(!this.cachedDocument){let t=(0,n.parse)((0,l.printSchema)(this),{noLocation:!0});if(!(null!==(e=this.config.cacheAST)&&void 0!==e&&e))return t;this.cachedDocument=t}return this.cachedDocument}toAPISchema(){if(!this.apiSchema){this.validate();let e=this.clone(void 0,!1);for(let t of["defer","stream"]){let r=e.directive(t);r&&!r.isBuiltIn&&r.removeRecursive()}(0,s.removeInaccessibleElements)(e),(0,i.removeAllCoreFeatures)(e),(0,o.assert)(!e.isCoreSchema(),"The API schema shouldn't be a core schema"),e.validate(),this.apiSchema=e}return this.apiSchema}emptyASTDefinitionsForExtensionsWithoutDefinition(){let e=[];if(this.schemaDefinition.hasExtensionElements()&&!this.schemaDefinition.hasNonExtensionElements()){let t={kind:n.Kind.SCHEMA_DEFINITION,operationTypes:[]};e.push(t)}for(let t of this.types())if(t.hasExtensionElements()&&!t.hasNonExtensionElements()){let r={kind:t.astDefinitionKind,name:{kind:n.Kind.NAME,value:t.name}};e.push(r)}return e}toGraphQLJSSchema(e){var t,r;let i=null!==(t=null==e?void 0:e.includeDefer)&&void 0!==t&&t,o=null!==(r=null==e?void 0:e.includeStream)&&void 0!==r&&r,a=this.toAST(),s=this.emptyASTDefinitionsForExtensionsWithoutDefinition();i&&s.push(this.deferDirective().toAST()),o&&s.push(this.streamDirective().toAST()),s.length>0&&(a={kind:n.Kind.DOCUMENT,definitions:a.definitions.concat(s)});let l=(0,n.buildASTSchema)(a);if(s.length>0)for(let e of s)switch(e.kind){case n.Kind.SCHEMA_DEFINITION:l.astNode=void 0;break;case n.Kind.SCALAR_TYPE_DEFINITION:case n.Kind.OBJECT_TYPE_DEFINITION:case n.Kind.INTERFACE_TYPE_DEFINITION:case n.Kind.ENUM_TYPE_DEFINITION:case n.Kind.UNION_TYPE_DEFINITION:case n.Kind.INPUT_OBJECT_TYPE_DEFINITION:let t=l.getType(e.name.value);t&&(t.astNode=void 0)}return l}get schemaDefinition(){return this._schemaDefinition}types(){return this._types.values()}interfaceTypes(){return D(this.types(),"InterfaceType")}objectTypes(){return D(this.types(),"ObjectType")}unionTypes(){return D(this.types(),"UnionType")}scalarTypes(){return D(this.types(),"ScalarType")}inputTypes(){return D(this.types(),"InputObjectType")}enumTypes(){return D(this.types(),"EnumType")}builtInTypes(e=!1){let t=this._builtInTypes.values();return e?t:t.filter(e=>!this.isShadowedBuiltInType(e))}isShadowedBuiltInType(e){return e.isBuiltIn&&this._types.has(e.name)}allTypes(){return this.builtInTypes().concat(this.types())}type(e){return this._types.get(e)||this._builtInTypes.get(e)}typeOfKind(e,t){let r=this.type(e);return r&&r.kind===t?r:void 0}intType(){return this._builtInTypes.get("Int")}floatType(){return this._builtInTypes.get("Float")}stringType(){return this._builtInTypes.get("String")}booleanType(){return this._builtInTypes.get("Boolean")}idType(){return this._builtInTypes.get("ID")}builtInScalarTypes(){return[this.intType(),this.floatType(),this.stringType(),this.booleanType(),this.idType()]}addType(e){let t=this.type(e.name);if(t&&(0,o.assert)(t.isBuiltIn,()=>`Type ${e} already exists in this schema`),e.isAttached())return(0,o.assert)(e.parent==this,()=>`Cannot add type ${e} to this schema; it is already attached to another schema`),e;e.isBuiltIn?((0,o.assert)(!this.isConstructed,`Cannot add built-in ${e} to this schema (built-ins can only be added at schema construction time)`),this._builtInTypes.set(e.name,e)):this._types.set(e.name,e),G.prototype.setParent.call(e,this);let r=function(e){if("ObjectType"===e.kind)switch(e.name){case"Query":return"query";case"Mutation":return"mutation";case"Subscription":return"subscription";default:return}}(e);return r&&!this.schemaDefinition.root(r)&&this.schemaDefinition.setRoot(r,e),this.onModification(),e}directives(){return this._directives.values()}builtInDirectives(e=!1){return e?this._builtInDirectives.values():this._builtInDirectives.values().filter(e=>!this.isShadowedBuiltInDirective(e))}allDirectives(){return this.builtInDirectives().concat(this.directives())}isShadowedBuiltInDirective(e){return e.isBuiltIn&&this._directives.has(e.name)}directive(e){return this._directives.get(e)||this.builtInDirective(e)}builtInDirective(e){return this._builtInDirectives.get(e)}*allNamedSchemaElement(){for(let e of this.types())yield e,yield*e.allChildElements();for(let e of this.directives())yield e,yield*e.arguments()}*allSchemaElement(){yield this._schemaDefinition,yield*this.allNamedSchemaElement()}addDirectiveDefinition(e){let t="string"==typeof e?new eT(e):e,r=this.directive(t.name);return((0,o.assert)(!r||r.isBuiltIn,()=>`Directive ${t} already exists in this schema`),t.isAttached())?(0,o.assert)(t.parent==this,()=>`Cannot add directive ${t} to this schema; it is already attached to another schema`):(t.isBuiltIn?((0,o.assert)(!this.isConstructed,()=>`Cannot add built-in ${t} to this schema (built-ins can only be added at schema construction time)`),this._builtInDirectives.set(t.name,t)):this._directives.set(t.name,t),G.prototype.setParent.call(t,this),this.onModification()),t}invalidate(){this.isValidated&&this.blueprint.onInvalidation(this),this.isValidated=!1}assumeValid(){this.runWithBuiltInModificationAllowed(()=>{(0,c.addIntrospectionFields)(this)}),this.isValidated=!0}validate(){if(this.isValidated)return;this.runWithBuiltInModificationAllowed(()=>{(0,c.addIntrospectionFields)(this)});let e=(0,p.validateSDL)(this.toAST(),void 0,this.blueprint.validationRules()).map(e=>this.blueprint.onGraphQLJSValidationError(this,e));if(0===(e=e.concat((0,f.validateSchema)(this))).length&&this.runWithBuiltInModificationAllowed(()=>{e=this.blueprint.onValidation(this)}),e.length>0)throw(0,t.ErrGraphQLValidationFailed)(e);this.isValidated=!0}clone(e,t=!0){let r=new er(null!=e?e:this.blueprint);return function(e,t,r){for(let r of ej(e,t))t.addType(eF(r.kind,r.name));for(let r of eL(e,t))t.addDirectiveDefinition(r.name);for(let r of eL(e,t))eG(r,t.directive(r.name));for(let n of(function(e,t){t.preserveEmptyDefinition=e.preserveEmptyDefinition;let r=ex(e,t);for(let n of e.roots())eM(r,n,t.setRoot(n.rootKind,n.type.name));for(let n of e.appliedDirectives)eM(r,n,e$(n,t));t.description=e.description,t.sourceAST=e.sourceAST}(e.schemaDefinition,t.schemaDefinition),ej(e,t)))(function(e,t,r){t.preserveEmptyDefinition=e.preserveEmptyDefinition;let n=ex(e,t);for(let r of e.appliedDirectives)eM(n,r,e$(r,t));switch(t.description=e.description,t.sourceAST=e.sourceAST,e.kind){case"ObjectType":case"InterfaceType":for(let i of e.fields()){let e=t.addField(new ev(i.name));eM(n,i,e),function(e,t,r){let n=eU(e.type,t.schema());for(let i of(t.type=n,e.arguments())){let e=eU(i.type,t.schema());eV({source:i,dest:t.addArgument(i.name,e),cloneJoinDirectives:r})}ek(e,t,r),t.description=e.description,t.sourceAST=e.sourceAST}(i,e,r)}for(let r of e.interfaceImplementations()){let e=t.addImplementedInterface(r.interface.name);eM(n,r,e)}break;case"UnionType":for(let r of e.members()){let e=t.addType(r.type.name);eM(n,r,e)}break;case"EnumType":for(let i of e.values){let e=t.addValue(i.name);e.description=i.description,eM(n,i,e),ek(i,e,r)}break;case"InputObjectType":for(let i of e.fields()){let e=t.addField(new eg(i.name));eM(n,i,e),function(e,t,r){let n=eU(e.type,t.schema());t.type=n,t.defaultValue=e.defaultValue,ek(e,t,r),t.description=e.description,t.sourceAST=e.sourceAST}(i,e,r)}}})(n,t.type(n.name),r)}(this,r,t),this.isValidated&&r.assumeValid(),r}getBuiltInDirective(e){let t=this.directive(e);return(0,o.assert)(t,`The provided schema has not be built with the ${e} directive built-in`),t}includeDirective(){return this.getBuiltInDirective("include")}skipDirective(){return this.getBuiltInDirective("skip")}deprecatedDirective(){return this.getBuiltInDirective("deprecated")}specifiedByDirective(){return this.getBuiltInDirective("specifiedBy")}deferDirective(){return this.getBuiltInDirective("defer")}streamDirective(){return this.getBuiltInDirective("stream")}elementByCoordinate(e){if(!e.match(et))throw m.ERRORS.INVALID_GRAPHQL.err(`Invalid argument "${e}: it is not a syntactically valid graphQL coordinate."`);let t=e.indexOf("("),r=t<0?e:e.slice(0,t),n=t<0?void 0:e.slice(t+1,e.length-2),i=r.split("."),o=i[0],a=i[1];if(o.startsWith("@")){if(a)throw m.ERRORS.INVALID_GRAPHQL.err(`Invalid argument "${e}: it is not a syntactically valid graphQL coordinate."`);let t=this.directive(o.slice(1));return n?null==t?void 0:t.argument(n):t}{let t=this.type(o);if(!t||!a)return t;switch(t.kind){case"ObjectType":case"InterfaceType":let r=t.field(a);return n?null==r?void 0:r.argument(n):r;case"InputObjectType":if(n)throw m.ERRORS.INVALID_GRAPHQL.err(`Invalid argument "${e}: it is not a syntactically valid graphQL coordinate."`);return t.field(a);case"EnumType":if(n)throw m.ERRORS.INVALID_GRAPHQL.err(`Invalid argument "${e}: it is not a syntactically valid graphQL coordinate."`);return t.value(a);default:throw m.ERRORS.INVALID_GRAPHQL.err(`Invalid argument "${e}: it is not a syntactically valid graphQL coordinate."`)}}}}t.Schema=er;class en extends K{constructor(e,t){super(),this.rootKind=e,this.type=t}isDefaultRootName(){return _(this.rootKind)==this.type.name}removeInner(){ei.prototype.removeRootType.call(this._parent,this)}}t.RootType=en;class ei extends B{constructor(){super(...arguments),this.kind="SchemaDefinition",this._roots=new o.MapWithCachedArrays,this.preserveEmptyDefinition=!1}roots(){return this._roots.values()}applyDirective(e,t,r=!1){var n,o;let a=super.applyDirective(e,t,r),s=this.schema(),l=s.coreFeatures;if((0,i.isCoreSpecDirectiveApplication)(a)){if(l)throw m.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err("Invalid duplicate application of @core/@link");let e=a.arguments(),t=i.FeatureUrl.parse(null!==(n=e.url)&&void 0!==n?n:e.feature),r=(0,i.extractCoreFeatureImports)(t,a),u=new Y(t,null!==(o=e.as)&&void 0!==o?o:t.name,a,r,e.for);er.prototype.markAsCoreSchema.call(s,u),this.appliedDirectives.filter(e=>e!==a).forEach(e=>J.prototype.maybeAddFeature.call(s.coreFeatures,e))}else l&&J.prototype.maybeAddFeature.call(l,a);return this.onModification(),a}root(e){return this._roots.get(e)}rootType(e){var t;return null===(t=this.root(e))||void 0===t?void 0:t.type}setRoot(e,t){let r;if("string"==typeof t){this.checkUpdate();let n=this.schema().type(t);if(n){if("ObjectType"!=n.kind)throw m.ERRORS.INVALID_GRAPHQL.err(`${_(e)} root type must be an Object type${"query"===e?"":" if provided"}, it cannot be set to ${t} (an ${n.kind}).`)}else throw m.ERRORS.INVALID_GRAPHQL.err(`Cannot set schema ${e} root to unknown type ${t}`);r=new en(e,n)}else this.checkUpdate(t),r=new en(e,t);let n=this._roots.get(e);return n&&eD(this,n.type),this._roots.set(e,r),G.prototype.setParent.call(r,this),eR(this,r.type),this.onModification(),r}extensions(){var e;return null!==(e=this._extensions)&&void 0!==e?e:[]}hasExtension(e){var t,r;return null!==(r=null===(t=this._extensions)||void 0===t?void 0:t.includes(e))&&void 0!==r&&r}newExtension(){return this.addExtension(new q)}addExtension(e){return this.checkUpdate(),this.hasExtension(e)||((0,o.assert)(!e.extendedElement,"Cannot add extension to this schema: extension is already added to another schema"),this._extensions?this._extensions.push(e):this._extensions=[e],q.prototype.setExtendedElement.call(e,this),this.onModification()),e}hasExtensionElements(){return!!this._extensions}hasNonExtensionElements(){return this.preserveEmptyDefinition||this.appliedDirectives.some(e=>void 0===e.ofExtension())||this.roots().some(e=>void 0===e.ofExtension())}removeRootType(e){this._roots.delete(e.rootKind),eD(this,e.type)}removeTypeReference(e){for(let t of this.roots())t.type==e&&this._roots.delete(t.rootKind)}toString(){return`schema[${this._roots.keys().join(", ")}]`}}t.SchemaDefinition=ei;class eo extends H{constructor(){super(...arguments),this.kind="ScalarType",this.astDefinitionKind=n.Kind.SCALAR_TYPE_DEFINITION}removeTypeReference(e){(0,o.assert)(!1,`Scalar type ${this} can't reference other types; shouldn't be asked to remove reference to ${e}`)}hasNonExtensionInnerElements(){return!1}removeInnerElementsExtensions(){}removeInnerElements(){}removeReferenceRecursive(e){e.remove()}}t.ScalarType=eo;class ea extends K{constructor(e){super(),this.interface=e}removeInner(){es.prototype.removeInterfaceImplementation.call(this._parent,this.interface)}toString(){return`'implements ${this.interface}'`}}t.InterfaceImplementation=ea;class es extends H{constructor(){super(...arguments),this._fields=new o.MapWithCachedArrays}onAttached(){er.prototype.runWithBuiltInModificationAllowed.call(this.schema(),()=>{this.addField(new ev(t.typenameFieldName,!0),new em(this.schema().stringType()))})}removeFieldInternal(e){this._fields.delete(e.name),this._cachedNonBuiltInFields=void 0}interfaceImplementations(){var e,t;return null!==(t=null===(e=this._interfaceImplementations)||void 0===e?void 0:e.values())&&void 0!==t?t:[]}interfaceImplementation(e){return this._interfaceImplementations?this._interfaceImplementations.get("string"==typeof e?e:e.name):void 0}interfaces(){return this.interfaceImplementations().map(e=>e.interface)}implementsInterface(e){var t,r;return null!==(r=null===(t=this._interfaceImplementations)||void 0===t?void 0:t.has("string"==typeof e?e:e.name))&&void 0!==r&&r}addImplementedInterface(e){var t;let r;if(e instanceof ea)this.checkUpdate(e),r=e;else{let t;if("string"==typeof e){this.checkUpdate();let r=this.schema().type(e);if(r){if("InterfaceType"!=r.kind)throw m.ERRORS.INVALID_GRAPHQL.err(`Cannot implement non-interface type ${e} (of type ${r.kind})`)}else throw m.ERRORS.INVALID_GRAPHQL.err(`Cannot implement unknown type ${e}`);t=r}else t=e;r=new ea(t)}return(null===(t=this._interfaceImplementations)||void 0===t?void 0:t.get(r.interface.name))||(this._interfaceImplementations||(this._interfaceImplementations=new o.MapWithCachedArrays),this._interfaceImplementations.set(r.interface.name,r),eR(this,r.interface),G.prototype.setParent.call(r,this),this.onModification(),r)}fields(){return this._cachedNonBuiltInFields||(this._cachedNonBuiltInFields=this._fields.values().filter(e=>!e.isBuiltIn)),this._cachedNonBuiltInFields}hasFields(){return this.fields().length>0}builtInFields(){return this.allFields().filter(e=>e.isBuiltIn)}allFields(){return this._fields.values()}field(e){return this._fields.get(e)}typenameField(){return this.field(t.typenameFieldName)}addField(e,t){let r;if("string"==typeof e?(this.checkUpdate(),r=new ev(e)):(this.checkUpdate(e),r=e),this.field(r.name))throw m.ERRORS.INVALID_GRAPHQL.err(`Field ${r.name} already exists on ${this}`);if(t&&!C(t))throw m.ERRORS.INVALID_GRAPHQL.err(`Invalid input type ${t} for field ${r.name}: object and interface field types should be output types.`);return this._fields.set(r.name,r),this._cachedNonBuiltInFields=void 0,G.prototype.setParent.call(r,this),t&&(r.type=t),this.onModification(),r}*allChildElements(){for(let e of this._fields.values())yield e,yield*e.arguments()}removeInterfaceImplementation(e){var t;null===(t=this._interfaceImplementations)||void 0===t||t.delete(e.name),eD(this,e)}removeTypeReference(e){var t;null===(t=this._interfaceImplementations)||void 0===t||t.delete(e.name)}removeInnerElements(){for(let e of this.interfaceImplementations())e.remove();for(let e of this.allFields())e.isBuiltIn?ev.prototype.removeParent.call(e):e.remove()}hasNonExtensionInnerElements(){return this.interfaceImplementations().some(e=>void 0===e.ofExtension())||this.fields().some(e=>void 0===e.ofExtension())}removeInnerElementsExtensions(){this.interfaceImplementations().forEach(e=>e.removeOfExtension()),this.fields().forEach(e=>e.removeOfExtension())}}class el extends es{constructor(){super(...arguments),this.kind="ObjectType",this.astDefinitionKind=n.Kind.OBJECT_TYPE_DEFINITION}isRootType(){return this.schema().schemaDefinition.roots().some(e=>e.type==this)}isQueryRootType(){var e;return(null===(e=this.schema().schemaDefinition.root("query"))||void 0===e?void 0:e.type)===this}isSubscriptionRootType(){var e;return(null===(e=this.schema().schemaDefinition.root("subscription"))||void 0===e?void 0:e.type)===this}removeReferenceRecursive(e){switch(e.kind){case"FieldDefinition":e.removeRecursive();break;case"UnionType":0===e.membersCount()&&e.removeRecursive()}}unionsWhereMember(){var e;let t=[];return null===(e=this._referencers)||void 0===e||e.forEach(e=>{e instanceof H&&A(e)&&t.push(e)}),t}}t.ObjectType=el;class eu extends es{constructor(){super(...arguments),this.kind="InterfaceType",this.astDefinitionKind=n.Kind.INTERFACE_TYPE_DEFINITION}allImplementations(){let e=[];return this.referencers().forEach(t=>{("ObjectType"===t.kind||"InterfaceType"===t.kind)&&e.push(t)}),e}possibleRuntimeTypes(){return this.allImplementations().filter(e=>"ObjectType"===e.kind)}isPossibleRuntimeType(e){let t="string"==typeof e?e:e.name;return this.possibleRuntimeTypes().some(e=>e.name==t)}removeReferenceRecursive(e){"FieldDefinition"===e.kind&&e.removeRecursive()}}t.InterfaceType=eu;class ec extends K{constructor(e){super(),this.type=e}removeInner(){ep.prototype.removeMember.call(this._parent,this.type)}}t.UnionMember=ec;class ep extends H{constructor(){super(...arguments),this.kind="UnionType",this.astDefinitionKind=n.Kind.UNION_TYPE_DEFINITION,this._members=new o.MapWithCachedArrays}onAttached(){er.prototype.runWithBuiltInModificationAllowed.call(this.schema(),()=>{this._typenameField=new ev(t.typenameFieldName,!0),G.prototype.setParent.call(this._typenameField,this),this._typenameField.type=new em(this.schema().stringType())})}types(){return this.members().map(e=>e.type)}members(){return this._members.values()}membersCount(){return this._members.size}hasTypeMember(e){return this._members.has("string"==typeof e?e:e.name)}addType(e){let t;if(e instanceof ec)this.checkUpdate(e),t=e;else{let r;if("string"==typeof e){this.checkUpdate();let t=this.schema().type(e);if(t){if("ObjectType"!=t.kind)throw m.ERRORS.INVALID_GRAPHQL.err(`Cannot add non-object type ${e} (of type ${t.kind}) as member of union type ${this.name}`)}else throw m.ERRORS.INVALID_GRAPHQL.err(`Cannot add unknown type ${e} as member of union type ${this.name}`);r=t}else this.checkUpdate(e),r=e;t=new ec(r)}return this._members.get(t.type.name)||(this._members.set(t.type.name,t),G.prototype.setParent.call(t,this),eR(this,t.type),this.onModification(),t)}clearTypes(){for(let e of this.types())this.removeMember(e);this.onModification()}field(e){if(e===t.typenameFieldName&&this._typenameField)return this._typenameField}typenameField(){return this._typenameField}removeMember(e){this._members.delete(e.name),eD(this,e)}removeTypeReference(e){this._members.delete(e.name)}removeInnerElements(){for(let e of this.members())e.remove()}hasNonExtensionInnerElements(){return this.members().some(e=>void 0===e.ofExtension())}removeReferenceRecursive(e){e.removeRecursive()}removeInnerElementsExtensions(){this.members().forEach(e=>e.removeOfExtension())}}t.UnionType=ep;class ed extends H{constructor(){super(...arguments),this.kind="EnumType",this.astDefinitionKind=n.Kind.ENUM_TYPE_DEFINITION,this._values=new Map}get values(){return Array.from(this._values.values())}value(e){return this._values.get(e)}addValue(e){let t;return"string"==typeof e?(this.checkUpdate(),t=new e_(e)):(this.checkUpdate(e),t=e),this.value(t.name)||(this._values.set(t.name,t),G.prototype.setParent.call(t,this),this.onModification(),t)}removeTypeReference(e){(0,o.assert)(!1,`Eum type ${this} can't reference other types; shouldn't be asked to remove reference to ${e}`)}removeValueInternal(e){this._values.delete(e.name)}removeInnerElements(){for(let e of this.values)e.remove()}hasNonExtensionInnerElements(){return Array.from(this._values.values()).some(e=>void 0===e.ofExtension())}removeReferenceRecursive(e){e.removeRecursive()}removeInnerElementsExtensions(){for(let e of this._values.values())e.removeOfExtension()}}t.EnumType=ed;class ef extends H{constructor(){super(...arguments),this.kind="InputObjectType",this.astDefinitionKind=n.Kind.INPUT_OBJECT_TYPE_DEFINITION,this._fields=new Map}fields(){return this._cachedFieldsArray||(this._cachedFieldsArray=(0,o.mapValues)(this._fields)),this._cachedFieldsArray}field(e){return this._fields.get(e)}addField(e,t){let r="string"==typeof e?new eg(e):e;if(this.checkUpdate(r),this.field(r.name))throw m.ERRORS.INVALID_GRAPHQL.err(`Field ${r.name} already exists on ${this}`);if(t&&!P(t))throw m.ERRORS.INVALID_GRAPHQL.err(`Invalid output type ${t} for field ${r.name}: input field types should be input types.`);return this._fields.set(r.name,r),this._cachedFieldsArray=void 0,G.prototype.setParent.call(r,this),"string"==typeof e&&t&&(r.type=t),this.onModification(),r}hasFields(){return this._fields.size>0}*allChildElements(){yield*this._fields.values()}removeTypeReference(e){(0,o.assert)(!1,`Input Object type ${this} can't reference other types; shouldn't be asked to remove reference to ${e}`)}removeInnerElements(){for(let e of this.fields())e.remove()}removeFieldInternal(e){this._fields.delete(e.name),this._cachedFieldsArray=void 0}hasNonExtensionInnerElements(){return this.fields().some(e=>void 0===e.ofExtension())}removeReferenceRecursive(e){"ArgumentDefinition"===e.kind?e.parent().removeRecursive():e.removeRecursive()}removeInnerElementsExtensions(){this.fields().forEach(e=>e.removeOfExtension())}}t.InputObjectType=ef;class eh{constructor(e){this._type=e,(0,o.assert)(this._type,"Cannot wrap an undefined/null type")}schema(){return this.baseType().schema()}isAttached(){return this.baseType().isAttached()}get ofType(){return this._type}baseType(){return F(this._type)}}class ey extends eh{constructor(e){super(e),this.kind="ListType"}toString(){return`[${this.ofType}]`}}t.ListType=ey;class em extends eh{constructor(e){super(e),this.kind="NonNullType"}toString(){return`${this.ofType}!`}}t.NonNullType=em;class ev extends Q{constructor(e,t=!1){super(e),this.isBuiltIn=t,this.kind="FieldDefinition"}isElementBuiltIn(){return this.isBuiltIn}get coordinate(){let e=this._parent;return`${void 0==e?"<detached>":e.coordinate}.${this.name}`}hasArguments(){return!!this._args&&this._args.size>0}arguments(){var e,t;return null!==(t=null===(e=this._args)||void 0===e?void 0:e.values())&&void 0!==t?t:[]}argument(e){var t;return null===(t=this._args)||void 0===t?void 0:t.get(e)}addArgument(e,t,r){let n;"string"==typeof e?(this.checkUpdate(),(n=new eb(e)).defaultValue=r):(this.checkUpdate(e),n=e);let i=this.argument(n.name);if(i){if(t&&i.type&&!(0,u.sameType)(t,i.type))throw m.ERRORS.INVALID_GRAPHQL.err(`Argument ${n.name} already exists on field ${this.name} with a different type (${i.type})`);if(r&&(!i.defaultValue||!(0,a.valueEquals)(r,i.defaultValue)))throw m.ERRORS.INVALID_GRAPHQL.err(`Argument ${n.name} already exists on field ${this.name} with a different default value (${(0,a.valueToString)(i.defaultValue)})`);return i}if(t&&!P(t))throw m.ERRORS.INVALID_GRAPHQL.err(`Invalid output type ${t} for argument ${n.name} of ${this}: arguments should be input types.`);return this._args||(this._args=new o.MapWithCachedArrays),this._args.set(n.name,n),G.prototype.setParent.call(n,this),"string"==typeof e&&(n.type=t),this.onModification(),n}ofExtension(){return this._extension}removeOfExtension(){this._extension=void 0}setOfExtension(e){var t;this.checkUpdate(),(0,o.assert)(!e||(null===(t=this._parent)||void 0===t?void 0:t.hasExtension(e)),()=>`Cannot mark field ${this.name} as part of the provided extension: it is not an extension of field parent type ${this.parent}`),this._extension=e,this.onModification()}isIntrospectionField(){return(0,c.isIntrospectionName)(this.name)}isSchemaIntrospectionField(){return c.introspectionFieldNames.includes(this.name)}removeArgumentInternal(e){this._args&&this._args.delete(e)}removeParent(){this._parent=void 0}isDeprecated(){return this.hasAppliedDirective("deprecated")}remove(){if(!this._parent)return[];for(let e of(this.checkRemoval(),this.onModification(),this.sourceAST=void 0,this.type=void 0,this.removeAppliedDirectives(),this.arguments()))e.remove();return es.prototype.removeFieldInternal.call(this._parent,this),this._parent=void 0,this._extension=void 0,[]}removeRecursive(){let e=this._parent;this.remove(),e&&!A(e)&&0===e.fields().length&&e.removeRecursive()}toString(){let e=this.hasArguments()?"("+this.arguments().map(e=>e.toString()).join(", ")+")":"";return`${this.name}${e}: ${this.type}`}}t.FieldDefinition=ev;class eg extends Q{constructor(){super(...arguments),this.kind="InputFieldDefinition"}get coordinate(){let e=this._parent;return`${void 0==e?"<detached>":e.coordinate}.${this.name}`}isRequired(){return O(this.type)&&void 0===this.defaultValue}ofExtension(){return this._extension}removeOfExtension(){this._extension=void 0}setOfExtension(e){var t;this.checkUpdate(),(0,o.assert)(!e||(null===(t=this._parent)||void 0===t?void 0:t.hasExtension(e)),()=>`Cannot mark field ${this.name} as part of the provided extension: it is not an extension of field parent type ${this.parent}`),this._extension=e,this.onModification()}isDeprecated(){return this.hasAppliedDirective("deprecated")}remove(){return this._parent&&(this.checkRemoval(),this.onModification(),this.sourceAST=void 0,this.type=void 0,this.defaultValue=void 0,this.removeAppliedDirectives(),ef.prototype.removeFieldInternal.call(this._parent,this),this._parent=void 0,this._extension=void 0),[]}removeRecursive(){let e=this._parent;this.remove(),e&&0===e.fields().length&&e.removeRecursive()}toString(){let e=void 0===this.defaultValue?"":` = ${(0,a.valueToString)(this.defaultValue,this.type)}`;return`${this.name}: ${this.type}${e}`}}t.InputFieldDefinition=eg;class eb extends Q{constructor(e){super(e),this.kind="ArgumentDefinition"}get coordinate(){let e=this._parent;return`${void 0==e?"<detached>":e.coordinate}(${this.name}:)`}isRequired(){return O(this.type)&&void 0===this.defaultValue}isDeprecated(){return this.hasAppliedDirective("deprecated")}remove(){return this._parent&&(this.checkRemoval(),this.onModification(),this.sourceAST=void 0,this.type=void 0,this.defaultValue=void 0,this.removeAppliedDirectives(),this._parent instanceof ev?ev.prototype.removeArgumentInternal.call(this._parent,this.name):eT.prototype.removeArgumentInternal.call(this._parent,this.name),this._parent=void 0),[]}toString(){let e=void 0===this.defaultValue?"":` = ${(0,a.valueToString)(this.defaultValue,this.type)}`;return`${this.name}: ${this.type}${e}`}}t.ArgumentDefinition=eb;class e_ extends W{constructor(){super(...arguments),this.kind="EnumValue"}get coordinate(){let e=this._parent;return`${void 0==e?"<detached>":e.coordinate}.${this.name}`}ofExtension(){return this._extension}removeOfExtension(){this._extension=void 0}setOfExtension(e){var t;this.checkUpdate(),(0,o.assert)(!e||(null===(t=this._parent)||void 0===t?void 0:t.hasExtension(e)),()=>`Cannot mark field ${this.name} as part of the provided extension: it is not an extension of enum value parent type ${this.parent}`),this._extension=e,this.onModification()}isDeprecated(){return this.hasAppliedDirective("deprecated")}remove(){return this._parent&&(this.checkRemoval(),this.onModification(),this.sourceAST=void 0,this.removeAppliedDirectives(),ed.prototype.removeValueInternal.call(this._parent,this),this._parent=void 0,this._extension=void 0),[]}removeTypeReference(e){(0,o.assert)(!1,`Enum value ${this} can't reference other types; shouldn't be asked to remove reference to ${e}`)}toString(){return`${this.name}`}}t.EnumValue=e_;class eT extends W{constructor(e,t=!1){super(e),this.isBuiltIn=t,this.kind="DirectiveDefinition",this.repeatable=!1,this._locations=[]}get coordinate(){return`@${this.name}`}arguments(){var e,t;return null!==(t=null===(e=this._args)||void 0===e?void 0:e.values())&&void 0!==t?t:[]}argument(e){var t;return null===(t=this._args)||void 0===t?void 0:t.get(e)}addArgument(e,t,r){let n;if("string"==typeof e?(this.checkUpdate(),(n=new eb(e)).defaultValue=r):(this.checkUpdate(e),n=e),this.argument(n.name))throw m.ERRORS.INVALID_GRAPHQL.err(`Argument ${n.name} already exists on field ${this.name}`);return this._args||(this._args=new o.MapWithCachedArrays),this._args.set(n.name,n),G.prototype.setParent.call(n,this),"string"==typeof e&&(n.type=t),this.onModification(),n}removeArgumentInternal(e){var t;null===(t=this._args)||void 0===t||t.delete(e)}get locations(){return this._locations}addLocations(...e){let t=!1;for(let r of e)this._locations.includes(r)||(this._locations.push(r),t=!0);return t&&this.onModification(),this}addAllLocations(){return this.addLocations(...Object.values(n.DirectiveLocation))}addAllTypeLocations(){return this.addLocations(n.DirectiveLocation.SCALAR,n.DirectiveLocation.OBJECT,n.DirectiveLocation.INTERFACE,n.DirectiveLocation.UNION,n.DirectiveLocation.ENUM,n.DirectiveLocation.INPUT_OBJECT)}removeLocations(...e){let t=!1;for(let r of e)t||(t=(0,o.removeArrayElement)(r,this._locations));return t&&this.onModification(),this}hasExecutableLocations(){return this.locations.some(e=>x(e))}hasTypeSystemLocations(){return this.locations.some(e=>k(e))}applications(){var e;return null!==(e=this._referencers)&&void 0!==e||(this._referencers=new Set),this._referencers}addReferencer(e){var t;(0,o.assert)(e,"Referencer should exists"),null!==(t=this._referencers)&&void 0!==t||(this._referencers=new Set),this._referencers.add(e)}removeReferencer(e){var t;null===(t=this._referencers)||void 0===t||t.delete(e)}removeTypeReference(e){(0,o.assert)(!1,`Directive definition ${this} can't reference other types (it's arguments can); shouldn't be asked to remove reference to ${e}`)}remove(){var e;if(!this._parent)return[];for(let e of(this.checkRemoval(),this.onModification(),this.sourceAST=void 0,(0,o.assert)(!this._appliedDirectives||0===this._appliedDirectives.length,"Directive definition should not have directive applied to it"),this.arguments()))e.remove();let t=Array.from(null!==(e=this._referencers)&&void 0!==e?e:[]);return this._referencers=void 0,er.prototype.removeDirectiveInternal.call(this._parent,this),this._parent=void 0,t}removeRecursive(){this.remove().forEach(e=>e.remove())}toAST(){return(0,n.parse)((0,l.printDirectiveDefinition)(this)).definitions[0]}toString(){return`@${this.name}`}}t.DirectiveDefinition=eT;class eE extends G{constructor(e,t=Object.create(null)){super(),this.name=e,this._args=t}schema(){return this.parent.schema()}get definition(){if(this.isAttached())return this.schema().directive(this.name)}arguments(e=!1){if(!e)return this._args;let t=this.definition;(0,o.assert)(t,()=>`Cannot include default values for arguments: cannot find directive definition for ${this.name}`);let r=Object.create(null);for(let e of t.arguments()){let t=(0,a.withDefaultValues)(this._args[e.name],e);void 0!==t&&(r[e.name]=t)}return r}onModification(){this.isAttachedToSchemaElement()&&er.prototype.onModification.call(this.schema())}isAttachedToSchemaElement(){return this.isAttached()}setArguments(e){this._args=e,this.onModification()}argumentType(e){var t,r;return null===(r=null===(t=this.definition)||void 0===t?void 0:t.argument(e))||void 0===r?void 0:r.type}matchArguments(e){let t=Object.entries(this._args);if(t.length!==Object.keys(e).length)return!1;for(let[r,n]of t){if(!(r in e))return!1;let t=e[r];if(!(0,a.valueEquals)(t,n))return!1}return!0}ofExtension(){return this._extension}removeOfExtension(){this._extension=void 0}setOfExtension(e){if(this.checkUpdate(),e){let t=this.parent;(0,o.assert)(t instanceof ei||t instanceof H,"Can only mark directive parts of extensions when directly apply to type or schema definition."),(0,o.assert)(t.hasExtension(e),()=>`Cannot mark directive ${this.name} as part of the provided extension: it is not an extension of parent ${t}`)}this._extension=e,this.onModification()}argumentsToAST(){let e=Object.entries(this._args);if(0===e.length)return;let t=this.definition;return(0,o.assert)(t,()=>`Cannot convert arguments of detached directive ${this}`),e.map(([e,r])=>({kind:n.Kind.ARGUMENT,name:{kind:n.Kind.NAME,value:e},value:(0,a.valueToAST)(r,t.argument(e).type)}))}remove(){if(!this._parent)return!1;this.onModification();let e=this.schema().coreFeatures;if(e&&this.name===e.coreItself.nameInSchema){let t=i.FeatureUrl.parse(this._args[e.coreDefinition.urlArgName()]);if(t.identity===e.coreItself.url.identity){for(let t of(er.prototype.unmarkAsCoreSchema.call(this.schema()),this.schema().schemaDefinition.appliedDirectivesOf(e.coreItself.nameInSchema)))t.removeInternal();return!0}J.prototype.removeFeature.call(e,t.identity)}return this.removeInternal()}removeInternal(){if(!this._parent)return!1;let e=this.definition;e&&this.isAttachedToSchemaElement()&&eT.prototype.removeReferencer.call(e,this);let t=this._parent.appliedDirectives,r=(0,o.removeArrayElement)(this,t);return(0,o.assert)(r,()=>`Directive ${this} lists ${this._parent} as parent, but that parent doesn't list it as applied directive`),this._parent=void 0,this._extension=void 0,!0}toString(){let e=Object.entries(this._args).filter(([e,t])=>void 0!==t),t=0==e.length?"":"("+e.map(([e,t])=>`${e}: ${(0,a.valueToString)(t,this.argumentType(e))}`).join(", ")+")";return`@${this.name}${t}`}}function eO(e){return e&&0!=e.length?" "+e.join(" "):""}function eS(e){return e&&0!==e.length?e.map(e=>({kind:n.Kind.DIRECTIVE,name:{kind:n.Kind.NAME,value:e.name},arguments:e.argumentsToAST()})):void 0}function ew(e,t,r=["defer"]){return e.name===t.name&&!r.includes(e.name)&&!r.includes(t.name)&&(0,a.argumentsEquals)(e.arguments(),t.arguments())}t.Directive=eE,t.directivesToString=eO,t.directivesToDirectiveNodes=eS,t.sameDirectiveApplication=ew,t.sameDirectiveApplications=function(e,t,r=["defer"]){if(e.length!==t.length)return!1;for(let n of e)if(!t.some(e=>ew(n,e,r)))return!1;return!0},t.isDirectiveApplicationsSubset=function(e,t){if(t.length>e.length)return!1;for(let r of t)if(!e.some(e=>ew(r,e)))return!1;return!0},t.directiveApplicationsSubstraction=function(e,t){return e.filter(e=>!t.some(t=>ew(e,t)))};class eI{constructor(e){this.name=e}toVariableNode(){return{kind:n.Kind.VARIABLE,name:{kind:n.Kind.NAME,value:this.name}}}toString(){return"$"+this.name}}t.Variable=eI;class eN{constructor(){this._variables=new Map}add(e){this._variables.set(e.name,e)}addAll(e){for(let t of e)this.add(t)}collectInArguments(e){for(let t of Object.values(e))(0,a.collectVariablesInValue)(t,this)}variables(){return(0,o.mapValues)(this._variables)}toString(){return this.variables().toString()}}t.VariableCollector=eN,t.isVariable=function(e){return e instanceof eI};class eA extends V{constructor(e,t,r,n){super(e),this.variable=t,this.type=r,this.defaultValue=n}toVariableDefinitionNode(){let e=(0,a.valueToAST)(this.defaultValue,this.type);return{kind:n.Kind.VARIABLE_DEFINITION,variable:this.variable.toVariableNode(),type:$(this.type),defaultValue:void 0!==e?(0,a.valueNodeToConstValueNode)(e):void 0,directives:this.appliedDirectivesToDirectiveNodes()}}toString(){let e=this.variable+": "+this.type;return void 0!==this.defaultValue&&(e=e+" = "+(0,a.valueToString)(this.defaultValue,this.type)),e+this.appliedDirectivesToString()}}t.VariableDefinition=eA;class eC{constructor(){this._definitions=new o.MapWithCachedArrays}add(e){return!this._definitions.has(e.variable.name)&&(this._definitions.set(e.variable.name,e),!0)}addAll(e){for(let t of e._definitions.values())this.add(t)}definition(e){let t="string"==typeof e?e:e.name;return this._definitions.get(t)}isEmpty(){return 0===this._definitions.size}definitions(){return this._definitions.values()}filter(e){if(0===e.length)return new eC;let t=new eC;for(let r of e){let e=this.definition(r);if(!e)throw Error(`Cannot find variable ${r} in definitions ${this}`);t.add(e)}return t}toVariableDefinitionNodes(){if(0!==this._definitions.size)return this.definitions().map(e=>e.toVariableDefinitionNode())}toString(){return"("+this.definitions().join(", ")+")"}}function eP(e,t){let r=new eI(t.variable.name.value),n=U(e,t.type);if(!P(n))throw m.ERRORS.INVALID_GRAPHQL.err(`Invalid type "${n}" for variable $${r}: not an input type`,{nodes:t.type});return new eA(e,r,n,t.defaultValue?(0,a.valueFromAST)(t.defaultValue,n):void 0)}function eR(e,t){switch(t.kind){case"ListType":case"NonNullType":eR(e,t.baseType());break;default:H.prototype.addReferencer.call(t,e)}}function eD(e,t){switch(t.kind){case"ListType":case"NonNullType":eD(e,t.baseType());break;default:H.prototype.removeReferencer.call(t,e)}}function eF(e,t){switch(e){case"ScalarType":return new eo(t);case"ObjectType":return new el(t);case"InterfaceType":return new eu(t);case"UnionType":return new ep(t);case"EnumType":return new ed(t);case"InputObjectType":return new ef(t);default:(0,o.assert)(!1,`Unhandled kind ${e} for type ${t}`)}}function*ej(e,t){var r;for(let n of e.builtInTypes())n.isIntrospectionType()||(null===(r=t.type(n.name))||void 0===r?void 0:r.isBuiltIn)||(yield n);yield*e.types()}function*eL(e,t){var r;for(let n of e.builtInDirectives())(null===(r=t.directive(n.name))||void 0===r?void 0:r.isBuiltIn)||(yield n);yield*e.directives()}function ex(e,t){let r=new Map;for(let n of e.extensions()){let e=new q;t.addExtension(e),r.set(n,e)}return r}function eM(e,t,r){let n=t.ofExtension();n&&r.setOfExtension(e.get(n))}function ek(e,t,r){e.appliedDirectives.filter(e=>r||!e.name.startsWith("join__")).forEach(e=>e$(e,t))}function e$(e,t){let r=t.applyDirective(e.name,{...e.arguments()});return r.sourceAST=e.sourceAST,r}function eU(e,t){if(e)switch(e.kind){case"ListType":return new ey(eU(e.ofType,t));case"NonNullType":return new em(eU(e.ofType,t));default:return t.type(e.name)}}function eV({source:e,dest:t,copyDirectiveApplications:r=!0,cloneJoinDirectives:n}){let i=eU(e.type,t.schema());t.type=i,t.defaultValue=e.defaultValue,r&&ek(e,t,n),t.description=e.description,t.sourceAST=e.sourceAST}function eG(e,t,r=!0,n){let i=e.locations;if(n&&(i=i.filter(e=>n(e))),0!==i.length){for(let n of e.arguments()){let e=eU(n.type,t.schema());eV({source:n,dest:t.addArgument(n.name,e),copyDirectiveApplications:r,cloneJoinDirectives:!0})}t.repeatable=e.repeatable,t.addLocations(...i),t.sourceAST=e.sourceAST,t.description=e.description}}t.VariableDefinitions=eC,t.variableDefinitionsFromAST=function(e,t){let r=new eC;for(let n of t)if(!r.add(eP(e,n))){let e=n.variable.name.value;throw m.ERRORS.INVALID_GRAPHQL.err(`Duplicate definition for variable ${e}`,{nodes:t.filter(t=>t.variable.name.value===e)})}return r},t.variableDefinitionFromAST=eP,t.newNamedType=eF,t.copyDirectiveDefinitionToSchema=function({definition:e,schema:t,copyDirectiveApplicationsInArguments:r=!0,locationFilter:n}){eG(e,t.addDirectiveDefinition(e.name),r,n)},t.isFieldDefinition=function(e){return e instanceof ev}},30500:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEnumTypeSpecification=t.createUnionTypeSpecification=t.createObjectTypeSpecification=t.createScalarTypeSpecification=t.createDirectiveSpecification=void 0;let n=r(57343),i=r(48170),o=r(74533),a=r(24056),s=r(56563),l=r(4749);function u(e,t){return e===t.kind?[]:[o.ERRORS.TYPE_DEFINITION_INVALID.err(`Invalid definition for type ${t.name}: ${t.name} should be a ${e} but is defined as a ${t.kind}`,{nodes:t.sourceAST})]}function c(e,t,r,n){var l;let u=null!==(l=e.args)&&void 0!==l?l:[],c=[];for(let{name:e,type:l,defaultValue:p}of u){let u=t.argument(e);if(!u){(0,i.isNonNullType)(l)&&void 0===p&&c.push(o.ERRORS.DIRECTIVE_DEFINITION_INVALID.err(`Invalid definition for ${r}: missing required argument "${e}"`,{nodes:n}));continue}let d=u.type;(0,i.isNonNullType)(d)&&!(0,i.isNonNullType)(l)&&(d=d.ofType),(0,s.sameType)(l,d)||function e(t,r){return(0,i.isListType)(t)?(0,i.isListType)(r)&&e(t.ofType,r.ofType):(0,i.isNonNullType)(t)?(0,i.isNonNullType)(r)&&e(t.ofType,r.ofType):(0,i.isCustomScalarType)(t)&&!(0,i.isCustomScalarType)(r)}(l,d)?(0,i.isNonNullType)(u.type)||(0,a.valueEquals)(p,u.defaultValue)||c.push(o.ERRORS.DIRECTIVE_DEFINITION_INVALID.err(`Invalid definition for ${r}: argument "${e}" should have default value ${(0,a.valueToString)(p)} but found default value ${(0,a.valueToString)(u.defaultValue)}`,{nodes:u.sourceAST})):c.push(o.ERRORS.DIRECTIVE_DEFINITION_INVALID.err(`Invalid definition for ${r}: argument "${e}" should have type "${l}" but found type "${u.type}"`,{nodes:u.sourceAST}))}for(let e of t.arguments())u.some(t=>t.name===e.name)||c.push(o.ERRORS.DIRECTIVE_DEFINITION_INVALID.err(`Invalid definition for ${r}: unknown/unsupported argument "${e.name}"`,{nodes:e.sourceAST}));return c}t.createDirectiveSpecification=function({name:e,locations:t,repeatable:r=!1,args:a=[],composes:s=!1,supergraphSpecification:u,staticArgumentTransform:p}){let d;if(s){let t;(0,l.assert)(u,`Should provide a @link specification to use in supergraph for directive @${e} if it composes`);let i=new Map(a.filter(e=>e.compositionStrategy).map(e=>[e.name,e.compositionStrategy]));i.size>0&&((0,l.assert)(!r,()=>`Invalid directive specification for @${e}: @${e} is repeatable and should not define composition strategy for its arguments`),(0,l.assert)(i.size===a.length,()=>`Invalid directive specification for @${e}: not all arguments define a composition strategy`),t=(t,r)=>{for(let{name:o,type:s}of a){let a=i.get(o);(0,l.assert)(a,()=>`Should have a strategy for ${o}`);let u=s(t,r);(0,l.assert)(!Array.isArray(u),()=>`Should have gotten error getting type for @${e}(${o}:), but got ${u}`);let{valid:c,supportedMsg:p}=a.isTypeSupported(t,u);if(!c)return new n.GraphQLError(`Invalid composition strategy ${a.name} for argument @${e}(${o}:) of type ${u}; ${a.name} only supports ${p}`)}return{merge:(e,t)=>{let r=i.get(e);return(0,l.assert)(r,()=>`Should have a strategy for ${e}`),r.mergeValues(t)},toString:()=>0===i.size?"<none>":"{ "+[...i.entries()].map(([e,t])=>`"${e}": ${t.name}`).join(", ")+" }"}}),d={supergraphSpecification:u,argumentsMerger:t,staticArgumentTransform:p}}return{name:e,composition:d,checkOrAdd:(n,s,l)=>{var u;let p=null!==(u=null==s?void 0:s.directiveNameInSchema(e))&&void 0!==u?u:e,{resolvedArgs:d,errors:f}=a.reduce(({resolvedArgs:e,errors:t},r)=>{let i=r.type(n,s);return Array.isArray(i)?t.push(...i):e.push({...r,type:i}),{resolvedArgs:e,errors:t}},{resolvedArgs:[],errors:[]});if(f.length>0)return f;let h=n.directive(p);if(h)return function(e,t){let r=`"@${e.name}"`,n=c(e,t,`directive ${r}`);return!e.repeatable&&t.repeatable&&(n=n.concat(o.ERRORS.DIRECTIVE_DEFINITION_INVALID.err(`Invalid definition for directive ${r}: ${r} should${e.repeatable?"":" not"} be repeatable`,{nodes:t.sourceAST}))),t.locations.every(t=>e.locations.includes(t))||(n=n.concat(o.ERRORS.DIRECTIVE_DEFINITION_INVALID.err(`Invalid definition for directive ${r}: ${r} should have locations ${e.locations.join(", ")}, but found (non-subset) ${t.locations.join(", ")}`,{nodes:t.sourceAST}))),n}({name:p,locations:t,repeatable:r,args:d},h);{let e=n.addDirectiveDefinition(new i.DirectiveDefinition(p,l));for(let{name:n,type:i,defaultValue:o}of(e.repeatable=r,e.addLocations(...t),d))e.addArgument(n,i,o);return[]}}}},t.createScalarTypeSpecification=function({name:e}){return{name:e,checkOrAdd:(t,r,n)=>{var o;let a=null!==(o=null==r?void 0:r.typeNameInSchema(e))&&void 0!==o?o:e,s=t.type(a);return s?u("ScalarType",s):(t.addType(new i.ScalarType(a,n)),[])}}},t.createObjectTypeSpecification=function({name:e,fieldsFct:t}){return{name:e,checkOrAdd:(r,n,a)=>{var p;let d=null!==(p=null==n?void 0:n.typeNameInSchema(e))&&void 0!==p?p:e,f=t(r),h=r.type(d);if(h){let e=u("ObjectType",h);if(e.length>0)return e;for(let{name:t,type:r,args:n}of((0,l.assert)((0,i.isObjectType)(h),"Should be an object type"),f)){let a=h.field(t);if(!a){e=e.concat(o.ERRORS.TYPE_DEFINITION_INVALID.err(`Invalid definition of type ${t}: missing field ${t}`,{nodes:h.sourceAST}));continue}let l=a.type;!(0,i.isNonNullType)(r)&&(0,i.isNonNullType)(l)&&(l=l.ofType),(0,s.sameType)(r,l)||(e=e.concat(o.ERRORS.TYPE_DEFINITION_INVALID.err(`Invalid definition for field ${t} of type ${t}: should have type ${r} but found type ${a.type}`,{nodes:a.sourceAST}))),e=e.concat(c({name:t,args:n},a,`field "${a.coordinate}"`))}return e}{let e=r.addType(new i.ObjectType(d,a));for(let{name:t,type:r,args:n}of f){let i=e.addField(t,r);for(let{name:e,type:t,defaultValue:r}of null!=n?n:[])i.addArgument(e,t,r)}return[]}}}},t.createUnionTypeSpecification=function({name:e,membersFct:t}){return{name:e,checkOrAdd:(r,n,a)=>{var s;let c=null!==(s=null==n?void 0:n.typeNameInSchema(e))&&void 0!==s?s:e,p=r.type(c),d=t(r).sort((e,t)=>e.localeCompare(t));if(0===d.length)return p?[o.ERRORS.TYPE_DEFINITION_INVALID.err(`Invalid definition of type ${e}: expected the union type to not exist/have no members but it is defined.`,{nodes:p.sourceAST})]:[];if(p){let t=u("UnionType",p);if(t.length>0)return t;(0,l.assert)((0,i.isUnionType)(p),"Should be an union type");let r=p.members().map(e=>e.type.name).sort((e,t)=>e.localeCompare(t));return(0,l.arrayEquals)(d,r)||(t=t.concat(o.ERRORS.TYPE_DEFINITION_INVALID.err(`Invalid definition of type ${e}: expected members [${d}] but found [${r}].`,{nodes:p.sourceAST}))),t}{let e=r.addType(new i.UnionType(c,a));for(let t of d)e.addType(t);return[]}}}},t.createEnumTypeSpecification=function({name:e,values:t}){return{name:e,checkOrAdd:(r,n,a)=>{var s;let c=null!==(s=null==n?void 0:n.typeNameInSchema(e))&&void 0!==s?s:e,p=r.type(c),d=t.map(e=>e.name).sort((e,t)=>e.localeCompare(t));if(p){let t=u("EnumType",p);if(t.length>0)return t;(0,l.assert)((0,i.isEnumType)(p),"Should be an enum type");let r=p.values.map(e=>e.name).sort((e,t)=>e.localeCompare(t));return(0,l.arrayEquals)(d,r)||(t=t.concat(o.ERRORS.TYPE_DEFINITION_INVALID.err(`Invalid definition for type "${e}": expected values [${d.join(", ")}] but found [${r.join(", ")}].`,{nodes:p.sourceAST}))),t}{let e=r.addType(new i.EnumType(c,a));for(let{name:r,description:n}of t)e.addValue(r).description=n;return[]}}}}},74533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REMOVED_ERRORS=t.ERRORS=t.ERROR_CATEGORIES=t.withModifiedErrorNodes=t.withModifiedErrorMessage=t.errorCodeDef=t.errorCode=t.printErrors=t.printGraphQLErrorsOrRethrow=t.errorCauses=t.aggregateError=t.extractGraphQLErrorOptions=void 0;let n=r(57343),i=r(4749),o=(e,t,r=l)=>({code:e,description:t,metadata:r,err:(t,r)=>new n.GraphQLError(t,{...r,extensions:{...null==r?void 0:r.extensions,code:e}})});t.extractGraphQLErrorOptions=function(e){return{nodes:e.nodes,source:e.source,positions:e.positions,path:e.path,originalError:e.originalError,extensions:e.extensions}};class a extends n.GraphQLError{constructor(e,t,r,n){super(t+". Caused by:\n"+r.map(e=>e.toString()).join("\n\n"),{...n,extensions:{code:e}}),this.causes=r}toString(){let e=`[${this.extensions.code}] ${super.toString()}`;for(let t of(e+="\ncaused by:",this.causes))e+="\n\n  - "+t.toString().split("\n").join("\n    ");return e}}function s(e){return e instanceof a?e.causes:e instanceof n.GraphQLError?[e]:void 0}t.aggregateError=function(e,t,r){return new a(e,t,r)},t.errorCauses=s,t.printGraphQLErrorsOrRethrow=function(e){let t=s(e);if(!t)throw e;return t.map(e=>e.toString()).join("\n\n")},t.printErrors=function(e){return e.map(e=>e.toString()).join("\n\n")};let l={addedIn:"2.0.0"},u=(e,t,r=l)=>({createCode:n=>o(e(n),t(n),r),get:t=>{let r=tn[e(t)];return(0,i.assert)(r,`Unexpected element: ${t}`),r}}),c=(e,t,r=l)=>u(t=>`${t.toLocaleUpperCase()}_${e}`,t,r);function p(e){if(e.extensions&&"code"in e.extensions)return e.extensions.code}t.errorCode=p,t.errorCodeDef=function(e){let t="string"==typeof e?e:p(e);return t?tn[t]:void 0},t.withModifiedErrorMessage=function(e,t){return new n.GraphQLError(t,{nodes:e.nodes,source:e.source,positions:e.positions,path:e.path,originalError:e.originalError,extensions:e.extensions})},t.withModifiedErrorNodes=function(e,t){return new n.GraphQLError(e.message,{nodes:t,source:e.source,positions:e.positions,path:e.path,originalError:e.originalError,extensions:e.extensions})};let d=o("INVALID_GRAPHQL","A schema is invalid GraphQL: it violates one of the rule of the specification."),f=o("DIRECTIVE_DEFINITION_INVALID","A built-in or federation directive has an invalid definition in the schema.",{...l,replaces:["TAG_DEFINITION_INVALID"]}),h=o("TYPE_DEFINITION_INVALID","A built-in or federation type has an invalid definition in the schema."),y=o("UNSUPPORTED_LINKED_FEATURE","Indicates that a feature used in a @link is either unsupported or is used with unsupported options."),m=o("UNKNOWN_FEDERATION_LINK_VERSION","The version of federation in a @link directive on the schema is unknown."),v=o("UNKNOWN_LINK_VERSION","The version of @link set on the schema is unknown.",{addedIn:"2.1.0"}),g=c("FIELDS_HAS_ARGS",e=>`The \`fields\` argument of a \`@${e}\` directive includes a field defined with arguments (which is not currently supported).`),b=g.createCode("key"),_=g.createCode("provides"),T=c("FIELDS_MISSING_EXTERNAL",e=>`The \`fields\` argument of a \`@${e}\` directive includes a field that is not marked as \`@external\`.`,{addedIn:"0.x"}),E=T.createCode("provides"),O=T.createCode("requires"),S=c("UNSUPPORTED_ON_INTERFACE",e=>`A \`@${e}\` directive is used on an interface, which is ${"key"===e?"only supported when @linking to federation 2.3+":"not (yet) supported"}.`),w=S.createCode("key"),I=S.createCode("provides"),N=S.createCode("requires"),A=c("DIRECTIVE_IN_FIELDS_ARG",e=>`The \`fields\` argument of a \`@${e}\` directive includes some directive applications. This is not supported`,{addedIn:"2.1.0"}),C=A.createCode("key"),P=A.createCode("provides"),R=A.createCode("requires"),D=o("EXTERNAL_UNUSED","An `@external` field is not being used by any instance of `@key`, `@requires`, `@provides` or to satisfy an interface implementation.",{addedIn:"0.x"}),F=o("TYPE_WITH_ONLY_UNUSED_EXTERNAL",`A federation 1 schema has a composite type comprised only of unused external fields. Note that this error can _only_ be raised for federation 1 schema as federation 2 schema do not allow unused external fields (and errors with code ${D.code} will be raised in that case). But when federation 1 schema are automatically migrated to federation 2 ones, unused external fields are automatically removed, and in rare case this can leave a type empty. If that happens, an error with this code will be raised`),j=o("PROVIDES_ON_NON_OBJECT_FIELD","A `@provides` directive is used to mark a field whose base type is not an object type."),L=c("INVALID_FIELDS_TYPE",e=>`The value passed to the \`fields\` argument of a \`@${e}\` directive is not a string.`),x=L.createCode("key"),M=L.createCode("provides"),k=L.createCode("requires"),$=c("INVALID_FIELDS",e=>`The \`fields\` argument of a \`@${e}\` directive is invalid (it has invalid syntax, includes unknown fields, ...).`),U=$.createCode("key"),V=$.createCode("provides"),G=$.createCode("requires"),q=o("KEY_FIELDS_SELECT_INVALID_TYPE","The `fields` argument of `@key` directive includes a field whose type is a list, interface, or union type. Fields of these types cannot be part of a `@key`",{addedIn:"0.x"}),B=u(e=>`ROOT_${e.toLocaleUpperCase()}_USED`,e=>`A subgraph's schema defines a type with the name \`${e}\`, while also specifying a _different_ type name as the root query object. This is not allowed.`,{addedIn:"0.x"}),W=B.createCode("query"),H=B.createCode("mutation"),Q=B.createCode("subscription"),K=o("INVALID_SUBGRAPH_NAME",'A subgraph name is invalid (subgraph names cannot be a single underscore ("_")).'),z=o("NO_QUERIES","None of the composed subgraphs expose any query."),Y=o("INTERFACE_FIELD_NO_IMPLEM","After subgraph merging, an implementation is missing a field of one of the interface it implements (which can happen for valid subgraphs)."),J=o("TYPE_KIND_MISMATCH","A type has the same name in different subgraphs, but a different kind. For instance, one definition is an object type but another is an interface.",{...l,replaces:["VALUE_TYPE_KIND_MISMATCH","EXTENSION_OF_WRONG_KIND","ENUM_MISMATCH_TYPE"]}),X=o("CONTEXT_NOT_SET","Context is never set for context trying to be used.",{addedIn:"2.8.0"}),Z=o("CONTEXT_INVALID_SELECTION","Selection within @fromContext must resolve to a single field.",{addedIn:"2.8.0"}),ee=o("NO_CONTEXT_IN_SELECTION","Selection in @fromContext field argument does not reference a context.",{addedIn:"2.8.0"}),et=o("CONTEXT_NO_RESOLVABLE_KEY","If an ObjectType uses a @fromContext, at least one of its keys must be resolvable.",{addedIn:"2.8.0"}),er=o("CONTEXT_NAME_INVALID","Context name is invalid.",{addedIn:"2.8.0"}),en=o("EXTERNAL_TYPE_MISMATCH","An `@external` field has a type that is incompatible with the declaration(s) of that field in other subgraphs.",{addedIn:"0.x"}),ei=o("EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE","The @external directive collides with other directives in some situations.",{addedIn:"2.1.0"}),eo=o("EXTERNAL_ARGUMENT_MISSING","An `@external` field is missing some arguments present in the declaration(s) of that field in other subgraphs."),ea=o("EXTERNAL_ARGUMENT_TYPE_MISMATCH","An `@external` field declares an argument with a type that is incompatible with the corresponding argument in the declaration(s) of that field in other subgraphs."),es=o("EXTERNAL_ARGUMENT_DEFAULT_MISMATCH","An `@external` field declares an argument with a default that is incompatible with the corresponding argument in the declaration(s) of that field in other subgraphs."),el=o("EXTERNAL_ON_INTERFACE",'The field of an interface type is marked with `@external`: as external is about marking field not resolved by the subgraph and as interface field are not resolved (only implementations of those fields are), an "external" interface field is nonsensical'),eu=o("MERGED_DIRECTIVE_APPLICATION_ON_EXTERNAL","In a subgraph, a field is both marked @external and has a merged directive applied to it"),ec=o("FIELD_TYPE_MISMATCH","A field has a type that is incompatible with other declarations of that field in other subgraphs.",{...l,replaces:["VALUE_TYPE_FIELD_TYPE_MISMATCH"]}),ep=o("FIELD_ARGUMENT_TYPE_MISMATCH","An argument (of a field/directive) has a type that is incompatible with that of other declarations of that same argument in other subgraphs.",{...l,replaces:["VALUE_TYPE_INPUT_VALUE_MISMATCH"]}),ed=o("INPUT_FIELD_DEFAULT_MISMATCH","An input field has a default value that is incompatible with other declarations of that field in other subgraphs."),ef=o("FIELD_ARGUMENT_DEFAULT_MISMATCH","An argument (of a field/directive) has a default value that is incompatible with that of other declarations of that same argument in other subgraphs."),eh=o("EXTENSION_WITH_NO_BASE","A subgraph is attempting to `extend` a type that is not originally defined in any known subgraph.",{addedIn:"0.x"}),ey=o("EXTERNAL_MISSING_ON_BASE","A field is marked as `@external` in a subgraph but with no non-external declaration in any other subgraph.",{addedIn:"0.x"}),em=o("INVALID_FIELD_SHARING","A field that is non-shareable in at least one subgraph is resolved by multiple subgraphs."),ev=o("INVALID_SHAREABLE_USAGE","The `@shareable` federation directive is used in an invalid way.",{addedIn:"2.1.2"}),eg=o("INVALID_LINK_DIRECTIVE_USAGE","An application of the @link directive is invalid/does not respect the specification."),eb=o("INVALID_LINK_IDENTIFIER","A url/version for a @link feature is invalid/does not respect the specification.",{addedIn:"2.1.0"}),e_=o("LINK_IMPORT_NAME_MISMATCH","The import name for a merged directive (as declared by the relevant `@link(import:)` argument) is inconsistent between subgraphs."),eT=o("REFERENCED_INACCESSIBLE","An element is marked as @inaccessible but is referenced by an element visible in the API schema."),eE=o("DEFAULT_VALUE_USES_INACCESSIBLE","An element is marked as @inaccessible but is used in the default value of an element visible in the API schema."),eO=o("QUERY_ROOT_TYPE_INACCESSIBLE","An element is marked as @inaccessible but is the query root type, which must be visible in the API schema."),eS=o("REQUIRED_INACCESSIBLE","An element is marked as @inaccessible but is required by an element visible in the API schema."),ew=o("IMPLEMENTED_BY_INACCESSIBLE","An element is marked as @inaccessible but implements an element visible in the API schema."),eI=o("DISALLOWED_INACCESSIBLE","An element is marked as @inaccessible that is not allowed to be @inaccessible."),eN=o("ONLY_INACCESSIBLE_CHILDREN","A type visible in the API schema has only @inaccessible children."),eA=o("REQUIRED_INPUT_FIELD_MISSING_IN_SOME_SUBGRAPH","A field of an input object type is mandatory in some subgraphs, but the field is not defined in all the subgraphs that define the input object type."),eC=o("REQUIRED_ARGUMENT_MISSING_IN_SOME_SUBGRAPH","An argument of a field or directive definition is mandatory in some subgraphs, but the argument is not defined in all the subgraphs that define the field or directive definition."),eP=o("EMPTY_MERGED_INPUT_TYPE","An input object type has no field common to all the subgraphs that define the type. Merging that type would result in an invalid empty input object type."),eR=o("ENUM_VALUE_MISMATCH","An enum type that is used as both an input and output type has a value that is not defined in all the subgraphs that define the enum type."),eD=o("EMPTY_MERGED_ENUM_TYPE","An enum type has no value common to all the subgraphs that define the type. Merging that type would result in an invalid empty enum type."),eF=o("SHAREABLE_HAS_MISMATCHED_RUNTIME_TYPES","A shareable field return type has mismatched possible runtime types in the subgraphs in which the field is declared. As shared fields must resolve the same way in all subgraphs, this is almost surely a mistake."),ej=o("SATISFIABILITY_ERROR","Subgraphs can be merged, but the resulting supergraph API would have queries that cannot be satisfied by those subgraphs."),eL=o("OVERRIDE_FROM_SELF_ERROR",'Field with `@override` directive has "from" location that references its own subgraph.'),ex=o("OVERRIDE_SOURCE_HAS_OVERRIDE","Field which is overridden to another subgraph is also marked @override."),eM=o("OVERRIDE_COLLISION_WITH_ANOTHER_DIRECTIVE","The @override directive cannot be used on external fields, nor to override fields with either @external, @provides, or @requires."),ek=o("OVERRIDE_ON_INTERFACE","The @override directive cannot be used on the fields of an interface type.",{addedIn:"2.3.0"}),e$=o("OVERRIDE_LABEL_INVALID","The @override directive `label` argument must match the pattern /^[a-zA-Z][a-zA-Z0-9_-:./]*$/ or /^percent((d{1,2}(.d{1,8})?|100))$/",{addedIn:"2.7.0"}),eU=o("UNSUPPORTED_FEATURE","Indicates an error due to feature currently unsupported by federation.",{addedIn:"2.1.0"}),eV=o("INVALID_FEDERATION_SUPERGRAPH","Indicates that a schema provided for an Apollo Federation supergraph is not a valid supergraph schema.",{addedIn:"2.1.0"}),eG=o("DOWNSTREAM_SERVICE_ERROR","Indicates an error in a subgraph service query during query execution in a federated service.",{addedIn:"0.x"}),eq=o("DIRECTIVE_COMPOSITION_ERROR","Error when composing custom directives.",{addedIn:"2.1.0"}),eB=o("INTERFACE_OBJECT_USAGE_ERROR","Error in the usage of the @interfaceObject directive.",{addedIn:"2.3.0"}),eW=o("INTERFACE_KEY_NOT_ON_IMPLEMENTATION","A `@key` is defined on an interface type, but is not defined (or is not resolvable) on at least one of the interface implementations",{addedIn:"2.3.0"}),eH=o("INTERFACE_KEY_MISSING_IMPLEMENTATION_TYPE","A subgraph has a `@key` on an interface type, but that subgraph does not define an implementation (in the supergraph) of that interface",{addedIn:"2.3.0"}),eQ=o("SOURCE_FEDERATION_VERSION_REQUIRED","Schemas using `@source{API,Type,Field}` directives must @link-import v2.7 or later of federation",{addedIn:"2.7.1"}),eK=o("SOURCE_API_NAME_INVALID","Each `@sourceAPI` directive must take a unique and valid name as an argument",{addedIn:"2.7.0"}),ez=o("SOURCE_API_PROTOCOL_INVALID","Each `@sourceAPI` directive must specify exactly one of the known protocols",{addedIn:"2.7.0"}),eY=o("SOURCE_API_HTTP_BASE_URL_INVALID","The `@sourceAPI` directive must specify a valid http.baseURL",{addedIn:"2.7.0"}),eJ=o("SOURCE_HTTP_HEADERS_INVALID","The `http.headers` argument of `@source*` directives must specify valid HTTP headers",{addedIn:"2.7.0"}),eX=o("SOURCE_TYPE_API_ERROR","The `api` argument of the `@sourceType` directive must match a valid `@sourceAPI` name",{addedIn:"2.7.0"}),eZ=o("SOURCE_TYPE_PROTOCOL_INVALID","The `@sourceType` directive must specify the same protocol as its corresponding `@sourceAPI`",{addedIn:"2.7.0"}),e0=o("SOURCE_TYPE_HTTP_METHOD_INVALID","The `@sourceType` directive must specify exactly one of `http.GET` or `http.POST`",{addedIn:"2.7.0"}),e1=o("SOURCE_TYPE_HTTP_PATH_INVALID","The `@sourceType` directive must specify a valid URL template for `http.GET` or `http.POST`",{addedIn:"2.7.0"}),e2=o("SOURCE_TYPE_HTTP_BODY_INVALID","If the `@sourceType` specifies `http.body`, it must be a valid `JSONSelection`",{addedIn:"2.7.0"}),e4=o("SOURCE_TYPE_ON_NON_OBJECT_OR_NON_ENTITY","The `@sourceType` directive must be applied to an object or interface type that also has `@key`",{addedIn:"2.7.0"}),e3=o("SOURCE_TYPE_SELECTION_INVALID","The `selection` argument of the `@sourceType` directive must be a valid `JSONSelection` that outputs fields of the GraphQL type"),e5=o("SOURCE_FIELD_API_ERROR","The `api` argument of the `@sourceField` directive must match a valid `@sourceAPI` name",{addedIn:"2.7.0"}),e8=o("SOURCE_FIELD_PROTOCOL_INVALID","If `@sourceField` specifies a protocol, it must match the corresponding `@sourceAPI` protocol",{addedIn:"2.7.0"}),e6=o("SOURCE_FIELD_HTTP_METHOD_INVALID","The `@sourceField` directive must specify at most one of `http.{GET,POST,PUT,PATCH,DELETE}`",{addedIn:"2.7.0"}),e7=o("SOURCE_FIELD_HTTP_PATH_INVALID","The `@sourceField` directive must specify a valid URL template for `http.{GET,POST,PUT,PATCH,DELETE}`",{addedIn:"2.7.0"}),e9=o("SOURCE_FIELD_HTTP_BODY_INVALID","If `@sourceField` specifies http.body, it must be a valid `JSONSelection` matching available arguments and fields",{addedIn:"2.7.0"}),te=o("SOURCE_FIELD_SELECTION_INVALID","The `selection` argument of the `@sourceField` directive must be a valid `JSONSelection` that outputs fields of the GraphQL type",{addedIn:"2.7.0"}),tt=o("SOURCE_FIELD_NOT_ON_ROOT_OR_ENTITY_FIELD","The `@sourceField` directive must be applied to a field of the `Query` or `Mutation` types, or of an entity type",{addedIn:"2.7.0"}),tr=o("CONTEXTUAL_ARGUMENT_NOT_CONTEXTUAL_IN_ALL_SUBGRAPHS","Argument on field is marked contextual in only some subgraphs",{addedIn:"2.7.0"});t.ERROR_CATEGORIES={DIRECTIVE_FIELDS_MISSING_EXTERNAL:T,DIRECTIVE_UNSUPPORTED_ON_INTERFACE:S,DIRECTIVE_INVALID_FIELDS_TYPE:L,DIRECTIVE_INVALID_FIELDS:$,FIELDS_HAS_ARGS:g,ROOT_TYPE_USED:B,DIRECTIVE_IN_FIELDS_ARG:A},t.ERRORS={INVALID_GRAPHQL:d,DIRECTIVE_DEFINITION_INVALID:f,TYPE_DEFINITION_INVALID:h,UNSUPPORTED_LINKED_FEATURE:y,UNKNOWN_FEDERATION_LINK_VERSION:m,UNKNOWN_LINK_VERSION:v,KEY_FIELDS_HAS_ARGS:b,PROVIDES_FIELDS_HAS_ARGS:_,PROVIDES_MISSING_EXTERNAL:E,REQUIRES_MISSING_EXTERNAL:O,KEY_UNSUPPORTED_ON_INTERFACE:w,PROVIDES_UNSUPPORTED_ON_INTERFACE:I,REQUIRES_UNSUPPORTED_ON_INTERFACE:N,EXTERNAL_UNUSED:D,EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE:ei,TYPE_WITH_ONLY_UNUSED_EXTERNAL:F,PROVIDES_ON_NON_OBJECT_FIELD:j,KEY_INVALID_FIELDS_TYPE:x,PROVIDES_INVALID_FIELDS_TYPE:M,REQUIRES_INVALID_FIELDS_TYPE:k,KEY_INVALID_FIELDS:U,PROVIDES_INVALID_FIELDS:V,REQUIRES_INVALID_FIELDS:G,KEY_FIELDS_SELECT_INVALID_TYPE:q,ROOT_QUERY_USED:W,ROOT_MUTATION_USED:H,ROOT_SUBSCRIPTION_USED:Q,INVALID_SUBGRAPH_NAME:K,NO_QUERIES:z,INTERFACE_FIELD_NO_IMPLEM:Y,TYPE_KIND_MISMATCH:J,CONTEXT_NOT_SET:X,CONTEXT_INVALID_SELECTION:Z,NO_CONTEXT_IN_SELECTION:ee,CONTEXT_NO_RESOLVABLE_KEY:et,CONTEXT_NAME_INVALID:er,EXTERNAL_TYPE_MISMATCH:en,EXTERNAL_ARGUMENT_MISSING:eo,EXTERNAL_ARGUMENT_TYPE_MISMATCH:ea,EXTERNAL_ARGUMENT_DEFAULT_MISMATCH:es,EXTERNAL_ON_INTERFACE:el,MERGED_DIRECTIVE_APPLICATION_ON_EXTERNAL:eu,FIELD_TYPE_MISMATCH:ec,ARGUMENT_TYPE_MISMATCH:ep,INPUT_FIELD_DEFAULT_MISMATCH:ed,ARGUMENT_DEFAULT_MISMATCH:ef,EXTENSION_WITH_NO_BASE:eh,EXTERNAL_MISSING_ON_BASE:ey,INVALID_FIELD_SHARING:em,INVALID_SHAREABLE_USAGE:ev,INVALID_LINK_DIRECTIVE_USAGE:eg,INVALID_LINK_IDENTIFIER:eb,LINK_IMPORT_NAME_MISMATCH:e_,REFERENCED_INACCESSIBLE:eT,DEFAULT_VALUE_USES_INACCESSIBLE:eE,QUERY_ROOT_TYPE_INACCESSIBLE:eO,REQUIRED_INACCESSIBLE:eS,DISALLOWED_INACCESSIBLE:eI,IMPLEMENTED_BY_INACCESSIBLE:ew,ONLY_INACCESSIBLE_CHILDREN:eN,REQUIRED_ARGUMENT_MISSING_IN_SOME_SUBGRAPH:eC,REQUIRED_INPUT_FIELD_MISSING_IN_SOME_SUBGRAPH:eA,EMPTY_MERGED_INPUT_TYPE:eP,ENUM_VALUE_MISMATCH:eR,EMPTY_MERGED_ENUM_TYPE:eD,SHAREABLE_HAS_MISMATCHED_RUNTIME_TYPES:eF,SATISFIABILITY_ERROR:ej,OVERRIDE_COLLISION_WITH_ANOTHER_DIRECTIVE:eM,OVERRIDE_FROM_SELF_ERROR:eL,OVERRIDE_SOURCE_HAS_OVERRIDE:ex,OVERRIDE_ON_INTERFACE:ek,OVERRIDE_LABEL_INVALID:e$,UNSUPPORTED_FEATURE:eU,INVALID_FEDERATION_SUPERGRAPH:eV,DOWNSTREAM_SERVICE_ERROR:eG,KEY_HAS_DIRECTIVE_IN_FIELDS_ARGS:C,PROVIDES_HAS_DIRECTIVE_IN_FIELDS_ARGS:P,REQUIRES_HAS_DIRECTIVE_IN_FIELDS_ARGS:R,DIRECTIVE_COMPOSITION_ERROR:eq,INTERFACE_OBJECT_USAGE_ERROR:eB,INTERFACE_KEY_NOT_ON_IMPLEMENTATION:eW,INTERFACE_KEY_MISSING_IMPLEMENTATION_TYPE:eH,SOURCE_FEDERATION_VERSION_REQUIRED:eQ,SOURCE_API_NAME_INVALID:eK,SOURCE_API_PROTOCOL_INVALID:ez,SOURCE_API_HTTP_BASE_URL_INVALID:eY,SOURCE_HTTP_HEADERS_INVALID:eJ,SOURCE_TYPE_API_ERROR:eX,SOURCE_TYPE_PROTOCOL_INVALID:eZ,SOURCE_TYPE_HTTP_METHOD_INVALID:e0,SOURCE_TYPE_HTTP_PATH_INVALID:e1,SOURCE_TYPE_HTTP_BODY_INVALID:e2,SOURCE_TYPE_ON_NON_OBJECT_OR_NON_ENTITY:e4,SOURCE_TYPE_SELECTION_INVALID:e3,SOURCE_FIELD_API_ERROR:e5,SOURCE_FIELD_PROTOCOL_INVALID:e8,SOURCE_FIELD_HTTP_METHOD_INVALID:e6,SOURCE_FIELD_HTTP_PATH_INVALID:e7,SOURCE_FIELD_HTTP_BODY_INVALID:e9,SOURCE_FIELD_SELECTION_INVALID:te,SOURCE_FIELD_NOT_ON_ROOT_OR_ENTITY_FIELD:tt,CONTEXTUAL_ARGUMENT_NOT_CONTEXTUAL_IN_ALL_SUBGRAPHS:tr};let tn=Object.values(t.ERRORS).reduce((e,t)=>(e[t.code]=t,e),{});t.REMOVED_ERRORS=[["KEY_FIELDS_MISSING_ON_BASE","Keys can now use any field from any other subgraph."],["KEY_FIELDS_MISSING_EXTERNAL","Using `@external` for key fields is now discouraged, unless the field is truly meant to be external."],["KEY_MISSING_ON_BASE","Each subgraph is now free to declare a key only if it needs it."],["MULTIPLE_KEYS_ON_EXTENSION","Every subgraph can have multiple keys, as necessary."],["KEY_NOT_SPECIFIED","Each subgraph can declare key independently of any other subgraph."],["EXTERNAL_USED_ON_BASE","As there is not type ownership anymore, there is also no particular limitation as to where a field can be external."],["PROVIDES_NOT_ON_ENTITY","@provides can now be used on any type."],["REQUIRES_FIELDS_MISSING_ON_BASE","Fields in @requires can now be from any subgraph."],["REQUIRES_USED_ON_BASE","As there is not type ownership anymore, there is also no particular limitation as to which subgraph can use a @requires."],["DUPLICATE_SCALAR_DEFINITION","As duplicate scalar definitions is invalid GraphQL, this will now be an error with code `INVALID_GRAPHQL`."],["DUPLICATE_ENUM_DEFINITION","As duplicate enum definitions is invalid GraphQL, this will now be an error with code `INVALID_GRAPHQL`."],["DUPLICATE_ENUM_VALUE","As duplicate enum values is invalid GraphQL, this will now be an error with code `INVALID_GRAPHQL`."],["ENUM_MISMATCH","Subgraph definitions for an enum are now merged by composition."],["VALUE_TYPE_NO_ENTITY","There is no strong different between entity and value types in the model (they are just usage pattern) and a type can have keys in one subgraph but not another."],["VALUE_TYPE_UNION_TYPES_MISMATCH","Subgraph definitions for an union are now merged by composition."],["PROVIDES_FIELDS_SELECT_INVALID_TYPE","@provides can now be used on field of interface, union and list types."],["RESERVED_FIELD_USED","This error was previously not correctly enforced: the _service and _entities, if present, were overridden; this is still the case."],["NON_REPEATABLE_DIRECTIVE_ARGUMENTS_MISMATCH","Since federation 2.1.0, the case this error used to cover is now a warning (with code `INCONSISTENT_NON_REPEATABLE_DIRECTIVE_ARGUMENTS`) instead of an error."],["REQUIRES_FIELDS_HAS_ARGS","Since federation 2.1.1, using fields with arguments in a @requires is fully supported."],["INTERFACE_FIELD_IMPLEM_TYPE_MISMATCH","This error was thrown by a validation introduced to avoid running into a known runtime bug. Since federation 2.3, the underlying runtime bug has been addressed and the validation/limitation was no longer necessary and has been removed."]]},48442:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.extractSubgraphsFromSupergraph=t.extractSubgraphsNamesAndUrlsFromSupergraph=void 0;let i=r(48170),o=r(27239),a=r(59143),s=r(27239),l=r(4749),u=r(34023),c=r(62161),p=r(56563),d=r(41388),f=r(19548),h=n(r(57147)),y=n(r(71017)),m=r(4749),v=r(70854);function g(e,t){let r=new s.Subgraphs,n=t.graphDirective(e),i=t.graphEnum(e),a=new Map;for(let e of i.values){let t=e.appliedDirectivesOf(n);if(!t.length)throw Error(`Value ${e} of join__Graph enum has no @join__graph directive`);let i=t[0].arguments(),l=new s.Subgraph(i.name,i.url,(0,o.newEmptyFederation2Schema)());r.add(l),a.set(e.name,i.name)}return[r,a]}t.extractSubgraphsNamesAndUrlsFromSupergraph=function(e){let[t,r]=(0,u.validateSupergraph)(e),[n]=g(e,r);return n.values().map(e=>({name:e.name,url:e.url}))};class b{constructor(e,t){this.originalError=e,this.subgraph=t}}function _(e,t){if(!e)return[];let r=[];return(0,f.parseSelectionSet)({parentType:t,source:e,fieldAccessor:(e,t)=>{let n=e.field(t);return n&&r.push((0,i.baseType)(n.type)),n},validate:!1}),r}function T(e,t,r){let n;let{supergraph:o,getSubgraph:a,getSubgraphEnumValue:s}=r;(0,l.assert)(t.length>0,`Missing @join__type on ${e}`);let u=new Map;for(let r of t){let{graph:t,key:n,extension:o,resolvable:s,isInterfaceObject:c}=r.arguments(),p=u.get(t);if(!p){let n=a(r);(0,l.assert)(n,()=>`Should have found the subgraph for ${r}`);let o=c?"ObjectType":e.kind,s=n.schema.addType((0,i.newNamedType)(o,e.name));c&&s.applyDirective("interfaceObject"),p={type:s,subgraph:n},u.set(t,p)}if(n){let e=p.type.applyDirective("key",{fields:n,resolvable:s});o&&e.setOfExtension(p.type.newExtension())}}let c=o.coreFeatures;(0,l.assert)(c,"Should have core features");let p=c.getByIdentity(v.ContextSpecDefinition.identity);if(p){let e=v.CONTEXT_VERSIONS.find(p.url.version);(0,l.assert)(e,"Should have context spec"),n=e.contextDirective(o)}if(n)for(let t of e.appliedDirectivesOf(n)){let{name:e}=t.arguments(),r=e.match(/^(.*)__([A-Za-z]\w*)$/),n=r?r[1]:void 0,i=r?r[2]:void 0;(0,l.assert)(n,`Invalid context name ${e} found in ${t} on ${t.parent}: does not match the expected pattern`);let o=u.get(s(n)),a=null==o?void 0:o.subgraph.metadata().contextDirective();o&&a&&(0,v.isFederationDirectiveDefinedInSchema)(a)&&o.type.applyDirective(a,{name:i})}return u}t.extractSubgraphsFromSupergraph=function(e,t=!0){let[r,n]=(0,u.validateSupergraph)(e),s=n.version.equals(new a.FeatureVersion(0,1));try{var c;let[a,u]=g(e,n),d=new Map;for(let[e,t]of u.entries())d.set(t,e);let f=(c=r.coreDefinition,e.types().filter(e=>!n.isSpecType(e)&&!c.isSpecType(e))),h=function(e){let t={};for(let r of e.schemaDefinition.appliedDirectivesOf("link"))if(r.arguments().url&&r.arguments().import){let e=v.FeatureUrl.maybeParse(r.arguments().url);if(!(null==e?void 0:e.identity.includes("specs.apollo.dev")))continue;for(let e of r.arguments().import)e.name&&e.as?t[e.name.replace("@","")]=e.as.replace("@",""):"string"==typeof e&&(t[e.replace("@","")]=e.replace("@",""))}return t}(e),y={supergraph:e,subgraphs:a,joinSpec:n,filteredTypes:f,originalDirectiveNames:h,getSubgraph:e=>{let t=e.arguments().graph;if(!t)return;let r=u.get(t);(0,l.assert)(r,()=>`Invalid graph name ${t} found in ${e} on ${e.parent}: does not match a graph defined in the @join__Graph enum`);let n=a.get(r);return(0,l.assert)(n,"All subgraphs should have been created by `collectEmptySubgraphs`"),n},getSubgraphEnumValue:e=>{let t=d.get(e);return(0,l.assert)(t,()=>`Invalid subgraph name ${e} found: does not match a subgraph defined in the @join__Graph enum`),t}};for(let e of(s?function({supergraph:e,subgraphs:t,joinSpec:r,filteredTypes:n,getSubgraph:a}){let s=r.typeDirective(e),u=r.ownerDirective(e),c=r.fieldDirective(e),d=function(e,t,r,n){let o=new Map;for(let a of t){let t=new Set;(function(e,t,r,n,o){let a=new Set,s=e.schemaDefinition.roots().map(e=>e.type);for(let r of e.types()){let{isEntityWithKeyInSubgraph:e,typesInFederationDirectives:n}=o(r,t);e&&s.push(r),n.forEach(e=>s.push(e))}for(;s.length>0;){let e=s.pop();if(r(e),!a.has(e.name))switch(a.add(e.name),e.kind){case"InterfaceType":e.allImplementations().forEach(e=>s.push(e));case"ObjectType":for(let r of(e.interfaces().forEach(e=>s.push(e)),e.fields())){let{isInSubgraph:e,typesInFederationDirectives:o}=n(r,t);e&&(r.arguments().forEach(e=>s.push((0,i.baseType)(e.type))),s.push((0,i.baseType)(r.type)),o.forEach(e=>s.push(e)))}break;case"InputObjectType":for(let r of e.fields()){let{isInSubgraph:e,typesInFederationDirectives:o}=n(r,t);e&&(s.push((0,i.baseType)(r.type)),o.forEach(e=>s.push(e)))}break;case"UnionType":e.members().forEach(e=>s.push(e.type))}}for(let t of e.directives())t.hasExecutableLocations()&&t.arguments().forEach(e=>s.push((0,i.baseType)(e.type)))})(e,a,e=>t.add(e.name),r,n),o.set(a,t)}return o}(e,t.names(),(e,t)=>{var r;let n=e.appliedDirectivesOf(c);if(n.length){let r=n.find(e=>{var r;return(null===(r=a(e))||void 0===r?void 0:r.name)===t});if(!r)return{isInSubgraph:!1,typesInFederationDirectives:[]};{let t=r.arguments();return{isInSubgraph:!0,typesInFederationDirectives:_(t.provides,(0,i.baseType)(e.type)).concat(_(t.requires,e.parent))}}}{let n=u?e.parent.appliedDirectivesOf(u):[];return{isInSubgraph:!n.length||(null===(r=a(n[0]))||void 0===r?void 0:r.name)==t,typesInFederationDirectives:[]}}},(e,t)=>{let r=e.appliedDirectivesOf(s).find(e=>{var r;return e.arguments().key&&(null===(r=a(e))||void 0===r?void 0:r.name)===t});return r?{isEntityWithKeyInSubgraph:!0,typesInFederationDirectives:_(r.arguments().key,e)}:{isEntityWithKeyInSubgraph:!1,typesInFederationDirectives:[]}}),f=(e,t)=>{var r,n;return null!==(n=null===(r=d.get(t))||void 0===r?void 0:r.has(e.name))&&void 0!==n&&n};for(let e of n){let r=e.appliedDirectivesOf(s);if(r.length)for(let t of r){let r=t.arguments(),n=a(t);(0,l.assert)(n,()=>`Should have found the subgraph for ${t}`);let o=n.schema,s=o.type(e.name);if(!s){let t=r.isInterfaceObject?"ObjectType":e.kind;s=o.addType((0,i.newNamedType)(t,e.name)),r.isInterfaceObject&&s.applyDirective("interfaceObject")}if(r.key){let{resolvable:e}=r,t=s.applyDirective("key",{fields:r.key,resolvable:e});r.extension&&t.setOfExtension(s.newExtension())}}else for(let r of t)f(e,r.name)&&r.schema.addType((0,i.newNamedType)(e.kind,e.name))}for(let e of n)switch(e.kind){case"ObjectType":case"InterfaceType":for(let r of e.interfaceImplementations()){let n=r.interface.name;for(let r of t){let t=r.schema.type(e.name),i=r.schema.type(n);t&&i&&t.addImplementedInterface(n)}}case"InputObjectType":for(let r of e.fields()){let n=r.appliedDirectivesOf(c);if(n.length){let t=(0,i.isObjectType)(e)&&n.length>1;for(let e of n){let n=a(e);n&&N(r,n,t,e.arguments())}}else{let n=u?e.appliedDirectivesOf(u):[];if(n.length>0){(0,l.assert)(1==n.length,()=>`Found multiple join__owner directives on type ${e}`);let t=a(n[0]);(0,l.assert)(t,()=>`Should have found the subgraph for ${n[0]}`),N(r,t,!1)}else{let n=(0,i.baseType)(r.type),o=(0,i.isObjectType)(e)&&t.values().filter(t=>t.schema.type(e.name)).length>1;for(let e of t)e.schema.type(n.name)&&N(r,e,o)}}}break;case"EnumType":for(let r of t){let t=r.schema.type(e.name);if(t)for(let r of((0,l.assert)((0,i.isEnumType)(t),()=>`${t} should be an enum but found a ${t.kind}`),e.values))t.addValue(r.name)}break;case"UnionType":for(let r of t){let t=r.schema.type(e.name);if(t)for(let n of((0,l.assert)((0,i.isUnionType)(t),()=>`${t} should be an enum but found a ${t.kind}`),e.types().map(e=>e.name))){let e=r.schema.type(n);e&&t.addType(e)}}}let h=e.directives().filter(e=>e.hasExecutableLocations());for(let r of t)for(let t of(function(e,t,r){let n=e.metadata();for(let o of e.schema.types())if((0,i.isObjectType)(o)||(0,i.isInterfaceType)(o)){for(let i of o.appliedDirectivesOf(n.keyDirective())){let n=r||!!i.ofExtension();P(e,o,i,t,n)}for(let r of o.fields()){for(let i of r.appliedDirectivesOf(n.requiresDirective()))P(e,o,i,t);let a=(0,i.baseType)(r.type);for(let o of r.appliedDirectivesOf(n.providesDirective()))(0,l.assert)((0,i.isObjectType)(a)||(0,i.isInterfaceType)(a),()=>`Found @provides on field ${r.coordinate} whose type ${r.type} (${a.kind}) is not an object or interface `),P(e,a,o,t)}(function(e,t){for(let r of t.interfaces())for(let n of r.fields()){let r=t.field(n.name);r?r.hasAppliedDirective(e.externalDirective())&&function(e,t){(0,p.isSubtype)(t.type,e.type)||((0,l.assert)((0,p.isSubtype)(e.type,t.type),()=>`For ${e.coordinate}, expected ${t.type} and ${e.type} to be in a subtyping relationship`),e.type=t.type)}(r,n):function(e,t,r){let n=r.addField(t.name,t.type);for(let e of t.arguments())n.addArgument(e.name,e.type,e.defaultValue);n.applyDirective(e.externalDirective())}(e,n,t)}})(n,o)}}(r,e,!0),(0,o.removeInactiveProvidesAndRequires)(r.schema),R(r.schema),h))(0,i.copyDirectiveDefinitionToSchema)({definition:t,schema:r.schema,copyDirectiveApplicationsInArguments:!1,locationFilter:e=>(0,i.isExecutableDirectiveLocation)(e)});return t}(y):function(e){let{objOrItfTypes:t,inputObjTypes:r,enumTypes:n,unionTypes:a}=function(e){let{supergraph:t,joinSpec:r,filteredTypes:n,getSubgraph:o}=e,a=r.typeDirective(t),s=[],u=[],c=[],p=[];for(let t of n){let r=t.appliedDirectivesOf(a);switch(t.kind){case"InterfaceType":case"ObjectType":s.push({type:t,subgraphsInfo:T(t,t.appliedDirectivesOf(a),e)});break;case"InputObjectType":u.push({type:t,subgraphsInfo:T(t,t.appliedDirectivesOf(a),e)});break;case"EnumType":c.push({type:t,subgraphsInfo:T(t,t.appliedDirectivesOf(a),e)});break;case"UnionType":p.push({type:t,subgraphsInfo:T(t,t.appliedDirectivesOf(a),e)});break;case"ScalarType":for(let n of r){let r=o(n);(0,l.assert)(r,()=>`Should have found the subgraph for ${n}`);let a=r.schema.addType((0,i.newNamedType)(t.kind,t.name));O(t,a,r,e.originalDirectiveNames)}}}return{objOrItfTypes:s,inputObjTypes:u,enumTypes:c,unionTypes:p}}(e);(function(e,t){let r=e.joinSpec.fieldDirective(e.supergraph),n=e.joinSpec.implementsDirective(e.supergraph);(0,l.assert)(n,"@join__implements should existing for a fed2 supergraph");let o=e.originalDirectiveNames;for(let{type:a,subgraphsInfo:s}of t){for(let e of a.appliedDirectivesOf(n)){let t=e.arguments();s.get(t.graph).type.addImplementedInterface(t.interface)}for(let{type:t,subgraph:r}of s.values())O(a,t,r,e.originalDirectiveNames);for(let e of a.fields()){let t=e.appliedDirectivesOf(r);if(0===t.length){let t=(0,i.isObjectType)(a)&&s.size>1;for(let{type:r,subgraph:n}of s.values())w({field:e,type:r,subgraph:n,isShareable:t,originalDirectiveNames:o})}else{let r=(0,i.isObjectType)(a)&&t.filter(e=>{let t=e.arguments();return!t.external&&!t.usedOverridden}).length>1;for(let n of t){let t=n.arguments();if(!t.graph)continue;let{type:i,subgraph:a}=s.get(t.graph);w({field:e,type:i,subgraph:a,isShareable:r,joinFieldArgs:t,originalDirectiveNames:o})}}}}})(e,t),function(e,t){let r=e.joinSpec.fieldDirective(e.supergraph),n=e.originalDirectiveNames;for(let{type:e,subgraphsInfo:i}of t)for(let t of e.fields()){let e=t.appliedDirectivesOf(r);if(0===e.length)for(let{type:e,subgraph:r}of i.values())I({field:t,type:e,subgraph:r,originalDirectiveNames:n});else for(let r of e){let e=r.arguments();if(!e.graph)continue;let{type:o,subgraph:a}=i.get(e.graph);I({field:t,type:o,subgraph:a,joinFieldArgs:e,originalDirectiveNames:n})}}}(e,r),function(e,t){let r=e.joinSpec.enumValueDirective(e.supergraph),n=e.originalDirectiveNames;for(let{type:e,subgraphsInfo:i}of t){for(let{type:t,subgraph:r}of i.values())O(e,t,r,n);for(let t of e.values){let e=r?t.appliedDirectivesOf(r):[];if(0===e.length)for(let{type:e}of i.values())e.addValue(t.name);else for(let r of e){let e=r.arguments(),{type:n}=i.get(e.graph);n.addValue(t.name)}}}}(e,n),function(e,t){let r=e.joinSpec.unionMemberDirective(e.supergraph);for(let{type:e,subgraphsInfo:n}of t){let t=r?e.appliedDirectivesOf(r):[];if(0===t.length)for(let{type:t,subgraph:r}of n.values())for(let n of e.types()){let e=r.schema.type(n.name);e&&t.addType(e)}else for(let e of t){let t=e.arguments(),{type:r,subgraph:i}=n.get(t.graph);r.addType(i.schema.type(t.member))}}}(e,a);let s=e.supergraph.directives().filter(e=>e.hasExecutableLocations());for(let t of e.subgraphs)for(let e of((0,o.removeInactiveProvidesAndRequires)(t.schema),R(t.schema),s))(0,i.copyDirectiveDefinitionToSchema)({definition:e,schema:t.schema,copyDirectiveApplicationsInArguments:!1,locationFilter:e=>(0,i.isExecutableDirectiveLocation)(e)})}(y),a))if(t)try{e.validate()}catch(t){throw new b(t,e)}else e.assumeValid();return[a,d]}catch(n){let e,t=n;n instanceof b&&(t=n.originalError,e=n.subgraph);let r=e?`subgraph "${e.name}"`:"subgraphs";if(s){let e=`Error extracting ${r} from the supergraph: this might be due to errors in subgraphs that were mistakenly ignored by federation 0.x versions but are rejected by federation 2.
Please try composing your subgraphs with federation 2: this should help precisely pinpoint the problems and, once fixed, generate a correct federation 2 supergraph`;throw Error(`${e}.

Details:
${S(t)}`)}{let n=`Unexpected error extracting ${r} from the supergraph: this is either a bug, or the supergraph has been corrupted`,i=e?"\n\n"+function(e){if(!(0,m.validateStringContainsBoolean)(process.env[E]))return`Re-run with environment variable '${E}' set to 'true' to extract the invalid subgraph`;try{let t=`extracted-subgraph-${e.name}-${Date.now()}.graphql`,r=y.default.resolve(t);if(h.default.existsSync(r))throw Error(`candidate file ${t} already existed`);return h.default.writeFileSync(r,(0,d.printSchema)(e.schema)),`The (invalid) extracted subgraph has been written in: ${r}.`}catch(t){return`Was not able to print generated subgraph for "${e.name}" because: ${S(t)}`}}(e):"";throw Error(`${n}.

Details:
${S(t)}${i}`)}}};let E="APOLLO_FEDERATION_DEBUG_SUBGRAPHS";function O(e,t,r,n){let i=null==n?void 0:n[v.FederationDirectiveName.COST];if(i){let n=e.appliedDirectivesOf(i).pop();n&&t.applyDirective(r.metadata().costDirective().name,n.arguments())}let o=null==n?void 0:n[v.FederationDirectiveName.LIST_SIZE];if(o){let n=e.appliedDirectivesOf(o).pop();n&&t.applyDirective(r.metadata().listSizeDirective().name,n.arguments())}}function S(e){let t=(0,v.errorCauses)(e);return t?(0,v.printErrors)(t):String(e)}function w({field:e,type:t,subgraph:r,isShareable:n,joinFieldArgs:i,originalDirectiveNames:o}){let a=(null==i?void 0:i.type)?A(i.type,r.schema,r.name):C(e.type,r.schema,r.name),s=t.addField(e.name,a);for(let t of e.arguments()){let e=s.addArgument(t.name,C(t.type,r.schema,r.name),t.defaultValue);O(t,e,r,o)}if((null==i?void 0:i.requires)&&s.applyDirective(r.metadata().requiresDirective(),{fields:i.requires}),(null==i?void 0:i.provides)&&s.applyDirective(r.metadata().providesDirective(),{fields:i.provides}),null==i?void 0:i.contextArguments){let e=r.metadata().fromContextDirective();if((0,v.isFederationDirectiveDefinedInSchema)(e))for(let t of i.contextArguments){let n=t.context.match(/^.*__([A-Za-z]\w*)$/);if(!n)throw Error(`Invalid context argument: ${t.context}`);s.addArgument(t.name,A(t.type,r.schema,r.name));let i=s.argument(t.name);null==i||i.applyDirective(e,{field:`$${n[1]} ${t.selection}`})}else throw Error(`@fromContext directive is not defined in the subgraph schema: ${r.name}`)}let l=!!(null==i?void 0:i.external);l&&s.applyDirective(r.metadata().externalDirective());let u=!!(null==i?void 0:i.usedOverridden);return!u||(null==i?void 0:i.overrideLabel)||s.applyDirective(r.metadata().externalDirective(),{reason:"[overridden]"}),(null==i?void 0:i.override)&&s.applyDirective(r.metadata().overrideDirective(),{from:i.override,...i.overrideLabel?{label:i.overrideLabel}:{}}),!n||l||u||s.applyDirective(r.metadata().shareableDirective()),O(e,s,r,o),s}function I({field:e,type:t,subgraph:r,joinFieldArgs:n,originalDirectiveNames:i}){let o=(null==n?void 0:n.type)?A(null==n?void 0:n.type,r.schema,r.name):C(e.type,r.schema,r.name),a=t.addField(e.name,o);return a.defaultValue=e.defaultValue,O(e,a,r,i),a}function N(e,t,r,n){let o=t.schema.type(e.parent.name);o&&(e instanceof i.FieldDefinition?w({field:e,subgraph:t,type:o,isShareable:r,joinFieldArgs:n}):I({field:e,subgraph:t,type:o,joinFieldArgs:n}))}function A(e,t,r){try{return(0,c.builtTypeReference)(e,t)}catch(t){(0,l.assert)(!1,()=>`Cannot parse type "${e}" in subgraph ${r}: ${t}`)}}function C(e,t,r){switch(e.kind){case"ListType":return new i.ListType(C(e.ofType,t,r));case"NonNullType":return new i.NonNullType(C(e.ofType,t,r));default:let n=t.type(e.name);return(0,l.assert)(n,()=>`Cannot find type "${e.name}" in subgraph "${r}"`),n}}function P(e,t,r,n,a=!1){let s=e.metadata().externalDirective();try{(0,o.parseFieldSetArgument)({parentType:t,directive:r,fieldAccessor:function(t,r){let o=t.field(r);if(o)return a&&o.hasAppliedDirective(s)&&o.appliedDirectivesOf(s).forEach(e=>e.remove()),o;(0,l.assert)(!(0,i.isUnionType)(t),()=>`Shouldn't select field ${r} from union type ${t}`);let u=n.type(t.name).field(r);(0,l.assert)(u,()=>`No field named ${r} found on type ${t.name} in the supergraph`);let c=w({field:u,subgraph:e,type:t,isShareable:!1});return a||c.applyDirective(s),c},validate:!1})}catch(e){}}function R(e){for(let t of e.types())switch(t.kind){case"ObjectType":case"InterfaceType":case"InputObjectType":t.hasFields()||t.removeRecursive();break;case"UnionType":0===t.membersCount()&&t.removeRecursive()}}},27239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeInactiveProvidesAndRequires=t.addSubgraphToError=t.addSubgraphToASTNode=t.Subgraph=t.FEDERATION_OPERATION_FIELDS=t.entitiesFieldName=t.serviceFieldName=t.FEDERATION_OPERATION_TYPES=t.entityTypeSpec=t.serviceTypeSpec=t.anyTypeSpec=t.Subgraphs=t.subgraphsFromServiceList=t.collectTargetFields=t.parseFieldSetArgument=t.newEmptyFederation2Schema=t.buildSubgraph=t.isInterfaceObjectType=t.isEntityType=t.isFederationField=t.isFederationSubgraphSchema=t.federationMetadata=t.printSubgraphNames=t.asFed2SubgraphDocument=t.FEDERATION2_LINK_WITH_AUTO_EXPANDED_IMPORTS_UPGRADED=t.FEDERATION2_LINK_WITH_AUTO_EXPANDED_IMPORTS=t.FEDERATION2_LINK_WITH_FULL_IMPORTS=t.setSchemaAsFed2Subgraph=t.FederationBlueprint=t.hasAppliedDirective=t.isFederationDirectiveDefinedInSchema=t.FederationMetadata=t.collectUsedFields=t.parseContext=t.FEDERATION_UNNAMED_SUBGRAPH_NAME=t.FEDERATION_RESERVED_SUBGRAPH_NAME=void 0;let n=r(48170),i=r(4749),o=r(7449),a=r(57343),s=r(94428),l=r(62161),u=r(19548),c=r(51801),p=r(74533),d=r(70389),f=r(59143),h=r(39862),y=r(41388),m=r(30500),v=r(65550),g=r(10556),b=r(35930),_=f.LINK_VERSIONS.latest(),T=c.TAG_VERSIONS.latest(),E=e=>{if(!e)return h.FEDERATION_VERSIONS.latest();let t=h.FEDERATION_VERSIONS.find(e);return(0,i.assert)(t,`Federation spec version ${e} is not known`),t},O=E(new f.FeatureVersion(2,4)),S=E();t.FEDERATION_RESERVED_SUBGRAPH_NAME="_",t.FEDERATION_UNNAMED_SUBGRAPH_NAME="<unnamed>";let w=[a.PossibleTypeExtensionsRule,a.KnownTypeNamesRule],I=[s.KnownTypeNamesInFederationRule],N=o.specifiedSDLRules.filter(e=>!w.includes(e)).concat(I),A=Object.values(h.FederationDirectiveName),C=new n.CoreFeature(new f.FeatureUrl("<fed1>","fed1",new f.FeatureVersion(0,1)),"fed1",new n.Directive("fed1"),h.FEDERATION1_TYPES.map(e=>({name:e.name,as:"_"+e.name})));function P(e,t,r){let i=(0,n.sourceASTs)(e);t.nodes&&i.push(...t.nodes);let o=(0,p.errorCodeDef)(t);o&&o!==p.ERRORS.INVALID_GRAPHQL||(o=p.ERROR_CATEGORIES.DIRECTIVE_INVALID_FIELDS.get(e.name));let s=t.message.trim();return r&&(s=r(s)),o.err(`On ${R(e)}, for ${e.sourceAST?(0,a.print)(e.sourceAST):e.toString()}: ${s}`,{nodes:i,originalError:t})}function R(e){var t;let r=e.parent instanceof n.FieldDefinition?"field":"type";return`${r} "${null===(t=e.parent)||void 0===t?void 0:t.coordinate}"`}function D(e){let t=e.match(/^(?:[\n\r\t ,]|#[^\n\r]*(?![^\n\r]))*\$(?:[\n\r\t ,]|#[^\n\r]*(?![^\n\r]))*([A-Za-z_]\w*(?!\w))([\s\S]*)$/);if(!t)return{context:void 0,selection:void 0};let[,r,n]=t;return{context:r,selection:n}}t.parseContext=D;let F=({originalType:e,resolvedType:t})=>{let r=[],i=e;for(;"NonNullType"===i.kind||"ListType"===i.kind;)r.push(i.kind),i=i.ofType;let o=t;for(;r.length>0;)"ListType"===r.pop()&&(o=new n.ListType(o));return o},j=({currentType:e,selectionSet:t,errorCollector:r,metadata:o,fromContextParent:a})=>{let s=t.selections(),l=o.interfaceObjectDirective();return"ObjectType"===e.kind&&G(l)&&e.appliedDirectivesOf(l).length>0&&r.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "is used in "${a.coordinate}" but the selection is invalid: One of the types in the selection is an interfaceObject: "${e.name}"`,{nodes:(0,n.sourceASTs)(a)})),s.map(e=>{if("FieldSelection"!==e.kind)return{resolvedType:void 0};let{element:t,selectionSet:s}=e;(0,i.assert)(t.definition.type,"Element type definition should exist");let l=t.definition.type;if(s){(0,i.assert)((0,n.isCompositeType)((0,n.baseType)(l)),"Child selection sets should only exist on composite types");let{resolvedType:e}=j({currentType:(0,n.baseType)(l),selectionSet:s,errorCollector:r,metadata:o,fromContextParent:a});return e?{resolvedType:F({originalType:l,resolvedType:e})}:{resolvedType:void 0}}return(0,i.assert)((0,n.isLeafType)((0,n.baseType)(l)),"Expected a leaf type"),{resolvedType:F({originalType:l,resolvedType:(0,n.baseType)(l)})}}).reduce((e,{resolvedType:t})=>{var r;return(null===(r=e.resolvedType)||void 0===r?void 0:r.toString())===(null==t?void 0:t.toString())?{resolvedType:t}:{resolvedType:void 0}})},L=({context:e,selection:t,fromContextParent:r,errorCollector:o})=>{try{let a=(0,u.parseOperationAST)(t.trim().startsWith("{")?t:`{${t}}`).selectionSet.selections;if(0===a.length)return o.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: no selection is made`,{nodes:(0,n.sourceASTs)(r)})),{selectionType:"error"};let s=a[0].kind;if("Field"===s){if(1!==a.length)return o.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: multiple selections are made`,{nodes:(0,n.sourceASTs)(r)})),{selectionType:"error"};return{selectionType:"field"}}if("InlineFragment"===s){let t=new Set;if(!a.every(e=>"InlineFragment"===e.kind))return o.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: multiple fields could be selected`,{nodes:(0,n.sourceASTs)(r)})),{selectionType:"error"};if(a.forEach(e=>{(0,i.assert)("InlineFragment"===e.kind,"Expected an inline fragment");let{typeCondition:r}=e;r&&t.add(r.name.value)}),t.size!==a.length)return o.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: type conditions have same name`,{nodes:(0,n.sourceASTs)(r)})),{selectionType:"error"};return{selectionType:"inlineFragment",typeConditions:t}}if("FragmentSpread"===s)return o.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: fragment spread is not allowed`,{nodes:(0,n.sourceASTs)(r)})),{selectionType:"error"};(0,i.assertUnreachable)(s)}catch(t){return o.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: ${t.message}`,{nodes:(0,n.sourceASTs)(r)})),{selectionType:"error"}}};function x(e,t){return(0,n.isNonNullType)(e)?(0,n.isNonNullType)(t)?x(e.ofType,t.ofType):x(e.ofType,t):(0,n.isListType)(e)&&(0,n.isListType)(t)?x(e.ofType,t.ofType):!(0,n.isWrapperType)(e)&&!(0,n.isWrapperType)(t)&&e.name===t.name}function M({definition:e,targetTypeExtractor:t,errorCollector:r,metadata:i,isOnParentType:o=!1,allowOnNonExternalLeafFields:s=!1,allowFieldsWithArguments:l=!1,allowOnInterface:u=!1,onFields:c}){for(let d of e.applications()){let f=d.parent,y=t(f),m=o?y:f.parent;if((0,n.isInterfaceType)(m)&&!u){let t=p.ERROR_CATEGORIES.DIRECTIVE_UNSUPPORTED_ON_INTERFACE.get(e.name);r.push(t.err(o?`Cannot use ${e.coordinate} on interface "${m.coordinate}": ${e.coordinate} is not yet supported on interfaces`:`Cannot use ${e.coordinate} on ${R(d)} of parent type "${m}": ${e.coordinate} is not yet supported within interfaces`,{nodes:(0,n.sourceASTs)(d).concat(o?[]:(0,n.sourceASTs)(y))}))}!function({type:e,directive:t,metadata:r,errorCollector:i,allowOnNonExternalLeafFields:o,allowFieldsWithArguments:s,onFields:l}){try{let a=et({parentType:e,directive:t,fieldAccessor:l?(e,t)=>{let r=e.field(t);return r&&l(r),r}:void 0});!function e({directiveName:t,selectionSet:r,hasExternalInParents:i,metadata:o,onError:a,allowOnNonExternalLeafFields:s,allowFieldsWithArguments:l}){for(let u of r.selections()){let r=u.element.appliedDirectives;if(r.length>0&&a(p.ERROR_CATEGORIES.DIRECTIVE_IN_FIELDS_ARG.get(t).err(`cannot have directive applications in the @${t}(fields:) argument but found ${r.join(", ")}.`)),"FieldSelection"===u.kind){let r=u.element.definition,c=o.isFieldExternal(r);!l&&r.hasArguments()&&a(p.ERROR_CATEGORIES.FIELDS_HAS_ARGS.get(t).err(`field ${r.coordinate} cannot be included because it has arguments (fields with argument are not allowed in @${t})`,{nodes:r.sourceAST}));let d=!u.selectionSet&&!s&&!i;if(!c&&d){let e=p.ERROR_CATEGORIES.DIRECTIVE_FIELDS_MISSING_EXTERNAL.get(t);a(o.isFieldFakeExternal(r)?e.err(`field "${r.coordinate}" should not be part of a @${t} since it is already "effectively" provided by this subgraph (while it is marked @${h.FederationDirectiveName.EXTERNAL}, it is a @${h.FederationDirectiveName.KEY} field of an extension type, which are not internally considered external for historical/backward compatibility reasons)`,{nodes:r.sourceAST}):e.err(`field "${r.coordinate}" should not be part of a @${t} since it is already provided by this subgraph (it is not marked @${h.FederationDirectiveName.EXTERNAL})`,{nodes:r.sourceAST}))}if(u.selectionSet){let p=i||c,d=r.parent;if(!p&&(0,n.isInterfaceType)(d))for(let e of d.possibleRuntimeTypes()){let t=e.field(r.name);if(t&&o.isFieldExternal(t)){p=!0;break}}e({directiveName:t,selectionSet:u.selectionSet,hasExternalInParents:p,metadata:o,onError:a,allowOnNonExternalLeafFields:s,allowFieldsWithArguments:l})}}else e({directiveName:t,selectionSet:u.selectionSet,hasExternalInParents:i,metadata:o,onError:a,allowOnNonExternalLeafFields:s,allowFieldsWithArguments:l})}}({directiveName:t.name,selectionSet:a,hasExternalInParents:!1,metadata:r,onError:e=>i.push(P(t,e)),allowOnNonExternalLeafFields:o,allowFieldsWithArguments:s})}catch(e){if(e instanceof a.GraphQLError)i.push(e);else throw e}}({type:y,directive:d,metadata:i,errorCollector:r,allowOnNonExternalLeafFields:s,allowFieldsWithArguments:l,onFields:c})}}function k(e){let t=new Set;for(let r of($(e.keyDirective(),e=>e,t),$(e.requiresDirective(),e=>e.parent,t),$(e.providesDirective(),e=>{let t=(0,n.baseType)(e.type);return(0,n.isCompositeType)(t)?t:void 0},t),function(e,t){let r=e.fromContextDirective(),i=e.contextDirective();if(!G(r)||!G(i))return;let o=new Map;for(let e of i.applications()){let t=e.parent;if(!t)continue;let r=e.arguments().name;o.has(r)||o.set(r,new Set),o.get(r).add(t)}for(let e of r.applications()){if(!e.parent)continue;let{context:r,selection:i}=D(e.arguments().field);if(!r)continue;let a=o.get(r);if(a)for(let e of a)try{let r=(e,r)=>{let i=e.field(r);if(i&&(t.add(i),(0,n.isInterfaceType)(e)))for(let n of e.possibleRuntimeTypes()){let e=n.field(r);e&&t.add(e)}return i};(0,u.parseSelectionSet)({parentType:e,source:i,fieldAccessor:r})}catch(e){}}}(e,t),e.schema.interfaceTypes())){let e=r.possibleRuntimeTypes();for(let n of r.fields())for(let r of e){let e=r.field(n.name);e&&t.add(e)}}return t}function $(e,t,r){for(let n of e.applications()){let e=t(n.parent);e&&er({parentType:e,directive:n,includeInterfaceFieldsImplementations:!0,validate:!1}).forEach(e=>r.add(e))}}function U(e,t,r){let o=e.appliedDirectivesOf(t.shareableDirective());if(o.length<=1)return;let a=o.reduce((e,t)=>{let r=t.ofExtension();return r?e.with.add(r,t):e.without.push(t),e},{without:[],with:new i.MultiMap});for(let t of[a.without].concat((0,i.mapValues)(a.with)))if(t.length>1){let i="ObjectType"===e.kind?`the same type declaration of "${e.coordinate}"`:`field "${e.coordinate}"`;r.push(p.ERRORS.INVALID_SHAREABLE_USAGE.err(`Invalid duplicate application of @shareable on ${i}: @shareable is only repeatable on types so it can be used simultaneously on a type definition and its extensions, but it should not be duplicated on the same definition/extension declaration`,{nodes:(0,n.sourceASTs)(...t)}))}}t.collectUsedFields=k;class V{constructor(e){this.schema=e}onInvalidate(){this._externalTester=void 0,this._sharingPredicate=void 0,this._isFed2Schema=void 0,this._fieldUsedPredicate=void 0}isFed2Schema(){if(!this._isFed2Schema){let e=this.federationFeature();this._isFed2Schema=!!e&&e.url.version.satisfies(new f.FeatureVersion(2,0))}return this._isFed2Schema}federationFeature(){var e;return null===(e=this.schema.coreFeatures)||void 0===e?void 0:e.getByIdentity(S.identity)}externalTester(){return this._externalTester||(this._externalTester=new es(this.schema,this.isFed2Schema())),this._externalTester}sharingPredicate(){return this._sharingPredicate||(this._sharingPredicate=(0,d.computeShareables)(this.schema)),this._sharingPredicate}fieldUsedPredicate(){if(!this._fieldUsedPredicate){let e=k(this);this._fieldUsedPredicate=t=>!!e.has(t)}return this._fieldUsedPredicate}isFieldUsed(e){return this.fieldUsedPredicate()(e)}isFieldExternal(e){return this.externalTester().isExternal(e)}isFieldPartiallyExternal(e){return this.externalTester().isPartiallyExternal(e)}isFieldFullyExternal(e){return this.externalTester().isFullyExternal(e)}isFieldFakeExternal(e){return this.externalTester().isFakeExternal(e)}selectionSelectsAnyExternalField(e){return this.externalTester().selectsAnyExternalField(e)}isFieldShareable(e){return this.sharingPredicate()(e)}isInterfaceObjectType(e){return(0,n.isObjectType)(e)&&q(e,this.interfaceObjectDirective())}federationDirectiveNameInSchema(e){if(!this.isFed2Schema())return e;{let t=this.schema.coreFeatures;(0,i.assert)(t,"Schema should be a core schema");let r=t.getByIdentity(S.identity);return(0,i.assert)(r,"Schema should have the federation feature"),r.directiveNameInSchema(e)}}federationTypeNameInSchema(e){if("_"===e.charAt(0))return e;if(!this.isFed2Schema())return"_"+e;{let t=this.schema.coreFeatures;(0,i.assert)(t,"Schema should be a core schema");let r=t.getByIdentity(S.identity);return(0,i.assert)(r,"Schema should have the federation feature"),r.typeNameInSchema(e)}}getLegacyFederationDirective(e){let t=this.getFederationDirective(e);return(0,i.assert)(t,`The provided schema does not have federation directive @${e}`),t}getFederationDirective(e){return this.schema.directive(this.federationDirectiveNameInSchema(e))}getPost20FederationDirective(e){var t;return null!==(t=this.getFederationDirective(e))&&void 0!==t?t:{name:e,applications:()=>new Set}}keyDirective(){return this.getLegacyFederationDirective(h.FederationDirectiveName.KEY)}overrideDirective(){return this.getLegacyFederationDirective(h.FederationDirectiveName.OVERRIDE)}extendsDirective(){return this.getLegacyFederationDirective(h.FederationDirectiveName.EXTENDS)}externalDirective(){return this.getLegacyFederationDirective(h.FederationDirectiveName.EXTERNAL)}requiresDirective(){return this.getLegacyFederationDirective(h.FederationDirectiveName.REQUIRES)}providesDirective(){return this.getLegacyFederationDirective(h.FederationDirectiveName.PROVIDES)}shareableDirective(){return this.getLegacyFederationDirective(h.FederationDirectiveName.SHAREABLE)}tagDirective(){return this.getLegacyFederationDirective(h.FederationDirectiveName.TAG)}composeDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.COMPOSE_DIRECTIVE)}inaccessibleDirective(){return this.getLegacyFederationDirective(h.FederationDirectiveName.INACCESSIBLE)}interfaceObjectDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.INTERFACE_OBJECT)}authenticatedDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.AUTHENTICATED)}requiresScopesDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.REQUIRES_SCOPES)}policyDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.POLICY)}sourceAPIDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.SOURCE_API)}sourceTypeDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.SOURCE_TYPE)}sourceFieldDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.SOURCE_FIELD)}fromContextDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.FROM_CONTEXT)}contextDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.CONTEXT)}costDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.COST)}listSizeDirective(){return this.getPost20FederationDirective(h.FederationDirectiveName.LIST_SIZE)}allFederationDirectives(){let e=[this.keyDirective(),this.externalDirective(),this.requiresDirective(),this.providesDirective(),this.tagDirective(),this.extendsDirective()];if(!this.isFed2Schema())return e;e.push(this.shareableDirective()),e.push(this.inaccessibleDirective()),e.push(this.overrideDirective());let t=this.composeDirective();G(t)&&e.push(t);let r=this.interfaceObjectDirective();G(r)&&e.push(r);let n=this.authenticatedDirective();G(n)&&e.push(n);let i=this.requiresScopesDirective();G(i)&&e.push(i);let o=this.policyDirective();G(o)&&e.push(o);let a=this.sourceAPIDirective();G(a)&&e.push(a);let s=this.sourceTypeDirective();G(s)&&e.push(s);let l=this.sourceFieldDirective();G(l)&&e.push(l);let u=this.contextDirective();G(u)&&e.push(u);let c=this.fromContextDirective();G(c)&&e.push(c);let p=this.costDirective();G(p)&&e.push(p);let d=this.listSizeDirective();return G(d)&&e.push(d),e}entityType(){return this.schema.type(this.federationTypeNameInSchema(t.entityTypeSpec.name))}anyType(){return this.schema.type(this.federationTypeNameInSchema(t.anyTypeSpec.name))}serviceType(){return this.schema.type(this.federationTypeNameInSchema(t.serviceTypeSpec.name))}fieldSetType(){return this.schema.type(this.federationTypeNameInSchema(h.FederationTypeName.FIELD_SET))}allFederationTypes(){let e=[this.anyType(),this.serviceType()],t=this.federationFeature();if(t){let r=h.FEDERATION_VERSIONS.find(t.url.version);for(let n of((0,i.assert)(r,()=>`Federation spec should be known, but got ${t.url}`),r.typeSpecs())){let r=this.schema.type(t.typeNameInSchema(n.name));r&&e.push(r)}}else e.push(this.fieldSetType());let r=this.entityType();return r&&e.push(r),e}}function G(e){return e instanceof n.DirectiveDefinition}function q(e,t){return G(t)&&e.hasAppliedDirective(t)}t.FederationMetadata=V,t.isFederationDirectiveDefinedInSchema=G,t.hasAppliedDirective=q;class B extends n.SchemaBlueprint{constructor(e){super(),this.withRootTypeRenaming=e}onAddedCoreFeature(e,t){if(super.onAddedCoreFeature(e,t),t.url.identity===h.federationIdentity){let r=h.FEDERATION_VERSIONS.find(t.url.version);r&&r.addElementsToSchema(e)}}onMissingDirectiveDefinition(e,t){if(t.name===f.linkDirectiveDefaultName){let r;let n=t.arguments(),i=n&&n.url,o=[];i&&i.startsWith(_.identity)&&(r=n.as,o=(0,f.extractCoreFeatureImports)(_.url,t));let a=_.addDefinitionsToSchema(e,r,o);return a.length>0?a:e.directive(t.name)}return super.onMissingDirectiveDefinition(e,t)}ignoreParsedField(e,r){if(!t.FEDERATION_OPERATION_FIELDS.includes(r))return!1;let n=H(e.schema());return!!n&&!n.isFed2Schema()}onConstructed(e){H(e)||(e._federationMetadata=new V(e))}onDirectiveDefinitionAndSchemaParsed(e){let t=Y(e);return e.schemaDefinition.processUnappliedDirectives(),t}onInvalidation(e){super.onInvalidation(e);let t=H(e);(0,i.assert)(t,"Federation schema should have had its metadata set on construction"),V.prototype.onInvalidate.call(t)}onValidation(e){var t,r,o;let a=super.onValidation(e);if(this.withRootTypeRenaming)for(let r of n.allSchemaRootKinds){let i=null===(t=e.schemaDefinition.root(r))||void 0===t?void 0:t.type,o=(0,n.defaultRootName)(r);if(i&&i.name!==o){let t=e.type(o);t&&a.push(p.ERROR_CATEGORIES.ROOT_TYPE_USED.get(r).err(`The schema has a type named "${o}" but it is not set as the ${r} root type ("${i.name}" is instead): this is not supported by federation. If a root type does not use its default name, there should be no other type with that default name.`,{nodes:(0,n.sourceASTs)(i,t)})),i.rename(o)}}let s=H(e);if((0,i.assert)(s,"Federation schema should have had its metadata set on construction"),!s.isFed2Schema())return a;M({definition:s.keyDirective(),targetTypeExtractor:e=>e,errorCollector:a,metadata:s,isOnParentType:!0,allowOnNonExternalLeafFields:!0,allowOnInterface:s.federationFeature().url.version.compareTo(new f.FeatureVersion(2,3))>=0,onFields:e=>{let t=(0,n.baseType)(e.type);if((0,n.isUnionType)(t)||(0,n.isInterfaceType)(t)){let r=t.kind;throw r=r.slice(0,r.length-4),p.ERRORS.KEY_FIELDS_SELECT_INVALID_TYPE.err(`field "${e.coordinate}" is a ${r} type which is not allowed in @key`)}}}),M({definition:s.requiresDirective(),targetTypeExtractor:e=>e.parent,errorCollector:a,metadata:s,allowFieldsWithArguments:!0}),M({definition:s.providesDirective(),targetTypeExtractor:e=>{if(s.isFieldExternal(e))throw p.ERRORS.EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE.err(`Cannot have both @provides and @external on field "${e.coordinate}"`,{nodes:e.sourceAST});let t=(0,n.baseType)(e.type);if(!(0,n.isCompositeType)(t))throw p.ERRORS.PROVIDES_ON_NON_OBJECT_FIELD.err(`Invalid @provides directive on field "${e.coordinate}": field has type "${e.type}" which is not a Composite Type`,{nodes:e.sourceAST});return t},errorCollector:a,metadata:s});let l=s.contextDirective(),c=new Map;for(let e of l.applications()){let t=e.parent,r=e.arguments().name,i=r.match(/^([A-Za-z]\w*)$/);r.includes("_")?a.push(p.ERRORS.CONTEXT_NAME_INVALID.err(`Context name "${r}" may not contain an underscore.`,{nodes:(0,n.sourceASTs)(e)})):i||a.push(p.ERRORS.CONTEXT_NAME_INVALID.err(`Context name "${r}" is invalid. It should have only alphanumeric characters.`,{nodes:(0,n.sourceASTs)(e)}));let o=c.get(r);o?o.push(t):c.set(r,[t])}for(let e of s.fromContextDirective().applications()){let{field:t}=e.arguments(),{context:l,selection:d}=D(t);if("DirectiveDefinition"===e.parent.parent.kind){a.push(p.ERRORS.CONTEXT_NOT_SET.err(`@fromContext argument cannot be used on a directive definition "${e.parent.coordinate}".`,{nodes:(0,n.sourceASTs)(e)}));continue}let f=e.parent;if((null===(o=null===(r=null==f?void 0:f.parent)||void 0===r?void 0:r.parent)||void 0===o?void 0:o.kind)!=="ObjectType"){a.push(p.ERRORS.CONTEXT_NOT_SET.err(`@fromContext argument cannot be used on a field that exists on an abstract type "${e.parent.coordinate}".`,{nodes:(0,n.sourceASTs)(e)}));continue}let h=f.parent.parent;for(let t of h.interfaces()){let r=t.field(f.parent.name);r&&a.push(p.ERRORS.CONTEXT_NOT_SET.err(`@fromContext argument cannot be used on a field implementing an interface field "${r.coordinate}".`,{nodes:(0,n.sourceASTs)(e)}))}if(void 0!==f.defaultValue&&a.push(p.ERRORS.CONTEXT_NOT_SET.err(`@fromContext arguments may not have a default value: "${f.coordinate}".`,{nodes:(0,n.sourceASTs)(e)})),l&&d){let t=c.get(l);t?function({context:e,selection:t,fromContextParent:r,setContextLocations:o,errorCollector:a,metadata:s}){let l=r.type;(0,i.assert)(l,"Expected a type");let c=L({context:e,selection:t,fromContextParent:r,errorCollector:a}),d=c.selectionType;if("error"===d)return;let f=new Set;for(let c of o){var h,y;let o;try{o=(0,u.parseSelectionSet)({parentType:c,source:t})}catch(t){a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid for type ${c.name}. Error: ${t.message}`,{nodes:(0,n.sourceASTs)(r)}));return}if(h=o,(0,u.hasSelectionWithPredicate)(h,e=>"FieldSelection"===e.kind?e.element.appliedDirectives.length>0:"FragmentSelection"===e.kind?e.element.appliedDirectives.length>0:void(0,i.assertUnreachable)(e))&&a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: directives are not allowed in the selection`,{nodes:(0,n.sourceASTs)(r)})),y=o,(0,u.hasSelectionWithPredicate)(y,e=>"FieldSelection"===e.kind&&void 0!==e.element.alias)&&a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: aliases are not allowed in the selection`,{nodes:(0,n.sourceASTs)(r)})),"field"===d){let{resolvedType:t}=j({currentType:c,selectionSet:o,errorCollector:a,metadata:s,fromContextParent:r});if(void 0===t||!x(t,l)){a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: the type of the selection "${t}" does not match the expected type "${null==l?void 0:l.toString()}"`,{nodes:(0,n.sourceASTs)(r)}));return}}else if("inlineFragment"===d){let t=[];for(let i of o.selections()){if("FragmentSelection"!==i.kind){a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: selection should only contain a single field or at least one inline fragment}"`,{nodes:(0,n.sourceASTs)(r)}));continue}let{typeCondition:o}=i.element;if(!o){a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: inline fragments must have type conditions"`,{nodes:(0,n.sourceASTs)(r)}));continue}"ObjectType"===o.kind?(0,n.possibleRuntimeTypes)(c).includes(o)&&(t.push(i),f.add(o.name)):a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: type conditions must be an object type"`,{nodes:(0,n.sourceASTs)(r)}))}if(0===t.length){a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: no type condition matches the location "${c.coordinate}"`,{nodes:(0,n.sourceASTs)(r)}));return}for(let i of t){let{resolvedType:t}=j({currentType:i.element.typeCondition,selectionSet:i.selectionSet,errorCollector:a,metadata:s,fromContextParent:r});if(void 0===t){a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: the type of the selection does not match the expected type "${null==l?void 0:l.toString()}"`,{nodes:(0,n.sourceASTs)(r)}));return}if((0,n.isNonNullType)(t)&&(t=t.ofType),!x(t,l)){a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: the type of the selection "${null==t?void 0:t.toString()}" does not match the expected type "${null==l?void 0:l.toString()}"`,{nodes:(0,n.sourceASTs)(r)}));return}}}}if("inlineFragment"===c.selectionType)for(let t of c.typeConditions)f.has(t)||a.push(p.ERRORS.CONTEXT_INVALID_SELECTION.err(`Context "${e}" is used in "${r.coordinate}" but the selection is invalid: type condition "${t}" is never used.`,{nodes:(0,n.sourceASTs)(r)}))}({context:l,selection:d,fromContextParent:f,setContextLocations:t,errorCollector:a,metadata:s}):a.push(p.ERRORS.CONTEXT_NOT_SET.err(`Context "${l}" is used at location "${f.coordinate}" but is never set.`,{nodes:(0,n.sourceASTs)(e)}));let r=s.keyDirective();h.appliedDirectivesOf(r).some(e=>e.arguments().resolvable||void 0===e.arguments().resolvable)||a.push(p.ERRORS.CONTEXT_NO_RESOLVABLE_KEY.err(`Object "${h.coordinate}" has no resolvable key but has an a field with a contextual argument.`,{nodes:(0,n.sourceASTs)(h)}))}else a.push(p.ERRORS.NO_CONTEXT_IN_SELECTION.err(`@fromContext argument does not reference a context "${t}".`,{nodes:(0,n.sourceASTs)(e)}))}(function(e,t){for(let r of e.schema.interfaceTypes())for(let n of r.fields())e.isFieldExternal(n)&&t.push(p.ERRORS.EXTERNAL_ON_INTERFACE.err(`Interface type field "${n.coordinate}" is marked @external but @external is not allowed on interface fields (it is nonsensical).`,{nodes:n.sourceAST}))})(s,a),function(e,t){for(let r of e.schema.types())if((0,n.isObjectType)(r)||(0,n.isInterfaceType)(r))for(let n of r.fields())!e.isFieldExternal(n)||e.isFieldUsed(n)||t.push(p.ERRORS.EXTERNAL_UNUSED.err(`Field "${n.coordinate}" is marked @external but is not used in any federation directive (@key, @provides, @requires) or to satisfy an interface; the field declaration has no use and should be removed (or the field should not be @external).`,{nodes:n.sourceAST}))}(s,a),function(e,t){for(let r of e.schema.interfaceTypes()){let o=r.possibleRuntimeTypes();for(let a of r.appliedDirectivesOf(e.keyDirective())){let s=et({parentType:r,directive:a,validate:!1}),l=!1!==a.arguments().resolvable,u=[],c=[];for(let t of o){let r=t.appliedDirectivesOf(e.keyDirective()).find(e=>{let r=et({parentType:t,directive:e,validate:!1});return s.equals(r)});r?l&&!1===r.arguments().resolvable&&u.push(t):c.push(t)}if(c.length>0){let e=(0,i.printHumanReadableList)(c.map(e=>`"${e.coordinate}"`),{prefix:"type",prefixPlural:"types"});t.push(p.ERRORS.INTERFACE_KEY_NOT_ON_IMPLEMENTATION.err(`Key ${a} on interface type "${r.coordinate}" is missing on implementation ${e}.`,{nodes:(0,n.sourceASTs)(...c)}))}else if(u.length>0){let e=(0,i.printHumanReadableList)(u.map(e=>`"${e.coordinate}"`),{prefix:"type",prefixPlural:"types"});t.push(p.ERRORS.INTERFACE_KEY_NOT_ON_IMPLEMENTATION.err(`Key ${a} on interface type "${r.coordinate}" should be resolvable on all implementation types, but is declared with argument "@key(resolvable:)" set to false in ${e}.`,{nodes:(0,n.sourceASTs)(...u)}))}}}}(s,a),function(e,t){for(let r of e.interfaceObjectDirective().applications())K(r.parent)||t.push(p.ERRORS.INTERFACE_OBJECT_USAGE_ERROR.err(`The @interfaceObject directive can only be applied to entity types but type "${r.parent.coordinate}" has no @key in this subgraph.`,{nodes:r.parent.sourceAST}))}(s,a),(0,g.validateKnownFeatures)(e,a);let d=s.tagDirective();if(d){let e=T.checkCompatibleDirective(d);e&&a.push(e)}for(let t of e.objectTypes())for(let e of(U(t,s,a),t.fields()))U(e,s,a);for(let e of s.shareableDirective().applications()){let t=e.parent;t instanceof n.FieldDefinition&&!(0,n.isObjectType)(t.parent)&&a.push(p.ERRORS.INVALID_SHAREABLE_USAGE.err(`Invalid use of @shareable on field "${t.coordinate}": only object type fields can be marked with @shareable`,{nodes:(0,n.sourceASTs)(e,t.parent)}))}return a}validationRules(){return N}onUnknownDirectiveValidationError(e,t,r){let n=H(e);if((0,i.assert)(n,"This method should only have been called on a subgraph schema"),A.includes(t)){if(!n.isFed2Schema())return(0,p.withModifiedErrorMessage)(r,`${r.message} If you meant the "@${t}" federation 2 directive, note that this schema is a federation 1 schema. To be a federation 2 schema, it needs to @link to the federation specifcation v2.`);{let e=n.federationFeature();(0,i.assert)(e,"Fed2 subgraph _must_ link to the federation feature");let o=e.directiveNameInSchema(t);return o.startsWith(e.nameInSchema+"__")?(0,p.withModifiedErrorMessage)(r,`${r.message} If you meant the "@${t}" federation directive, you should use fully-qualified name "@${o}" or add "@${t}" to the \`import\` argument of the @link to the federation specification.`):(0,p.withModifiedErrorMessage)(r,`${r.message} If you meant the "@${t}" federation directive, you should use "@${o}" as it is imported under that name in the @link to the federation specification of this schema.`)}}if(!n.isFed2Schema()){let e=(0,v.suggestionList)(t,A);if(e.length>0)return(0,p.withModifiedErrorMessage)(r,`${r.message}${(0,v.didYouMean)(e.map(e=>"@"+e))} If so, note that ${1===e.length?"it is a federation 2 directive":"they are federation 2 directives"} but this schema is a federation 1 one. To be a federation 2 schema, it needs to @link to the federation specifcation v2.`)}return r}applyDirectivesAfterParsing(){return!0}}function W(e,t=!1){let r,o=e.coreFeatures;if(o)r=o.coreDefinition,(0,i.assert)(r.url.version.satisfies(_.version),`Fed2 schema must use @link with version >= 1.0, but schema uses ${r.url}`);else{let t=function(e){if(!e.directive(_.url.name))return;let t=_.url.name;for(;;){let r=t+1;if(!e.directive(r))return r}}(e),a=_.addToSchema(e,t);if(a.length>0)throw(0,n.ErrGraphQLValidationFailed)(a);r=_,o=e.coreFeatures,(0,i.assert)(o,"Schema should now be a core schema")}let a=t?S:O;(0,i.assert)(!o.getByIdentity(a.identity),"Schema already set as a federation subgraph"),e.schemaDefinition.applyDirective(o.coreItself.nameInSchema,{url:a.url.toString(),import:O.directiveSpecs().map(e=>`@${e.name}`)});let s=Y(e);if(s.length>0)throw(0,n.ErrGraphQLValidationFailed)(s)}function H(e){return e._federationMetadata}function Q(e){var r;return e.parent===(null===(r=e.schema().schemaDefinition.root("query"))||void 0===r?void 0:r.type)&&t.FEDERATION_OPERATION_FIELDS.includes(e.name)}function K(e){if(!(0,n.isObjectType)(e)&&!(0,n.isInterfaceType)(e))return!1;let t=H(e.schema());return!!t&&e.hasAppliedDirective(t.keyDirective())}function z(e,r,n,i=!0){let o;let s={blueprint:new B(i),validate:!1};try{let t="string"==typeof n?(0,l.buildSchema)(new a.Source(n,e),s):(0,l.buildSchemaFromAST)(n,s);o=new ei(e,r,t)}catch(r){if(r instanceof a.GraphQLError&&e!==t.FEDERATION_UNNAMED_SUBGRAPH_NAME)throw ea(r,e,p.ERRORS.INVALID_GRAPHQL);throw r}return o.validate()}function Y(e){let t=e.coreFeatures;if(t)return t.getByIdentity(h.federationIdentity)?Z(e):X(e);if(!e.schemaDefinition.appliedDirectivesOf(f.linkDirectiveDefaultName).find(J))return X(e);{let t=_.addToSchema(e);return t.length>0?t:Z(e)}}function J(e){let t=e.arguments();return e.name===f.linkDirectiveDefaultName&&t.url&&t.url.startsWith(h.federationIdentity)}function X(e){var t,r;for(let n of[h.FederationDirectiveName.KEY,h.FederationDirectiveName.PROVIDES,h.FederationDirectiveName.REQUIRES]){let o=e.directive(n);if(!o)continue;(0,i.assert)(0===o.applications().size,`${o} shouldn't have had validation at that places`);let a=null===(r=null===(t=o.argument("fields"))||void 0===t?void 0:t.type)||void 0===r?void 0:r.toString(),s=!!a&&1===o.arguments().length&&("String"===a||"_FieldSet"===a||"FieldSet"===a);(0===o.arguments().length||s)&&o.remove()}let n=h.FEDERATION1_TYPES.map(t=>t.checkOrAdd(e,C)).concat(h.FEDERATION1_DIRECTIVES.map(t=>t.checkOrAdd(e))).flat();return 0===n.length?ee(e):n}function Z(e){let t=e.coreFeatures;(0,i.assert)(t,"This method should not have been called on a non-core schema");let r=t.getByIdentity(h.federationIdentity);(0,i.assert)(r,"This method should not have been called on a schema with no @link for federation");let n=h.FEDERATION_VERSIONS.find(r.url.version);if(!n)return[p.ERRORS.UNKNOWN_FEDERATION_LINK_VERSION.err(`Invalid version ${r.url.version} for the federation feature in @link directive on schema`,{nodes:r.directive.sourceAST})];let o=n.addElementsToSchema(e);return 0===o.length?ee(e):o}function ee(e){let t=e.coreFeatures;if(!t)return[];let r=[];for(let n of t.allFeatures()){if(n===t.coreItself||n.url.identity===h.federationIdentity||n.url.identity===b.joinIdentity)continue;let i=(0,g.coreFeatureDefinitionIfKnown)(n.url);i&&(r=r.concat(i.addElementsToSchema(e)))}return r}function et({parentType:e,directive:t,fieldAccessor:r,validate:n,decorateValidationErrors:i=!0}){try{let i=(0,u.parseSelectionSet)({parentType:e,source:function(e){var t;let r=e.arguments().fields,n=e.sourceAST;if("string"!=typeof r)throw p.ERROR_CATEGORIES.DIRECTIVE_INVALID_FIELDS_TYPE.get(e.name).err(`Invalid value for argument "${e.definition.argument("fields").name}": must be a string.`,{nodes:n});if(n&&"Directive"===n.kind){for(let r of null!==(t=n.arguments)&&void 0!==t?t:[])if("fields"===r.name.value){if("StringValue"!==r.value.kind)throw p.ERROR_CATEGORIES.DIRECTIVE_INVALID_FIELDS_TYPE.get(e.name).err(`Invalid value for argument "${e.definition.argument("fields").name}": must be a string.`,{nodes:n});break}}return r}(t),fieldAccessor:r,validate:n});return(null==n||n)&&i.forEachElement(e=>{if("Field"===e.kind&&e.alias)throw new a.GraphQLError(`Cannot use alias "${e.alias}" in "${e}": aliases are not currently supported in @${t.name}`)}),i}catch(e){if(!(e instanceof a.GraphQLError)||!i)throw e;throw P(t,e,e=>(e.startsWith("Cannot query field")&&(e.endsWith(".")&&(e=e.slice(0,e.length-1)),t.name===h.FederationDirectiveName.KEY?e+=" (the field should either be added to this subgraph or, if it should not be resolved by this subgraph, you need to add it to this subgraph with @external).":e+=" (if the field is defined in another subgraph, you need to add it to this subgraph with @external)."),e))}}function er({parentType:e,directive:t,includeInterfaceFieldsImplementations:r,validate:i=!0}){let o=[];try{et({parentType:e,directive:t,fieldAccessor:(e,t)=>{let i=e.field(t);if(i&&(o.push(i),r&&(0,n.isInterfaceType)(e)))for(let r of e.possibleRuntimeTypes()){let e=r.field(t);e&&o.push(e)}return i},validate:i})}catch(e){if(!(void 0!==(0,p.errorCauses)(e))||i)throw e}return o}t.FederationBlueprint=B,t.setSchemaAsFed2Subgraph=W,t.FEDERATION2_LINK_WITH_FULL_IMPORTS='@link(url: "https://specs.apollo.dev/federation/v2.9", import: ["@key", "@requires", "@provides", "@external", "@tag", "@extends", "@shareable", "@inaccessible", "@override", "@composeDirective", "@interfaceObject", "@authenticated", "@requiresScopes", "@policy", "@sourceAPI", "@sourceType", "@sourceField", "@context", "@fromContext", "@cost", "@listSize"])',t.FEDERATION2_LINK_WITH_AUTO_EXPANDED_IMPORTS='@link(url: "https://specs.apollo.dev/federation/v2.9", import: ["@key", "@requires", "@provides", "@external", "@tag", "@extends", "@shareable", "@inaccessible", "@override", "@composeDirective", "@interfaceObject"])',t.FEDERATION2_LINK_WITH_AUTO_EXPANDED_IMPORTS_UPGRADED='@link(url: "https://specs.apollo.dev/federation/v2.4", import: ["@key", "@requires", "@provides", "@external", "@tag", "@extends", "@shareable", "@inaccessible", "@override", "@composeDirective", "@interfaceObject"])',t.asFed2SubgraphDocument=function(e,t){var r,n;let i=(null==t?void 0:t.includeAllImports)?S.directiveSpecs():O.directiveSpecs(),o={kind:a.Kind.DIRECTIVE,name:{kind:a.Kind.NAME,value:f.linkDirectiveDefaultName},arguments:[{kind:a.Kind.ARGUMENT,name:{kind:a.Kind.NAME,value:"url"},value:{kind:a.Kind.STRING,value:S.url.toString()}},{kind:a.Kind.ARGUMENT,name:{kind:a.Kind.NAME,value:"import"},value:{kind:a.Kind.LIST,values:i.map(e=>({kind:a.Kind.STRING,value:`@${e.name}`}))}}]};if(null===(r=null==t?void 0:t.addAsSchemaExtension)||void 0===r||r)return{kind:a.Kind.DOCUMENT,loc:e.loc,definitions:e.definitions.concat({kind:a.Kind.SCHEMA_EXTENSION,directives:[o]})};let s=e.definitions.find(e=>e.kind==a.Kind.SCHEMA_DEFINITION);if(s)return{kind:a.Kind.DOCUMENT,loc:e.loc,definitions:e.definitions.filter(e=>e!==s).concat([{...s,directives:[o].concat(null!==(n=s.directives)&&void 0!==n?n:[])}])};{let t=e.definitions.some(e=>e.kind===a.Kind.OBJECT_TYPE_DEFINITION&&"Mutation"===e.name.value),r=(e,t)=>({kind:a.Kind.OPERATION_TYPE_DEFINITION,operation:e,type:{kind:a.Kind.NAMED_TYPE,name:{kind:a.Kind.NAME,value:t}}});return{kind:a.Kind.DOCUMENT,loc:e.loc,definitions:e.definitions.concat({kind:a.Kind.SCHEMA_DEFINITION,directives:[o],operationTypes:[r(a.OperationTypeNode.QUERY,"Query")].concat(t?r(a.OperationTypeNode.MUTATION,"Mutation"):[])})}}},t.printSubgraphNames=function(e){return(0,i.printHumanReadableList)(e.map(e=>`"${e}"`),{prefix:"subgraph",prefixPlural:"subgraphs"})},t.federationMetadata=H,t.isFederationSubgraphSchema=function(e){return!!H(e)},t.isFederationField=Q,t.isEntityType=K,t.isInterfaceObjectType=function(e){if(!(0,n.isObjectType)(e))return!1;let t=H(e.schema());return!!t&&t.isInterfaceObjectType(e)},t.buildSubgraph=z,t.newEmptyFederation2Schema=function(e){let t=new n.Schema(new B(!0),e);return W(t,!0),t},t.parseFieldSetArgument=et,t.collectTargetFields=er,t.subgraphsFromServiceList=function(e){var t;let r=[],n=new en;for(let i of e)try{n.add(z(i.name,null!==(t=i.url)&&void 0!==t?t:"",i.typeDefs))}catch(t){let e=(0,p.errorCauses)(t);if(e)r=r.concat(e);else throw t}return 0===r.length?n:r};class en{constructor(){this.subgraphs=new i.OrderedMap}add(e){if(this.subgraphs.has(e.name))throw Error(`A subgraph named ${e.name} already exists`+(e.url?` (with url '${e.url}')`:""));return this.subgraphs.add(e.name,e),e}get(e){return this.subgraphs.get(e)}size(){return this.subgraphs.size}names(){return this.subgraphs.keys()}values(){return this.subgraphs.values()}*[Symbol.iterator](){for(let e of this.subgraphs)yield e}validate(){let e=[];for(let t of this.values())try{t.validate()}catch(r){let t=(0,p.errorCauses)(r);if(!t)throw r;e=e.concat(t)}return 0===e.length?void 0:e}toString(){return"["+this.subgraphs.keys().join(", ")+"]"}}t.Subgraphs=en,t.anyTypeSpec=(0,m.createScalarTypeSpecification)({name:"_Any"}),t.serviceTypeSpec=(0,m.createObjectTypeSpecification)({name:"_Service",fieldsFct:e=>[{name:"sdl",type:e.stringType()}]}),t.entityTypeSpec=(0,m.createUnionTypeSpecification)({name:"_Entity",membersFct:e=>e.objectTypes().filter(K).map(e=>e.name)}),t.FEDERATION_OPERATION_TYPES=[t.anyTypeSpec,t.serviceTypeSpec,t.entityTypeSpec],t.serviceFieldName="_service",t.entitiesFieldName="_entities",t.FEDERATION_OPERATION_FIELDS=[t.serviceFieldName,t.entitiesFieldName];class ei{constructor(e,r,n){if(this.name=e,this.url=r,this.schema=n,e===t.FEDERATION_RESERVED_SUBGRAPH_NAME)throw p.ERRORS.INVALID_SUBGRAPH_NAME.err(`Invalid name ${t.FEDERATION_RESERVED_SUBGRAPH_NAME} for a subgraph: this name is reserved`)}metadata(){let e=H(this.schema);return(0,i.assert)(e,"The subgraph schema should have built with the federation built-ins."),e}isFed2Subgraph(){return this.metadata().isFed2Schema()}addFederationOperations(){let e=this.metadata();for(let e of t.FEDERATION_OPERATION_TYPES)e.checkOrAdd(this.schema);let r=this.schema.schemaDefinition.root("query"),i=r?r.type:this.schema.addType(new n.ObjectType("Query")),o=i.field(t.entitiesFieldName),a=e.entityType();if(a){let r=new n.NonNullType(new n.ListType(a));o?o.type||(o.type=a):i.addField(t.entitiesFieldName,r).addArgument("representations",new n.NonNullType(new n.ListType(new n.NonNullType(e.anyType()))))}else o&&o.remove();i.field(t.serviceFieldName)||i.addField(t.serviceFieldName,new n.NonNullType(e.serviceType()))}assumeValid(){return this.addFederationOperations(),this.schema.assumeValid(),this}validate(){try{return this.addFederationOperations(),this.schema.validate(),this}catch(e){if(e instanceof a.GraphQLError)throw ea(e,this.name,p.ERRORS.INVALID_GRAPHQL);throw e}}isPrintedDirective(e){var t;if(this.metadata().allFederationDirectives().includes(e))return!1;let r=this.schema.coreFeatures;return!r||(null===(t=r.sourceFeature(e))||void 0===t?void 0:t.feature.url.identity)!==f.linkIdentity}isPrintedType(e){var t;if(this.metadata().allFederationTypes().includes(e)||(0,n.isObjectType)(e)&&e.isQueryRootType()&&0===e.fields().filter(e=>!Q(e)).length)return!1;let r=this.schema.coreFeatures;return!r||(null===(t=r.sourceFeature(e))||void 0===t?void 0:t.feature.url.identity)!==f.linkIdentity}isPrintedDirectiveApplication(e){let t;if(!this.schema.coreFeatures||e.name!==_.url.name)return!0;let r=e.arguments();if("url"in r)try{t=f.FeatureUrl.parse(r.url)}catch(e){}return!((null==t?void 0:t.identity)===f.linkIdentity&&1===Object.keys(r).length)}toString(e=y.defaultPrintOptions){return(0,y.printSchema)(this.schema,{...e,directiveDefinitionFilter:e=>this.isPrintedDirective(e),typeFilter:e=>this.isPrintedType(e),fieldFilter:e=>!Q(e),directiveApplicationFilter:e=>this.isPrintedDirectiveApplication(e)})}}function eo(e,t){return"subgraph"in e?e:{...e,subgraph:t}}function ea(e,t,r){let i=(0,p.errorCauses)(e).map(e=>{var n;let i=`[${t}] ${e.message}`,o=e.nodes?e.nodes.map(e=>eo(e,t)):void 0,s=null!==(n=(0,p.errorCodeDef)(e))&&void 0!==n?n:r,l={...(0,p.extractGraphQLErrorOptions)(e),nodes:o,originalError:e};return s?s.err(i,l):new a.GraphQLError(i,l)});return 1===i.length?i[0]:(0,n.ErrGraphQLValidationFailed)(i)}t.Subgraph=ei,t.addSubgraphToASTNode=eo,t.addSubgraphToError=ea;class es{constructor(e,t){this.schema=e,this.isFed2Schema=t,this.fakeExternalFields=new Set,this.providedFields=new Set,this.externalFieldsOnType=new Set,this.externalDirective=this.metadata().externalDirective(),this.collectFakeExternals(),this.collectProvidedFields(),this.collectExternalsOnType()}metadata(){let e=H(this.schema);return(0,i.assert)(e,"Schema should be a subgraphs schema"),e}collectFakeExternals(){let e=this.metadata(),t=e.extendsDirective();for(let r of e.keyDirective().applications()){let e=r.parent;(r.ofExtension()||e.hasAppliedDirective(t))&&er({parentType:e,directive:r,includeInterfaceFieldsImplementations:!1,validate:!1}).filter(e=>e.hasAppliedDirective(this.externalDirective)).forEach(e=>this.fakeExternalFields.add(e.coordinate))}}collectProvidedFields(){for(let e of this.metadata().providesDirective().applications()){let t=e.parent,r=(0,n.baseType)(t.type);(0,n.isCompositeType)(r)&&er({parentType:r,directive:e,includeInterfaceFieldsImplementations:!0,validate:!1}).forEach(e=>this.providedFields.add(e.coordinate))}}collectExternalsOnType(){if(this.isFed2Schema){for(let e of this.schema.objectTypes())if(e.hasAppliedDirective(this.externalDirective))for(let t of e.fields())this.externalFieldsOnType.add(t.coordinate)}}isExternal(e){return(e.hasAppliedDirective(this.externalDirective)||this.externalFieldsOnType.has(e.coordinate))&&!this.isFakeExternal(e)}isFakeExternal(e){return this.fakeExternalFields.has(e.coordinate)}selectsAnyExternalField(e){for(let t of e.selections())if("FieldSelection"===t.kind&&this.isExternal(t.element.definition)||t.selectionSet&&this.selectsAnyExternalField(t.selectionSet))return!0;return!1}isPartiallyExternal(e){return this.isExternal(e)&&this.providedFields.has(e.coordinate)}isFullyExternal(e){return this.isExternal(e)&&!this.providedFields.has(e.coordinate)}}function el(e,t,r,n){for(let i of t.appliedDirectivesOf(e)){let o;try{o=et({parentType:r,directive:i})}catch(e){continue}if(function e(t){return t.selections().some(t=>"FieldSelection"!==t.kind?e(t.selectionSet):!eu(t.element.definition)&&(!t.selectionSet||e(t.selectionSet)))}(o)){i.remove();let r=function e(t){return t.lazyMap(t=>{if("FieldSelection"===t.kind&&eu(t.element.definition))return t;if(t.selectionSet){let r=e(t.selectionSet);if(!r.isEmpty())return t.withUpdatedSelectionSet(r)}})}(o);if(r.isEmpty())n(t,i);else{let o=t.applyDirective(e,{fields:r.toString(!0,!1)});n(t,i,o)}}}}function eu(e){let t=H(e.schema());if(!t)return!1;if(e.hasAppliedDirective(t.externalDirective()))return!0;let r=e.parent;if((0,n.isInterfaceType)(r))for(let n of r.possibleRuntimeTypes()){let r=n.field(e.name);if(r&&r.hasAppliedDirective(t.externalDirective()))return!0}return!1}t.removeInactiveProvidesAndRequires=function(e,t=()=>{}){let r=H(e);if(!r)return;let i=r.providesDirective(),o=r.requiresDirective();for(let r of e.types())if((0,n.isObjectType)(r)||(0,n.isInterfaceType)(r))for(let e of r.fields()){let a=(0,n.baseType)(e.type);el(i,e,a,t),el(o,e,r,t)}}},30393:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graphQLJSDirectiveToAST=t.graphQLJSNamedTypeToAST=t.graphQLJSSchemaToAST=void 0;let n=r(57343),i=r(48170),o=[n.OperationTypeNode.QUERY,n.OperationTypeNode.MUTATION,n.OperationTypeNode.SUBSCRIPTION];function a({definition:e,extensions:t}){return e?[e,...t]:t}function s(e){return e.astNode||e.extensionASTNodes.length>0?{definition:e.astNode||void 0,extensions:e.extensionASTNodes}:{definition:(0,n.parse)((0,n.printType)(e)).definitions[0],extensions:[]}}function l(e){if(e.astNode)return e.astNode;{let t=new n.GraphQLSchema({directives:[e],assumeValid:!0});return(0,n.parse)((0,n.printSchema)(t)).definitions.find(e=>e.kind===n.Kind.DIRECTIVE_DEFINITION)}}t.graphQLJSSchemaToAST=function(e){let t=Object.values(e.getTypeMap()).filter(e=>!(0,n.isIntrospectionType)(e)&&!(0,n.isSpecifiedScalarType)(e)),r=e.getDirectives().filter(e=>!(0,n.isSpecifiedDirective)(e)),u=a(function(e){if(e.astNode||e.extensionASTNodes.length>0)return{definition:e.astNode||void 0,extensions:e.extensionASTNodes};{let t;if(o.some(t=>{var r;return!!(r=e.getRootType(t))&&r.name!==(0,i.defaultRootName)(t)})){let r=[];for(let t of o){let i=e.getRootType(t);i&&r.push({kind:n.Kind.OPERATION_TYPE_DEFINITION,operation:t,type:{kind:n.Kind.NAMED_TYPE,name:{kind:n.Kind.NAME,value:i.name}}})}t={kind:n.Kind.SCHEMA_DEFINITION,description:e.description?{kind:n.Kind.STRING,value:e.description}:void 0,operationTypes:r}}return{definition:t,extensions:[]}}}(e)),c=t.map(e=>a(s(e))).flat(),p=r.map(e=>l(e));return{kind:n.Kind.DOCUMENT,definitions:[...u,...c,...p]}},t.graphQLJSNamedTypeToAST=s,t.graphQLJSDirectiveToAST=l},70854:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.coreFeatureDefinitionIfKnown=void 0,i(r(48170),t),i(r(62161),t),i(r(41388),t),i(r(24056),t),i(r(27239),t),i(r(56563),t),i(r(19548),t),i(r(4749),t),i(r(96436),t),i(r(59143),t),i(r(35930),t),i(r(51801),t),i(r(35422),t),i(r(39862),t),i(r(52473),t),i(r(34023),t),i(r(74533),t),i(r(32959),t),i(r(65550),t),i(r(30393),t),i(r(30500),t);var o=r(10556);Object.defineProperty(t,"coreFeatureDefinitionIfKnown",{enumerable:!0,get:function(){return o.coreFeatureDefinitionIfKnown}}),i(r(92884),t),i(r(59675),t),i(r(56118),t),i(r(75487),t),i(r(35357),t),i(r(19830),t)},93566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addIntrospectionFields=t.isIntrospectionName=t.introspectionTypeNames=t.introspectionFieldNames=void 0;let n=r(57343),i=r(48170);t.introspectionFieldNames=["__schema","__type"],t.introspectionTypeNames=["__Schema","__Directive","__DirectiveLocation","__Type","__Field","__InputValue","__EnumValue","__TypeKind"],t.isIntrospectionName=function(e){return e.startsWith("__")},t.addIntrospectionFields=function(e){if(e.type("__Schema"))return;let t=e.addType(new i.EnumType("__TypeKind",!0));t.addValue("SCALAR"),t.addValue("OBJECT"),t.addValue("INTERFACE"),t.addValue("UNION"),t.addValue("ENUM"),t.addValue("INPUT_OBJECT"),t.addValue("LIST"),t.addValue("NON_NULL");let r=e.addType(new i.ObjectType("__InputValue",!0)),o=e.addType(new i.ObjectType("__Field",!0)),a=e.addType(new i.ObjectType("__Type",!0)),s=e.addType(new i.ObjectType("__EnumValue",!0));a.addField("kind",new i.NonNullType(t)),a.addField("name",e.stringType()),a.addField("description",e.stringType()),a.addField("fields",new i.ListType(new i.NonNullType(o))).addArgument("includeDeprecated",e.booleanType(),!1),a.addField("interfaces",new i.ListType(new i.NonNullType(a))),a.addField("possibleTypes",new i.ListType(new i.NonNullType(a))),a.addField("enumValues",new i.ListType(new i.NonNullType(s))).addArgument("includeDeprecated",e.booleanType(),!1),a.addField("inputFields",new i.ListType(new i.NonNullType(r))).addArgument("includeDeprecated",e.booleanType(),!1),a.addField("ofType",a),a.addField("specifiedByURL",e.stringType()),o.addField("name",new i.NonNullType(e.stringType())),o.addField("description",e.stringType()),o.addField("args",new i.NonNullType(new i.ListType(new i.NonNullType(r)))).addArgument("includeDeprecated",e.booleanType(),!1),o.addField("type",new i.NonNullType(a)),o.addField("isDeprecated",new i.NonNullType(e.booleanType())),o.addField("deprecationReason",e.stringType()),r.addField("name",new i.NonNullType(e.stringType())),r.addField("description",e.stringType()),r.addField("type",new i.NonNullType(a)),r.addField("defaultValue",e.stringType()),r.addField("isDeprecated",new i.NonNullType(e.booleanType())),r.addField("deprecationReason",e.stringType()),s.addField("name",new i.NonNullType(e.stringType())),s.addField("description",e.stringType()),s.addField("isDeprecated",new i.NonNullType(e.booleanType())),s.addField("deprecationReason",e.stringType());let l=e.addType(new i.EnumType("__DirectiveLocation",!0));for(let e of Object.values(n.DirectiveLocation))l.addValue(e);let u=e.addType(new i.ObjectType("__Directive",!0));u.addField("name",new i.NonNullType(e.stringType())),u.addField("description",e.stringType()),u.addField("locations",new i.NonNullType(new i.ListType(new i.NonNullType(l)))),u.addField("args",new i.NonNullType(new i.ListType(new i.NonNullType(r)))).addArgument("includeDeprecated",e.booleanType(),!1),u.addField("isRepeatable",new i.NonNullType(e.booleanType()));let c=e.addType(new i.ObjectType("__Schema",!0));c.addField("description",e.stringType()),c.addField("types",new i.NonNullType(new i.ListType(new i.NonNullType(a)))),c.addField("queryType",new i.NonNullType(a)),c.addField("mutationType",new i.NonNullType(a)),c.addField("subscriptionType",new i.NonNullType(a)),c.addField("directives",new i.NonNullType(new i.ListType(new i.NonNullType(u))));let p=e.schemaDefinition.rootType("query");p||(p=e.addType(new i.ObjectType("Query")),e.schemaDefinition.setRoot("query",p)),p.addField(new i.FieldDefinition("__schema",!0),new i.NonNullType(c)),p.addField(new i.FieldDefinition("__type",!0),a).addArgument("name",new i.NonNullType(e.stringType()))}},10556:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterKnownFeatures=t.validateKnownFeatures=t.coreFeatureDefinitionIfKnown=t.registerKnownFeature=void 0;let n=r(59143),i=new Map;t.registerKnownFeature=function(e){i.has(e.identity)||i.set(e.identity,e)},t.coreFeatureDefinitionIfKnown=function(e){var t;return null===(t=i.get(e.identity))||void 0===t?void 0:t.find(e.version)},t.validateKnownFeatures=function(e,t=[]){return i.forEach(r=>{let i=r.latest();i.validateSubgraphSchema!==n.FeatureDefinition.prototype.validateSubgraphSchema&&t.push(...i.validateSubgraphSchema(e))}),t},t.unregisterKnownFeatures=function(e){i.delete(e.identity)}},19548:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.hasSelectionWithPredicate=t.operationToDocument=t.parseOperationAST=t.parseSelectionSet=t.parseOperation=t.operationFromDocument=t.FragmentSelection=t.FieldSelection=t.selectionOfElement=t.selectionSetOfElement=t.selectionSetOf=t.allFieldDefinitionsInSelectionSet=t.MutableSelectionSet=t.SelectionSetUpdates=t.SelectionSet=t.ContainsResult=t.NamedFragments=t.NamedFragmentDefinition=t.Operation=t.concatOperationPaths=t.conditionalDirectivesInOperationPath=t.sameOperationPaths=t.operationPathToStringPath=t.FragmentElement=t.Field=t.DEFAULT_MIN_USAGES_TO_OPTIMIZE=void 0;let i=r(57343),o=r(48170),a=r(27239),s=r(74533),l=r(56563),u=r(4749),c=r(24056),p=r(37359);function d(e,t,r){if(!e)throw s.ERRORS.INVALID_GRAPHQL.err(t(),{nodes:r})}function f(e,t){return(0,o.sameDirectiveApplications)(e.appliedDirectives,t.appliedDirectives)}t.DEFAULT_MIN_USAGES_TO_OPTIMIZE=2;class h extends o.DirectiveTargetElement{constructor(e,t){super(e,t)}collectVariables(e){this.collectVariablesInElement(e),this.collectVariablesInAppliedDirectives(e)}rebaseOnOrError(e){return this.rebaseOn({parentType:e,errorIfCannotRebase:!0})}addAttachement(e,t){this.attachements||(this.attachements=new Map),this.attachements.set(e,t)}getAttachement(e){var t;return null===(t=this.attachements)||void 0===t?void 0:t.get(e)}copyAttachementsTo(e){if(this.attachements)for(let[t,r]of this.attachements.entries())e.addAttachement(t,r)}keyForDirectives(){return this.appliedDirectives.map(e=>(function(e,t=["defer"]){if(t.includes(e.name))return(0,p.v1)();let r=Object.entries(e.arguments()).filter(([e,t])=>void 0!==t);r.sort(([e],[t])=>e.localeCompare(t));let n=0==r.length?"":"("+r.map(([t,r])=>`${t}: ${(0,c.valueToString)(r,e.argumentType(t))}`).join(", ")+")";return`@${e.name}${n}`})(e)).join(" ")}}class y extends h{constructor(e,t,r,n){super(e.schema(),r),this.definition=e,this.args=t,this.alias=n,this.kind="Field"}collectVariablesInElement(e){this.args&&e.collectInArguments(this.args)}get name(){return this.definition.name}argumentValue(e){return this.args?this.args[e]:void 0}responseName(){return this.alias?this.alias:this.name}key(){return this.responseName()+this.keyForDirectives()}asPathElement(){return this.responseName()}get parentType(){return this.definition.parent}isLeafField(){return(0,o.isLeafType)(this.baseType())}baseType(){return(0,o.baseType)(this.definition.type)}withUpdatedArguments(e){let t=new y(this.definition,{...this.args,...e},this.appliedDirectives,this.alias);return this.copyAttachementsTo(t),t}withUpdatedDefinition(e){let t=new y(e,this.args,this.appliedDirectives,this.alias);return this.copyAttachementsTo(t),t}withUpdatedAlias(e){let t=new y(this.definition,this.args,this.appliedDirectives,e);return this.copyAttachementsTo(t),t}withUpdatedDirectives(e){let t=new y(this.definition,this.args,e,this.alias);return this.copyAttachementsTo(t),t}argumentsToNodes(){if(!this.args)return;let e=Object.entries(this.args);if(0!==e.length)return e.map(([e,t])=>({kind:i.Kind.ARGUMENT,name:{kind:i.Kind.NAME,value:e},value:(0,c.valueToAST)(t,this.definition.argument(e).type)}))}selects(e,t=!1,r,n){if((0,u.assert)(t||r,"Must provide variable definitions if validation is needed"),e===this.definition)return!0;if(this.name!==e.name)return!1;for(let i of e.arguments()){let e=this.argumentValue(i.name);if(void 0===e){if(void 0===i.defaultValue&&!(0,o.isNullableType)(i.type)&&(!n||!(null==n?void 0:n.includes(i.name))))return!1}else if(!t&&!(0,c.isValidValue)(e,i,r))return!1}if(!t&&this.args){for(let[t,r]of Object.entries(this.args))if(null!==r&&void 0===e.argument(t))return!1}return!0}validate(e,t){var r;for(let n of(d(this.name===this.definition.name,()=>`Field name "${this.name}" cannot select field "${this.definition.coordinate}: name mismatch"`),this.definition.arguments())){let i=this.argumentValue(n.name),s=!1,l=this.definition.schema(),u=null===(r=(0,a.federationMetadata)(l))||void 0===r?void 0:r.fromContextDirective();u&&(0,a.isFederationDirectiveDefinedInSchema)(u)&&(s=n.appliedDirectivesOf(u).length>0),void 0===i?d(s&&!t||void 0!==n.defaultValue||(0,o.isNullableType)(n.type),()=>`Missing mandatory value for argument "${n.name}" of field "${this.definition.coordinate}" in selection "${this}"`):d(s&&!t||(0,c.isValidValue)(i,n,e),()=>`Invalid value ${(0,c.valueToString)(i)} for argument "${n.coordinate}" of type ${n.type}`)}if(this.args)for(let[e,t]of Object.entries(this.args))d(null===t||void 0!==this.definition.argument(e),()=>`Unknown argument "${e}" in field application of "${this.name}"`)}rebaseOn({parentType:e,errorIfCannotRebase:t}){if(e===this.definition.parent)return this;if(this.name===o.typenameFieldName)return(0,o.possibleRuntimeTypes)(e).some(e=>(0,a.isInterfaceObjectType)(e))?void d(!t,()=>`Cannot add selection of field "${this.definition.coordinate}" to selection set of parent type "${e}" that is potentially an interface object type at runtime`):this.withUpdatedDefinition(e.typenameField());let r=e.field(this.name);if(!(this.canRebaseOn(e)&&r)){d(!t,()=>`Cannot add selection of field "${this.definition.coordinate}" to selection set of parent type "${e}"`);return}return this.withUpdatedDefinition(r)}canRebaseOn(e){let t=this.definition.parent;return e.name===t.name||(0,o.isInterfaceType)(t)||(0,a.isInterfaceObjectType)(t)}typeIfAddedTo(e){var t,r,n;if(e==this.definition.parent)return this.definition.type;if(this.name===o.typenameFieldName)return null===(t=e.typenameField())||void 0===t?void 0:t.type;let i=this.canRebaseOn(e)?null===(r=e.field(this.name))||void 0===r?void 0:r.type:void 0,s=null===(n=(0,a.federationMetadata)(e.schema()))||void 0===n?void 0:n.fromContextDirective();if(s&&(0,a.isFederationDirectiveDefinedInSchema)(s)){let t=e.field(this.name);if(t&&t.arguments().some(e=>e.appliedDirectivesOf(s).length>0&&(!this.args||void 0===this.args[e.name])))return}return i}hasDefer(){return!1}deferDirectiveArgs(){}withoutDefer(){return this}equals(e){return this===e||"Field"===e.kind&&this.name===e.name&&this.alias===e.alias&&(this.args?e.args&&(0,c.argumentsEquals)(this.args,e.args):!e.args)&&f(this,e)}toString(){let e=this.alias?this.alias+": ":"",t=this.args?Object.entries(this.args):[],r=0===t.length?"":"("+t.map(([e,t])=>{var r;return`${e}: ${(0,c.valueToString)(t,null===(r=this.definition.argument(e))||void 0===r?void 0:r.type)}`}).join(", ")+")";return e+this.name+r+this.appliedDirectivesToString()}}t.Field=y;class m extends h{constructor(e,t,r){super(e.schema(),r),this.sourceType=e,this.kind="FragmentElement",this.typeCondition=void 0!==t&&"string"==typeof t?this.schema().type(t):t}collectVariablesInElement(e){}get parentType(){return this.sourceType}key(){return this.computedKey||(this.computedKey="..."+(this.typeCondition?" on "+this.typeCondition.name:"")+this.keyForDirectives()),this.computedKey}castedType(){return this.typeCondition?this.typeCondition:this.sourceType}asPathElement(){let e=this.typeCondition;return e?`... on ${e}`:void 0}withUpdatedSourceType(e){return this.withUpdatedTypes(e,this.typeCondition)}withUpdatedCondition(e){return this.withUpdatedTypes(this.sourceType,e)}withUpdatedTypes(e,t){let r=new m(e,null==t?void 0:t.name,this.appliedDirectives);return this.copyAttachementsTo(r),r}withUpdatedDirectives(e){let t=new m(this.sourceType,this.typeCondition,e);return this.copyAttachementsTo(t),t}rebaseOn({parentType:e,errorIfCannotRebase:t}){let r=this.parentType,n=this.typeCondition;if(e===r)return this;let{canRebase:i,rebasedCondition:a}=this.canRebaseOn(e);if(!i){d(!t,()=>`Cannot add fragment of condition "${n}" (runtimes: [${(0,o.possibleRuntimeTypes)(n)}]) to parent type "${e}" (runtimes: ${(0,o.possibleRuntimeTypes)(e)})`);return}return this.withUpdatedTypes(e,a)}canRebaseOn(e){if(!this.typeCondition)return{canRebase:!0,rebasedCondition:void 0};let t=e.schema().type(this.typeCondition.name);return t&&(0,o.isCompositeType)(t)&&(0,o.runtimeTypesIntersects)(e,t)?{canRebase:!0,rebasedCondition:t}:{canRebase:!1}}castedTypeIfAddedTo(e){if(e==this.parentType)return this.castedType();let{canRebase:t,rebasedCondition:r}=this.canRebaseOn(e);return t?r||e:void 0}hasDefer(){return this.hasAppliedDirective("defer")}hasStream(){return this.hasAppliedDirective("stream")}deferDirectiveArgs(){var e;return null===(e=this.appliedDirectivesOf(this.schema().deferDirective())[0])||void 0===e?void 0:e.arguments()}withoutDefer(){let e=this.schema().deferDirective().name,t=this.appliedDirectives.filter(t=>t.name!==e);if(!this.typeCondition&&0===t.length)return;if(t.length===this.appliedDirectives.length)return this;let r=new m(this.sourceType,this.typeCondition,t);return this.copyAttachementsTo(r),r}withNormalizedDefer(e){let t,r;let n=this.deferDirectiveArgs();if(!n)return this;if(void 0!==n.if){if("boolean"==typeof n.if){if(!n.if)return this.withoutDefer();t={...n,if:void 0}}else r=n.if}let i=n.label;if(i||(i=e.newLabel(),t?t.label=i:t={...n,label:i}),r&&e.registerCondition(i,r),!t)return this;let a=this.schema().deferDirective(),s=this.appliedDirectives.filter(e=>e.name!==a.name).concat(new o.Directive(a.name,t)),l=new m(this.sourceType,this.typeCondition,s);return this.copyAttachementsTo(l),l}equals(e){var t,r;return this===e||"FragmentElement"===e.kind&&(null===(t=this.typeCondition)||void 0===t?void 0:t.name)===(null===(r=e.typeCondition)||void 0===r?void 0:r.name)&&f(this,e)}toString(){return"..."+(this.typeCondition?" on "+this.typeCondition:"")+this.appliedDirectivesToString()}}function v(e){return e.map(e=>e.appliedDirectives).flat().filter(e=>(0,o.isConditionalDirective)(e))}t.FragmentElement=m,t.operationPathToStringPath=function(e){return e.filter(e=>!("FragmentElement"===e.kind&&!e.typeCondition)).map(e=>{var t;return"Field"===e.kind?e.responseName():`... on ${null===(t=e.typeCondition)||void 0===t?void 0:t.coordinate}`})},t.sameOperationPaths=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].equals(t[r]))return!1;return!0},t.conditionalDirectivesInOperationPath=v,t.concatOperationPaths=function(e,t){if(0===e.length)return t;if(0===t.length)return e;let r=e[e.length-1],n=v(e),i=t[0];for(;i&&function(e,t,r){let n="Field"===e.kind?e.baseType():e.typeCondition;return!!n&&"FragmentElement"===t.kind&&!!t.typeCondition&&(0===t.appliedDirectives.length||(0,o.isDirectiveApplicationsSubset)(r,t.appliedDirectives))&&(0,l.isSubtype)(t.typeCondition,n)}(r,i,n);)i=(t=t.slice(1))[0];return e.concat(t)};class g extends o.DirectiveTargetElement{constructor(e,t,r,n,i,o,a=[]){super(e,a),this.rootKind=t,this.selectionSet=r,this.variableDefinitions=n,this.fragments=i,this.name=o}withUpdatedSelectionSet(e){return this.selectionSet===e?this:new g(this.schema(),this.rootKind,e,this.variableDefinitions,this.fragments,this.name,this.appliedDirectives)}collectUndefinedVariablesFromFragments(e){let t=new o.VariableCollector;for(let r of e.definitions())r.selectionSet.usedVariables().forEach(e=>{this.variableDefinitions.definition(e)||t.add(e)});return t.variables()}withUpdatedSelectionSetAndFragments(e,t,r){if(this.selectionSet===e&&t===this.fragments)return this;let n=this.variableDefinitions;if(r&&t){let e=this.collectUndefinedVariablesFromFragments(t);e.length>0&&((n=new o.VariableDefinitions).addAll(this.variableDefinitions),n.addAll(r.filter(e)))}return new g(this.schema(),this.rootKind,e,n,t,this.name,this.appliedDirectives)}optimize(e,r=t.DEFAULT_MIN_USAGES_TO_OPTIMIZE,n){if((0,u.assert)(r>=1,`Expected 'minUsagesToOptimize' to be at least 1, but got ${r}`),!e||e.isEmpty())return this;let i=this.selectionSet.optimize(e);if(i===this.selectionSet)return this;let o=function(e,t,r){let n=new Map;if(e.collectUsedFragmentNames(n),0===n.size)return null;for(let e of t.definitions())void 0===n.get(e.name)&&n.set(e.name,0);let i=function(e){let t=new u.SetMultiMap;for(let r of e.definitions())for(let e of r.fragmentUsages().keys())t.add(e,r.name);return t}(t),o=new Set,a=!0;for(;a;)for(let e of(a=!1,function(e,t,r){let n=Array.from(e.entries()).filter(([e,t])=>t>=r).map(([e,t])=>e);for(;n.length>0;){let i=[];for(let o of n)for(let[n,a]of(e.delete(o),t.get(o).fragmentUsages().entries())){let t=e.get(n);if(void 0!==t){let o=t+a;e.set(n,o),t<r&&o>=r&&i.push(n)}}n=i}}(n,t,r),(0,u.mapKeys)(n))){let s=n.get(e);if(0===s)continue;if(s>=r){a=!0;break}let l=i.get(e);if(!l||[...l].every(e=>o.has(e)||!n.get(e)))for(let[r,i]of(o.add(e),n.delete(e),a=!0,t.get(e).fragmentUsages().entries())){let e=n.get(r);void 0!==e&&n.set(r,e+s*i)}}for(let e of n.keys())o.add(e);return 0===o.size?t:t.filter(e=>!o.has(e.name))}(i,e,r);if(null!==o&&(null==o?void 0:o.size)!==e.size&&(i=(i=i.expandFragments(o)).normalize({parentType:i.parentType}),o)){let e;do{e=o;let t=new Map;i.collectUsedFragmentNames(t),o.collectUsedFragmentNames(t),o=o.filter(e=>{var r;return(null!==(r=t.get(e.name))&&void 0!==r?r:0)>0})}while(o&&o.size<e.size)}return this.withUpdatedSelectionSetAndFragments(i,null!=o?o:void 0,n)}generateQueryFragments(){let[e,t]=this.selectionSet.minimizeSelectionSet();return new g(this.schema(),this.rootKind,e,this.variableDefinitions,t,this.name,this.appliedDirectives)}expandAllFragments(){let e=this.selectionSet.expandFragments();return this.withUpdatedSelectionSetAndFragments(e.normalize({parentType:e.parentType}),void 0)}normalize(){return this.withUpdatedSelectionSet(this.selectionSet.normalize({parentType:this.selectionSet.parentType}))}withoutDefer(e){return this.withUpdatedSelectionSet(this.selectionSet.withoutDefer(e))}withNormalizedDefer(){let e=new T,{hasDefers:t,hasNonLabelledOrConditionalDefers:r}=e.init(this.selectionSet),n=this;return r&&(n=this.withUpdatedSelectionSet(this.selectionSet.withNormalizedDefer(e))),{operation:n,hasDefers:t,assignedDeferLabels:e.assignedLabels,deferConditions:e.deferConditions}}collectDefaultedVariableValues(){let e={};for(let{variable:t,defaultValue:r}of this.variableDefinitions.definitions())void 0!==r&&(e[t.name]=r);return e}toString(e=!1,t=!0){return this.selectionSet.toOperationString(this.rootKind,this.variableDefinitions,this.fragments,this.name,this.appliedDirectives,e,t)}}t.Operation=g;class b extends o.DirectiveTargetElement{constructor(e,t,r,n){super(e,n),this.name=t,this.typeCondition=r,this.expandedSelectionSetsAtTypesCache=new Map}setSelectionSet(e){return(0,u.assert)(!this._selectionSet,"Attempting to set the selection set of a fragment definition already built"),(0,u.assert)(e.parentType===this.typeCondition,`Fragment selection set parent is ${e.parentType} differs from the fragment condition type ${this.typeCondition}`),this._selectionSet=e,this}get selectionSet(){return(0,u.assert)(this._selectionSet,()=>`Trying to access fragment definition ${this.name} before it is fully built`),this._selectionSet}withUpdatedSelectionSet(e){return new b(this.schema(),this.name,this.typeCondition).setSelectionSet(e)}fragmentUsages(){return this._fragmentUsages||(this._fragmentUsages=new Map,this.selectionSet.collectUsedFragmentNames(this._fragmentUsages)),this._fragmentUsages}collectUsedFragmentNames(e){for(let[t,r]of this.fragmentUsages().entries()){let n=e.get(t);e.set(t,n?n+r:r)}}toFragmentDefinitionNode(){return{kind:i.Kind.FRAGMENT_DEFINITION,name:{kind:i.Kind.NAME,value:this.name},typeCondition:{kind:i.Kind.NAMED_TYPE,name:{kind:i.Kind.NAME,value:this.typeCondition.name}},selectionSet:this.selectionSet.toSelectionSetNode()}}canApplyDirectlyAtType(e){if((0,l.sameType)(e,this.typeCondition))return!0;if(!(0,o.isAbstractType)(this.typeCondition))return!1;let t=(0,o.possibleRuntimeTypes)(this.typeCondition),r=(0,o.possibleRuntimeTypes)(e);return!(t.length<r.length)&&!!r.every(e=>t.some(t=>(0,l.sameType)(e,t)))&&((0,o.isObjectType)(e)||(0,o.isUnionType)(this.typeCondition))}expandedSelectionSet(){return this._expandedSelectionSet||(this._expandedSelectionSet=this.selectionSet.expandFragments()),this._expandedSelectionSet}expandedSelectionSetAtType(e){let t=this.expandedSelectionSetsAtTypesCache.get(e.name);return t||(t=this.computeExpandedSelectionSetAtType(e),this.expandedSelectionSetsAtTypesCache.set(e.name,t)),t}computeExpandedSelectionSetAtType(e){let t=this.expandedSelectionSet(),r=t.normalize({parentType:e});if(!(0,o.isObjectType)(this.typeCondition))return{selectionSet:r,validator:F.build(t)};let n=t.minus(r);return{selectionSet:r,validator:n.isEmpty()?void 0:F.build(n)}}includes(e){return this.name!==e&&(this._includedFragmentNames||(this._includedFragmentNames=this.computeIncludedFragmentNames()),this._includedFragmentNames.has(e))}computeIncludedFragmentNames(){let e=new Set;for(let t of this.selectionSet.selections())t instanceof M&&e.add(t.namedFragment.name);return e}toString(e){return`fragment ${this.name} on ${this.typeCondition}${this.appliedDirectivesToString()} ${this.selectionSet.toString(!1,!0,e)}`}}t.NamedFragmentDefinition=b;class _{constructor(){this.fragments=new u.MapWithCachedArrays}isEmpty(){return 0===this.size}get size(){return this.fragments.size}names(){return this.fragments.keys()}add(e){if(this.fragments.has(e.name))throw s.ERRORS.INVALID_GRAPHQL.err(`Duplicate fragment name '${e}'`);this.fragments.set(e.name,e)}addIfNotExist(e){this.fragments.has(e.name)||this.fragments.set(e.name,e)}maybeApplyingDirectlyAtType(e){return this.fragments.values().filter(t=>t.canApplyDirectlyAtType(e))}get(e){return this.fragments.get(e)}has(e){return this.fragments.has(e)}definitions(){return this.fragments.values()}collectUsedFragmentNames(e){for(let t of this.definitions())t.collectUsedFragmentNames(e)}map(e){let t=new _;for(let r of this.fragments.values())t.fragments.set(r.name,e(r));return t}mapInDependencyOrder(e){let t=new Map;for(let e of this.definitions())t.set(e.name,{fragment:e,dependsOn:Array.from(e.fragmentUsages().keys())});let r=new Set,n=new _;for(;t.size>0;)for(let[i,o]of t)if(o.dependsOn.every(e=>n.has(e)||r.has(e))){let a=e(o.fragment,n);t.delete(i),a?n.add(a):r.add(i);break}return n.isEmpty()?void 0:n}mapToExpandedSelectionSets(e){return this.mapInDependencyOrder((t,r)=>{let n=e(t.selectionSet.expandFragments().normalize({parentType:t.typeCondition}));if(!n)return;let i=n.optimize(r);return t.withUpdatedSelectionSet(i)})}rebaseOn(e){return this.mapInDependencyOrder((t,r)=>{let n=e.type(t.selectionSet.parentType.name);if(!n||!(0,o.isCompositeType)(n))return;let i=t.selectionSet.rebaseOn({parentType:n,fragments:r,errorIfCannotRebase:!1});return(i=i.normalize({parentType:n})).isWorthUsing()?new b(e,t.name,n).setSelectionSet(i):void 0})}filter(e){return this.mapInDependencyOrder((t,r)=>{if(e(t)){let e=t.selectionSet.expandFragments(r);return e===t.selectionSet?t:t.withUpdatedSelectionSet(e.normalize({parentType:e.parentType}))}})}validate(e){for(let t of this.fragments.values())t.selectionSet.validate(e)}toFragmentDefinitionNodes(){return this.definitions().map(e=>e.toFragmentDefinitionNode())}toString(e){return this.definitions().map(t=>t.toString(e)).join("\n\n")}}t.NamedFragments=_;class T{constructor(){this.index=0,this.assignedLabels=new Set,this.deferConditions=new u.SetMultiMap,this.usedLabels=new Set}init(e){let t=!1,r=!1,n=e.selections().concat();for(;n.length>0;){let e=n.pop();if("FragmentSelection"===e.kind){let n=e.element.deferDirectiveArgs();n&&(r=!0,n.label&&void 0===n.if||(t=!0),n.label&&this.usedLabels.add(n.label))}e.selectionSet&&e.selectionSet.selections().forEach(e=>n.push(e))}return{hasDefers:r,hasNonLabelledOrConditionalDefers:t}}nextLabel(){return`qp__${this.index++}`}newLabel(){let e=this.nextLabel();for(;this.usedLabels.has(e);)e=this.nextLabel();return this.assignedLabels.add(e),e}registerCondition(e,t){this.deferConditions.add(t.name,e)}}!function(e){e[e.NOT_CONTAINED=0]="NOT_CONTAINED",e[e.STRICTLY_CONTAINED=1]="STRICTLY_CONTAINED",e[e.EQUAL=2]="EQUAL"}(n||(t.ContainsResult=n={}));class E{constructor(e,t=new Map){this.parentType=e,this._keyedSelections=t,this._selections=(0,u.mapValues)(t)}minimizeSelectionSet(e=new _,t=new Map){return[this.lazyMap(r=>{var n;if("FragmentSelection"===r.kind&&r.element.typeCondition&&0===r.element.appliedDirectives.length&&r.selectionSet&&r.selectionSet.isWorthUsing()){let i=`on${r.element.typeCondition}`+r.selectionSet.selections().length,o=t.get(i);if(o){let t=o.find(([e])=>e.equals(r.selectionSet));if(t)return new M(this.parentType,e,t[1],[])}let[a]=r.selectionSet.minimizeSelectionSet(e,t),s=t.get(i),l=new b(this.parentType.schema(),`_generated_${i}_${null!==(n=null==s?void 0:s.length)&&void 0!==n?n:0}`,r.element.typeCondition).setSelectionSet(a);return e.add(l),s?s.push([r.selectionSet,l]):t.set(i,[[r.selectionSet,l]]),new M(this.parentType,e,l,[])}return"FieldSelection"===r.kind&&r.selectionSet&&(r=r.withUpdatedSelectionSet(r.selectionSet.minimizeSelectionSet(e,t)[0])),r}),e]}selectionsInReverseOrder(){let e=this._selections.length,t=Array(e);for(let r=0;r<e;r++)t[r]=this._selections[e-r-1];return t}selections(){return this._selections}hasTopLevelTypenameField(){return this._keyedSelections.has(o.typenameFieldName)}withoutTopLevelTypenameField(){if(!this.hasTopLevelTypenameField)return this;let e=new Map;for(let[t,r]of this._keyedSelections)t!==o.typenameFieldName&&e.set(t,r);return new E(this.parentType,e)}fieldsInSet(){let e=[];for(let t of this.selections())if("FieldSelection"===t.kind)e.push({path:[],field:t});else{let r=t.element.typeCondition,n=r?[`... on ${r}`]:[];for(let{path:r,field:i}of t.selectionSet.fieldsInSet())e.push({path:n.concat(r),field:i})}return e}fieldsByResponseName(){let e=new u.MultiMap;return this.collectFieldsByResponseName(e),e}collectFieldsByResponseName(e){for(let t of this.selections())"FieldSelection"===t.kind?e.add(t.element.responseName(),t):t.selectionSet.collectFieldsByResponseName(e)}usedVariables(){let e=new o.VariableCollector;return this.collectVariables(e),e.variables()}collectVariables(e){for(let t of this.selections())t.collectVariables(e)}collectUsedFragmentNames(e){for(let t of this.selections())t.collectUsedFragmentNames(e)}optimize(e){if(!e||e.isEmpty())return this;let t=new x(new m(this.parentType,this.parentType),this),r=D.ofInitial(F.build(this)),n=t.optimize(e,r);return n instanceof M?A(this.parentType,n):n.selectionSet}optimizeSelections(e,t){return this.lazyMap(r=>r.optimize(e,t))}expandFragments(e){return this.lazyMap(t=>t.expandFragments(e))}normalize({parentType:e,recursive:t}){return this.lazyMap(r=>r.normalize({parentType:e,recursive:t}),{parentType:e})}lazyMap(e,t){var r;let n;let i=this.selections();for(let t=0;t<i.length;t++){let r=i[t],o=e(r);if(o!==r&&!n){n=new O;for(let e=0;e<t;e++)n.add(i[e])}o&&n&&n.add(o)}return n?n.toSelectionSet(null!==(r=null==t?void 0:t.parentType)&&void 0!==r?r:this.parentType):this}withoutDefer(e){return this.lazyMap(t=>t.withoutDefer(e))}withNormalizedDefer(e){return this.lazyMap(t=>t.withNormalizedDefer(e))}hasDefer(){return this.selections().some(e=>e.hasDefer())}filter(e){return this.lazyMap(t=>e(t)?t:void 0)}filterRecursiveDepthFirst(e){return this.lazyMap(t=>t.filterRecursiveDepthFirst(e))}withoutEmptyBranches(){let e=this.filterRecursiveDepthFirst(e=>{var t;return(null===(t=e.selectionSet)||void 0===t?void 0:t.isEmpty())!==!0});return e.isEmpty()?void 0:e}rebaseOn({parentType:e,fragments:t,errorIfCannotRebase:r}){if(this.parentType===e)return this;let n=new Map;for(let i of this.selections()){let o=i.rebaseOn({parentType:e,fragments:t,errorIfCannotRebase:r});o&&n.set(i.key(),o)}return new E(e,n)}equals(e){if(this===e)return!0;if(this._selections.length!==e._selections.length)return!1;for(let[t,r]of this._keyedSelections){let n=e._keyedSelections.get(t);if(!n||!r.equals(n))return!1}return!0}contains(e,t){var r;let i=null!==(r=null==t?void 0:t.ignoreMissingTypename)&&void 0!==r&&r;if(e._selections.length>this._selections.length&&(!i||e._selections.length>this._selections.length+1||this.hasTopLevelTypenameField()||!e.hasTopLevelTypenameField()))return n.NOT_CONTAINED;let a=!0,s=!1;for(let[r,l]of e._keyedSelections){if(r===o.typenameFieldName&&i){this._keyedSelections.has(o.typenameFieldName)||(s=!0);continue}let e=this._keyedSelections.get(r),u=null==e?void 0:e.contains(l,t);if(void 0===u||u===n.NOT_CONTAINED)return n.NOT_CONTAINED;a&&(a=u===n.EQUAL)}return a&&e._selections.length===this._selections.length+(s?1:0)?n.EQUAL:n.STRICTLY_CONTAINED}containsTopLevelField(e){let t=this._keyedSelections.get(e.key());return!!t&&t.element.equals(e)}minus(e){let t=new O;for(let[r,n]of this._keyedSelections){let i=e._keyedSelections.get(r);if(i){let e=n.minus(i);e&&t.add(e)}else t.add(n)}return t.toSelectionSet(this.parentType)}intersectionWith(e){if(this.isEmpty())return this;if(e.isEmpty())return e;let t=new O;for(let[r,n]of this._keyedSelections){let i=e._keyedSelections.get(r);if(i){let e=n.intersectionWith(i);e&&t.add(e)}}return t.toSelectionSet(this.parentType)}canRebaseOn(e){return this.selections().every(t=>t.canAddTo(e))}validate(e,t=!1){for(let r of(d(!this.isEmpty(),()=>"Invalid empty selection set"),this.selections()))r.validate(e,t)}isEmpty(){return 0===this._selections.length}toSelectionSetNode(){return this.isEmpty()?{kind:i.Kind.SELECTION_SET,selections:[{kind:i.Kind.FIELD,name:{kind:i.Kind.NAME,value:"..."}}]}:{kind:i.Kind.SELECTION_SET,selections:Array.from(this.selectionsInPrintOrder(),e=>e.toSelectionNode())}}selectionsInPrintOrder(){let e=e=>"FieldSelection"===e.kind&&!e.element.alias&&e.element.name===o.typenameFieldName,t=this._selections.find(t=>e(t));return t?[t].concat(this.selections().filter(t=>!e(t))):this._selections}toOperationPaths(){return this.toOperationPathsInternal([])}toOperationPathsInternal(e){return this.selections().flatMap(t=>{let r=e.map(e=>e.concat(t.element));return t.selectionSet?t.selectionSet.toOperationPathsInternal(r):r})}forEachElement(e){var t;let r=this.selectionsInReverseOrder().concat();for(;r.length>0;){let n=r.pop();e(n.element),null===(t=n.selectionSet)||void 0===t||t.selectionsInReverseOrder().forEach(e=>r.push(e))}}some(e){for(let t of this.selections())if(e(t.element)||t.selectionSet&&t.selectionSet.some(e))return!0;return!1}toOperationString(e,t,r,n,i,a=!1,s=!0){let l=s?"":void 0,u=a||!r||r.isEmpty()?"":r.toString(l)+"\n\n";return"query"==e&&!n&&t.isEmpty()?u+this.toString(a,!0,l):u+e+(n?" "+(n+(t.isEmpty()?"":t.toString())):t.isEmpty()?"":" "+t.toString())+(0,o.directivesToString)(i)+" "+this.toString(a,!0,l)}toString(e=!0,t=!0,r){if(this.isEmpty())return"{}";if(void 0===r){let r=this.selections().map(t=>t.toString(e)).join(" ");return t?"{ "+r+" }":r}{let n=t?r+"  ":r,i=this.selections().map(t=>t.toString(e,n)).join("\n");return t?"{\n"+i+"\n"+r+"}":i}}isWorthUsing(){let e=this.selections();if(0===e.length)return!1;if(1===e.length){let t=e[0];return!("FieldSelection"===t.kind&&t.element.isLeafField())}return!0}}t.SelectionSet=E;class O{constructor(){this.keyedUpdates=new u.MultiMap}isEmpty(){return 0===this.keyedUpdates.size}add(e){return S(this.keyedUpdates,e),this}addAtPath(e,t){if(0===e.length)t&&S(this.keyedUpdates,t);else{if(1===e.length&&!t){let t=e[0];if("Field"===t.kind&&t.isLeafField()){let e=P(t);return this.keyedUpdates.add(e.key(),e),this}}this.keyedUpdates.add(e[0].key(),{path:e,selections:t})}return this}clone(){let e=new O;for(let[t,r]of this.keyedUpdates.entries())e.keyedUpdates.set(t,Array.from(r));return e}clear(){this.keyedUpdates.clear()}toSelectionSet(e,t){return function e(t,r,n){let i=new Map;for(let[a,s]of r.entries())i.set(a,function(t,r,n){(0,u.assert)(r.length>0,"Should not be called without any updates");let i=r[0];if(1===r.length&&i instanceof R)return i.rebaseOnOrError({parentType:t,fragments:n});let a=(i instanceof R?i.element:i.path[0]).rebaseOnOrError(t),s="Field"===a.kind?a.baseType():a.castedType();if(!(0,o.isCompositeType)(s))return P(a);let l=new u.MultiMap;for(let e of r)e instanceof R?e.selectionSet&&S(l,e.selectionSet):1===e.path.length?e.selections&&S(l,function e(t,r){if(r instanceof R)return"FragmentSelection"===r.kind&&I(t,r)?e(t,r.selectionSet):r;let n=r instanceof E?r.selections():r,i=[];for(let r of n)if("FragmentSelection"===r.kind&&I(t,r)){let n=e(t,r.selectionSet);if(n instanceof R)i.push(n);else for(let e of n)i.push(e)}else i.push(r);return i}(s,e.selections)):l.add(e.path[1].key(),{path:e.path.slice(1),selections:e.selections});return P(a,e(s,l,n))}(t,s,n));return new E(t,i)}(e,this.keyedUpdates,t)}toString(){return"{\n"+[...this.keyedUpdates.entries()].map(([e,t])=>{let r=t.map(e=>e instanceof R?e.toString():`${e.path} -> ${e.selections}`);return` - ${e}: ${r}`}).join("\n")+"\n}"}}function S(e,t){if(t instanceof R)w(e,t);else for(let r of t instanceof E?t.selections():t)w(e,r)}function w(e,t){t instanceof M?e.set(t.key(),[t]):e.add(t.key(),t)}function I(e,t){return 0===t.element.appliedDirectives.length&&(!t.element.typeCondition||(0,l.isSubtype)(function(e,t){if(e.schema()===t)return e;let r=t.type(e.name);return(0,u.assert)(r&&(0,o.isCompositeType)(r),()=>`Expected ${e} to exists and be composite in the rebased schema, but got ${null==r?void 0:r.kind}`),r}(t.element.typeCondition,e.schema()),e))}t.SelectionSetUpdates=O;class N{constructor(e,t,r){this.parentType=e,this._updates=t,this.memoizer=r}static empty(e){return this.emptyWithMemoized(e,()=>({}))}static emptyWithMemoized(e,t){return new N(e,new O,t)}static of(e){return this.ofWithMemoized(e,()=>({}))}static ofWithMemoized(e,t){let r=new N(e.parentType,new O,t);return r._updates.add(e),r.computed=e,r}isEmpty(){return this._updates.isEmpty()}get(){return this.computed||(this.computed=this._updates.toSelectionSet(this.parentType),this._updates.clear(),this._updates.add(this.computed)),this.computed}updates(){return this.computed=void 0,this._memoized=void 0,this._updates}clone(){let e=new N(this.parentType,this._updates.clone(),this.memoizer);return e.computed=this.computed,e._memoized=this._memoized,e}rebaseOn(e){let t=new N(e,new O,this.memoizer);return t._updates.add(this.get()),t}memoized(){return this._memoized||(this._memoized=this.memoizer(this.get())),this._memoized}toString(){return this.get().toString()}}function A(e,t){let r=new Map;return r.set(t.key(),t),new E(e,r)}function C(e,t){return A(e.parentType,P(e,t))}function P(e,t){return"Field"===e.kind?new j(e,t):new x(e,t)}t.MutableSelectionSet=N,t.allFieldDefinitionsInSelectionSet=function(e){let t=Array.from(e.selections()),r=[];for(;t.length>0;){let e=t.pop();"FieldSelection"===e.kind&&r.push(e.element.definition),e.selectionSet&&t.push(...e.selectionSet.selections())}return r},t.selectionSetOf=A,t.selectionSetOfElement=C,t.selectionOfElement=P;class R{constructor(e){this.element=e}rebaseOnOrError({parentType:e,fragments:t}){return this.rebaseOn({parentType:e,fragments:t,errorIfCannotRebase:!0})}get parentType(){return this.element.parentType}isTypenameField(){return!1}collectVariables(e){var t;this.element.collectVariables(e),null===(t=this.selectionSet)||void 0===t||t.collectVariables(e)}collectUsedFragmentNames(e){var t;null===(t=this.selectionSet)||void 0===t||t.collectUsedFragmentNames(e)}withUpdatedSelectionSet(e){return this.withUpdatedComponents(this.element,e)}withUpdatedElement(e){return this.withUpdatedComponents(e,this.selectionSet)}mapToSelectionSet(e){if(!this.selectionSet)return this.us();let t=e(this.selectionSet);return t===this.selectionSet?this.us():this.withUpdatedSelectionSet(t)}isFragmentSpread(){return!1}minus(e){if(this.selectionSet&&e.selectionSet){let t=this.selectionSet.minus(e.selectionSet);if(!t.isEmpty())return this.withUpdatedSelectionSet(t)}}intersectionWith(e){if(!this.selectionSet||!e.selectionSet)return this.us();{let t=this.selectionSet.intersectionWith(e.selectionSet);if(t.isEmpty())return;return this.withUpdatedSelectionSet(t)}}tryOptimizeSubselectionWithFragments({parentType:e,subSelection:t,fragments:r,validator:i,canUseFullMatchingFragment:o}){let a=r.maybeApplyingDirectlyAtType(e);if(0===a.length)return t;let s=[];for(let r of a){let a=r.expandedSelectionSetAtType(e);if(a.selectionSet.isEmpty()||1===a.selectionSet.selections().length&&a.selectionSet.selections()[0].isTypenameField())continue;let l=t.contains(a.selectionSet,{ignoreMissingTypename:!0});if(l===n.EQUAL){if(o(r)){if(!i.checkCanReuseFragmentAndTrackIt(a))continue;return r}0===r.appliedDirectives.length&&s.push({fragment:r,atType:a})}else l===n.STRICTLY_CONTAINED&&0===r.appliedDirectives.length&&s.push({fragment:r,atType:a})}if(0===s.length)return t;let l=s.filter(({fragment:e})=>!s.some(t=>t.fragment.includes(e.name))),u=t,c=new O;for(let{fragment:n,atType:o}of l){if(!i.checkCanReuseFragmentAndTrackIt(o))continue;let a=t.minus(o.selectionSet);u=u.intersectionWith(a),c.add(new M(e,r,n,[]))}return c.add(u).toSelectionSet(e,r)}}class D{constructor(e){this.validators=e}static ofInitial(e){return new D([e])}forField(e){let t=this.validators.flatMap(t=>t.forField(e));return(0,u.assert)(t.length>0,`Shoud have found at least one validator for ${e}`),new D(t)}checkCanReuseFragmentAndTrackIt(e){let t=e.validator;if(!t)return!0;if(!this.validators.every(e=>e.doMergeWith(t)))return!1;if(this.usedSpreadTrimmedPartAtLevel){if(!this.usedSpreadTrimmedPartAtLevel.every(e=>t.doMergeWith(e)))return!1}else this.usedSpreadTrimmedPartAtLevel=[];return this.usedSpreadTrimmedPartAtLevel.push(t),!0}}class F{constructor(e){this.byResponseName=e}static build(e){return F.forLevel(e.fieldsInSet())}static forLevel(e){var t;let r=new Map;for(let{field:n}of e){let e=n.element.responseName(),i=r.get(e);if(i||(i=new Map,r.set(e,i)),n.selectionSet){let e=null!==(t=i.get(n.element))&&void 0!==t?t:[];i.set(n.element,e.concat(n.selectionSet.fieldsInSet()))}else i.set(n.element,null)}let n=new Map;for(let[e,t]of r.entries()){let r=new Map;for(let[e,n]of t){let t=n?F.forLevel(n):null;r.set(e,t)}n.set(e,r)}return new F(n)}forField(e){let t=this.byResponseName.get(e.responseName());return t?(0,u.mapValues)(t).filter(e=>!!e):[]}doMergeWith(e){var t,r;for(let[n,i]of this.byResponseName.entries()){let a=e.byResponseName.get(n);if(a)for(let[e,n]of i.entries())for(let[i,s]of a.entries()){if(!(0,l.typesCanBeMerged)(e.definition.type,i.definition.type))return!1;let a=e.parentType,u=i.parentType;if(!(0,l.sameType)(a,u)&&(0,o.isObjectType)(a)&&(0,o.isObjectType)(u)){if(n&&s&&!n.hasSameResponseShapeThan(s))return!1}else if(e.name!==i.name||!(0,c.argumentsEquals)(null!==(t=e.args)&&void 0!==t?t:{},null!==(r=i.args)&&void 0!==r?r:{})||n&&s&&!n.doMergeWith(s))return!1}}return!0}hasSameResponseShapeThan(e){for(let[t,r]of this.byResponseName.entries()){let n=e.byResponseName.get(t);if(n){for(let[e,t]of r.entries())for(let[r,i]of n.entries())if(!(0,l.typesCanBeMerged)(e.definition.type,r.definition.type)||t&&i&&!t.hasSameResponseShapeThan(i))return!1}}return!0}toString(e=""){return"{\n"+[...this.byResponseName.entries()].map(([t,r])=>{let n=e+"  ";return`${n}${t}: [
`+[...r.entries()].map(([e,t])=>`${n}  ${e.parentType}.${e}${t?t.toString(n+"  "):""}`).join("\n")+`
${n}]`}).join("\n")+`
${e}}`}}class j extends R{constructor(e,t){super(e),this._selectionSet=t,this.kind="FieldSelection"}get selectionSet(){return this._selectionSet}us(){return this}isTypenameField(){return this.element.definition.name===o.typenameFieldName}withUpdatedComponents(e,t){return this.element===e&&this.selectionSet===t?this:new j(e,t)}key(){return this.element.key()}optimize(e,t){let r;let n=(0,o.baseType)(this.element.definition.type);if(!(0,o.isCompositeType)(n)||!this.selectionSet)return this;let i=t.forField(this.element),a=this.tryOptimizeSubselectionWithFragments({parentType:n,subSelection:this.selectionSet,fragments:e,validator:i,canUseFullMatchingFragment:e=>0===e.appliedDirectives.length});return r=(r=a instanceof b?A(n,new M(n,e,a,[])):a).optimizeSelections(e,i),this.selectionSet===r?this:this.withUpdatedSelectionSet(r)}filterRecursiveDepthFirst(e){if(!this.selectionSet)return e(this)?this:void 0;let t=this.selectionSet.filterRecursiveDepthFirst(e),r=this.selectionSet===t?this:new j(this.element,t);return e(r)?r:void 0}validate(e,t){var r;this.element.validate(e,t),d(this.element.isLeafField()||this.selectionSet&&!this.selectionSet.isEmpty(),()=>`Invalid empty selection set for field "${this.element.definition.coordinate}" of non-leaf type ${this.element.definition.type}`,this.element.definition.sourceAST),null===(r=this.selectionSet)||void 0===r||r.validate(e)}rebaseOn({parentType:e,fragments:t,errorIfCannotRebase:r}){if(this.element.parentType===e)return this;let n=this.element.rebaseOn({parentType:e,errorIfCannotRebase:r});if(!n)return;if(!this.selectionSet)return this.withUpdatedElement(n);let i=n.baseType();if(i===this.selectionSet.parentType)return this.withUpdatedElement(n);d((0,o.isCompositeType)(i),()=>`Cannot rebase field selection ${this} on ${e}: rebased field base return type ${i} is not composite`);let a=this.selectionSet.rebaseOn({parentType:i,fragments:t,errorIfCannotRebase:r});return a.isEmpty()?void 0:this.withUpdatedComponents(n,a)}canAddTo(e){if(this.element.parentType===e)return!0;let t=this.element.typeIfAddedTo(e);if(!t)return!1;let r=(0,o.baseType)(t);return!this.selectionSet||this.selectionSet.parentType===r||((0,u.assert)((0,o.isCompositeType)(r),()=>`${this.element} should have a selection set as it's type is not a composite`),this.selectionSet.selections().every(e=>e.canAddTo(r)))}toSelectionNode(){var e;let t=this.element.alias?{kind:i.Kind.NAME,value:this.element.alias}:void 0;return{kind:i.Kind.FIELD,name:{kind:i.Kind.NAME,value:this.element.name},alias:t,arguments:this.element.argumentsToNodes(),directives:this.element.appliedDirectivesToDirectiveNodes(),selectionSet:null===(e=this.selectionSet)||void 0===e?void 0:e.toSelectionSetNode()}}withoutDefer(e){return this.mapToSelectionSet(t=>t.withoutDefer(e))}withNormalizedDefer(e){return this.mapToSelectionSet(t=>t.withNormalizedDefer(e))}hasDefer(){var e;return!!(null===(e=this.selectionSet)||void 0===e?void 0:e.hasDefer())}normalize({parentType:e,recursive:t}){let r=e===this.parentType?this.element.definition:e.field(this.element.name);(0,u.assert)(r,`Cannot normalize ${this.element} at ${e} which does not have that field`);let n=this.element.definition===r?this.element:this.element.withUpdatedDefinition(r);if(!this.selectionSet)return this.withUpdatedElement(n);let i=n.baseType();(0,u.assert)((0,o.isCompositeType)(i),()=>`Field ${n} should not have a sub-selection`);let a=null==t||t?this.selectionSet.normalize({parentType:i}):this.selectionSet;return(null==a?void 0:a.isEmpty())?this.withUpdatedComponents(n,C(new y(i.typenameField(),void 0,[new o.Directive("include",{if:!1})]))):this.withUpdatedComponents(n,a)}expandFragments(e){return this.mapToSelectionSet(t=>t.expandFragments(e))}equals(e){return this===e||!!(e instanceof j&&this.element.equals(e.element))&&(this.selectionSet?!!e.selectionSet&&this.selectionSet.equals(e.selectionSet):!e.selectionSet)}contains(e,t){return e instanceof j&&this.element.equals(e.element)?this.selectionSet?((0,u.assert)(e.selectionSet,"`this` and `that` have the same element, so if one has sub-selection, the other one should too"),this.selectionSet.contains(e.selectionSet,t)):((0,u.assert)(!e.selectionSet,"`this` and `that` have the same element, so if one does not have a sub-selection, neither should the other one"),n.EQUAL):n.NOT_CONTAINED}toString(e=!0,t){return(null!=t?t:"")+this.element+(this.selectionSet?" "+this.selectionSet.toString(e,!0,t):"")}}t.FieldSelection=j;class L extends R{constructor(){super(...arguments),this.kind="FragmentSelection"}us(){return this}validateDeferAndStream(){if(this.element.hasDefer()||this.element.hasStream()){let e=this.element.schema().schemaDefinition,t=this.parentType;d(e.rootType("mutation")!==t&&e.rootType("subscription")!==t,()=>{var r;return`The @defer and @stream directives cannot be used on ${null===(r=e.roots().filter(e=>e.type===t).pop())||void 0===r?void 0:r.rootKind} root type "${t}"`})}}filterRecursiveDepthFirst(e){let t=this.selectionSet.filterRecursiveDepthFirst(e),r=t===this.selectionSet?this:new x(this.element,t);return e(r)?r:void 0}hasDefer(){return this.element.hasDefer()||this.selectionSet.hasDefer()}normalize({parentType:e,recursive:t}){let r=this.element.typeCondition;if(r&&e!==this.parentType){let t=(0,o.possibleRuntimeTypes)(r),n=(0,o.possibleRuntimeTypes)(e);if(!t.some(e=>n.includes(e)))return}return this.normalizeKnowingItIntersects({parentType:e,recursive:t})}}t.FragmentSelection=L;class x extends L{constructor(e,t){super(e),this._selectionSet=t}get selectionSet(){return this._selectionSet}key(){return this.element.key()}withUpdatedComponents(e,t){return e===this.element&&t===this.selectionSet?this:new x(e,t)}validate(e){this.validateDeferAndStream(),d(!this.selectionSet.isEmpty(),()=>`Invalid empty selection set for fragment "${this.element}"`),this.selectionSet.validate(e)}rebaseOn({parentType:e,fragments:t,errorIfCannotRebase:r}){if(this.parentType===e)return this;let n=this.element.rebaseOn({parentType:e,errorIfCannotRebase:r});if(!n)return;let i=n.castedType();if(i===this.selectionSet.parentType)return this.withUpdatedElement(n);let o=this.selectionSet.rebaseOn({parentType:i,fragments:t,errorIfCannotRebase:r});return o.isEmpty()?void 0:this.withUpdatedComponents(n,o)}canAddTo(e){if(this.element.parentType===e)return!0;let t=this.element.castedTypeIfAddedTo(e);return!!t&&(this.selectionSet.parentType===t||this.selectionSet.selections().every(e=>e.canAddTo(t)))}toSelectionNode(){let e=this.element.typeCondition;return{kind:i.Kind.INLINE_FRAGMENT,typeCondition:e?{kind:i.Kind.NAMED_TYPE,name:{kind:i.Kind.NAME,value:e.name}}:void 0,directives:this.element.appliedDirectivesToDirectiveNodes(),selectionSet:this.selectionSet.toSelectionSetNode()}}optimize(e,t){let r=this.selectionSet,n=this.element.typeCondition;if(n){let i=this.tryOptimizeSubselectionWithFragments({parentType:n,subSelection:r,fragments:e,validator:t,canUseFullMatchingFragment:e=>0===e.appliedDirectives.length||(0,l.sameType)(n,e.typeCondition)&&e.appliedDirectives.every(e=>this.element.appliedDirectives.some(t=>(0,o.sameDirectiveApplication)(e,t)))});if(i instanceof b){if((0,l.sameType)(n,i.typeCondition)){let t=this.element.appliedDirectives;return i.appliedDirectives&&(t=t.filter(e=>!i.appliedDirectives.some(t=>(0,o.sameDirectiveApplication)(t,e)))),new M(this.parentType,e,i,t)}r=A(n,new M(n,e,i,[]))}else r=i}return r=r.optimizeSelections(e,t),this.selectionSet===r?this:new x(this.element,r)}withoutDefer(e){let t=this.selectionSet.withoutDefer(e),r=this.element.deferDirectiveArgs(),n=r&&(!e||r.label&&e.has(r.label));if(t===this.selectionSet&&!n)return this;let i=n?this.element.withoutDefer():this.element;return i?this.withUpdatedComponents(i,t):t}withNormalizedDefer(e){let t=this.element.withNormalizedDefer(e),r=this.selectionSet.withNormalizedDefer(e);return t?t===this.element&&r===this.selectionSet?this:this.withUpdatedComponents(t,r):r}normalizeKnowingItIntersects({parentType:e,recursive:t}){var r;let n;let i=this.element.typeCondition;if(0===this.element.appliedDirectives.length&&(!i||e===this.element.typeCondition||(0,o.isObjectType)(e))){let r=this.selectionSet.normalize({parentType:e,recursive:t});return r.isEmpty()?void 0:r}if(null==t||t){if((n=this.selectionSet.normalize({parentType:null!=i?i:e})).isEmpty()){if(0===this.element.appliedDirectives.length)return;return this.withUpdatedComponents(this.element.rebaseOnOrError(e),C(new y((null!==(r=this.element.typeCondition)&&void 0!==r?r:e).typenameField(),void 0,[new o.Directive("include",{if:!1})])))}}else n=this.selectionSet;if(0===this.element.appliedDirectives.length&&(0,o.isAbstractType)(i)){(0,u.assert)(!(0,o.isObjectType)(e),()=>`Should not have got here if ${e} is an object type`);let t=(0,o.possibleRuntimeTypes)(e),r=[];for(let e of n.selections())"FragmentSelection"===e.kind&&e.element.typeCondition&&(0,o.isObjectType)(e.element.typeCondition)&&t.includes(e.element.typeCondition)&&r.push(e);if(r.length===n.selections().length)return n;if(r.length>0){let t=new O;return t.add(r),t.add(this.withUpdatedSelectionSet(n.filter(e=>!r.includes(e)))),t.toSelectionSet(e)}}return this.parentType===e&&this.selectionSet===n?this:this.withUpdatedComponents(this.element.rebaseOnOrError(e),n)}expandFragments(e){return this.mapToSelectionSet(t=>t.expandFragments(e))}equals(e){return this===e||e instanceof L&&this.element.equals(e.element)&&this.selectionSet.equals(e.selectionSet)}contains(e,t){return e instanceof L&&this.element.equals(e.element)?this.selectionSet.contains(e.selectionSet,t):n.NOT_CONTAINED}toString(e=!0,t){return(null!=t?t:"")+this.element+" "+this.selectionSet.toString(e,!0,t)}}class M extends L{constructor(e,t,r,n){super(new m(e,r.typeCondition,r.appliedDirectives.concat(n))),this.fragments=t,this.namedFragment=r,this.spreadDirectives=n}isFragmentSpread(){return!0}get selectionSet(){return this.namedFragment.selectionSet}key(){return this.computedKey||(this.computedKey="..."+this.namedFragment.name+(0,o.directivesToString)(this.spreadDirectives)),this.computedKey}withUpdatedComponents(e,t){(0,u.assert)(!1,"Unsupported")}normalizeKnowingItIntersects({parentType:e}){return(0,u.assert)(e.schema()===this.parentType.schema(),"Should not try to normalize using a type from another schema"),this.rebaseOnOrError({parentType:e,fragments:this.fragments})}validate(){this.validateDeferAndStream(),d((0,o.runtimeTypesIntersects)(this.parentType,this.namedFragment.typeCondition),()=>`Fragment "${this.namedFragment.name}" cannot be spread inside type ${this.parentType} as the runtime types do not intersect ${this.namedFragment.typeCondition}`)}toSelectionNode(){let e=(0,o.directivesToDirectiveNodes)(this.spreadDirectives);return{kind:i.Kind.FRAGMENT_SPREAD,name:{kind:i.Kind.NAME,value:this.namedFragment.name},directives:e}}optimize(e,t){return this}rebaseOn({parentType:e,fragments:t,errorIfCannotRebase:r}){if(this.parentType===e)return this;let n=this.parentType.schema()===e.schema();(0,u.assert)(t||n,"Must provide fragments is rebasing on other schema");let i=null!=t?t:this.fragments,a=i.get(this.namedFragment.name);if(!a){d(!r,()=>`Cannot rebase ${this.toString(!1)} if it isn't part of the provided fragments`);return}if(!n&&!(0,o.runtimeTypesIntersects)(e,a.typeCondition)){let n=this.namedFragment.selectionSet.rebaseOn({parentType:e,fragments:t,errorIfCannotRebase:r});return n.isEmpty()?void 0:new x(new m(e),n)}return new M(e,i,a,this.spreadDirectives)}canAddTo(e){return!0}expandFragments(e){if(null==e?void 0:e.has(this.namedFragment.name))return this;let t=this.selectionSet.expandFragments(e);return(0,l.sameType)(this.parentType,this.namedFragment.typeCondition)&&0===this.element.appliedDirectives.length?t.selections():new x(this.element,t)}collectUsedFragmentNames(e){let t=e.get(this.namedFragment.name);e.set(this.namedFragment.name,void 0===t?1:t+1)}withoutDefer(e){(0,u.assert)(!1,"Unsupported, see `Operation.withAllDeferLabelled`")}withNormalizedDefer(e){(0,u.assert)(!1,"Unsupported, see `Operation.withAllDeferLabelled`")}minus(e){(0,u.assert)(this.equals(e),()=>`Invalid operation for ${this.toString(!1)} and ${e.toString(!1)}`)}equals(e){return this===e||e instanceof M&&this.namedFragment.name===e.namedFragment.name&&(0,o.sameDirectiveApplications)(this.spreadDirectives,e.spreadDirectives)}contains(e,t){return this.equals(e)?n.EQUAL:e instanceof L&&this.element.equals(e.element)?this.selectionSet.contains(e.selectionSet,t):n.NOT_CONTAINED}toString(e=!0,t){return e?(null!=t?t:"")+this.element+" "+this.selectionSet.toString(!0,!0,t):(null!=t?t:"")+"..."+this.namedFragment.name+(0,o.directivesToString)(this.spreadDirectives)}}function k(e,t,r,n,i=(e,t)=>e.field(t)){if(1===t.selections.length)return A(e,U(e,t.selections[0],r,n,i));let o=new O;for(let a of t.selections)o.add(U(e,a,r,n,i));return o.toSelectionSet(e,n)}function $(e,t){var r;return null!==(r=null==t?void 0:t.map(t=>(function(e,t){let r=e.directive(t.name.value);return d(r,()=>`Unknown directive "@${t.name.value}"`),new o.Directive(r.name,(0,c.argumentsFromAST)(r.coordinate,t.arguments,r))})(e,t)))&&void 0!==r?r:[]}function U(e,t,r,n,a=(e,t)=>e.field(t)){var s,l;let u;let p=$(e.schema(),t.directives);switch(t.kind){case i.Kind.FIELD:let f=a(e,t.name.value);d(f,()=>`Cannot query field "${t.name.value}" on type "${e}".`,e.sourceAST);let h=(0,o.baseType)(f.type),v=t.selectionSet?k(h,t.selectionSet,r,n,a):void 0;u=new j(new y(f,(0,c.argumentsFromAST)(f.coordinate,t.arguments,f),p,null===(s=t.alias)||void 0===s?void 0:s.value),v);break;case i.Kind.INLINE_FRAGMENT:let g=new m(e,null===(l=t.typeCondition)||void 0===l?void 0:l.name.value,p);u=new x(g,k(g.typeCondition?g.typeCondition:g.parentType,t.selectionSet,r,n,a));break;case i.Kind.FRAGMENT_SPREAD:let b=t.name.value;d(n,()=>`Cannot find fragment name "${b}" (no fragments were provided)`);let _=n.get(b);d(_,()=>`Cannot find fragment name "${b}" (provided fragments are: [${n.names().join(", ")}])`),u=new M(e,n,_,p)}return u}function V(e,t,r){let n,a;let l=null==r?void 0:r.operationName,u=new _;t.definitions.forEach(t=>{switch(t.kind){case i.Kind.OPERATION_DEFINITION:d(!n||l,()=>"Must provide operation name if query contains multiple operations."),(!l||t.name&&t.name.value===l)&&(n=t,a=$(e,t.directives));break;case i.Kind.FRAGMENT_DEFINITION:let r=t.name.value,c=t.typeCondition.name.value,p=e.type(c);if(!p)throw s.ERRORS.INVALID_GRAPHQL.err(`Unknown type "${c}" for fragment "${r}"`,{nodes:t});if(!(0,o.isCompositeType)(p))throw s.ERRORS.INVALID_GRAPHQL.err(`Invalid fragment "${r}" on non-composite type "${c}"`,{nodes:t});u.add(new b(e,r,p,$(e,t.directives)))}}),d(n,()=>l?`Unknown operation named "${l}"`:"No operation found in provided document.");let c=n.variableDefinitions?(0,o.variableDefinitionsFromAST)(e,n.variableDefinitions):new o.VariableDefinitions;return t.definitions.forEach(e=>{if(e.kind===i.Kind.FRAGMENT_DEFINITION){let t=u.get(e.name.value);t.setSelectionSet(k(t.typeCondition,e.selectionSet,c,u))}}),u.validate(c),function({schema:e,operation:t,operation_directives:r,variableDefinitions:n,fragments:i,validateInput:o}){var a;let s=e.schemaDefinition.root(t.operation);d(s,()=>`The schema has no "${t.operation}" root type defined`);let l=i.isEmpty()?void 0:i;return new g(e,t.operation,G({parentType:s.type,source:t.selectionSet,variableDefinitions:n,fragments:l,validate:o}),n,l,null===(a=t.name)||void 0===a?void 0:a.value,r)}({schema:e,operation:n,operation_directives:a,variableDefinitions:c,fragments:u,validateInput:null==r?void 0:r.validate})}function G({parentType:e,source:t,variableDefinitions:r=new o.VariableDefinitions,fragments:n,fieldAccessor:i,validate:a=!0}){let s=k(e,"string"==typeof t?q(t.trim().startsWith("{")?t:`{${t}}`).selectionSet:t,null!=r?r:new o.VariableDefinitions,n,i);return a&&s.validate(r),s}function q(e){let t=(0,i.parse)(e);d(1===t.definitions.length,()=>"Selections should contain a single definitions, found "+t.definitions.length);let r=t.definitions[0];return d(r.kind===i.Kind.OPERATION_DEFINITION,()=>"Expected an operation definition but got a "+r.kind),r}t.operationFromDocument=V,t.parseOperation=function(e,t,r){return V(e,(0,i.parse)(t),r)},t.parseSelectionSet=G,t.parseOperationAST=q,t.operationToDocument=function(e){var t;let r={kind:i.Kind.OPERATION_DEFINITION,operation:e.rootKind,name:e.name?{kind:i.Kind.NAME,value:e.name}:void 0,selectionSet:e.selectionSet.toSelectionSetNode(),variableDefinitions:e.variableDefinitions.toVariableDefinitionNodes(),directives:(0,o.directivesToDirectiveNodes)(e.appliedDirectives)},n=e.fragments?null===(t=e.fragments)||void 0===t?void 0:t.toFragmentDefinitionNodes():[];return{kind:i.Kind.DOCUMENT,definitions:[r].concat(n)}},t.hasSelectionWithPredicate=function e(t,r){for(let n of t.selections())if(r(n)||n.selectionSet&&e(n.selectionSet,r))return!0;return!1}},70389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeShareables=void 0;let n=r(70854);t.computeShareables=function(e){let t=(0,n.federationMetadata)(e);(0,n.assert)(t,"Schema should be a federation subgraph");let r=t.keyDirective(),i=t.providesDirective(),o=t.isFed2Schema()?t.shareableDirective():void 0,a=new Set,s=e=>{for(let t of e.appliedDirectivesOf(r))(0,n.collectTargetFields)({parentType:e,directive:t,includeInterfaceFieldsImplementations:!0,validate:!1}).forEach(e=>a.add(e.coordinate))};for(let r of e.objectTypes()){s(r);let e=o?r.appliedDirectivesOf(o):[];for(let s of r.fields())for(let r of((o&&s.hasAppliedDirective(o)||e.length>0&&e.some(e=>s.ofExtension()===e.ofExtension()))&&a.add(s.coordinate),s.appliedDirectivesOf(i))){let e=(0,n.baseType)(s.type);(0,n.isCompositeType)(e)&&(0,n.collectTargetFields)({parentType:e,directive:r,includeInterfaceFieldsImplementations:!0,validate:!1}).forEach(e=>{t.isFieldExternal(e)&&a.add(e.coordinate)})}}for(let t of e.interfaceTypes())s(t);return e=>a.has(e.coordinate)}},41388:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printDirectiveDefinition=t.printTypeDefinitionAndExtensions=t.printType=t.printSchema=t.shallowOrderPrintedDefinitions=t.orderPrintedDefinitions=t.defaultPrintOptions=void 0;let n=r(4749),i=r(24056);function o(e,t,r){return(t.mergeTypesAndExtensions?[void 0]:[null,...e.extensions()]).map(n=>r(e,t,n)).filter(e=>void 0!==e)}function a(e){return e?"extend ":""}function s(e,t){return void 0===t?e:e.filter(e=>{var r;return(null!==(r=e.ofExtension())&&void 0!==r?r:null)===t})}function l(e,t,r){let n=s(e.appliedDirectives,r);return t.directiveApplicationFilter&&(n=n.filter(t.directiveApplicationFilter)),n}function u(e,t,r){var n;let i=s(e.roots(),r),o=l(e,t,r);if(!i.length&&!o.length||!r&&!o.length&&!(n=e).description&&n.roots().every(e=>e.isDefaultRootName()))return;let u=i.concat().sort((e,r)=>t.rootTypesOrder.indexOf(e.rootKind)-t.rootTypesOrder.indexOf(r.rootKind)).map(e=>`${t.indentString}${e.rootKind}: ${e.type}`);return f(e,t,r)+a(r)+"schema"+d(o,t,!0,0!==u.length)+(0===o.length?" ":"")+(0===u.length?"":"{\n"+u.join("\n")+"\n}")}function c(e,r=t.defaultPrintOptions){switch(e.kind){case"ScalarType":return o(e,r,h);case"ObjectType":return o(e,r,(e,t,r)=>y("type",e,t,r));case"InterfaceType":return o(e,r,(e,t,r)=>y("interface",e,t,r));case"UnionType":return o(e,r,m);case"EnumType":return o(e,r,v);case"InputObjectType":return o(e,r,g)}}function p(e,r=t.defaultPrintOptions){let n=e.locations.join(" | ");return`${f(e,r,null)}directive ${e}${_(e.arguments(),r)}${e.repeatable?" repeatable":""} on ${n}`}function d(e,t,r=!1,n=r){if(0==e.length)return"";let i=r?"\n"+t.indentString:" ",o=e.map(e=>e.toString()).join(i);return r?"\n"+t.indentString+o+(n?"\n":""):" "+o}function f(e,t,r,n="",i=!0){if(r||void 0===e.description||t.noDescriptions)return"";let o=e.description.length>70;return(n&&!i?"\n"+n:n)+(function(e,t="",r=!1){let n=-1===e.indexOf("\n"),i=" "===e[0]||"	"===e[0],o='"'===e[e.length-1],a="\\"===e[e.length-1],s=!n||o||a||r,l="";return s&&!(n&&i)&&(l+="\n"+t),l+=t?e.replace(/\n/g,"\n"+t):e,s&&(l+="\n"),'"""'+l.replace(/"""/g,'\\"""')+'"""'})(e.description,"",o).replace(/\n/g,"\n"+n)+"\n"}function h(e,t,r){let n=l(e,t,r);if(!r||n.length)return`${f(e,t,r)}${a(r)}scalar ${e.name}${d(n,t,!0,!1)}`}function y(e,t,r,n){var i;let o=l(t,r,n),u=s(t.interfaceImplementations(),n),c=s(t.fields(),n);if(r.fieldFilter&&(c=c.filter(r.fieldFilter)),o.length||u.length||c.length||!n&&t.preserveEmptyDefinition)return r.implementedInterfaceCompareFn&&(u=u.concat().sort(r.implementedInterfaceCompareFn)),r.fieldCompareFn&&(c=c.concat().sort(r.fieldCompareFn)),f(t,r,n)+a(n)+e+" "+t+((i=u).length?" implements "+i.map(e=>e.interface.name).join(" & "):"")+d(o,r,!0,c.length>0)+(0===o.length&&c.length>0?" ":"")+b(c,r)}function m(e,t,r){let n=l(e,t,r),i=s(e.members(),r);if(!n.length&&!i.length&&(r||!e.preserveEmptyDefinition))return;t.unionMemberCompareFn&&(i=i.concat().sort(t.unionMemberCompareFn));let o=i.length?" = "+i.map(e=>e.type).join(" | "):"";return f(e,t,r)+a(r)+"union "+e+d(n,t,!0,i.length>0)+o}function v(e,t,r){let n=l(e,t,r),i=s(e.values,r);if(!n.length&&!i.length&&(r||!e.preserveEmptyDefinition))return;t.enumValueCompareFn&&(i=i.concat().sort(t.enumValueCompareFn));let o=i.map((e,n)=>f(e,t,r,t.indentString,!n)+t.indentString+e+d(e.appliedDirectives,t));return f(e,t,r)+a(r)+"enum "+e+d(n,t,!0,o.length>0)+(0===n.length&&o.length>0?" ":"")+E(o)}function g(e,t,r){let n=l(e,t,r),i=s(e.fields(),r);if(n.length||i.length||!r&&e.preserveEmptyDefinition)return t.inputObjectFieldCompareFn&&(i=i.concat().sort(t.inputObjectFieldCompareFn)),f(e,t,r)+a(r)+"input "+e+d(n,t,!0,i.length>0)+(0===n.length&&i.length>0?" ":"")+b(i,t)}function b(e,t){return E(e.map((e,r)=>f(e,t,void 0,t.indentString,!r)+t.indentString+function(e,t){let r="FieldDefinition"==e.kind?_(e.arguments(),t,t.indentString):"",n="InputFieldDefinition"===e.kind&&void 0!==e.defaultValue?" = "+(0,i.valueToString)(e.defaultValue,e.type):"";return`${e.name}${r}: ${e.type}${n}`}(e,t)+d(l(e,t),t)))}function _(e,t,r=""){if(0===e.length)return"";if(e.every(e=>!e.description))return"("+e.map(e=>T(e,t)).join(", ")+")";let n=e.map((e,n)=>f(e,t,null,"  "+r,!n)+"  "+r+T(e,t)).join("\n");return`(
${n}
${r})`}function T(e,t){return`${e}${d(l(e,t),t)}`}function E(e){return 0!==e.length?"{\n"+e.join("\n")+"\n}":""}t.defaultPrintOptions={indentString:"  ",definitionsOrder:["schema","directives","types"],rootTypesOrder:["query","mutation","subscription"],mergeTypesAndExtensions:!1,showAllBuiltIns:!1,noDescriptions:!1,typeFilter:()=>!0,fieldFilter:()=>!0,directiveApplicationFilter:()=>!0},t.orderPrintedDefinitions=function(e){return{...e,typeCompareFn:(e,t)=>e.name.localeCompare(t.name),implementedInterfaceCompareFn:(e,t)=>e.interface.name.localeCompare(t.interface.name),fieldCompareFn:(e,t)=>e.name.localeCompare(t.name),unionMemberCompareFn:(e,t)=>e.type.name.localeCompare(t.type.name),enumValueCompareFn:(e,t)=>e.name.localeCompare(t.name),inputObjectFieldCompareFn:(e,t)=>e.name.localeCompare(t.name),directiveCompareFn:(e,t)=>e.name.localeCompare(t.name)}},t.shallowOrderPrintedDefinitions=function(e){return{...e,typeCompareFn:(e,t)=>e.name.localeCompare(t.name),directiveCompareFn:(e,t)=>e.name.localeCompare(t.name)}},t.printSchema=function(e,r=t.defaultPrintOptions){!function(e){if(!(3===e.definitionsOrder.length&&e.definitionsOrder.indexOf("schema")>=0&&e.definitionsOrder.indexOf("types")>=0&&e.definitionsOrder.indexOf("directives")>=0))throw Error(`'definitionsOrder' should be a 3-element array containing 'schema', 'types' and 'directives' in the desired order (got: [${e.definitionsOrder.join(", ")}])`)}(r);let n=r.showAllBuiltIns?e.allDirectives():e.directives();r.directiveDefinitionFilter&&(n=n.filter(r.directiveDefinitionFilter)),r.directiveCompareFn&&(n=n.concat().sort(r.directiveCompareFn));let i=r.showAllBuiltIns?e.allTypes():e.types();r.typeFilter&&(i=i.filter(r.typeFilter)),r.typeCompareFn&&(i=i.concat().sort(r.typeCompareFn));let a=[,,,];return a[r.definitionsOrder.indexOf("schema")]=o(e.schemaDefinition,r,u),a[r.definitionsOrder.indexOf("directives")]=n.map(e=>p(e,r)),a[r.definitionsOrder.indexOf("types")]=i.flatMap(e=>c(e,r)),a.flat().join("\n\n")},t.printType=function(e,r=t.defaultPrintOptions){let i=c(e,r);return(0,n.assert)(1==i.length,`Type ${e} is built from more than 1 definition or extension`),i[0]},t.printTypeDefinitionAndExtensions=c,t.printDirectiveDefinition=p},32959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.upgradeSubgraphsIfNecessary=t.RemovedTagOnExternal=t.FieldsArgumentCoercionToString=t.ProvidesOnNonCompositeRemoval=t.ProvidesOrRequiresOnInterfaceFieldRemoval=t.KeyOnInterfaceRemoval=t.ShareableTypeAddition=t.ShareableFieldAddition=t.InactiveProvidesOrRequiresFieldsRemoval=t.InactiveProvidesOrRequiresRemoval=t.TypeWithOnlyUnusedExternalRemoval=t.UnusedExternalRemoval=t.ExternalOnObjectTypeRemoval=t.ExternalOnInterfaceRemoval=t.TypeExtensionRemoval=t.ExternalOnTypeExtensionRemoval=void 0;let n=r(57343),i=r(74533),o=r(48170),a=r(27239),s=r(4749),l=r(24056),u=r(39862);class c{constructor(e){this.field=e,this.id="EXTERNAL_ON_TYPE_EXTENSION_REMOVAL"}toString(){return`Removed @external from field "${this.field}" as it is a key of an extension type`}}t.ExternalOnTypeExtensionRemoval=c;class p{constructor(e){this.type=e,this.id="TYPE_EXTENSION_REMOVAL"}toString(){return`Switched type "${this.type}" from an extension to a definition`}}t.TypeExtensionRemoval=p;class d{constructor(e){this.field=e,this.id="EXTERNAL_ON_INTERFACE_REMOVAL"}toString(){return`Removed @external directive on interface type field "${this.field}": @external is nonsensical on interface fields`}}t.ExternalOnInterfaceRemoval=d;class f{constructor(e){this.type=e,this.id="EXTERNAL_ON_OBJECT_TYPE_REMOVAL"}toString(){return`Removed @external directive on object type "${this.type}": @external on types was not rejected but was inactive in fed1`}}t.ExternalOnObjectTypeRemoval=f;class h{constructor(e){this.field=e,this.id="UNUSED_EXTERNAL_REMOVAL"}toString(){return`Removed @external field "${this.field}" as it was not used in any @key, @provides or @requires`}}t.UnusedExternalRemoval=h;class y{constructor(e){this.type=e,this.id="TYPE_WITH_ONLY_UNUSED_EXTERNAL_REMOVAL"}toString(){return`Removed type ${this.type} that is not referenced in the schema and only declares unused @external fields`}}t.TypeWithOnlyUnusedExternalRemoval=y;class m{constructor(e,t){this.parent=e,this.removed=t,this.id="INACTIVE_PROVIDES_OR_REQUIRES_REMOVAL"}toString(){return`Removed directive ${this.removed} on "${this.parent}": none of the fields were truly @external`}}t.InactiveProvidesOrRequiresRemoval=m;class v{constructor(e,t,r){this.parent=e,this.original=t,this.updated=r,this.id="INACTIVE_PROVIDES_OR_REQUIRES_FIELDS_REMOVAL"}toString(){return`Updated directive ${this.original} on "${this.parent}" to ${this.updated}: removed fields that were not truly @external`}}t.InactiveProvidesOrRequiresFieldsRemoval=v;class g{constructor(e,t){this.field=e,this.declaringSubgraphs=t,this.id="SHAREABLE_FIELD_ADDITION"}toString(){return`Added @shareable to field "${this.field}": it is also resolved by ${(0,a.printSubgraphNames)(this.declaringSubgraphs)}`}}t.ShareableFieldAddition=g;class b{constructor(e,t){this.type=e,this.declaringSubgraphs=t,this.id="SHAREABLE_TYPE_ADDITION"}toString(){return`Added @shareable to type "${this.type}": it is a "value type" and is also declared in ${(0,a.printSubgraphNames)(this.declaringSubgraphs)}`}}t.ShareableTypeAddition=b;class _{constructor(e){this.type=e,this.id="KEY_ON_INTERFACE_REMOVAL"}toString(){return`Removed @key on interface "${this.type}": while allowed by federation 0.x, @key on interfaces were completely ignored/had no effect`}}t.KeyOnInterfaceRemoval=_;class T{constructor(e,t){this.field=e,this.directive=t,this.id="PROVIDES_OR_REQUIRES_ON_INTERFACE_FIELD_REMOVAL"}toString(){return`Removed @${this.directive} on interface field "${this.field}": while allowed by federation 0.x, @${this.directive} on interface fields were completely ignored/had no effect`}}t.ProvidesOrRequiresOnInterfaceFieldRemoval=T;class E{constructor(e,t){this.field=e,this.type=t,this.id="PROVIDES_ON_NON_COMPOSITE_REMOVAL"}toString(){return`Removed @provides directive on field "${this.field}" as it is of non-composite type "${this.type}": while not rejected by federation 0.x, such @provide is nonsensical and was ignored`}}t.ProvidesOnNonCompositeRemoval=E;class O{constructor(e,t,r,n){this.element=e,this.directive=t,this.before=r,this.after=n,this.id="FIELDS_ARGUMENT_COERCION_TO_STRING"}toString(){return`Coerced "fields" argument for directive @${this.directive} for "${this.element}" into a string: coerced from ${this.before} to ${this.after}`}}t.FieldsArgumentCoercionToString=O;class S{constructor(e,t){this.application=e,this.element=t,this.id="REMOVED_TAG_ON_EXTERNAL"}toString(){return`Removed ${this.application} application on @external "${this.element}" as the @tag application is on another definition`}}function w(e){let t=(0,a.federationMetadata)(e.schema());(0,s.assert)(t,"Should be a subgraph schema");let r=e.hasAppliedDirective(t.extendsDirective());return(e.hasExtensionElements()||r)&&((0,o.isObjectType)(e)||(0,o.isInterfaceType)(e))&&(r||!e.hasNonExtensionElements())}function I(e){let t=(0,a.federationMetadata)(e.schema());return(0,s.assert)(t,"Should be a subgraph schema"),(0,o.isObjectType)(e)&&e.isRootType()&&(e.hasAppliedDirective(t.extendsDirective())||e.hasExtensionElements()&&!e.hasNonExtensionElements())}t.RemovedTagOnExternal=S,t.upgradeSubgraphsIfNecessary=function(e){let t=new Map;if(e.values().every(e=>e.isFed2Subgraph()))return{subgraphs:e,changes:t};let r=new a.Subgraphs,n=[],o=[],s=new Map;for(let t of e.values()){for(let e of t.schema.objectTypes()){let r=s.get(e.name);r||(r=new Map,s.set(e.name,r)),r.set(t.name,[e,t.metadata()])}for(let e of t.schema.interfaceTypes()){let r=s.get(e.name);r||(r=new Map,s.set(e.name,r)),r.set(t.name,[e,t.metadata()])}}for(let i of e.values())if(i.isFed2Subgraph())r.add(i),i.metadata().interfaceObjectDirective().applications().size>0&&o.push(i.name);else{let o=new N(i,e.values(),s).upgrade();o.errors?n=n.concat(o.errors):(r.add(o.upgraded),t.set(i.name,o.changes))}if(0===n.length&&o.length>0){let t=e.values().filter(e=>!e.isFed2Subgraph()).map(e=>e.name);n=[i.ERRORS.INTERFACE_OBJECT_USAGE_ERROR.err(`The @interfaceObject directive can only be used if all subgraphs have federation 2 subgraph schema (schema with a \`@link\` to "https://specs.apollo.dev/federation" version 2.0 or newer): @interfaceObject is used in ${(0,a.printSubgraphNames)(o)} but ${(0,a.printSubgraphNames)(t)} ${t.length>1?"are not":"is not a"} federation 2 subgraph schema.`)]}return 0===n.length?{subgraphs:r,changes:t}:{errors:n}};class N{constructor(e,t,r){this.originalSubgraph=e,this.allSubgraphs=t,this.objectTypeMap=r,this.changes=new s.MultiMap,this.errors=[],this.schema=e.schema.clone(),this.renameFederationTypes(),this.subgraph=new a.Subgraph(e.name,e.url,this.schema);try{(0,a.setSchemaAsFed2Subgraph)(this.schema)}catch(t){let e=(0,i.errorCauses)(t);if(e)e.forEach(e=>this.addError(e));else throw t}this.metadata=this.subgraph.metadata()}addError(e){this.errors.push((0,a.addSubgraphToError)(e,this.subgraph.name,i.ERRORS.INVALID_GRAPHQL))}renameFederationTypes(){for(let e of u.FEDERATION1_TYPES){let t=this.originalSubgraph.metadata().federationTypeNameInSchema(e.name),r=this.schema.type(t);r&&r.rename(`federation__${e.name}`)}}external(e){let t=e.appliedDirectivesOf(this.metadata.externalDirective());return 0===t.length?void 0:t[0]}addChange(e){this.changes.add(e.id,e)}checkForExtensionWithNoBase(e){var t;if(I(e)||!w(e))return;let r=null===(t=(0,s.firstOf)(e.extensions().values()))||void 0===t?void 0:t.sourceAST,n=Array.from(this.objectTypeMap.get(e.name).entries()).filter(([e,t])=>e!==this.subgraph.name);for(let e=0;e<n.length;e+=1){let t=n[e][1][0];if(t&&t.hasNonExtensionElements())return}this.addError(i.ERRORS.EXTENSION_WITH_NO_BASE.err(`Type "${e}" is an extension type, but there is no type definition for "${e}" in any subgraph.`,{nodes:r}))}preUpgradeValidations(){for(let e of this.schema.types())this.checkForExtensionWithNoBase(e)}upgrade(){if(this.preUpgradeValidations(),this.fixFederationDirectivesArguments(),this.removeExternalOnInterface(),this.removeExternalOnObjectTypes(),this.removeExternalOnTypeExtensions(),this.fixInactiveProvidesAndRequires(),this.removeTypeExtensions(),this.removeDirectivesOnInterface(),this.removeProvidesOnNonComposite(),this.removeUnusedExternals(),this.addShareable(),this.removeTagOnExternal(),this.errors.length>0)return{errors:this.errors};try{return this.subgraph.validate(),{upgraded:this.subgraph,changes:this.changes}}catch(t){let e=(0,i.errorCauses)(t);if(!e)throw t;return{errors:e}}}fixFederationDirectivesArguments(){var e;for(let t of[this.metadata.keyDirective(),this.metadata.requiresDirective(),this.metadata.providesDirective()])for(let r of Array.from(t.applications())){let i=r.arguments().fields;if("string"!=typeof i){Array.isArray(i)&&i.every(e=>"string"==typeof e)&&this.replaceFederationDirectiveApplication(r,r.toString(),i.join(" "),t.sourceAST);continue}let o=r.sourceAST;if(o&&"Directive"===o.kind){for(let t of null!==(e=o.arguments)&&void 0!==e?e:[])if("fields"===t.name.value&&t.value.kind===n.Kind.ENUM){this.replaceFederationDirectiveApplication(r,(0,n.print)(o),i,{...o,arguments:[{...t,value:{kind:n.Kind.STRING,value:i}}]});break}}}}removeExternalOnInterface(){for(let e of this.schema.interfaceTypes())for(let t of e.fields()){let e=this.external(t);e&&(this.addChange(new d(t.coordinate)),e.remove())}}removeExternalOnObjectTypes(){for(let e of this.schema.objectTypes()){let t=e.appliedDirectivesOf(this.metadata.externalDirective())[0];t&&(this.addChange(new f(e.coordinate)),t.remove())}}replaceFederationDirectiveApplication(e,t,r,n){let i=e.definition,o=e.parent;e.remove();let a=o.applyDirective(i,{fields:r});a.sourceAST=n,this.addChange(new O(o.coordinate,i.name,t,a.toString()))}fixInactiveProvidesAndRequires(){(0,a.removeInactiveProvidesAndRequires)(this.schema,(e,t,r)=>{r?this.addChange(new v(e.coordinate,t.toString(),r.toString())):this.addChange(new m(e.coordinate,t.toString()))})}removeExternalOnTypeExtensions(){for(let e of this.schema.types())if((0,o.isCompositeType)(e)&&(w(e)||I(e))){if(e.appliedDirectivesOf(this.metadata.keyDirective()).length>0)for(let t of e.appliedDirectivesOf(this.metadata.keyDirective()))(0,a.collectTargetFields)({parentType:e,directive:t,includeInterfaceFieldsImplementations:!1,validate:!1}).forEach(t=>{if(t.parent!==e)return;let r=this.external(t);r&&(this.addChange(new c(t.coordinate)),r.remove())});else for(let[t,r]of Array.from(this.objectTypeMap.get(e.name).entries()).filter(([e,t])=>e!==this.subgraph.name)){let[n,i]=r;(0,s.assert)((0,o.isCompositeType)(n),()=>`Type ${e} is of kind ${e.kind} in ${this.subgraph.name} but ${n.kind} in ${t}`);let l=n.appliedDirectivesOf(i.keyDirective());0!==l.length&&(0,a.collectTargetFields)({parentType:n,directive:l[0],includeInterfaceFieldsImplementations:!1,validate:!1}).forEach(t=>{if(t.parent!==n)return;let r=e.field(t.name);if(!r)return;let i=this.external(r);i&&(this.addChange(new c(r.coordinate)),i.remove())})}}}removeTypeExtensions(){for(let e of this.schema.types())(w(e)||I(e))&&(this.addChange(new p(e.coordinate)),e.removeExtensions())}removeUnusedExternals(){for(let e of this.schema.types())if((0,o.isObjectType)(e)||(0,o.isInterfaceType)(e)){for(let t of e.fields())this.metadata.isFieldExternal(t)&&!this.metadata.isFieldUsed(t)&&(this.addChange(new h(t.coordinate)),t.remove());e.hasFields()||(e.isReferenced()?this.addError(i.ERRORS.TYPE_WITH_ONLY_UNUSED_EXTERNAL.err(`Type ${e} contains only external fields and all those fields are all unused (they do not appear in any @key, @provides or @requires).`,{nodes:e.sourceAST})):(this.addChange(new y(e.name)),e.remove()))}}removeDirectivesOnInterface(){for(let e of this.schema.interfaceTypes()){for(let t of e.appliedDirectivesOf(this.metadata.keyDirective()))this.addChange(new _(e.name)),t.remove();for(let t of e.fields())for(let e of[this.metadata.providesDirective(),this.metadata.requiresDirective()])for(let r of t.appliedDirectivesOf(e))this.addChange(new T(t.coordinate,e.name)),r.remove()}}removeProvidesOnNonComposite(){for(let e of this.schema.objectTypes())for(let t of e.fields())if(!(0,o.isCompositeType)((0,o.baseType)(t.type)))for(let e of t.appliedDirectivesOf(this.metadata.providesDirective()))this.addChange(new E(t.coordinate,t.type.toString())),e.remove()}addShareable(){let e=this.originalSubgraph.metadata(),t=this.metadata.keyDirective(),r=this.metadata.shareableDirective();for(let n of this.schema.objectTypes())if(!n.isSubscriptionRootType()){if(n.hasAppliedDirective(t)||n.isRootType())for(let t of n.fields()){if(e.isFieldShareable(t))continue;let i=Array.from(this.objectTypeMap.get(n.name).entries()).filter(([e,r])=>{if(e===this.subgraph.name)return!1;let n=r[0].field(t.name);return!!n&&(!r[1].isFieldExternal(n)||r[1].isFieldPartiallyExternal(n))});i.length>0&&!t.hasAppliedDirective(r)&&(t.applyDirective(r),this.addChange(new g(t.coordinate,i.map(([e])=>e))))}else{let e=Array.from(this.objectTypeMap.get(n.name).entries()).filter(([e,t])=>e!==this.subgraph.name);e.length>0&&!n.hasAppliedDirective(r)&&(n.applyDirective(r),this.addChange(new b(n.coordinate,e.map(([e])=>e))))}}}removeTagOnExternal(){let e=this.schema.directive("tag");if(e)for(let t of Array.from(e.applications())){let e=t.parent;e instanceof o.FieldDefinition&&this.external(e)&&this.allSubgraphs.map(t=>t.name===this.originalSubgraph.name?void 0:function(e,t,r){let n=e.type(t);return n&&(0,o.isCompositeType)(n)?n.field(r):void 0}(t.schema,e.parent.name,e.name)).filter(e=>!(e&&e.hasAppliedDirective("external"))).some(e=>e&&e.appliedDirectivesOf("tag").some(e=>(0,l.valueEquals)(t.arguments(),e.arguments())))&&(this.addChange(new S(t.toString(),e.coordinate)),t.remove())}}}},59675:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUTHENTICATED_VERSIONS=t.AuthenticatedSpecDefinition=void 0;let n=r(57343),i=r(59143),o=r(30500),a=r(10556);class s extends i.FeatureDefinition{constructor(e,r){super(new i.FeatureUrl(s.identity,s.directiveName,e),r),this.registerDirective((0,o.createDirectiveSpecification)({name:s.directiveName,locations:[n.DirectiveLocation.FIELD_DEFINITION,n.DirectiveLocation.OBJECT,n.DirectiveLocation.INTERFACE,n.DirectiveLocation.SCALAR,n.DirectiveLocation.ENUM],composes:!0,supergraphSpecification:()=>t.AUTHENTICATED_VERSIONS.latest()}))}get defaultCorePurpose(){return"SECURITY"}}t.AuthenticatedSpecDefinition=s,s.directiveName="authenticated",s.identity=`https://specs.apollo.dev/${s.directiveName}`,t.AUTHENTICATED_VERSIONS=new i.FeatureDefinitions(s.identity).add(new s(new i.FeatureVersion(0,1),new i.FeatureVersion(2,5))),(0,a.registerKnownFeature)(t.AUTHENTICATED_VERSIONS)},52473:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_VERSIONS=t.ContextSpecDefinition=t.ContextDirectiveName=void 0;let i=r(57343),o=r(59143),a=r(48170),s=r(30500),l=r(10556),u=r(4749);!function(e){e.CONTEXT="context",e.FROM_CONTEXT="fromContext"}(n||(t.ContextDirectiveName=n={}));let c="ContextFieldValue";class p extends o.FeatureDefinition{constructor(e){super(new o.FeatureUrl(p.identity,p.directiveName,e)),this.registerType((0,s.createScalarTypeSpecification)({name:c})),this.contextDirectiveSpec=(0,s.createDirectiveSpecification)({name:n.CONTEXT,locations:[i.DirectiveLocation.INTERFACE,i.DirectiveLocation.OBJECT,i.DirectiveLocation.UNION],args:[{name:"name",type:e=>new a.NonNullType(e.stringType())}],composes:!0,repeatable:!0,supergraphSpecification:e=>t.CONTEXT_VERSIONS.getMinimumRequiredVersion(e),staticArgumentTransform:(e,t)=>{let r=e.name;return{name:`${r}__${t.name}`}}}),this.fromContextDirectiveSpec=(0,s.createDirectiveSpecification)({name:n.FROM_CONTEXT,locations:[i.DirectiveLocation.ARGUMENT_DEFINITION],args:[{name:"field",type:(e,t)=>{(0,u.assert)(t,"Shouldn't be added without being attached to a @link spec");let r=t.typeNameInSchema(c),n=e.type(r);return(0,u.assert)(n,()=>`Expected "${r}" to be defined`),(0,u.assert)((0,a.isInputType)(n),`Expected "${r}" to be an input type`),n}}],composes:!1}),this.registerDirective(this.contextDirectiveSpec),this.registerDirective(this.fromContextDirectiveSpec)}get defaultCorePurpose(){return"SECURITY"}contextDirective(e){return this.directive(e,p.directiveName)}}t.ContextSpecDefinition=p,p.directiveName="context",p.identity=`https://specs.apollo.dev/${p.directiveName}`,t.CONTEXT_VERSIONS=new o.FeatureDefinitions(p.identity).add(new p(new o.FeatureVersion(0,1))),(0,l.registerKnownFeature)(t.CONTEXT_VERSIONS)},59143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAllCoreFeatures=t.LINK_VERSIONS=t.CORE_VERSIONS=t.findCoreSpecVersion=t.FeatureUrl=t.FeatureVersion=t.FeatureDefinitions=t.CoreSpecDefinition=t.isCoreSpecDirectiveApplication=t.extractCoreFeatureImports=t.FeatureDefinition=t.corePurposes=t.ErrCoreCheckFailed=t.linkDirectiveDefaultName=t.linkIdentity=t.coreIdentity=void 0;let n=r(57343),i=r(57310),o=r(48170),a=r(56563),s=r(4749),l=r(74533),u=r(24056),c=r(10556),p=r(65550),d=r(30500);function f(e){return Error(e)}t.coreIdentity="https://specs.apollo.dev/core",t.linkIdentity="https://specs.apollo.dev/link",t.linkDirectiveDefaultName="link",t.ErrCoreCheckFailed=e=>(0,l.aggregateError)("CheckFailed","one or more checks failed",e),t.corePurposes=["SECURITY","EXECUTION"];class h{constructor(e,t){this.minimumFederationVersion=t,this._directiveSpecs=new s.MapWithCachedArrays,this._typeSpecs=new s.MapWithCachedArrays,this.url="string"==typeof e?T.parse(e):e}registerDirective(e){this._directiveSpecs.set(e.name,e)}registerType(e){this._typeSpecs.set(e.name,e)}registerSubFeature(e){for(let t of e.typeSpecs())this.registerType(t);for(let t of e.directiveSpecs())this.registerDirective(t)}directiveSpecs(){return this._directiveSpecs.values()}directiveSpec(e){return this._directiveSpecs.get(e)}typeSpecs(){return this._typeSpecs.values()}typeSpec(e){return this._typeSpecs.get(e)}get identity(){return this.url.identity}get version(){return this.url.version}isSpecType(e){let t=this.nameInSchema(e.schema());return void 0!==t&&e.name.startsWith(`${t}__`)}isSpecDirective(e){let t=this.nameInSchema(e.schema());return void 0!=t&&(e.name===t||e.name.startsWith(`${t}__`))}addElementsToSchema(e){let t=this.featureInSchema(e);(0,s.assert)(t,()=>`The ${this.url} specification should have been added to the schema before this is called`);let r=[];for(let n of this.typeSpecs())r=r.concat(n.checkOrAdd(e,t));for(let n of this.directiveSpecs())r=r.concat(n.checkOrAdd(e,t));return r}allElementNames(){return this.directiveSpecs().map(e=>`@${e.name}`).concat(this.typeSpecs().map(e=>e.name))}validateSubgraphSchema(e){return[]}nameInSchema(e){let t=this.featureInSchema(e);return null==t?void 0:t.nameInSchema}directiveNameInSchema(e,t){let r=this.featureInSchema(e);return r?r.directiveNameInSchema(t):void 0}typeNameInSchema(e,t){let r=this.featureInSchema(e);return r?r.typeNameInSchema(t):void 0}rootDirective(e){let t=this.nameInSchema(e);return t?e.directive(t):void 0}directive(e,t){let r=this.directiveNameInSchema(e,t);return r?e.directive(r):void 0}type(e,t){let r=this.typeNameInSchema(e,t);return r?e.type(r):void 0}addRootDirective(e){return e.addDirectiveDefinition(this.nameInSchema(e))}addDirective(e,t){return e.addDirectiveDefinition(this.directiveNameInSchema(e,t))}addScalarType(e,t){return e.addType(new o.ScalarType(this.typeNameInSchema(e,t)))}addEnumType(e,t){return e.addType(new o.EnumType(this.typeNameInSchema(e,t)))}featureInSchema(e){let t=e.coreFeatures;if(!t)throw f("Schema is not a core schema (add @link first)");return t.getByIdentity(this.identity)}get defaultCorePurpose(){}compositionSpecification(e){let t=this._directiveSpecs.get(e);return null==t?void 0:t.composition}toString(){return`${this.identity}/${this.version}`}}function y(e,t,r,n){if(t&&!t.includes(e)){let i="";if(!e.startsWith("@")&&t.includes("@"+e))i=` Did you mean directive "@${e}"?`;else{let r=(0,p.suggestionList)(e,t);r&&(i=(0,p.didYouMean)(r))}r.push(l.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err(`Cannot import unknown element "${e}".${i}`,{nodes:n.sourceAST}))}}t.FeatureDefinition=h,t.extractCoreFeatureImports=function(e,t){let r=t.arguments();if(!("import"in r)||!r.import)return[];let n=r.import,i=(0,c.coreFeatureDefinitionIfKnown)(e),a=null==i?void 0:i.allElementNames(),s=[],p=[];e:for(let e of n){let r;if("string"==typeof e){p.push({name:e}),y(e,a,s,t);continue}if("object"!=typeof e){s.push(l.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err(`Invalid sub-value ${(0,u.valueToString)(e)} for @link(import:) argument: values should be either strings or input object values of the form { name: "<importedElement>", as: "<alias>" }.`,{nodes:t.sourceAST}));continue}for(let[n,i]of Object.entries(e))switch(n){case"name":if("string"!=typeof i){s.push(l.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err(`Invalid value for the "name" field for sub-value ${(0,u.valueToString)(e)} of @link(import:) argument: must be a string.`,{nodes:t.sourceAST}));continue e}r=i;break;case"as":if("string"!=typeof i){s.push(l.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err(`Invalid value for the "as" field for sub-value ${(0,u.valueToString)(e)} of @link(import:) argument: must be a string.`,{nodes:t.sourceAST}));continue e}break;default:s.push(l.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err(`Unknown field "${n}" for sub-value ${(0,u.valueToString)(e)} of @link(import:) argument.`,{nodes:t.sourceAST}));continue e}r?(p.push(e),e.as&&("@"===e.name.charAt(0)&&"@"!==e.as.charAt(0)?s.push(l.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err(`Invalid @link import renaming: directive "${e.name}" imported name should start with a '@' character, but got "${e.as}".`,{nodes:t.sourceAST})):"@"!==e.name.charAt(0)&&"@"===e.as.charAt(0)&&s.push(l.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err(`Invalid @link import renaming: type "${e.name}" imported name should not start with a '@' character, but got "${e.as}" (or, if @${e.name} is a directive, then it should be referred to with a '@').`,{nodes:t.sourceAST}))),y(r,a,s,t)):s.push(l.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err(`Invalid sub-value ${(0,u.valueToString)(e)} for @link(import:) argument: missing mandatory "name" field.`,{nodes:t.sourceAST}))}if(s.length>0)throw(0,o.ErrGraphQLValidationFailed)(s);return p},t.isCoreSpecDirectiveApplication=function(e){var r,i,s,l,u;let c=e.definition;if(!c)return!1;let p=c.argument("as");if(p&&!(0,a.sameType)(p.type,e.schema().stringType())||!c.repeatable||1!==c.locations.length||c.locations[0]!==n.DirectiveLocation.SCHEMA)return!1;let d=null!==(r=c.argument("url"))&&void 0!==r?r:c.argument("feature");if(!d||(l=d.type,u=e.schema(),!((0,a.sameType)(l,u.stringType())||(0,a.sameType)(l,new o.NonNullType(u.stringType())))))return!1;let f=e.arguments();try{let r=T.parse(f[d.name]);if(r.identity===t.coreIdentity)return e.name===(null!==(i=f.as)&&void 0!==i?i:"core");return r.identity===t.linkIdentity&&e.name===(null!==(s=f.as)&&void 0!==s?s:t.linkDirectiveDefaultName)}catch(e){return!1}};let m=(0,d.createEnumTypeSpecification)({name:"Purpose",values:t.corePurposes.map(e=>({name:e,description:function(e){switch(e){case"SECURITY":return"`SECURITY` features provide metadata necessary to securely resolve fields.";case"EXECUTION":return"`EXECUTION` features provide metadata necessary for operation execution."}}(e)}))}),v=(0,d.createScalarTypeSpecification)({name:"Import"});class g extends h{constructor(e,r,i=t.linkIdentity,o=t.linkDirectiveDefaultName){super(new T(i,o,e),r),this.directiveDefinitionSpec=(0,d.createDirectiveSpecification)({name:o,locations:[n.DirectiveLocation.SCHEMA],repeatable:!0,args:this.createDefinitionArgumentSpecifications()}),this.registerDirective(this.directiveDefinitionSpec)}createDefinitionArgumentSpecifications(){let e=[{name:this.urlArgName(),type:e=>e.stringType()},{name:"as",type:e=>e.stringType()}];return this.supportPurposes()&&e.push({name:"for",type:(e,t)=>((0,s.assert)(t,"Shouldn't be added without being attached to a @link spec"),e.type(t.typeNameInSchema(m.name)))}),this.supportImport()&&e.push({name:"import",type:(e,t)=>((0,s.assert)(t,"Shouldn't be added without being attached to a @link spec"),new o.ListType(e.type(t.typeNameInSchema(v.name))))}),e}addElementsToSchema(e){return[]}addToSchema(e,t){let r=this.addDefinitionsToSchema(e,t);if(r.length>0)return r;let n={[this.urlArgName()]:this.toString()};t&&(n.as=t);let i=e.schemaDefinition,o=i.hasNonExtensionElements(),a=i.applyDirective(null!=t?t:this.url.name,n,!0);if(!o&&i.hasExtensionElements()){let e=(0,s.firstOf)(i.extensions());(0,s.assert)(e,"`hasExtensionElements` should not have been `true`"),a.setOfExtension(e)}return[]}addDefinitionsToSchema(e,t,r=[]){let n=e.coreFeatures;if(n)return n.coreItself.url.identity===this.identity?[]:[l.ERRORS.INVALID_LINK_DIRECTIVE_USAGE.err(`Cannot add feature ${this} to the schema, it already uses ${n.coreItself.url}`)];let i=null!=t?t:this.url.name,a=new o.CoreFeature(this.url,i,new o.Directive(i),r),s=[];return(s=(s=s.concat(m.checkOrAdd(e,a))).concat(v.checkOrAdd(e,a))).concat(this.directiveDefinitionSpec.checkOrAdd(e,a))}allElementNames(){let e=[`@${this.url.name}`];return this.supportPurposes()&&e.push("Purpose"),this.supportImport()&&e.push("Import"),e}supportPurposes(){return this.version.strictlyGreaterThan(new _(0,1))}supportImport(){return this.url.name===t.linkDirectiveDefaultName}extractFeature(e){let t=e.coreFeatures;if(!t)throw f("Schema is not a core schema (add @core first)");if(!t.coreItself.url.version.equals(this.version))throw f(`Cannot use this version of @core (${this.version}), the schema uses version ${t.coreItself.url.version}`);return t.coreItself}coreDirective(e){let t=this.extractFeature(e);return e.directive(t.nameInSchema)}coreVersion(e){return this.extractFeature(e).url.version}applyFeatureToSchema(e,t,r,n){let i=this.coreDirective(e),o={[this.urlArgName()]:t.toString(),as:r};return this.supportPurposes()&&n&&(o.for=n),e.schemaDefinition.applyDirective(i,o),t.addElementsToSchema(e)}applyFeatureAsLink(e,r,n,i){var o;let a=e.schemaDefinition.appliedDirectivesOf(t.linkDirectiveDefaultName).find(e=>e.arguments().url===r.toString());a&&a.remove();let s=this.coreDirective(e),l={url:r.toString(),import:(null!==(o=null==a?void 0:a.arguments().import)&&void 0!==o?o:[]).concat(null==i?void 0:i.map(e=>e.as?{name:`@${e.name}`,as:`@${e.as}`}:`@${e.name}`)),feature:void 0};return this.supportPurposes()&&n&&(l.for=n),e.schemaDefinition.applyDirective(s,l),r.addElementsToSchema(e)}extractFeatureUrl(e){return T.parse(e[this.urlArgName()])}urlArgName(){return"core"===this.url.name?"feature":"url"}}t.CoreSpecDefinition=g;class b{constructor(e){this.identity=e,this._definitions=[]}add(e){if(e.identity!==this.identity)throw f(`Cannot add definition for ${e} to the versions of definitions for ${this.identity}`);return this._definitions.find(t=>e.version.equals(t.version))||(this._definitions.push(e),this._definitions.sort((e,t)=>-e.version.compareTo(t.version))),this}find(e){return this._definitions.find(t=>t.version.equals(e))}versions(){return this._definitions.map(e=>e.version)}latest(){return(0,s.assert)(this._definitions.length>0,"Trying to get latest when no definitions exist"),this._definitions[0]}getMinimumRequiredVersion(e){var t;let r=this._definitions.find(t=>!t.minimumFederationVersion||e>=t.minimumFederationVersion);(0,s.assert)(r,`No compatible definition exists for federation version ${e}`);let n=this.latest().version.major;return r.version.major!==n?null!==(t=(0,s.findLast)(this._definitions,e=>e.version.major===n))&&void 0!==t?t:this.latest():r}}t.FeatureDefinitions=b;class _{constructor(e,t){this.major=e,this.minor=t}static parse(e){let t=e.match(this.VERSION_RE);if(!t)throw l.ERRORS.INVALID_LINK_IDENTIFIER.err(`Expected a version string (of the form v1.2), got ${e}`);return new this(+t[1],+t[2])}static max(e){let t;for(let r of e)(!t||r>t)&&(t=r);return t}satisfies(e){let{major:t,minor:r}=this,{major:n,minor:i}=e;return n==t&&(0==t?i==r:i<=r)}get series(){let{major:e}=this;return e>0?`${e}.x`:String(this)}compareTo(e){return this.major>e.major?1:this.major<e.major?-1:this.minor>e.minor?1:this.minor<e.minor?-1:0}lt(e){return 0>this.compareTo(e)}lte(e){return 0>=this.compareTo(e)}gt(e){return this.compareTo(e)>0}gte(e){return this.compareTo(e)>=0}strictlyGreaterThan(e){return this.compareTo(e)>0}toString(){return`v${this.major}.${this.minor}`}equals(e){return this.major===e.major&&this.minor===e.minor}}t.FeatureVersion=_,_.VERSION_RE=/^v(\d+)\.(\d+)$/;class T{constructor(e,t,r,n){this.identity=e,this.name=t,this.version=r,this.element=n}static maybeParse(e,t){try{return T.parse(e,t)}catch(e){return}}static parse(e,t){let r=new i.URL(e);if(!r.pathname||"/"===r.pathname)throw l.ERRORS.INVALID_LINK_IDENTIFIER.err(`Missing path in feature url '${r}'`,{nodes:t});let n=r.pathname.split("/"),o=n.pop();if(!o)throw l.ERRORS.INVALID_LINK_IDENTIFIER.err(`Missing version component in feature url '${r}'`,{nodes:t});let a=_.parse(o),s=n[n.length-1];if(!s)throw l.ERRORS.INVALID_LINK_IDENTIFIER.err(`Missing feature name component in feature url '${r}'`,{nodes:t});let u=r.hash?r.hash.slice(1):void 0;return r.hash="",r.search="",r.password="",r.username="",r.pathname=n.join("/"),new T(r.toString(),s,a,u)}static decode(e){return this.parse(e.value,e)}satisfies(e){return e.identity===this.identity&&this.version.satisfies(e.version)}equals(e){return this.identity===e.identity&&this.version.equals(e.version)}get url(){return this.element?`${this.identity}/${this.version}#${this.element}`:`${this.identity}/${this.version}`}get isDirective(){var e;return null===(e=this.element)||void 0===e?void 0:e.startsWith("@")}get elementName(){var e;return this.isDirective?null===(e=this.element)||void 0===e?void 0:e.slice(1):this.element}get base(){return this.element?new T(this.identity,this.name,this.version):this}toString(){return this.url}}t.FeatureUrl=T,t.findCoreSpecVersion=function(e){return"core"===e.name?t.CORE_VERSIONS.find(e.version):e.name===t.linkDirectiveDefaultName?t.LINK_VERSIONS.find(e.version):void 0},t.CORE_VERSIONS=new b(t.coreIdentity).add(new g(new _(0,1),void 0,t.coreIdentity,"core")).add(new g(new _(0,2),new _(2,0),t.coreIdentity,"core")),t.LINK_VERSIONS=new b(t.linkIdentity).add(new g(new _(1,0),new _(2,0))),(0,c.registerKnownFeature)(t.CORE_VERSIONS),(0,c.registerKnownFeature)(t.LINK_VERSIONS),t.removeAllCoreFeatures=function(e){var t,r;let n=[...null!==(r=null===(t=e.coreFeatures)||void 0===t?void 0:t.allFeatures())&&void 0!==r?r:[]],i=[];for(let t of n)e.directives().filter(e=>t.isFeatureDefinition(e)).forEach(e=>e.remove().forEach(e=>e.remove())),e.types().filter(e=>t.isFeatureDefinition(e)).forEach(e=>{let r=e.remove();r.length>0&&i.push({feature:t,type:e,references:r})});let a=[];for(let{feature:e,type:t,references:r}of i){let n=r.filter(e=>e.isAttached());n.length>0&&a.push(l.ERRORS.REFERENCED_INACCESSIBLE.err(`Cannot remove elements of feature ${e} as feature type ${t} is referenced by elements: ${n.join(", ")}`,{nodes:(0,o.sourceASTs)(...r)}))}if(a.length>0)throw(0,o.ErrGraphQLAPISchemaValidationFailed)(a)}},19830:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COST_VERSIONS=t.CostSpecDefinition=t.costIdentity=void 0;let n=r(57343),i=r(30500),o=r(59143),a=r(48170),s=r(10556),l=r(92884);t.costIdentity="https://specs.apollo.dev/cost";class u extends o.FeatureDefinition{constructor(e,r){super(new o.FeatureUrl(t.costIdentity,"cost",e),r),this.minimumFederationVersion=r,this.registerDirective((0,i.createDirectiveSpecification)({name:"cost",locations:[n.DirectiveLocation.ARGUMENT_DEFINITION,n.DirectiveLocation.ENUM,n.DirectiveLocation.FIELD_DEFINITION,n.DirectiveLocation.INPUT_FIELD_DEFINITION,n.DirectiveLocation.OBJECT,n.DirectiveLocation.SCALAR],args:[{name:"weight",type:e=>new a.NonNullType(e.intType()),compositionStrategy:l.ARGUMENT_COMPOSITION_STRATEGIES.MAX}],composes:!0,repeatable:!1,supergraphSpecification:e=>t.COST_VERSIONS.getMinimumRequiredVersion(e)})),this.registerDirective((0,i.createDirectiveSpecification)({name:"listSize",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:[{name:"assumedSize",type:e=>e.intType(),compositionStrategy:l.ARGUMENT_COMPOSITION_STRATEGIES.NULLABLE_MAX},{name:"slicingArguments",type:e=>new a.ListType(new a.NonNullType(e.stringType())),compositionStrategy:l.ARGUMENT_COMPOSITION_STRATEGIES.NULLABLE_UNION},{name:"sizedFields",type:e=>new a.ListType(new a.NonNullType(e.stringType())),compositionStrategy:l.ARGUMENT_COMPOSITION_STRATEGIES.NULLABLE_UNION},{name:"requireOneSlicingArgument",type:e=>e.booleanType(),defaultValue:!0,compositionStrategy:l.ARGUMENT_COMPOSITION_STRATEGIES.NULLABLE_AND}],composes:!0,repeatable:!1,supergraphSpecification:e=>t.COST_VERSIONS.getMinimumRequiredVersion(e)}))}}t.CostSpecDefinition=u,t.COST_VERSIONS=new o.FeatureDefinitions(t.costIdentity).add(new u(new o.FeatureVersion(0,1),new o.FeatureVersion(2,9))),(0,s.registerKnownFeature)(t.COST_VERSIONS)},39862:(e,t,r)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.FEDERATION_VERSIONS=t.FederationSpecDefinition=t.FEDERATION1_DIRECTIVES=t.FEDERATION1_TYPES=t.FederationDirectiveName=t.FederationTypeName=t.federationIdentity=void 0;let o=r(48170),a=r(59143),s=r(30500),l=r(57343),u=r(4749),c=r(51801),p=r(27239),d=r(10556),f=r(35422),h=r(59675),y=r(56118),m=r(75487),v=r(35357),g=r(52473),b=r(19830);t.federationIdentity="https://specs.apollo.dev/federation",function(e){e.FIELD_SET="FieldSet",e.CONTEXT_FIELD_VALUE="ContextFieldValue"}(n||(t.FederationTypeName=n={})),function(e){e.KEY="key",e.EXTERNAL="external",e.REQUIRES="requires",e.PROVIDES="provides",e.EXTENDS="extends",e.SHAREABLE="shareable",e.OVERRIDE="override",e.TAG="tag",e.INACCESSIBLE="inaccessible",e.COMPOSE_DIRECTIVE="composeDirective",e.INTERFACE_OBJECT="interfaceObject",e.AUTHENTICATED="authenticated",e.REQUIRES_SCOPES="requiresScopes",e.POLICY="policy",e.SOURCE_API="sourceAPI",e.SOURCE_TYPE="sourceType",e.SOURCE_FIELD="sourceField",e.CONTEXT="context",e.FROM_CONTEXT="fromContext",e.COST="cost",e.LIST_SIZE="listSize"}(i||(t.FederationDirectiveName=i={}));let _=(0,s.createScalarTypeSpecification)({name:n.FIELD_SET}),T={name:"fields",type:e=>(function(e){let t=(0,p.federationMetadata)(e);return(0,u.assert)(t,"The schema is not a federation subgraph"),new o.NonNullType(t.fieldSetType())})(e)},E=(0,s.createDirectiveSpecification)({name:i.KEY,locations:[l.DirectiveLocation.OBJECT,l.DirectiveLocation.INTERFACE],repeatable:!0,args:[T,{name:"resolvable",type:e=>e.booleanType(),defaultValue:!0}]}),O=(0,s.createDirectiveSpecification)({name:i.EXTENDS,locations:[l.DirectiveLocation.OBJECT,l.DirectiveLocation.INTERFACE]}),S=(0,s.createDirectiveSpecification)({name:i.EXTERNAL,locations:[l.DirectiveLocation.OBJECT,l.DirectiveLocation.FIELD_DEFINITION],args:[{name:"reason",type:e=>e.stringType()}]}),w=(0,s.createDirectiveSpecification)({name:i.REQUIRES,locations:[l.DirectiveLocation.FIELD_DEFINITION],args:[T]}),I=(0,s.createDirectiveSpecification)({name:i.PROVIDES,locations:[l.DirectiveLocation.FIELD_DEFINITION],args:[T]}),N=[_],A=[E,w,I,S,c.TAG_VERSIONS.find(new a.FeatureVersion(0,2)).tagDirectiveSpec,O];t.FEDERATION1_TYPES=N,t.FEDERATION1_DIRECTIVES=A;class C extends a.FeatureDefinition{constructor(e){for(let r of(super(new a.FeatureUrl(t.federationIdentity,"federation",e)),N))this.registerType(r);for(let e of A)this.registerDirective(e);this.registerDirective((0,s.createDirectiveSpecification)({name:i.SHAREABLE,locations:[l.DirectiveLocation.OBJECT,l.DirectiveLocation.FIELD_DEFINITION],repeatable:e.gte(new a.FeatureVersion(2,2))})),this.registerSubFeature(f.INACCESSIBLE_VERSIONS.getMinimumRequiredVersion(e)),e>=new a.FeatureVersion(2,7)?this.registerDirective((0,s.createDirectiveSpecification)({name:i.OVERRIDE,locations:[l.DirectiveLocation.FIELD_DEFINITION],args:[{name:"from",type:e=>new o.NonNullType(e.stringType())},{name:"label",type:e=>e.stringType()}]})):this.registerDirective((0,s.createDirectiveSpecification)({name:i.OVERRIDE,locations:[l.DirectiveLocation.FIELD_DEFINITION],args:[{name:"from",type:e=>new o.NonNullType(e.stringType())}]})),e.gte(new a.FeatureVersion(2,1))&&this.registerDirective((0,s.createDirectiveSpecification)({name:i.COMPOSE_DIRECTIVE,locations:[l.DirectiveLocation.SCHEMA],repeatable:!0,args:[{name:"name",type:e=>e.stringType()}]})),e.gte(new a.FeatureVersion(2,3))&&(this.registerDirective((0,s.createDirectiveSpecification)({name:i.INTERFACE_OBJECT,locations:[l.DirectiveLocation.OBJECT]})),this.registerSubFeature(c.TAG_VERSIONS.find(new a.FeatureVersion(0,3)))),e.gte(new a.FeatureVersion(2,5))&&(this.registerSubFeature(h.AUTHENTICATED_VERSIONS.find(new a.FeatureVersion(0,1))),this.registerSubFeature(y.REQUIRES_SCOPES_VERSIONS.find(new a.FeatureVersion(0,1)))),e.gte(new a.FeatureVersion(2,6))&&this.registerSubFeature(m.POLICY_VERSIONS.find(new a.FeatureVersion(0,1))),e.gte(new a.FeatureVersion(2,7))&&this.registerSubFeature(v.SOURCE_VERSIONS.find(new a.FeatureVersion(0,1))),e.gte(new a.FeatureVersion(2,8))&&this.registerSubFeature(g.CONTEXT_VERSIONS.find(new a.FeatureVersion(0,1))),e.gte(new a.FeatureVersion(2,9))&&this.registerSubFeature(b.COST_VERSIONS.find(new a.FeatureVersion(0,1)))}}t.FederationSpecDefinition=C,t.FEDERATION_VERSIONS=new a.FeatureDefinitions(t.federationIdentity).add(new C(new a.FeatureVersion(2,0))).add(new C(new a.FeatureVersion(2,1))).add(new C(new a.FeatureVersion(2,2))).add(new C(new a.FeatureVersion(2,3))).add(new C(new a.FeatureVersion(2,4))).add(new C(new a.FeatureVersion(2,5))).add(new C(new a.FeatureVersion(2,6))).add(new C(new a.FeatureVersion(2,7))).add(new C(new a.FeatureVersion(2,8))).add(new C(new a.FeatureVersion(2,9))),(0,d.registerKnownFeature)(t.FEDERATION_VERSIONS)},35422:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeInaccessibleElements=t.INACCESSIBLE_VERSIONS=t.InaccessibleSpecDefinition=t.inaccessibleIdentity=void 0;let n=r(59143),i=r(48170),o=r(57343),a=r(10556),s=r(74533),l=r(30500),u=r(4749);t.inaccessibleIdentity="https://specs.apollo.dev/inaccessible";class c extends n.FeatureDefinition{constructor(e,r){super(new n.FeatureUrl(t.inaccessibleIdentity,"inaccessible",e),r),this.inaccessibleLocations=[o.DirectiveLocation.FIELD_DEFINITION,o.DirectiveLocation.OBJECT,o.DirectiveLocation.INTERFACE,o.DirectiveLocation.UNION],this.printedInaccessibleDefinition="directive @inaccessible on FIELD_DEFINITION | INTERFACE | OBJECT | UNION",this.isV01()||(this.inaccessibleLocations.push(o.DirectiveLocation.ARGUMENT_DEFINITION,o.DirectiveLocation.SCALAR,o.DirectiveLocation.ENUM,o.DirectiveLocation.ENUM_VALUE,o.DirectiveLocation.INPUT_OBJECT,o.DirectiveLocation.INPUT_FIELD_DEFINITION),this.printedInaccessibleDefinition="directive @inaccessible on FIELD_DEFINITION | INTERFACE | OBJECT | UNION | ARGUMENT_DEFINITION | SCALAR | ENUM | ENUM_VALUE | INPUT_OBJECT | INPUT_FIELD_DEFINITION"),this.inaccessibleDirectiveSpec=(0,l.createDirectiveSpecification)({name:"inaccessible",locations:this.inaccessibleLocations,composes:!0,supergraphSpecification:e=>t.INACCESSIBLE_VERSIONS.getMinimumRequiredVersion(e)}),this.registerDirective(this.inaccessibleDirectiveSpec)}isV01(){return this.version.equals(new n.FeatureVersion(0,1))}inaccessibleDirective(e){return this.directive(e,"inaccessible")}checkCompatibleDirective(e){let t=Object.keys(e.arguments()).length>0,r=e.repeatable,n=e.locations.every(e=>this.inaccessibleLocations.includes(e));if(t||r||!n)return s.ERRORS.DIRECTIVE_DEFINITION_INVALID.err(`Found invalid @inaccessible directive definition. Please ensure the directive definition in your schema's definitions matches the following:
	${this.printedInaccessibleDefinition}`)}get defaultCorePurpose(){return"SECURITY"}}function p(e){let t=[];return function e(t,r,n){if(null!=t){if((0,i.isNonNullType)(r))return e(t,r.ofType,n);if(!((0,i.isScalarType)(r)||(0,i.isVariable)(t))){if(Array.isArray(t)){if((0,i.isListType)(r)){let i=r.ofType;for(let r of t)e(r,i,n)}return}if((0,i.isListType)(r))return e(t,r.ofType,n);if("object"==typeof t){if((0,i.isInputObjectType)(r))for(let i of r.fields()){let r=t[i.name];void 0!==r&&(n.push(i),e(r,i.type,n))}return}if("string"==typeof t&&(0,i.isEnumType)(r)){let e=r.value(t);void 0!==e&&n.push(e)}}}}(e.defaultValue,function(e){let t=e.type;return(0,u.assert)(t,"Schema should have been valid, but argument/input field did not have type."),t}(e),t),t}function d(e){let t=e.schema();return e instanceof i.ObjectType||e instanceof i.InterfaceType||e instanceof i.UnionType||e instanceof i.ScalarType||e instanceof i.EnumType||e instanceof i.InputObjectType?t.builtInTypes(!0).some(t=>t.name===e.name):e instanceof i.DirectiveDefinition?t.builtInDirectives(!0).some(t=>t.name===e.name):void(0,u.assert)(!1,"Unreachable code, element is of unknown type.")}t.InaccessibleSpecDefinition=c,t.INACCESSIBLE_VERSIONS=new n.FeatureDefinitions(t.inaccessibleIdentity).add(new c(new n.FeatureVersion(0,1))).add(new c(new n.FeatureVersion(0,2),new n.FeatureVersion(2,0))),(0,a.registerKnownFeature)(t.INACCESSIBLE_VERSIONS),t.removeInaccessibleElements=function(e){e.validate();let r=e.coreFeatures;if(!r)return;let n=r.getByIdentity(t.inaccessibleIdentity);if(!n)return;let a=t.INACCESSIBLE_VERSIONS.find(n.url.version);if(!a)throw(0,i.ErrGraphQLAPISchemaValidationFailed)([new o.GraphQLError(`Cannot remove inaccessible elements: the schema uses unsupported inaccessible spec version ${n.url.version} (supported versions: ${t.INACCESSIBLE_VERSIONS.versions().join(", ")})`)]);let l=a.inaccessibleDirective(e);if(!l)throw(0,i.ErrGraphQLAPISchemaValidationFailed)([new o.GraphQLError(`Invalid schema: declares ${a.url} spec but does not define a @inaccessible directive.`)]);let c=a.checkCompatibleDirective(l);if(c)throw(0,i.ErrGraphQLAPISchemaValidationFailed)([c]);(function(e,t,r,n){var o,a,l;let c;function f(e){return e.hasAppliedDirective(n)}let h=[...t.allFeatures()];function y(e){return h.some(t=>t.isFeatureDefinition(e))}function m(e){return!(!(e instanceof i.DirectiveDefinition)&&f(e))&&(e instanceof i.ObjectType||e instanceof i.InterfaceType||e instanceof i.UnionType||e instanceof i.ScalarType||e instanceof i.EnumType||e instanceof i.InputObjectType||e instanceof i.DirectiveDefinition||(e instanceof i.FieldDefinition||e instanceof i.ArgumentDefinition||e instanceof i.InputFieldDefinition||e instanceof i.EnumValue?m(e.parent):void(0,u.assert)(!1,"Unreachable code, element is of unknown type.")))}function v(e){let t=[];if(f(e)&&t.push(e),e instanceof i.ObjectType||e instanceof i.InterfaceType||e instanceof i.InputObjectType){for(let r of e.fields())t.push(...v(r));return t}if(e instanceof i.EnumType){for(let r of e.values)t.push(...v(r));return t}if(e instanceof i.DirectiveDefinition||e instanceof i.FieldDefinition){for(let r of e.arguments())t.push(...v(r));return t}if(e instanceof i.UnionType||e instanceof i.ScalarType||e instanceof i.ArgumentDefinition||e instanceof i.InputFieldDefinition||e instanceof i.EnumValue)return t;(0,u.assert)(!1,"Unreachable code, element is of unknown type.")}let g=[];for(let t of(r.isV01()||(c=function(e){let t=new Map;function r(e,r){var n;let i=null!==(n=t.get(e))&&void 0!==n?n:[];0===i.length&&t.set(e,i),i.push(r)}for(let t of e.allTypes())if(!d(t)){if(t instanceof i.ObjectType||t instanceof i.InterfaceType)for(let e of t.fields())for(let t of e.arguments())for(let e of p(t))r(e,t);if(t instanceof i.InputObjectType)for(let e of t.fields())for(let t of p(e))r(t,e)}for(let t of e.allDirectives())if(!d(t))for(let e of t.arguments())for(let t of p(e))r(t,e);return t}(e)),e.allTypes()))if(d(t)){let e=v(t);e.length>0&&g.push(s.ERRORS.DISALLOWED_INACCESSIBLE.err(`Built-in type "${t.coordinate}" cannot use @inaccessible.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:e.map(e=>e.coordinate),inaccessible_referencers:[t.coordinate]}}))}else if(y(t)){let e=v(t);e.length>0&&g.push(s.ERRORS.DISALLOWED_INACCESSIBLE.err(`Core feature type "${t.coordinate}" cannot use @inaccessible.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:e.map(e=>e.coordinate),inaccessible_referencers:[t.coordinate]}}))}else if(f(t))for(let e of t.referencers())e instanceof i.FieldDefinition||e instanceof i.ArgumentDefinition||e instanceof i.InputFieldDefinition?m(e)&&g.push(s.ERRORS.REFERENCED_INACCESSIBLE.err(`Type "${t.coordinate}" is @inaccessible but is referenced by "${e.coordinate}", which is in the API schema.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:[t.coordinate],inaccessible_referencers:[e.coordinate]}})):e instanceof i.SchemaDefinition&&t===e.rootType("query")&&g.push(s.ERRORS.QUERY_ROOT_TYPE_INACCESSIBLE.err(`Type "${t.coordinate}" is @inaccessible but is the root query type, which must be in the API schema.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:[t.coordinate]}}));else{if(t instanceof i.ObjectType||t instanceof i.InterfaceType||t instanceof i.InputObjectType){let e=!0;for(let r of t.fields())f(r)||(e=!1);e&&g.push(s.ERRORS.ONLY_INACCESSIBLE_CHILDREN.err(`Type "${t.coordinate}" is in the API schema but all of its ${t instanceof i.InputObjectType?"input ":""}fields are @inaccessible.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:t.fields().map(e=>e.coordinate),inaccessible_referencers:[t.coordinate]}}))}else if(t instanceof i.UnionType){let e=!0;for(let r of t.types())f(r)||(e=!1);e&&g.push(s.ERRORS.ONLY_INACCESSIBLE_CHILDREN.err(`Type "${t.coordinate}" is in the API schema but all of its members are @inaccessible.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:t.types().map(e=>e.coordinate),inaccessible_referencers:[t.coordinate]}}))}else if(t instanceof i.EnumType){let e=!0;for(let r of t.values)f(r)||(e=!1);e&&g.push(s.ERRORS.ONLY_INACCESSIBLE_CHILDREN.err(`Type "${t.coordinate}" is in the API schema but all of its values are @inaccessible.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:t.values.map(e=>e.coordinate),inaccessible_referencers:[t.coordinate]}}))}if(t instanceof i.ObjectType||t instanceof i.InterfaceType){let e=t.interfaces(),r=[];if(t instanceof i.InterfaceType)for(let e of t.referencers())(e instanceof i.ObjectType||e instanceof i.InterfaceType)&&r.push(e);for(let n of t.fields())if(f(n))for(let t of e){let e=t.field(n.name);e&&m(e)&&g.push(s.ERRORS.IMPLEMENTED_BY_INACCESSIBLE.err(`Field "${n.coordinate}" is @inaccessible but implements the interface field "${e.coordinate}", which is in the API schema.`,{nodes:n.sourceAST,extensions:{inaccessible_elements:[n.coordinate],inaccessible_referencers:[e.coordinate]}}))}else for(let t of n.arguments())if(f(t)){for(let e of(t.isRequired()&&g.push(s.ERRORS.REQUIRED_INACCESSIBLE.err(`Argument "${t.coordinate}" is @inaccessible but is a required argument of its field.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:[t.coordinate],inaccessible_referencers:[t.coordinate]}})),r)){let r=e.field(n.name);(0,u.assert)(r,"Schema should have been valid, but an implementing type did not implement one of this type's fields.");let i=r.argument(t.name);(0,u.assert)(i,"Schema should have been valid, but an implementing type did not implement one of this type's field's arguments."),m(i)&&i.isRequired()&&g.push(s.ERRORS.REQUIRED_INACCESSIBLE.err(`Argument "${t.coordinate}" is @inaccessible but is implemented by the required argument "${i.coordinate}", which is in the API schema.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:[t.coordinate],inaccessible_referencers:[i.coordinate]}}))}for(let r of e){let e=null===(o=r.field(n.name))||void 0===o?void 0:o.argument(t.name);e&&m(e)&&g.push(s.ERRORS.IMPLEMENTED_BY_INACCESSIBLE.err(`Argument "${t.coordinate}" is @inaccessible but implements the interface argument "${e.coordinate}", which is in the API schema.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:[t.coordinate],inaccessible_referencers:[e.coordinate]}}))}}}else if(t instanceof i.InputObjectType){for(let e of t.fields())if(f(e))for(let r of(e.isRequired()&&g.push(s.ERRORS.REQUIRED_INACCESSIBLE.err(`Input field "${e.coordinate}" is @inaccessible but is a required input field of its type.`,{nodes:e.sourceAST,extensions:{inaccessible_elements:[e.coordinate],inaccessible_referencers:[e.coordinate]}})),(0,u.assert)(c,"Input fields can't be @inaccessible in v0.1, but default value referencers weren't computed (which is only skipped for v0.1)."),null!==(a=c.get(e))&&void 0!==a?a:[]))m(r)&&g.push(s.ERRORS.DEFAULT_VALUE_USES_INACCESSIBLE.err(`Input field "${e.coordinate}" is @inaccessible but is used in the default value of "${r.coordinate}", which is in the API schema.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:[t.coordinate],inaccessible_referencers:[r.coordinate]}}))}else if(t instanceof i.EnumType){for(let e of t.values)if(f(e))for(let r of((0,u.assert)(c,"Enum values can't be @inaccessible in v0.1, but default value referencers weren't computed (which is only skipped for v0.1)."),null!==(l=c.get(e))&&void 0!==l?l:[]))m(r)&&g.push(s.ERRORS.DEFAULT_VALUE_USES_INACCESSIBLE.err(`Enum value "${e.coordinate}" is @inaccessible but is used in the default value of "${r.coordinate}", which is in the API schema.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:[t.coordinate],inaccessible_referencers:[r.coordinate]}}))}}for(let t of e.allDirectives()){let e=t.locations.filter(e=>(0,i.isTypeSystemDirectiveLocation)(e));if(d(t)){let e=v(t);e.length>0&&g.push(s.ERRORS.DISALLOWED_INACCESSIBLE.err(`Built-in directive "${t.coordinate}" cannot use @inaccessible.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:e.map(e=>e.coordinate),inaccessible_referencers:[t.coordinate]}}))}else if(y(t)){let e=v(t);e.length>0&&g.push(s.ERRORS.DISALLOWED_INACCESSIBLE.err(`Core feature directive "${t.coordinate}" cannot use @inaccessible.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:e.map(e=>e.coordinate),inaccessible_referencers:[t.coordinate]}}))}else if(e.length>0){let r=v(t);r.length>0&&g.push(s.ERRORS.DISALLOWED_INACCESSIBLE.err(`Directive "${t.coordinate}" cannot use @inaccessible because it may be applied to these type-system locations: ${e.join(", ")}.`,{nodes:t.sourceAST,extensions:{inaccessible_elements:r.map(e=>e.coordinate),inaccessible_referencers:[t.coordinate]}}))}else for(let e of t.arguments())e.isRequired()&&f(e)&&g.push(s.ERRORS.REQUIRED_INACCESSIBLE.err(`Argument "${e.coordinate}" is @inaccessible but is a required argument of its directive.`,{nodes:e.sourceAST,extensions:{inaccessible_elements:[e.coordinate],inaccessible_referencers:[e.coordinate]}}))}if(g.length>0)throw(0,i.ErrGraphQLAPISchemaValidationFailed)(g)})(e,r,a,l),function(e,t){function r(e){return e.hasAppliedDirective(t)}for(let t of e.types())if(r(t))t.remove();else if(t instanceof i.ObjectType||t instanceof i.InterfaceType)for(let e of t.fields())if(r(e))e.remove();else for(let t of e.arguments())r(t)&&t.remove();else if(t instanceof i.InputObjectType)for(let e of t.fields())r(e)&&e.remove();else if(t instanceof i.EnumType)for(let e of t.values)r(e)&&e.remove();for(let t of e.directives())for(let e of t.arguments())r(e)&&e.remove()}(e,l)}},35930:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JOIN_VERSIONS=t.JoinSpecDefinition=t.joinIdentity=void 0;let n=r(57343),i=r(59143),o=r(48170),a=r(10556),s=r(4749);t.joinIdentity="https://specs.apollo.dev/join";class l extends i.FeatureDefinition{constructor(e,r){super(new i.FeatureUrl(t.joinIdentity,"join",e),r)}isV01(){return this.version.equals(new i.FeatureVersion(0,1))}addElementsToSchema(e){let t=this.addDirective(e,"graph").addLocations(n.DirectiveLocation.ENUM_VALUE);t.addArgument("name",new o.NonNullType(e.stringType())),t.addArgument("url",new o.NonNullType(e.stringType()));let r=this.addEnumType(e,"Graph"),a=this.addScalarType(e,"FieldSet"),s=this.addDirective(e,"type").addLocations(n.DirectiveLocation.OBJECT,n.DirectiveLocation.INTERFACE,n.DirectiveLocation.UNION,n.DirectiveLocation.ENUM,n.DirectiveLocation.INPUT_OBJECT,n.DirectiveLocation.SCALAR);this.isV01()||(s.repeatable=!0),s.addArgument("graph",new o.NonNullType(r)),s.addArgument("key",a),!this.isV01()&&(s.addArgument("extension",new o.NonNullType(e.booleanType()),!1),s.addArgument("resolvable",new o.NonNullType(e.booleanType()),!0),this.version.gte(new i.FeatureVersion(0,3))&&s.addArgument("isInterfaceObject",new o.NonNullType(e.booleanType()),!1));let l=this.addDirective(e,"field").addLocations(n.DirectiveLocation.FIELD_DEFINITION,n.DirectiveLocation.INPUT_FIELD_DEFINITION);l.repeatable=!0;let u=this.version.gte(new i.FeatureVersion(0,3))?r:new o.NonNullType(r);if(l.addArgument("graph",u),l.addArgument("requires",a),l.addArgument("provides",a),this.isV01()||(l.addArgument("type",e.stringType()),l.addArgument("external",e.booleanType()),l.addArgument("override",e.stringType()),l.addArgument("usedOverridden",e.booleanType())),!this.isV01()){let t=this.addDirective(e,"implements").addLocations(n.DirectiveLocation.OBJECT,n.DirectiveLocation.INTERFACE);t.repeatable=!0,t.addArgument("graph",new o.NonNullType(r)),t.addArgument("interface",new o.NonNullType(e.stringType()))}if(this.version.gte(new i.FeatureVersion(0,3))){let t=this.addDirective(e,"unionMember").addLocations(n.DirectiveLocation.UNION);t.repeatable=!0,t.addArgument("graph",new o.NonNullType(r)),t.addArgument("member",new o.NonNullType(e.stringType()));let i=this.addDirective(e,"enumValue").addLocations(n.DirectiveLocation.ENUM_VALUE);i.repeatable=!0,i.addArgument("graph",new o.NonNullType(r))}if(this.version.gte(new i.FeatureVersion(0,4))){let t=this.addDirective(e,"directive").addLocations(n.DirectiveLocation.SCHEMA,n.DirectiveLocation.OBJECT,n.DirectiveLocation.INTERFACE,n.DirectiveLocation.FIELD_DEFINITION);t.repeatable=!0,t.addArgument("graphs",new o.ListType(new o.NonNullType(r))),t.addArgument("name",new o.NonNullType(e.stringType())),t.addArgument("args",this.addScalarType(e,"DirectiveArguments")),l.addArgument("overrideLabel",e.stringType())}if(this.version.gte(new i.FeatureVersion(0,5))){let t=this.addScalarType(e,"FieldValue"),r=e.addType(new o.InputObjectType("join__ContextArgument"));r.addField("name",new o.NonNullType(e.stringType())),r.addField("type",new o.NonNullType(e.stringType())),r.addField("context",new o.NonNullType(e.stringType())),r.addField("selection",new o.NonNullType(t)),l.addArgument("contextArguments",new o.ListType(new o.NonNullType(r)))}return this.isV01()&&this.addDirective(e,"owner").addLocations(n.DirectiveLocation.OBJECT).addArgument("graph",new o.NonNullType(r)),[]}allElementNames(){let e=["graph","Graph","FieldSet","@type","@field"];return this.isV01()?e.push("@owner"):e.push("@implements"),e}populateGraphEnum(e,t){let r=new s.MultiMap;for(let e of t){let t=function(e){let t=e.replace(/[\W]/g,"_"),r=t.match(/^\d/)?"_"+t:t;return(r.match(/_\d+$/)?r+"_":r).toLocaleUpperCase()}(e.name);r.add(t,e)}let n=new Map;for(let[e,t]of r)if(1===t.length)n.set(t[0].name,e);else for(let[r,i]of t.entries())n.set(i.name,`${e}_${r+1}`);let i=this.graphEnum(e),o=this.graphDirective(e);for(let e of t)i.addValue(n.get(e.name)).applyDirective(o,{name:e.name,url:e.url});return n}fieldSetScalar(e){return this.type(e,"FieldSet")}graphEnum(e){return this.type(e,"Graph")}graphDirective(e){return this.directive(e,"graph")}directiveDirective(e){return this.directive(e,"directive")}typeDirective(e){return this.directive(e,"type")}implementsDirective(e){return this.directive(e,"implements")}fieldDirective(e){return this.directive(e,"field")}unionMemberDirective(e){return this.directive(e,"unionMember")}enumValueDirective(e){return this.directive(e,"enumValue")}ownerDirective(e){return this.directive(e,"owner")}get defaultCorePurpose(){return"EXECUTION"}}t.JoinSpecDefinition=l,t.JOIN_VERSIONS=new i.FeatureDefinitions(t.joinIdentity).add(new l(new i.FeatureVersion(0,1))).add(new l(new i.FeatureVersion(0,2))).add(new l(new i.FeatureVersion(0,3),new i.FeatureVersion(2,0))).add(new l(new i.FeatureVersion(0,4),new i.FeatureVersion(2,7))).add(new l(new i.FeatureVersion(0,5),new i.FeatureVersion(2,8))),(0,a.registerKnownFeature)(t.JOIN_VERSIONS)},75487:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.POLICY_VERSIONS=t.PolicySpecDefinition=t.PolicyTypeName=void 0;let i=r(57343),o=r(59143),a=r(48170),s=r(30500),l=r(10556),u=r(92884),c=r(4749);(n||(t.PolicyTypeName=n={})).POLICY="Policy";class p extends o.FeatureDefinition{constructor(e){super(new o.FeatureUrl(p.identity,p.directiveName,e)),this.registerType((0,s.createScalarTypeSpecification)({name:n.POLICY})),this.registerDirective((0,s.createDirectiveSpecification)({name:p.directiveName,args:[{name:"policies",type:(e,t)=>{(0,c.assert)(t,"Shouldn't be added without being attached to a @link spec");let r=t.typeNameInSchema(n.POLICY),i=e.type(r);return(0,c.assert)(i,()=>`Expected "${r}" to be defined`),new a.NonNullType(new a.ListType(new a.NonNullType(new a.ListType(new a.NonNullType(i)))))},compositionStrategy:u.ARGUMENT_COMPOSITION_STRATEGIES.UNION}],locations:[i.DirectiveLocation.FIELD_DEFINITION,i.DirectiveLocation.OBJECT,i.DirectiveLocation.INTERFACE,i.DirectiveLocation.SCALAR,i.DirectiveLocation.ENUM],composes:!0,supergraphSpecification:()=>t.POLICY_VERSIONS.latest()}))}get defaultCorePurpose(){return"SECURITY"}}t.PolicySpecDefinition=p,p.directiveName="policy",p.identity=`https://specs.apollo.dev/${p.directiveName}`,t.POLICY_VERSIONS=new o.FeatureDefinitions(p.identity).add(new p(new o.FeatureVersion(0,1))),(0,l.registerKnownFeature)(t.POLICY_VERSIONS)},56118:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.REQUIRES_SCOPES_VERSIONS=t.RequiresScopesSpecDefinition=t.RequiresScopesTypeName=void 0;let i=r(57343),o=r(59143),a=r(48170),s=r(30500),l=r(10556),u=r(92884),c=r(4749);(n||(t.RequiresScopesTypeName=n={})).SCOPE="Scope";class p extends o.FeatureDefinition{constructor(e){super(new o.FeatureUrl(p.identity,p.directiveName,e)),this.registerType((0,s.createScalarTypeSpecification)({name:n.SCOPE})),this.registerDirective((0,s.createDirectiveSpecification)({name:p.directiveName,args:[{name:"scopes",type:(e,t)=>{(0,c.assert)(t,"Shouldn't be added without being attached to a @link spec");let r=t.typeNameInSchema(n.SCOPE),i=e.type(r);return(0,c.assert)(i,()=>`Expected "${r}" to be defined`),new a.NonNullType(new a.ListType(new a.NonNullType(new a.ListType(new a.NonNullType(i)))))},compositionStrategy:u.ARGUMENT_COMPOSITION_STRATEGIES.UNION}],locations:[i.DirectiveLocation.FIELD_DEFINITION,i.DirectiveLocation.OBJECT,i.DirectiveLocation.INTERFACE,i.DirectiveLocation.SCALAR,i.DirectiveLocation.ENUM],composes:!0,supergraphSpecification:()=>t.REQUIRES_SCOPES_VERSIONS.latest()}))}get defaultCorePurpose(){return"SECURITY"}}t.RequiresScopesSpecDefinition=p,p.directiveName="requiresScopes",p.identity=`https://specs.apollo.dev/${p.directiveName}`,t.REQUIRES_SCOPES_VERSIONS=new o.FeatureDefinitions(p.identity).add(new p(new o.FeatureVersion(0,1))),(0,l.registerKnownFeature)(t.REQUIRES_SCOPES_VERSIONS)},35357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SOURCE_VERSIONS=t.SourceSpecDefinition=t.sourceIdentity=void 0;let n=r(57343),i=r(59143),o=r(48170),a=r(10556),s=r(30500),l=r(74533);t.sourceIdentity="https://specs.apollo.dev/source";class u extends i.FeatureDefinition{constructor(e,r){super(new i.FeatureUrl(t.sourceIdentity,"source",e),r),this.minimumFederationVersion=r,this.registerDirective((0,s.createDirectiveSpecification)({name:"sourceAPI",locations:[n.DirectiveLocation.SCHEMA],repeatable:!0,composes:!1})),this.registerDirective((0,s.createDirectiveSpecification)({name:"sourceType",locations:[n.DirectiveLocation.OBJECT,n.DirectiveLocation.INTERFACE],repeatable:!0,composes:!1})),this.registerDirective((0,s.createDirectiveSpecification)({name:"sourceField",locations:[n.DirectiveLocation.FIELD_DEFINITION],repeatable:!0,composes:!1}))}addElementsToSchema(e){let t=this.addDirective(e,"sourceAPI").addLocations(n.DirectiveLocation.SCHEMA);t.repeatable=!0,t.addArgument("name",new o.NonNullType(e.stringType()));let r=e.addType(new o.InputObjectType("HTTPHeaderMapping"));r.addField(new o.InputFieldDefinition("name")).type=new o.NonNullType(e.stringType()),r.addField(new o.InputFieldDefinition("as")).type=e.stringType(),r.addField(new o.InputFieldDefinition("value")).type=e.stringType();let i=e.addType(new o.InputObjectType("HTTPSourceAPI"));i.addField(new o.InputFieldDefinition("baseURL")).type=new o.NonNullType(e.stringType()),i.addField(new o.InputFieldDefinition("headers")).type=new o.ListType(new o.NonNullType(r)),t.addArgument("http",i);let a=this.addDirective(e,"sourceType").addLocations(n.DirectiveLocation.OBJECT,n.DirectiveLocation.INTERFACE);a.repeatable=!0,a.addArgument("api",new o.NonNullType(e.stringType()));let s=this.addScalarType(e,"URLPathTemplate"),l=this.addScalarType(e,"JSONSelection"),u=e.addType(new o.InputObjectType("HTTPSourceType"));u.addField(new o.InputFieldDefinition("GET")).type=s,u.addField(new o.InputFieldDefinition("POST")).type=s,u.addField(new o.InputFieldDefinition("headers")).type=new o.ListType(new o.NonNullType(r)),u.addField(new o.InputFieldDefinition("body")).type=l,a.addArgument("http",u),a.addArgument("selection",new o.NonNullType(l));let c=e.addType(new o.InputObjectType("KeyTypeMap"));c.addField(new o.InputFieldDefinition("key")).type=new o.NonNullType(e.stringType()),c.addField(new o.InputFieldDefinition("typeMap")).type=this.addScalarType(e,"TypenameKeyMap"),a.addArgument("keyTypeMap",c);let p=this.addDirective(e,"sourceField").addLocations(n.DirectiveLocation.FIELD_DEFINITION);p.repeatable=!0,p.addArgument("api",new o.NonNullType(e.stringType())),p.addArgument("selection",l),p.addArgument("keyTypeMap",c);let d=e.addType(new o.InputObjectType("HTTPSourceField"));return d.addField(new o.InputFieldDefinition("GET")).type=s,d.addField(new o.InputFieldDefinition("POST")).type=s,d.addField(new o.InputFieldDefinition("PUT")).type=s,d.addField(new o.InputFieldDefinition("PATCH")).type=s,d.addField(new o.InputFieldDefinition("DELETE")).type=s,d.addField(new o.InputFieldDefinition("body")).type=l,d.addField(new o.InputFieldDefinition("headers")).type=new o.ListType(new o.NonNullType(r)),p.addArgument("http",d),[]}allElementNames(){return["@sourceAPI","@sourceType","@sourceField"]}sourceAPIDirective(e){return this.directive(e,"sourceAPI")}sourceTypeDirective(e){return this.directive(e,"sourceType")}sourceFieldDirective(e){return this.directive(e,"sourceField")}getSourceDirectives(e){let r={};return e.schemaDefinition.appliedDirectivesOf("link").forEach(n=>{let{url:o,import:a}=n.arguments(),s=i.FeatureUrl.maybeParse(o);a&&s&&s.identity===t.sourceIdentity&&a.forEach(t=>{let n="string"==typeof t?t:t.name,i=("string"==typeof t?t:t.as||n).replace(/^@/,"");"@sourceAPI"===n?r.sourceAPI=e.directive(i):"@sourceType"===n?r.sourceType=e.directive(i):"@sourceField"===n&&(r.sourceField=e.directive(i))})}),r}validateSubgraphSchema(e){let t=super.validateSubgraphSchema(e),{sourceAPI:r,sourceType:n,sourceField:i}=this.getSourceDirectives(e);if(!(r||n||i))return[];let o=new Map;return r&&this.validateSourceAPI(r,o,t),n&&this.validateSourceType(n,o,t),i&&this.validateSourceField(i,o,t),t}validateSourceAPI(e,t,r){e.applications().forEach(n=>{let i;let{name:o,...a}=n.arguments();if(/^[a-z-_][a-z0-9-_]*$/i.test(o)||r.push(l.ERRORS.SOURCE_API_NAME_INVALID.err(`${e}(name: ${JSON.stringify(o)}) must specify name using only [a-zA-Z0-9-_] characters`,{nodes:n.sourceAST})),t.has(o)&&r.push(l.ERRORS.SOURCE_API_NAME_INVALID.err(`${e} must specify unique name (${JSON.stringify(o)} reused)`,{nodes:n.sourceAST})),f.forEach(t=>{a[t]&&(i&&r.push(l.ERRORS.SOURCE_API_PROTOCOL_INVALID.err(`${e} must specify only one of ${f.join(", ")} but specified both ${i} and ${t}`,{nodes:n.sourceAST})),i=t)}),i){t.set(o,i);let s=a[i];if(s&&i===d){let{baseURL:t,headers:i}=s;try{new URL(t)}catch(i){r.push(l.ERRORS.SOURCE_API_HTTP_BASE_URL_INVALID.err(`${e} http.baseURL ${JSON.stringify(t)} must be valid URL (error: ${i.message})`,{nodes:n.sourceAST}))}p(i,r,e.name)}}else r.push(l.ERRORS.SOURCE_API_PROTOCOL_INVALID.err(`${e} must specify one protocol from the set {${f.join(",")}}`,{nodes:n.sourceAST}))})}validateSourceType(e,t,r){e.applications().forEach(n=>{var i;let{api:o,selection:a,...s}=n.arguments();o&&t.has(o)||r.push(l.ERRORS.SOURCE_TYPE_API_ERROR.err(`${e} specifies unknown api ${o}`,{nodes:n.sourceAST}));let u=t.get(o)||d,c=u&&s[u];if(u&&!c&&r.push(l.ERRORS.SOURCE_TYPE_PROTOCOL_INVALID.err(`${e} must specify same ${u} argument as corresponding @sourceAPI for api ${o}`,{nodes:n.sourceAST})),c&&u===d){let{GET:t,POST:i,headers:o,body:a}=c;1!==[t,i].filter(Boolean).length&&r.push(l.ERRORS.SOURCE_TYPE_HTTP_METHOD_INVALID.err(`${e} must specify exactly one of http.GET or http.POST`,{nodes:n.sourceAST})),p(o,r,e.name),a&&t&&r.push(l.ERRORS.SOURCE_TYPE_HTTP_BODY_INVALID.err(`${e} http.GET cannot specify http.body`,{nodes:n.sourceAST}))}let f=n.parent.sourceAST;switch(null==f?void 0:f.kind){case"ObjectTypeDefinition":case"InterfaceTypeDefinition":(null===(i=f.directives)||void 0===i?void 0:i.some(e=>"key"===e.name.value))||r.push(l.ERRORS.SOURCE_TYPE_ON_NON_OBJECT_OR_NON_ENTITY.err(`${e} must be applied to an entity type that also has a @key directive`,{nodes:n.sourceAST}));break;default:r.push(l.ERRORS.SOURCE_TYPE_ON_NON_OBJECT_OR_NON_ENTITY.err(`${e} must be applied to object or interface type`,{nodes:n.sourceAST}))}})}validateSourceField(e,t,r){e.applications().forEach(i=>{var o,a,s;let{api:u,selection:c,...f}=i.arguments();u&&t.has(u)||r.push(l.ERRORS.SOURCE_FIELD_API_ERROR.err(`${e} specifies unknown api ${u}`,{nodes:i.sourceAST}));let h=t.get(u)||d,y=h&&f[h];if(y&&h===d){let{GET:t,POST:n,PUT:o,PATCH:a,DELETE:s,headers:u,body:c}=y,d=[t,n,o,a,s].filter(Boolean);d.length>1?r.push(l.ERRORS.SOURCE_FIELD_HTTP_METHOD_INVALID.err(`${e} allows at most one of http.{GET,POST,PUT,PATCH,DELETE}`)):1===d.length&&d[0],p(u,r,e.name),c&&(t?r.push(l.ERRORS.SOURCE_FIELD_HTTP_BODY_INVALID.err(`${e} http.GET cannot specify http.body`,{nodes:i.sourceAST})):s&&r.push(l.ERRORS.SOURCE_FIELD_HTTP_BODY_INVALID.err(`${e} http.DELETE cannot specify http.body`,{nodes:i.sourceAST})))}let m=i.parent;if((null===(o=m.sourceAST)||void 0===o?void 0:o.kind)!==n.Kind.FIELD_DEFINITION)r.push(l.ERRORS.SOURCE_FIELD_NOT_ON_ROOT_OR_ENTITY_FIELD.err(`${e} must be applied to field`,{nodes:i.sourceAST}));else{let t=m.parent;if((null===(a=t.sourceAST)||void 0===a?void 0:a.kind)!==n.Kind.OBJECT_TYPE_DEFINITION)r.push(l.ERRORS.SOURCE_FIELD_NOT_ON_ROOT_OR_ENTITY_FIELD.err(`${e} must be applied to field of object type`,{nodes:i.sourceAST}));else{let n=null===(s=t.sourceAST)||void 0===s?void 0:s.name.value;"Query"!==n&&"Mutation"!==n&&0===t.appliedDirectivesOf("key").length&&r.push(l.ERRORS.SOURCE_FIELD_NOT_ON_ROOT_OR_ENTITY_FIELD.err(`${e} must be applied to root Query or Mutation field or field of entity type`,{nodes:i.sourceAST}))}}})}}function c(e){return/^[a-zA-Z0-9-_]+$/.test(e)}function p(e,t,r){r.startsWith("@")||(r="@"+r),e&&e.forEach(({name:n,as:i,value:o},a)=>{c(n)||t.push(l.ERRORS.SOURCE_HTTP_HEADERS_INVALID.err(`${r} header ${JSON.stringify(e[a])} specifies invalid name`)),i&&!c(i)&&t.push(l.ERRORS.SOURCE_HTTP_HEADERS_INVALID.err(`${r} header ${JSON.stringify(e[a])} specifies invalid 'as' name`)),i&&o&&t.push(l.ERRORS.SOURCE_HTTP_HEADERS_INVALID.err(`${r} header ${JSON.stringify(e[a])} should specify at most one of 'as' or 'value'`))})}t.SourceSpecDefinition=u;let d="http",f=[d];t.SOURCE_VERSIONS=new i.FeatureDefinitions(t.sourceIdentity).add(new u(new i.FeatureVersion(0,1),new i.FeatureVersion(2,7))),(0,a.registerKnownFeature)(t.SOURCE_VERSIONS)},51801:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TAG_VERSIONS=t.TagSpecDefinition=t.tagIdentity=void 0;let n=r(57343),i=r(59143),o=r(48170),a=r(30500),s=r(74533),l=r(10556),u=r(56563);t.tagIdentity="https://specs.apollo.dev/tag";class c extends i.FeatureDefinition{constructor(e,r){super(new i.FeatureUrl(t.tagIdentity,"tag",e),r),this.tagLocations=[n.DirectiveLocation.FIELD_DEFINITION,n.DirectiveLocation.OBJECT,n.DirectiveLocation.INTERFACE,n.DirectiveLocation.UNION],this.printedTagDefinition="directive @tag(name: String!) repeatable on FIELD_DEFINITION | INTERFACE | OBJECT | UNION",this.isV01()||(this.tagLocations.push(n.DirectiveLocation.ARGUMENT_DEFINITION,n.DirectiveLocation.SCALAR,n.DirectiveLocation.ENUM,n.DirectiveLocation.ENUM_VALUE,n.DirectiveLocation.INPUT_OBJECT,n.DirectiveLocation.INPUT_FIELD_DEFINITION),this.printedTagDefinition="directive @tag(name: String!) repeatable on FIELD_DEFINITION | INTERFACE | OBJECT | UNION | ARGUMENT_DEFINITION | SCALAR | ENUM | ENUM_VALUE | INPUT_OBJECT | INPUT_FIELD_DEFINITION",this.isV02()||(this.tagLocations.push(n.DirectiveLocation.SCHEMA),this.printedTagDefinition="directive @tag(name: String!) repeatable on FIELD_DEFINITION | INTERFACE | OBJECT | UNION | ARGUMENT_DEFINITION | SCALAR | ENUM | ENUM_VALUE | INPUT_OBJECT | INPUT_FIELD_DEFINITION | SCHEMA")),this.tagDirectiveSpec=(0,a.createDirectiveSpecification)({name:"tag",locations:this.tagLocations,repeatable:!0,args:[{name:"name",type:e=>new o.NonNullType(e.stringType())}],composes:!0,supergraphSpecification:e=>t.TAG_VERSIONS.getMinimumRequiredVersion(e)}),this.registerDirective(this.tagDirectiveSpec)}isV01(){return this.version.equals(new i.FeatureVersion(0,1))}isV02(){return this.version.equals(new i.FeatureVersion(0,2))}checkCompatibleDirective(e){let t=Object.keys(e.arguments()).length>1,r=e.argument("name"),n=r&&(0,u.sameType)(r.type,new o.NonNullType(e.schema().stringType())),i=e.locations.every(e=>this.tagLocations.includes(e));if(t||!n||!i)return s.ERRORS.DIRECTIVE_DEFINITION_INVALID.err(`Found invalid @tag directive definition. Please ensure the directive definition in your schema's definitions matches the following:
	${this.printedTagDefinition}`)}}t.TagSpecDefinition=c,t.TAG_VERSIONS=new i.FeatureDefinitions(t.tagIdentity).add(new c(new i.FeatureVersion(0,1))).add(new c(new i.FeatureVersion(0,2))).add(new c(new i.FeatureVersion(0,3),new i.FeatureVersion(2,0))),(0,l.registerKnownFeature)(t.TAG_VERSIONS)},65550:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.didYouMean=t.suggestionList=void 0;let i=n(r(31103)),o=r(4749);t.suggestionList=function(e,t){let r=new Map,n=Math.floor(.4*e.length)+1,a=e.toLowerCase();for(let o of t){let t=a===o.toLowerCase()?1:(0,i.default)(e,o);t<=n&&r.set(o,t)}return(0,o.mapKeys)(r).sort((e,t)=>{let n=r.get(e)-r.get(t);return 0!==n?n:e.localeCompare(t)})},t.didYouMean=function(e){let t=" Did you mean ",r=e.map(e=>`"${e}"`);switch(e.length){case 0:return"";case 1:return t+r[0]+"?";case 2:return t+r[0]+" or "+r[1]+"?"}let n=r.slice(0,5),i=n.pop();return t+n.join(", ")+", or "+i+"?"}},34023:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Supergraph=t.isFed1Supergraph=t.validateSupergraph=t.ROUTER_SUPPORTED_SUPERGRAPH_FEATURES=t.DEFAULT_SUPPORTED_SUPERGRAPH_FEATURES=void 0;let n=r(59143),i=r(48170),o=r(35930),a=r(62161),s=r(48442),l=r(74533);t.DEFAULT_SUPPORTED_SUPERGRAPH_FEATURES=new Set(["https://specs.apollo.dev/core/v0.1","https://specs.apollo.dev/core/v0.2","https://specs.apollo.dev/join/v0.1","https://specs.apollo.dev/join/v0.2","https://specs.apollo.dev/join/v0.3","https://specs.apollo.dev/join/v0.4","https://specs.apollo.dev/join/v0.5","https://specs.apollo.dev/tag/v0.1","https://specs.apollo.dev/tag/v0.2","https://specs.apollo.dev/tag/v0.3","https://specs.apollo.dev/inaccessible/v0.1","https://specs.apollo.dev/inaccessible/v0.2"]),t.ROUTER_SUPPORTED_SUPERGRAPH_FEATURES=new Set(["https://specs.apollo.dev/core/v0.1","https://specs.apollo.dev/core/v0.2","https://specs.apollo.dev/join/v0.1","https://specs.apollo.dev/join/v0.2","https://specs.apollo.dev/join/v0.3","https://specs.apollo.dev/join/v0.4","https://specs.apollo.dev/join/v0.5","https://specs.apollo.dev/tag/v0.1","https://specs.apollo.dev/tag/v0.2","https://specs.apollo.dev/tag/v0.3","https://specs.apollo.dev/inaccessible/v0.1","https://specs.apollo.dev/inaccessible/v0.2","https://specs.apollo.dev/authenticated/v0.1","https://specs.apollo.dev/requiresScopes/v0.1","https://specs.apollo.dev/policy/v0.1","https://specs.apollo.dev/source/v0.1","https://specs.apollo.dev/context/v0.1","https://specs.apollo.dev/cost/v0.1"]);let u=n.FeatureUrl.parse("https://specs.apollo.dev/core/v0.1");function c(e){let t=e.coreFeatures;if(!t)throw l.ERRORS.INVALID_FEDERATION_SUPERGRAPH.err("Invalid supergraph: must be a core schema");let r=t.getByIdentity(o.joinIdentity);if(!r)throw l.ERRORS.INVALID_FEDERATION_SUPERGRAPH.err("Invalid supergraph: must use the join spec");let n=o.JOIN_VERSIONS.find(r.url.version);if(!n)throw l.ERRORS.INVALID_FEDERATION_SUPERGRAPH.err(`Invalid supergraph: uses unsupported join spec version ${r.url.version} (supported versions: ${o.JOIN_VERSIONS.versions().join(", ")})`);return[t,n]}t.validateSupergraph=c,t.isFed1Supergraph=function(e){return c(e)[1].version.equals(new n.FeatureVersion(0,1))};class p{constructor(e,r=t.DEFAULT_SUPPORTED_SUPERGRAPH_FEATURES,o=!0){this.schema=e,this.shouldValidate=o;let[a]=c(e);null!==r&&function(e,t){let r=[],o=e.coreItself;if(o.url.equals(u)){let t=[...e.allFeatures()].filter(e=>e.purpose);t.length>0&&r.push(l.ERRORS.UNSUPPORTED_LINKED_FEATURE.err(`the \`for:\` argument is unsupported by version ${o.url.version} of the core spec. Please upgrade to at least @core v0.2 (https://specs.apollo.dev/core/v0.2).`,{nodes:(0,i.sourceASTs)(o.directive,...t.map(e=>e.directive))}))}for(let n of e.allFeatures())(n.url.equals(u)||"EXECUTION"===n.purpose||"SECURITY"===n.purpose)&&!t.has(n.url.base.toString())&&r.push(l.ERRORS.UNSUPPORTED_LINKED_FEATURE.err(`feature ${n.url} is for: ${n.purpose} but is unsupported`,{nodes:n.directive.sourceAST}));if(r.length>0)throw(0,n.ErrCoreCheckFailed)(r)}(a,r),o?e.validate():e.assumeValid(),this.containedSubgraphs=(0,s.extractSubgraphsNamesAndUrlsFromSupergraph)(e)}static build(e,t){return new p("string"==typeof e?(0,a.buildSchema)(e,{validate:!1}):(0,a.buildSchemaFromAST)(e,{validate:!1}),null==t?void 0:t.supportedFeatures,null==t?void 0:t.validateSupergraph)}static buildForTests(e,r){return p.build(e,{supportedFeatures:t.ROUTER_SUPPORTED_SUPERGRAPH_FEATURES,validateSupergraph:r})}subgraphsMetadata(){return this.containedSubgraphs}subgraphs(){if(!this._subgraphs){let e=(0,s.extractSubgraphsFromSupergraph)(this.schema,this.shouldValidate);this._subgraphs=e[0],this._subgraphNameToGraphEnumValue=e[1]}return this._subgraphs}subgraphNameToGraphEnumValue(){if(!this._subgraphNameToGraphEnumValue){let e=(0,s.extractSubgraphsFromSupergraph)(this.schema,this.shouldValidate);this._subgraphs=e[0],this._subgraphNameToGraphEnumValue=e[1]}return new Map([...this._subgraphNameToGraphEnumValue])}apiSchema(){return this.schema.toAPISchema()}}t.Supergraph=p},56563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typesCanBeMerged=t.isStrictSubtype=t.isSubtype=t.isDirectSubtype=t.sameType=t.DEFAULT_SUBTYPING_RULES=t.ALL_SUBTYPING_RULES=void 0;let n=r(48170);function i(e,t){switch(e.kind){case"ListType":return(0,n.isListType)(t)&&i(e.ofType,t.ofType);case"NonNullType":return(0,n.isNonNullType)(t)&&i(e.ofType,t.ofType);default:return(0,n.isNamedType)(t)&&e.name===t.name}}function o(e,t,r=(e,t)=>e.hasTypeMember(t),i=(e,t)=>e.implementsInterface(t)){return(0,n.isUnionType)(e)?(0,n.isObjectType)(t)&&r(e,t):i(t,e)}function a(e,r,n=t.DEFAULT_SUBTYPING_RULES,o=(e,t)=>e.hasTypeMember(t),a=(e,t)=>e.implementsInterface(t)){return i(e,r)||s(e,r,n,o,a)}function s(e,r,i=t.DEFAULT_SUBTYPING_RULES,s=(e,t)=>e.hasTypeMember(t),l=(e,t)=>e.implementsInterface(t)){switch(r.kind){case"ListType":return i.includes("list_propagation")&&(0,n.isListType)(e)&&a(e.ofType,r.ofType,i,s,l);case"NonNullType":if((0,n.isNonNullType)(e))return i.includes("nonNullable_propagation")&&a(e.ofType,r.ofType,i,s,l);return i.includes("nonNullable_downgrade")&&a(e,r.ofType,i,s,l);case"ObjectType":case"InterfaceType":if((0,n.isListType)(e))return i.includes("list_upgrade")&&a(e.ofType,r,i,s,l);return i.includes("direct")&&((0,n.isInterfaceType)(e)||(0,n.isUnionType)(e))&&o(e,r,s,l);default:return(0,n.isListType)(e)&&i.includes("list_upgrade")&&a(e.ofType,r,i,s,l)}}t.ALL_SUBTYPING_RULES=["direct","nonNullable_downgrade","list_upgrade","list_propagation","nonNullable_propagation"],t.DEFAULT_SUBTYPING_RULES=t.ALL_SUBTYPING_RULES.filter(e=>"list_upgrade"!==e),t.sameType=i,t.isDirectSubtype=o,t.isSubtype=a,t.isStrictSubtype=s,t.typesCanBeMerged=function e(t,r){return(0,n.isNonNullType)(t)?!!(0,n.isNonNullType)(r)&&e(t.ofType,r.ofType):(0,n.isListType)(t)?!!(0,n.isListType)(r)&&e(t.ofType,r.ofType):(0,n.isCompositeType)(t)?(0,n.isCompositeType)(r):i(t,r)}},4749:(e,t)=>{"use strict";function r(e,t){if(!e)throw Error("string"==typeof t?t:t())}Object.defineProperty(t,"__esModule",{value:!0}),t.setsEqual=t.composeSets=t.mergeMapOrNull=t.findLast=t.isNonEmptyArray=t.removeArrayElement=t.isDefined=t.printHumanReadableList=t.joinStrings=t.validateStringContainsBoolean=t.copyWitNewLength=t.MapWithCachedArrays=t.setValues=t.mapEntries=t.mapKeys=t.mapValues=t.firstOf=t.isSubset=t.arrayEquals=t.OrderedMap=t.SetMultiMap=t.MultiMap=t.assertUnreachable=t.assert=void 0,t.assert=r,t.assertUnreachable=function(e){throw Error("Didn't expect to get here")};class n extends Map{add(e,t){let r=this.get(e);return r?r.push(t):this.set(e,[t]),this}addAll(e){for(let[t,r]of e.entries())for(let e of r)this.add(t,e);return this}}t.MultiMap=n;class i extends Map{add(e,t){let r=this.get(e);return r||(r=new Set,this.set(e,r)),r.add(t),this}addAll(e){for(let[t,r]of e.entries())for(let e of r)this.add(t,e);return this}}t.SetMultiMap=i;class o{static defaultCompareFn(e,t){return e<t?-1:t<e?1:0}constructor(e=o.defaultCompareFn){this._keys=[],this._values=new Map,this._compareFn=e}add(e,t){this._values.has(e)||this.insertKeyInOrder(e),this._values.set(e,t)}get(e){return this._values.get(e)}has(e){return this._values.has(e)}get size(){return this._keys.length}keys(){return this._keys}values(){return this._keys.map(e=>{let t=this._values.get(e);return r(t,"value for known key not found in OrderedMap"),t})}insertKeyInOrder(e){let t=0,r=this._keys.length-1;for(;t<=r;){let n=Math.floor((r+t)/2);0>this._compareFn(this._keys[n],e)?t=n+1:r=n-1}this._keys=this._keys.slice(0,t).concat(e).concat(this._keys.slice(t))}*[Symbol.iterator](){for(let e=0;e<this._keys.length;e+=1){let t=this._values.get(this._keys[e]);r(t,"value for known key not found in OrderedMap"),yield t}}}function a(e){let t=Array(e.size),r=0;for(let n of e.values())t[r++]=n;return t}function s(e){let t=Array(e.size),r=0;for(let n of e.keys())t[r++]=n;return t}t.OrderedMap=o,t.arrayEquals=function(e,t,r){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!(r?r(e[n],t[n]):e[n]===t[n]))return!1;return!0},t.isSubset=function(e,t){if(e===t)return!0;for(let r of t)if(!e.has(r))return!1;return!0},t.firstOf=function(e){let t=e[Symbol.iterator]().next();return t.done?void 0:t.value},t.mapValues=a,t.mapKeys=s,t.mapEntries=function(e){let t=Array(e.size),r=0;for(let n of e.entries())t[r++]=n;return t},t.setValues=function(e){let t=Array(e.size),r=0;for(let n of e.values())t[r++]=n;return t};class l{constructor(){this.map=new Map}clearCaches(){this.cachedKeys=void 0,this.cachedValues=void 0}get size(){return this.map.size}has(e){return this.map.has(e)}get(e){return this.map.get(e)}set(e,t){return this.map.set(e,t),this.clearCaches(),this}delete(e){let t=this.map.delete(e);return t&&this.clearCaches(),t}clear(){this.map.clear(),this.clearCaches()}keys(){return this.cachedKeys||(this.cachedKeys=s(this.map)),this.cachedKeys}values(){return this.cachedValues||(this.cachedValues=a(this.map)),this.cachedValues}}function u(e,t=", ",r,n=" and "){if(0==e.length)return"";let i=e[0];if(1==e.length)return i;let o=e[e.length-1];return 2==e.length?i+(r||n)+o:i+(r||t)+e.slice(1,e.length-1).join(t)+n+o}t.MapWithCachedArrays=l,t.copyWitNewLength=function(e,t){r(t>=e.length,()=>`${t} < ${e.length}`);let n=Array(t);for(let t=0;t<e.length;t++)n[t]=e[t];return n},t.validateStringContainsBoolean=function(e){if(!e)return!1;switch(e.toLocaleLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1;default:return}},t.joinStrings=u,t.printHumanReadableList=function(e,{emptyValue:t,prefix:r,prefixPlural:n,lastSeparator:i,cutoff_output_length:o}){if(0===e.length)return null!=t?t:"";if(1==e.length)return r?r+" "+e[0]:e[0];let a=null!=o?o:100,{lastIdx:s}=e.reduce(({lastIdx:e,length:t},r)=>t+r.length>a?{lastIdx:e,length:t}:{lastIdx:e+1,length:t+r.length},{lastIdx:0,length:0}),l=e.slice(0,Math.max(1,s)),c=n?n+" ":r?r+" ":"";return l.length===e.length?c+u(l,", ",void 0,i):c+u(l,", ",void 0,", ")+", ..."},t.isDefined=e=>void 0!==e,t.removeArrayElement=function(e,t){let r=t.indexOf(e);return r>=0&&(t.splice(r,1),!0)},t.isNonEmptyArray=function(e){return e.length>0},t.findLast=function(e,t){for(let r=e.length-1;r>=0;r--){let n=e[r];if(t(n))return n}},t.mergeMapOrNull=function(e,t){return e?t?new Map([...e,...t]):e:t},t.composeSets=function(e,t){if(!e&&!t)return null;let r=new Set;return null==e||e.forEach(e=>r.add(e)),null==t||t.forEach(e=>r.add(e)),r},t.setsEqual=function(e,t){if(e===t||!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}},43466:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchema=void 0;let n=r(48170),i=r(57343),o=r(24056),a=r(93566),s=r(56563),l=r(74533);t.validateSchema=function(e){return new c(e).validate()};class u{constructor(e){this.onError=e,this.visitedTypes=new Set,this.fieldPath=[],this.fieldPathIndexByTypeName=new Map}detectCycles(e){if(!this.visitedTypes.has(e.name)){for(let t of(this.visitedTypes.add(e.name),this.fieldPathIndexByTypeName.set(e.name,this.fieldPath.length),e.fields()))if((0,n.isNonNullType)(t.type)&&(0,n.isInputObjectType)(t.type.ofType)){let e=t.type.ofType,r=this.fieldPathIndexByTypeName.get(e.name);if(this.fieldPath.push(t),void 0===r)this.detectCycles(e);else{let t=this.fieldPath.slice(r),i=t.map(e=>e.name).join(".");this.onError(`Cannot reference Input Object "${e.name}" within itself through a series of non-null fields: "${i}".`,{nodes:(0,n.sourceASTs)(...t)})}this.fieldPath.pop()}this.fieldPathIndexByTypeName.delete(e.name)}}}class c{constructor(e){this.schema=e,this.emptyVariables=new n.VariableDefinitions,this.hasMissingTypes=!1,this.errors=[]}validate(){for(let e of this.schema.types())switch(a.introspectionTypeNames.includes(e.name)||this.validateName(e),e.kind){case"ObjectType":case"InterfaceType":this.validateObjectOrInterfaceType(e);break;case"InputObjectType":this.validateInputObjectType(e);break;case"UnionType":this.validateUnionType(e);break;case"EnumType":this.validateEnumType(e)}for(let e of this.schema.allDirectives()){for(let t of(this.validateName(e),e.arguments()))this.validateArg(t);for(let t of e.applications())this.validateDirectiveApplication(e,t)}if(!this.hasMissingTypes){let e=new u((e,t)=>this.addError(e,t));for(let t of this.schema.types())switch(t.kind){case"ObjectType":case"InterfaceType":this.validateImplementedInterfaces(t);break;case"InputObjectType":e.detectCycles(t)}}return this.errors}addError(e,t){this.errors.push(l.ERRORS.INVALID_GRAPHQL.err(e,t))}validateHasType(e){return e.type||(this.addError(`Element ${e.coordinate} does not have a type set`,{nodes:e.sourceAST}),this.hasMissingTypes=!1),!!e.type}validateName(e){if((0,a.isIntrospectionName)(e.name)){this.addError(`Name "${e.name}" must not begin with "__", which is reserved by GraphQL introspection.`,e.sourceAST?{nodes:e.sourceAST}:{});return}try{(0,i.assertName)(e.name)}catch(t){this.addError(t.message,e.sourceAST?{nodes:e.sourceAST}:{})}}validateObjectOrInterfaceType(e){for(let t of(e.hasFields()||this.addError(`Type ${e.name} must define one or more fields.`,{nodes:e.sourceAST}),e.fields()))for(let e of(this.validateName(t),this.validateHasType(t),t.arguments()))this.validateArg(e)}validateImplementedInterfaces(e){for(let t of(e.implementsInterface(e.name)&&this.addError(`Type ${e} cannot implement itself because it would create a circular reference.`,{nodes:(0,n.sourceASTs)(e,e.interfaceImplementation(e.name))}),e.interfaces())){for(let r of t.fields()){let t=e.field(r.name);if(!t){this.addError(`Interface field ${r.coordinate} expected but ${e} does not provide it.`,{nodes:(0,n.sourceASTs)(r,e)});continue}for(let e of(this.validateHasType(r)&&!(0,s.isSubtype)(r.type,t.type)&&this.addError(`Interface field ${r.coordinate} expects type ${r.type} but ${t.coordinate} of type ${t.type} is not a proper subtype.`,{nodes:(0,n.sourceASTs)(r,t)}),r.arguments())){let r=t.argument(e.name);if(!r){this.addError(`Interface field argument ${e.coordinate} expected but ${t.coordinate} does not provide it.`,{nodes:(0,n.sourceASTs)(e,t)});continue}this.validateHasType(e)&&!(0,s.sameType)(e.type,r.type)&&this.addError(`Interface field argument ${e.coordinate} expects type ${e.type} but ${r.coordinate} is type ${r.type}.`,{nodes:(0,n.sourceASTs)(e,r)})}for(let e of t.arguments())!r.argument(e.name)&&e.isRequired()&&this.addError(`Field ${t.coordinate} includes required argument ${e.name} that is missing from the Interface field ${r.coordinate}.`,{nodes:(0,n.sourceASTs)(e,r)})}for(let r of t.interfaces())e.implementsInterface(r)||(r===e?this.addError(`Type ${e} cannot implement ${t} because it would create a circular reference.`,{nodes:(0,n.sourceASTs)(e,t)}):this.addError(`Type ${e} must implement ${r} because it is implemented by ${t}.`,{nodes:(0,n.sourceASTs)(e,t,r)}))}}validateInputObjectType(e){for(let t of(e.hasFields()||this.addError(`Input Object type ${e.name} must define one or more fields.`,{nodes:e.sourceAST}),e.fields()))this.validateName(t),this.validateHasType(t)&&(t.isRequired()&&t.isDeprecated()&&this.addError(`Required input field ${t.coordinate} cannot be deprecated.`,{nodes:(0,n.sourceASTs)(t.appliedDirectivesOf("deprecated")[0],t)}),void 0===t.defaultValue||(0,o.isValidValue)(t.defaultValue,t,new n.VariableDefinitions)||this.addError(`Invalid default value (got: ${(0,o.valueToString)(t.defaultValue)}) provided for input field ${t.coordinate} of type ${t.type}.`,{nodes:(0,n.sourceASTs)(t)}))}validateArg(e){if(this.validateName(e),this.validateHasType(e)&&(e.isRequired()&&e.isDeprecated()&&this.addError(`Required argument ${e.coordinate} cannot be deprecated.`,{nodes:(0,n.sourceASTs)(e.appliedDirectivesOf("deprecated")[0],e)}),void 0!==e.defaultValue&&!(0,o.isValidValue)(e.defaultValue,e,new n.VariableDefinitions))){let t=this.schema.builtInScalarTypes().find(t=>e.type&&(0,n.isScalarType)(e.type)&&t.name===e.type.name);t&&(0,o.isValidValueApplication)(e.defaultValue,t,e.defaultValue,new n.VariableDefinitions)||this.addError(`Invalid default value (got: ${(0,o.valueToString)(e.defaultValue)}) provided for argument ${e.coordinate} of type ${e.type}.`,{nodes:(0,n.sourceASTs)(e)})}}validateUnionType(e){0===e.membersCount()&&this.addError(`Union type ${e.coordinate} must define one or more member types.`,{nodes:e.sourceAST})}validateEnumType(e){for(let t of(0===e.values.length&&this.addError(`Enum type ${e.coordinate} must define one or more values.`,{nodes:e.sourceAST}),e.values))this.validateName(t),("true"===t.name||"false"===t.name||"null"===t.name)&&this.addError(`Enum type ${e.coordinate} cannot include value: ${t}.`,{nodes:t.sourceAST})}validateDirectiveApplication(e,t){for(let r of e.arguments()){let i=t.arguments()[r.name];if(i&&r.type&&!(0,o.isValidValue)(i,r,this.emptyVariables)){let i=t.parent,o=i instanceof n.NamedSchemaElement?i.coordinate:"schema";this.addError(`Invalid value for "${r.coordinate}" of type "${r.type}" in application of "${e.coordinate}" to "${o}".`,{nodes:(0,n.sourceASTs)(t,r)})}}}}},94428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KnownTypeNamesInFederationRule=void 0;let n=r(57343),i=r(65550);t.KnownTypeNamesInFederationRule=function(e){let t=e.getSchema(),r=t?t.getTypeMap():Object.create(null),a=Object.create(null);for(let t of e.getDocument().definitions)((0,n.isTypeDefinitionNode)(t)||(0,n.isTypeExtensionNode)(t))&&(a[t.name.value]=!0);let s=Object.keys(r).concat(Object.keys(a));return{NamedType(t,l,u,c,p){var d,f;let h=t.name.value;if(!r[h]&&!a[h]){let r=null!==(d=p[2])&&void 0!==d?d:u,a=null!=r&&!Array.isArray(f=r)&&((0,n.isTypeSystemDefinitionNode)(f)||(0,n.isTypeSystemExtensionNode)(f));if(a&&-1!==o.indexOf(h))return;let l=(0,i.suggestionList)(h,a?o.concat(s):s);e.reportError(new n.GraphQLError(`Unknown type "${h}".`+(0,i.didYouMean)(l),{nodes:t}))}}}};let o=[...n.specifiedScalarTypes,...n.introspectionTypes].map(e=>e.name)},24056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectVariablesInValue=t.argumentsFromAST=t.isValidLeafValue=t.valueFromASTUntyped=t.valueFromAST=t.isValidValueApplication=t.isValidValue=t.valueToAST=t.valueNodeToConstValueNode=t.withDefaultValues=t.argumentsEquals=t.valueEquals=t.valueToString=void 0;let n=r(48170),i=r(57343),o=r(65550),a=r(73837),s=r(56563),l=r(4749),u=r(74533);function c(e,t){if(null==e)return"null";if(t&&(0,n.isNonNullType)(t))return c(e,t.ofType);if(t&&(0,n.isCustomScalarType)(t)&&(t=void 0),(0,n.isVariable)(e))return e.toString();if(Array.isArray(e)){let r;return t&&(0,n.isListType)(t)&&(r=t.ofType),"["+e.map(e=>c(e,r)).join(", ")+"]"}if(t&&(0,n.isListType)(t))return c(e,t.ofType);if("object"==typeof e)return t&&!(0,n.isInputObjectType)(t)&&(t=void 0),"{"+Object.keys(e).map(r=>{var n;let i=t?null===(n=t.field(r))||void 0===n?void 0:n.type:void 0;return`${r}: ${c(e[r],i)}`}).join(", ")+"}";if("string"==typeof e){if(t){if((0,n.isEnumType)(t))return t.value(e)?e:JSON.stringify(e);if(t===t.schema().idType()&&y.test(e))return e}return JSON.stringify(e)}return String(e)}function p(e,t){return e===t||(Array.isArray(e)?Array.isArray(t)&&function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!p(e[r],t[r]))return!1;return!0}(e,t):"object"==typeof e?"object"==typeof t&&d(e,t):e===t)}function d(e,t){let r=Object.keys(e),n=Object.keys(t);if(r.length!=n.length)return!1;for(let i of r){let r=e[i],o=t[i];if(void 0===o&&!n.includes(i)||!p(r,o))return!1}return!0}function f(e){return Error(e)}function h(e,t){if((0,n.isVariable)(e))return e;if(null===e){if((0,n.isNonNullType)(t))throw u.ERRORS.INVALID_GRAPHQL.err(`Invalid null value for non-null type ${t} while computing default values`);return null}if((0,n.isNonNullType)(t))return h(e,t.ofType);if((0,n.isListType)(t))return Array.isArray(e)?e.map(e=>h(e,t.ofType)):h(e,t.ofType);if((0,n.isInputObjectType)(t)){if("object"!=typeof e)throw u.ERRORS.INVALID_GRAPHQL.err(`Expected value for type ${t} to be an object, but is ${typeof e}.`);let r=Object.create(null);for(let i of t.fields()){if(!i.type)throw f(`Cannot compute default value for field ${i.name} of ${t} as the field type is undefined`);let o=e[i.name];if(void 0===o){if(void 0!==i.defaultValue)r[i.name]=h(i.defaultValue,i.type);else if((0,n.isNonNullType)(i.type))throw u.ERRORS.INVALID_GRAPHQL.err(`Field "${i.name}" of required type ${t} was not provided.`)}else r[i.name]=h(o,i.type)}for(let r of Object.keys(e))if(!t.field(r)){let e=(0,o.suggestionList)(r,t.fields().map(e=>e.name));throw u.ERRORS.INVALID_GRAPHQL.err(`Field "${r}" is not defined by type "${t}".`+(0,o.didYouMean)(e))}return r}return e}t.valueToString=c,t.valueEquals=p,t.argumentsEquals=function(e,t){return e===t||d(e,t)},t.withDefaultValues=function(e,t){if(!t.type)throw f(`Cannot compute default value for argument ${t} as the type is undefined`);return void 0===e&&t.defaultValue?h(t.defaultValue,t.type):h(e,t.type)};let y=/^-?(?:0|[1-9][0-9]*)$/;function m(e,t){return(0,n.isNonNullType)(t)?!!(0,n.isNonNullType)(e)&&m(e.ofType,t.ofType):(0,n.isNonNullType)(e)?m(e.ofType,t):(0,n.isListType)(t)?!!(0,n.isListType)(e)&&m(e.ofType,t.ofType):!(0,n.isListType)(e)&&(0,s.sameType)(e,t)}function v(e,t,r,i){if((0,n.isVariable)(e)){let o=i.definition(e);return!!o&&function(e,t,r){let i=e.type;return(0,n.isNonNullType)(t)&&!(0,n.isNonNullType)(i)?(!!(void 0!==e.defaultValue&&null!==e.defaultValue)||void 0!==r)&&m(i,t.ofType):m(i,t)}(o,t,r)}if((0,n.isNonNullType)(t))return null!==e&&v(e,t.ofType,void 0,i);if(null==e)return!0;if((0,n.isListType)(t)){let n=t.ofType;return Array.isArray(e)?e.every(e=>v(e,n,void 0,i)):v(e,n,r,i)}if((0,n.isInputObjectType)(t)){if("object"!=typeof e)return!1;let r=new Set(Object.keys(e)),n=t.fields().every(t=>(r.delete(t.name),v(e[t.name],t.type,t.defaultValue,i))),o=0!==r.size;return n&&!o}return _(t.schema(),e,t)}function g(e,t){if(e.kind===i.Kind.NULL){if((0,n.isNonNullType)(t))throw u.ERRORS.INVALID_GRAPHQL.err(`Invalid null value for non-null type "${t}"`);return null}if(e.kind===i.Kind.VARIABLE)return new n.Variable(e.name.value);if((0,n.isNonNullType)(t)&&(t=t.ofType),(0,n.isListType)(t)){let r=t.ofType;return e.kind===i.Kind.LIST?e.values.map(e=>g(e,r)):[g(e,r)]}if((0,n.isIntType)(t)){if(e.kind!==i.Kind.INT)throw u.ERRORS.INVALID_GRAPHQL.err(`Int cannot represent non-integer value ${(0,i.print)(e)}.`);let t=parseInt(e.value,10);if(t>2147483647||t<-2147483648)throw u.ERRORS.INVALID_GRAPHQL.err(`Int cannot represent non 32-bit signed integer value ${t}.`);return t}if((0,n.isFloatType)(t)){let t;if(e.kind===i.Kind.INT)t=parseInt(e.value,10);else if(e.kind===i.Kind.FLOAT)t=parseFloat(e.value);else throw u.ERRORS.INVALID_GRAPHQL.err(`Float can only represent integer or float value, but got a ${e.kind}.`);if(!isFinite(t))throw u.ERRORS.INVALID_GRAPHQL.err(`Float cannot represent non numeric value ${t}.`);return t}if((0,n.isBooleanType)(t)){if(e.kind!==i.Kind.BOOLEAN)throw u.ERRORS.INVALID_GRAPHQL.err(`Boolean cannot represent a non boolean value ${(0,i.print)(e)}.`);return e.value}if((0,n.isStringType)(t)){if(e.kind!==i.Kind.STRING)throw u.ERRORS.INVALID_GRAPHQL.err(`String cannot represent non string value ${(0,i.print)(e)}.`);return e.value}if((0,n.isIDType)(t)){if(e.kind!==i.Kind.STRING&&e.kind!==i.Kind.INT)throw u.ERRORS.INVALID_GRAPHQL.err(`ID cannot represent value ${(0,i.print)(e)}.`);return e.value}if((0,n.isScalarType)(t))return b(e);if((0,n.isInputObjectType)(t)){if(e.kind!==i.Kind.OBJECT)throw u.ERRORS.INVALID_GRAPHQL.err(`Input Object Type ${t} cannot represent non-object value ${(0,i.print)(e)}.`);let r=Object.create(null);for(let n of e.fields){let e=n.name.value,i=t.field(e);if(!i)throw u.ERRORS.INVALID_GRAPHQL.err(`Unknown field "${e}" found in value for Input Object Type "${t}".`);r[e]=g(n.value,i.type)}return r}if((0,n.isEnumType)(t)){if(e.kind!==i.Kind.STRING&&e.kind!==i.Kind.ENUM)throw u.ERRORS.INVALID_GRAPHQL.err(`Enum Type ${t} cannot represent value ${(0,i.print)(e)}.`);if(!t.value(e.value))throw u.ERRORS.INVALID_GRAPHQL.err(`Enum Type ${t} has no value ${e.value}.`);return e.value}(0,l.assert)(!1,()=>`Unexpected input type ${t} of kind ${t.kind}.`)}function b(e){switch(e.kind){case i.Kind.NULL:return null;case i.Kind.INT:return parseInt(e.value,10);case i.Kind.FLOAT:return parseFloat(e.value);case i.Kind.STRING:case i.Kind.ENUM:case i.Kind.BOOLEAN:return e.value;case i.Kind.LIST:return e.values.map(b);case i.Kind.OBJECT:let t=Object.create(null);return e.fields.forEach(e=>t[e.name.value]=b(e.value)),t;case i.Kind.VARIABLE:return new n.Variable(e.name.value)}}function _(e,t,r){if((0,n.isCustomScalarType)(r))return!0;if("boolean"==typeof t)return r===e.booleanType();if("number"==typeof t&&isFinite(t)){let n=String(t);return r===e.intType()||r===e.idType()?y.test(n):r===e.floatType()}return"string"==typeof t&&((0,n.isEnumType)(r)?void 0!==r.value(t):r!==e.booleanType()&&r!==e.intType()&&r!==e.floatType())}t.valueNodeToConstValueNode=function e(t){if(t.kind===i.Kind.NULL||t.kind===i.Kind.INT||t.kind===i.Kind.FLOAT||t.kind===i.Kind.STRING||t.kind===i.Kind.BOOLEAN||t.kind===i.Kind.ENUM)return t;if(t.kind===i.Kind.LIST){let r=t.values.map(t=>e(t));return{...t,values:r}}if(t.kind===i.Kind.OBJECT){let r=t.fields.map(t=>({...t,value:e(t.value)}));return{...t,fields:r}}if(t.kind===i.Kind.VARIABLE)throw Error("Unexpected VariableNode in const AST");(0,l.assertUnreachable)(t)},t.valueToAST=function e(t,r){if(void 0!==t){if((0,n.isNonNullType)(r)){let n=e(t,r.ofType);if((null==n?void 0:n.kind)===i.Kind.NULL)throw f(`Invalid null value ${c(t)} for non-null type ${r}`);return n}if(null===t)return{kind:i.Kind.NULL};if((0,n.isVariable)(t))return{kind:i.Kind.VARIABLE,name:{kind:i.Kind.NAME,value:t.name}};if((0,n.isCustomScalarType)(r))return function e(t){if(void 0!==t){if(null===t)return{kind:i.Kind.NULL};if((0,n.isVariable)(t))return{kind:i.Kind.VARIABLE,name:{kind:i.Kind.NAME,value:t.name}};if(Array.isArray(t)){let r=[];for(let n of t){let t=e(n);void 0!==t&&r.push(t)}return{kind:i.Kind.LIST,values:r}}if("object"==typeof t){let r=[];for(let n of Object.keys(t)){let o=e(t[n]);o&&r.push({kind:i.Kind.OBJECT_FIELD,name:{kind:i.Kind.NAME,value:n},value:o})}return{kind:i.Kind.OBJECT,fields:r}}if("boolean"==typeof t)return{kind:i.Kind.BOOLEAN,value:t};if("number"==typeof t&&isFinite(t)){let e=String(t);return y.test(e)?{kind:i.Kind.INT,value:e}:{kind:i.Kind.FLOAT,value:e}}if("string"==typeof t)return{kind:i.Kind.STRING,value:t};throw f(`Invalid value, cannot be converted to AST: ${(0,a.inspect)(t,!0,10,!0)}`)}}(t);if((0,n.isListType)(r)){let n=r.ofType,o=Array.from(t);if(null!=o){let t=[];for(let r of o){let i=e(r,n);null!=i&&t.push(i)}return{kind:i.Kind.LIST,values:t}}return e(t,n)}if((0,n.isInputObjectType)(r)){if("object"!=typeof t)throw f(`Invalid non-objet value for input type ${r}, cannot be converted to AST: ${(0,a.inspect)(t,!0,10,!0)}`);let n=[];for(let o of r.fields()){if(!o.type)throw f(`Cannot convert value ${c(t)} as field ${o} has no type set`);let r=e(t[o.name],o.type);r&&n.push({kind:i.Kind.OBJECT_FIELD,name:{kind:i.Kind.NAME,value:o.name},value:r})}return{kind:i.Kind.OBJECT,fields:n}}if("boolean"==typeof t)return{kind:i.Kind.BOOLEAN,value:t};if("number"==typeof t&&isFinite(t)){let e=String(t);return y.test(e)?{kind:i.Kind.INT,value:e}:{kind:i.Kind.FLOAT,value:e}}if("string"==typeof t)return(0,n.isEnumType)(r)?{kind:i.Kind.ENUM,value:t}:r===r.schema().idType()&&y.test(t)?{kind:i.Kind.INT,value:t}:{kind:i.Kind.STRING,value:t};throw f(`Invalid value for type ${r}, cannot be converted to AST: ${(0,a.inspect)(t)}`)}},t.isValidValue=function(e,t,r){return v(e,t.type,t.defaultValue,r)},t.isValidValueApplication=v,t.valueFromAST=g,t.valueFromASTUntyped=b,t.isValidLeafValue=_,t.argumentsFromAST=function(e,t,r){var n;if(!t||0===t.length)return;let o=Object.create(null);for(let a of t){let t=a.name.value,s=null===(n=r.argument(t))||void 0===n?void 0:n.type;if(!s)throw u.ERRORS.INVALID_GRAPHQL.err(`Unknown argument "${t}" found in value: "${e}" has no argument named "${t}"`);try{o[t]=g(a.value,s)}catch(e){if(e instanceof i.GraphQLError)throw u.ERRORS.INVALID_GRAPHQL.err(`Invalid value for argument "${t}": ${e.message}`);throw e}}return o},t.collectVariablesInValue=function e(t,r){if((0,n.isVariable)(t)){r.add(t);return}t&&(Array.isArray(t)&&t.forEach(t=>e(t,r)),"object"==typeof t&&Object.keys(t).forEach(n=>e(t[n],r)))}},92717:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildFederatedSchema=t.buildSubgraphSchema=void 0;let n=r(73837),i=r(57343),o=r(73556),a=r(70854),s=r(95222);function l(e){var t;let r;if("typeDefs"in e){let{typeDefs:t,resolvers:n}=e;r=(Array.isArray(t)?t:[t]).map((e,t)=>{let r={typeDefs:e};return 0===t&&n&&(r.resolvers=n),r})}else r=e;let n=(0,o.modulesFromSDL)(r),l=(0,i.concatAST)(n.map(e=>e.typeDefs)),u=(0,a.buildSubgraph)(a.FEDERATION_UNNAMED_SUBGRAPH_NAME,"",l,!1),c=(0,a.printSchema)(u.schema),p=u.schema.toGraphQLJSSchema(),d=null===(t=u.schema.schemaDefinition.rootType("query"))||void 0===t?void 0:t.name;for(let e of((0,a.assert)(d,"A Query root type should have been added by `buildSubgraph`"),(0,o.addResolversToSchema)(p,{[d]:{_service:()=>({sdl:c})}}),u.metadata().entityType()&&(0,o.addResolversToSchema)(p,{[d]:{_entities:(e,{representations:t},r,n)=>(0,s.entitiesResolver)({representations:t,context:r,info:n})},_Entity:{__resolveType:e=>e.__typename}}),n))e.resolvers&&(0,o.addResolversToSchema)(p,e.resolvers);return p}t.buildSubgraphSchema=l,t.buildFederatedSchema=(0,n.deprecate)(l,"'buildFederatedSchema' is deprecated. Use 'buildSubgraphSchema' instead.")},77748:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printSubgraphSchema=t.buildSubgraphSchema=void 0;var n=r(92717);Object.defineProperty(t,"buildSubgraphSchema",{enumerable:!0,get:function(){return n.buildSubgraphSchema}});var i=r(77916);Object.defineProperty(t,"printSubgraphSchema",{enumerable:!0,get:function(){return i.printSubgraphSchema}})},77916:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printBlockString=t.printType=t.printIntrospectionSchema=t.printSubgraphSchema=void 0;let n=r(57343),i=r(70854);t.printSubgraphSchema=function(e){let t=(0,i.graphQLJSSchemaToAST)(e);return(0,i.buildSubgraph)(i.FEDERATION_UNNAMED_SUBGRAPH_NAME,"",t,!1).toString()},t.printIntrospectionSchema=function(e){let t=(0,i.graphQLJSSchemaToAST)(e),r=(0,i.buildSubgraph)(i.FEDERATION_UNNAMED_SUBGRAPH_NAME,"",t,!1);return(0,i.printSchema)(r.schema)},t.printType=function(e){let{definition:t,extensions:r}=(0,i.graphQLJSNamedTypeToAST)(e);return(t?[t]:[]).concat(r).map(e=>(0,n.print)(e)).join("\n\n")},t.printBlockString=function(e,t=!1){let r=!e.includes("\n"),n=" "===e[0]||"	"===e[0],i='"'===e[e.length-1],o="\\"===e[e.length-1],a=!r||i||o||t,s="";return a&&!(r&&n)&&(s+="\n"),s+=e,a&&(s+="\n"),'"""'+s.replace(/"""/g,'\\"""')+'"""'}},97269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildSchemaFromSDL=t.addResolversToSchema=t.modulesFromSDL=t.isDocumentNode=t.isNode=void 0;let n=r(57343),i=r(34295),o=r(30167),a=r(7449),s=r(3262);function l(e){return null!=e}function u(e){return e&&"string"==typeof e.kind}function c(e){return u(e)&&e.kind===n.Kind.DOCUMENT}t.isNode=u,t.isDocumentNode=c;let p=[i.KnownTypeNamesRule,i.UniqueDirectivesPerLocationRule,i.PossibleTypeExtensionsRule],d=a.specifiedSDLRules.filter(e=>!p.includes(e)),f={[n.Kind.SCALAR_TYPE_EXTENSION]:n.Kind.SCALAR_TYPE_DEFINITION,[n.Kind.OBJECT_TYPE_EXTENSION]:n.Kind.OBJECT_TYPE_DEFINITION,[n.Kind.INTERFACE_TYPE_EXTENSION]:n.Kind.INTERFACE_TYPE_DEFINITION,[n.Kind.UNION_TYPE_EXTENSION]:n.Kind.UNION_TYPE_DEFINITION,[n.Kind.ENUM_TYPE_EXTENSION]:n.Kind.ENUM_TYPE_DEFINITION,[n.Kind.INPUT_OBJECT_TYPE_EXTENSION]:n.Kind.INPUT_OBJECT_TYPE_DEFINITION};function h(e){return Array.isArray(e)?e.map(e=>u(e)&&c(e)?{typeDefs:e}:e):[{typeDefs:e}]}function y(e,t){var r,i;for(let[o,a]of Object.entries(t)){let t=e.getType(o);if((0,n.isAbstractType)(t)){let e=t.extensions;for(let[n,i]of Object.entries(a))"__resolveReference"===n?t.extensions={...e,apollo:{...e.apollo,subgraph:{...null===(r=e.apollo)||void 0===r?void 0:r.subgraph,resolveReference:i}}}:"__resolveType"===n&&(t.resolveType=i)}if((0,n.isScalarType)(t))for(let e in a)t[e]=a[e];if((0,n.isEnumType)(t)){let e=t.getValues(),r={};e.forEach(e=>{let t=a[e.name];void 0===t&&(t=e.name),r[e.name]={value:t,deprecationReason:e.deprecationReason,description:e.description,astNode:e.astNode,extensions:void 0}}),Object.assign(t,new n.GraphQLEnumType({...t.toConfig(),values:r}))}if(!(0,n.isObjectType)(t))continue;let s=t.getFields(),l=t.extensions;for(let[e,r]of Object.entries(a)){if("__resolveReference"===e){t.extensions={...l,apollo:{...l.apollo,subgraph:{...null===(i=l.apollo)||void 0===i?void 0:i.subgraph,resolveReference:r}}};continue}if("__isTypeOf"===e){t.isTypeOf=r;continue}let n=s[e];n&&("function"==typeof r?n.resolve=r:(n.resolve=r.resolve,n.subscribe=r.subscribe))}}}t.modulesFromSDL=h,t.addResolversToSchema=y,t.buildSchemaFromSDL=function(e,t){let r,i;let a=h(e),u=(0,n.concatAST)(a.map(e=>e.typeDefs)),c=(0,o.validateSDL)(u,t,d);if(c.length>0)throw new s.GraphQLSchemaValidationError(c);let p=Object.create(null),m=Object.create(null),v=[],g=[],b=[],_=[];for(let e of u.definitions)if((0,n.isTypeDefinitionNode)(e)){let t=e.name.value;p[t]?p[t].push(e):p[t]=[e]}else if((0,n.isTypeExtensionNode)(e)){let t=e.name.value;m[t]?m[t].push(e):m[t]=[e]}else e.kind===n.Kind.DIRECTIVE_DEFINITION?v.push(e):e.kind===n.Kind.SCHEMA_DEFINITION?(g.push(e),_.push(...e.directives?e.directives:[]),r=e.description):e.kind===n.Kind.SCHEMA_EXTENSION&&(b.push(e),_.push(...e.directives?e.directives:[]));let T=t||new n.GraphQLSchema({query:void 0}),E=[];for(let[e,t]of Object.entries(m))if(!p[e]){let e=t[0],r={kind:f[e.kind],name:e.name};E.push(r)}T=(0,n.extendSchema)(T,{kind:n.Kind.DOCUMENT,definitions:[...Object.values(p).flat(),...E,...v]},{assumeValidSDL:!0}),T=(0,n.extendSchema)(T,{kind:n.Kind.DOCUMENT,definitions:Object.values(m).flat()},{assumeValidSDL:!0});let O=[...g,...b].map(e=>e.operationTypes).filter(l).flat();if(O.length>0)for(let{operation:e,type:t}of(i={},O))i[e]=t.name.value;else i={query:"Query",mutation:"Mutation",subscription:"Subscription"};for(let e of(T=new n.GraphQLSchema({...T.toConfig(),...function(e,t){let r=Object.create(null);for(let[n,i]of Object.entries(e))r[n]=t(i);return r}(i,e=>e?T.getType(e):void 0),description:null==r?void 0:r.value,astNode:{kind:n.Kind.SCHEMA_DEFINITION,description:r,directives:_,operationTypes:[]}}),a))e.resolvers&&y(T,e.resolvers);return T}},3262:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLSchemaValidationError=void 0;class r extends Error{constructor(e){super(),this.errors=e,this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor),this.message=e.map(e=>e.message).join("\n\n")}}t.GraphQLSchemaValidationError=r},73556:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(98529),t),i(r(97269),t),i(r(3262),t),i(r(52563),t)},98529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},52563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformSchema=void 0;let n=r(57343);function i(e,t){let r=Object.create(null);for(let[n,i]of Object.entries(e))r[n]=t(i);return r}t.transformSchema=function(e,t){let r=Object.create(null);for(let o of Object.values(e.getTypeMap())){if((0,n.isIntrospectionType)(o))continue;let e=t(o);if(null===e)continue;let l=e||o;r[l.name]=function(e){if((0,n.isObjectType)(e)){let t=e.toConfig();return new n.GraphQLObjectType({...t,interfaces:()=>t.interfaces.map(s),fields:()=>u(t.fields)})}if((0,n.isInterfaceType)(e)){let t=e.toConfig();return new n.GraphQLInterfaceType({...t,interfaces:()=>t.interfaces.map(s),fields:()=>u(t.fields)})}if((0,n.isUnionType)(e)){let t=e.toConfig();return new n.GraphQLUnionType({...t,types:()=>t.types.map(s)})}if((0,n.isInputObjectType)(e)){let t=e.toConfig();return new n.GraphQLInputObjectType({...t,fields:()=>i(t.fields,e=>({...e,type:a(e.type)}))})}return e}(l)}let o=e.toConfig();return new n.GraphQLSchema({...o,types:Object.values(r),query:l(o.query),mutation:l(o.mutation),subscription:l(o.subscription),directives:o.directives.map(e=>{let t=e.toConfig();return new n.GraphQLDirective({...t,args:c(t.args)})})});function a(e){return(0,n.isListType)(e)?new n.GraphQLList(a(e.ofType)):(0,n.isNonNullType)(e)?new n.GraphQLNonNull(a(e.ofType)):s(e)}function s(e){return r[e.name]||e}function l(e){return e?s(e):void 0}function u(e){return i(e,e=>({...e,type:a(e.type),args:e.args?c(e.args):void 0}))}function c(e){return i(e,e=>({...e,type:a(e.type)}))}}},95222:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFederationType=t.federationTypes=t.serviceField=t.entitiesField=t.entitiesResolver=t.LinkImportType=t.AnyType=t.ServiceType=t.EntityType=void 0;let n=r(57343),i=r(43983),o=r(73837);function a(e){return"function"==typeof(null==e?void 0:e.then)}async function s(e,t){let r=await e;if(null!==r&&"object"==typeof r){if("__typename"in r&&r.__typename!==t)return{...r,__typename:t};Object.defineProperty(r,"__typename",{value:t})}return r}function l(e,t,r,i){if(null==e)throw new n.GraphQLError(`Abstract type "${r.name}" \`__resolveReference\` method must resolve to an Object type at runtime. Either the object returned by "${r}.__resolveReference" must include a valid \`__typename\` field, or the "${r.name}" type should provide a "resolveType" function or each possible type should provide an "isTypeOf" function.`);if("string"!=typeof e)throw new n.GraphQLError(`Abstract type "${r.name}" \`__resolveReference\` method must resolve to an Object type at runtime with value ${(0,o.inspect)(i)}, received "${(0,o.inspect)(e)}".`);let a=t.getType(e);if(null==a)throw new n.GraphQLError(`Abstract type "${r.name}" \`__resolveReference\` method resolved to a type "${e}" that does not exist inside the schema.`);if(!(0,n.isObjectType)(a))throw new n.GraphQLError(`Abstract type "${r.name}" \`__resolveReference\` method resolved to a non-object type "${e}".`);if(!t.isSubType(r,a))throw new n.GraphQLError(`Runtime Object type "${a.name}" \`__resolveReference\` method is not a possible type for "${r.name}".`);return a}async function u({type:e,value:t,context:r,info:i,callback:o}){var s;let u=(null!==(s=e.resolveType)&&void 0!==s?s:n.defaultTypeResolver)(await t,r,i,e);return a(u)?u.then(r=>o(l(r,i.schema,e,t))):o(l(u,i.schema,e,t))}function c(e){var t,r;return null===(r=null===(t=e.extensions.apollo)||void 0===t?void 0:t.subgraph)||void 0===r?void 0:r.resolveReference}function p({representations:e,context:t,info:r}){return e.map(e=>{let{__typename:o}=e,l=r.schema.getType(o);if(!l||!((0,n.isObjectType)(l)||(0,n.isInterfaceType)(l)))throw Error(`The _entities resolver tried to load an entity for type "${o}", but no object or interface type of that name was found in the schema`);let p=(0,i.maybeCacheControlFromInfo)(r);if(p){let e=p.cacheHintFromType(l);e&&p.cacheHint.restrict(e)}let d=c(l),f=d?d(e,t,r):e;return(0,n.isInterfaceType)(l)?u({type:l,value:f,context:t,info:r,callback:e=>{let n=s(f,e.name);if(!d){let i=c(e);i&&(n=s(n=a(n)?n.then(e=>i(e,t,r)):i(n,t,r),e.name))}return n}}):s(f,o)})}t.EntityType=new n.GraphQLUnionType({name:"_Entity",types:[]}),t.ServiceType=new n.GraphQLObjectType({name:"_Service",fields:{sdl:{type:n.GraphQLString,description:"The sdl representing the federated service capabilities. Includes federation directives, removes federation types, and includes rest of full schema after schema directives have been applied"}}}),t.AnyType=new n.GraphQLScalarType({name:"_Any",serialize:e=>e}),t.LinkImportType=new n.GraphQLScalarType({name:"link__Import",specifiedByURL:null}),t.entitiesResolver=p,t.entitiesField={type:new n.GraphQLNonNull(new n.GraphQLList(t.EntityType)),args:{representations:{type:new n.GraphQLNonNull(new n.GraphQLList(new n.GraphQLNonNull(t.AnyType)))}},resolve:(e,{representations:t},r,n)=>p({representations:t,context:r,info:n})},t.serviceField={type:new n.GraphQLNonNull(t.ServiceType)},t.federationTypes=[t.ServiceType,t.AnyType,t.EntityType,t.LinkImportType],t.isFederationType=function(e){return(0,n.isNamedType)(e)&&t.federationTypes.some(({name:t})=>t===e.name)}},2613:e=>{"use strict";var t=/[^\0-\x7F]/,r=/[\x2E\u3002\uFF0E\uFF61]/g,n={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},i=Math.floor,o=String.fromCharCode;function a(e){throw RangeError(n[e])}var s=function(e,t){return e+22+75*(e<26)-((0!==t)<<5)},l=function(e,t,r){var n=0;for(e=r?i(e/700):e>>1,e+=i(e/t);e>455;n+=36)e=i(e/35);return i(n+36*e/(e+38))},u=function(e){var t=[],r=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=e.charCodeAt(r++);(64512&o)==56320?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t}(e)).length,n=128,u=0,c=72;for(var p of e)p<128&&t.push(o(p));var d=t.length,f=d;for(d&&t.push("-");f<r;){var h=2147483647;for(var p of e)p>=n&&p<h&&(h=p);var y=f+1;for(var p of(h-n>i((2147483647-u)/y)&&a("overflow"),u+=(h-n)*y,n=h,e))if(p<n&&++u>2147483647&&a("overflow"),p===n){for(var m=u,v=36;;v+=36){var g=v<=c?1:v>=c+26?26:v-c;if(m<g)break;var b=m-g,_=36-g;t.push(o(s(g+b%_,0))),m=i(b/_)}t.push(o(s(m,0))),c=l(u,y,f===d),u=0,++f}++u,++n}return t.join("")};e.exports={toASCII:function(e){var n,i,o,a;return n=e,i=function(e){return t.test(e)?"xn--"+u(e):e},o=n.split("@"),a="",o.length>1&&(a=o[0]+"@",n=o[1]),a+(function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r})((n=n.replace(r,".")).split("."),i).join(".")}}},74098:(e,t,r)=>{"use strict";function n(){this._protocol=null,this._href="",this._port=-1,this._query=null,this.auth=null,this.slashes=null,this.host=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null,this._prependSlash=!1}var i=r(63477);n.queryString=i,n.prototype.parse=function(e,t,r,i){if("string"!=typeof e)throw TypeError("Parameter 'url' must be a string, not "+typeof e);for(var o=0,a=e.length-1;32>=e.charCodeAt(o);)o++;for(;32>=e.charCodeAt(a);)a--;if(o=this._parseProtocol(e,o,a),"javascript"!==this._protocol){o=this._parseHost(e,o,a,r);var s=this._protocol;!this.hostname&&(this.slashes||s&&!v[s])&&(this.hostname=this.host="")}if(o<=a){var l=e.charCodeAt(o);47===l||92===l?this._parsePath(e,o,a,i):63===l?this._parseQuery(e,o,a,i):35===l?this._parseHash(e,o,a,i):"javascript"!==this._protocol?this._parsePath(e,o,a,i):this.pathname=e.slice(o,a+1)}if(!this.pathname&&this.hostname&&this._slashProtocols[this._protocol]&&(this.pathname="/"),t){var u=this.search;null==u&&(u=this.search=""),63===u.charCodeAt(0)&&(u=u.slice(1)),this.query=n.queryString.parse(u)}},n.prototype.resolve=function(e){return this.resolveObject(n.parse(e,!1,!0)).format()},n.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":")+"@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",o=this.search||"",l="",u=this.hostname||"",c=this.port||"",p=!1,d="",f=this.query;f&&"object"==typeof f&&(l=n.queryString.stringify(f)),o||(o=l?"?"+l:""),t&&58!==t.charCodeAt(t.length-1)&&(t+=":"),this.host?p=e+this.host:u&&(u.indexOf(":")>-1&&(u="["+u+"]"),p=e+u+(c?":"+c:""));var h=this.slashes||(!t||v[t])&&!1!==p;return t?d=t+(h?"//":""):h&&(d="//"),h&&r&&47!==r.charCodeAt(0)&&(r="/"+r),o&&63!==o.charCodeAt(0)&&(o="?"+o),i&&35!==i.charCodeAt(0)&&(i="#"+i),d+(!1===p?"":p)+(r=a(r))+(o=s(o))+i},n.prototype.resolveObject=function(e){"string"==typeof e&&(e=n.parse(e,!1,!0));var t=this._clone();if(t.hash=e.hash,!e.href)return t._href="",t;if(e.slashes&&!e._protocol)return e._copyPropsTo(t,!0),v[t._protocol]&&t.hostname&&!t.pathname&&(t.pathname="/"),t._href="",t;if(e._protocol&&e._protocol!==t._protocol){if(!v[e._protocol])return e._copyPropsTo(t,!1),t._href="",t;if(t._protocol=e._protocol,e.host||"javascript"===e._protocol)t.pathname=e.pathname;else{for(var r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),t.pathname=r.join("/")}return t.search=e.search,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t._port=e._port,t.slashes=t.slashes||e.slashes,t._href="",t}var i=t.pathname&&47===t.pathname.charCodeAt(0),o=e.host||e.pathname&&47===e.pathname.charCodeAt(0),a=o||i||t.host&&e.pathname,s=a,l=t.pathname&&t.pathname.split("/")||[],r=e.pathname&&e.pathname.split("/")||[],u=t._protocol&&!v[t._protocol];if(u&&(t.hostname="",t._port=-1,t.host&&(""===l[0]?l[0]=t.host:l.unshift(t.host)),t.host="",e._protocol&&(e.hostname="",e._port=-1,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=""),a=a&&(""===r[0]||""===l[0])),o)t.host=e.host?e.host:t.host,t.hostname=e.hostname?e.hostname:t.hostname,t.search=e.search,l=r;else if(r.length)l||(l=[]),l.pop(),l=l.concat(r),t.search=e.search;else if(e.search){if(u){t.hostname=t.host=l.shift();var c=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@");c&&(t.auth=c.shift(),t.host=t.hostname=c.shift())}return t.search=e.search,t._href="",t}if(!l.length)return t.pathname=null,t._href="",t;for(var p=l.slice(-1)[0],d=(t.host||e.host)&&("."===p||".."===p)||""===p,f=0,h=l.length;h>=0;h--)"."===(p=l[h])?l.splice(h,1):".."===p?(l.splice(h,1),f++):f&&(l.splice(h,1),f--);if(!a&&!s)for(;f--;f)l.unshift("..");a&&""!==l[0]&&(!l[0]||47!==l[0].charCodeAt(0))&&l.unshift(""),d&&"/"!==l.join("/").substr(-1)&&l.push("");var y=""===l[0]||l[0]&&47===l[0].charCodeAt(0);if(u){t.hostname=t.host=y?"":l.length?l.shift():"";var c=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@");c&&(t.auth=c.shift(),t.host=t.hostname=c.shift())}return(a=a||t.host&&l.length)&&!y&&l.unshift(""),t.pathname=0===l.length?null:l.join("/"),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t._href="",t};var o=r(2613);n.prototype._hostIdna=function(e){return o.toASCII(e)};var a=n.prototype._escapePathName=function(e){return l(e,35,63)?e.replace(/[?#]/g,function(e){return encodeURIComponent(e)}):e},s=n.prototype._escapeSearch=function(e){return l(e,35,-1)?e.replace(/#/g,function(e){return encodeURIComponent(e)}):e};function l(e,t,r){for(var n=0,i=e.length;n<i;++n){var o=e.charCodeAt(n);if(o===t||o===r)return!0}return!1}function u(e){var t=new Uint8Array(128);return e.forEach(function(e){if("number"==typeof e)t[e]=1;else for(var r=e[0],n=e[1],i=r;i<=n;++i)t[i]=1}),t}n.prototype._parseProtocol=function(e,t,r){for(var n=!1,i=this._protocolCharacters,o=t;o<=r;++o){var a=e.charCodeAt(o);if(58===a){var s=e.slice(t,o);return n&&(s=s.toLowerCase()),this._protocol=s,o+1}if(1===i[a])a<97&&(n=!0);else break}return t},n.prototype._parseAuth=function(e,t,r,n){var i=e.slice(t,r+1);n&&(i=decodeURIComponent(i)),this.auth=i},n.prototype._parsePort=function(e,t,r){for(var n=0,i=!1,o=!0,a=t;a<=r;++a){var s=e.charCodeAt(a);if(48<=s&&s<=57)n=10*n+(s-48),i=!0;else{o=!1,(92===s||47===s)&&(o=!0);break}}return(0!==n||i)&&o?(this._port=n,a-t):(o||(this._port=-2),0)},n.prototype._parseHost=function(e,t,r,n){var i=this._hostEndingCharacters,o=e.charCodeAt(t),a=e.charCodeAt(t+1);if((47===o||92===o)&&(47===a||92===a)){if(this.slashes=!0,0===t){if(r<2)return t;if(!function(e,t,r,n){for(var i=e.length,o=2;o<i;++o){var a=e.charCodeAt(o);if(64===a)return!0;if(1===n[a])break}return!1}(e,0,0,i)&&!n)return this.slashes=null,t}t+=2}else if(!this._protocol||v[this._protocol])return t;for(var s=!1,l=!1,u=t,c=r,p=0,d=0,f=!1,h=-1,y=t;y<=r;++y){var m=e.charCodeAt(y);if(64===m)h=y;else if(37===m)f=!0;else if(1===i[m])break}if(h>-1&&(this._parseAuth(e,t,h-1,f),t=u=h+1),91===e.charCodeAt(t)){for(var y=t+1;y<=r;++y){var m=e.charCodeAt(y);if(93===m){58===e.charCodeAt(y+1)&&(p=this._parsePort(e,y+2,r)+1);var g=e.slice(t+1,y).toLowerCase();return this.hostname=g,this.host=this._port>0?"["+g+"]:"+this._port:"["+g+"]",this.pathname="/",y+p+1}}return t}for(var y=t;y<=r;++y){if(d>62)return this.hostname=this.host=e.slice(t,y),y;var m=e.charCodeAt(y);if(58===m){p=this._parsePort(e,y+1,r)+1,c=y-1;break}if(m<97){if(46===m)d=-1;else if(65<=m&&m<=90)s=!0;else if(!(45===m||95===m||43===m||48<=m&&m<=57)){0===i[m]&&0===this._noPrependSlashHostEnders[m]&&(this._prependSlash=!0),c=y-1;break}}else if(m>=123){if(m<=126){0===this._noPrependSlashHostEnders[m]&&(this._prependSlash=!0),c=y-1;break}l=!0}d++}if(c+1!==t&&c-u<=256){var g=e.slice(u,c+1);s&&(g=g.toLowerCase()),l&&(g=this._hostIdna(g)),this.hostname=g,this.host=this._port>0?g+":"+this._port:g}return c+1+p},n.prototype._copyPropsTo=function(e,t){t||(e._protocol=this._protocol),e._href=this._href,e._port=this._port,e._prependSlash=this._prependSlash,e.auth=this.auth,e.slashes=this.slashes,e.host=this.host,e.hostname=this.hostname,e.hash=this.hash,e.search=this.search,e.pathname=this.pathname},n.prototype._clone=function(){var e=new n;return e._protocol=this._protocol,e._href=this._href,e._port=this._port,e._prependSlash=this._prependSlash,e.auth=this.auth,e.slashes=this.slashes,e.host=this.host,e.hostname=this.hostname,e.hash=this.hash,e.search=this.search,e.pathname=this.pathname,e},n.prototype._getComponentEscaped=function(e,t,r,n){for(var i=t,o=t,a="",s=n?this._afterQueryAutoEscapeMap:this._autoEscapeMap;o<=r;++o){var l=s[e.charCodeAt(o)];""!==l&&void 0!==l&&(i<o&&(a+=e.slice(i,o)),a+=l,i=o+1)}return i<o+1&&(a+=e.slice(i,o)),a},n.prototype._parsePath=function(e,t,r,n){for(var i,o=r,a=!1,s=this._autoEscapeCharacters,l=-2===this._port?"/:":"",u=t;u<=r;++u){var c=e.charCodeAt(u);if(35===c){this._parseHash(e,u,r,n),o=u-1;break}if(63===c){this._parseQuery(e,u,r,n),o=u-1;break}n||a||1!==s[c]||(a=!0)}if(t>o){this.pathname=""===l?"/":l;return}i=a?this._getComponentEscaped(e,t,o,!1):e.slice(t,o+1),this.pathname=""===l?this._prependSlash?"/"+i:i:l+i},n.prototype._parseQuery=function(e,t,r,n){for(var i,o=r,a=!1,s=this._autoEscapeCharacters,l=t;l<=r;++l){var u=e.charCodeAt(l);if(35===u){this._parseHash(e,l,r,n),o=l-1;break}n||a||1!==s[u]||(a=!0)}if(t>o){this.search="";return}i=a?this._getComponentEscaped(e,t,o,!0):e.slice(t,o+1),this.search=i},n.prototype._parseHash=function(e,t,r,n){if(t>r){this.hash="";return}this.hash=n?e.slice(t,r+1):this._getComponentEscaped(e,t,r,!0)},Object.defineProperty(n.prototype,"port",{get:function(){return this._port>=0?""+this._port:null},set:function(e){null==e?this._port=-1:this._port=parseInt(e,10)}}),Object.defineProperty(n.prototype,"query",{get:function(){var e=this._query;if(null!=e)return e;var t=this.search;return t&&(63===t.charCodeAt(0)&&(t=t.slice(1)),""!==t&&(this._query=t)),t},set:function(e){this._query=e}}),Object.defineProperty(n.prototype,"path",{get:function(){var e=this.pathname||"",t=this.search||"";return e||t?e+t:null==e&&t?"/"+t:null},set:function(){}}),Object.defineProperty(n.prototype,"protocol",{get:function(){var e=this._protocol;return e?e+":":e},set:function(e){if("string"==typeof e){var t=e.length-1;58===e.charCodeAt(t)?this._protocol=e.slice(0,t):this._protocol=e}else null==e&&(this._protocol=null)}}),Object.defineProperty(n.prototype,"href",{get:function(){var e=this._href;return e||(e=this._href=this.format()),e},set:function(e){this._href=e}}),n.parse=function(e,t,r,i){if(e instanceof n)return e;var o=new n;return o.parse(e,!!t,!!r,!!i),o},n.format=function(e){return("string"==typeof e&&(e=n.parse(e)),e instanceof n)?e.format():n.prototype.format.call(e)},n.resolve=function(e,t){return n.parse(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?n.parse(e,!1,!0).resolveObject(t):t};for(var c=["<",">",'"',"`"," ","\r","\n","	","{","}","|","\\","^","`","'"],p=Array(128),d=0,f=p.length;d<f;++d)p[d]="";for(var d=0,f=c.length;d<f;++d){var h=c[d],y=encodeURIComponent(h);y===h&&(y=escape(h)),p[h.charCodeAt(0)]=y}var m=p.slice();p[92]="/";var v=n.prototype._slashProtocols={http:!0,https:!0,gopher:!0,file:!0,ftp:!0,"http:":!0,"https:":!0,"gopher:":!0,"file:":!0,"ftp:":!0};n.prototype._protocolCharacters=u([[97,122],[65,90],46,43,45]),n.prototype._hostEndingCharacters=u([35,63,47,92]),n.prototype._autoEscapeCharacters=u(c.map(function(e){return e.charCodeAt(0)})),n.prototype._noPrependSlashHostEnders=u(["<",">","'","`"," ","\r","\n","	","{","}","|","^","`",'"',"%",";"].map(function(e){return e.charCodeAt(0)})),n.prototype._autoEscapeMap=p,n.prototype._afterQueryAutoEscapeMap=m,e.exports=n,n.replace=function(){r.c.url={exports:n}}},94476:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.PatternComprehension=t.List=t.ListComprehension=t.vector=t.tx=t.genai=t.db=t.cdc=t.apoc=t.Exists=t.Count=t.Collect=t.isType=t.isNotType=t.TYPE=t.Case=t.Variable=t.NamedVariable=t.Relationship=t.NamedRelationship=t.Property=t.Path=t.NamedPath=t.Param=t.NamedParam=t.Node=t.NamedNode=t.true=t.false=t.Null=t.Literal=t.QuantifiedPath=t.Pattern=t.labelExpr=t.concat=t.With=t.Use=t.Unwind=t.Union=t.Return=t.RawCypher=t.Raw=t.Merge=t.OptionalMatch=t.Match=t.LoadCSV=t.Foreach=t.Finish=t.Create=t.Call=void 0,t.degrees=t.cot=t.cos=t.ceil=t.atan2=t.atan=t.asin=t.acos=t.abs=t.linenumber=t.file=t.graph=t.sum=t.stDevP=t.stDev=t.percentileDisc=t.percentileCont=t.min=t.max=t.count=t.collect=t.avg=t.Function=t.pow=t.plus=t.multiply=t.mod=t.minus=t.divide=t.startsWith=t.neq=t.matches=t.lte=t.lt=t.isNull=t.isNotNull=t.isNotNormalized=t.isNormalized=t.in=t.gte=t.gt=t.eq=t.endsWith=t.contains=t.xor=t.or=t.not=t.and=t.MapProjection=t.Map=void 0,t.utils=t.VoidProcedure=t.Procedure=t.time=t.localtime=t.localdatetime=t.duration=t.datetime=t.date=t.single=t.none=t.isEmpty=t.exists=t.any=t.all=t.tan=t.sqrt=t.sin=t.sign=t.round=t.rand=t.radians=t.pi=t.log10=t.log=t.isNaN=t.haversin=t.floor=t.exp=t.e=void 0;var s=r(23789);Object.defineProperty(t,"Call",{enumerable:!0,get:function(){return s.Call}});var l=r(22543);Object.defineProperty(t,"Create",{enumerable:!0,get:function(){return l.Create}});var u=r(30991);Object.defineProperty(t,"Finish",{enumerable:!0,get:function(){return u.Finish}});var c=r(35908);Object.defineProperty(t,"Foreach",{enumerable:!0,get:function(){return c.Foreach}});var p=r(61335);Object.defineProperty(t,"LoadCSV",{enumerable:!0,get:function(){return p.LoadCSV}});var d=r(73323);Object.defineProperty(t,"Match",{enumerable:!0,get:function(){return d.Match}}),Object.defineProperty(t,"OptionalMatch",{enumerable:!0,get:function(){return d.OptionalMatch}});var f=r(95835);Object.defineProperty(t,"Merge",{enumerable:!0,get:function(){return f.Merge}});var h=r(76991);Object.defineProperty(t,"Raw",{enumerable:!0,get:function(){return h.Raw}}),Object.defineProperty(t,"RawCypher",{enumerable:!0,get:function(){return h.RawCypher}});var y=r(58705);Object.defineProperty(t,"Return",{enumerable:!0,get:function(){return y.Return}});var m=r(17218);Object.defineProperty(t,"Union",{enumerable:!0,get:function(){return m.Union}});var v=r(28826);Object.defineProperty(t,"Unwind",{enumerable:!0,get:function(){return v.Unwind}});var g=r(47565);Object.defineProperty(t,"Use",{enumerable:!0,get:function(){return g.Use}});var b=r(24544);Object.defineProperty(t,"With",{enumerable:!0,get:function(){return b.With}});var _=r(67730);Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return _.concat}});var T=r(7150);Object.defineProperty(t,"labelExpr",{enumerable:!0,get:function(){return T.labelExpr}});var E=r(97632);Object.defineProperty(t,"Pattern",{enumerable:!0,get:function(){return E.Pattern}});var O=r(84688);Object.defineProperty(t,"QuantifiedPath",{enumerable:!0,get:function(){return O.QuantifiedPath}});var S=r(23881);Object.defineProperty(t,"Literal",{enumerable:!0,get:function(){return S.Literal}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return S.CypherNull}}),Object.defineProperty(t,"false",{enumerable:!0,get:function(){return S.CypherFalse}}),Object.defineProperty(t,"true",{enumerable:!0,get:function(){return S.CypherTrue}});var w=r(66092);Object.defineProperty(t,"NamedNode",{enumerable:!0,get:function(){return w.NamedNode}}),Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return w.NodeRef}});var I=r(50901);Object.defineProperty(t,"NamedParam",{enumerable:!0,get:function(){return I.NamedParam}}),Object.defineProperty(t,"Param",{enumerable:!0,get:function(){return I.Param}});var N=r(53635);Object.defineProperty(t,"NamedPath",{enumerable:!0,get:function(){return N.NamedPath}}),Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return N.Path}});var A=r(52219);Object.defineProperty(t,"Property",{enumerable:!0,get:function(){return A.PropertyRef}});var C=r(71105);Object.defineProperty(t,"NamedRelationship",{enumerable:!0,get:function(){return C.NamedRelationship}}),Object.defineProperty(t,"Relationship",{enumerable:!0,get:function(){return C.RelationshipRef}});var P=r(66059);Object.defineProperty(t,"NamedVariable",{enumerable:!0,get:function(){return P.NamedVariable}}),Object.defineProperty(t,"Variable",{enumerable:!0,get:function(){return P.Variable}});var R=r(68668);Object.defineProperty(t,"Case",{enumerable:!0,get:function(){return R.Case}});var D=r(15707);Object.defineProperty(t,"TYPE",{enumerable:!0,get:function(){return D.CypherTypes}}),Object.defineProperty(t,"isNotType",{enumerable:!0,get:function(){return D.isNotType}}),Object.defineProperty(t,"isType",{enumerable:!0,get:function(){return D.isType}});var F=r(75953);Object.defineProperty(t,"Collect",{enumerable:!0,get:function(){return F.Collect}});var j=r(55750);Object.defineProperty(t,"Count",{enumerable:!0,get:function(){return j.Count}});var L=r(18536);Object.defineProperty(t,"Exists",{enumerable:!0,get:function(){return L.Exists}}),t.apoc=o(r(65124)),t.cdc=o(r(18974)),t.db=o(r(96123)),t.genai=o(r(77230)),t.tx=o(r(91468)),t.vector=o(r(87912));var x=r(76269);Object.defineProperty(t,"ListComprehension",{enumerable:!0,get:function(){return x.ListComprehension}});var M=r(14101);Object.defineProperty(t,"List",{enumerable:!0,get:function(){return M.ListExpr}});var k=r(28518);Object.defineProperty(t,"PatternComprehension",{enumerable:!0,get:function(){return k.PatternComprehension}});var $=r(37e3);Object.defineProperty(t,"Map",{enumerable:!0,get:function(){return $.MapExpr}});var U=r(20858);Object.defineProperty(t,"MapProjection",{enumerable:!0,get:function(){return U.MapProjection}});var V=r(8963);Object.defineProperty(t,"and",{enumerable:!0,get:function(){return V.and}}),Object.defineProperty(t,"not",{enumerable:!0,get:function(){return V.not}}),Object.defineProperty(t,"or",{enumerable:!0,get:function(){return V.or}}),Object.defineProperty(t,"xor",{enumerable:!0,get:function(){return V.xor}});var G=r(55232);Object.defineProperty(t,"contains",{enumerable:!0,get:function(){return G.contains}}),Object.defineProperty(t,"endsWith",{enumerable:!0,get:function(){return G.endsWith}}),Object.defineProperty(t,"eq",{enumerable:!0,get:function(){return G.eq}}),Object.defineProperty(t,"gt",{enumerable:!0,get:function(){return G.gt}}),Object.defineProperty(t,"gte",{enumerable:!0,get:function(){return G.gte}}),Object.defineProperty(t,"in",{enumerable:!0,get:function(){return G.inOp}}),Object.defineProperty(t,"isNormalized",{enumerable:!0,get:function(){return G.isNormalized}}),Object.defineProperty(t,"isNotNormalized",{enumerable:!0,get:function(){return G.isNotNormalized}}),Object.defineProperty(t,"isNotNull",{enumerable:!0,get:function(){return G.isNotNull}}),Object.defineProperty(t,"isNull",{enumerable:!0,get:function(){return G.isNull}}),Object.defineProperty(t,"lt",{enumerable:!0,get:function(){return G.lt}}),Object.defineProperty(t,"lte",{enumerable:!0,get:function(){return G.lte}}),Object.defineProperty(t,"matches",{enumerable:!0,get:function(){return G.matches}}),Object.defineProperty(t,"neq",{enumerable:!0,get:function(){return G.neq}}),Object.defineProperty(t,"startsWith",{enumerable:!0,get:function(){return G.startsWith}});var q=r(20202);Object.defineProperty(t,"divide",{enumerable:!0,get:function(){return q.divide}}),Object.defineProperty(t,"minus",{enumerable:!0,get:function(){return q.minus}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return q.mod}}),Object.defineProperty(t,"multiply",{enumerable:!0,get:function(){return q.multiply}}),Object.defineProperty(t,"plus",{enumerable:!0,get:function(){return q.plus}}),Object.defineProperty(t,"pow",{enumerable:!0,get:function(){return q.pow}});var B=r(79201);Object.defineProperty(t,"Function",{enumerable:!0,get:function(){return B.CypherFunction}});var W=r(82098);Object.defineProperty(t,"avg",{enumerable:!0,get:function(){return W.avg}}),Object.defineProperty(t,"collect",{enumerable:!0,get:function(){return W.collect}}),Object.defineProperty(t,"count",{enumerable:!0,get:function(){return W.count}}),Object.defineProperty(t,"max",{enumerable:!0,get:function(){return W.max}}),Object.defineProperty(t,"min",{enumerable:!0,get:function(){return W.min}}),Object.defineProperty(t,"percentileCont",{enumerable:!0,get:function(){return W.percentileCont}}),Object.defineProperty(t,"percentileDisc",{enumerable:!0,get:function(){return W.percentileDisc}}),Object.defineProperty(t,"stDev",{enumerable:!0,get:function(){return W.stDev}}),Object.defineProperty(t,"stDevP",{enumerable:!0,get:function(){return W.stDevP}}),Object.defineProperty(t,"sum",{enumerable:!0,get:function(){return W.sum}}),t.graph=o(r(56948)),a(r(38955),t);var H=r(76005);Object.defineProperty(t,"file",{enumerable:!0,get:function(){return H.file}}),Object.defineProperty(t,"linenumber",{enumerable:!0,get:function(){return H.linenumber}});var Q=r(13389);Object.defineProperty(t,"abs",{enumerable:!0,get:function(){return Q.abs}}),Object.defineProperty(t,"acos",{enumerable:!0,get:function(){return Q.acos}}),Object.defineProperty(t,"asin",{enumerable:!0,get:function(){return Q.asin}}),Object.defineProperty(t,"atan",{enumerable:!0,get:function(){return Q.atan}}),Object.defineProperty(t,"atan2",{enumerable:!0,get:function(){return Q.atan2}}),Object.defineProperty(t,"ceil",{enumerable:!0,get:function(){return Q.ceil}}),Object.defineProperty(t,"cos",{enumerable:!0,get:function(){return Q.cos}}),Object.defineProperty(t,"cot",{enumerable:!0,get:function(){return Q.cot}}),Object.defineProperty(t,"degrees",{enumerable:!0,get:function(){return Q.degrees}}),Object.defineProperty(t,"e",{enumerable:!0,get:function(){return Q.e}}),Object.defineProperty(t,"exp",{enumerable:!0,get:function(){return Q.exp}}),Object.defineProperty(t,"floor",{enumerable:!0,get:function(){return Q.floor}}),Object.defineProperty(t,"haversin",{enumerable:!0,get:function(){return Q.haversin}}),Object.defineProperty(t,"isNaN",{enumerable:!0,get:function(){return Q.cypherIsNaN}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return Q.log}}),Object.defineProperty(t,"log10",{enumerable:!0,get:function(){return Q.log10}}),Object.defineProperty(t,"pi",{enumerable:!0,get:function(){return Q.pi}}),Object.defineProperty(t,"radians",{enumerable:!0,get:function(){return Q.radians}}),Object.defineProperty(t,"rand",{enumerable:!0,get:function(){return Q.rand}}),Object.defineProperty(t,"round",{enumerable:!0,get:function(){return Q.round}}),Object.defineProperty(t,"sign",{enumerable:!0,get:function(){return Q.sign}}),Object.defineProperty(t,"sin",{enumerable:!0,get:function(){return Q.sin}}),Object.defineProperty(t,"sqrt",{enumerable:!0,get:function(){return Q.sqrt}}),Object.defineProperty(t,"tan",{enumerable:!0,get:function(){return Q.tan}}),a(r(6225),t);var K=r(61507);Object.defineProperty(t,"all",{enumerable:!0,get:function(){return K.all}}),Object.defineProperty(t,"any",{enumerable:!0,get:function(){return K.any}}),Object.defineProperty(t,"exists",{enumerable:!0,get:function(){return K.exists}}),Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return K.isEmpty}}),Object.defineProperty(t,"none",{enumerable:!0,get:function(){return K.none}}),Object.defineProperty(t,"single",{enumerable:!0,get:function(){return K.single}}),a(r(81399),t),a(r(13623),t),a(r(11150),t);var z=r(71513);Object.defineProperty(t,"date",{enumerable:!0,get:function(){return z.cypherDate}}),Object.defineProperty(t,"datetime",{enumerable:!0,get:function(){return z.cypherDatetime}}),Object.defineProperty(t,"duration",{enumerable:!0,get:function(){return z.duration}}),Object.defineProperty(t,"localdatetime",{enumerable:!0,get:function(){return z.cypherLocalDatetime}}),Object.defineProperty(t,"localtime",{enumerable:!0,get:function(){return z.cypherLocalTime}}),Object.defineProperty(t,"time",{enumerable:!0,get:function(){return z.cypherTime}});var Y=r(38266);Object.defineProperty(t,"Procedure",{enumerable:!0,get:function(){return Y.CypherProcedure}}),Object.defineProperty(t,"VoidProcedure",{enumerable:!0,get:function(){return Y.VoidCypherProcedure}}),t.utils=o(r(77784))},76767:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CypherASTNode=void 0;class r{constructor(e){this.parent=e}getRoot(){return this.parent?this.parent.getRoot():this}addChildren(...e){for(let t of e)t instanceof r&&t.setParent(this)}setParent(e){this.parent=e}get isRoot(){return void 0===this.parent}}t.CypherASTNode=r},99800:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CypherEnvironment=void 0;let n=r(50901),i=r(23262),o={labelOperator:":"};class a{constructor(e,t={}){this.references=new Map,this.params=[],e&&"string"!=typeof e?this.globalPrefix={params:e.params??"",variables:e.variables??""}:this.globalPrefix={params:e??"",variables:e??""},this.config={...o,...t}}compile(e){if(!(0,i.isCypherCompilable)(e))throw Error("Can't compile. Passing a non Cypher Builder element to env.compile");return e.getCypher(this)}getReferenceId(e){return this.isNamedReference(e)?e.id:this.references.get(e)||this.addVariableReference(e)}getParams(){return this.params.reduce((e,t)=>{let r=this.getReferenceId(t);return t.hasValue&&(e[r]=t.value),e},{})}addNamedParamReference(e,t){this.references.has(t)||this.addParam(e,t)}addExtraParams(e){Object.entries(e).forEach(([e,t])=>{this.addNamedParamReference(e,t)})}getParamsSize(){return this.params.length}addParam(e,t){return this.references.set(t,e),this.params.push(t),e}addVariableReference(e){let t=this.getParamsSize();if(e instanceof n.Param){let r=`${this.globalPrefix.params}${e.prefix}${t}`;return this.addParam(r,e)}let r=this.references.size-t,i=`${this.globalPrefix.variables}${e.prefix}${r}`;return this.references.set(e,i),i}isNamedReference(e){return!!e.id}}t.CypherEnvironment=a},23789:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Call=void 0;let i=r(42930),o=r(31737),a=r(13738),s=r(17218),l=r(96009),u=r(58207),c=r(26563),p=r(52628),d=r(76065),f=r(60254),h=r(49330),y=r(38322),m=r(45037),v=r(62439),g=r(67730),b=r(92415),_=class extends a.Clause{constructor(e){super(),this._usingImportWith=!1;let t=e.getRoot();this.addChildren(t),this.subquery=t}importWith(...e){if(this._importWith)throw Error("Call import already set");return e.length>0&&(this._importWith=new v.ImportWith(this,[...e]),this.addChildren(this._importWith),this._usingImportWith=!0),this}inTransactions(e={}){return this.inTransactionsConfig=e,this}innerWith(...e){if(this._importWith)throw Error("Call import already set");return e.length>0&&(this._importWith=new v.ImportWith(this,[...e]),this.addChildren(this._importWith)),this}getCypher(e){let t=(0,i.compileCypherIfExists)(this._importWith,e,{suffix:"\n"}),r=this.getSubqueryCypher(e,t),n=(0,i.compileCypherIfExists)(this.removeClause,e,{prefix:"\n"}),a=(0,i.compileCypherIfExists)(this.deleteClause,e,{prefix:"\n"}),s=(0,i.compileCypherIfExists)(this.setSubClause,e,{prefix:"\n"}),l=this.generateInTransactionStr(),u=`${t}${r}`,c=this.compileNextClause(e);return`CALL {
${(0,o.padBlock)(u)}
}${l}${s}${n}${a}${c}`}getSubqueryCypher(e,t){return this._usingImportWith&&(this.subquery instanceof s.Union||this.subquery instanceof g.CompositeClause)?this.subquery.getCypher(e,t):this.subquery.getCypher(e)}generateInTransactionStr(){if(!this.inTransactionsConfig)return"";let e=this.inTransactionsConfig.ofRows,t=this.inTransactionsConfig.onError,r=e?` OF ${e} ROWS`:"",n=t?` ON ERROR ${this.getOnErrorStr(t)}`:"",i=this.inTransactionsConfig.concurrentTransactions,o="number"==typeof i?` ${i} CONCURRENT`:"";return` IN${o} TRANSACTIONS${r}${n}`}getOnErrorStr(e){let t={continue:"CONTINUE",break:"BREAK",fail:"FAIL"};if(!t[e])throw Error(`Incorrect ON ERROR option ${e}`);return t[e]}};t.Call=_,t.Call=n([(0,b.mixin)(p.WithReturn,f.WithWith,d.WithUnwind,y.WithRemove,h.WithDelete,m.WithSet,u.WithMatch,l.WithCreate,c.WithMerge)],_)},13738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clause=void 0;let n=r(76767),i=r(99800),o=r(42930),a=r(31737),s=r(20089),l=Symbol.for("nodejs.util.inspect.custom");class u extends n.CypherASTNode{build(e,t={},r){if(this.isRoot){let n=this.getEnv(e,r),i=this.getCypher(n),o=(0,s.toCypherParams)(t);return n.addExtraParams(o),{cypher:i,params:n.getParams()}}let n=this.getRoot();if(n instanceof u)return n.build(e,t);throw Error(`Cannot build root: ${n.constructor.name}`)}getEnv(e,t={}){return new i.CypherEnvironment(e,t)}toString(){try{let e=(0,a.padBlock)(this.build().cypher);return`<Clause ${this.constructor.name}> """
${e}
"""`}catch(t){let e=t instanceof Error?t.message:"";return`<Clause ${this.constructor.name}> """
Error: ${e}
"""`}}[l](){return this.toString()}addNextClause(e){if(this.nextClause)throw Error("Cannot chain 2 top-level clauses to the same clause");this.nextClause=e,this.addChildren(this.nextClause)}compileNextClause(e){return(0,o.compileCypherIfExists)(this.nextClause,e,{prefix:"\n"})}}t.Clause=u},22543:function(e,t,r){"use strict";var n,i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Create=void 0;let o=r(97632),a=r(42930),s=r(13738),l=r(56265),u=r(23979),c=r(26563),p=r(52628),d=r(60254),f=r(49330),h=r(38322),y=r(45037),m=r(41586),v=r(92415),g=n=class extends s.Clause{constructor(e){super(),e instanceof o.Pattern?this.pattern=e:this.pattern=new o.Pattern(e),this.setSubClause=new m.SetClause(this)}create(e){if(e instanceof n)return this.addNextClause(e),e;let t=new n(e);return this.addNextClause(t),t}getCypher(e){let t=this.compilePath(e),r=this.pattern.getCypher(e),n=(0,a.compileCypherIfExists)(this.setSubClause,e,{prefix:"\n"}),i=(0,a.compileCypherIfExists)(this.deleteClause,e,{prefix:"\n"}),o=(0,a.compileCypherIfExists)(this.removeClause,e,{prefix:"\n"}),s=this.compileNextClause(e);return`CREATE ${t}${r}${n}${o}${i}${s}`}};t.Create=g,t.Create=n=i([(0,v.mixin)(p.WithReturn,y.WithSet,l.WithPathAssign,d.WithWith,f.WithDelete,h.WithRemove,c.WithMerge,u.WithFinish)],g)},30991:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Finish=void 0;let n=r(13738);class i extends n.Clause{getCypher(){return"FINISH"}}t.Finish=i},35908:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Foreach=void 0;let i=r(42930),o=r(31737),a=r(13738),s=r(96009),l=r(26563),u=r(52628),c=r(60254),p=r(49330),d=r(38322),f=r(45037),h=r(92415),y=class extends a.Clause{constructor(e,t,r){super(),this.variable=e,this.listExpr=t,this.mapClause=r}getCypher(e){let t=this.variable.getCypher(e),r=this.listExpr.getCypher(e),n=this.mapClause.getCypher(e),a=this.compileNextClause(e),s=[`FOREACH (${t} IN ${r} |`,(0,o.padBlock)(n),")"].join("\n"),l=(0,i.compileCypherIfExists)(this.setSubClause,e,{prefix:"\n"}),u=(0,i.compileCypherIfExists)(this.deleteClause,e,{prefix:"\n"}),c=(0,i.compileCypherIfExists)(this.removeClause,e,{prefix:"\n"});return`${s}${l}${c}${u}${a}`}};t.Foreach=y,t.Foreach=n([(0,h.mixin)(c.WithWith,u.WithReturn,d.WithRemove,f.WithSet,p.WithDelete,s.WithCreate,l.WithMerge)],y)},61335:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.LoadCSV=void 0;let i=r(13738),o=r(82086),a=r(96009),s=r(26563),l=r(52628),u=r(60254),c=r(62041),p=r(92415),d=class extends i.Clause{constructor(e,t){super(),this.url=e,this.alias=t}getCypher(e){let t=this.alias.getCypher(e),r=this.compileNextClause(e);return`LOAD CSV FROM "${this.url}" AS ${t}${r}`}};t.LoadCSV=d,t.LoadCSV=n([(0,p.mixin)(l.WithReturn,a.WithCreate,s.WithMerge,u.WithWith,c.WithWhere,o.WithCallProcedure)],d)},73323:function(e,t,r){"use strict";var n,i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalMatch=t.Match=void 0;let o=r(97632),a=r(66092),s=r(42930),l=r(13738),u=r(56265),c=r(82086),p=r(96009),d=r(23979),f=r(26563),h=r(52628),y=r(76065),m=r(60254),v=r(49330),g=r(38322),b=r(45037),_=r(62041),T=r(92415),E=n=class extends l.Clause{constructor(e){super(),this._optional=!1,e instanceof a.NodeRef?this.pattern=new o.Pattern(e):this.pattern=e}optional(){return this._optional=!0,this}match(e){if(e instanceof n)return this.addNextClause(e),e;let t=new n(e);return this.addNextClause(t),t}optionalMatch(e){let t=new O(e);return this.addNextClause(t),t}getCypher(e){let t=this.compilePath(e),r=this.pattern.getCypher(e),n=(0,s.compileCypherIfExists)(this.whereSubClause,e,{prefix:"\n"}),i=this.compileNextClause(e),o=(0,s.compileCypherIfExists)(this.setSubClause,e,{prefix:"\n"}),a=(0,s.compileCypherIfExists)(this.deleteClause,e,{prefix:"\n"}),l=(0,s.compileCypherIfExists)(this.removeClause,e,{prefix:"\n"}),u=this._optional?"OPTIONAL ":"";return`${u}MATCH ${t}${r}${n}${o}${l}${a}${i}`}};t.Match=E,t.Match=E=n=i([(0,T.mixin)(h.WithReturn,_.WithWhere,b.WithSet,m.WithWith,u.WithPathAssign,v.WithDelete,g.WithRemove,y.WithUnwind,p.WithCreate,f.WithMerge,d.WithFinish,c.WithCallProcedure)],E);class O extends E{constructor(e){super(e),this.optional()}}t.OptionalMatch=O},95835:function(e,t,r){"use strict";var n,i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Merge=void 0;let o=r(97632),a=r(42930),s=r(13738),l=r(56265),u=r(96009),c=r(23979),p=r(52628),d=r(60254),f=r(49330),h=r(38322),y=r(45037),m=r(38511),v=r(51135),g=r(92415),b=n=class extends s.Clause{constructor(e){super(),e instanceof o.Pattern?this.pattern=e:this.pattern=new o.Pattern(e),this.onCreateClause=new m.OnCreate(this),this.onMatchClause=new v.OnMatch(this)}onCreate(...e){return this.onCreateClause.addParams(...e),this}onCreateSet(...e){return this.onCreateClause.addParams(...e),this}onMatchSet(...e){return this.onMatchClause.addParams(...e),this}merge(e){if(e instanceof n)return this.addNextClause(e),e;let t=new n(e);return this.addNextClause(t),t}getCypher(e){let t=this.compilePath(e),r=`MERGE ${t}${this.pattern.getCypher(e)}`,n=(0,a.compileCypherIfExists)(this.setSubClause,e,{prefix:"\n"}),i=(0,a.compileCypherIfExists)(this.onCreateClause,e,{prefix:"\n"}),o=(0,a.compileCypherIfExists)(this.onMatchClause,e,{prefix:"\n"}),s=(0,a.compileCypherIfExists)(this.deleteClause,e,{prefix:"\n"}),l=(0,a.compileCypherIfExists)(this.removeClause,e,{prefix:"\n"}),u=this.compileNextClause(e);return`${r}${o}${i}${n}${l}${s}${u}`}};t.Merge=b,t.Merge=n=i([(0,g.mixin)(p.WithReturn,y.WithSet,l.WithPathAssign,f.WithDelete,h.WithRemove,d.WithWith,u.WithCreate,c.WithFinish)],b)},76991:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawCypher=t.Raw=void 0;let n=r(20089),i=r(13738);class o extends i.Clause{constructor(e){super(),"string"==typeof e?this.callback=this.stringToCallback(e):this.callback=e}getCypher(e){let t;let r=this.callback(e);if(!r)return"";let i={};"string"==typeof r?t=r:[t,i]=r;let o=(0,n.toCypherParams)(i);return e.addExtraParams(o),t}stringToCallback(e){return()=>e}}t.Raw=o;class a extends o{}t.RawCypher=a},58705:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Return=void 0;let i=r(42930),o=r(13738),a=r(52665),s=r(36325),l=r(92415),u=class extends o.Clause{constructor(...e){super(),this.isDistinct=!1,this.projection=new s.Projection(e)}addColumns(...e){return this.projection.addColumns(e),this}distinct(){return this.isDistinct=!0,this}getCypher(e){let t=this.projection.getCypher(e),r=(0,i.compileCypherIfExists)(this.orderByStatement,e,{prefix:"\n"}),n=this.isDistinct?" DISTINCT":"";return`RETURN${n} ${t}${r}`}};t.Return=u,t.Return=n([(0,l.mixin)(a.WithOrder)],u)},17218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Union=void 0;let n=r(13738);class i extends n.Clause{constructor(...e){super(),this.subqueries=[],this.subqueries=e.map(e=>e.getRoot()),this.addChildren(...e)}all(){return this.unionType="ALL",this}distinct(){return this.unionType="DISTINCT",this}getCypher(e,t){let r=this.subqueries.map(t=>t.getCypher(e)),n=this.unionType?` ${this.unionType}`:"";return r.join(`
UNION${n}
${t??""}`)}}t.Union=i},28826:function(e,t,r){"use strict";var n,i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Unwind=void 0;let o=r(42930),a=r(13738),s=r(96009),l=r(58207),u=r(26563),c=r(52628),p=r(60254),d=r(49330),f=r(38322),h=r(45037),y=r(36325),m=r(92415),v=n=class extends a.Clause{constructor(...e){super(),this.projection=new y.Projection(e)}addColumns(...e){this.projection.addColumns(e)}unwind(e,...t){return e instanceof n?(this.addNextClause(e),e):this.addColumnsToUnwindClause(e,...t)}getCypher(e){let t=this.projection.getCypher(e),r=(0,o.compileCypherIfExists)(this.deleteClause,e,{prefix:"\n"}),n=(0,o.compileCypherIfExists)(this.setSubClause,e,{prefix:"\n"}),i=(0,o.compileCypherIfExists)(this.removeClause,e,{prefix:"\n"}),a=this.compileNextClause(e);return`UNWIND ${t}${n}${i}${r}${a}`}addColumnsToUnwindClause(...e){if(this.nextClause||this.addNextClause(new n),!(this.nextClause instanceof n))throw Error("Invalid Unwind statement");return this.nextClause.addColumns(...e),this.nextClause}};t.Unwind=v,t.Unwind=n=i([(0,m.mixin)(p.WithWith,d.WithDelete,l.WithMatch,c.WithReturn,f.WithRemove,h.WithSet,s.WithCreate,u.WithMerge)],v)},47565:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Use=void 0;let n=r(13738);class i extends n.Clause{constructor(e,t){super(),this.subClause=t.getRoot(),this.graph=e,this.addChildren(this.subClause)}getCypher(e){let t=this.subClause.getCypher(e);return`USE ${this.graph}
${t}`}}t.Use=i},24544:function(e,t,r){"use strict";var n,i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.With=void 0;let o=r(42930),a=r(13738),s=r(82086),l=r(96009),u=r(58207),c=r(26563),p=r(52628),d=r(76065),f=r(49330),h=r(52665),y=r(62041),m=r(36325),v=r(92415),g=n=class extends a.Clause{constructor(...e){super(),this.isDistinct=!1,this.projection=new m.Projection(e)}addColumns(...e){return this.projection.addColumns(e),this}distinct(){return this.isDistinct=!0,this}with(...e){return this.withStatement?this.withStatement.addColumns(...e):(this.withStatement=new n(...e),this.addChildren(this.withStatement)),this.withStatement}getCypher(e){let t=this.projection.getCypher(e),r=(0,o.compileCypherIfExists)(this.orderByStatement,e,{prefix:"\n"}),n=(0,o.compileCypherIfExists)(this.withStatement,e,{prefix:"\n"}),i=(0,o.compileCypherIfExists)(this.whereSubClause,e,{prefix:"\n"}),a=(0,o.compileCypherIfExists)(this.deleteClause,e,{prefix:"\n"}),s=this.isDistinct?" DISTINCT":"",l=this.compileNextClause(e);return`WITH${s} ${t}${i}${r}${a}${n}${l}`}};t.With=g,t.With=n=i([(0,v.mixin)(h.WithOrder,p.WithReturn,y.WithWhere,f.WithDelete,u.WithMatch,d.WithUnwind,l.WithCreate,c.WithMerge,s.WithCallProcedure)],g)},78734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MixinClause=t.Mixin=void 0;let n=r(13738),i=r(76767);class o extends i.CypherASTNode{}t.Mixin=o;class a extends n.Clause{}t.MixinClause=a},56265:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithPathAssign=void 0;let n=r(42930),i=r(78734);class o extends i.Mixin{assignToPath(e){return this.pathVariable=e,this}compilePath(e){return(0,n.compileCypherIfExists)(this.pathVariable,e,{suffix:" = "})}}t.WithPathAssign=o},82086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithCallProcedure=void 0;let n=r(78734);class i extends n.MixinClause{callProcedure(e){return this.addNextClause(e),e}}t.WithCallProcedure=i},96009:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithCreate=void 0;let n=r(52462),i=r(78734);class o extends i.MixinClause{create(e){if(e instanceof n.Create)return this.addNextClause(e),e;let t=new n.Create(e);return this.addNextClause(t),t}}t.WithCreate=o},23979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithFinish=void 0;let n=r(52462),i=r(78734);class o extends i.MixinClause{finish(){let e=new n.Finish;return this.addNextClause(e),e}}t.WithFinish=o},58207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithMatch=void 0;let n=r(52462),i=r(78734);class o extends i.MixinClause{match(e){if(e instanceof n.Match)return this.addNextClause(e),e;let t=new n.Match(e);return this.addNextClause(t),t}optionalMatch(e){let t=new n.OptionalMatch(e);return this.addNextClause(t),t}}t.WithMatch=o},26563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithMerge=void 0;let n=r(52462),i=r(78734);class o extends i.MixinClause{merge(e){if(e instanceof n.Merge)return this.addNextClause(e),e;let t=new n.Merge(e);return this.addNextClause(t),t}}t.WithMerge=o},52628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithReturn=void 0;let n=r(58705),i=r(78734);class o extends i.MixinClause{return(e,...t){let r=this.getReturnClause(e,t);return this.addNextClause(r),r}getReturnClause(e,t){return e instanceof n.Return?e:new n.Return(e,...t)}}t.WithReturn=o},76065:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithUnwind=void 0;let n=r(28826),i=r(78734);class o extends i.MixinClause{unwind(e,...t){let r=this.getUnwindClause(e,t);return this.addNextClause(r),r}getUnwindClause(e,t){return e instanceof n.Unwind?e:new n.Unwind(e,...t)}}t.WithUnwind=o},60254:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithWith=void 0;let n=r(52462),i=r(78734);class o extends i.MixinClause{with(e,...t){let r=this.getWithClause(e,t);return this.addNextClause(r),r}getWithClause(e,t){return e instanceof n.With?e:new n.With(e,...t)}}t.WithWith=o},49330:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithDelete=void 0;let n=r(40312),i=r(78734);class o extends i.Mixin{delete(...e){return this.createDeleteClause(e),this}detachDelete(...e){return this.createDeleteClause(e).detach(),this}noDetachDelete(...e){return this.createDeleteClause(e).noDetach(),this}createDeleteClause(e){return this.deleteClause=new n.DeleteClause(this,e),this.deleteClause}}t.WithDelete=o},52665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithOrder=void 0;let n=r(6233),i=r(78734);class o extends i.Mixin{orderBy(...e){let t=e.map(e=>Array.isArray(e)?[e[0],e[1]||"ASC"]:[e,"ASC"]);return this.getOrCreateOrderBy().addOrderElements(t),this}skip(e){return this.getOrCreateOrderBy().skip(e),this}limit(e){return this.getOrCreateOrderBy().limit(e),this}getOrCreateOrderBy(){return this.orderByStatement||(this.orderByStatement=new n.OrderBy),this.orderByStatement}}t.WithOrder=o},38322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithRemove=void 0;let n=r(66886),i=r(78734);class o extends i.Mixin{remove(...e){return this.removeClause=new n.RemoveClause(this,e),this}}t.WithRemove=o},45037:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithSet=void 0;let n=r(41586),i=r(78734);class o extends i.Mixin{set(...e){return this.setSubClause?this.setSubClause.addParams(...e):this.setSubClause=new n.SetClause(this,e),this}}t.WithSet=o},62041:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WithWhere=void 0;let n=r(8963),i=r(55232),o=r(52219),a=r(66059),s=r(5884),l=r(78734);class u extends l.Mixin{where(e,t){return this.updateOrCreateWhereClause(e,t),this}and(e,t){return this.updateOrCreateWhereClause(e,t),this}updateOrCreateWhereClause(e,t){let r=this.createWhereInput(e,t);if(r){if(this.whereSubClause)this.whereSubClause.and(r);else{let e=new s.Where(this,r);this.whereSubClause=e}}}createWhereInput(e,t){return e?e instanceof a.Variable||e instanceof o.PropertyRef?this.variableAndObjectToOperation(e,t??{}):e:void 0}variableAndObjectToOperation(e,t){let r;for(let[o,a]of Object.entries(t)){let t=e.property(o),s=(0,i.eq)(t,a);r=r?(0,n.and)(r,s):s}return r}}t.WithWhere=u},40312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteClause=void 0;let n=r(76767);class i extends n.CypherASTNode{constructor(e,t){super(e),this.deleteInput=t}detach(){this.detachKeyword="DETACH"}noDetach(){this.detachKeyword="NODETACH"}getCypher(e){let t=this.deleteInput.map(t=>t.getCypher(e)),r=this.detachKeyword?`${this.detachKeyword} `:"";return`${r}DELETE ${t.join(",")}`}}t.DeleteClause=i},62439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportWith=void 0;let n=r(76767);class i extends n.CypherASTNode{constructor(e,t){super(e),this.hasStar=!1,this.params=this.filterParams(t)}getCypher(e){let t=this.params.map(t=>t.getCypher(e));return this.hasStar&&(t=["*",...t]),`WITH ${t.join(", ")}`}filterParams(e){return e.filter(e=>"*"!==e||(this.hasStar=!0,!1))}}t.ImportWith=i},38511:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnCreate=void 0;let n=r(41586);class i extends n.SetClause{getCypher(e){if(0===this.params.length)return"";let t=super.getCypher(e);return`ON CREATE ${t}`}}t.OnCreate=i},51135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnMatch=void 0;let n=r(41586);class i extends n.SetClause{getCypher(e){if(0===this.params.length)return"";let t=super.getCypher(e);return`ON MATCH ${t}`}}t.OnMatch=i},6233:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderBy=void 0;let n=r(76767),i=r(42930),o=r(76852);class a extends n.CypherASTNode{constructor(){super(...arguments),this.exprs=[]}addOrderElements(e){this.exprs.push(...e)}skip(e){let t=(0,o.normalizeExpr)(e);this.skipClause=new s(t)}limit(e){let t=(0,o.normalizeExpr)(e);this.limitClause=new l(t)}hasOrder(){return this.exprs.length>0}getCypher(e){let t="",r=(0,i.compileCypherIfExists)(this.skipClause,e,{prefix:"\n"}),n=(0,i.compileCypherIfExists)(this.limitClause,e,{prefix:"\n"});if(this.hasOrder()){let r=this.exprs.map(([t,r])=>`${t.getCypher(e)} ${r}`).join(", ");t=`ORDER BY ${r}`}return`${t}${r}${n}`}}t.OrderBy=a;class s extends n.CypherASTNode{constructor(e){super(),this.value=e}getCypher(e){let t=this.value.getCypher(e);return`SKIP ${t}`}}class l extends n.CypherASTNode{constructor(e){super(),this.value=e}getCypher(e){let t=this.value.getCypher(e);return`LIMIT ${t}`}}},36325:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Projection=void 0;let n=r(76767);class i extends n.CypherASTNode{constructor(e){super(),this.columns=[],this.isStar=!1,this.addColumns(e)}addColumns(e){let t=e.filter(e=>"*"!==e||(this.isStar=!0,!1));this.columns.push(...t)}getCypher(e){let t=this.columns.map(t=>this.serializeColumn(t,e));return this.isStar&&(t=["*",...t]),t.join(", ")}serializeColumn(e,t){if(Array.isArray(e)){let r;let n=e[0].getCypher(t),i=e[1];return r="string"==typeof i?i:i.getCypher(t),`${n} AS ${r}`}return e.getCypher(t)}}t.Projection=i},66886:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveClause=void 0;let n=r(76767);class i extends n.CypherASTNode{constructor(e,t){super(e),this.removeInput=t}getCypher(e){let t=this.removeInput.map(t=>t.getCypher(e));return`REMOVE ${t.join(",")}`}}t.RemoveClause=i},41586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetClause=void 0;let n=r(76767),i=r(31737);class o extends n.CypherASTNode{constructor(e,t=[]){super(e),this.params=t}addParams(...e){this.params.push(...e)}getCypher(e){if(0===this.params.length)return"";let t=this.params.map(t=>this.composeParam(e,t)).join(",\n");return`SET
${(0,i.padBlock)(t)}`}composeParam(e,[t,r]){return`${t.getCypher(e)} = ${r.getCypher(e)}`}}t.SetClause=o},5884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Where=void 0;let n=r(76767),i=r(8963);class o extends n.CypherASTNode{constructor(e,t){super(e),this.wherePredicate=t,this.addChildren(this.wherePredicate)}and(e){this.wherePredicate=(0,i.and)(this.wherePredicate,e),this.addChildren(this.wherePredicate)}getCypher(e){let t=this.wherePredicate.getCypher(e);return t?`WHERE ${t}`:""}}t.Where=o},67730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeClause=void 0,t.concat=function(...e){return new a(e,"\n")};let n=r(52462),i=r(50429),o=r(13738);class a extends o.Clause{constructor(e,t){super(),this.separator=t,this._children=[],this.concat(...e)}concat(...e){let t=this.filterClauses(e);return this.addChildren(...t),this._children=[...this._children,...t],this}get empty(){return 0===this._children.length}get children(){return this._children}getCypher(e,t){return this._children.map(r=>t&&r instanceof n.Union?r.getCypher(e,t):r.getCypher(e)).join(this.separator)}filterClauses(e){let t=(0,i.filterTruthy)(e).map(e=>e.getRoot());return this.filterEmptyComposite(t).map(e=>e instanceof a?this.unwrapComposite(e):e)}filterEmptyComposite(e){return e.filter(e=>!(e instanceof a)||!e.empty)}unwrapComposite(e){return 1===e.children.length?e.children[0]:e}}t.CompositeClause=a},92415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixin=function(...e){return t=>(e.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(r=>{"constructor"!==r&&Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r)??Object.create(null))})}),t)}},68668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Case=void 0;let n=r(76767),i=r(42930),o=r(31737);class a extends n.CypherASTNode{constructor(e){super(),this.whenClauses=[],this.comparator=e}when(...e){let t=new s(this,e);return this.whenClauses.push(t),t}else(e){return this.default=e,this}getCypher(e){let t=(0,i.compileCypherIfExists)(this.comparator,e,{prefix:" "}),r=this.whenClauses.map(t=>t.getCypher(e)).join("\n"),n=(0,i.compileCypherIfExists)(this.default,e,{prefix:"\nELSE "}),a=(0,o.padBlock)(`${r}${n}`);return`CASE${t}
${a}
END`}}t.Case=a;class s extends n.CypherASTNode{constructor(e,t){super(e),this.parent=e,this.predicates=t}then(e){return this.result=e,this.parent}getCypher(e){let t=this.predicates.map(t=>t.getCypher(e)).join(", ");if(!this.result)throw Error("Cannot generate CASE ... WHEN statement without THEN");let r=this.result.getCypher(e);return`WHEN ${t} THEN ${r}`}}},7681:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HasLabel=void 0;let n=r(76767),i=r(29656),o=r(53425);class a extends n.CypherASTNode{constructor(e,t){super(),this.validateLabelsInput(t),this.node=e,this.expectedLabels=t}getCypher(e){let t=this.node.getCypher(e),r=this.generateLabelExpressionStr(e);return`${t}${r}`}generateLabelExpressionStr(e){if(!Array.isArray(this.expectedLabels))return(0,i.addLabelToken)(e.config.labelOperator,this.expectedLabels.getCypher(e));{let t=this.expectedLabels.map(e=>(0,o.escapeLabel)(e));return(0,i.addLabelToken)(e.config.labelOperator,...t)}}validateLabelsInput(e){if(Array.isArray(e)&&0===e.length)throw Error("HasLabel needs at least 1 label")}}t.HasLabel=a},15707:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IsType=t.CypherTypes=void 0,t.isType=function(e,t){return new a(e,(0,i.asArray)(t))},t.isNotType=function(e,t){return new a(e,(0,i.asArray)(t),!0)};let n=r(76767),i=r(60970);t.CypherTypes={ANY:"ANY",BOOLEAN:"BOOLEAN",DATE:"DATE",DURATION:"DURATION",FLOAT:"FLOAT",INTEGER:"INTEGER",LOCAL_DATETIME:"LOCAL DATETIME",LOCAL_TIME:"LOCAL_TIME",MAP:"MAP",NODE:"NODE",NOTHING:"NOTHING",NULL:"NULL",PATH:"PATH",POINT:"POINT",PROPERTY_VALUE:"PROPERTY VALUE",RELATIONSHIP:"RELATIONSHIP",STRING:"STRING",ZONED_DATETIME:"ZONED DATETIME",ZONED_TIME:"ZONED TIME",list:function(e){return new o((0,i.asArray)(e))}};class o{constructor(e){this._notNull=!1,this.types=e}notNull(){return this._notNull=!0,this}getCypher(e){let t=this._notNull?" NOT NULL":"",r=this.types.map(r=>{let n=s(r,e);return`${n}${t}`}).join(" | ");return`LIST<${r}>`}}class a extends n.CypherASTNode{constructor(e,t,r=!1){super(),this._notNull=!1,this.expr=e,this.types=t,this.not=r}notNull(){return this._notNull=!0,this}getCypher(e){let t=e.compile(this.expr),r=this.not?"IS NOT":"IS",n=this._notNull?" NOT NULL":"",i=this.types.map(t=>{let r=s(t,e);return`${r}${n}`}).join(" | ");return`${t} ${r} :: ${i}`}}function s(e,t){return e instanceof o?t.compile(e):e}t.IsType=a},79201:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CypherFunction=void 0;let n=r(76767);class i extends n.CypherASTNode{constructor(e,t=[],r){for(let n of(super(),this.params=[],this.name=r?`${r}.${e}`:e,t))this.addParam(n)}getCypher(e){let t=this.serializeParams(e);return`${this.name}(${t})`}addParam(e){this.params.push(e),e instanceof n.CypherASTNode&&this.addChildren(e)}serializeParams(e){return this.params.map(t=>t.getCypher(e)).join(", ")}}t.CypherFunction=i},82098:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CypherAggregationFunction=void 0,t.count=function(e){return new o("count",[e])},t.min=function(e){return new o("min",[e])},t.max=function(e){return new o("max",[e])},t.avg=function(e){return new o("avg",[e])},t.sum=function(e){return new o("sum",[e])},t.collect=function(e){return new o("collect",[e])},t.percentileCont=function(e,t){return new o("percentileCont",[e,(0,n.normalizeExpr)(t)])},t.percentileDisc=function(e,t){return new o("percentileDisc",[e,(0,n.normalizeExpr)(t)])},t.stDev=function(e){return new o("stDev",[e])},t.stDevP=function(e){return new o("stDevP",[e])};let n=r(76852),i=r(79201);class o extends i.CypherFunction{constructor(e,t){for(let r of(super(e),this.hasDistinct=!1,this.hasStar=!1,t))"*"===r?this.hasStar=!0:this.addParam(r)}distinct(){if(this.hasStar)throw Error("count(*) is not supported with DISTINCT");return this.hasDistinct=!0,this}getCypher(e){let t=this.hasStar?"*":this.serializeParams(e),r=this.hasDistinct?"DISTINCT ":"";return`${this.name}(${r}${t})`}}t.CypherAggregationFunction=o},56948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.names=function(){return new n.CypherFunction("graph.names")},t.propertiesByName=function(e){return new n.CypherFunction("graph.propertiesByName",[e])},t.byName=function(e){return new n.CypherFunction("graph.propertiesByName",[e])};let n=r(79201)},38955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keys=function(e){return new o.CypherFunction("keys",[e])},t.labels=function(e){return new o.CypherFunction("labels",[e])},t.range=function(e,t,r){let a=(0,n.filterTruthy)([e,t,r]).map(i.normalizeExpr);return new o.CypherFunction("range",a)},t.reverse=function(e){return new o.CypherFunction("reverse",[e])},t.tail=function(e){return new o.CypherFunction("tail",[e])},t.toBooleanList=function(e){return new o.CypherFunction("toBooleanList",[e])},t.toFloatList=function(e){return new o.CypherFunction("toFloatList",[e])},t.toIntegerList=function(e){return new o.CypherFunction("toIntegerList",[e])},t.toStringList=function(e){return new o.CypherFunction("toStringList",[e])},t.reduce=function(e,t,r,n,i){return new a({accVariable:e,defaultValue:t,variable:r,listExpr:n,mapExpr:i})};let n=r(50429),i=r(76852),o=r(79201);class a extends o.CypherFunction{constructor({accVariable:e,defaultValue:t,variable:r,listExpr:n,mapExpr:i}){super("reduce"),this.accVariable=e,this.defaultValue=t,this.variable=r,this.listExpr=n,this.mapExpr=i}getCypher(e){let t=`${this.accVariable.getCypher(e)} = ${this.defaultValue.getCypher(e)}`,r=this.variable.getCypher(e),n=this.listExpr.getCypher(e),i=this.mapExpr.getCypher(e);return`${this.name}(${t}, ${r} IN ${n} | ${i})`}}},76005:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linenumber=function(){return new n.CypherFunction("linenumber")},t.file=function(){return new n.CypherFunction("file")};let n=r(79201)},13389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.abs=function(e){return new o.CypherFunction("abs",[e])},t.ceil=function(e){return new o.CypherFunction("ceil",[e])},t.floor=function(e){return new o.CypherFunction("floor",[e])},t.cypherIsNaN=function(e){return new o.CypherFunction("isNaN",[e])},t.rand=function(){return new o.CypherFunction("rand")},t.round=function(e,t,r){let a;let s=r?new n.Literal(r):void 0;return a="number"==typeof t?new n.Literal(t):t,new o.CypherFunction("round",(0,i.filterTruthy)([e,a,s]))},t.sign=function(e){return new o.CypherFunction("sign",[e])},t.e=function(){return new o.CypherFunction("e")},t.exp=function(e){return new o.CypherFunction("exp",[e])},t.log=function(e){return new o.CypherFunction("log",[e])},t.log10=function(e){return new o.CypherFunction("log10",[e])},t.sqrt=function(e){return new o.CypherFunction("sqrt",[e])},t.acos=function(e){return new o.CypherFunction("acos",[e])},t.asin=function(e){return new o.CypherFunction("asin",[e])},t.atan=function(e){return new o.CypherFunction("atan",[e])},t.atan2=function(e){return new o.CypherFunction("atan2",[e])},t.cos=function(e){return new o.CypherFunction("cos",[e])},t.cot=function(e){return new o.CypherFunction("cot",[e])},t.degrees=function(e){return new o.CypherFunction("degrees",[e])},t.haversin=function(e){return new o.CypherFunction("haversin",[e])},t.pi=function(){return new o.CypherFunction("pi")},t.radians=function(e){return new o.CypherFunction("radians",[e])},t.sin=function(e){return new o.CypherFunction("sin",[e])},t.tan=function(e){return new o.CypherFunction("tan",[e])};let n=r(94476),i=r(50429),o=r(79201)},6225:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nodes=function(e){return new n.CypherFunction("nodes",[e])},t.relationships=function(e){return new n.CypherFunction("relationships",[e])};let n=r(79201)},61507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PredicateFunction=void 0,t.all=function(e,t,r){return new l("all",e,t,r)},t.any=function(e,t,r){return new l("any",e,t,r)},t.exists=function(e){return new s(e)},t.isEmpty=function(e){return new a("isEmpty",[e])},t.none=function(e,t,r){return new l("none",e,t,r)},t.single=function(e,t,r){return new l("single",e,t,r)};let n=r(5884),i=r(42930),o=r(79201);class a extends o.CypherFunction{}t.PredicateFunction=a;class s extends a{constructor(e){super("exists"),this.pattern=e}getCypher(e){let t=this.pattern.getCypher(e);return`exists(${t})`}}class l extends a{constructor(e,t,r,i){super(e),this.variable=t,this.listExpr=r,this.whereSubClause=new n.Where(this,i)}getCypher(e){let t=(0,i.compileCypherIfExists)(this.whereSubClause,e,{prefix:" "}),r=this.listExpr.getCypher(e),n=this.variable.getCypher(e);return`${this.name}(${n} IN ${r}${t})`}}},81399:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coalesce=function(e,...t){return new n.CypherFunction("coalesce",[e,...t])},t.elementId=function(e){return new n.CypherFunction("elementId",[e])},t.endNode=function(e){return new n.CypherFunction("endNode",[e])},t.head=function(e){return new n.CypherFunction("head",[e])},t.id=function(e){return new n.CypherFunction("id",[e])},t.last=function(e){return new n.CypherFunction("last",[e])},t.length=function(e){return new n.CypherFunction("length",[e])},t.properties=function(e){return new n.CypherFunction("properties",[e])},t.randomUUID=function(){return new n.CypherFunction("randomUUID")},t.size=function(e){return new n.CypherFunction("size",[e])},t.startNode=function(e){return new n.CypherFunction("startNode",[e])},t.timestamp=function(){return new n.CypherFunction("timestamp")},t.toBoolean=function(e){return new n.CypherFunction("toBoolean",[e])},t.toBooleanOrNull=function(e){return new n.CypherFunction("toBooleanOrNull",[e])},t.toFloat=function(e){return new n.CypherFunction("toFloat",[e])},t.toFloatOrNull=function(e){return new n.CypherFunction("toFloatOrNull",[e])},t.toInteger=function(e){return new n.CypherFunction("toInteger",[e])},t.toIntegerOrNull=function(e){return new n.CypherFunction("toIntegerOrNull",[e])},t.type=function(e){return new n.CypherFunction("type",[e])},t.valueType=function(e){return new n.CypherFunction("valueType",[e])},t.char_length=function(e){return new n.CypherFunction("char_length",[e])},t.character_length=function(e){return new n.CypherFunction("character_length",[e])},t.nullIf=function(e,t){return new n.CypherFunction("nullIf",[e,t])};let n=r(79201)},13623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.point=i,t.distance=function(e,t){return new n.CypherFunction("distance",[e,t])},t.pointDistance=function(e,t){return new n.CypherFunction("point.distance",[e,t])};let n=r(79201);function i(e){return new n.CypherFunction("point",[e])}i.distance=(e,t)=>new n.CypherFunction("point.distance",[e,t]),i.withinBBox=(e,t,r)=>new n.CypherFunction("point.withinBBox",[e,t,r])},11150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.btrim=function(e,t){let r=(0,i.normalizeExpr)(e),a=t?(0,i.normalizeExpr)(t):void 0;return new o.CypherFunction("btrim",(0,n.filterTruthy)([r,a]))},t.left=function(e,t){return new o.CypherFunction("left",[e,t])},t.lower=function(e){return new o.CypherFunction("lower",[e])},t.lTrim=function(e,t){let r=(0,i.normalizeExpr)(e),a=t?(0,i.normalizeExpr)(t):void 0;return new o.CypherFunction("lTrim",(0,n.filterTruthy)([r,a]))},t.ltrim=function(e,t){let r=(0,i.normalizeExpr)(e),a=t?(0,i.normalizeExpr)(t):void 0;return new o.CypherFunction("ltrim",(0,n.filterTruthy)([r,a]))},t.normalize=function(e,t){let r=t?(0,i.normalizeExpr)(t):void 0;return new o.CypherFunction("normalize",(0,n.filterTruthy)([e,r]))},t.replace=function(e,t,r){return new o.CypherFunction("replace",[e,t,r])},t.right=function(e,t){return new o.CypherFunction("right",[e,t])},t.rTrim=function(e,t){let r=(0,i.normalizeExpr)(e),a=t?(0,i.normalizeExpr)(t):void 0;return new o.CypherFunction("rTrim",(0,n.filterTruthy)([r,a]))},t.rtrim=function(e,t){let r=(0,i.normalizeExpr)(e),a=t?(0,i.normalizeExpr)(t):void 0;return new o.CypherFunction("rtrim",(0,n.filterTruthy)([r,a]))},t.split=function(e,t){return new o.CypherFunction("split",[e,t])},t.substring=function(e,t,r){return new o.CypherFunction("substring",(0,n.filterTruthy)([e,t,r]))},t.toLower=function(e){return new o.CypherFunction("toLower",[e])},t.toString=function(e){return new o.CypherFunction("toString",[e])},t.toStringOrNull=function(e){return new o.CypherFunction("toStringOrNull",[e])},t.toUpper=function(e){return new o.CypherFunction("toUpper",[e])},t.trim=function(e){return new o.CypherFunction("trim",[e])},t.upper=function(e){return new o.CypherFunction("upper",[e])};let n=r(50429),i=r(76852),o=r(79201)},71513:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cypherDatetime=a,t.cypherDate=s,t.cypherLocalDatetime=l,t.cypherLocalTime=u,t.cypherTime=c,t.duration=p;let n=r(23881),i=r(76852),o=r(79201);function a(e){return d("datetime",e)}function s(e){return d("date",e)}function l(e){return d("localdatetime",e)}function u(e){return d("localtime",e)}function c(e){return d("time",e)}function p(e){return new o.CypherFunction("duration",[e])}function d(e,t){return new o.CypherFunction(e,t?[t]:void 0)}a.fromepoch=(e,t)=>{let r=(0,i.normalizeExpr)(e),n=(0,i.normalizeExpr)(t);return new o.CypherFunction("datetime.fromepoch",[r,n])},a.fromepochmilis=(e,t)=>{let r=(0,i.normalizeExpr)(e),n=(0,i.normalizeExpr)(t);return new o.CypherFunction("datetime.fromepochmilis",[r,n])},a.realtime=e=>d("datetime.realtime",e),a.statement=e=>d("datetime.statement",e),a.transaction=e=>d("datetime.transaction",e),a.truncate=(e,t,r)=>{let i=[new n.Literal(e),t];return r&&i.push(r),new o.CypherFunction("datetime.truncate",i)},s.realtime=e=>d("date.realtime",e),s.statement=e=>d("date.statement",e),s.transaction=e=>d("date.transaction",e),s.truncate=(e,t,r)=>{let i=[new n.Literal(e),t];return r&&i.push(r),new o.CypherFunction("date.truncate",i)},l.realtime=e=>d("localdatetime.realtime",e),l.statement=e=>d("localdatetime.statement",e),l.transaction=e=>d("localdatetime.transaction",e),l.truncate=(e,t,r)=>{let i=[new n.Literal(e),t];return r&&i.push(r),new o.CypherFunction("localdatetime.truncate",i)},u.realtime=e=>d("localtime.realtime",e),u.statement=e=>d("localtime.statement",e),u.transaction=e=>d("localtime.transaction",e),u.truncate=(e,t,r)=>{let i=[new n.Literal(e),t];return r&&i.push(r),new o.CypherFunction("localtime.truncate",i)},c.realtime=e=>d("time.realtime",e),c.statement=e=>d("time.statement",e),c.transaction=e=>d("time.transaction",e),c.truncate=(e,t,r)=>{let i=[new n.Literal(e),t];return r&&i.push(r),new o.CypherFunction("time.truncate",i)},p.between=(e,t)=>new o.CypherFunction("duration.between",[e,t]),p.inMonths=(e,t)=>new o.CypherFunction("duration.inMonths",[e,t]),p.inDays=(e,t)=>new o.CypherFunction("duration.inDays",[e,t]),p.inSeconds=(e,t)=>new o.CypherFunction("duration.inSeconds",[e,t])},7150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labelExpr=t.LabelExpr=void 0;let n=r(42930),i=r(53425);class o{constructor(e){this.operator=e}compileLabel(e,t){return"string"==typeof e?(0,i.escapeLabel)(e):(0,n.compileCypherIfExists)(e,t)}}t.LabelExpr=o;class a extends o{constructor(e,t){super(e),this.labels=t}getCypher(e){let t=this.labels.map(t=>this.compileLabel(t,e));return 0===t.length?"":`(${t.join(this.operator)})`}}class s extends o{constructor(e){super("!"),this.label=e}getCypher(e){let t=this.compileLabel(this.label,e);return`${this.operator}${t}`}}class l extends o{constructor(){super("%")}getCypher(){return this.operator}}let u=new l;t.labelExpr={and:function(...e){return new a("&",e)},or:function(...e){return new a("|",e)},not:function(e){return new s(e)},wildcard:u}},76269:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.ListComprehension=void 0;let i=r(62041),o=r(92415),a=r(76767),s=r(42930),l=class extends a.CypherASTNode{constructor(e,t){super(),this.variable=e,this.listExpr=t}in(e){if(this.listExpr)throw Error("Cannot set 2 lists in list comprehension IN");return this.listExpr=e,this}map(e){return this.mapExpr=e,this}getCypher(e){if(!this.listExpr)throw Error("List Comprehension needs a source list after IN");let t=(0,s.compileCypherIfExists)(this.whereSubClause,e,{prefix:" "}),r=(0,s.compileCypherIfExists)(this.mapExpr,e,{prefix:" | "}),n=this.listExpr.getCypher(e),i=this.variable.getCypher(e);return`[${i} IN ${n}${t}${r}]`}};t.ListComprehension=l,t.ListComprehension=n([(0,o.mixin)(i.WithWhere)],l)},14101:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListExpr=void 0;let n=r(85749);class i{constructor(e){this.value=e}serializeList(e,t){let r=t.map(t=>t.getCypher(e)).join(", ");return`[${r}]`}getCypher(e){return this.serializeList(e,this.value)}index(e){return new n.ListIndex(this,e)}}t.ListExpr=i},85749:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListIndex=void 0;class r{constructor(e,t){this.value=e,this.index=t}getCypher(e){return`${this.value.getCypher(e)}[${this.index}]`}}t.ListIndex=r},28518:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.PatternComprehension=void 0;let i=r(62041),o=r(92415),a=r(76767),s=r(97632),l=r(42930),u=class extends a.CypherASTNode{constructor(e,t){super(),e instanceof s.Pattern?this.pattern=e:this.pattern=new s.Pattern(e),this.mapExpr=t}map(e){return this.mapExpr=e,this}getCypher(e){let t=(0,l.compileCypherIfExists)(this.whereSubClause,e,{prefix:" "}),r=(0,l.compileCypherIfExists)(this.mapExpr,e,{prefix:" | "}),n=this.pattern.getCypher(e);return`[${n}${t}${r}]`}};t.PatternComprehension=u,t.PatternComprehension=n([(0,o.mixin)(i.WithWhere)],u)},37e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapExpr=void 0;let n=r(33743);class i{constructor(e={}){this.map=new Map,this.set(e)}get size(){return this.map.size}set(e,t){"string"==typeof e?this.setField(e,t):Object.entries(e).forEach(([e,t])=>{this.setField(e,t)})}setField(e,t){if(!t)throw Error(`Missing value on map key ${e}`);this.map.set(e,t)}getCypher(e){return(0,n.serializeMap)(e,this.map)}}t.MapExpr=i},20858:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapProjection=void 0;let n=r(53425),i=r(14149),o=r(33743),a=r(37e3);class s{constructor(e,t=[],r={}){this.extraValues=new Map,this.isStar=!1,this.variable=e,"*"===t?(this.isStar=!0,this.projection=[]):this.projection=t,this.setExtraValues(r)}set(e){(0,i.isString)(e)?this.projection.push(e):this.setExtraValues(e)}toMap(){let e=this.projection.reduce((e,t)=>(e[t]=this.variable.property(t),e),{});return new a.MapExpr({...e,...Object.fromEntries(this.extraValues)})}getCypher(e){let t=this.variable.getCypher(e),r=(0,o.serializeMap)(e,this.extraValues,!0),i=this.projection.map(e=>`.${(0,n.escapeProperty)(e)}`);this.isStar&&i.unshift(".*");let a=i.join(", ");return`${t} { ${a}${r&&a?", ":""}${r} }`}setExtraValues(e){Object.entries(e).forEach(([e,t])=>{if(!t)throw Error(`Missing value on map key ${e}`);this.extraValues.set(e,t)})}}t.MapProjection=s},8963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BooleanOp=void 0,t.and=function(...e){let t=(0,n.filterTruthy)(e),r=t.shift(),i=t.shift();return r&&i?new a("AND",r,i,...t):r},t.not=function(e){return new s(e)},t.or=function(...e){let t=(0,n.filterTruthy)(e),r=t.shift(),i=t.shift();return r&&i?new a("OR",r,i,...t):r},t.xor=function(...e){let t=(0,n.filterTruthy)(e),r=t.shift(),i=t.shift();return r&&i?new a("XOR",r,i,...t):r};let n=r(50429),i=r(76767);class o extends i.CypherASTNode{constructor(e){super(),this.operator=e}}t.BooleanOp=o;class a extends o{constructor(e,t,r,...n){super(e),this.children=[t,r,...n],this.addChildren(...this.children)}getCypher(e){let t=this.children.map(t=>t.getCypher(e)).filter(Boolean);if(t.length<=1)return t.join("");let r=` ${this.operator} `;return`(${t.join(r)})`}}class s extends o{constructor(e){super("NOT"),this.child=e,this.addChildren(this.child)}getCypher(e){let t=this.child.getCypher(e);return this.child instanceof a?`${this.operator} ${t}`:`${this.operator} (${t})`}}},55232:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NormalizationOperator=t.ComparisonOp=void 0,t.eq=function(e,t){return a("=",e,t)},t.neq=function(e,t){return a("<>",e,t)},t.gt=function(e,t){return a(">",e,t)},t.gte=function(e,t){return a(">=",e,t)},t.lt=function(e,t){return a("<",e,t)},t.lte=function(e,t){return a("<=",e,t)},t.isNull=function(e){return a("IS NULL",e)},t.isNotNull=function(e){return a("IS NOT NULL",e)},t.inOp=function(e,t){return a("IN",e,t)},t.contains=function(e,t){return a("CONTAINS",e,t)},t.startsWith=function(e,t){return a("STARTS WITH",e,t)},t.endsWith=function(e,t){return a("ENDS WITH",e,t)},t.matches=function(e,t){return a("=~",e,t)},t.isNormalized=function(e,t){return new o("IS NORMALIZED",e,t)},t.isNotNormalized=function(e,t){return new o("IS NOT NORMALIZED",e,t)};let n=r(76767);class i extends n.CypherASTNode{constructor(e,t,r){super(),this.operator=e,this.leftExpr=t,this.rightExpr=r}getCypher(e){let t=`${this.leftExpr.getCypher(e)} `,r=this.rightExpr?` ${this.rightExpr.getCypher(e)}`:"";return`${t}${this.operator}${r}`}}t.ComparisonOp=i;class o extends i{constructor(e,t,r){super(e,t,void 0),this.normalizationType=r}getCypher(e){let t=`${this.leftExpr.getCypher(e)} `,r="IS NOT NORMALIZED"===this.operator?"NOT ":"",n=this.normalizationType?`${this.normalizationType} `:"";return`${t}IS ${r}${n}NORMALIZED`}}function a(e,t,r){return new i(e,t,r)}t.NormalizationOperator=o},20202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathOp=void 0,t.plus=function(...e){return o("+",e)},t.minus=function(e,t){return o("-",[e,t])},t.multiply=function(e,t){return o("*",[e,t])},t.divide=function(e,t){return o("/",[e,t])},t.mod=function(e,t){return o("%",[e,t])},t.pow=function(e,t){return o("^",[e,t])};let n=r(76767);class i extends n.CypherASTNode{constructor(e,t){super(),this.operator=e,this.exprs=t}getCypher(e){let t=this.exprs.map(t=>t.getCypher(e)),r=` ${this.operator} `;return`(${t.join(r)})`}}function o(e,t){return new i(e,t)}t.MathOp=i},75953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Collect=void 0;let n=r(31737),i=r(14288);class o extends i.Subquery{getCypher(e){let t=this.subquery.getCypher(e),r=(0,n.padBlock)(t);return`COLLECT {
${r}
}`}}t.Collect=o},55750:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Count=void 0;let n=r(31737),i=r(14288);class o extends i.Subquery{getCypher(e){let t=this.subquery.getCypher(e),r=(0,n.padBlock)(t);return`COUNT {
${r}
}`}}t.Count=o},18536:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Exists=void 0;let n=r(31737),i=r(14288);class o extends i.Subquery{getCypher(e){let t=this.subquery.getCypher(e),r=(0,n.padBlock)(t);return`EXISTS {
${r}
}`}}t.Exists=o},14288:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subquery=void 0;let n=r(76767);class i extends n.CypherASTNode{constructor(e){super();let t=e.getRoot();this.addChildren(t),this.subquery=t}}t.Subquery=i},52462:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});let s=o(r(94476));a(r(94476),t),t.default=s},65124:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.cypher=t.util=t.date=void 0,t.date=o(r(89424)),t.util=o(r(25824)),t.cypher=o(r(8843))},8843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runFirstColumnSingle=t.runFirstColumnMany=void 0;var n=r(77070);Object.defineProperty(t,"runFirstColumnMany",{enumerable:!0,get:function(){return n.runFirstColumnMany}}),Object.defineProperty(t,"runFirstColumnSingle",{enumerable:!0,get:function(){return n.runFirstColumnSingle}})},77070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runFirstColumnMany=function(e,t=[]){return new o(e,t,!0)},t.runFirstColumnSingle=function(e,t=[]){return new o(e,t,!1)};let n=r(79201),i=r(37e3);class o extends n.CypherFunction{constructor(e,t,r){super(`apoc.cypher.runFirstColumn${r?"Many":"Single"}`),this.innerClause=e,this.variables=this.parseVariablesInput(t),this.many=r}getCypher(e){let t,r;return(t="string"==typeof this.innerClause?this.innerClause:this.innerClause.getRoot().getCypher(e),r=Array.isArray(this.variables)?this.convertArrayToParams(e,this.variables):this.variables.getCypher(e),this.many)?`apoc.cypher.runFirstColumnMany("${this.escapeQuery(t)}", ${r})`:`apoc.cypher.runFirstColumnSingle("${this.escapeQuery(t)}", ${r})`}escapeQuery(e){return e.replace(/(["\\])/g,"\\$1")}parseVariablesInput(e){return Array.isArray(e)||e instanceof i.MapExpr?e:new i.MapExpr(e)}convertArrayToParams(e,t){let r=Object.entries(t.reduce((t,r)=>{let n=r.getCypher(e);return t[e.getReferenceId(r)]=n,t},{})).map(([e,t])=>`${e}: ${t}`).join(", ");return`{ ${r} }`}}},89424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFormat=function(e,t,r="yyyy-MM-dd"){return new i.CypherFunction("apoc.date.convertFormat",[(0,n.toString)(e),new n.Literal(t),new n.Literal(r)])};let n=r(52462),i=r(79201)},25824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validate=function(e,t,r=new n.Literal([0])){let a=(0,i.normalizeVariable)(t);return new o.VoidCypherProcedure("apoc.util.validate",[e,a,r])},t.validatePredicate=function(e,t){let r=new n.Literal([0]);return new a.CypherFunction("apoc.util.validatePredicate",[e,new n.Literal(t),r])};let n=r(23881),i=r(76852),o=r(38266),a=r(79201)},18974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.current=function(){return new n.CypherProcedure("cdc.current")},t.earliest=function(){return new n.CypherProcedure("cdc.earliest")},t.query=function(e,t=[]){let r=(0,i.normalizeExpr)(e),o=(0,i.normalizeList)(t);return new n.CypherProcedure("cdc.query",[r,o])};let n=r(38266),i=r(76852)},531:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.current=function(){return new n.CypherProcedure("current",[],o)},t.earliest=function(){return new n.CypherProcedure("earliest",[],o)},t.query=function(e,t=[]){let r=(0,i.normalizeExpr)(e),a=(0,i.normalizeList)(t);return new n.CypherProcedure("query",[r,a],o)};let n=r(38266),i=r(76852),o="db.cdc"},96123:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.schema=t.index=t.cdc=void 0,t.nameFromElementId=function(e){let t=(0,l.normalizeExpr)(e);return new a.CypherFunction("nameFromElementId",[t],"db")},t.awaitIndex=function(e,t){let r=(0,l.normalizeExpr)(e),n=(0,l.normalizeExpr)(t);return new s.VoidCypherProcedure("awaitIndex",[r,n],"db")},t.awaitIndexes=function(e){let t=(0,l.normalizeExpr)(e);return new s.VoidCypherProcedure("awaitIndex",[t],"db")},t.createLabel=function(e){let t=(0,l.normalizeExpr)(e);return new s.VoidCypherProcedure("createLabel",[t],"db")},t.createProperty=function(e){let t=(0,l.normalizeExpr)(e);return new s.VoidCypherProcedure("createProperty",[t],"db")},t.createRelationshipType=function(e){let t=(0,l.normalizeExpr)(e);return new s.VoidCypherProcedure("createRelationshipType",[t],"db")},t.info=function(){return new s.CypherProcedure("info",[],"db")},t.labels=function(){return new s.CypherProcedure("labels",[],"db")},t.ping=function(){return new s.CypherProcedure("ping",[],"db")},t.propertyKeys=function(){return new s.CypherProcedure("propertyKeys",[],"db")},t.relationshipTypes=function(){return new s.CypherProcedure("relationshipTypes",[],"db")},t.resampleIndex=function(){return new s.CypherProcedure("resampleIndex",[],"db")},t.resampleOutdatedIndexes=function(){return new s.CypherProcedure("resampleOutdatedIndexes",[],"db")};let a=r(79201),s=r(38266),l=r(76852);t.cdc=o(r(531)),t.index=o(r(61891)),t.schema=o(r(9965))},61891:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.vector=t.fulltext=void 0,t.fulltext=o(r(17861)),t.vector=o(r(53779))},17861:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryNodes=function(e,t,r){let i=a(e,t,r);return new n.CypherProcedure("queryNodes",i,o)},t.queryRelationships=function(e,t,r){let i=a(e,t,r);return new n.CypherProcedure("queryRelationships",i,o)},t.awaitEventuallyConsistentIndexRefresh=function(){return new n.VoidCypherProcedure("awaitEventuallyConsistentIndexRefresh",[],o)},t.listAvailableAnalyzers=function(){return new n.CypherProcedure("queryRelationships",[],o)};let n=r(38266),i=r(76852),o="db.index.fulltext";function a(e,t,r){let n=(0,i.normalizeVariable)(t),o=[(0,i.normalizeVariable)(e),n];if(r){let e=(0,i.normalizeMap)(r);o.push(e)}return o}},53779:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryNodes=function(e,t,r){let i=a(e,t,r);return new n.CypherProcedure("queryNodes",i,o)},t.queryRelationships=function(e,t,r){let i=a(e,t,r);return new n.CypherProcedure("queryRelationships",i,o)};let n=r(38266),i=r(76852),o="db.index.vector";function a(e,t,r){return[(0,i.normalizeVariable)(e),(0,i.normalizeVariable)(t),r]}},9965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nodeTypeProperties=function(){return new n.CypherProcedure("nodeTypeProperties",[],i)},t.relTypeProperties=function(){return new n.CypherProcedure("relTypeProperties",[],i)},t.visualization=function(){return new n.CypherProcedure("visualization",[],i)};let n=r(38266),i="db.schema"},77230:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.vector=void 0,t.vector=o(r(27646))},27646:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function(e,t,r){return new n.CypherFunction("encode",[e,(0,o.normalizeVariable)(t),(0,o.normalizeMap)(r)],a)},t.encodeBatch=function(e,t,r){return new i.CypherProcedure("encodeBatch",[e,(0,o.normalizeVariable)(t),(0,o.normalizeMap)(r)],a)};let n=r(79201),i=r(38266),o=r(76852),a="genai.vector"},91468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMetaData=function(){return new n.CypherProcedure("getMetaData",[],"tx")},t.setMetaData=function(e){return new n.CypherProcedure("setMetaData",[(0,i.normalizeMap)(e)],"tx")};let n=r(38266),i=r(76852)},78951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.euclidean=function(e,t){return new n.CypherFunction("euclidean",[e,t],i)},t.cosine=function(e,t){return new n.CypherFunction("cosine",[e,t],i)};let n=r(79201),i="vector.similarity"},87912:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.similarity=void 0,t.similarity=o(r(78951))},20238:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.PartialPattern=void 0;let i=r(62041),o=r(92415),a=r(66092),s=r(71105),l=r(42930),u=r(97632),c=r(87453),p=r(73131),d=class extends c.PatternElement{constructor(e,t,r){super(e??new s.RelationshipRef),this.withType=!0,this.withVariable=!0,e||(this.withVariable=!1),this.type=t.type,this.properties=t.properties,this.previous=r,this.direction=t.direction??"right",this.length=t.length}to(e,t){return e||(e=new a.NodeRef),new u.Pattern(e,t,this)}withoutType(){return this.withType=!1,this}withoutVariable(){return this.withVariable=!1,this}withDirection(e){return this.direction=e,this}withProperties(e){return this.properties=e,this}withLength(e){return this.length=e,this}getVariables(){let e=this.previous.getVariables();return e.push(this.element),e}getCypher(e){let t=this.previous.getCypher(e),r=this.getTypeStr(e),n=this.withVariable?`${this.element.getCypher(e)}`:"",i=this.properties?this.serializeParameters(this.properties,e):"",o=(0,l.compileCypherIfExists)(this.whereSubClause,e,{prefix:" "}),a=this.generateLengthStr(),s="left"===this.direction?"<-":"-",u="right"===this.direction?"->":"-";return`${t}${s}[${n}${r}${a}${o}${i}]${u}`}generateLengthStr(){return void 0===this.length?"":"number"==typeof this.length?`*${this.length}`:"*"===this.length?"*":`*${this.length.min??""}..${this.length.max??""}`}getTypeStr(e){return this.withType?this.type?(0,p.labelsToString)(this.type,e):this.element instanceof s.RelationshipRef?(0,p.labelsToString)(this.element.type??[],e):"":""}};t.PartialPattern=d,t.PartialPattern=n([(0,o.mixin)(i.WithWhere)],d)},97632:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Pattern=void 0;let i=r(62041),o=r(92415),a=r(66092),s=r(71105),l=r(66059),u=r(42930),c=r(20238),p=r(87453),d=r(73131),f=r(34636),h=class extends p.PatternElement{constructor(e,t={},r){let n=e instanceof l.Variable,i=n?e:void 0;i||(i=new a.NodeRef),super(i),this.withLabels=!0,this.withVariable=!0,!n&&e&&(this.withVariable=!1),this.previous=r,n||(t=e??{}),this.labels=t.labels,this.properties=t.properties}withoutLabels(){return this.withLabels=!1,this}withoutVariable(){return this.withVariable=!1,this}withProperties(e){return this.properties=e,this}related(e,t){if(e instanceof l.Variable)return new c.PartialPattern(e,t??{},this);{let r;return e||t||(r=new s.RelationshipRef),new c.PartialPattern(r,t??e??{},this)}}quantifier(e){return new f.QuantifiedPattern(this,e)}getVariables(){let e=this.previous?.getVariables()??[];return e.push(this.element),e}getCypher(e){let t=this.previous?.getCypher(e)??"",r=this.withVariable?`${this.element.getCypher(e)}`:"",n=this.properties?this.serializeParameters(this.properties,e):"",i=this.getLabelsStr(e),o=(0,u.compileCypherIfExists)(this.whereSubClause,e,{prefix:" "});return`${t}(${r}${i}${n}${o})`}getLabelsStr(e){return this.withLabels?this.labels?(0,d.labelsToString)(this.labels,e):this.element instanceof a.NodeRef?(0,d.labelsToString)(this.element.labels,e):"":""}};t.Pattern=h,t.Pattern=n([(0,o.mixin)(i.WithWhere)],h)},87453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PatternElement=void 0;let n=r(99800),i=r(31737),o=r(16725),a=r(87071),s=Symbol.for("nodejs.util.inspect.custom");class l{constructor(e){this.element=e}serializeParameters(e,t){if(0===Object.keys(e).length)return"";let r=Object.entries(e).reduce((e,[r,n])=>(e[r]=n.getCypher(t),e),{});return(0,o.padLeft)((0,a.stringifyObject)(r))}toString(){let e=(0,i.padBlock)(this.getCypher(new n.CypherEnvironment));return`<${this.constructor.name}> """
${e}
"""`}[s](){return this.toString()}}t.PatternElement=l},73131:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labelsToString=function(e,t){if(e instanceof n.LabelExpr)return e.getCypher(t)?(0,i.addLabelToken)(t.config.labelOperator,e.getCypher(t)):"";{let r=(0,o.asArray)(e).map(a.escapeLabel);return 0===r.length?"":(0,i.addLabelToken)(t.config.labelOperator,...r)}};let n=r(7150),i=r(29656),o=r(60970),a=r(53425)},84688:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuantifiedPath=void 0;let n=r(31737);class i{constructor(...e){this.patterns=[],this.patterns=e}getCypher(e){let t=this.patterns.map(t=>t.getCypher(e)),r=t.shift()??"";if(t.length>0){let e=this.getRemainingPatternsString(t);return`${r}
${e}`}return r}getRemainingPatternsString(e){let t=e.join("\n");return(0,n.padBlock)(t,6)}}t.QuantifiedPath=i},34636:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuantifiedPattern=void 0;class r{constructor(e,t){this.pattern=e,this.quantifier=t}getCypher(e){let t=this.pattern.getCypher(e),r=this.generateQuantifierStr();return`(${t})${r}`}generateQuantifierStr(){return"number"==typeof this.quantifier?`{${this.quantifier}}`:"string"==typeof this.quantifier?this.quantifier:`{${this.quantifier.min??""},${this.quantifier.max??""}}`}}t.QuantifiedPattern=r},38266:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CypherProcedure=t.VoidCypherProcedure=void 0;let n=r(13738),i=r(76767),o=r(42930),a=r(88244);class s extends n.Clause{constructor(e,t=[],r){for(let n of(super(),this.name=r?`${r}.${e}`:e,this.params=t,t))n instanceof i.CypherASTNode&&this.addChildren(n)}getCypher(e){let t=this.getProcedureCypher(e);return`CALL ${t}`}getProcedureCypher(e){let t=this.params.map(t=>t.getCypher(e)).join(", ");return`${this.name}(${t})`}}t.VoidCypherProcedure=s;class l extends s{yield(...e){if(0===e.length)throw Error("Empty projection in CALL ... YIELD");return this.yieldStatement=new a.Yield(e),this.addChildren(this.yieldStatement),this.yieldStatement}getCypher(e){let t=super.getCypher(e),r=(0,o.compileCypherIfExists)(this.yieldStatement,e,{prefix:" "});return`${t}${r}`}}t.CypherProcedure=l},88244:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.YieldProjection=t.Yield=void 0;let i=r(13738),o=r(96009),a=r(58207),s=r(26563),l=r(52628),u=r(76065),c=r(60254),p=r(49330),d=r(38322),f=r(45037),h=r(62041),y=r(36325),m=r(92415),v=r(66059),g=r(60970),b=r(42930),_=class extends i.Clause{constructor(e){super();let t=(0,g.asArray)(e);this.projection=new T(t)}yield(...e){return this.projection.addYieldColumns(e),this}getCypher(e){let t=this.projection.getCypher(e),r=(0,b.compileCypherIfExists)(this.deleteClause,e,{prefix:"\n"}),n=(0,b.compileCypherIfExists)(this.removeClause,e,{prefix:"\n"}),i=(0,b.compileCypherIfExists)(this.setSubClause,e,{prefix:"\n"}),o=(0,b.compileCypherIfExists)(this.whereSubClause,e,{prefix:"\n"}),a=this.compileNextClause(e);return`YIELD ${t}${o}${i}${n}${r}${a}`}};t.Yield=_,t.Yield=_=n([(0,m.mixin)(l.WithReturn,h.WithWhere,c.WithWith,a.WithMatch,u.WithUnwind,p.WithDelete,s.WithMerge,o.WithCreate,d.WithRemove,f.WithSet)],_);class T extends y.Projection{constructor(e){super([]),this.addYieldColumns(e)}addYieldColumns(e){let t=e.map(e=>this.parseYieldColumn(e));this.addColumns(t)}parseYieldColumn(e){return"*"===e?e:"string"==typeof e?this.createVariableForStrings(e):Array.isArray(e)?[this.createVariableForStrings(e[0]),e[1]]:e}createVariableForStrings(e){return"string"==typeof e?new v.NamedVariable(e):e}}t.YieldProjection=T},23881:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CypherFalse=t.CypherTrue=t.CypherNull=t.Literal=void 0;class r{constructor(e){this.value=e}getCypher(){return this.formatLiteralValue(this.value)}formatLiteralValue(e){if("string"==typeof e)return`"${e}"`;if(null===e)return"NULL";if(Array.isArray(e)){let t=e.map(e=>this.formatLiteralValue(e));return`[${t.join(", ")}]`}return`${e}`}}t.Literal=r,t.CypherNull=new r(null),t.CypherTrue=new r(!0),t.CypherFalse=new r(!1)},66092:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedNode=t.NodeRef=void 0;let n=r(7681),i=r(7150),o=r(66059);class a extends o.Variable{constructor(e={}){super(),this.prefix="this",this.labels=this.parseLabels(e.labels)}hasLabels(...e){return new n.HasLabel(this,e)}hasLabel(e){return"string"==typeof e?new n.HasLabel(this,[e]):new n.HasLabel(this,e)}parseLabels(e){return e instanceof i.LabelExpr?e:Array.from(e??[])}}t.NodeRef=a;class s extends a{constructor(e,t){super(t??{}),this.id=e}get name(){return this.id}}t.NamedNode=s},50901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedParam=t.Param=void 0;let n=r(66059);class i extends n.Variable{constructor(e){super(),this.prefix="param",this.value=e}get hasValue(){return void 0!==this.value}getCypher(e){return this.isNull?"NULL":`$${e.getReferenceId(this)}`}get isNull(){return null===this.value}}t.Param=i;class o extends i{constructor(e,t){super(t),this.id=e}getCypher(e){return e.addNamedParamReference(this.id,this),super.getCypher(e)}}t.NamedParam=o},53635:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedPath=t.Path=void 0;let n=r(66059);class i extends n.Variable{constructor(){super(),this.prefix="p"}}t.Path=i;class o extends i{constructor(e){super(),this.id=e,this.prefix=""}}t.NamedPath=o},52219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyRef=void 0;let n=r(85749),i=r(53425);class o{constructor(e,...t){this._variable=e,this.propertyPath=t}get variable(){return this._variable}property(e){return new o(this._variable,...this.propertyPath,e)}index(e){return new n.ListIndex(this,e)}getCypher(e){let t=this.variable.getCypher(e),r=this.propertyPath.map(t=>this.getPropertyCypher(t,e)).join("");return`${t}${r}`}getPropertyCypher(e,t){if("string"==typeof e)return`.${(0,i.escapeProperty)(e)}`;{let r=e.getCypher(t);return`[${r}]`}}}t.PropertyRef=o},71105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedRelationship=t.RelationshipRef=void 0;let n=r(7681),i=r(66059);class o extends i.Variable{constructor(e={}){super(),this.prefix="this",this._type=e.type??void 0}hasType(e){return"string"==typeof e?new n.HasLabel(this,[e]):new n.HasLabel(this,e)}get type(){return this._type}}t.RelationshipRef=o;class a extends o{constructor(e,t){super(t??{}),this.id=e}get name(){return this.id}}t.NamedRelationship=a},66059:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedVariable=t.Variable=void 0;let n=r(52219),i=r(85749),o=r(53425);class a{constructor(){this.prefix="var"}property(...e){return new n.PropertyRef(this,...e)}index(e){return new i.ListIndex(this,e)}getCypher(e){let t=e.getReferenceId(this);return(0,o.escapeVariable)(t)}}t.Variable=a;class s extends a{constructor(e){super(),this.id=e,this.prefix=""}}t.NamedVariable=s},29656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLabelToken=function(e,...t){let r=t.shift();if(!r)return"";let n=t.map(t=>`${e}${t}`).join("");return`:${r}${n}`}},60970:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asArray=function(e){return Array.isArray(e)?e:null==e?[]:[e]}},42930:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileCypherIfExists=function(e,t,{prefix:r="",suffix:n=""}={}){if(!e)return"";let i=e.getCypher(t);return i?`${r}${i}${n}`:""}},70849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileCypher=function(e,t,{prefix:r="",suffix:i=""}={}){if(!(0,n.isCypherCompilable)(e))throw Error("Invalid element, missing `getCypher` method");if(!t)throw Error("Missing env when compiling Cypher");let o=e.getCypher(t);return o?`${r}${o}${i}`:""};let n=r(23262)},53425:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeLabel=function(e){return n(e)},t.escapeType=function(e){return n(e)},t.escapeProperty=function(e){return n(e)},t.escapeVariable=function(e){return n(e)};let r=/`/g;function n(e){let t=e.replace(/\\u0060/g,"`");return t&&!/^[a-z_][0-9a-z_]*$/i.test(t)?function(e){let t=e.replace(r,"``");return`\`${t}\``}(t):t}},50429:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterTruthy=function(e){return e.filter(e=>!!e)}},23262:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCypherCompilable=function(e){return"function"==typeof e?.getCypher}},14149:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isString=function(e){return"string"==typeof e}},76852:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeVariable=s,t.normalizeExpr=l,t.normalizeMap=function(e){return Object.entries(e).reduce((e,[t,r])=>(e.set(t,s(r)),e),new i.MapExpr)},t.normalizeList=function(e){let t=e.map(e=>l(e));return new n.ListExpr(t)};let n=r(14101),i=r(37e3),o=r(23881),a=r(23262);function s(e){return(0,a.isCypherCompilable)(e)?e:new o.Literal(e)}function l(e){return(0,a.isCypherCompilable)(e)?e:new o.Literal(e)}},31737:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.padBlock=function(e,t=4){let r=" ".repeat(t),n=e.replace(/\n/g,`
${r}`);return`${r}${n}`}},16725:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.padLeft=function(e){return e?` ${e}`:""}},33743:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeMap=function(e,t,r=!1){let i=[];for(let[r,o]of t.entries())if(o){let t=`${(0,n.escapeProperty)(r)}: ${o.getCypher(e)}`;i.push(t)}let o=i.join(", ");return r?o:`{ ${o} }`};let n=r(53425)},87071:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyObject=function(e){return`{ ${Object.entries(e).filter(([,e])=>!!e).map(([e,t])=>`${(0,n.escapeProperty)(e)}: ${t}`).join(", ")} }`};let n=r(53425)},20089:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCypherParams=function(e){return Object.entries(e).reduce((e,[t,r])=>(e[t]=new n.Param(r),e),{})};let n=r(50901)},77784:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileCypher=t.toCypherParams=t.escapeVariable=t.escapeProperty=t.escapeType=t.escapeLabel=void 0;var n=r(53425);Object.defineProperty(t,"escapeLabel",{enumerable:!0,get:function(){return n.escapeLabel}}),Object.defineProperty(t,"escapeType",{enumerable:!0,get:function(){return n.escapeType}}),Object.defineProperty(t,"escapeProperty",{enumerable:!0,get:function(){return n.escapeProperty}}),Object.defineProperty(t,"escapeVariable",{enumerable:!0,get:function(){return n.escapeVariable}});var i=r(20089);Object.defineProperty(t,"toCypherParams",{enumerable:!0,get:function(){return i.toCypherParams}});var o=r(70849);Object.defineProperty(t,"compileCypher",{enumerable:!0,get:function(){return o.compileCypher}})},33602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallbackBucket=void 0;let n=r(57343),i=r(65639);class o{constructor(e){this.context=e,this.callbacks=[]}addCallback(e){this.callbacks.push(e)}async resolveCallbacksAndFilterCypher(e){let t={},r=e.cypher;return await Promise.all(this.callbacks.map(async e=>{let n=(this.context.features.populatedBy?.callbacks)[e.functionName],i=await n(e.parent,{},this.context);void 0===i?r=r.split("\n").filter(t=>!t.includes(`$resolvedCallbacks.${e.paramName}`)).join("\n"):null===i?t[e.paramName]=null:t[e.paramName]=this.parseCallbackResult(i,e.type)})),{cypher:r,params:t}}parseCallbackResult(e,t){if(t.array){if(!Array.isArray(e))throw new n.GraphQLError("Expected list as callback result but did not.");return e.map(e=>this.parseCallbackResult(e,{...t,array:!1}))}switch(t.name){case"Int":return n.GraphQLInt.parseValue(e);case"Float":return n.GraphQLFloat.parseValue(e);case"String":return n.GraphQLString.parseValue(e);case"Boolean":return n.GraphQLBoolean.parseValue(e);case"ID":return n.GraphQLID.parseValue(e);case"BigInt":return i.GraphQLBigInt.parseValue(e);case"DateTime":return i.GraphQLDateTime.parseValue(e);case"Date":return i.GraphQLDate.parseValue(e);case"Time":return i.GraphQLTime.parseValue(e);case"LocalDateTime":return i.GraphQLLocalDateTime.parseValue(e);case"LocalTime":return i.GraphQLLocalTime.parseValue(e);case"Duration":return i.GraphQLDuration.parseValue(e);default:throw new n.GraphQLError("Callback result received for field of unsupported type.")}}}t.CallbackBucket=o},28549:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Neo4jGraphQLSchemaValidationError=t.Neo4jGraphQLRelationshipValidationError=t.Neo4jGraphQLConstraintValidationError=t.Neo4jGraphQLAuthenticationError=t.Neo4jGraphQLForbiddenError=t.Neo4jGraphQLError=void 0;let n=r(57343);class i extends n.GraphQLError{constructor(e){super(e),this.name||Object.defineProperty(this,"name",{value:"Neo4jGraphQLError"})}}t.Neo4jGraphQLError=i;class o extends i{constructor(e){super(e),Object.defineProperty(this,"name",{value:"Neo4jGraphQLForbiddenError"})}}t.Neo4jGraphQLForbiddenError=o;class a extends i{constructor(e){super(e),Object.defineProperty(this,"name",{value:"Neo4jGraphQLAuthenticationError"})}}t.Neo4jGraphQLAuthenticationError=a;class s extends i{constructor(e){super(e),Object.defineProperty(this,"name",{value:"Neo4jGraphQLConstraintValidationError"})}}t.Neo4jGraphQLConstraintValidationError=s;class l extends i{constructor(e){super(e),Object.defineProperty(this,"name",{value:"Neo4jGraphQLRelationshipValidationError"})}}t.Neo4jGraphQLRelationshipValidationError=l;class u extends i{constructor(e){super(e),Object.defineProperty(this,"name",{value:"Neo4jGraphQLSchemaValidationError"})}}t.Neo4jGraphQLSchemaValidationError=u},12579:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Executor=void 0;let i=n(r(19092)),o=r(57343),a=r(66007),s=r(58388),l=r(30006),u=n(r(83268)),c=r(28549),p=(0,i.default)(s.DEBUG_EXECUTE);class d{constructor({executionContext:e,cypherQueryOptions:t,sessionConfig:r,cypherParams:n={},transactionMetadata:i={}}){this.executionContext=e,this.cypherQueryOptions=t,this.lastBookmark=null,this.cypherQueryOptions=t,this.sessionConfig=r,this.cypherParams=n,this.transactionMetadata=i}async execute(e,t,r,n){let i={...t,...this.cypherParams};try{var o,a;if(o=this.executionContext,"function"==typeof o.session)return await this.driverRun({query:e,parameters:i,driver:this.executionContext,sessionMode:r,info:n});if(a=this.executionContext,"function"==typeof a.beginTransaction)return await this.sessionRun({query:e,parameters:i,sessionMode:r,session:this.executionContext,info:n});return await this.transactionRun(e,i,this.executionContext)}catch(e){throw this.formatError(e)}}formatError(e){if(e instanceof a.Neo4jError){if(e.message.includes(`Caused by: java.lang.RuntimeException: ${s.AUTH_FORBIDDEN_ERROR}`))return new c.Neo4jGraphQLForbiddenError("Forbidden");if(e.message.includes(`Caused by: java.lang.RuntimeException: ${s.AUTH_UNAUTHENTICATED_ERROR}`))return new c.Neo4jGraphQLAuthenticationError("Unauthenticated");if(e.message.includes(`Caused by: java.lang.RuntimeException: ${s.RELATIONSHIP_REQUIREMENT_PREFIX}`)){let[,t]=e.message.split(s.RELATIONSHIP_REQUIREMENT_PREFIX);return new c.Neo4jGraphQLRelationshipValidationError(t||"")}if("Neo.ClientError.Schema.ConstraintValidationFailed"===e.code)return new c.Neo4jGraphQLConstraintValidationError("Constraint validation failed")}return p("%s",e),e}generateQuery(e){if(this.cypherQueryOptions&&Object.keys(this.cypherQueryOptions).length){let t=`CYPHER ${Object.entries(this.cypherQueryOptions).map(([e,t])=>`${e}=${t}`).join(" ")}`;return`${t}
${e}`}return e}getTransactionConfig(e){let t=`${u.default.NPM_PACKAGE_NAME}@${u.default.NPM_PACKAGE_VERSION}`,r={metadata:{...this.transactionMetadata,app:t,type:"user-transpiled"}};if(e){let t={query:e.operation.loc?.source.body||[Object.values(e.fragments).map(e=>(0,o.print)(e)),(0,o.print)(e.operation)].join("\n\n")};r.metadata.source=t}return r}async driverRun({query:e,parameters:t,driver:r,sessionMode:n,info:i}){let o=r.session({database:"neo4j",...this.sessionConfig,bookmarkManager:r.executeQueryBookmarkManager,defaultAccessMode:n});try{return await this.sessionRun({query:e,parameters:t,info:i,session:o,sessionMode:n})}finally{await o.close()}}async sessionRun({query:e,parameters:t,session:r,sessionMode:n,info:i}){let o;switch(n){case"READ":o=await r.executeRead(r=>this.transactionRun(e,t,r),this.getTransactionConfig(i));break;case"WRITE":o=await r.executeWrite(r=>this.transactionRun(e,t,r),this.getTransactionConfig(i))}let a=r.lastBookmarks();return a[0]&&(this.lastBookmark=a[0]),o}transactionRun(e,t,r){let n=this.generateQuery(e);return(0,l.debugCypherAndParams)(p,n,t),r.run(n,t)}}t.Executor=d},88154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphElement=void 0;class r{constructor(e){this.name=e.name,this.description=e.description,this.primitiveFields=e.primitiveFields,this.scalarFields=e.scalarFields,this.enumFields=e.enumFields,this.temporalFields=e.temporalFields,this.pointFields=e.pointFields,this.customResolverFields=e.customResolverFields}getField(e){for(let t of this.getAllFields()){let r=this.searchFieldInList(e,t);if(r)return r}}getAllFields(){return[this.primitiveFields,this.scalarFields,this.enumFields,this.temporalFields,this.pointFields,this.customResolverFields]}searchFieldInList(e,t){return t.find(t=>t.fieldName===e)}}t.GraphElement=r},19900:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LimitDirective=void 0;let a=o(r(66007));class s{constructor(e){this.default=e.default,this.max=e.max}getLimit(e){if(e){let t=a.int(e);return this.max&&t.greaterThan(this.max)?this.max:t}return this.default||this.max}}t.LimitDirective=s},17381:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getNeo4jDatabaseInfo=t.Neo4jDatabaseInfo=void 0;let a=o(r(90799)),s=r(58388);class l{constructor(e,t){this.version=this.toSemVer(e),this.rawVersion=e,this.edition=t}toSemVer(e){let t=a.coerce(e);if(!a.valid(t))throw Error(`Could not coerce provided version ${e}`);return t}toString(){return this.rawVersion}eq(e){return a.eq(this.version,this.toSemVer(e))}gt(e){return a.gt(this.version,this.toSemVer(e))}gte(e){return a.gte(this.version,this.toSemVer(e))}lt(e){return a.lt(this.version,this.toSemVer(e))}lte(e){return a.lt(this.version,this.toSemVer(e))}}async function u(e){let{records:t}=await e.execute(s.DBMS_COMPONENTS_QUERY,{},"READ"),[r,n]=t[0];return new l(r,n)}t.Neo4jDatabaseInfo=l,t.getNeo4jDatabaseInfo=u},94846:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let s=r(21602),l=r(48244),u=r(44487),c=r(14364),p=a(r(19092)),d=r(58388),f=r(56235),h=r(80757),y=r(59751),m=r(46181),v=r(69094),g=r(41961),b=r(58108),_=r(83914),T=r(51383),E=r(14178),O=r(12579),S=r(17381),w=r(64471),I=r(17217),N=r(66142),A=r(37350),C=a(r(16602));class P{constructor(e){let{driver:t,features:r,typeDefs:n,resolvers:i,debug:o,validate:a=!0}=e;if(this.driver=t,this.features=this.parseNeo4jFeatures(r),this.typeDefs=n,this.resolvers=i,this.debug=o,this.validate=a,this.checkEnableDebug(),this.features?.authorization){let e=this.features?.authorization;this.authorization=new w.Neo4jGraphQLAuthorization(e)}}async getSchema(){return this.getExecutableSchema()}async getExecutableSchema(){return this.executableSchema||(this.executableSchema=this.generateExecutableSchema(),await this.subscriptionMechanismSetup()),this.executableSchema}async getSubgraphSchema(){return this.subgraphSchema||(this.subgraphSchema=this.generateSubgraphSchema(),await this.subscriptionMechanismSetup()),this.subgraphSchema}async checkNeo4jCompat({driver:e,sessionConfig:t}={}){let r=e||this.driver;if(!r)throw Error("neo4j-driver Driver missing");return this.dbInfo||(this.dbInfo=await this.getNeo4jDatabaseInfo(r,t)),(0,C.default)({driver:r,sessionConfig:t,dbInfo:this.dbInfo})}async assertIndexesAndConstraints({driver:e,sessionConfig:t,options:r}={}){if(!(this.executableSchema||this.subgraphSchema))throw Error("You must await `.getSchema()` before `.assertIndexesAndConstraints()`");await (this.executableSchema||this.subgraphSchema);let n=e||this.driver;if(!n)throw Error("neo4j-driver Driver missing");if(this.dbInfo||(this.dbInfo=await this.getNeo4jDatabaseInfo(n,t)),!this.schemaModel)throw Error("Schema Model is not defined");await (0,N.assertIndexesAndConstraints)({driver:n,sessionConfig:t,schemaModel:this.schemaModel,options:r})}get nodes(){if(!this._nodes)throw Error("You must await `.getSchema()` before accessing `nodes`");return this._nodes}get relationships(){if(!this._relationships)throw Error("You must await `.getSchema()` before accessing `relationships`");return this._relationships}normalizeTypeDefinitions(e){return(0,s.mergeTypeDefs)(e)}addDefaultFieldResolvers(e){return(0,c.forEachField)(e,e=>{e.resolve||(e.resolve=b.defaultFieldResolver)}),e}checkEnableDebug(){(!0===this.debug||!1===this.debug)&&(this.debug?p.default.enable(d.DEBUG_ALL):p.default.disable())}async getNeo4jDatabaseInfo(e,t){return(0,S.getNeo4jDatabaseInfo)(new O.Executor({executionContext:e,sessionConfig:t}))}wrapResolvers(e){if(!this.schemaModel)throw Error("Schema Model is not defined");let t={driver:this.driver,nodes:this.nodes,relationships:this.relationships,schemaModel:this.schemaModel,features:this.features,authorization:this.authorization,jwtPayloadFieldsMap:this.jwtFieldsMap},r=[(0,v.wrapQueryAndMutation)(t)],n=!!this.features.subscriptions,i={subscriptionsEngine:this.features.subscriptions,schemaModel:this.schemaModel,authorization:this.authorization,jwtPayloadFieldsMap:this.jwtFieldsMap},o=n?[(0,g.wrapSubscription)(i)]:[],a=(0,A.generateResolverComposition)({schemaModel:this.schemaModel,isSubscriptionEnabled:n,queryAndMutationWrappers:r,subscriptionWrappers:o}),u=(0,s.mergeResolvers)([...(0,E.asArray)(e),...(0,E.asArray)(this.resolvers)]);return(0,l.composeResolvers)(u,a)}composeSchema(e){let t=(0,c.getResolversFromSchema)(e),r=this.wrapResolvers(t);return(0,u.addResolversToSchema)({schema:e,resolvers:r,updateResolversInPlace:!0}),this.addDefaultFieldResolvers(e)}parseNeo4jFeatures(e){let t;return t=e?.subscriptions===!0?new I.Neo4jGraphQLSubscriptionsDefaultEngine:e?.subscriptions||void 0,{...e,subscriptions:t}}generateSchemaModel(e){return this.schemaModel?this.schemaModel:(0,h.generateModel)(e)}generateExecutableSchema(){return new Promise(e=>{let t=this.normalizeTypeDefinitions(this.typeDefs);if(this.validate){let{enumTypes:e,interfaceTypes:r,unionTypes:n,objectTypes:i}=(0,y.getDefinitionNodes)(t);(0,_.validateDocument)({document:t,features:this.features,additionalDefinitions:{enums:e,interfaces:r,unions:n,objects:i},userCustomResolvers:this.resolvers})}let{document:r,typesExcludedFromGeneration:n}=(0,m.makeDocumentToAugment)(t),{jwt:i}=n;i&&(this.jwtFieldsMap=i.jwtFieldsMap),this.schemaModel=this.generateSchemaModel(r);let{nodes:o,relationships:a,typeDefs:s,resolvers:l}=(0,f.makeAugmentedSchema)({document:r,features:this.features,userCustomResolvers:this.resolvers,schemaModel:this.schemaModel});this.validate&&(0,T.validateUserDefinition)({userDocument:r,augmentedDocument:s,jwt:i?.type}),this._nodes=o,this._relationships=a;let c=(0,u.makeExecutableSchema)({typeDefs:s,resolvers:l});e(this.composeSchema(c))})}async generateSubgraphSchema(){let{Subgraph:e}=await Promise.resolve().then(()=>o(r(12697))),t=this.normalizeTypeDefinitions(this.typeDefs),n=new e(this.typeDefs),{directives:i,types:a}=n.getValidationDefinitions();if(this.validate){let{enumTypes:e,interfaceTypes:r,unionTypes:n,objectTypes:o}=(0,y.getDefinitionNodes)(t);(0,_.validateDocument)({document:t,features:this.features,additionalDefinitions:{additionalDirectives:i,additionalTypes:a,enums:e,interfaces:r,unions:n,objects:o},userCustomResolvers:this.resolvers})}let{document:l,typesExcludedFromGeneration:u}=(0,m.makeDocumentToAugment)(t),{jwt:c}=u;c&&(this.jwtFieldsMap=c.jwtFieldsMap),this.schemaModel=this.generateSchemaModel(l);let{nodes:p,relationships:d,typeDefs:h,resolvers:v}=(0,f.makeAugmentedSchema)({document:l,features:this.features,userCustomResolvers:this.resolvers,subgraph:n,schemaModel:this.schemaModel});this.validate&&(0,T.validateUserDefinition)({userDocument:l,augmentedDocument:h,additionalDirectives:i,additionalTypes:a,jwt:c?.type}),this._nodes=p,this._relationships=d;let g=n.getReferenceResolvers(this.schemaModel),b=n.buildSchema({typeDefs:h,resolvers:(0,s.mergeResolvers)([v,g])});return this.composeSchema(b)}subscriptionMechanismSetup(){if(this.subscriptionInit)return this.subscriptionInit;let e=async()=>{let e=this.features?.subscriptions;if(e&&(e.events.setMaxListeners(0),e.init)){if(!this.schemaModel)throw Error("SchemaModel not available on subscription mechanism");await e.init({schemaModel:this.schemaModel})}};return this.subscriptionInit=e(),this.subscriptionInit}}t.default=P},77448:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(73499)),o=n(r(87180)),a=r(97845),s=r(74849),l=r(32439),u=r(88154);class c extends u.GraphElement{constructor(e){super(e),this.relationFields=e.relationFields,this.connectionFields=e.connectionFields,this.cypherFields=e.cypherFields,this.otherDirectives=e.otherDirectives,this.propagatedDirectives=e.propagatedDirectives,this.unionFields=e.unionFields,this.interfaceFields=e.interfaceFields,this.interfaces=e.interfaces,this.objectFields=e.objectFields,this.nodeDirective=e.nodeDirective,this.fulltextDirective=e.fulltextDirective,this.limit=e.limitDirective,this.isGlobalNode=e.isGlobalNode,this._idField=e.globalIdField,this._idFieldIsInt=e.globalIdFieldIsInt,this.singular=this.generateSingular(),this.plural=this.generatePlural(e.plural)}get mutableFields(){return[...this.temporalFields,...this.enumFields,...this.objectFields,...this.scalarFields,...this.primitiveFields,...this.interfaceFields,...this.objectFields,...this.unionFields,...this.pointFields]}get authableFields(){return[...this.primitiveFields,...this.scalarFields,...this.enumFields,...this.unionFields,...this.objectFields,...this.temporalFields,...this.pointFields,...this.cypherFields]}get constrainableFields(){return[...this.primitiveFields,...this.scalarFields,...this.enumFields,...this.temporalFields,...this.pointFields]}get uniqueFields(){return this.constrainableFields.filter(e=>e.unique)}get pascalCaseSingular(){return(0,l.upperFirst)(this.singular)}get pascalCasePlural(){return(0,l.upperFirst)(this.plural)}get rootTypeFieldNames(){let e=this.pascalCasePlural;return{create:`create${e}`,read:this.plural,update:`update${e}`,delete:`delete${e}`,aggregate:`${this.plural}Aggregate`,subscribe:{created:`${this.singular}Created`,updated:`${this.singular}Updated`,deleted:`${this.singular}Deleted`,relationship_created:`${this.singular}RelationshipCreated`,relationship_deleted:`${this.singular}RelationshipDeleted`}}}get aggregateTypeNames(){return{selection:`${this.name}AggregateSelection`,input:`${this.name}AggregateSelectionInput`}}get mutationResponseTypeNames(){let e=this.pascalCasePlural;return{create:`Create${e}MutationResponse`,update:`Update${e}MutationResponse`}}get subscriptionEventTypeNames(){let e=this.pascalCaseSingular;return{create:`${e}CreatedEvent`,update:`${e}UpdatedEvent`,delete:`${e}DeletedEvent`,create_relationship:`${e}RelationshipCreatedEvent`,delete_relationship:`${e}RelationshipDeletedEvent`}}get subscriptionEventPayloadFieldNames(){let e=this.pascalCaseSingular;return{create:`created${e}`,update:`updated${e}`,delete:`deleted${e}`,create_relationship:`${this.singular}`,delete_relationship:`${this.singular}`}}getLabelString(e){return this.nodeDirective?.getLabelsString(this.name,e)||`:${this.name}`}getLabels(e){return this.nodeDirective?.getLabels(this.name,e)||[this.name]}getMainLabel(){return this.nodeDirective?.labels?.[0]||this.name}getAllLabels(){return this.nodeDirective?.labels||[this.name]}getGlobalIdField(){if(!this.isGlobalNode||!this._idField)throw Error("The 'global' property needs to be set to true on an @id directive before accessing the unique node id field");return this._idField}toGlobalId(e){let t=this.name,r=this.getGlobalIdField();return(0,a.toGlobalId)({typeName:t,field:r,id:e})}fromGlobalId(e){return(0,a.fromGlobalId)(e,this._idFieldIsInt)}generateSingular(){let e=(0,i.default)(this.name);return`${(0,s.leadingUnderscores)(this.name)}${e}`}generatePlural(e){let t=e||this.plural||this.name,r=e||this.plural?(0,i.default)(t):(0,o.default)((0,i.default)(t));return`${(0,s.leadingUnderscores)(t)}${r}`}}t.default=c},56693:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeDirective=void 0;let i=r(28549),o=n(r(52462)),a=r(55672);class s{constructor(e){this.labels=e.labels||[]}getLabelsString(e,t){if(!e)throw new i.Neo4jGraphQLError("Could not generate label string in @node directive due to empty typeName");let r=this.getLabels(e,t).map(e=>o.default.utils.escapeLabel(e));return`:${r.join(":")}`}getLabels(e,t){let r=this.labels.length?this.labels:[e];return(0,a.mapLabelsWithContext)(r,t)}}t.NodeDirective=s},28622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(88154);class i extends n.GraphElement{constructor(e){super({name:e.name,description:e.description,cypherFields:e.cypherFields||[],primitiveFields:e.primitiveFields||[],scalarFields:e.scalarFields||[],enumFields:e.enumFields||[],temporalFields:e.temporalFields||[],pointFields:e.pointFields||[],customResolverFields:e.customResolverFields||[]}),this.properties=e.properties,this.source=e.source,this.target=e.target}}t.default=i},12697:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Subgraph=void 0;let i=r(77748),o=r(21602),a=r(57343),s=r(30467),l=r(63706),u=n(r(46808)),c=r(14321),p=["key","extends","shareable","inaccessible","override","external","provides","requires","tag","composeDirective","interfaceObject"];class d{constructor(e){this.typeDefs=e,this.importArgument=new Map([["key","federation__key"],["extends","federation__extends"],["shareable","federation__shareable"],["inaccessible","federation__inaccessible"],["override","federation__override"],["external","federation__external"],["provides","federation__provides"],["requires","federation__requires"],["tag","federation__tag"],["composeDirective","federation__composeDirective"],["interfaceObject","federation__interfaceObject"]]);let t=this.findFederationLinkMeta(e);if(!t)throw Error("typeDefs must contain `@link` schema extension to be used with Apollo Federation");let{extension:r,directive:n}=t;this.linkExtension=r,this.parseLinkImportArgument(n)}getFullyQualifiedDirectiveName(e){return this.importArgument.get(e)}buildSchema({typeDefs:e,resolvers:t}){return(0,i.buildSubgraphSchema)({typeDefs:e,resolvers:t})}getReferenceResolvers(e){let t={};return(0,o.mergeTypeDefs)(this.typeDefs).definitions.forEach(r=>{if(r.kind===a.Kind.OBJECT_TYPE_DEFINITION){let n=e.getEntity(r.name.value);if(n?.isConcreteEntity()){let e=n.annotations.key;if(e&&!1===e.resolvable)return}t[r.name.value]={__resolveReference:this.getReferenceResolver(e)}}}),t}getReferenceResolver(e){return async(t,r,n)=>{let{__typename:i}=t,o=e.getConcreteEntityAdapter(i);if(!o)throw Error(`Unable to find matching entity with name ${i}`);r.resolveTree=(0,u.default)(n);let{cypher:a,params:c}=(0,s.translateResolveReference)({context:r,entityAdapter:o,reference:t}),p=await (0,l.execute)({cypher:a,params:c,defaultAccessMode:"READ",context:r,info:n});return p.records[0]?.this}}getValidationDefinitions(){let e=(0,a.parse)((0,a.print)(this.linkExtension)),t=(0,i.buildSubgraphSchema)({typeDefs:e}).toConfig(),r=t.directives,n=t.types;return{directives:[...r],types:[...n.filter(e=>e.astNode?.kind===a.Kind.ENUM_TYPE_DEFINITION),...n.filter(e=>e.astNode?.kind===a.Kind.SCALAR_TYPE_DEFINITION)]}}findFederationLinkMeta(e){for(let t of(0,o.mergeTypeDefs)(e).definitions)if(t.kind===a.Kind.SCHEMA_EXTENSION&&t.directives){for(let e of t.directives)if("link"===e.name.value&&e.arguments){for(let r of e.arguments)if("url"===r.name.value&&r.value.kind===a.Kind.STRING&&r.value.value.startsWith("https://specs.apollo.dev/federation/v2"))return{extension:{...t,directives:t.directives.filter(e=>"link"===e.name.value),operationTypes:[]},directive:e}}}}trimDirectiveName(e){return e.replace("@","")}parseLinkImportArgument(e){let t=e.arguments?.find(e=>"import"===e.name.value);if(t&&t.value.kind===a.Kind.LIST)for(let e of t.value.values){if(e.kind===a.Kind.STRING){let t=this.trimDirectiveName(e.value);if(!(0,c.isInArray)(p,t))throw Error(`Encountered unknown Apollo Federation directive ${e.value}`);this.importArgument.set(t,t)}if(e.kind===a.Kind.OBJECT){let t=e.fields.find(e=>"name"===e.name.value),r=e.fields.find(e=>"as"===e.name.value);if(t?.value.kind===a.Kind.STRING){let e=this.trimDirectiveName(t.value.value);if(!(0,c.isInArray)(p,e))throw Error(`Encountered unknown Apollo Federation directive ${t.value.value}`);if(r?.value.kind!==a.Kind.STRING)throw Error(`Alias for directive ${t.value.value} is not of type string`);this.importArgument.set(e,this.trimDirectiveName(r.value.value))}}}}}t.Subgraph=d},64471:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Neo4jGraphQLAuthorization=void 0;let i=n(r(19092)),o=r(58388),a=r(39797),s=r(26402),l=(0,i.default)(o.DEBUG_AUTH);class u{constructor(e){"function"==typeof e.key?this.unresolvedKey=e.key:this.resolvedKey=this.serializeKey(e.key),this.authorization=e}async decode(e){let t=e.token;if(!t)return;let r=(0,s.parseBearerToken)(t);if(r)try{if(!1===this.authorization.verify)return l("Skipping verifying JWT as verify is set to false"),(0,a.decodeJwt)(r);let t=this.resolveKey(e);return await this.verify(r,t)}catch(e){l("%s",e);return}}serializeKey(e){return"string"==typeof e?Buffer.from(e):(0,a.createRemoteJWKSet)(new URL(e.url),e.options)}resolveKey(e){if(this.resolvedKey)return this.resolvedKey;{let t=this.unresolvedKey(e);return this.serializeKey(t)}}async verify(e,t){if(t instanceof Uint8Array){l("Verifying JWT using secret");let{payload:r}=await (0,a.jwtVerify)(e,t,this.authorization.verifyOptions);return r}l("Verifying JWKS using url");let{payload:r}=await (0,a.jwtVerify)(e,t,this.authorization.verifyOptions);return r}}t.Neo4jGraphQLAuthorization=u},26402:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseBearerToken=void 0;let i=r(58388),o=(0,n(r(19092)).default)(i.DEBUG_AUTH);t.parseBearerToken=function(e){if(!e.startsWith("Bearer "))return o("Authorization header with authentication scheme 'Bearer <token>'"),e;let t=e.split("Bearer ")[1];return t||o("Authorization header was not in expected format 'Bearer <token>'"),t}},44706:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Relationship=t.Node=t.Neo4jGraphQL=t.Neo4jDatabaseInfo=t.GraphElement=void 0,i(r(28549),t);var a=r(88154);Object.defineProperty(t,"GraphElement",{enumerable:!0,get:function(){return a.GraphElement}});var s=r(17381);Object.defineProperty(t,"Neo4jDatabaseInfo",{enumerable:!0,get:function(){return s.Neo4jDatabaseInfo}});var l=r(94846);Object.defineProperty(t,"Neo4jGraphQL",{enumerable:!0,get:function(){return o(l).default}});var u=r(77448);Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return o(u).default}});var c=r(28622);Object.defineProperty(t,"Relationship",{enumerable:!0,get:function(){return o(c).default}})},69981:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Neo4jGraphQLSubscriptionsCDCEngine=void 0;let i=r(82361),o=r(65106),a=r(82809),s=r(79571);class l{constructor({driver:e,pollTime:t=1e3,queryConfig:r}){this.events=new i.EventEmitter,this.closed=!1,this.cdcApi=new a.CDCApi(e,r),this.pollTime=t}get parser(){if(!this._parser)throw Error("CDC Event parser not available on SubscriptionEngine. Forgot to call .init on SubscriptionEngine?");return this._parser}publish(e){}async init({schemaModel:e}){await this.cdcApi.updateCursor(),this._parser=new s.CDCEventParser(e),this.triggerPoll()}close(){this.closed=!0,this.timer&&(clearTimeout(this.timer),this.timer=void 0)}triggerPoll(){this.timer=setTimeout(()=>{this.closed||this.pollEvents().catch(e=>{console.error(e)}).finally(()=>{this.triggerPoll()})},this.pollTime)}async pollEvents(){for(let e of(await this.cdcApi.queryEvents())){let t=this.parser.parseCDCEvent(e);t&&this.events.emit(t.event,t)}}}t.Neo4jGraphQLSubscriptionsCDCEngine=l,n([(0,o.Memoize)()],l.prototype,"parser",null)},17217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Neo4jGraphQLSubscriptionsDefaultEngine=void 0;let n=r(82361);class i{constructor(){this.events=new n.EventEmitter,this.closed=!1}publish(e){this.closed||this.events.emit(e.event,e)}close(){this.closed=!0}}t.Neo4jGraphQLSubscriptionsDefaultEngine=i},82809:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CDCApi=void 0;let i=n(r(52462)),o=r(14178);class a{constructor(e,t){this.cursor="",this.driver=e,this.queryConfig=t}async queryEvents(){this.cursor||(this.cursor=await this.fetchCurrentChangeId());let e=new i.default.Literal(this.cursor),t=s.query(e),r=await this.runProcedure(t);return this.updateChangeIdWithLastEvent(r),r}async updateCursor(){this.cursor=await this.fetchCurrentChangeId()}async fetchCurrentChangeId(){let e=s.current(),t=await this.runProcedure(e);if(t[0]&&t[0].id)return t[0].id;throw Error("id not available on cdc.current")}updateChangeIdWithLastEvent(e){let t=e[e.length-1];t&&(this.cursor=t.id)}async runProcedure(e){let{cypher:t,params:r}=e.build();return(await this.driver.executeQuery(t,r,this.queryConfig)).records.map(e=>e.toObject())}}t.CDCApi=a;class s{static current(){return new i.default.Procedure("cdc.current")}static query(e,t){let r=(0,o.filterTruthy)([e,t]);return new i.default.Procedure("cdc.query",r)}}},79571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDCEventParser=void 0;let n=r(21676);class i{constructor(e){this.schemaModel=e}parseCDCEvent({event:e,metadata:t}){let r=t.txStartTime.toStandardDate().getTime();return"n"===e.eventType?this.parseNodeEvent(e,r):void 0}parseNodeEvent(e,t){let r=this.getTypenamesFromLabels({labels:e.labels,schemaModel:this.schemaModel});if(!r||!r[0])return;let i=r[0];switch(e.operation){case"c":return{event:"create",typename:i,properties:{old:void 0,new:(0,n.serializeProperties)(e.state.after?.properties)||{}},id:e.elementId,timestamp:t};case"d":return{event:"delete",typename:i,properties:{old:(0,n.serializeProperties)(e.state.before?.properties)||{},new:void 0},id:e.elementId,timestamp:t};case"u":return{event:"update",typename:i,properties:{old:(0,n.serializeProperties)(e.state.before?.properties)||{},new:(0,n.serializeProperties)(e.state.after?.properties)||{}},id:e.elementId,timestamp:t}}}parseRelationshipEvent(e,t){}getTypenamesFromLabels({labels:e,schemaModel:t}){if(e&&e.length)return t.getEntitiesByLabels(e).map(e=>e.name)}}t.CDCEventParser=i},66142:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.assertIndexesAndConstraints=void 0;let i=n(r(19092)),o=r(58388),a=r(64494),s=(0,i.default)(o.DEBUG_EXECUTE);async function l({driver:e,sessionConfig:t,schemaModel:r,options:n}){await e.verifyConnectivity();let i=e.session(t);try{n?.create?await p({schemaModel:r,session:i}):await d({schemaModel:r,session:i})}finally{await i.close()}}async function u({session:e}){let t={},r=`
        SHOW INDEXES YIELD
        name AS name,
        type AS type,
        entityType AS entityType,
        labelsOrTypes AS labelsOrTypes,
        properties AS properties,
        options AS options
    `;return s(`About to execute Cypher: ${r}`),(await e.run(r)).records.forEach(e=>{let r=e.toObject();"FULLTEXT"!==r.type&&"VECTOR"!==r.type||"NODE"!==r.entityType||t[r.name]||(t[r.name]={labelsOrTypes:r.labelsOrTypes,properties:r.properties,options:r.options})}),t}function c(e,t,r){e.annotations.vector&&e.annotations.vector.indexes.forEach(n=>{let i=t[n.indexName];if(!i){r.push(`Missing @vector index '${n.indexName}' on Node '${e.name}'`);return}if(i.properties.some(e=>e===n.embeddingProperty)||r.push(`@vector index '${n.indexName}' on Node '${e.name}' is missing embedding property '${n.embeddingProperty}'`),!i.options){r.push(`@vector index '${n.indexName}' on Node '${e.name}' is missing options`);return}if(!i.options.indexConfig){r.push(`@vector index '${n.indexName}' on Node '${e.name}' is missing indexConfig`);return}})}async function p({schemaModel:e,session:t}){let r=await f({schemaModel:e,session:t}),n=[],i=await u({session:t}),o=[];for(let t of e.concreteEntities)t.annotations.fulltext&&t.annotations.fulltext.indexes.forEach(e=>{let r=e.indexName||e.name;if(void 0===r)throw Error("The name of the fulltext index should be defined using the indexName argument.");let s=i[r];if(s)e.fields.forEach(e=>{let n=t.findAttribute(e);if(!n)throw Error(`Attribute '${e}' not found in entity '${t.name}'`);if(!s.properties.some(e=>e===n.databaseName)){let i=n.databaseName!==n.name?` aliased to field '${n.databaseName}'`:"";o.push(`@fulltext index '${r}' on Node '${t.name}' already exists, but is missing field '${e}'${i}`)}});else{let i=e.fields.map(e=>{let r=t.findAttribute(e);if(!r)throw Error(`Attribute '${e}' not found in entity '${t.name}'`);return r.databaseName}),o=new a.ConcreteEntityAdapter(t);n.push({indexName:r,label:o.getMainLabel(),properties:i})}}),c(t,i,o);if(o.length)throw Error(o.join("\n"));for(let e of r){let r=`CREATE CONSTRAINT ${e.constraintName} IF NOT EXISTS FOR (n:${e.label}) REQUIRE n.${e.property} IS UNIQUE`;s(`About to execute Cypher: ${r}`);let{constraintsAdded:n}=(await t.run(r)).summary.counters.updates();s(`Created ${n} new constraint${n?"":"s"}`)}for(let e of n){let r=`CREATE FULLTEXT INDEX ${e.indexName} IF NOT EXISTS FOR (n:${e.label}) ON EACH [${e.properties.map(e=>`n.${e}`).join(", ")}]`;s(`About to execute Cypher: ${r}`),await t.run(r),s(`Created @fulltext index ${e.indexName}`)}}async function d({schemaModel:e,session:t}){let r=await f({schemaModel:e,session:t});if(r.length)throw Error(r.map(e=>`Missing constraint for ${e.label}.${e.property}`).join("\n"));s("Successfully checked for the existence of all necessary constraints");let n=await u({session:t}),i=[];for(let t of e.concreteEntities)t.annotations.fulltext&&t.annotations.fulltext.indexes.forEach(e=>{let r=e.indexName||e.name;if(void 0===r)throw Error("The name of the fulltext index should be defined using the indexName argument.");let o=n[r];if(!o){i.push(`Missing @fulltext index '${r}' on Node '${t.name}'`);return}e.fields.forEach(e=>{let n=t.findAttribute(e);if(!n)throw Error(`Attribute '${e}' not found in entity '${t.name}'`);if(!o.properties.some(e=>e===n.databaseName)){let o=n.databaseName!==n.name?` aliased to field '${n.databaseName}'`:"";i.push(`@fulltext index '${r}' on Node '${t.name}' is missing field '${e}'${o}`)}})}),c(t,n,i);if(i.length)throw Error(i.join("\n"));s("Successfully checked for the existence of all necessary indexes")}async function f({schemaModel:e,session:t}){let r={},n="SHOW UNIQUE CONSTRAINTS";s(`About to execute Cypher: ${n}`),(await t.run(n)).records.map(e=>e.toObject()).forEach(e=>{let t=e.labelsOrTypes[0],n=e.properties[0],i=r[t];i?i.push(n):r[t]=[n]});let i=[];for(let t of e.concreteEntities){let e=new a.ConcreteEntityAdapter(t);for(let n of e.uniqueFields){if(!n.annotations.unique)continue;let o=!1;for(let e of t.labels)if(r[e]?.includes(n.databaseName)){o=!0;break}if(!1===o){let r=n.annotations.unique.constraintName||`${t.name}_${n.databaseName}`;i.push({constraintName:r,label:e.getMainLabel(),property:n.databaseName})}}}return i}t.assertIndexesAndConstraints=l},37350:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateResolverComposition=void 0;let n=r(87935);function i(e,t){let r=t.operations[e];if(!r)return{userCustomResolverPattern:"*",generatedResolverPattern:"*"};let n=Array.from(r.userResolvedAttributes.keys());if(!n.length)return{userCustomResolverPattern:"*",generatedResolverPattern:"*"};let i=`{${n.join(", ")}}`;return{userCustomResolverPattern:i,generatedResolverPattern:`!${i}`}}t.generateResolverComposition=function({schemaModel:e,isSubscriptionEnabled:t,queryAndMutationWrappers:r,subscriptionWrappers:o}){let a={},{userCustomResolverPattern:s,generatedResolverPattern:l}=i("Query",e);a[`Query.${s}`]=[...r,(0,n.isAuthenticated)(["READ"],e.operations.Query)],a[`Query.${l}`]=r;let{userCustomResolverPattern:u,generatedResolverPattern:c}=i("Mutation",e);return a[`Mutation.${u}`]=[...r,(0,n.isAuthenticated)(["CREATE","UPDATE","DELETE"],e.operations.Mutation)],a[`Mutation.${c}`]=r,t&&(a["Subscription.*"]=o),a}},16602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(76206),i=r(24896);async function o({driver:e,sessionConfig:t,dbInfo:r}){await e.verifyConnectivity();let o=[];try{(0,i.verifyVersion)(r)}catch(e){o.push(e.message)}try{await (0,n.verifyFunctions)(()=>e.session(t))}catch(e){o.push(e.message)}if(o.length)throw Error(`Encountered the following DBMS compatiblility issues:
${o.join("\n")}`)}t.default=o},76206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyFunctions=void 0;let n=r(58388);async function i(e){let t=e(),r=`
        SHOW FUNCTIONS
        YIELD name
        WHERE name IN ["${n.REQUIRED_APOC_FUNCTIONS.join('", "')}"]
        RETURN collect(name) as functions
    `;try{let e=await t.run(r),i=e.records[0]?.toObject();if(!i)throw Error("verifyFunctions failed to get functions");let o=n.REQUIRED_APOC_FUNCTIONS.filter(e=>!i.functions.includes(e));if(o.length)throw Error(`Missing APOC functions: [ ${o.join(", ")} ]`)}finally{await t.close()}}t.verifyFunctions=i},24896:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyVersion=void 0;let n=r(58388);t.verifyVersion=function(e){if(!e.toString().includes("aura")&&e.lt(n.MIN_NEO4J_VERSION))throw Error(`Expected minimum Neo4j version: '${n.MIN_NEO4J_VERSION}', received: '${e.toString()}'`)}},58388:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.SCORE_FIELD=t.PROPAGATED_DIRECTIVES=t.SHAREABLE=t.DEPRECATED=t.DBMS_COMPONENTS_QUERY=t.META_OLD_PROPS_CYPHER_VARIABLE=t.META_CYPHER_VARIABLE=t.RelationshipNestedOperationsOption=t.RelationshipQueryDirectionOption=t.AGGREGATION_COMPARISON_OPERATORS=t.LOGICAL_OPERATORS=t.isSpatial=t.isTemporal=t.SPATIAL_TYPES=t.SCALAR_TYPES=t.TEMPORAL_SCALAR_TYPES=t.GRAPHQL_BUILTIN_SCALAR_TYPES=t.RESERVED_INTERFACE_FIELDS=t.RESERVED_TYPE_NAMES=t.RELATIONSHIP_REQUIREMENT_PREFIX=t.DEBUG_TRANSLATE=t.DEBUG_GRAPHQL=t.DEBUG_GENERATE=t.DEBUG_EXECUTE=t.DEBUG_AUTH=t.DEBUG_ALL=t.AUTHORIZATION_UNAUTHENTICATED=t.REQUIRED_APOC_FUNCTIONS=t.MIN_NEO4J_VERSION=t.AUTH_UNAUTHENTICATED_ERROR=t.AUTH_FORBIDDEN_ERROR=void 0;let i="@neo4j/graphql";t.AUTH_FORBIDDEN_ERROR="@neo4j/graphql/FORBIDDEN",t.AUTH_UNAUTHENTICATED_ERROR="@neo4j/graphql/UNAUTHENTICATED",t.MIN_NEO4J_VERSION="4.4",t.REQUIRED_APOC_FUNCTIONS=["apoc.util.validatePredicate","apoc.date.convertFormat"],t.AUTHORIZATION_UNAUTHENTICATED="Unauthenticated",t.DEBUG_ALL=`${i}:*`,t.DEBUG_AUTH=`${i}:auth`,t.DEBUG_EXECUTE=`${i}:execution`,t.DEBUG_GENERATE=`${i}:generate`,t.DEBUG_GRAPHQL=`${i}:graphql`,t.DEBUG_TRANSLATE=`${i}:translate`,t.RELATIONSHIP_REQUIREMENT_PREFIX="@neo4j/graphql/RELATIONSHIP-REQUIRED",t.RESERVED_TYPE_NAMES=[{regex:/^PageInfo$/,error:"Type or Interface with name `PageInfo` reserved to support the pagination model of connections. See https://relay.dev/graphql/connections.htm#sec-Reserved-Types for more information."},{regex:/^.+Connection$/,error:'Type or Interface with name ending "Connection" are reserved to support the pagination model of connections. See https://relay.dev/graphql/connections.htm#sec-Reserved-Types for more information.'},{regex:/^Node$/,error:"Type or Interface with name `Node` reserved to support Relay. See https://relay.dev/graphql/ for more information."}],t.RESERVED_INTERFACE_FIELDS=[["node","Interface field name 'node' reserved to support relay See https://relay.dev/graphql/"],["cursor","Interface field name 'cursor' reserved to support relay See https://relay.dev/graphql/"]],t.GRAPHQL_BUILTIN_SCALAR_TYPES=["Boolean","ID","String","Int","Float"],t.TEMPORAL_SCALAR_TYPES=["DateTime","LocalDateTime","Time","LocalTime","Date"],t.SCALAR_TYPES=[...t.GRAPHQL_BUILTIN_SCALAR_TYPES,...t.TEMPORAL_SCALAR_TYPES,"BigInt","Duration"],t.SPATIAL_TYPES=["Point","CartesianPoint"],t.isTemporal=function(e){return t.TEMPORAL_SCALAR_TYPES.includes(e)},t.isSpatial=function(e){return t.SPATIAL_TYPES.includes(e)},t.LOGICAL_OPERATORS=["AND","OR","NOT"],t.AGGREGATION_COMPARISON_OPERATORS=["EQUAL","GT","GTE","LT","LTE"],function(e){e.DEFAULT_DIRECTED="DEFAULT_DIRECTED",e.DEFAULT_UNDIRECTED="DEFAULT_UNDIRECTED",e.DIRECTED_ONLY="DIRECTED_ONLY",e.UNDIRECTED_ONLY="UNDIRECTED_ONLY"}(r||(t.RelationshipQueryDirectionOption=r={})),function(e){e.CREATE="CREATE",e.UPDATE="UPDATE",e.DELETE="DELETE",e.CONNECT="CONNECT",e.DISCONNECT="DISCONNECT",e.CONNECT_OR_CREATE="CONNECT_OR_CREATE"}(n||(t.RelationshipNestedOperationsOption=n={})),t.META_CYPHER_VARIABLE="meta",t.META_OLD_PROPS_CYPHER_VARIABLE="oldProps",t.DBMS_COMPONENTS_QUERY="CALL dbms.components() YIELD versions, edition UNWIND versions AS version RETURN version, edition",t.DEPRECATED="deprecated",t.SHAREABLE="shareable",t.PROPAGATED_DIRECTIVES=[t.SHAREABLE,t.DEPRECATED],t.SCORE_FIELD="score"},30006:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugCypherAndParams=void 0,t.debugCypherAndParams=function(e,t,r){e("executing cypher"),e(t),e("cypher params: %O",r)}},4171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugGraphQLResolveInfo=void 0;let n=r(57343);t.debugGraphQLResolveInfo=function(e,t){if(e.enabled){let r=(0,n.print)(t.operation);e("received graphql query"),e(r),e("variable values: %O","variable values:",t.variableValues)}}},11179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugObject=void 0,t.debugObject=function(e,t,r){e("%s: %O",t,r)}},83268:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let a=o(r(20206)),s={NPM_PACKAGE_VERSION:a.version,NPM_PACKAGE_NAME:a.name};t.default=s},56208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aliasDirective=void 0;let n=r(57343);t.aliasDirective=new n.GraphQLDirective({name:"alias",description:"Instructs @neo4j/graphql to map a GraphQL field to a Neo4j node or relationship property.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{property:{description:"The name of the Neo4j property",type:new n.GraphQLNonNull(n.GraphQLString)}}})},51984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopulatedByOperationEnum=void 0;let n=r(57343);t.PopulatedByOperationEnum=new n.GraphQLEnumType({name:"PopulatedByOperation",description:"*For use in the @populatedBy directive only*",values:{CREATE:{value:"CREATE"},UPDATE:{value:"UPDATE"}}})},93616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipDirectionEnum=void 0;let n=r(57343);t.RelationshipDirectionEnum=new n.GraphQLEnumType({name:"RelationshipDirection",description:"*For use in the @relationship directive only",values:{IN:{},OUT:{}}})},73973:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipNestedOperationsEnum=void 0;let n=r(57343),i=r(58388);t.RelationshipNestedOperationsEnum=new n.GraphQLEnumType({name:"RelationshipNestedOperations",description:"*For use in the @relationship directive only",values:{[i.RelationshipNestedOperationsOption.CREATE]:{},[i.RelationshipNestedOperationsOption.UPDATE]:{},[i.RelationshipNestedOperationsOption.DELETE]:{},[i.RelationshipNestedOperationsOption.CONNECT]:{},[i.RelationshipNestedOperationsOption.DISCONNECT]:{},[i.RelationshipNestedOperationsOption.CONNECT_OR_CREATE]:{}}})},15324:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipQueryDirectionEnum=void 0;let n=r(57343),i=r(58388);t.RelationshipQueryDirectionEnum=new n.GraphQLEnumType({name:"RelationshipQueryDirection",values:{[i.RelationshipQueryDirectionOption.DEFAULT_DIRECTED]:{},[i.RelationshipQueryDirectionOption.DEFAULT_UNDIRECTED]:{},[i.RelationshipQueryDirectionOption.DIRECTED_ONLY]:{},[i.RelationshipQueryDirectionOption.UNDIRECTED_ONLY]:{}}})},91207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimestampOperationEnum=void 0;let n=r(57343);t.TimestampOperationEnum=new n.GraphQLEnumType({name:"TimestampOperation",description:"*For use in the @timestamp directive only*",values:{CREATE:{},UPDATE:{}}})},82187:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScalarOrEnumType=void 0;let n=r(57343);t.ScalarOrEnumType=new n.GraphQLScalarType({name:"ScalarOrEnum",description:"Int | Float | String | Boolean | ID | DateTime | Date | Enum",serialize(e){if(!["string","number","boolean"].includes(typeof e))throw Error("Value must be one of types: Int | Float | String | Boolean | ID | DateTime | Date | Enum");return e},parseValue(e){if(!["string","number","boolean"].includes(typeof e))throw Error("Value must be one of types: Int | Float | String | Boolean | ID | DateTime | Date | Enum");return e},parseLiteral(e){switch(e.kind){case n.Kind.INT:return parseInt(e.value,10);case n.Kind.FLOAT:return parseFloat(e.value);case n.Kind.STRING:case n.Kind.BOOLEAN:case n.Kind.ENUM:return e.value;default:throw Error("Value must be one of types: Int | Float | String | Boolean | ID | DateTime | Date | Enum")}}})},66089:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coalesceDirective=void 0;let n=r(57343),i=r(82187);t.coalesceDirective=new n.GraphQLDirective({name:"coalesce",description:"Instructs @neo4j/graphql to wrap the property in a coalesce() function during queries, using the single value specified.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{value:{description:"The value to use in the coalesce() function. Must be a scalar type and must match the type of the field with which this directive decorates.",type:new n.GraphQLNonNull(i.ScalarOrEnumType)}}})},94767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customResolverDirective=void 0;let n=r(57343),i=r(26025);t.customResolverDirective=new n.GraphQLDirective({name:"customResolver",description:"Informs @neo4j/graphql that a field will be resolved by a custom resolver, and allows specification of any field dependencies.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{requires:{description:"Selection set of the fields that the custom resolver will depend on. These fields are passed as an object to the first argument of the custom resolver.",type:i.GraphQLSelectionSet}}})},18502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cypherDirective=void 0;let n=r(57343);t.cypherDirective=new n.GraphQLDirective({name:"cypher",description:"Instructs @neo4j/graphql to run the specified Cypher statement in order to resolve the value of the field to which the directive is applied.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{statement:{description:"The Cypher statement to run which returns a value of the same type composition as the field definition on which the directive is applied.",type:new n.GraphQLNonNull(n.GraphQLString)},columnName:{description:"Name of the returned variable from the Cypher statement.",type:new n.GraphQLNonNull(n.GraphQLString)}}})},22933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.declareRelationshipDirective=t.defaultNestedOperations=void 0;let n=r(57343),i=r(58388),o=r(73973);t.defaultNestedOperations=[i.RelationshipNestedOperationsOption.CREATE,i.RelationshipNestedOperationsOption.UPDATE,i.RelationshipNestedOperationsOption.DELETE,i.RelationshipNestedOperationsOption.CONNECT,i.RelationshipNestedOperationsOption.DISCONNECT,i.RelationshipNestedOperationsOption.CONNECT_OR_CREATE],t.declareRelationshipDirective=new n.GraphQLDirective({name:"declareRelationship",description:"Instructs @neo4j/graphql that any type that implements this interface must annotate this field with the `@relationship` directive. Allows for nested reading operations in the Interface top level query and opens up the ability to create and connect on this field.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{nestedOperations:{type:new n.GraphQLNonNull(new n.GraphQLList(new n.GraphQLNonNull(o.RelationshipNestedOperationsEnum))),defaultValue:t.defaultNestedOperations,description:"Prevent all but these operations from being generated for this relationship"},aggregate:{type:n.GraphQLBoolean,defaultValue:!0,description:"Prevent aggregation for this relationship"}}})},13950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultDirective=void 0;let n=r(57343),i=r(82187);t.defaultDirective=new n.GraphQLDirective({name:"default",description:"Instructs @neo4j/graphql to set the specified value as the default value in the CreateInput type for the object type in which this directive is used.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{value:{description:"The default value to use. Must be a scalar type and must match the type of the field with which this directive decorates.",type:new n.GraphQLNonNull(i.ScalarOrEnumType)}}})},18787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterableDirective=void 0;let n=r(57343);t.filterableDirective=new n.GraphQLDirective({name:"filterable",description:"Instructs @neo4j/graphql to generate filters for this field.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{byValue:{description:"Generates filters for this field",type:new n.GraphQLNonNull(n.GraphQLBoolean),defaultValue:!0},byAggregate:{description:"Generates filters for aggregate value based on this field",type:new n.GraphQLNonNull(n.GraphQLBoolean),defaultValue:!1}}})},64486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fulltextDirective=void 0;let n=r(57343);t.fulltextDirective=new n.GraphQLDirective({name:"fulltext",description:"Informs @neo4j/graphql that there should be a fulltext index in the database, allows users to search by the index in the generated schema.",args:{indexes:{type:new n.GraphQLNonNull(new n.GraphQLList(new n.GraphQLInputObjectType({name:"FullTextInput",fields:{name:{deprecationReason:"The name argument has been deprecated and will be removed in future versions Please use indexName instead. More information about the changes to @fulltext can be found at https://neo4j.com/docs/graphql-manual/current/guides/v4-migration/#_fulltext_changes.",type:n.GraphQLString},fields:{type:new n.GraphQLNonNull(new n.GraphQLList(n.GraphQLString))},queryName:{type:n.GraphQLString},indexName:{type:n.GraphQLString}}})))}},locations:[n.DirectiveLocation.OBJECT]})},47116:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.idDirective=void 0;let n=r(57343);t.idDirective=new n.GraphQLDirective({name:"id",description:"Enables the autogeneration of UUID values for an ID field. The field becomes immutable.",locations:[n.DirectiveLocation.FIELD_DEFINITION]})},49450:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vectorDirective=t.uniqueDirective=t.timestampDirective=t.subscriptionDirective=t.settableDirective=t.selectableDirective=t.relayIdDirective=t.relationshipPropertiesDirective=t.relationshipDirective=t.queryDirective=t.privateDirective=t.populatedByDirective=t.pluralDirective=t.nodeDirective=t.mutationDirective=t.limitDirective=t.jwt=t.jwtClaim=t.idDirective=t.fulltextDirective=t.filterableDirective=t.defaultDirective=t.declareRelationshipDirective=t.cypherDirective=t.customResolverDirective=t.coalesceDirective=t.aliasDirective=void 0;var n=r(56208);Object.defineProperty(t,"aliasDirective",{enumerable:!0,get:function(){return n.aliasDirective}});var i=r(66089);Object.defineProperty(t,"coalesceDirective",{enumerable:!0,get:function(){return i.coalesceDirective}});var o=r(94767);Object.defineProperty(t,"customResolverDirective",{enumerable:!0,get:function(){return o.customResolverDirective}});var a=r(18502);Object.defineProperty(t,"cypherDirective",{enumerable:!0,get:function(){return a.cypherDirective}});var s=r(22933);Object.defineProperty(t,"declareRelationshipDirective",{enumerable:!0,get:function(){return s.declareRelationshipDirective}});var l=r(13950);Object.defineProperty(t,"defaultDirective",{enumerable:!0,get:function(){return l.defaultDirective}});var u=r(18787);Object.defineProperty(t,"filterableDirective",{enumerable:!0,get:function(){return u.filterableDirective}});var c=r(64486);Object.defineProperty(t,"fulltextDirective",{enumerable:!0,get:function(){return c.fulltextDirective}});var p=r(47116);Object.defineProperty(t,"idDirective",{enumerable:!0,get:function(){return p.idDirective}});var d=r(32615);Object.defineProperty(t,"jwtClaim",{enumerable:!0,get:function(){return d.jwtClaim}});var f=r(52209);Object.defineProperty(t,"jwt",{enumerable:!0,get:function(){return f.jwt}});var h=r(36391);Object.defineProperty(t,"limitDirective",{enumerable:!0,get:function(){return h.limitDirective}});var y=r(9761);Object.defineProperty(t,"mutationDirective",{enumerable:!0,get:function(){return y.mutationDirective}});var m=r(23500);Object.defineProperty(t,"nodeDirective",{enumerable:!0,get:function(){return m.nodeDirective}});var v=r(56613);Object.defineProperty(t,"pluralDirective",{enumerable:!0,get:function(){return v.pluralDirective}});var g=r(37828);Object.defineProperty(t,"populatedByDirective",{enumerable:!0,get:function(){return g.populatedByDirective}});var b=r(42518);Object.defineProperty(t,"privateDirective",{enumerable:!0,get:function(){return b.privateDirective}});var _=r(21317);Object.defineProperty(t,"queryDirective",{enumerable:!0,get:function(){return _.queryDirective}});var T=r(24684);Object.defineProperty(t,"relationshipDirective",{enumerable:!0,get:function(){return T.relationshipDirective}});var E=r(83535);Object.defineProperty(t,"relationshipPropertiesDirective",{enumerable:!0,get:function(){return E.relationshipPropertiesDirective}});var O=r(14539);Object.defineProperty(t,"relayIdDirective",{enumerable:!0,get:function(){return O.relayIdDirective}});var S=r(35696);Object.defineProperty(t,"selectableDirective",{enumerable:!0,get:function(){return S.selectableDirective}});var w=r(99547);Object.defineProperty(t,"settableDirective",{enumerable:!0,get:function(){return w.settableDirective}});var I=r(8586);Object.defineProperty(t,"subscriptionDirective",{enumerable:!0,get:function(){return I.subscriptionDirective}});var N=r(90415);Object.defineProperty(t,"timestampDirective",{enumerable:!0,get:function(){return N.timestampDirective}});var A=r(15045);Object.defineProperty(t,"uniqueDirective",{enumerable:!0,get:function(){return A.uniqueDirective}});var C=r(93837);Object.defineProperty(t,"vectorDirective",{enumerable:!0,get:function(){return C.vectorDirective}})},32615:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwtClaim=void 0;let n=r(57343);t.jwtClaim=new n.GraphQLDirective({name:"jwtClaim",description:"Instructs @neo4j/graphql that the flagged field has a mapped path within the JWT Payload.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{path:{description:"The path of the field in the real JWT as mapped within the JWT Payload.",type:new n.GraphQLNonNull(n.GraphQLString)}}})},52209:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwt=void 0;let n=r(57343);t.jwt=new n.GraphQLDirective({name:"jwt",description:"Instructs @neo4j/graphql that the flagged object represents the relevant JWT payload",locations:[n.DirectiveLocation.OBJECT]})},36391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.limitDirective=void 0;let n=r(57343);t.limitDirective=new n.GraphQLDirective({name:"limit",description:"Instructs @neo4j/graphql to inject limit values into a query.",args:{default:{description:"If no limit argument is supplied on query will fallback to this value.",type:n.GraphQLInt},max:{description:"Maximum limit to be used for queries.",type:n.GraphQLInt}},locations:[n.DirectiveLocation.OBJECT,n.DirectiveLocation.INTERFACE]})},9761:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.mutationDirective=t.MutationOperations=void 0;let i=r(57343);!function(e){e.CREATE="CREATE",e.UPDATE="UPDATE",e.DELETE="DELETE"}(n||(t.MutationOperations=n={}));let o=new i.GraphQLEnumType({name:"MutationFields",values:{[n.CREATE]:{value:n.CREATE},[n.UPDATE]:{value:n.UPDATE},[n.DELETE]:{value:n.DELETE}}});t.mutationDirective=new i.GraphQLDirective({name:"mutation",description:"Instructs @neo4j/graphql to exclude create, delete or update operations from the mutation root type.",args:{operations:{description:"Describe operations available for this type",type:new i.GraphQLNonNull(new i.GraphQLList(o)),defaultValue:[n.CREATE,n.UPDATE,n.DELETE]}},locations:[i.DirectiveLocation.OBJECT,i.DirectiveLocation.SCHEMA]})},23500:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nodeDirective=void 0;let n=r(57343);t.nodeDirective=new n.GraphQLDirective({name:"node",description:"Informs @neo4j/graphql of node metadata",locations:[n.DirectiveLocation.OBJECT],args:{labels:{description:"The labels to map this GraphQL type to in the Neo4j database",type:new n.GraphQLList(new n.GraphQLNonNull(n.GraphQLString))}}})},56613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluralDirective=void 0;let n=r(57343);t.pluralDirective=new n.GraphQLDirective({name:"plural",description:"Instructs @neo4j/graphql to use the given value as the plural of the type name",locations:[n.DirectiveLocation.OBJECT,n.DirectiveLocation.INTERFACE,n.DirectiveLocation.UNION],args:{value:{description:"The value to use as the plural of the type name.",type:new n.GraphQLNonNull(n.GraphQLString)}}})},37828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.populatedByDirective=void 0;let n=r(57343),i=r(51984);t.populatedByDirective=new n.GraphQLDirective({name:"populatedBy",description:"Instructs @neo4j/graphql to invoke the specified callback function when updating or creating the properties on a node or relationship.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{callback:{description:"The name of the callback function that will be used to populate the fields values.",type:new n.GraphQLNonNull(n.GraphQLString)},operations:{description:"Which events to invoke the callback on.",defaultValue:i.PopulatedByOperationEnum.getValues().map(e=>e.value),type:new n.GraphQLNonNull(new n.GraphQLList(new n.GraphQLNonNull(i.PopulatedByOperationEnum)))}}})},42518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.privateDirective=void 0;let n=r(57343);t.privateDirective=new n.GraphQLDirective({name:"private",description:"Instructs @neo4j/graphql to only expose a field through the Neo4j GraphQL OGM.",locations:[n.DirectiveLocation.FIELD_DEFINITION]})},21317:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryDirective=void 0;let n=r(57343);t.queryDirective=new n.GraphQLDirective({name:"query",description:"Instructs @neo4j/graphql to exclude read or aggregate operations from the query root type.",args:{read:{description:"Disable/Enabled read operations from query root type",type:new n.GraphQLNonNull(n.GraphQLBoolean),defaultValue:!0},aggregate:{description:"Disable/Enabled aggregate operations from query root type",type:new n.GraphQLNonNull(n.GraphQLBoolean),defaultValue:!1}},locations:[n.DirectiveLocation.OBJECT,n.DirectiveLocation.SCHEMA,n.DirectiveLocation.INTERFACE,n.DirectiveLocation.UNION]})},83535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.relationshipPropertiesDirective=void 0;let n=r(57343);t.relationshipPropertiesDirective=new n.GraphQLDirective({name:"relationshipProperties",description:"Required to differentiate between interfaces for relationship properties, and otherwise.",locations:[n.DirectiveLocation.OBJECT]})},24684:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.relationshipDirective=t.defaultNestedOperations=void 0;let n=r(57343),i=r(58388),o=r(93616),a=r(73973),s=r(15324);t.defaultNestedOperations=[i.RelationshipNestedOperationsOption.CREATE,i.RelationshipNestedOperationsOption.UPDATE,i.RelationshipNestedOperationsOption.DELETE,i.RelationshipNestedOperationsOption.CONNECT,i.RelationshipNestedOperationsOption.DISCONNECT,i.RelationshipNestedOperationsOption.CONNECT_OR_CREATE],t.relationshipDirective=new n.GraphQLDirective({name:"relationship",description:"Instructs @neo4j/graphql to treat this field as a relationship. Opens up the ability to create and connect on this field.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{type:{type:new n.GraphQLNonNull(n.GraphQLString)},queryDirection:{type:s.RelationshipQueryDirectionEnum,defaultValue:i.RelationshipQueryDirectionOption.DEFAULT_DIRECTED,description:"Valid and default directions for this relationship."},direction:{type:new n.GraphQLNonNull(o.RelationshipDirectionEnum)},properties:{type:n.GraphQLString,description:"The name of the interface containing the properties for this relationship."},nestedOperations:{type:new n.GraphQLNonNull(new n.GraphQLList(new n.GraphQLNonNull(a.RelationshipNestedOperationsEnum))),defaultValue:t.defaultNestedOperations,description:"Prevent all but these operations from being generated for this relationship"},aggregate:{type:n.GraphQLBoolean,defaultValue:!0,description:"Prevent aggregation for this relationship"}}})},14539:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.relayIdDirective=void 0;let n=r(57343);t.relayIdDirective=new n.GraphQLDirective({name:"relayId",description:"Mark the field to be used as the global node identifier for Relay. This field will be backed by a unique node property constraint.",locations:[n.DirectiveLocation.FIELD_DEFINITION]})},35696:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectableDirective=void 0;let n=r(57343);t.selectableDirective=new n.GraphQLDirective({name:"selectable",description:"Instructs @neo4j/graphql to generate this field for selectable types.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{onRead:{description:"Generates this field on read and subscribe operations.",type:new n.GraphQLNonNull(n.GraphQLBoolean),defaultValue:!0},onAggregate:{description:"Generates this field on aggregation operations.",type:new n.GraphQLNonNull(n.GraphQLBoolean),defaultValue:!1}}})},99547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settableDirective=void 0;let n=r(57343);t.settableDirective=new n.GraphQLDirective({name:"settable",description:"Instructs @neo4j/graphql to generate this field for mutation inputs.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{onCreate:{description:"Generates this input field for create operations.",type:new n.GraphQLNonNull(n.GraphQLBoolean),defaultValue:!0},onUpdate:{description:"Generates this input field for update operations.",type:new n.GraphQLNonNull(n.GraphQLBoolean),defaultValue:!0}}})},8586:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionDirective=t.SubscriptionEvent=void 0;let i=r(57343);!function(e){e.CREATED="CREATED",e.UPDATED="UPDATED",e.DELETED="DELETED",e.RELATIONSHIP_CREATED="RELATIONSHIP_CREATED",e.RELATIONSHIP_DELETED="RELATIONSHIP_DELETED"}(n||(t.SubscriptionEvent=n={}));let o=new i.GraphQLEnumType({name:"SubscriptionEvent",values:{[n.CREATED]:{value:n.CREATED},[n.UPDATED]:{value:n.UPDATED},[n.DELETED]:{value:n.DELETED},[n.RELATIONSHIP_CREATED]:{value:n.RELATIONSHIP_CREATED},[n.RELATIONSHIP_DELETED]:{value:n.RELATIONSHIP_DELETED}}});t.subscriptionDirective=new i.GraphQLDirective({name:"subscription",description:"Define the granularity of events available in the subscription root type.",args:{events:{description:"Enable/Disable subscription events for this type",type:new i.GraphQLNonNull(new i.GraphQLList(o)),defaultValue:[n.CREATED,n.UPDATED,n.DELETED,n.RELATIONSHIP_CREATED,n.RELATIONSHIP_DELETED]}},locations:[i.DirectiveLocation.OBJECT,i.DirectiveLocation.SCHEMA]})},90415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestampDirective=void 0;let n=r(57343),i=r(91207);t.timestampDirective=new n.GraphQLDirective({name:"timestamp",description:"Instructs @neo4j/graphql to generate timestamps on particular events, which will be available as the value of the specified field.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{operations:{description:"Which events to generate timestamps on. Defaults to both create and update.",defaultValue:i.TimestampOperationEnum.getValues().map(e=>e.value),type:new n.GraphQLNonNull(new n.GraphQLList(new n.GraphQLNonNull(i.TimestampOperationEnum)))}}})},46111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationDirectiveScaffold=t.createAuthenticationDirectiveDefinition=void 0;let n=r(14364),i=r(57343),o=r(26156),a=["READ","AGGREGATE","CREATE","UPDATE","DELETE","CREATE_RELATIONSHIP","DELETE_RELATIONSHIP","SUBSCRIBE"];t.createAuthenticationDirectiveDefinition=function(){var e;let t=(e=new i.GraphQLInputObjectType({name:"JWTPayloadWhere",fields:{}}),new i.GraphQLDirective({name:"authentication",locations:[i.DirectiveLocation.OBJECT,i.DirectiveLocation.FIELD_DEFINITION,i.DirectiveLocation.SCHEMA],args:{operations:{description:"operations",type:new i.GraphQLList(o.AUTHENTICATION_OPERATION),defaultValue:a},jwt:{type:e}}}));return(0,n.astFromDirective)(t)},t.authenticationDirectiveScaffold=new i.GraphQLDirective({name:"authentication",description:"This is a simpler version of the authentication directive to be used in the validate-document step.",locations:[i.DirectiveLocation.OBJECT,i.DirectiveLocation.FIELD_DEFINITION,i.DirectiveLocation.SCHEMA],args:{operations:{description:"operations",type:new i.GraphQLList(i.GraphQLString)},jwt:{type:i.GraphQLString}}})},61740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authorizationDirectiveScaffold=t.createAuthorizationDefinitions=void 0;let n=r(14364),i=r(57343),o=r(26156);t.createAuthorizationDefinitions=function(e,t){let r=function(e,t,r){let n=t.getType(`${e}Where`),o=new i.GraphQLInputObjectType({name:`${e}AuthorizationWhere`,fields:()=>({AND:{type:new i.GraphQLList(o)},OR:{type:new i.GraphQLList(o)},NOT:{type:o},...n?{node:{type:n}}:{},jwt:{type:r}})});return o}(e,t,new i.GraphQLInputObjectType({name:"JWTPayloadWhere",fields:{}})),a=new i.GraphQLInputObjectType({name:`${e}AuthorizationFilterRule`,fields:()=>({operations:{type:new i.GraphQLList(o.AUTHORIZATION_FILTER_OPERATION),defaultValue:["READ","AGGREGATE","UPDATE","DELETE","CREATE_RELATIONSHIP","DELETE_RELATIONSHIP"]},requireAuthentication:{type:i.GraphQLBoolean,defaultValue:!0},where:{type:r}})}),s=new i.GraphQLInputObjectType({name:`${e}AuthorizationValidateRule`,fields:()=>({operations:{type:new i.GraphQLList(o.AUTHORIZATION_VALIDATE_OPERATION),defaultValue:["READ","AGGREGATE","CREATE","UPDATE","DELETE","CREATE_RELATIONSHIP","DELETE_RELATIONSHIP"]},when:{type:new i.GraphQLList(o.AUTHORIZATION_VALIDATE_STAGE),defaultValue:["BEFORE","AFTER"]},requireAuthentication:{type:i.GraphQLBoolean,defaultValue:!0},where:{type:r}})}),l=function({typeDefinitionName:e,filterRule:t,validateRule:r}){return new i.GraphQLDirective({name:`${e}Authorization`,locations:[i.DirectiveLocation.OBJECT,i.DirectiveLocation.FIELD_DEFINITION],args:{filter:{description:"filter",type:new i.GraphQLList(t)},validate:{description:"validate",type:new i.GraphQLList(r)}}})}({typeDefinitionName:e,filterRule:a,validateRule:s}),u=new i.GraphQLSchema({directives:[l],types:[r,a,s]}),c=(0,n.astFromInputObjectType)(r,u);return[c,(0,n.astFromInputObjectType)(a,u),(0,n.astFromInputObjectType)(s,u),(0,n.astFromDirective)(l)]},t.authorizationDirectiveScaffold=new i.GraphQLDirective({name:"authorization",description:"This is a simpler version of the authorization directive to be used in the validate-document step.",locations:[i.DirectiveLocation.OBJECT,i.DirectiveLocation.FIELD_DEFINITION],args:{filter:{description:"filter",type:new i.GraphQLList(i.GraphQLString)},validate:{description:"validate",type:new i.GraphQLList(i.GraphQLString)}}})},36859:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getStandardJwtDefinition=t.getJwtFields=void 0;let i=r(14364),o=r(57343),a=n(r(57779));function s(e){let t=new o.GraphQLObjectType({name:"JWTStandard",fields:{iss:{type:o.GraphQLString,description:"A case-sensitive string containing a StringOrURI value that identifies the principal that issued the JWT."},sub:{type:o.GraphQLString,description:"A case-sensitive string containing a StringOrURI value that identifies the principal that is the subject of the JWT."},aud:{type:new o.GraphQLList(o.GraphQLString),description:"An array of case-sensitive strings, each containing a StringOrURI value that identifies the recipients that can process the JWT."},exp:{type:o.GraphQLInt,description:"Identifies the expiration time on or after which the JWT must not be accepted for processing."},nbf:{type:o.GraphQLInt,description:"Identifies the time before which the JWT must not be accepted for processing."},iat:{type:o.GraphQLInt,description:"Identifies the time at which the JWT was issued, to determine the age of the JWT."},jti:{type:o.GraphQLString,description:"Uniquely identifies the JWT, to prevent the JWT from being replayed."}}});return(0,i.astFromObjectType)(t,e)}t.getJwtFields=function(e,t){if(t){let r=(0,a.default)({obj:t,objects:[],interfaces:[],unions:[],scalars:[],enums:[]}),n=s(e),i=(0,a.default)({obj:n,objects:[],interfaces:[],unions:[],scalars:[],enums:[]});return r.primitiveFields.push(...i.primitiveFields),r}return{scalarFields:[],primitiveFields:[],enumFields:[],temporalFields:[],pointFields:[]}},t.getStandardJwtDefinition=s},90976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeDependantDirectivesScaffolds=void 0;let n=r(46111),i=r(61740),o=r(76752);t.typeDependantDirectivesScaffolds=[n.authenticationDirectiveScaffold,i.authorizationDirectiveScaffold,o.subscriptionsAuthorizationDirectiveScaffold]},26156:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getStaticAuthorizationDefinitions=t.SUBSCRIPTIONS_AUTHORIZATION_FILTER_EVENT=t.AUTHENTICATION_OPERATION=t.AUTHORIZATION_FILTER_OPERATION=t.AUTHORIZATION_VALIDATE_OPERATION=t.AUTHORIZATION_VALIDATE_STAGE=void 0;let i=r(14364),o=r(57343),a=r(1109),s=n(r(74014)),l=r(36859);t.AUTHORIZATION_VALIDATE_STAGE=new o.GraphQLEnumType({name:"AuthorizationValidateStage",values:{BEFORE:{value:"BEFORE"},AFTER:{value:"AFTER"}}}),t.AUTHORIZATION_VALIDATE_OPERATION=new o.GraphQLEnumType({name:"AuthorizationValidateOperation",values:{CREATE:{value:"CREATE"},READ:{value:"READ"},AGGREGATE:{value:"AGGREGATE"},UPDATE:{value:"UPDATE"},DELETE:{value:"DELETE"},CREATE_RELATIONSHIP:{value:"CREATE_RELATIONSHIP"},DELETE_RELATIONSHIP:{value:"DELETE_RELATIONSHIP"}}}),t.AUTHORIZATION_FILTER_OPERATION=new o.GraphQLEnumType({name:"AuthorizationFilterOperation",values:{READ:{value:"READ"},AGGREGATE:{value:"AGGREGATE"},UPDATE:{value:"UPDATE"},DELETE:{value:"DELETE"},CREATE_RELATIONSHIP:{value:"CREATE_RELATIONSHIP"},DELETE_RELATIONSHIP:{value:"DELETE_RELATIONSHIP"}}}),t.AUTHENTICATION_OPERATION=new o.GraphQLEnumType({name:"AuthenticationOperation",values:{CREATE:{value:"CREATE"},READ:{value:"READ"},AGGREGATE:{value:"AGGREGATE"},UPDATE:{value:"UPDATE"},DELETE:{value:"DELETE"},CREATE_RELATIONSHIP:{value:"CREATE_RELATIONSHIP"},DELETE_RELATIONSHIP:{value:"DELETE_RELATIONSHIP"},SUBSCRIBE:{value:"SUBSCRIBE"}}}),t.SUBSCRIPTIONS_AUTHORIZATION_FILTER_EVENT=new o.GraphQLEnumType({name:"SubscriptionsAuthorizationFilterEvent",values:{CREATED:{value:"CREATED"},UPDATED:{value:"UPDATED"},DELETED:{value:"DELETED"},RELATIONSHIP_CREATED:{value:"RELATIONSHIP_CREATED"},RELATIONSHIP_DELETED:{value:"RELATIONSHIP_DELETED"}}}),t.getStaticAuthorizationDefinitions=function(e){let r=new o.GraphQLSchema({}),n=(0,i.astFromEnumType)(t.AUTHORIZATION_VALIDATE_STAGE,r),u=(0,i.astFromEnumType)(t.AUTHORIZATION_VALIDATE_OPERATION,r),c=[n,u,(0,i.astFromEnumType)(t.AUTHORIZATION_FILTER_OPERATION,r),(0,i.astFromEnumType)(t.AUTHENTICATION_OPERATION,r),(0,i.astFromEnumType)(t.SUBSCRIPTIONS_AUTHORIZATION_FILTER_EVENT,r)],p=function(e,t){let r=(0,s.default)({typeName:"JWTPayload",fields:(0,l.getJwtFields)(e,t)});return new a.SchemaComposer().createInputTC({name:"JWTPayloadWhere",fields:r}).getType()}(r,e);return c.push((0,i.astFromInputObjectType)(p,r)),c}},76752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionsAuthorizationDirectiveScaffold=t.createSubscriptionsAuthorizationDefinitions=void 0;let n=r(14364),i=r(57343),o=r(26156);t.createSubscriptionsAuthorizationDefinitions=function(e,t){let r=function(e,t,r){let n=t.getType(`${e}SubscriptionWhere`),o=t.getType(`${e}RelationshipsSubscriptionWhere`),a=new i.GraphQLInputObjectType({name:`${e}SubscriptionsAuthorizationWhere`,fields:()=>({AND:{type:new i.GraphQLList(a)},OR:{type:new i.GraphQLList(a)},NOT:{type:a},...n?{node:{type:n}}:{},...o?{relationship:{type:o}}:{},jwt:{type:r}})});return a}(e,t,new i.GraphQLInputObjectType({name:"JWTPayloadWhere",fields:{}})),a=new i.GraphQLInputObjectType({name:`${e}SubscriptionsAuthorizationFilterRule`,fields:()=>({events:{type:new i.GraphQLList(o.SUBSCRIPTIONS_AUTHORIZATION_FILTER_EVENT),defaultValue:["CREATED","UPDATED","DELETED","RELATIONSHIP_CREATED","RELATIONSHIP_DELETED"]},requireAuthentication:{type:i.GraphQLBoolean,defaultValue:!0},where:{type:r}})}),s=function({typeDefinitionName:e,filterRule:t}){return new i.GraphQLDirective({name:`${e}SubscriptionsAuthorization`,locations:[i.DirectiveLocation.OBJECT,i.DirectiveLocation.FIELD_DEFINITION],args:{filter:{description:"filter",type:new i.GraphQLNonNull(new i.GraphQLList(t))}}})}({typeDefinitionName:e,filterRule:a}),l=new i.GraphQLSchema({directives:[s],types:[r,a]});return[(0,n.astFromInputObjectType)(r,l),(0,n.astFromInputObjectType)(a,l),(0,n.astFromDirective)(s)]},t.subscriptionsAuthorizationDirectiveScaffold=new i.GraphQLDirective({name:"subscriptionsAuthorization",description:"This is a simpler version of the subscriptionsAuthorization directive to be used in the validate-document step.",locations:[i.DirectiveLocation.OBJECT,i.DirectiveLocation.FIELD_DEFINITION],args:{filter:{description:"filter",type:new i.GraphQLNonNull(new i.GraphQLList(i.GraphQLString))}}})},15045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueDirective=void 0;let n=r(57343);t.uniqueDirective=new n.GraphQLDirective({name:"unique",description:"Informs @neo4j/graphql that there should be a uniqueness constraint in the database for the decorated field.",locations:[n.DirectiveLocation.FIELD_DEFINITION],args:{constraintName:{description:"The name which should be used for this constraint. By default; type name, followed by an underscore, followed by the field name.",type:n.GraphQLString}}})},93837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vectorDirective=t.vectorProviderNames=void 0;let n=r(57343);t.vectorProviderNames={VERTEX_AI:"VertexAI",OPEN_AI:"OpenAI",AZURE_OPEN_AI:"AzureOpenAI",BEDROCK:"Bedrock"};let i=new n.GraphQLEnumType({name:"VectorProvider",description:"*For use in the @vector directive only",values:Object.keys(t.vectorProviderNames).reduce((e,r)=>(e[r]={value:t.vectorProviderNames[r]},e),{})});t.vectorDirective=new n.GraphQLDirective({name:"vector",description:"Informs @neo4j/graphql that there should be a vector index in the database, allows users to search by phrase in the generated schema.",args:{indexes:{type:new n.GraphQLNonNull(new n.GraphQLList(new n.GraphQLInputObjectType({name:"VectorInput",fields:{indexName:{type:new n.GraphQLNonNull(n.GraphQLString)},embeddingProperty:{type:new n.GraphQLNonNull(n.GraphQLString)},queryName:{type:new n.GraphQLNonNull(n.GraphQLString)},provider:{type:i}}})))}},locations:[n.DirectiveLocation.OBJECT]})},43273:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventType=void 0;let n=r(57343);t.EventType=new n.GraphQLEnumType({name:"EventType",values:{CREATE:{},DELETE:{},UPDATE:{},CREATE_RELATIONSHIP:{},DELETE_RELATIONSHIP:{}}})},56372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortDirection=void 0;let n=r(57343);t.SortDirection=new n.GraphQLEnumType({name:"SortDirection",description:"An enum for sorting in either ascending or descending order.",values:{ASC:{value:"ASC",description:"Sort by field values in ascending order."},DESC:{value:"DESC",description:"Sort by field values in descending order."}}})},65562:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CartesianPointDistance=void 0;let n=r(57343),i=r(9742);t.CartesianPointDistance=new n.GraphQLInputObjectType({name:"CartesianPointDistance",description:"Input type for a cartesian point with a distance",fields:{point:{type:new n.GraphQLNonNull(i.CartesianPointInput)},distance:{type:new n.GraphQLNonNull(n.GraphQLFloat)}}})},9742:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CartesianPointInput=void 0;let n=r(57343);t.CartesianPointInput=new n.GraphQLInputObjectType({name:"CartesianPointInput",description:"Input type for a cartesian point",fields:{x:{type:new n.GraphQLNonNull(n.GraphQLFloat)},y:{type:new n.GraphQLNonNull(n.GraphQLFloat)},z:{type:n.GraphQLFloat}}})},23281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FloatWhere=void 0;let n=r(57343);t.FloatWhere=new n.GraphQLInputObjectType({name:"FloatWhere",description:"The input for filtering a float",fields:{min:{type:n.GraphQLFloat},max:{type:n.GraphQLFloat}}})},77286:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointDistance=void 0;let n=r(57343),i=r(94045);t.PointDistance=new n.GraphQLInputObjectType({name:"PointDistance",description:"Input type for a point with a distance",fields:{point:{type:new n.GraphQLNonNull(i.PointInput)},distance:{type:new n.GraphQLNonNull(n.GraphQLFloat),description:"The distance in metres to be used when comparing two points"}}})},94045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointInput=void 0;let n=r(57343);t.PointInput=new n.GraphQLInputObjectType({name:"PointInput",description:"Input type for a point",fields:{longitude:{type:new n.GraphQLNonNull(n.GraphQLFloat)},latitude:{type:new n.GraphQLNonNull(n.GraphQLFloat)},height:{type:n.GraphQLFloat}}})},12602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryOptions=void 0;let n=r(57343);t.QueryOptions=new n.GraphQLInputObjectType({name:"QueryOptions",description:"Input type for options that can be specified on a query operation.",fields:{offset:{type:n.GraphQLInt},limit:{type:n.GraphQLInt}}})},32965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CartesianPoint=void 0;let n=r(57343),i=r(19594);t.CartesianPoint=new n.GraphQLObjectType({name:"CartesianPoint",description:"A point in a two- or three-dimensional Cartesian coordinate system or in a three-dimensional cylindrical coordinate system. For more information, see https://neo4j.com/docs/graphql/4/type-definitions/types/spatial/#cartesian-point",fields:{x:{type:new n.GraphQLNonNull(n.GraphQLFloat),resolve:e=>e.point.x},y:{type:new n.GraphQLNonNull(n.GraphQLFloat),resolve:e=>e.point.y},z:{type:n.GraphQLFloat,resolve:e=>e.point.z},crs:{type:new n.GraphQLNonNull(n.GraphQLString)},srid:{type:new n.GraphQLNonNull(n.GraphQLInt),resolve:(e,t,r,n)=>(0,i.numericalResolver)(e.point,t,r,n)}}})},97007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateInfo=void 0;let n=r(57343);t.CreateInfo=new n.GraphQLObjectType({name:"CreateInfo",description:"Information about the number of nodes and relationships created during a create mutation",fields:{bookmark:{type:n.GraphQLString},nodesCreated:{type:new n.GraphQLNonNull(n.GraphQLInt)},relationshipsCreated:{type:new n.GraphQLNonNull(n.GraphQLInt)}}})},23084:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteInfo=void 0;let n=r(57343);t.DeleteInfo=new n.GraphQLObjectType({name:"DeleteInfo",description:"Information about the number of nodes and relationships deleted during a delete mutation",fields:{bookmark:{type:n.GraphQLString},nodesDeleted:{type:new n.GraphQLNonNull(n.GraphQLInt)},relationshipsDeleted:{type:new n.GraphQLNonNull(n.GraphQLInt)}}})},41435:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageInfo=void 0;let n=r(57343);t.PageInfo=new n.GraphQLObjectType({name:"PageInfo",description:"Pagination information (Relay)",fields:{hasNextPage:{type:new n.GraphQLNonNull(n.GraphQLBoolean)},hasPreviousPage:{type:new n.GraphQLNonNull(n.GraphQLBoolean)},startCursor:{type:n.GraphQLString},endCursor:{type:n.GraphQLString}}})},63174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0;let n=r(57343),i=r(19594);t.Point=new n.GraphQLObjectType({name:"Point",description:"A point in a coordinate system. For more information, see https://neo4j.com/docs/graphql/4/type-definitions/types/spatial/#point",fields:{longitude:{type:new n.GraphQLNonNull(n.GraphQLFloat),resolve:e=>e.point.x},latitude:{type:new n.GraphQLNonNull(n.GraphQLFloat),resolve:e=>e.point.y},height:{type:n.GraphQLFloat,resolve:e=>e.point.z},crs:{type:new n.GraphQLNonNull(n.GraphQLString)},srid:{type:new n.GraphQLNonNull(n.GraphQLInt),resolve:(e,t,r,n)=>(0,i.numericalResolver)(e.point,t,r,n)}}})},49046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateInfo=void 0;let n=r(57343);t.UpdateInfo=new n.GraphQLObjectType({name:"UpdateInfo",description:"Information about the number of nodes and relationships created and deleted during an update mutation",fields:{bookmark:{type:n.GraphQLString},nodesCreated:{type:new n.GraphQLNonNull(n.GraphQLInt)},nodesDeleted:{type:new n.GraphQLNonNull(n.GraphQLInt)},relationshipsCreated:{type:new n.GraphQLNonNull(n.GraphQLInt)},relationshipsDeleted:{type:new n.GraphQLNonNull(n.GraphQLInt)}}})},65342:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLBigInt=void 0;let n=r(57343),i=r(66007);t.GraphQLBigInt=new n.GraphQLScalarType({name:"BigInt",description:"A BigInt value up to 64 bits in size, which can be a number or a string if used inline, or a string only if used as a variable. Always returned as a string.",serialize(e){if((0,i.isInt)(e))return e.toString(10);if("string"==typeof e)return e;if("number"==typeof e)return e.toString(10);throw new n.GraphQLError(`BigInt cannot represent value: ${e}`)},parseValue(e){if("string"!=typeof e)throw new n.GraphQLError("BigInt values are not JSON serializable. Please pass as a string in variables, or inline in the GraphQL query.");try{return(0,i.int)(e,{strictStringValidation:!0})}catch{throw new n.GraphQLError("Value must be either a BigInt, or a string representing a BigInt value.")}},parseLiteral(e){switch(e.kind){case n.Kind.INT:case n.Kind.STRING:try{return(0,i.int)(e.value,{strictStringValidation:!0})}catch{throw new n.GraphQLError("Value must be either a BigInt, or a string representing a BigInt value.")}default:throw new n.GraphQLError("Value must be either a BigInt, or a string representing a BigInt value.")}}})},31813:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLDate=void 0;let a=r(57343),s=o(r(66007)),l=e=>new Date(e).toISOString().split("T")[0];t.GraphQLDate=new a.GraphQLScalarType({name:"Date",description:"A date, represented as a 'yyyy-mm-dd' string",serialize:e=>{if("string"==typeof e)return l(e);if((0,s.isDate)(e))return l(e.toString());throw new a.GraphQLError(`Date cannot represent value: ${e}`)},parseValue:e=>{if("string"==typeof e){let t=new Date(e);if("Invalid Date"===t.toString())throw new a.GraphQLError(`Date cannot represent non temporal value: ${e}`);return s.default.types.Date.fromStandardDate(t)}if((0,s.isDate)(e))return e;throw new a.GraphQLError(`Date cannot represent non string value: ${e}`)},parseLiteral(e){if(e.kind!==a.Kind.STRING)throw new a.GraphQLError("Date cannot represent non string value.");return s.default.types.Date.fromStandardDate(new Date(e.value))}})},26712:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLDateTime=void 0;let a=r(57343),s=o(r(66007));t.GraphQLDateTime=new a.GraphQLScalarType({name:"DateTime",description:"A date and time, represented as an ISO-8601 string",serialize:e=>{if("string"==typeof e)return new Date(e).toISOString();if((0,s.isDateTime)(e))return new Date(e.toString()).toISOString();throw new a.GraphQLError(`DateTime cannot represent value: ${e}`)},parseValue:e=>{if("string"==typeof e){let t=new Date(e);if("Invalid Date"===t.toString())throw new a.GraphQLError(`DateTime cannot represent non temporal value: ${e}`);return s.default.types.DateTime.fromStandardDate(t)}if((0,s.isDateTime)(e))return e;throw new a.GraphQLError(`DateTime cannot represent non string value: ${e}`)},parseLiteral(e){if(e.kind!==a.Kind.STRING)throw new a.GraphQLError("DateTime cannot represent non string value.");return s.default.types.DateTime.fromStandardDate(new Date(e.value))}})},33723:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLDuration=t.parseDuration=t.NANOSECONDS_PER_SECOND=t.SECONDS_PER_HOUR=t.SECONDS_PER_MINUTE=t.MINUTES_PER_HOUR=t.HOURS_PER_DAY=t.DAYS_PER_WEEK=t.DAYS_PER_MONTH=t.DAYS_PER_YEAR=t.MONTHS_PER_YEAR=void 0;let a=r(57343),s=o(r(66007)),l=/^(?<negated>-?)?P(?!$)(?:(?<years>-?\d+(?:\.\d+(?=Y$))?)Y)?(?:(?<months>-?\d+(?:\.\d+(?=M$))?)M)?(?:(?<weeks>-?(5[0-3]|[1-4][0-9]|[1-9])(?:\.\d+(?=W$))?)W)?(?:(?<days>-?\d+(?:\.\d+(?=D$))?)D)?(?:T(?!$)(?:(?<hours>-?\d+(?:\.\d+(?=H$))?)H)?(?:(?<minutes>-?\d+(?:\.\d+(?=M$))?)M)?(?:(?<seconds>-?\d+(?:\.\d+(?=S$))?)S)?)?$/,u=/^(?<negated>-?)?P(?<years>\d{4})-(?<months>\d{2})-(?<days>\d{2})T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})/,c=/^(?<negated>-?)?P(?<years>\d{4})(?<months>\d{2})(?<days>\d{2})T(?<hours>\d{2})(?<minutes>\d{2})(?<seconds>\d{2})/;t.MONTHS_PER_YEAR=12,t.DAYS_PER_YEAR=365.2425,t.DAYS_PER_MONTH=t.DAYS_PER_YEAR/t.MONTHS_PER_YEAR,t.DAYS_PER_WEEK=7,t.HOURS_PER_DAY=24,t.MINUTES_PER_HOUR=60,t.SECONDS_PER_MINUTE=60,t.SECONDS_PER_HOUR=t.SECONDS_PER_MINUTE*t.MINUTES_PER_HOUR,t.NANOSECONDS_PER_SECOND=1e9,t.parseDuration=e=>{let r=l.exec(e),n=u.exec(e),i=c.exec(e),o=r||n||i;if(!o)throw TypeError(`Value must be formatted as Duration: ${e}`);let{negated:a,years:s=0,months:p=0,weeks:d=0,days:f=0,hours:h=0,minutes:y=0,seconds:m=0}=o.groups,v=e=>{let t=parseFloat(e.toFixed(9));return[Math.trunc(t),t%1]},[g,b]=v(+p+ +s*t.MONTHS_PER_YEAR),[_,T]=v(+f+ +d*t.DAYS_PER_WEEK+b*t.DAYS_PER_MONTH),E=v((+h+T*t.HOURS_PER_DAY)*t.SECONDS_PER_HOUR),O=v(+y*t.SECONDS_PER_MINUTE),S=v(+m),w=E[0]+O[0]+S[0],I=+(E[1]+O[1]+S[1]).toFixed(9)*t.NANOSECONDS_PER_SECOND,N=a?-1:1,A=e=>Object.is(e,-0)?0:e;return{months:A(N*g),days:A(N*_),seconds:A(N*w),nanoseconds:A(N*I)}};let p=e=>{if("string"==typeof e){let{months:r,days:n,seconds:i,nanoseconds:o}=(0,t.parseDuration)(e);return new s.default.types.Duration(r,n,i,o)}if((0,s.isDuration)(e))return e;throw new a.GraphQLError(`Only string or Duration can be validated as Duration, but received: ${e}`)};t.GraphQLDuration=new a.GraphQLScalarType({name:"Duration",description:"A duration, represented as an ISO 8601 duration string",serialize:e=>{if(!("string"==typeof e||e instanceof s.default.types.Duration))throw TypeError(`Value must be of type string: ${e}`);if(e instanceof s.default.types.Duration)return e.toString();let t=l.test(e),r=u.test(e),n=c.test(e);if(!(t||r||n))throw TypeError(`Value must be formatted as Duration: ${e}`);return e},parseValue:e=>p(e),parseLiteral:e=>{if(e.kind!==a.Kind.STRING)throw new a.GraphQLError(`Only strings can be validated as Duration, but received: ${e.kind}`);return p(e.value)}})},19186:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLLocalDateTime=t.parseLocalDateTime=void 0;let a=r(57343),s=o(r(66007)),l=/^(?<year>\d{4})-(?<month>[0]\d|1[0-2])-(?<day>[0-2]\d|3[01])T(?<hour>[01]\d|2[0-3]):(?<minute>[0-5]\d):(?<second>[0-5]\d)(\.(?<fraction>\d+))?$/;t.parseLocalDateTime=e=>{if("string"!=typeof e)throw TypeError(`Value must be of type string: ${e}`);let t=l.exec(e);if(!t)throw TypeError(`Value must be formatted as LocalDateTime: ${e}`);let{year:r,month:n,day:i,hour:o,minute:a,second:s,fraction:u="0"}=t.groups,c=u.substring(0,9);for(;c.toString().length<9;)c=`${c}0`;return{year:+r,month:+n,day:+i,hour:+o,minute:+a,second:+s,nanosecond:+c}};let u=e=>{if((0,s.isLocalDateTime)(e))return e;let{year:r,month:n,day:i,hour:o,minute:a,second:l,nanosecond:u}=(0,t.parseLocalDateTime)(e);return new s.default.types.LocalDateTime(r,n,i,o,a,l,u)};t.GraphQLLocalDateTime=new a.GraphQLScalarType({name:"LocalDateTime",description:"A local datetime, represented as 'YYYY-MM-DDTHH:MM:SS'",serialize:e=>{if("string"!=typeof e&&!(e instanceof s.default.types.LocalDateTime))throw TypeError(`Value must be of type string: ${e}`);let t=e.toString();if(!l.test(t))throw TypeError(`Value must be formatted as LocalDateTime: ${t}`);return t},parseValue:e=>u(e),parseLiteral:e=>{if(e.kind!==a.Kind.STRING)throw new a.GraphQLError(`Only strings can be validated as LocalDateTime, but received: ${e.kind}`);return u(e.value)}})},5033:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLLocalTime=t.parseLocalTime=t.LOCAL_TIME_REGEX=void 0;let a=r(57343),s=o(r(66007));t.LOCAL_TIME_REGEX=/^(?<hour>[01]\d|2[0-3]):(?<minute>[0-5]\d):(?<second>[0-5]\d)(\.(?<fraction>\d{1}(?:\d{0,8})))?$/,t.parseLocalTime=e=>{if("string"!=typeof e)throw TypeError(`Value must be of type string: ${e}`);let r=t.LOCAL_TIME_REGEX.exec(e);if(!r)throw TypeError(`Value must be formatted as LocalTime: ${e}`);let{hour:n,minute:i,second:o,fraction:a}=r.groups,s=0;return a&&(s=+`${a}000000000`.substring(0,9)),{hour:+n,minute:+i,second:+o,nanosecond:s}};let l=e=>{if((0,s.isLocalTime)(e))return e;let{hour:r,minute:n,second:i,nanosecond:o}=(0,t.parseLocalTime)(e);return new s.default.types.LocalTime(r,n,i,o)};t.GraphQLLocalTime=new a.GraphQLScalarType({name:"LocalTime",description:"A local time, represented as a time string without timezone information",serialize:e=>{if("string"!=typeof e&&!(e instanceof s.default.types.LocalTime))throw TypeError(`Value must be of type string: ${e}`);let r=e.toString();if(!t.LOCAL_TIME_REGEX.test(r))throw TypeError(`Value must be formatted as LocalTime: ${r}`);return r},parseValue:e=>l(e),parseLiteral:e=>{if(e.kind!==a.Kind.STRING)throw new a.GraphQLError(`Only strings can be validated as LocalTime, but received: ${e.kind}`);return l(e.value)}})},26025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLSelectionSet=void 0;let n=r(57343);function i(e){try{(0,n.parse)(`{ ${e} }`)}catch{throw new n.GraphQLError(`SelectionSet cannot parse the following value: ${e}`)}}t.GraphQLSelectionSet=new n.GraphQLScalarType({name:"SelectionSet",description:"A GraphQL SelectionSet without the outer curly braces. It must be passed as a string and is always returned as a string.",serialize(e){if("string"!=typeof e)throw new n.GraphQLError(`SelectionSet cannot represent non string value: ${e}`);return i(e),e},parseValue(e){if("string"!=typeof e)throw new n.GraphQLError(`SelectionSet cannot represent non string value: ${e}`);return i(e),e},parseLiteral(e){if(e.kind!==n.Kind.STRING)throw new n.GraphQLError("SelectionSet cannot represent non string value");return i(e.value),e.value}})},39059:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLTime=t.parseTime=t.TIME_REGEX=void 0;let a=r(57343),s=o(r(66007));t.TIME_REGEX=/^(?<hour>[01]\d|2[0-3]):(?<minute>[0-5]\d)(:(?<second>[0-5]\d)(\.(?<fraction>\d{1}(?:\d{0,8})))?((?:[Zz])|((?<offsetDirection>[-|+])(?<offsetHour>[01]\d|2[0-3]):(?<offsetMinute>[0-5]\d)))?)?$/,t.parseTime=e=>{if("string"!=typeof e)throw TypeError(`Value must be of type string: ${e}`);let r=t.TIME_REGEX.exec(e);if(!r)throw TypeError(`Value must be formatted as Time: ${e}`);let{hour:n,minute:i,second:o,fraction:a,offsetDirection:s,offsetHour:l,offsetMinute:u}=r.groups,c=0;a&&(c=+`${a}000000000`.substring(0,9));let p=0;return s&&l&&u&&(p=+`${s}${60*(+u+60*+l)}`),{hour:+n,minute:+i,second:+(o||0),nanosecond:c,timeZoneOffsetSeconds:p}};let l=e=>{if((0,s.isTime)(e))return e;let{hour:r,minute:n,second:i,nanosecond:o,timeZoneOffsetSeconds:a}=(0,t.parseTime)(e);return new s.default.types.Time(r,n,i,o,a)};t.GraphQLTime=new a.GraphQLScalarType({name:"Time",description:"A time, represented as an RFC3339 time string",serialize:e=>{if("string"!=typeof e&&!(e instanceof s.default.types.Time))throw TypeError(`Value must be of type string: ${e}`);let r=e.toString();if(!t.TIME_REGEX.test(r))throw TypeError(`Value must be formatted as Time: ${r}`);return r},parseValue:e=>l(e),parseLiteral:e=>{if(e.kind!==a.Kind.STRING)throw new a.GraphQLError(`Only strings can be validated as Time, but received: ${e.kind}`);return l(e.value)}})},65639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLTime=t.GraphQLLocalTime=t.GraphQLLocalDateTime=t.GraphQLDuration=t.GraphQLDateTime=t.GraphQLDate=t.GraphQLBigInt=void 0;var n=r(65342);Object.defineProperty(t,"GraphQLBigInt",{enumerable:!0,get:function(){return n.GraphQLBigInt}});var i=r(31813);Object.defineProperty(t,"GraphQLDate",{enumerable:!0,get:function(){return i.GraphQLDate}});var o=r(26712);Object.defineProperty(t,"GraphQLDateTime",{enumerable:!0,get:function(){return o.GraphQLDateTime}});var a=r(33723);Object.defineProperty(t,"GraphQLDuration",{enumerable:!0,get:function(){return a.GraphQLDuration}});var s=r(19186);Object.defineProperty(t,"GraphQLLocalDateTime",{enumerable:!0,get:function(){return s.GraphQLLocalDateTime}});var l=r(5033);Object.defineProperty(t,"GraphQLLocalTime",{enumerable:!0,get:function(){return l.GraphQLLocalTime}});var u=r(39059);Object.defineProperty(t,"GraphQLTime",{enumerable:!0,get:function(){return u.GraphQLTime}})},45306:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Neo4jGraphQLSubscriptionsCDCEngine=t.scalars=t.objects=t.directives=t.Neo4jGraphQL=void 0;let a=r(44706);Object.defineProperty(t,"Neo4jGraphQL",{enumerable:!0,get:function(){return a.Neo4jGraphQL}});let s=r(69981);Object.defineProperty(t,"Neo4jGraphQLSubscriptionsCDCEngine",{enumerable:!0,get:function(){return s.Neo4jGraphQLSubscriptionsCDCEngine}});let l=o(r(49450));t.directives=l;let u=r(32965),c=r(63174),p=o(r(65639));t.scalars=p;let d={Point:c.Point,CartesianPoint:u.CartesianPoint};t.objects=d},88760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Neo4jGraphQLSchemaModel=void 0;let n=r(64494);class i{constructor({concreteEntities:e,compositeEntities:t,operations:r,annotations:n={}}){this.entities=[...t,...e].reduce((e,t)=>(e.set(t.name,t),e),new Map),this.concreteEntities=e,this.compositeEntities=t,this.operations=r,this.annotations=n}getEntity(e){return this.entities.get(e)}getConcreteEntityAdapter(e){let t=this.concreteEntities.find(t=>t.name===e);return t?new n.ConcreteEntityAdapter(t):void 0}getEntitiesByLabels(e){return this.concreteEntities.filter(t=>t.matchLabels(e))}getEntitiesByNameAndLabels(e,t){return this.concreteEntities.filter(r=>r.name===e&&r.matchLabels(t))}}t.Neo4jGraphQLSchemaModel=i},54999:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Operation=void 0;let n=r(44706);class i{constructor({name:e,attributes:t=[],userResolvedAttributes:r=[],annotations:n={}}){for(let r of(this.attributes=new Map,this.userResolvedAttributes=new Map,this.name=e,this.annotations=n,t))this.addAttribute(r);for(let e of r)this.addUserResolvedAttributes(e)}findAttribute(e){return this.attributes.get(e)}findUserResolvedAttributes(e){return this.userResolvedAttributes.get(e)}addAttribute(e){if(this.attributes.has(e.name))throw new n.Neo4jGraphQLSchemaValidationError(`Attribute ${e.name} already exists in ${this.name}`);this.attributes.set(e.name,e)}addUserResolvedAttributes(e){if(this.userResolvedAttributes.has(e.name))throw new n.Neo4jGraphQLSchemaValidationError(`User Resolved Attribute ${e.name} already exists in ${this.name}`);this.userResolvedAttributes.set(e.name,e)}}t.Operation=i},49286:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationAdapter=void 0;let n=r(2364);class i{constructor(e){this.attributes=new Map,this.userResolvedAttributes=new Map,this.name=e.name,this.initAttributes(e.attributes),this.initUserResolvedAttributes(e.userResolvedAttributes),this.annotations=e.annotations}initAttributes(e){for(let[t,r]of e.entries()){let e=new n.AttributeAdapter(r);this.attributes.set(t,e)}}initUserResolvedAttributes(e){for(let[t,r]of e.entries()){let e=new n.AttributeAdapter(r);this.userResolvedAttributes.set(t,e)}}get objectFields(){return Array.from(this.attributes.values()).filter(e=>e.isObjectField())}}t.OperationAdapter=i},88990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.annotationsParsers=void 0;let n=r(40548),i=r(99654),o=r(63378),a=r(47455),s=r(53965),l=r(68572),u=r(67449),c=r(73984),p=r(21153),d=r(18400),f=r(44945),h=r(5751),y=r(17703),m=r(26994),v=r(16217),g=r(334),b=r(93904),_=r(64821),T=r(42122),E=r(33671),O=r(88843),S=r(90645),w=r(30353),I=r(89694),N=r(92958),A=r(32463);t.annotationsParsers={authentication:n.parseAuthenticationAnnotation,authorization:i.parseAuthorizationAnnotation,coalesce:o.parseCoalesceAnnotation,customResolver:a.parseCustomResolverAnnotation,cypher:s.parseCypherAnnotation,default:l.parseDefaultAnnotation,filterable:u.parseFilterableAnnotation,fulltext:c.parseFullTextAnnotation,id:()=>new w.IDAnnotation,jwtClaim:p.parseJWTClaimAnnotation,jwt:()=>new I.JWTPayloadAnnotation,key:d.parseKeyAnnotation,mutation:h.parseMutationAnnotation,plural:y.parsePluralAnnotation,populatedBy:m.parsePopulatedByAnnotation,private:()=>new N.PrivateAnnotation,query:v.parseQueryAnnotation,limit:f.parseLimitAnnotation,selectable:g.parseSelectableAnnotation,settable:b.parseSettableAnnotation,subscription:_.parseSubscriptionAnnotation,subscriptionsAuthorization:T.parseSubscriptionsAuthorizationAnnotation,timestamp:E.parseTimestampAnnotation,unique:O.parseUniqueAnnotation,relayId:()=>new A.RelayIDAnnotation,vector:S.parseVectorAnnotation}},44585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationAnnotation=void 0;class r{constructor(e,t){this.name="authentication",this.operations=new Set(e),this.jwt=t}}t.AuthenticationAnnotation=r},71744:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationValidateRule=t.AuthorizationFilterRule=t.BaseAuthorizationRule=t.AuthorizationAnnotation=t.AuthorizationValidateOperationRule=t.AuthorizationFilterOperationRule=t.AuthorizationAnnotationArguments=void 0,t.AuthorizationAnnotationArguments=["filter","validate"],t.AuthorizationFilterOperationRule=["READ","AGGREGATE","UPDATE","DELETE","CREATE_RELATIONSHIP","DELETE_RELATIONSHIP"],t.AuthorizationValidateOperationRule=["READ","AGGREGATE","CREATE","UPDATE","DELETE","CREATE_RELATIONSHIP","DELETE_RELATIONSHIP"];class r{constructor({filter:e,validate:t}){this.name="authorization",this.filter=e,this.validate=t}}t.AuthorizationAnnotation=r;class n{constructor({operations:e,requireAuthentication:t,where:r}){this.operations=e,this.requireAuthentication=t??!0,this.where=r}}t.BaseAuthorizationRule=n;class i extends n{constructor({operations:e,...r}){super({operations:e??[...t.AuthorizationFilterOperationRule],...r})}}t.AuthorizationFilterRule=i;class o extends n{constructor({operations:e,when:r,...n}){super({operations:e??[...t.AuthorizationValidateOperationRule],...n}),this.when=r??["BEFORE","AFTER"]}}t.AuthorizationValidateRule=o},94397:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoalesceAnnotation=void 0;class r{constructor({value:e}){this.name="coalesce",this.value=e}}t.CoalesceAnnotation=r},67637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomResolverAnnotation=void 0;let n=r(57343),i=r(40570),o=r(59751);class a{constructor({requires:e}){this.name="customResolver",this.requires=e}parseRequire(e,t){if(!this.requires)return;let{interfaceTypes:r,objectTypes:a,unionTypes:s}=(0,o.getDefinitionNodes)(e),l=(0,n.parse)(`{ ${this.requires} }`);this.parsedRequires=(0,i.selectionSetToResolveTree)(t||[],a,r,s,l)}}t.CustomResolverAnnotation=a},64356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CypherAnnotation=void 0;class r{constructor({statement:e,columnName:t}){this.name="cypher",this.statement=e,this.columnName=t}}t.CypherAnnotation=r},68553:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultAnnotation=void 0;class r{constructor({value:e}){this.name="default",this.value=e}}t.DefaultAnnotation=r},66153:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterableAnnotation=void 0;class r{constructor({byValue:e,byAggregate:t}){this.name="filterable",this.byValue=e,this.byAggregate=t}}t.FilterableAnnotation=r},69269:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FullTextAnnotation=void 0;class r{constructor({indexes:e}){this.name="fulltext",this.indexes=e}}t.FullTextAnnotation=r},30353:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDAnnotation=void 0;class r{constructor(){this.name="id"}}t.IDAnnotation=r},11377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JWTClaimAnnotation=void 0;class r{constructor({path:e}){this.name="jwtClaim",this.path=e}}t.JWTClaimAnnotation=r},89694:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JWTPayloadAnnotation=void 0;class r{constructor(){this.name="jwt"}}t.JWTPayloadAnnotation=r},63587:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyAnnotation=void 0;class r{constructor({resolvable:e=!0}){this.name="key",this.resolvable=e}}t.KeyAnnotation=r},2017:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LimitAnnotation=void 0;class r{constructor({default:e,max:t}){this.name="limit",this.default=e,this.max=t}}t.LimitAnnotation=r},86127:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MutationAnnotation=void 0;class r{constructor({operations:e}){this.name="mutation",this.operations=e}}t.MutationAnnotation=r},83081:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluralAnnotation=void 0;class r{constructor({value:e}){this.name="plural",this.value=e}}t.PluralAnnotation=r},67682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopulatedByAnnotation=void 0;class r{constructor({callback:e,operations:t}){this.name="populatedBy",this.callback=e,this.operations=t}}t.PopulatedByAnnotation=r},92958:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateAnnotation=void 0;class r{constructor(){this.name="private"}}t.PrivateAnnotation=r},41090:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryAnnotation=void 0;class r{constructor({read:e,aggregate:t}){this.name="query",this.read=e,this.aggregate=t}}t.QueryAnnotation=r},32463:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayIDAnnotation=void 0;class r{constructor(){this.name="relayId"}}t.RelayIDAnnotation=r},26445:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectableAnnotation=void 0;class r{constructor({onRead:e,onAggregate:t}){this.name="selectable",this.onRead=e,this.onAggregate=t}}t.SelectableAnnotation=r},46406:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettableAnnotation=void 0;class r{constructor({onCreate:e,onUpdate:t}){this.name="settable",this.onCreate=e,this.onUpdate=t}}t.SettableAnnotation=r},98905:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionAnnotation=void 0;class r{constructor({events:e}){this.name="subscription",this.events=e}}t.SubscriptionAnnotation=r},76774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionsAuthorizationFilterRule=t.SubscriptionsAuthorizationAnnotation=t.SubscriptionsAuthorizationFilterEventRule=void 0,t.SubscriptionsAuthorizationFilterEventRule=["CREATED","UPDATED","DELETED","RELATIONSHIP_CREATED","RELATIONSHIP_DELETED"];class r{constructor({filter:e}){this.name="subscriptionsAuthorization",this.filter=e}}t.SubscriptionsAuthorizationAnnotation=r;class n{constructor({events:e,requireAuthentication:r,where:n}){this.events=e??[...t.SubscriptionsAuthorizationFilterEventRule],this.requireAuthentication=void 0===r||r,this.where=n}}t.SubscriptionsAuthorizationFilterRule=n},24321:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimestampAnnotation=void 0;class r{constructor({operations:e}){this.name="timestamp",this.operations=e}}t.TimestampAnnotation=r},55907:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UniqueAnnotation=void 0;class r{constructor({constraintName:e}){this.name="unique",this.constraintName=e}}t.UniqueAnnotation=r},57581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorAnnotation=void 0;class r{constructor({indexes:e}){this.name="vector",this.indexes=e}}t.VectorAnnotation=r},42975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Argument=void 0;let n=r(95349);class i{constructor({name:e,type:t,defaultValue:r,description:i}){this.name=e,this.type=t,this.defaultValue=r?(0,n.parseValueNode)(r):void 0,this.description=i}}t.Argument=i},61518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentAdapter=void 0;let n=r(14998);class i{constructor(e){this.name=e.name,this.type=e.type,this.defaultValue=e.defaultValue,this.description=e.description,this.assertionOptions={includeLists:!0}}getTypeForAssertion(e){return e&&this.isList()?this.type.ofType:this.type}isBoolean(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.GraphQLBuiltInScalarType.Boolean}isID(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.GraphQLBuiltInScalarType.ID}isInt(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.GraphQLBuiltInScalarType.Int}isFloat(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.GraphQLBuiltInScalarType.Float}isString(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.GraphQLBuiltInScalarType.String}isCartesianPoint(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.Neo4jCartesianPointType}isPoint(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.Neo4jPointType}isBigInt(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.Neo4jGraphQLNumberType.BigInt}isDate(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.Neo4jGraphQLTemporalType.Date}isDateTime(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.Neo4jGraphQLTemporalType.DateTime}isLocalDateTime(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.Neo4jGraphQLTemporalType.LocalDateTime}isTime(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.Neo4jGraphQLTemporalType.Time}isLocalTime(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists).name===n.Neo4jGraphQLTemporalType.LocalTime}isDuration(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists).name===n.Neo4jGraphQLTemporalType.Duration}isObject(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.ObjectType}isEnum(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.EnumType}isInterface(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.InterfaceType}isUnion(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.UnionType}isList(){return this.type instanceof n.ListType}isUserScalar(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.UserScalarType}isTemporal(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists).name in n.Neo4jGraphQLTemporalType}isListElementRequired(){return this.type instanceof n.ListType&&this.type.ofType.isRequired}isRequired(){return this.type.isRequired}isGraphQLBuiltInScalar(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists).name in n.GraphQLBuiltInScalarType}isSpatial(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists).name in n.Neo4jGraphQLSpatialType}isAbstract(e=this.assertionOptions){return this.isInterface(e)||this.isUnion(e)}isScalar(e=this.assertionOptions){return this.isGraphQLBuiltInScalar(e)||this.isTemporal(e)||this.isBigInt(e)||this.isUserScalar(e)}isNumeric(e=this.assertionOptions){return this.isBigInt(e)||this.isFloat(e)||this.isInt(e)}getTypePrettyName(){return this.isList()?this.type.ofType instanceof n.ListType?`[[${this.getTypeName()}${this.isListElementRequired()?"!":""}]]${this.isRequired()?"!":""}`:`[${this.getTypeName()}${this.isListElementRequired()?"!":""}]${this.isRequired()?"!":""}`:`${this.getTypeName()}${this.isRequired()?"!":""}`}getTypeName(){if(!this.isList())return this.type.name;let e=this.type;return e.ofType instanceof n.ListType?e.ofType.ofType.name:e.ofType.name}}t.ArgumentAdapter=i},77048:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Attribute=void 0;class r{constructor({name:e,annotations:t={},type:r,args:n,databaseName:i,description:o}){this.name=e,this.annotations=t,this.type=r,this.args=n,this.databaseName=i??e,this.description=o}clone(){return new r({name:this.name,annotations:this.annotations,type:this.type,args:this.args,databaseName:this.databaseName,description:this.description})}}t.Attribute=r},14998:(e,t)=>{"use strict";var r,n,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownType=t.InputType=t.InterfaceType=t.UnionType=t.EnumType=t.ListType=t.ObjectType=t.UserScalarType=t.Neo4jPointType=t.Neo4jCartesianPointType=t.ScalarType=t.Neo4jGraphQLTemporalType=t.Neo4jGraphQLNumberType=t.Neo4jGraphQLSpatialType=t.GraphQLBuiltInScalarType=void 0,function(e){e.Int="Int",e.Float="Float",e.String="String",e.Boolean="Boolean",e.ID="ID"}(r||(t.GraphQLBuiltInScalarType=r={})),function(e){e.CartesianPoint="CartesianPoint",e.Point="Point"}(n||(t.Neo4jGraphQLSpatialType=n={})),(i||(t.Neo4jGraphQLNumberType=i={})).BigInt="BigInt",function(e){e.DateTime="DateTime",e.LocalDateTime="LocalDateTime",e.Time="Time",e.LocalTime="LocalTime",e.Date="Date",e.Duration="Duration"}(o||(t.Neo4jGraphQLTemporalType=o={}));class a{constructor(e,t){this.name=e,this.isRequired=t}}t.ScalarType=a;class s{constructor(e){this.name=n.CartesianPoint,this.isRequired=e}}t.Neo4jCartesianPointType=s;class l{constructor(e){this.name=n.Point,this.isRequired=e}}t.Neo4jPointType=l;class u{constructor(e,t){this.name=e,this.isRequired=t}}t.UserScalarType=u;class c{constructor(e,t){this.name=e,this.isRequired=t}}t.ObjectType=c;class p{constructor(e,t){this.name=`List<${e.name}>`,this.ofType=e,this.isRequired=t}}t.ListType=p;class d{constructor(e,t){this.name=e,this.isRequired=t}}t.EnumType=d;class f{constructor(e,t){this.name=e,this.isRequired=t}}t.UnionType=f;class h{constructor(e,t){this.name=e,this.isRequired=t}}t.InterfaceType=h;class y{constructor(e,t){this.name=e,this.isRequired=t}}t.InputType=y;class m{constructor(e,t){this.name=e,this.isRequired=t}}t.UnknownType=m},87072:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeTypeHelper=void 0;let n=r(14998);class i{constructor(e){this.type=e,this.assertionOptions={includeLists:!0}}getTypeForAssertion(e){return e&&this.isList()?this.type.ofType instanceof n.ListType?this.type.ofType.ofType:this.type.ofType:this.type}isBoolean(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.GraphQLBuiltInScalarType.Boolean}isID(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.GraphQLBuiltInScalarType.ID}isInt(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.GraphQLBuiltInScalarType.Int}isFloat(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.GraphQLBuiltInScalarType.Float}isString(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.GraphQLBuiltInScalarType.String}isCartesianPoint(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.Neo4jCartesianPointType}isPoint(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.Neo4jPointType}isBigInt(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.Neo4jGraphQLNumberType.BigInt}isDate(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.Neo4jGraphQLTemporalType.Date}isDateTime(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.Neo4jGraphQLTemporalType.DateTime}isLocalDateTime(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.Neo4jGraphQLTemporalType.LocalDateTime}isTime(e=this.assertionOptions){let t=this.getTypeForAssertion(e.includeLists);return t instanceof n.ScalarType&&t.name===n.Neo4jGraphQLTemporalType.Time}isLocalTime(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists).name===n.Neo4jGraphQLTemporalType.LocalTime}isDuration(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists).name===n.Neo4jGraphQLTemporalType.Duration}isObject(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.ObjectType}isEnum(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.EnumType}isInterface(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.InterfaceType}isUnion(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.UnionType}isList(){return this.type instanceof n.ListType}isInput(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.InputType}isUserScalar(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists) instanceof n.UserScalarType}isTemporal(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists).name in n.Neo4jGraphQLTemporalType}isListElementRequired(){return this.type instanceof n.ListType&&this.type.ofType.isRequired}isRequired(){return this.type.isRequired}isGraphQLBuiltInScalar(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists).name in n.GraphQLBuiltInScalarType}isSpatial(e=this.assertionOptions){return this.getTypeForAssertion(e.includeLists).name in n.Neo4jGraphQLSpatialType}isAbstract(e=this.assertionOptions){return this.isInterface(e)||this.isUnion(e)}isNumeric(e=this.assertionOptions){return this.isBigInt(e)||this.isFloat(e)||this.isInt(e)}isScalar(e=this.assertionOptions){return this.isGraphQLBuiltInScalar(e)||this.isTemporal(e)||this.isBigInt(e)||this.isUserScalar(e)||this.isInput(e)}}t.AttributeTypeHelper=i},25326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationAdapter=void 0;let n=r(58388);class i{constructor(e){if(!e.typeHelper.isScalar())throw Error("Aggregation model available only for scalar attributes");this.AttributeAdapter=e}getAggregationComparators(){return n.AGGREGATION_COMPARISON_OPERATORS.map(e=>{let t=[];return t.push(this.getAverageComparator(e)),t.push(this.getMinComparator(e)),t.push(this.getMaxComparator(e)),this.AttributeAdapter.typeHelper.isNumeric()&&t.push(this.getSumComparator(e)),t}).flat()}getAverageComparator(e){return this.AttributeAdapter.typeHelper.isString()?`${this.AttributeAdapter.name}_AVERAGE_LENGTH_${e}`:`${this.AttributeAdapter.name}_AVERAGE_${e}`}getMinComparator(e){return this.AttributeAdapter.typeHelper.isString()?`${this.AttributeAdapter.name}_SHORTEST_LENGTH_${e}`:`${this.AttributeAdapter.name}_MIN_${e}`}getMaxComparator(e){return this.AttributeAdapter.typeHelper.isString()?`${this.AttributeAdapter.name}_LONGEST_LENGTH_${e}`:`${this.AttributeAdapter.name}_MAX_${e}`}getSumComparator(e){if(!this.AttributeAdapter.typeHelper.isNumeric())throw Error("Sum aggregation is available only for numeric attributes");return`${this.AttributeAdapter.name}_SUM_${e}`}}t.AggregationAdapter=i},2364:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeAdapter=void 0;let n=r(14998),i=r(87072),o=r(25326),a=r(31726),s=r(8666);class l{constructor(e){this.name=e.name,this.type=e.type,this.args=e.args,this.annotations=e.annotations,this.databaseName=e.databaseName,this.description=e.description,this.typeHelper=new i.AttributeTypeHelper(e.type)}get listModel(){if(!this._listModel){if(!this.isArrayMethodField())return;this._listModel=new a.ListAdapter(this)}return this._listModel}get mathModel(){if(!this._mathModel){if(!this.typeHelper.isNumeric()||this.typeHelper.isList())return;this._mathModel=new s.MathAdapter(this)}return this._mathModel}get aggregationModel(){return this._aggregationModel||(this._aggregationModel=new o.AggregationAdapter(this)),this._aggregationModel}isMutable(){return(this.typeHelper.isEnum()||this.typeHelper.isAbstract()||this.typeHelper.isSpatial()||this.typeHelper.isScalar()||this.typeHelper.isObject())&&!this.isCypher()}isUnique(){return!!this.annotations.unique||!0===this.isGlobalIDAttribute()}isCypher(){return!!this.annotations.cypher}isConstrainable(){return this.typeHelper.isGraphQLBuiltInScalar()||this.typeHelper.isUserScalar()||this.typeHelper.isEnum()||this.typeHelper.isTemporal()||this.typeHelper.isSpatial()||this.typeHelper.isBigInt()}isObjectField(){return this.typeHelper.isScalar()||this.typeHelper.isEnum()||this.typeHelper.isAbstract()||this.typeHelper.isObject()||this.typeHelper.isSpatial()}isSortableField(){return!this.typeHelper.isList()&&!this.isCustomResolvable()&&(this.typeHelper.isScalar()||this.typeHelper.isEnum()||this.typeHelper.isSpatial()||this.isCypher())}isWhereField(){return(this.typeHelper.isEnum()||this.typeHelper.isSpatial()||this.typeHelper.isScalar())&&this.isFilterable()&&!this.isCustomResolvable()&&!this.isCypher()}isEventPayloadField(){return(this.typeHelper.isEnum()||this.typeHelper.isSpatial()||this.typeHelper.isScalar())&&!this.isCustomResolvable()}isSubscriptionConnectedRelationshipField(){return(this.typeHelper.isEnum()||this.typeHelper.isSpatial()||this.typeHelper.isScalar())&&!this.isCypher()}isOnCreateField(){return!(!this.isNonGeneratedField()||this.annotations.settable?.onCreate===!1||this.timestampCreateIsGenerated()||this.populatedByCreateIsGenerated())&&(this.typeHelper.isScalar()||this.typeHelper.isSpatial()||this.typeHelper.isEnum()||this.typeHelper.isAbstract())}isNumericalOrTemporal(){return this.typeHelper.isFloat()||this.typeHelper.isInt()||this.typeHelper.isBigInt()||this.typeHelper.isTemporal()}isAggregableField(){return!this.typeHelper.isList()&&(this.typeHelper.isScalar()||this.typeHelper.isEnum())&&this.isAggregable()}isAggregationWhereField(){let e=this.typeHelper.isGraphQLBuiltInScalar()&&!this.typeHelper.isBoolean(),t=this.typeHelper.isTemporal()&&!this.typeHelper.isDate();return!this.typeHelper.isList()&&(e||t||this.typeHelper.isBigInt())&&this.isAggregationFilterable()}isCreateInputField(){return this.isNonGeneratedField()&&this.annotations.settable?.onCreate!==!1&&!this.timestampCreateIsGenerated()&&!this.populatedByCreateIsGenerated()}isUpdateInputField(){return this.isNonGeneratedField()&&this.annotations.settable?.onUpdate!==!1&&!this.timestampUpdateIsGenerated()&&!this.populatedByUpdateIsGenerated()}timestampCreateIsGenerated(){return!!this.annotations.timestamp&&!!this.annotations.timestamp.operations.includes("CREATE")}populatedByCreateIsGenerated(){return!!this.annotations.populatedBy&&!!this.annotations.populatedBy.operations.includes("CREATE")}isNonGeneratedField(){return!(this.isCypher()||this.isCustomResolvable())&&!this.annotations.id&&!!(this.typeHelper.isEnum()||this.typeHelper.isScalar()||this.typeHelper.isSpatial())}timestampUpdateIsGenerated(){return!!this.annotations.timestamp&&!!this.annotations.timestamp.operations.includes("UPDATE")}populatedByUpdateIsGenerated(){return!!this.annotations.populatedBy&&!!this.annotations.populatedBy.operations.includes("UPDATE")}isArrayMethodField(){return this.typeHelper.isList()&&!this.typeHelper.isUserScalar()&&(this.typeHelper.isScalar()||this.typeHelper.isSpatial())}getDefaultValue(){return this.annotations.default?.value}isReadable(){return this.annotations.selectable?.onRead!==!1}isAggregable(){return this.annotations.selectable?.onAggregate!==!1&&!1===this.isCustomResolvable()&&!1===this.isCypher()}isAggregationFilterable(){return this.annotations.filterable?.byAggregate!==!1&&!1===this.isCustomResolvable()&&!1===this.isCypher()}isFilterable(){return this.annotations.filterable?.byValue!==!1}isCustomResolvable(){return!!this.annotations.customResolver}isGlobalIDAttribute(){return!!this.annotations.relayId}getTypePrettyName(){return this.typeHelper.isList()?this.type.ofType instanceof n.ListType?`[[${this.getTypeName()}${this.typeHelper.isListElementRequired()?"!":""}]]${this.typeHelper.isRequired()?"!":""}`:`[${this.getTypeName()}${this.typeHelper.isListElementRequired()?"!":""}]${this.typeHelper.isRequired()?"!":""}`:`${this.getTypeName()}${this.typeHelper.isRequired()?"!":""}`}getTypeName(){if(!this.typeHelper.isList())return this.type.name;let e=this.type;return e.ofType instanceof n.ListType?e.ofType.ofType.name:e.ofType.name}getFieldTypeName(){return this.typeHelper.isList()?this.type.ofType instanceof n.ListType?`[[${this.getTypeName()}]]`:`[${this.getTypeName()}]`:this.getTypeName()}getInputTypeName(){return this.typeHelper.isSpatial()?"Point"===this.getTypeName()?"PointInput":"CartesianPointInput":this.getTypeName()}getFilterableInputTypeName(){return`[${this.getInputTypeName()}${this.typeHelper.isRequired()?"!":""}]`}getInputTypeNames(){let e=this.typeHelper.isList()?`[${this.getInputTypeName()}${this.typeHelper.isListElementRequired()?"!":""}]`:this.getInputTypeName();return{where:{type:this.getInputTypeName(),pretty:e},create:{type:this.getTypeName(),pretty:`${e}${this.typeHelper.isRequired()?"!":""}`},update:{type:this.getTypeName(),pretty:e}}}getAggregateSelectionTypeName(){return`${this.getFieldTypeName()}AggregateSelection`}}t.AttributeAdapter=l},31726:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListAdapter=void 0;class r{constructor(e){if(!e.typeHelper.isList())throw Error("Attribute is not a list");this.AttributeAdapter=e}getPush(){return`${this.AttributeAdapter.name}_PUSH`}getPop(){return`${this.AttributeAdapter.name}_POP`}getIncludes(){return`${this.AttributeAdapter.name}_INCLUDES`}getNotIncludes(){return`${this.AttributeAdapter.name}_NOT_INCLUDES`}}t.ListAdapter=r},83138:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ListFiltersAdapter=void 0;let i=n(r(87180));class o{constructor(e){if(!e.isList)throw Error("Relationship field is not a list");this.relationshipAdapter=e}getAll(){return{type:`${this.relationshipAdapter.name}_ALL`,description:`Return ${(0,i.default)(this.relationshipAdapter.source.name)} where all of the related ${(0,i.default)(this.relationshipAdapter.target.name)} match this filter`}}getNone(){return{type:`${this.relationshipAdapter.name}_NONE`,description:`Return ${(0,i.default)(this.relationshipAdapter.source.name)} where none of the related ${(0,i.default)(this.relationshipAdapter.target.name)} match this filter`}}getSingle(){return{type:`${this.relationshipAdapter.name}_SINGLE`,description:`Return ${(0,i.default)(this.relationshipAdapter.source.name)} where one of the related ${(0,i.default)(this.relationshipAdapter.target.name)} match this filter`}}getSome(){return{type:`${this.relationshipAdapter.name}_SOME`,description:`Return ${(0,i.default)(this.relationshipAdapter.source.name)} where some of the related ${(0,i.default)(this.relationshipAdapter.target.name)} match this filter`}}get filters(){return[this.getAll(),this.getNone(),this.getSingle(),this.getSome()]}getConnectionAll(){return{type:`${this.relationshipAdapter.operations.connectionFieldName}_ALL`,description:`Return ${(0,i.default)(this.relationshipAdapter.source.name)} where all of the related ${(0,i.default)(this.relationshipAdapter.operations.connectionFieldTypename)} match this filter`}}getConnectionNone(){return{type:`${this.relationshipAdapter.operations.connectionFieldName}_NONE`,description:`Return ${(0,i.default)(this.relationshipAdapter.source.name)} where none of the related ${(0,i.default)(this.relationshipAdapter.operations.connectionFieldTypename)} match this filter`}}getConnectionSingle(){return{type:`${this.relationshipAdapter.operations.connectionFieldName}_SINGLE`,description:`Return ${(0,i.default)(this.relationshipAdapter.source.name)} where one of the related ${(0,i.default)(this.relationshipAdapter.operations.connectionFieldTypename)} match this filter`}}getConnectionSome(){return{type:`${this.relationshipAdapter.operations.connectionFieldName}_SOME`,description:`Return ${(0,i.default)(this.relationshipAdapter.source.name)} where some of the related ${(0,i.default)(this.relationshipAdapter.operations.connectionFieldTypename)} match this filter`}}get connectionFilters(){return[this.getConnectionAll(),this.getConnectionNone(),this.getConnectionSingle(),this.getConnectionSome()]}}t.ListFiltersAdapter=o},8666:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathAdapter=void 0;class r{constructor(e){if(!e.typeHelper.isNumeric())throw Error("Math model available only for numeric attributes");this.AttributeAdapter=e}getMathOperations(){let e=[this.getAdd(),this.getSubtract()];return this.AttributeAdapter.typeHelper.isFloat()&&e.push(this.getMultiply()),this.AttributeAdapter.typeHelper.isFloat()&&e.push(this.getDivide()),e}getAdd(){return this.AttributeAdapter.typeHelper.isInt()||this.AttributeAdapter.typeHelper.isBigInt()?`${this.AttributeAdapter.name}_INCREMENT`:`${this.AttributeAdapter.name}_ADD`}getSubtract(){return this.AttributeAdapter.typeHelper.isInt()||this.AttributeAdapter.typeHelper.isBigInt()?`${this.AttributeAdapter.name}_DECREMENT`:`${this.AttributeAdapter.name}_SUBTRACT`}getMultiply(){return`${this.AttributeAdapter.name}_MULTIPLY`}getDivide(){return`${this.AttributeAdapter.name}_DIVIDE`}}t.MathAdapter=r},33559:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConcreteEntity=void 0;let n=r(44706),i=r(41200);class o{constructor({name:e,description:t,labels:r,attributes:n=[],annotations:i={},relationships:o=[],compositeEntities:a=[]}){for(let o of(this.attributes=new Map,this.relationships=new Map,this.compositeEntities=[],this.name=e,this.description=t,this.labels=new Set(r),this.annotations=i,n))this.addAttribute(o);for(let e of o)this.addRelationship(e);for(let e of a)this.addCompositeEntities(e)}isConcreteEntity(){return!0}isCompositeEntity(){return!1}matchLabels(e){return(0,i.setsAreEqual)(new Set(e),this.labels)}addAttribute(e){if(this.attributes.has(e.name))throw new n.Neo4jGraphQLSchemaValidationError(`Attribute ${e.name} already exists in ${this.name}`);this.attributes.set(e.name,e)}addRelationship(e){if(this.relationships.has(e.name))throw new n.Neo4jGraphQLSchemaValidationError(`Attribute ${e.name} already exists in ${this.name}`);this.relationships.set(e.name,e)}addCompositeEntities(e){this.compositeEntities.push(e)}findAttribute(e){return this.attributes.get(e)}findRelationship(e){return this.relationships.get(e)}}t.ConcreteEntity=o},99030:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceEntity=void 0;let n=r(44706);class i{constructor({name:e,description:t,concreteEntities:r,attributes:n=[],annotations:i={},relationshipDeclarations:o=[]}){for(let o of(this.attributes=new Map,this.relationshipDeclarations=new Map,this.name=e,this.description=t,this.concreteEntities=r,this.annotations=i,n))this.addAttribute(o);for(let e of o)this.addRelationshipDeclaration(e)}isConcreteEntity(){return!1}isCompositeEntity(){return!0}addAttribute(e){if(this.attributes.has(e.name))throw new n.Neo4jGraphQLSchemaValidationError(`Attribute ${e.name} already exists in ${this.name}`);this.attributes.set(e.name,e)}addRelationshipDeclaration(e){if(this.relationshipDeclarations.has(e.name))throw new n.Neo4jGraphQLSchemaValidationError(`Attribute ${e.name} already exists in ${this.name}`);this.relationshipDeclarations.set(e.name,e)}findAttribute(e){return this.attributes.get(e)}}t.InterfaceEntity=i},90681:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnionEntity=void 0;class r{constructor({name:e,concreteEntities:t,annotations:r={}}){this.name=e,this.concreteEntities=t,this.annotations=r}isConcreteEntity(){return!1}isCompositeEntity(){return!0}}t.UnionEntity=r},64494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConcreteEntityAdapter=void 0;let n=r(1109),i=r(9761),o=r(8586),a=r(97845),s=r(2364),l=r(43232),u=r(64562),c=r(30988),p=r(22020);class d{constructor(e){this.attributes=new Map,this.relationships=new Map,this.compositeEntities=[],this.mutableFieldsKeys=[],this.uniqueFieldsKeys=[],this.constrainableFieldsKeys=[],this.name=e.name,this.description=e.description,this.labels=e.labels,this.annotations=e.annotations,this.initAttributes(e.attributes),this.initRelationships(e.relationships),this.description=e.description,this.compositeEntities=e.compositeEntities,this.entity=e}initAttributes(e){for(let[t,r]of e.entries()){let e=new s.AttributeAdapter(r);this.attributes.set(t,e),e.isMutable()&&this.mutableFieldsKeys.push(r.name),e.isConstrainable()&&(this.constrainableFieldsKeys.push(r.name),e.isUnique()&&this.uniqueFieldsKeys.push(r.name)),e.isGlobalIDAttribute()&&(this._globalIdField=e)}}initRelationships(e){for(let[t,r]of e.entries())this.relationships.set(t,new l.RelationshipAdapter(r,this))}findAttribute(e){return this.attributes.get(e)}get isReadable(){return void 0===this.annotations.query||!0===this.annotations.query.read}get isAggregable(){return void 0===this.annotations.query||!0===this.annotations.query.aggregate}get isCreatable(){return void 0===this.annotations.mutation||this.annotations.mutation.operations.has(i.MutationOperations.CREATE)}get isUpdatable(){return void 0===this.annotations.mutation||this.annotations.mutation.operations.has(i.MutationOperations.UPDATE)}get isDeletable(){return void 0===this.annotations.mutation||this.annotations.mutation.operations.has(i.MutationOperations.DELETE)}get isSubscribable(){return void 0===this.annotations.subscription||this.annotations.subscription.events?.size>0}get isSubscribableOnCreate(){return void 0===this.annotations.subscription||this.annotations.subscription.events.has(o.SubscriptionEvent.CREATED)}get isSubscribableOnUpdate(){return void 0===this.annotations.subscription||this.annotations.subscription.events.has(o.SubscriptionEvent.UPDATED)}get isSubscribableOnDelete(){return void 0===this.annotations.subscription||this.annotations.subscription.events.has(o.SubscriptionEvent.DELETED)}get isSubscribableOnRelationshipCreate(){return void 0===this.annotations.subscription||this.annotations.subscription.events.has(o.SubscriptionEvent.RELATIONSHIP_CREATED)}get isSubscribableOnRelationshipDelete(){return void 0===this.annotations.subscription||this.annotations.subscription.events.has(o.SubscriptionEvent.RELATIONSHIP_DELETED)}get mutableFields(){return this.mutableFieldsKeys.map(e=>(0,u.getFromMap)(this.attributes,e))}get uniqueFields(){return this.uniqueFieldsKeys.map(e=>(0,u.getFromMap)(this.attributes,e))}get constrainableFields(){return this.constrainableFieldsKeys.map(e=>(0,u.getFromMap)(this.attributes,e))}get relatedEntities(){return this._relatedEntities||(this._relatedEntities=[...this.relationships.values()].map(e=>e.target)),this._relatedEntities}get objectFields(){return Array.from(this.attributes.values()).filter(e=>e.isObjectField())}get sortableFields(){return Array.from(this.attributes.values()).filter(e=>e.isSortableField())}get whereFields(){return Array.from(this.attributes.values()).filter(e=>e.isWhereField())}get aggregableFields(){return Array.from(this.attributes.values()).filter(e=>e.isAggregableField())}get aggregationWhereFields(){return Array.from(this.attributes.values()).filter(e=>e.isAggregationWhereField())}get createInputFields(){return Array.from(this.attributes.values()).filter(e=>e.isCreateInputField())}get updateInputFields(){return Array.from(this.attributes.values()).filter(e=>e.isUpdateInputField())}get arrayMethodFields(){return Array.from(this.attributes.values()).filter(e=>e.isArrayMethodField())}get onCreateInputFields(){return Array.from(this.attributes.values()).filter(e=>e.isOnCreateField())}get temporalFields(){return Array.from(this.attributes.values()).filter(e=>e.typeHelper.isTemporal())}get subscriptionEventPayloadFields(){return Array.from(this.attributes.values()).filter(e=>e.isEventPayloadField())}findRelationship(e){return this.relationships.get(e)}getLabels(){return Array.from(this.labels)}getMainLabel(){return this.getLabels()[0]}get singular(){return this._singular||(this._singular=(0,c.singular)(this.name)),this._singular}get plural(){return this._plural||(this.annotations.plural?this._plural=(0,c.singular)(this.annotations.plural.value):this._plural=(0,c.plural)(this.name)),this._plural}get upperFirstPlural(){return(0,n.upperFirst)(this.plural)}get operations(){return this._operations?this._operations:new p.ConcreteEntityOperations(this)}get globalIdField(){return this._globalIdField}isGlobalNode(){return!!this._globalIdField}toGlobalId(e){if(!this.isGlobalNode())throw Error(`Entity ${this.name} is not a global node`);return(0,a.toGlobalId)({typeName:this.name,field:this.globalIdField.name,id:e})}}t.ConcreteEntityAdapter=d},22020:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConcreteEntityOperations=void 0;let n=r(32439),i=r(84752);class o extends i.ImplementingEntityOperations{constructor(e){super(e)}get fullTextInputTypeName(){return`${this.entityAdapter.name}Fulltext`}getFullTextIndexInputTypeName(e){return`${this.entityAdapter.name}${(0,n.upperFirst)(e)}Fulltext`}getFullTextIndexQueryFieldName(e){return`${this.entityAdapter.plural}Fulltext${(0,n.upperFirst)(e)}`}get relationshipsSubscriptionWhereInputTypeName(){return`${this.entityAdapter.name}RelationshipsSubscriptionWhere`}get relationshipCreatedSubscriptionWhereInputTypeName(){return`${this.entityAdapter.name}RelationshipCreatedSubscriptionWhere`}get relationshipDeletedSubscriptionWhereInputTypeName(){return`${this.entityAdapter.name}RelationshipDeletedSubscriptionWhere`}get connectionFieldTypename(){return`${this.pascalCasePlural}Connection`}get relationshipFieldTypename(){return`${this.entityAdapter.name}Edge`}get rootTypeFieldNames(){return{...super.rootTypeFieldNames,subscribe:{created:`${this.entityAdapter.singular}Created`,updated:`${this.entityAdapter.singular}Updated`,deleted:`${this.entityAdapter.singular}Deleted`,relationship_deleted:`${this.entityAdapter.singular}RelationshipDeleted`,relationship_created:`${this.entityAdapter.singular}RelationshipCreated`}}}get fulltextTypeNames(){return{result:`${this.pascalCaseSingular}FulltextResult`,where:`${this.pascalCaseSingular}FulltextWhere`,sort:`${this.pascalCaseSingular}FulltextSort`}}get vectorTypeNames(){return{result:`${this.pascalCaseSingular}VectorResult`,connection:`${this.pascalCasePlural}VectorConnection`,edge:`${this.pascalCaseSingular}VectorEdge`,where:`${this.pascalCaseSingular}VectorWhere`,sort:`${this.pascalCaseSingular}VectorSort`}}}t.ConcreteEntityOperations=o},84752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementingEntityOperations=void 0;let n=r(32439);class i{constructor(e){this.entityAdapter=e,this.pascalCasePlural=(0,n.upperFirst)(e.plural),this.pascalCaseSingular=(0,n.upperFirst)(e.singular)}get whereInputTypeName(){return`${this.entityAdapter.name}Where`}get uniqueWhereInputTypeName(){return`${this.entityAdapter.name}UniqueWhere`}get connectOrCreateWhereInputTypeName(){return`${this.entityAdapter.name}ConnectOrCreateWhere`}get connectWhereInputTypeName(){return`${this.entityAdapter.name}ConnectWhere`}get createInputTypeName(){return`${this.entityAdapter.name}CreateInput`}get updateInputTypeName(){return`${this.entityAdapter.name}UpdateInput`}get deleteInputTypeName(){return`${this.entityAdapter.name}DeleteInput`}get optionsInputTypeName(){return`${this.entityAdapter.name}Options`}get sortInputTypeName(){return`${this.entityAdapter.name}Sort`}get relationInputTypeName(){return`${this.entityAdapter.name}RelationInput`}get connectInputTypeName(){return`${this.entityAdapter.name}ConnectInput`}get connectOrCreateInputTypeName(){return`${this.entityAdapter.name}ConnectOrCreateInput`}get disconnectInputTypeName(){return`${this.entityAdapter.name}DisconnectInput`}get onCreateInputTypeName(){return`${this.entityAdapter.name}OnCreateInput`}get subscriptionWhereInputTypeName(){return`${this.entityAdapter.name}SubscriptionWhere`}get subscriptionEventPayloadTypeName(){return`${this.entityAdapter.name}EventPayload`}get implementationsSubscriptionWhereInputTypeName(){return`${this.entityAdapter.name}ImplementationsSubscriptionWhere`}getAggregationFieldTypename(){return this.aggregateTypeNames.selection}get rootTypeFieldNames(){return{connection:`${this.entityAdapter.plural}Connection`,create:`create${this.pascalCasePlural}`,read:this.entityAdapter.plural,update:`update${this.pascalCasePlural}`,delete:`delete${this.pascalCasePlural}`,aggregate:`${this.entityAdapter.plural}Aggregate`}}get aggregateTypeNames(){return{selection:`${this.entityAdapter.name}AggregateSelection`,input:`${this.entityAdapter.name}AggregateSelectionInput`}}get mutationResponseTypeNames(){return{create:`Create${this.pascalCasePlural}MutationResponse`,update:`Update${this.pascalCasePlural}MutationResponse`}}get subscriptionEventTypeNames(){return{create:`${this.pascalCaseSingular}CreatedEvent`,update:`${this.pascalCaseSingular}UpdatedEvent`,delete:`${this.pascalCaseSingular}DeletedEvent`,create_relationship:`${this.pascalCaseSingular}RelationshipCreatedEvent`,delete_relationship:`${this.pascalCaseSingular}RelationshipDeletedEvent`}}get subscriptionEventPayloadFieldNames(){return{create:`created${this.pascalCaseSingular}`,update:`updated${this.pascalCaseSingular}`,delete:`deleted${this.pascalCaseSingular}`,create_relationship:`${this.entityAdapter.singular}`,delete_relationship:`${this.entityAdapter.singular}`}}get updateMutationArgumentNames(){return{connect:this.connectInputTypeName,disconnect:this.disconnectInputTypeName,create:this.relationInputTypeName,update:this.updateInputTypeName,delete:this.deleteInputTypeName,connectOrCreate:this.connectOrCreateInputTypeName,where:this.whereInputTypeName}}get createMutationArgumentNames(){return{input:`[${this.createInputTypeName}!]!`}}get connectOrCreateWhereInputFieldNames(){return{node:`${this.uniqueWhereInputTypeName}!`}}}t.ImplementingEntityOperations=i},67661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceEntityAdapter=void 0;let n=r(32439),i=r(2364),o=r(87401),a=r(64562),s=r(30988),l=r(64494),u=r(16421);class c{constructor(e){this.attributes=new Map,this.relationshipDeclarations=new Map,this.uniqueFieldsKeys=[],this.name=e.name,this.concreteEntities=[],this.annotations=e.annotations,this.initAttributes(e.attributes),this.initRelationshipDeclarations(e.relationshipDeclarations),this.initConcreteEntities(e.concreteEntities)}get globalIdField(){}get operations(){return this._operations?this._operations:new u.InterfaceEntityOperations(this)}get singular(){return this._singular||(this._singular=(0,s.singular)(this.name)),this._singular}get plural(){return this._plural||(this.annotations.plural?this._plural=(0,s.singular)(this.annotations.plural.value):this._plural=(0,s.plural)(this.name)),this._plural}get upperFirstPlural(){return(0,n.upperFirst)(this.plural)}getImplementationToAliasMapWhereAliased(e){let t=[],r=e.databaseName;for(let e of this.concreteEntities){let n=e.findAttribute(r)?.databaseName;n&&n!==r&&t.push([e.getLabels(),n])}return t}get isReadable(){return void 0===this.annotations.query||!0===this.annotations.query.read}get isAggregable(){return void 0===this.annotations.query||!0===this.annotations.query.aggregate}get uniqueFields(){return this.uniqueFieldsKeys.map(e=>(0,a.getFromMap)(this.attributes,e))}get sortableFields(){return Array.from(this.attributes.values()).filter(e=>e.isSortableField())}get whereFields(){return Array.from(this.attributes.values()).filter(e=>e.isWhereField())}get aggregationWhereFields(){return Array.from(this.attributes.values()).filter(e=>e.isAggregationWhereField())}get aggregableFields(){return Array.from(this.attributes.values()).filter(e=>e.isAggregableField())}get updateInputFields(){return Array.from(this.attributes.values()).filter(e=>e.isUpdateInputField())}get subscriptionEventPayloadFields(){return Array.from(this.attributes.values()).filter(e=>!!e.isEventPayloadField()&&!this.concreteEntities.map(t=>t.findAttribute(e.name)).find(e=>e?.isCustomResolvable()))}findAttribute(e){return this.attributes.get(e)}findRelationshipDeclarations(e){return this.relationshipDeclarations.get(e)}initConcreteEntities(e){for(let t of e){let e=new l.ConcreteEntityAdapter(t);this.concreteEntities.push(e)}}initAttributes(e){for(let[t,r]of e.entries()){let e=new i.AttributeAdapter(r);this.attributes.set(t,e),e.isConstrainable()&&e.isUnique()&&this.uniqueFieldsKeys.push(r.name)}}initRelationshipDeclarations(e){for(let[t,r]of e.entries())this.relationshipDeclarations.set(t,new o.RelationshipDeclarationAdapter(r,this))}}t.InterfaceEntityAdapter=c},16421:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceEntityOperations=void 0;let n=r(1109),i=r(84752);class o extends i.ImplementingEntityOperations{constructor(e){super(e)}get implementationEnumTypename(){return`${this.entityAdapter.name}Implementation`}get implementationsSubscriptionWhereInputTypeName(){return`${this.entityAdapter.name}ImplementationsSubscriptionWhere`}get fullTextInputTypeName(){return`${this.entityAdapter.name}Fulltext`}getFullTextIndexInputTypeName(e){return`${this.entityAdapter.name}${(0,n.upperFirst)(e)}Fulltext`}get connectionFieldTypename(){return`${this.pascalCasePlural}Connection`}}t.InterfaceEntityOperations=o},54627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnionEntityAdapter=void 0;let n=r(30988),i=r(64494),o=r(59897);class a{constructor(e){this.name=e.name,this.concreteEntities=[],this.initConcreteEntities(e.concreteEntities),this.annotations=e.annotations}initConcreteEntities(e){for(let t of e){let e=new i.ConcreteEntityAdapter(t);this.concreteEntities.push(e)}}get operations(){return this._operations?this._operations:new o.UnionEntityOperations(this)}get singular(){return this._singular||(this._singular=(0,n.singular)(this.name)),this._singular}get plural(){return this._plural||(this.annotations.plural?this._plural=(0,n.singular)(this.annotations.plural.value):this._plural=(0,n.plural)(this.name)),this._plural}get isReadable(){return void 0===this.annotations.query||!0===this.annotations.query.read}}t.UnionEntityAdapter=a},59897:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnionEntityOperations=void 0;class r{constructor(e){this.unionEntityAdapter=e}get whereInputTypeName(){return`${this.unionEntityAdapter.name}Where`}get subscriptionEventPayloadTypeName(){return`${this.unionEntityAdapter.name}EventPayload`}get rootTypeFieldNames(){return{read:this.unionEntityAdapter.plural}}}t.UnionEntityOperations=r},80757:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.generateModel=void 0;let i=r(44706),o=r(33530),a=r(49450),s=n(r(78604)),l=r(14178),u=r(88760),c=r(54999),p=r(33559),d=r(99030),f=r(90681),h=r(99908),y=r(80316),m=r(16747),v=r(28006),g=r(19568),b=r(96298),_=r(14321),T=r(68956),E=r(64626);function O(e){e.forEach(e=>{e.concreteEntities.forEach(t=>t.addCompositeEntities(e))})}function S(e,t,r){return{name:e,concreteEntities:t.map(e=>{let t=r.get(e);if(!t)throw new i.Neo4jGraphQLSchemaValidationError(`Could not find concrete entity with name ${e}`);return t})}}function w(e,t){let r=e.name.value;return t.interfaceTypes.get(r)}function I(e,t,r,n){let i,o;if(!e||!e.interfaces)return{};for(let n of e.interfaces){let e=function(e,t){return(e?.fields||[]).find(e=>e.name.value===t&&e.directives?.some(e=>"declareRelationship"===e.name.value))}(w(n,r),t);e&&(i=n,o=(0,E.getInnerTypeName)(e.type))}if(!i)return{};let a={originalTarget:n.getEntity(o||""),firstDeclaredInTypeName:i.name.value},s=I(w(i,r),t,r,n);return s.firstDeclaredInTypeName?s:a}t.generateModel=function(e){let t=(0,h.getDefinitionCollection)(e),r=t.operations.reduce((e,r)=>(e[r.name.value]=function(e,t){let{attributes:r,userResolvedAttributes:n}=(e.fields||[]).map(e=>(0,v.parseAttribute)(e,t)).reduce((e,t)=>(t.annotations.cypher?e.attributes.push(t):e.userResolvedAttributes.push(t),e),{attributes:[],userResolvedAttributes:[]});return new c.Operation({name:e.name.value,attributes:r,userResolvedAttributes:n,annotations:(0,y.parseAnnotations)(e.directives||[])})}(r,t),e),{});(function(e){e.nodes.forEach(t=>{if(!t.interfaces)return;let r=t.name.value;t.interfaces?.forEach(t=>{let n=t.name.value,o=e.interfaceToImplementingTypeNamesMap.get(n);if(!o)throw new i.Neo4jGraphQLSchemaValidationError(`Could not find composite entity with name ${n}`);e.interfaceToImplementingTypeNamesMap.set(n,o.concat(r))})})})(t);let n=Array.from(t.nodes.values()).map(e=>(function(e,t){let r=(e.fields||[]).map(r=>{if(!((0,g.findDirective)(r.directives,a.privateDirective.name)||(0,g.findDirective)(r.directives,a.relationshipDirective.name)))return(0,v.parseAttribute)(r,t,e.fields)}),n=t.schemaExtension?.directives?.filter(e=>_.isInArray(o.SCHEMA_CONFIGURATION_OBJECT_DIRECTIVES,e.name.value)),i=(0,y.parseAnnotations)((e.directives||[]).concat(n||[]));return new p.ConcreteEntity({name:e.name.value,description:e.description?.value,labels:function(e){let t=(0,g.findDirective)(e.directives,a.nodeDirective.name);if(t){let e=(0,m.parseArguments)(a.nodeDirective,t);if(e.labels?.length)return e.labels}return[e.name.value]}(e),attributes:(0,l.filterTruthy)(r),annotations:i})})(e,t)),E=n.reduce((e,t)=>{if(e.has(t.name))throw new i.Neo4jGraphQLSchemaValidationError(`Duplicate node ${t.name}`);return e.set(t.name,t),e},new Map),w=Array.from(t.interfaceToImplementingTypeNamesMap.entries()).map(([e,r])=>{let n=t.interfaceTypes.get(e);if(!n)throw Error(`Cannot find interface ${e}`);return function(e,t,r,n,i){let o=S(e,r,n),s=(t.fields||[]).map(e=>{if(!((0,g.findDirective)(e.directives,a.privateDirective.name)||(0,g.findDirective)(e.directives,a.declareRelationshipDirective.name)))return(0,v.parseAttribute)(e,i,t.fields)}),u=(0,y.parseAnnotations)(t.directives||[]);return new d.InterfaceEntity({...o,description:t.description?.value,attributes:(0,l.filterTruthy)(s),annotations:u})}(e,n,r,E,t)}),N=Array.from(t.unionTypes).map(([e,t])=>(function(e,t,r,n){let i=S(e,r,n),o=(0,y.parseAnnotations)(t.directives||[]);return new f.UnionEntity({...i,annotations:o})})(e,t,t.types?.map(e=>e.name.value)||[],E)),A=(0,y.parseAnnotations)(t.schemaDirectives),C=new u.Neo4jGraphQLSchemaModel({compositeEntities:[...N,...w],concreteEntities:n,operations:r,annotations:A});return t.nodes.forEach(e=>(function(e,t,r){let n=e.name.value,i=t.getEntity(n);if(!i)throw Error(`Cannot find entity ${n}`);if(!(i instanceof p.ConcreteEntity))throw Error(`Can only add relationship to concrete entity and ${n} is not concrete.`);if(e.fields?.length)for(let n of e.fields){let{firstDeclaredInTypeName:o,originalTarget:u}=I(e,n.name.value,r,t),c=function(e,t,r,n,i,o){let u;let c=(0,s.default)(e.type),p=(0,g.findDirective)(e.directives,"relationship");if(!p)return;let d=e.name.value,f=c.name,h=t.getEntity(f);if(!h)throw Error(`Entity ${f} Not Found`);let{type:_,direction:T,properties:E,queryDirection:O,nestedOperations:S,aggregate:w}=(0,m.parseArguments)(a.relationshipDirective,p),I=[];if(E&&"string"==typeof E){let e=n.relationshipProperties.get(E);if(!e)throw Error(`The \`@relationshipProperties\` directive could not be found on the \`${E}\` interface`);u=E;let t=(e.fields||[]).map(t=>{if(!(0,g.findDirective)(t.directives,a.privateDirective.name))return(0,v.parseAttribute)(t,n,e.fields)});I=(0,l.filterTruthy)(t)}let N=(0,y.parseAnnotations)(e.directives||[]),A=(0,v.parseAttributeArguments)(e.arguments||[],n);return new b.Relationship({name:d,type:_,args:A,attributes:I,source:r,target:h,direction:T,isList:!!c.array,queryDirection:O,nestedOperations:S,aggregate:w,isNullable:!c.required,description:e.description?.value,annotations:N,propertiesTypeName:u,firstDeclaredInTypeName:i,originalTarget:o})}(n,t,i,r,o,u);c&&i.addRelationship(c)}})(e,C,t)),t.interfaceTypes.forEach(e=>(function(e,t,r){let n=e.name.value,i=t.getEntity(n);if(!i)throw Error(`Cannot find entity ${n}`);if(!(i instanceof d.InterfaceEntity))throw Error(`Can only declare relationships on Interface entities and ${n} is not an Interface.`);if(e.fields?.length)for(let n of e.fields){let{firstDeclaredInTypeName:o}=I(e,n.name.value,r,t),u=function(e,t,r,n,i){let o=(0,s.default)(e.type),l=(0,g.findDirective)(e.directives,"declareRelationship");if(!l)return;let u=e.name.value,c=o.name,p=t.getEntity(c);if(!p)throw Error(`Entity ${c} Not Found`);let{nestedOperations:d,aggregate:f}=(0,m.parseArguments)(a.declareRelationshipDirective,l),h=(0,y.parseAnnotations)(e.directives||[]),b=r.concreteEntities.map(e=>e.findRelationship(u)).filter(e=>e);return new T.RelationshipDeclaration({name:u,source:r,target:p,isList:!!o.array,nestedOperations:d,aggregate:f,isNullable:!o.required,description:e.description?.value,args:(0,v.parseAttributeArguments)(e.arguments||[],n),annotations:h,relationshipImplementations:b,firstDeclaredInTypeName:i})}(n,t,i,r,o);if(u){i.addRelationshipDeclaration(u);let e=(0,l.filterTruthy)(u.relationshipImplementations.map(e=>e.propertiesTypeName));for(let t of u.relationshipImplementations)t.setSiblings(e)}}})(e,C,t)),O(w),O(N),C}},33530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEMA_CONFIGURATION_OBJECT_DIRECTIVES=t.FIELD_DIRECTIVES=t.SCHEMA_CONFIGURATION_FIELD_DIRECTIVES=t.LIBRARY_DIRECTIVES=void 0;let n=r(88990),i=r(58388),o=["alias","relationship","relationshipProperties","declareRelationship","node",i.SHAREABLE];t.LIBRARY_DIRECTIVES=[...Object.keys(n.annotationsParsers).filter(e=>"key"!==e),...o],t.SCHEMA_CONFIGURATION_FIELD_DIRECTIVES=["filterable","selectable","settable"],t.FIELD_DIRECTIVES=["alias","authentication","authorization","coalesce","customResolver","cypher","default","id","jwtClaim","populatedBy","relationship","relayId","subscriptionsAuthorization","timestamp","unique","declareRelationship",...t.SCHEMA_CONFIGURATION_FIELD_DIRECTIVES],t.SCHEMA_CONFIGURATION_OBJECT_DIRECTIVES=["query","mutation","subscription"],[i.SHAREABLE,...t.SCHEMA_CONFIGURATION_OBJECT_DIRECTIVES]},40548:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAuthenticationAnnotation=void 0;let n=r(44585),i=r(16747),o=["READ","AGGREGATE","CREATE","UPDATE","DELETE","CREATE_RELATIONSHIP","DELETE_RELATIONSHIP","SUBSCRIBE"];t.parseAuthenticationAnnotation=function(e){let t=(0,i.parseArgumentsFromUnknownDirective)(e),r=[t.operations||o];return t.jwt&&r.push(t.jwt),new n.AuthenticationAnnotation(...r)}},99654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAuthorizationAnnotation=void 0;let n=r(14178),i=r(71744),o=r(16747);t.parseAuthorizationAnnotation=function(e){let{filter:t,validate:r}=(0,o.parseArgumentsFromUnknownDirective)(e),a=t?.map(e=>new i.AuthorizationFilterRule(e)),s=(0,n.asArray)(r).map(e=>new i.AuthorizationValidateRule(e));return new i.AuthorizationAnnotation({filter:a,validate:s})}},63378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCoalesceAnnotation=void 0;let n=r(94397),i=r(16747);t.parseCoalesceAnnotation=function(e){let t=(0,i.parseArgumentsFromUnknownDirective)(e);if(!t||void 0===t.value)throw Error("@coalesce directive must have a value");return new n.CoalesceAnnotation({value:t.value})}},47455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCustomResolverAnnotation=void 0;let n=r(49450),i=r(67637),o=r(16747);t.parseCustomResolverAnnotation=function(e){let{requires:t}=(0,o.parseArguments)(n.customResolverDirective,e);return new i.CustomResolverAnnotation({requires:t})}},53965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCypherAnnotation=void 0;let n=r(44706),i=r(64356),o=r(16747),a=r(49450);t.parseCypherAnnotation=function(e){let{statement:t,columnName:r}=(0,o.parseArguments)(a.cypherDirective,e);if(!t||"string"!=typeof t)throw new n.Neo4jGraphQLSchemaValidationError("@cypher statement required");if(!r||"string"!=typeof r)throw new n.Neo4jGraphQLSchemaValidationError("@cypher columnName required");return new i.CypherAnnotation({statement:t,columnName:r})}},68572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDefaultAnnotation=void 0;let n=r(68553),i=r(16747);t.parseDefaultAnnotation=function(e){let t=(0,i.parseArgumentsFromUnknownDirective)(e);if(void 0===t.value)throw Error("@default directive must have a value");return new n.DefaultAnnotation({value:t.value})}},67449:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFilterableAnnotation=void 0;let n=r(49450),i=r(66153),o=r(16747);t.parseFilterableAnnotation=function(e){let{byValue:t,byAggregate:r}=(0,o.parseArguments)(n.filterableDirective,e);return new i.FilterableAnnotation({byAggregate:r,byValue:t})}},73984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFullTextAnnotation=void 0;let n=r(49450),i=r(69269),o=r(16747);t.parseFullTextAnnotation=function(e){let{indexes:t}=(0,o.parseArguments)(n.fulltextDirective,e);return new i.FullTextAnnotation({indexes:t})}},21153:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseJWTClaimAnnotation=void 0;let n=r(49450),i=r(11377),o=r(16747);t.parseJWTClaimAnnotation=function(e){let{path:t}=(0,o.parseArguments)(n.jwtClaim,e);return new i.JWTClaimAnnotation({path:t})}},18400:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyAnnotation=void 0;let n=r(44706),i=r(63587),o=r(16747);t.parseKeyAnnotation=function(e,t){let r=!1;return t.forEach(e=>{let{fields:t,resolvable:i,...a}=(0,o.parseArgumentsFromUnknownDirective)(e);if(Object.keys(a).length)throw new n.Neo4jGraphQLSchemaValidationError(`@key unrecognized arguments: ${Object.keys(a).join(", ")}`);r=r||i}),new i.KeyAnnotation({resolvable:r})}},44945:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseLimitAnnotation=void 0;let n=r(44706),i=r(49450),o=r(2017),a=r(16747);t.parseLimitAnnotation=function(e){let{default:t,max:r}=(0,a.parseArguments)(i.limitDirective,e);if(t&&"number"!=typeof t)throw new n.Neo4jGraphQLSchemaValidationError("@limit default must be a number");if(r&&"number"!=typeof r)throw new n.Neo4jGraphQLSchemaValidationError("@limit max must be a number");return new o.LimitAnnotation({default:t,max:r})}},5751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMutationAnnotation=void 0;let n=r(44706),i=r(86127),o=r(49450),a=r(16747);t.parseMutationAnnotation=function(e){let{operations:t}=(0,a.parseArguments)(o.mutationDirective,e);if(!Array.isArray(t))throw new n.Neo4jGraphQLSchemaValidationError("@mutation operations must be an array");return new i.MutationAnnotation({operations:new Set(t)})}},17703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePluralAnnotation=void 0;let n=r(49450),i=r(83081),o=r(16747);t.parsePluralAnnotation=function(e){let{value:t}=(0,o.parseArguments)(n.pluralDirective,e);return new i.PluralAnnotation({value:t})}},26994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePopulatedByAnnotation=void 0;let n=r(49450),i=r(67682),o=r(16747);t.parsePopulatedByAnnotation=function(e){let{callback:t,operations:r}=(0,o.parseArguments)(n.populatedByDirective,e);return new i.PopulatedByAnnotation({callback:t,operations:r})}},16217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseQueryAnnotation=void 0;let n=r(49450),i=r(41090),o=r(16747);t.parseQueryAnnotation=function(e){let{read:t,aggregate:r}=(0,o.parseArguments)(n.queryDirective,e);return new i.QueryAnnotation({read:t,aggregate:r})}},334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelectableAnnotation=void 0;let n=r(49450),i=r(26445),o=r(16747);t.parseSelectableAnnotation=function(e){let{onRead:t,onAggregate:r}=(0,o.parseArguments)(n.selectableDirective,e);return new i.SelectableAnnotation({onRead:t,onAggregate:r})}},93904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSettableAnnotation=void 0;let n=r(49450),i=r(46406),o=r(16747);t.parseSettableAnnotation=function(e){let{onCreate:t,onUpdate:r}=(0,o.parseArguments)(n.settableDirective,e);return new i.SettableAnnotation({onCreate:t,onUpdate:r})}},64821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSubscriptionAnnotation=void 0;let n=r(49450),i=r(98905),o=r(16747);t.parseSubscriptionAnnotation=function(e){let{events:t}=(0,o.parseArguments)(n.subscriptionDirective,e);return new i.SubscriptionAnnotation({events:new Set(t)})}},42122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSubscriptionsAuthorizationAnnotation=void 0;let n=r(16747),i=r(76774);t.parseSubscriptionsAuthorizationAnnotation=function(e){let{filter:t}=(0,n.parseArgumentsFromUnknownDirective)(e),r=t?.map(e=>new i.SubscriptionsAuthorizationFilterRule(e));return new i.SubscriptionsAuthorizationAnnotation({filter:r})}},33671:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTimestampAnnotation=void 0;let n=r(49450),i=r(24321),o=r(16747);t.parseTimestampAnnotation=function(e){let{operations:t}=(0,o.parseArguments)(n.timestampDirective,e);return 0===t.length&&t.push("CREATE","UPDATE"),new i.TimestampAnnotation({operations:t})}},88843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUniqueAnnotation=void 0;let n=r(49450),i=r(55907),o=r(16747);t.parseUniqueAnnotation=function(e){let{constraintName:t}=(0,o.parseArguments)(n.uniqueDirective,e);return new i.UniqueAnnotation({constraintName:t})}},90645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseVectorAnnotation=void 0;let n=r(49450),i=r(57581),o=r(16747);t.parseVectorAnnotation=function(e){let{indexes:t}=(0,o.parseArguments)(n.vectorDirective,e);return new i.VectorAnnotation({indexes:t})}},99908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefinitionCollection=void 0;let n=r(57343),i=r(49450),o=r(99227),a=r(19568);t.getDefinitionCollection=function(e){return e.definitions.reduce((e,t)=>{switch(t.kind){case n.Kind.SCALAR_TYPE_DEFINITION:e.scalarTypes.set(t.name.value,t);break;case n.Kind.OBJECT_TYPE_DEFINITION:(0,a.findDirective)(t.directives,i.relationshipPropertiesDirective.name)?e.relationshipProperties.set(t.name.value,t):(0,a.findDirective)(t.directives,i.jwt.name)?e.jwtPayload=t:(0,o.isRootType)(t)?e.operations.push(t):e.nodes.set(t.name.value,t);break;case n.Kind.ENUM_TYPE_DEFINITION:e.enumTypes.set(t.name.value,t);break;case n.Kind.INTERFACE_TYPE_DEFINITION:e.interfaceTypes.set(t.name.value,t),e.interfaceToImplementingTypeNamesMap.set(t.name.value,[]);break;case n.Kind.DIRECTIVE_DEFINITION:e.directives.set(t.name.value,t);break;case n.Kind.UNION_TYPE_DEFINITION:e.unionTypes.set(t.name.value,t);break;case n.Kind.INPUT_OBJECT_TYPE_DEFINITION:e.inputTypes.set(t.name.value,t);break;case n.Kind.SCHEMA_EXTENSION:e.schemaExtension=t,e.schemaDirectives=t.directives?Array.from(t.directives):[]}return e},{nodes:new Map,enumTypes:new Map,scalarTypes:new Map,interfaceTypes:new Map,directives:new Map,unionTypes:new Map,relationshipProperties:new Map,inputTypes:new Map,schemaExtension:void 0,jwtPayload:void 0,interfaceToImplementingTypeNamesMap:new Map,operations:[],schemaDirectives:[],document:e})}},80316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAnnotations=void 0;let n=r(88990);t.parseAnnotations=function(e){let t=new Map;for(let r of e){let e=t.get(r.name.value)??[];t.set(r.name.value,[...e,r])}let r={};for(let[e,i]of Object.entries(n.annotationsParsers)){let n=t.get(e)??[],o=n[0];o&&(r[e]=i(o,n))}return r}},16747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseArguments=t.parseArgumentsFromUnknownDirective=void 0;let n=r(14364),i=r(57343),o=r(95349);t.parseArgumentsFromUnknownDirective=function(e){return(e.arguments||[])?.reduce((e,t)=>(e[t.name.value]=o.parseValueNode(t.value),e),{})},t.parseArguments=function(e,t,r){let o={},a=new Map((t.arguments??[]).map(e=>[e.name.value,e]));for(let t of e.args){let e=t.name,s=t.type,l=a.get(e);if(null==l){if(void 0!==t.defaultValue)o[e]=t.defaultValue;else if((0,i.isNonNullType)(s))throw Error(`Argument "${e}" of required type "${(0,n.inspect)(s)}" was not provided.`);continue}let u=l.value,c=u.kind===i.Kind.NULL;if(u.kind===i.Kind.VARIABLE){let a=u.name.value;if(null==r||!Object.prototype.hasOwnProperty.call(r,a)){if(void 0!==t.defaultValue)o[e]=t.defaultValue;else if((0,i.isNonNullType)(s))throw Error(`Argument "${e}" of required type "${(0,n.inspect)(s)}" was provided the variable "$${a}" which was not provided a runtime value.`);continue}c=null==r[a]}if(c&&(0,i.isNonNullType)(s))throw Error(`Argument "${e}" of non-null type "${(0,n.inspect)(s)}" must not be null.`);let p=(0,i.valueFromAST)(u,s,r);if(void 0===p)throw Error(`Argument "${e}" has invalid value ${(0,i.print)(u)}.`);o[e]=p}return o}},28006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScalarType=t.isNeo4jGraphQLSpatialType=t.isObject=t.isUserScalar=t.isEnum=t.parseAttribute=t.parseAttributeArguments=void 0;let n=r(57343),i=r(49450),o=r(42975),a=r(77048),s=r(14998),l=r(80316),u=r(16747),c=r(19568);function p(e,t){return e.map(e=>new o.Argument({name:e.name.value,type:d(t,e.type),defaultValue:e.defaultValue,description:e.description?.value}))}function d(e,t,r=!1){switch(t.kind){case n.Kind.NAMED_TYPE:var i,o,a,l,u;if(v(t.name.value))return new s.ScalarType(t.name.value,r);if(m(i=t.name.value)&&i===s.Neo4jGraphQLSpatialType.Point)return new s.Neo4jPointType(r);if(m(o=t.name.value)&&o===s.Neo4jGraphQLSpatialType.CartesianPoint)return new s.Neo4jCartesianPointType(r);if(f(e,t.name.value))return new s.EnumType(t.name.value,r);if(h(e,t.name.value))return new s.UserScalarType(t.name.value,r);if(y(e,t.name.value))return new s.ObjectType(t.name.value,r);if(a=t.name.value,e.unionTypes.has(a))return new s.UnionType(t.name.value,r);if(l=t.name.value,e.interfaceTypes.has(l))return new s.InterfaceType(t.name.value,r);if(u=t.name.value,e.inputTypes.has(u))return new s.InputType(t.name.value,r);return new s.UnknownType(t.name.value,r);case n.Kind.LIST_TYPE:{let n=d(e,t.type);return new s.ListType(n,r)}case n.Kind.NON_NULL_TYPE:return d(e,t.type,!0)}}function f(e,t){return e.enumTypes.has(t)}function h(e,t){return e.scalarTypes.has(t)}function y(e,t){return e.nodes.has(t)}function m(e){return Object.values(s.Neo4jGraphQLSpatialType).includes(e)}function v(e){return Object.values(s.GraphQLBuiltInScalarType).includes(e)||Object.values(s.Neo4jGraphQLNumberType).includes(e)||Object.values(s.Neo4jGraphQLTemporalType).includes(e)}t.parseAttributeArguments=p,t.parseAttribute=function(e,t,r){let n=e.name.value,o=d(t,e.type),s=p(e.arguments||[],t),f=(0,l.parseAnnotations)(e.directives||[]);f.customResolver?.parseRequire(t.document,r);let h=function(e){let t=(0,c.findDirective)(e.directives,i.aliasDirective.name);if(t){let{property:e}=(0,u.parseArguments)(i.aliasDirective,t);return e}}(e);return new a.Attribute({name:n,annotations:f,type:o,args:s,databaseName:h,description:e.description?.value})},t.isEnum=f,t.isUserScalar=h,t.isObject=y,t.isNeo4jGraphQLSpatialType=m,t.isScalarType=v},95349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseValueNode=void 0;let n=r(36548);t.parseValueNode=function e(t){switch(t.kind){case n.Kind.ENUM:case n.Kind.STRING:case n.Kind.BOOLEAN:return t.value;case n.Kind.INT:case n.Kind.FLOAT:return Number(t.value);case n.Kind.NULL:return null;case n.Kind.LIST:return t.values.map(e);case n.Kind.OBJECT:return t.fields.reduce((t,r)=>(t[r.name.value]=e(r.value),t),{});default:throw Error(`invalid Kind: ${t.kind}`)}}},19568:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findDirective=void 0,t.findDirective=function(e=[],t){return e.find(e=>e.name.value===t)}},96298:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Relationship=void 0;let n=r(44706),i=r(32439);class o{constructor({name:e,type:t,args:r,attributes:n=[],source:i,target:o,direction:a,isList:s,queryDirection:l,nestedOperations:u,aggregate:c,isNullable:p,description:d,annotations:f={},propertiesTypeName:h,firstDeclaredInTypeName:y,originalTarget:m,siblings:v}){for(let v of(this.attributes=new Map,this.type=t,this.source=i,this.target=o,this.name=e,this.args=r,this.direction=a,this.isList=s,this.queryDirection=l,this.nestedOperations=u,this.aggregate=c,this.isNullable=p,this.description=d,this.annotations=f,this.propertiesTypeName=h,this.firstDeclaredInTypeName=y,this.originalTarget=m,n))this.addAttribute(v);v&&this.setSiblings(v)}clone(){return new o({name:this.name,type:this.type,args:this.args,attributes:Array.from(this.attributes.values()).map(e=>e.clone()),source:this.source,target:this.target,direction:this.direction,isList:this.isList,queryDirection:this.queryDirection,nestedOperations:this.nestedOperations,aggregate:this.aggregate,isNullable:this.isNullable,description:this.description,annotations:this.annotations,propertiesTypeName:this.propertiesTypeName,firstDeclaredInTypeName:this.firstDeclaredInTypeName,originalTarget:this.originalTarget,siblings:this.siblings})}addAttribute(e){if(this.attributes.has(e.name))throw new n.Neo4jGraphQLSchemaValidationError(`Attribute ${e.name} already exists in ${this.name}.`);this.attributes.set(e.name,e)}findAttribute(e){return this.attributes.get(e)}setSiblings(e){this.siblings=e}getSiblings(){return this.siblings}get connectionFieldTypename(){return`${this.source.name}${(0,i.upperFirst)(this.name)}Connection`}get relationshipFieldTypename(){return`${this.source.name}${(0,i.upperFirst)(this.name)}Relationship`}}t.Relationship=o},68956:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipDeclaration=void 0;class r{constructor({name:e,args:t,source:r,target:n,isList:i,nestedOperations:o,aggregate:a,isNullable:s,description:l,annotations:u={},relationshipImplementations:c,firstDeclaredInTypeName:p}){this.name=e,this.source=r,this.target=n,this.args=t,this.isList=i,this.nestedOperations=o,this.aggregate=a,this.isNullable=s,this.description=l,this.annotations=u,this.relationshipImplementations=c,this.firstDeclaredInTypeName=p}clone(){return new r({name:this.name,args:this.args,source:this.source,target:this.target,isList:this.isList,nestedOperations:this.nestedOperations,aggregate:this.aggregate,isNullable:this.isNullable,description:this.description,annotations:this.annotations,relationshipImplementations:this.relationshipImplementations,firstDeclaredInTypeName:this.firstDeclaredInTypeName})}}t.RelationshipDeclaration=r},43232:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipAdapter=void 0;let i=r(65106),o=r(58388),a=r(2364),s=r(83138),l=r(64494),u=r(67661),c=r(54627),p=r(62437),d=r(30988),f=r(83950);class h{constructor(e,t){this.attributes=new Map;let{name:r,type:n,args:i,attributes:o=new Map,source:a,target:s,direction:l,isList:u,queryDirection:c,nestedOperations:d,aggregate:f,isNullable:h,description:y,annotations:m,propertiesTypeName:v,firstDeclaredInTypeName:g,originalTarget:b}=e;this.name=r,this.type=n,this.args=i,t?this.source=t:this.source=(0,p.getEntityAdapter)(a),this.direction=l,this.isList=u,this.queryDirection=c,this.nestedOperations=new Set(d),this.aggregate=f,this.isNullable=h,this.rawEntity=s,this.initAttributes(o),this.description=y,this.annotations=m,this.propertiesTypeName=v,this.firstDeclaredInTypeName=g,this.rawOriginalTargetEntity=b,e.getSiblings()&&(this.siblings=e.getSiblings())}get operations(){return this._operations?this._operations:new f.RelationshipOperations(this)}get listFiltersModel(){if(!this._listFiltersModel){if(!this.isList)return;this._listFiltersModel=new s.ListFiltersAdapter(this)}return this._listFiltersModel}get singular(){return this._singular||(this._singular=(0,d.singular)(this.name)),this._singular}get plural(){return this._plural||(this._plural=(0,d.plural)(this.name)),this._plural}initAttributes(e){for(let[t,r]of e.entries()){let e=new a.AttributeAdapter(r);this.attributes.set(t,e)}}findAttribute(e){return this.attributes.get(e)}getCypherDirection(e){switch(this.queryDirection){case"DIRECTED_ONLY":return this.cypherDirectionFromRelDirection();case"UNDIRECTED_ONLY":return"undirected";case"DEFAULT_DIRECTED":if(!1===e)return"undirected";return this.cypherDirectionFromRelDirection();case"DEFAULT_UNDIRECTED":if(!0===e)return this.cypherDirectionFromRelDirection();return"undirected"}}cypherDirectionFromRelDirection(){return"IN"===this.direction?"left":"right"}get target(){return this._target||(this._target=(0,p.getEntityAdapter)(this.rawEntity)),this._target}get originalTarget(){if(this.rawOriginalTargetEntity)return(0,p.getEntityAdapter)(this.rawOriginalTargetEntity)}isReadable(){return this.annotations.selectable?.onRead!==!1}isFilterableByValue(){return this.annotations.filterable?.byValue!==!1}isFilterableByAggregate(){return this.annotations.filterable?.byAggregate!==!1}isAggregable(){return this.annotations.selectable?.onAggregate!==!1}isCreatable(){return this.annotations.settable?.onCreate!==!1}isUpdatable(){return this.annotations.settable?.onUpdate!==!1}shouldGenerateFieldInputType(e){let t=this.target;return e&&(t=e),this.nestedOperations.has(o.RelationshipNestedOperationsOption.CONNECT)||this.nestedOperations.has(o.RelationshipNestedOperationsOption.CREATE)||this.nestedOperations.has(o.RelationshipNestedOperationsOption.CONNECT_OR_CREATE)&&t instanceof l.ConcreteEntityAdapter&&t.uniqueFields.length>0}shouldGenerateUpdateFieldInputType(e){let t=1===this.nestedOperations.size&&this.nestedOperations.has(o.RelationshipNestedOperationsOption.CONNECT_OR_CREATE);if(this.target instanceof u.InterfaceEntityAdapter)return this.nestedOperations.size>0&&!t;if(this.target instanceof c.UnionEntityAdapter){if(!e)throw Error("Expected member entity");let r=t&&!e.uniqueFields.length;return this.nestedOperations.size>0&&!r}let r=t&&!this.target.uniqueFields.length;return this.nestedOperations.size>0&&!r}get hasNonNullCreateInputFields(){return this.createInputFields.some(e=>e.typeHelper.isRequired())}get hasCreateInputFields(){return this.createInputFields.length>0}get hasUpdateInputFields(){return this.updateInputFields.length>0}get hasAnyProperties(){return void 0!==this.propertiesTypeName}get aggregableFields(){return Array.from(this.attributes.values()).filter(e=>e.isAggregableField())}get aggregationWhereFields(){return Array.from(this.attributes.values()).filter(e=>e.isAggregationWhereField())}get createInputFields(){return Array.from(this.attributes.values()).filter(e=>e.isCreateInputField())}get updateInputFields(){return Array.from(this.attributes.values()).filter(e=>e.isUpdateInputField())}get sortableFields(){return Array.from(this.attributes.values()).filter(e=>e.isSortableField())}get whereFields(){return Array.from(this.attributes.values()).filter(e=>e.isWhereField())}get temporalFields(){return Array.from(this.attributes.values()).filter(e=>e.typeHelper.isTemporal())}get subscriptionConnectedRelationshipFields(){return Array.from(this.attributes.values()).filter(e=>e.isSubscriptionConnectedRelationshipField())}}t.RelationshipAdapter=h,n([(0,i.Memoize)()],h.prototype,"target",null),n([(0,i.Memoize)()],h.prototype,"originalTarget",null)},99842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipBaseOperations=void 0;let n=r(32439),i=r(42447);class o{constructor(e){this.relationship=e}get prefixForTypename(){return`${this.relationship.source.name}${(0,n.upperFirst)(this.relationship.name)}`}get prefixForTypenameWithInheritance(){let e=this.relationship.firstDeclaredInTypeName||this.relationship.source.name;return`${e}${(0,n.upperFirst)(this.relationship.name)}`}getAggregationFieldTypename(e){let t=(0,n.upperFirst)(e||""),r=e?"Aggregate":"Aggregation";return`${this.relationship.source.name}${this.relationship.target.name}${(0,n.upperFirst)(this.relationship.name)}${t}${r}Selection`}getTargetTypePrettyName(){return this.relationship.isList?`[${this.relationship.target.name}!]${this.relationship.isNullable?"":"!"}`:`${this.relationship.target.name}${this.relationship.isNullable?"":"!"}`}getFieldInputTypeName(e){return`${this.prefixForTypename}${e?.name||""}FieldInput`}getConnectionUnionWhereInputTypename(e){return`${this.prefixForTypenameWithInheritance}${e.name}ConnectionWhere`}get connectionFieldTypename(){return`${this.prefixForTypenameWithInheritance}Connection`}get connectionSortInputTypename(){return`${this.connectionFieldTypename}Sort`}get connectionWhereInputTypename(){return`${this.connectionFieldTypename}Where`}get relationshipFieldTypename(){return`${this.prefixForTypenameWithInheritance}Relationship`}getUpdateFieldInputTypeName(e){return`${this.prefixForTypename}${e?.name||""}UpdateFieldInput`}getCreateFieldInputTypeName(e){return`${this.prefixForTypename}${e?.name||""}CreateFieldInput`}getDeleteFieldInputTypeName(e){return`${this.fieldInputPrefixForTypename}${(0,n.upperFirst)(this.relationship.name)}${e?.name||""}DeleteFieldInput`}getConnectFieldInputTypeName(e){return`${this.prefixForTypename}${e?.name||""}ConnectFieldInput`}getDisconnectFieldInputTypeName(e){return`${this.fieldInputPrefixForTypename}${(0,n.upperFirst)(this.relationship.name)}${e?.name||""}DisconnectFieldInput`}getConnectOrCreateInputTypeName(){return`${this.prefixForTypename}ConnectOrCreateInput`}getConnectOrCreateFieldInputTypeName(e){if((0,i.isUnionEntity)(this.relationship.target)){if(!e)throw Error("missing concreteTargetEntityAdapter");return`${this.prefixForTypename}${e.name}ConnectOrCreateFieldInput`}return`${this.prefixForTypename}ConnectOrCreateFieldInput`}getConnectOrCreateOnCreateFieldInputTypeName(e){return`${this.getConnectOrCreateFieldInputTypeName(e)}OnCreate`}get connectionFieldName(){return`${this.relationship.name}Connection`}getConnectionWhereTypename(e){return`${this.prefixForTypenameWithInheritance}${e?.name||""}ConnectionWhere`}getUpdateConnectionInputTypename(e){return`${this.prefixForTypename}${e?.name||""}UpdateConnectionInput`}get aggregateInputTypeName(){return`${this.prefixForTypename}AggregateInput`}get aggregateTypeName(){return`${this.relationship.name}Aggregate`}get nodeAggregationWhereInputTypeName(){return`${this.prefixForTypename}NodeAggregationWhereInput`}get unionConnectInputTypeName(){return`${(0,n.upperFirst)(this.prefixForTypename)}ConnectInput`}get unionDeleteInputTypeName(){return`${(0,n.upperFirst)(this.prefixForTypename)}DeleteInput`}get unionDisconnectInputTypeName(){return`${(0,n.upperFirst)(this.prefixForTypename)}DisconnectInput`}get unionCreateInputTypeName(){return`${(0,n.upperFirst)(this.prefixForTypename)}CreateInput`}get unionCreateFieldInputTypeName(){return`${(0,n.upperFirst)(this.prefixForTypename)}CreateFieldInput`}get unionUpdateInputTypeName(){return`${(0,n.upperFirst)(this.prefixForTypename)}UpdateInput`}getToUnionUpdateInputTypeName(e){return`${this.prefixForTypename}${e.name}UpdateInput`}get edgeCreateInputTypeName(){let e=this.relationship.hasNonNullCreateInputFields;return`${this.edgePrefix}CreateInput${e?"!":""}`}get createInputTypeName(){return`${this.edgePrefix}CreateInput`}get edgeUpdateInputTypeName(){return`${this.edgePrefix}UpdateInput`}get whereInputTypeName(){return`${this.edgePrefix}Where`}get sortInputTypeName(){return`${this.edgePrefix}Sort`}get edgeAggregationWhereInputTypeName(){return`${this.edgePrefix}AggregationWhereInput`}getConnectOrCreateInputFields(e){return{where:`${e.operations.connectOrCreateWhereInputTypeName}!`,onCreate:`${this.getConnectOrCreateOnCreateFieldInputTypeName(e)}!`}}}t.RelationshipBaseOperations=o},87401:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipDeclarationAdapter=void 0;let n=r(58388),i=r(83138),o=r(64494),a=r(67661),s=r(54627),l=r(62437),u=r(30988),c=r(43232),p=r(81623);class d{constructor(e,t){let{name:r,args:n,source:i,target:o,isList:a,nestedOperations:s,aggregate:u,isNullable:p,description:d,annotations:f,firstDeclaredInTypeName:h}=e;this.name=r,this.args=n,t?this.source=t:this.source=(0,l.getEntityAdapter)(i),this.isList=a,this.nestedOperations=new Set(s),this.aggregate=u,this.isNullable=p,this.rawEntity=o,this.description=d,this.annotations=f,this.relationshipImplementations=e.relationshipImplementations.map(e=>new c.RelationshipAdapter(e)),this.firstDeclaredInTypeName=h}get listFiltersModel(){if(!this._listFiltersModel){if(!this.isList)return;this._listFiltersModel=new i.ListFiltersAdapter(this)}return this._listFiltersModel}get operations(){return this._operations?this._operations:new p.RelationshipDeclarationOperations(this)}get singular(){return this._singular||(this._singular=(0,u.singular)(this.name)),this._singular}get plural(){return this._plural||(this._plural=(0,u.plural)(this.name)),this._plural}get target(){return this._target||(this._target=(0,l.getEntityAdapter)(this.rawEntity)),this._target}get nonGeneratedProperties(){return this.relationshipImplementations.flatMap(e=>Array.from(e.attributes.values()).filter(e=>e.isNonGeneratedField()))}get hasNonNullNonGeneratedProperties(){return this.nonGeneratedProperties.some(e=>e.typeHelper.isRequired())}get hasAnyProperties(){return!!this.relationshipImplementations.find(e=>e.hasAnyProperties)}get hasCreateInputFields(){return!!this.relationshipImplementations.find(e=>e.hasCreateInputFields)}get hasUpdateInputFields(){return!!this.relationshipImplementations.find(e=>e.hasUpdateInputFields)}get hasNonNullCreateInputFields(){return!!this.relationshipImplementations.find(e=>e.hasNonNullCreateInputFields)}isReadable(){return this.annotations.selectable?.onRead!==!1}isFilterableByValue(){return this.annotations.filterable?.byValue!==!1}isFilterableByAggregate(){return this.annotations.filterable?.byAggregate!==!1}isAggregable(){return this.annotations.selectable?.onAggregate!==!1}isCreatable(){return this.annotations.settable?.onCreate!==!1}isUpdatable(){return this.annotations.settable?.onUpdate!==!1}findRelationshipImplementation(e){return this.relationshipImplementations.find(t=>t.name===e)}shouldGenerateFieldInputType(e){let t=this.target;return e&&(t=e),this.nestedOperations.has(n.RelationshipNestedOperationsOption.CONNECT)||this.nestedOperations.has(n.RelationshipNestedOperationsOption.CREATE)||this.nestedOperations.has(n.RelationshipNestedOperationsOption.CONNECT_OR_CREATE)&&t instanceof o.ConcreteEntityAdapter&&t.uniqueFields.length>0}shouldGenerateUpdateFieldInputType(e){let t=1===this.nestedOperations.size&&this.nestedOperations.has(n.RelationshipNestedOperationsOption.CONNECT_OR_CREATE);if(this.target instanceof a.InterfaceEntityAdapter)return this.nestedOperations.size>0&&!t;if(this.target instanceof s.UnionEntityAdapter){if(!e)throw Error("Expected member entity");let r=t&&!e.uniqueFields.length;return this.nestedOperations.size>0&&!r}let r=t&&!this.target.uniqueFields.length;return this.nestedOperations.size>0&&!r}}t.RelationshipDeclarationAdapter=d},81623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipDeclarationOperations=void 0;let n=r(99842);class i extends n.RelationshipBaseOperations{constructor(e){super(e)}get fieldInputPrefixForTypename(){return this.relationship.source.name}get edgePrefix(){return`${this.prefixForTypename}Edge`}get relationshipPropertiesFieldTypename(){return`${this.relationshipFieldTypename}Properties`}}t.RelationshipDeclarationOperations=i},83950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipOperations=void 0;let n=r(86904),i=r(99842);class o extends i.RelationshipBaseOperations{constructor(e){super(e)}get fieldInputPrefixForTypename(){return(0,n.isInterfaceEntity)(this.relationship.target)?this.relationship.source.name:this.relationship.firstDeclaredInTypeName||this.relationship.source.name}get edgePrefix(){return this.relationship.propertiesTypeName??""}get subscriptionWhereInputTypeName(){return`${this.prefixForTypename}RelationshipSubscriptionWhere`}getToUnionSubscriptionWhereInputTypeName(e){return`${this.prefixForTypename}${e.name}SubscriptionWhere`}get subscriptionConnectedRelationshipTypeName(){return`${this.prefixForTypename}ConnectedRelationship`}get edgeSubscriptionWhereInputTypeName(){return`${this.edgePrefix}SubscriptionWhere`}}t.RelationshipOperations=o},62437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEntityAdapter=void 0;let n=r(99030),i=r(90681),o=r(64494),a=r(67661),s=r(54627);t.getEntityAdapter=function(e){if(e instanceof i.UnionEntity)return new s.UnionEntityAdapter(e);if(e instanceof n.InterfaceEntity)return new a.InterfaceEntityAdapter(e);if(e.isConcreteEntity())return new o.ConcreteEntityAdapter(e);throw Error(`Error while trying to build Entity: ${e.name}`)}},64562:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFromMap=void 0,t.getFromMap=function(e,t){let r=e.get(t);if(void 0===r)throw Error(`Key "${String(t)}" does not exist in the map.`);return r}},55672:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mapLabelsWithContext=void 0;let i=n(r(56884));t.mapLabelsWithContext=function(e,t){return e.map(e=>{if(e.startsWith("$")){var r;let n;let o=(r=e.substring(e.startsWith("$context")?9:1),(n=i.default.get(t,r))||(n=i.default.get(t.cypherParams,r)),n);if(!o)throw Error("Label value not found in context.");return o}return e})}},30988:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.plural=t.singular=void 0;let i=n(r(73499)),o=n(r(87180)),a=r(74849);t.singular=function(e){let t=(0,i.default)(e);return`${(0,a.leadingUnderscores)(e)}${t}`},t.plural=function(e){let t=(0,o.default)((0,i.default)(e));return`${(0,a.leadingUnderscores)(e)}${t}`}},75625:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationTypesMapper=void 0;let n=r(99262),i=r(19594);class o{constructor(e,t){this.subgraph=t,this.aggregationSelectionTypes=this.getOrCreateAggregationSelectionTypes(e)}getAggregationType(e){return this.aggregationSelectionTypes[e]}getOrCreateAggregationSelectionTypes(e){let t={type:"Int",resolve:i.numericalResolver,args:{}},r={type:"Float",resolve:i.numericalResolver,args:{}},o={type:"ID",resolve:n.idResolver,args:{}},a=this.subgraph?[this.subgraph.getFullyQualifiedDirectiveName("shareable")]:[];return[{name:"ID",fields:{shortest:o,longest:o},directives:a},{name:"String",fields:{shortest:"String",longest:"String"},directives:a},{name:"Float",fields:{max:r,min:r,average:r,sum:r},directives:a},{name:"Int",fields:{max:t,min:t,average:r,sum:t},directives:a},{name:"BigInt",fields:{max:"BigInt",min:"BigInt",average:"BigInt",sum:"BigInt"},directives:a},{name:"DateTime"},{name:"LocalDateTime"},{name:"LocalTime"},{name:"Time"},{name:"Duration"}].reduce((t,{name:r,fields:n,directives:i})=>(t[r]=this.createType({composer:e,name:r,fields:n,directives:i}),t),{})}createType({composer:e,name:t,fields:r,directives:n=[]}){return e.getOrCreateOTC(`${t}AggregateSelection`,e=>{for(let i of(e.addFields(r??{min:t,max:t}),n))e.setDirectiveByName(i)})}}t.AggregationTypesMapper=o},25643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldAggregationComposer=void 0;let n=r(57343),i=r(54627),o=r(43232),a=r(19594),s=r(75625);class l{constructor(e,t){this.composer=e,this.aggregationTypesMapper=new s.AggregationTypesMapper(e,t)}createAggregationField(e,t){if(Object.keys(t).length>0)return this.composer.createObjectTC({name:e,fields:{...t}})}createAggregationTypeObject(e){let t;if(e.target instanceof i.UnionEntityAdapter)throw Error("UnionEntityAdapter not implemented");let r=this.getAggregationFields(e.target),s=e.operations.getAggregationFieldTypename("node"),l=this.createAggregationField(s,r);if(e instanceof o.RelationshipAdapter&&e.attributes.size>0){let r=this.getAggregationFields(e),n=e.operations.getAggregationFieldTypename("edge");t=this.createAggregationField(n,r)}return this.composer.createObjectTC({name:e.operations.getAggregationFieldTypename(),fields:{count:{type:new n.GraphQLNonNull(n.GraphQLInt),resolve:a.numericalResolver,args:{}},...l?{node:l}:{},...t?{edge:t}:{}}})}getAggregationFields(e){return e.aggregableFields.reduce((e,t)=>{let r=this.aggregationTypesMapper.getAggregationType(t.getTypeName());return r&&(e[t.name]=r.NonNull),e},{})}}t.FieldAggregationComposer=l},61120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentFulltextSchema=void 0;let n=r(57343),i=r(66922),o=r(81179);t.augmentFulltextSchema=function(e,t,r){r.annotations.fulltext&&((0,i.withFullTextInputType)({concreteEntityAdapter:r,composer:t}),(0,i.withFullTextWhereInputType)({composer:t,concreteEntityAdapter:r}),r.annotations.fulltext.indexes.forEach(a=>{let s=a.indexName||a.name;if(void 0===s)throw Error("The name of the fulltext index should be defined using the indexName argument.");let l=r.operations.getFullTextIndexQueryFieldName(s);a.queryName&&(l=a.queryName);let u=e.fulltextDirective.indexes.find(e=>(e.indexName||e.name)===s);if(!u)throw Error(`Could not find index ${s} on node ${e.name}`);t.Query.addFields({[l]:{type:(0,i.withFullTextResultType)({composer:t,concreteEntityAdapter:r}).NonNull.List.NonNull,description:"Query a full-text index. This query returns the query score, but does not allow for aggregations. Use the `fulltext` argument under other queries for this functionality.",resolve:(0,o.fulltextResolver)({node:e,index:u,entityAdapter:r}),args:{phrase:new n.GraphQLNonNull(n.GraphQLString),where:r.operations.fulltextTypeNames.where,sort:(0,i.withFullTextSortInputType)({concreteEntityAdapter:r,composer:t}).NonNull.List,limit:n.GraphQLInt,offset:n.GraphQLInt}}})}))}},4238:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.augmentVectorSchema=void 0;let i=r(57343),o=n(r(52462)),a=r(44629),s=r(5936);t.augmentVectorSchema=function({composer:e,concreteEntityAdapter:t,features:r}){t.annotations.vector&&((0,a.withVectorWhereInputType)({composer:e,concreteEntityAdapter:t}),t.annotations.vector.indexes.forEach(n=>{let l={index:n,queryType:"query",queryName:n.queryName,scoreVariable:new o.default.Variable,vectorSettings:r?.vector||{}},u={where:t.operations.vectorTypeNames.where,sort:(0,a.withVectorSortInputType)({concreteEntityAdapter:t,composer:e}).NonNull.List,first:i.GraphQLInt,after:i.GraphQLString};void 0!==n.provider||void 0!==n.callback?u.phrase=new i.GraphQLNonNull(i.GraphQLString):u.vector=new i.GraphQLList(new i.GraphQLNonNull(i.GraphQLFloat)),e.Query.addFields({[n.queryName]:{type:(0,a.withVectorResultTypeConnection)({composer:e,concreteEntityAdapter:t}).NonNull,resolve:(0,s.vectorResolver)({vectorContext:l,entityAdapter:t}),args:u}})}))}},49798:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEPRECATE_INVALID_AGGREGATION_FILTERS=t.DEPRECATE_IMPLICIT_LENGTH_AGGREGATION_FILTERS=t.DEPRECATE_NOT=void 0;let n=r(58388);t.DEPRECATE_NOT={name:n.DEPRECATED,args:{reason:"Negation filters will be deprecated, use the NOT operator to achieve the same behavior"}},t.DEPRECATE_IMPLICIT_LENGTH_AGGREGATION_FILTERS={name:n.DEPRECATED,args:{reason:"Please use the explicit _LENGTH version for string aggregation."}},t.DEPRECATE_INVALID_AGGREGATION_FILTERS={name:n.DEPRECATED,args:{reason:"Aggregation filters that are not relying on an aggregating function will be deprecated."}}},96265:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConnectionFields=void 0;let n=r(44706),i=r(64494),o=r(43232);t.createConnectionFields=function({entityAdapter:e,relationshipFields:t}){let r=[];return(e instanceof i.ConcreteEntityAdapter?e.relationships:e.relationshipDeclarations).forEach(e=>{let i=e instanceof o.RelationshipAdapter&&e.propertiesTypeName?t.get(e.propertiesTypeName):void 0,a=new n.Relationship({name:e.operations.relationshipFieldTypename,type:e instanceof o.RelationshipAdapter?e.type:void 0,source:e.source.name,target:e.target.name,properties:e instanceof o.RelationshipAdapter?e.propertiesTypeName:void 0,...i?{temporalFields:i.temporalFields,scalarFields:i.scalarFields,primitiveFields:i.primitiveFields,enumFields:i.enumFields,pointFields:i.pointFields,customResolverFields:i.customResolverFields}:{}});r.push(a)}),r}},8724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addGlobalNodeFields=void 0;let n=r(44766),i=r(96507),o=r(64494);t.addGlobalNodeFields=function(e,t,r){let a=e.filter(e=>e.isGlobalNode),s=r.map(e=>new o.ConcreteEntityAdapter(e)).filter(e=>e.isGlobalNode());if(0===a.length)return!1;let{nodeInterface:l,nodeField:u}=(0,n.nodeDefinitions)((e,t,r)=>(0,i.globalNodeResolver)({entities:s}).resolve(null,{id:e},t,r),e=>e.__resolveType);return t.createInterfaceTC(l),t.Query.addFields({node:u}),!0}},1644:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOnCreateITC=void 0;let n=r(55394),i=r(26953),o=r(68944);t.createOnCreateITC=function({schemaComposer:e,relationshipAdapter:t,targetEntityAdapter:r,userDefinedFieldDirectives:a}){let s=e.getOrCreateITC(r.operations.onCreateInputTypeName,t=>{let i=(0,o.concreteEntityToCreateInputFields)(r.onCreateInputFields,a);t.addFields(i),(0,n.ensureNonEmptyInput)(e,t)}),l=t.operations.getConnectOrCreateOnCreateFieldInputTypeName(r);return e.getOrCreateITC(l,r=>{let n={node:s.NonNull};if(t.hasCreateInputFields){let r=(0,i.withCreateInputType)({entityAdapter:t,userDefinedFieldDirectives:a,composer:e});n.edge=t.hasNonNullCreateInputFields?r.NonNull:r}r.addFields(n)})}},37827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRelationshipFields=void 0;let n=r(57343),i=r(1109),o=r(58388),a=r(64494),s=r(67661),l=r(54627),u=r(43232),c=r(87401),p=r(25643),d=r(71736),f=r(55141),h=r(35816),y=r(41790),m=r(26953),v=r(4202),g=r(49805),b=r(70078),_=r(59664),T=r(48878),E=r(62950),O=r(91249),S=r(2650),w=r(68944);function I({relationshipAdapter:e,composer:t,composeNode:r,userDefinedFieldDirectives:n,deprecatedDirectives:i,userDefinedDirectivesOnTargetFields:o,subgraph:a,features:l}){(0,S.withSourceWhereInputType)({relationshipAdapter:e,composer:t,deprecatedDirectives:i,userDefinedDirectivesOnTargetFields:o,features:l}),e.target instanceof s.InterfaceEntityAdapter?(0,m.withFieldInputType)({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:n}):(0,y.withConnectOrCreateInputType)({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:n,deprecatedDirectives:i}),r.addFields((0,f.augmentObjectOrInterfaceTypeWithRelationshipField)(e,n,a)),r.addFields((0,f.augmentObjectOrInterfaceTypeWithConnectionField)(e,n,t,l)),(0,T.withRelationInputType)({relationshipAdapter:e,composer:t,deprecatedDirectives:i,userDefinedFieldDirectives:n}),(0,m.augmentCreateInputTypeWithRelationshipsInput)({relationshipAdapter:e,composer:t,deprecatedDirectives:i,userDefinedFieldDirectives:n}),(0,h.augmentConnectInputTypeWithConnectFieldInput)({relationshipAdapter:e,composer:t,deprecatedDirectives:i}),(0,v.augmentDeleteInputTypeWithDeleteFieldInput)({relationshipAdapter:e,composer:t,deprecatedDirectives:i,features:l}),(0,g.augmentDisconnectInputTypeWithDisconnectFieldInput)({relationshipAdapter:e,composer:t,deprecatedDirectives:i,features:l}),(0,O.augmentUpdateInputTypeWithUpdateFieldInput)({relationshipAdapter:e,composer:t,deprecatedDirectives:i,userDefinedFieldDirectives:n,features:l})}t.createRelationshipFields=function({entityAdapter:e,schemaComposer:t,composeNode:r,subgraph:s,userDefinedFieldDirectives:f,seenRelationshipPropertiesTypes:h,userDefinedDirectivesForNode:y,userDefinedFieldDirectivesForNode:v,features:g}){let T=e instanceof a.ConcreteEntityAdapter?e.relationships:e.relationshipDeclarations;T.size&&T.forEach(e=>{if(!e)return;if(e instanceof c.RelationshipDeclarationAdapter&&function({relationshipDeclarationAdapter:e,composer:t}){for(let r of e.relationshipImplementations){if(!r.propertiesTypeName)continue;let i=t.getOrCreateUTC(e.operations.relationshipPropertiesFieldTypename).addType(r.propertiesTypeName);t.getOrCreateOTC(e.operations.relationshipFieldTypename,t=>t.addFields({cursor:new n.GraphQLNonNull(n.GraphQLString),node:`${e.target.name}!`,properties:i.NonNull})),(0,b.withEdgeWrapperType)({edgeTypeName:e.operations.whereInputTypeName,edgeFieldTypeName:r.operations.whereInputTypeName,edgeFieldAdapter:r,composer:t}),(0,b.withEdgeWrapperType)({edgeTypeName:e.operations.sortInputTypeName,edgeFieldTypeName:r.operations.sortInputTypeName,edgeFieldAdapter:r,composer:t}),r.hasCreateInputFields&&(0,b.withEdgeWrapperType)({edgeTypeName:e.operations.createInputTypeName,edgeFieldTypeName:r.operations.edgeCreateInputTypeName,edgeFieldAdapter:r,composer:t}),r.hasUpdateInputFields&&(0,b.withEdgeWrapperType)({edgeTypeName:e.operations.edgeUpdateInputTypeName,edgeFieldTypeName:r.operations.edgeUpdateInputTypeName,edgeFieldAdapter:r,composer:t}),r.aggregationWhereFields&&(0,b.withEdgeWrapperType)({edgeTypeName:e.operations.edgeAggregationWhereInputTypeName,edgeFieldTypeName:r.operations.edgeAggregationWhereInputTypeName,edgeFieldAdapter:r,composer:t})}}({relationshipDeclarationAdapter:e,composer:t}),e instanceof u.RelationshipAdapter&&e.propertiesTypeName){if(h.has(e.propertiesTypeName)){let r=t.getOTC(e.propertiesTypeName);r.setDescription((0,_.getRelationshipPropertiesTypeDescription)({relationshipAdapter:e,propertiesObjectType:r}))}else(function({composer:e,relationshipAdapter:t,userDefinedDirectivesForNode:r,userDefinedFieldDirectivesForNode:n,features:i}){if(!t.propertiesTypeName)return;let o=n.get(t.propertiesTypeName),a=r.get(t.name)||[];(0,_.withObjectType)({entityAdapter:t,userDefinedFieldDirectives:o,userDefinedObjectDirectives:a,composer:e}),(0,E.withSortInputType)({relationshipAdapter:t,userDefinedFieldDirectives:o,composer:e}),(0,O.withUpdateInputType)({entityAdapter:t,userDefinedFieldDirectives:o,composer:e}),(0,S.withWhereInputType)({entityAdapter:t,userDefinedFieldDirectives:o,features:i,composer:e}),(0,m.withCreateInputType)({entityAdapter:t,userDefinedFieldDirectives:o,composer:e})})({composer:t,relationshipAdapter:e,userDefinedDirectivesForNode:y,userDefinedFieldDirectivesForNode:v,features:g}),h.add(e.propertiesTypeName)}let T=e.target,N=f.get(e.name),A=(0,w.graphqlDirectivesToCompose)((N||[]).filter(e=>e.name.value===o.DEPRECATED)),C=v.get(e.target.name),P={relationshipAdapter:e,composer:t,composeNode:r,userDefinedFieldDirectives:f,deprecatedDirectives:A,userDefinedDirectivesOnTargetFields:C,features:g};if(T instanceof l.UnionEntityAdapter){I(P);return}if(r instanceof i.ObjectTypeComposer){let n=new p.FieldAggregationComposer(t,s).createAggregationTypeObject(e),i={where:T.operations.whereInputTypeName},o=(0,d.addDirectedArgument)(i,e);e.aggregate&&r.addFields({[e.operations.aggregateTypeName]:{type:n,args:o,directives:A}})}T instanceof a.ConcreteEntityAdapter&&(P.subgraph=s),I(P)})}},43555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overwrite=void 0;let n=r(57343);t.overwrite={type:new n.GraphQLNonNull(n.GraphQLBoolean),description:"Whether or not to overwrite any matching relationship with the new properties.",defaultValue:!0}},29457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bookmarkDeprecationMap=void 0;let n=r(97007),i=r(23084),o=r(49046);t.bookmarkDeprecationMap=new Map([[n.CreateInfo.name,[{field:"bookmark",reason:"This field has been deprecated because bookmarks are now handled by the driver.",deprecatedFromVersion:"",toBeRemovedInVersion:""}]],[o.UpdateInfo.name,[{field:"bookmark",reason:"This field has been deprecated because bookmarks are now handled by the driver.",deprecatedFromVersion:"",toBeRemovedInVersion:""}]],[i.DeleteInfo.name,[{field:"bookmark",reason:"This field has been deprecated because bookmarks are now handled by the driver.",deprecatedFromVersion:"",toBeRemovedInVersion:""}]]])},71736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDirectedArgument=t.getDirectedArgument=void 0;let n=r(58388),i=r(87401);function o(e){let t;switch(e.queryDirection){case n.RelationshipQueryDirectionOption.DEFAULT_DIRECTED:t=!0;break;case n.RelationshipQueryDirectionOption.DEFAULT_UNDIRECTED:t=!1;break;case n.RelationshipQueryDirectionOption.DIRECTED_ONLY:case n.RelationshipQueryDirectionOption.UNDIRECTED_ONLY:default:return}return{type:"Boolean",defaultValue:t}}t.getDirectedArgument=o,t.addDirectedArgument=function(e,t){if(t instanceof i.RelationshipDeclarationAdapter)return{...e};let r=o(t);return r?{...e,directed:r}:{...e}}},55394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureNonEmptyInput=void 0;let n=r(14178);t.ensureNonEmptyInput=function(e,t){let r=(0,n.isString)(t)?e.getITC(t):t;0===r.getFieldNames().length&&r.addFields({_emptyInput:{type:"Boolean",description:"Appears because this input type would be empty otherwise because this type is composed of just generated and/or relationship properties. See https://neo4j.com/docs/graphql-manual/current/troubleshooting/faqs/"}})}},4453:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AugmentedSchemaGenerator=void 0;let a=r(57343),s=r(1109),l=r(56372),u=r(65562),c=r(9742),p=r(23281),d=r(77286),f=r(94045),h=r(12602),y=r(32965),m=r(97007),v=r(23084),g=r(41435),b=r(63174),_=r(49046),T=o(r(65639)),E=r(64494),O=r(67661),S=r(62437);class w{constructor(e,t,r){this.schemaModel=e,this.definitionNodes=t,this.rootTypesCustomResolvers=r,this.composer=new s.SchemaComposer}generate(){let e=!1,t=!1,r=!1;for(let n of this.schemaModel.entities.values()){let i=(0,S.getEntityAdapter)(n);if(i instanceof E.ConcreteEntityAdapter||i instanceof O.InterfaceEntityAdapter){for(let r of i.attributes.values())r.typeHelper.isPoint()&&(e=!0),r.typeHelper.isCartesianPoint()&&(t=!0);if((i.annotations.fulltext||i.annotations.vector)&&(r=!0),i instanceof E.ConcreteEntityAdapter)for(let r of i.relationships.values())for(let n of r.attributes.values())n.typeHelper.isPoint()&&(e=!0),n.typeHelper.isCartesianPoint()&&(t=!0)}}return this.addToComposer(this.getStaticTypes()),this.addToComposer(this.getSpatialTypes(e,t)),this.addToComposer(this.getTemporalTypes(r)),this.composer}pipeDefs(){let e=[...this.definitionNodes.enumTypes,...this.definitionNodes.scalarTypes,...this.definitionNodes.inputObjectTypes,...this.definitionNodes.unionTypes,...this.definitionNodes.directives,...this.rootTypesCustomResolvers].filter(Boolean);e.length&&this.composer.addTypeDefs((0,a.print)({kind:a.Kind.DOCUMENT,definitions:e}))}getStaticTypes(){return{objects:[m.CreateInfo,v.DeleteInfo,_.UpdateInfo,g.PageInfo],inputs:[h.QueryOptions],enums:[l.SortDirection],scalars:Object.values(T)}}getSpatialTypes(e,t){let r=[],n=[];return e&&(r.push(b.Point),n.push(f.PointInput,d.PointDistance)),t&&(r.push(y.CartesianPoint),n.push(c.CartesianPointInput,u.CartesianPointDistance)),{objects:r,inputs:n}}getTemporalTypes(e){let t=[];return e&&t.push(p.FloatWhere),{inputs:t}}addToComposer({objects:e=[],inputs:t=[],enums:r=[],scalars:n=[],interfaces:i=[]}){e.forEach(e=>this.composer.createObjectTC(e)),t.forEach(e=>this.composer.createInputTC(e)),r.forEach(e=>this.composer.createEnumTC(e)),i.forEach(e=>this.composer.createInterfaceTC(e)),n.forEach(e=>this.composer.addTypeDefs(`scalar ${e.name}`))}}t.AugmentedSchemaGenerator=w},38237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withAggregateInputType=t.withAggregateSelectionType=void 0;let n=r(57343),i=r(58388),o=r(64494),a=r(67661),s=r(87401),l=r(49798),u=r(19594),c=r(68944),p=r(37277);function d({relationshipAdapter:e,entityAdapter:t,composer:r,userDefinedDirectivesOnTargetFields:u,features:d}){let f=t instanceof o.ConcreteEntityAdapter||t instanceof a.InterfaceEntityAdapter?e.operations.nodeAggregationWhereInputTypeName:e.operations.edgeAggregationWhereInputTypeName;if(r.has(f))return r.getITC(f);if(t instanceof s.RelationshipDeclarationAdapter)return;let h=t.aggregationWhereFields;if(!h.length)return;let y=r.createInputTC({name:f,fields:{}});y.addFields({AND:y.NonNull.List,OR:y.NonNull.List,NOT:y});let m=function(e,t,r){let o={};for(let a of e)(function(e,t,r,o){let a=(0,c.graphqlDirectivesToCompose)((t||[]).filter(e=>e.name.value===i.DEPRECATED));if(e.typeHelper.isID())return(0,p.shouldAddDeprecatedFields)(o,"aggregationFilters")&&(r[`${e.name}_EQUAL`]={type:n.GraphQLID,directives:[l.DEPRECATE_INVALID_AGGREGATION_FILTERS]});if(e.typeHelper.isString()){for(let t of i.AGGREGATION_COMPARISON_OPERATORS)(0,p.shouldAddDeprecatedFields)(o,"aggregationFilters")&&(r[`${e.name}_${t}`]={type:`${"EQUAL"===t?n.GraphQLString:n.GraphQLInt}`,directives:[l.DEPRECATE_INVALID_AGGREGATION_FILTERS]},r[`${e.name}_AVERAGE_${t}`]={type:n.GraphQLFloat,directives:[l.DEPRECATE_IMPLICIT_LENGTH_AGGREGATION_FILTERS]},r[`${e.name}_LONGEST_${t}`]={type:n.GraphQLInt,directives:[l.DEPRECATE_IMPLICIT_LENGTH_AGGREGATION_FILTERS]},r[`${e.name}_SHORTEST_${t}`]={type:n.GraphQLInt,directives:[l.DEPRECATE_IMPLICIT_LENGTH_AGGREGATION_FILTERS]}),r[`${e.name}_AVERAGE_LENGTH_${t}`]={type:n.GraphQLFloat,directives:a},r[`${e.name}_LONGEST_LENGTH_${t}`]={type:n.GraphQLInt,directives:a},r[`${e.name}_SHORTEST_LENGTH_${t}`]={type:n.GraphQLInt,directives:a};return}if(e.typeHelper.isNumeric()||e.typeHelper.isDuration()){for(let t of i.AGGREGATION_COMPARISON_OPERATORS){(0,p.shouldAddDeprecatedFields)(o,"aggregationFilters")&&(r[`${e.name}_${t}`]={type:e.getTypeName(),directives:[l.DEPRECATE_INVALID_AGGREGATION_FILTERS]}),r[`${e.name}_MIN_${t}`]={type:e.getTypeName(),directives:a},r[`${e.name}_MAX_${t}`]={type:e.getTypeName(),directives:a},"Duration"!==e.getTypeName()&&(r[`${e.name}_SUM_${t}`]={type:e.getTypeName(),directives:a});let i=e.typeHelper.isBigInt()?"BigInt":e.typeHelper.isDuration()?"Duration":n.GraphQLFloat;r[`${e.name}_AVERAGE_${t}`]={type:i,directives:a}}return}for(let t of i.AGGREGATION_COMPARISON_OPERATORS)(0,p.shouldAddDeprecatedFields)(o,"aggregationFilters")&&(r[`${e.name}_${t}`]={type:e.getTypeName(),directives:[l.DEPRECATE_INVALID_AGGREGATION_FILTERS]}),r[`${e.name}_MIN_${t}`]={type:e.getTypeName(),directives:a},r[`${e.name}_MAX_${t}`]={type:e.getTypeName(),directives:a}})(a,t?.get(a.name),o,r);return o}(h,u,d);return y.addFields(m),y}t.withAggregateSelectionType=function({entityAdapter:e,aggregationTypesMapper:t,propagatedDirectives:r,composer:i}){let o=i.createObjectTC({name:e.operations.aggregateTypeNames.selection,fields:{count:{type:new n.GraphQLNonNull(n.GraphQLInt),resolve:u.numericalResolver,args:{}}},directives:(0,c.graphqlDirectivesToCompose)(r)});return o.addFields(function({entityAdapter:e,aggregationTypesMapper:t}){let r={};for(let n of e.aggregableFields){let e=t.getAggregationType(n.getTypeName());e&&(r[n.name]=e.NonNull)}return r}({entityAdapter:e,aggregationTypesMapper:t})),o},t.withAggregateInputType=function({relationshipAdapter:e,entityAdapter:t,composer:r,userDefinedDirectivesOnTargetFields:i,features:o}){let a=e.operations.aggregateInputTypeName;if(r.has(a))return r.getITC(a);let s=r.createInputTC({name:a,fields:{count:n.GraphQLInt,count_LT:n.GraphQLInt,count_LTE:n.GraphQLInt,count_GT:n.GraphQLInt,count_GTE:n.GraphQLInt}});s.addFields({AND:s.NonNull.List,OR:s.NonNull.List,NOT:s});let l=d({relationshipAdapter:e,entityAdapter:t,composer:r,userDefinedDirectivesOnTargetFields:i,features:o});l&&s.addFields({node:l});let u=d({relationshipAdapter:e,entityAdapter:e,composer:r,userDefinedDirectivesOnTargetFields:i,features:o});return u&&s.addFields({edge:u}),s}},55141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentObjectOrInterfaceTypeWithConnectionField=t.augmentObjectOrInterfaceTypeWithRelationshipField=void 0;let n=r(57343),i=r(58388),o=r(12602),a=r(54627),s=r(43232),l=r(71736),u=r(94431),c=r(68944),p=r(20289);t.augmentObjectOrInterfaceTypeWithRelationshipField=function(e,t,r){let n={},i={type:e.operations.getTargetTypePrettyName(),description:e.description,directives:(0,c.graphqlDirectivesToCompose)(t.get(e.name)||[])},u=!0;if(r&&!e.isList&&(u=!1),u){let t=e instanceof s.RelationshipAdapter&&e.originalTarget?e.originalTarget:e.target,r=t instanceof a.UnionEntityAdapter?o.QueryOptions:t.operations.optionsInputTypeName,n={where:t.operations.whereInputTypeName,options:r};if(e instanceof s.RelationshipAdapter){let t=(0,l.getDirectedArgument)(e);t&&(n.directed=t)}i.args=n}return e.isReadable()&&(n[e.name]=i),n},t.augmentObjectOrInterfaceTypeWithConnectionField=function(e,t,r,o){let a={},s=(0,c.graphqlDirectivesToCompose)((t.get(e.name)||[]).filter(e=>e.name.value===i.DEPRECATED)),d=(0,l.addDirectedArgument)({where:(0,p.makeConnectionWhereInputType)({relationshipAdapter:e,composer:r,features:o}),first:{type:n.GraphQLInt},after:{type:n.GraphQLString}},e),f=(0,p.withConnectionSortInputType)({relationshipAdapter:e,composer:r});return f&&(d.sort=f.NonNull.List),e.isReadable()&&(a[e.operations.connectionFieldName]={type:(0,p.withConnectionObjectType)({relationshipAdapter:e,composer:r}).NonNull,args:d,directives:s,resolve:(t,r,n,i)=>(0,u.connectionFieldResolver)({connectionFieldName:e.operations.connectionFieldName,args:r,info:i,source:t})}),a}},38878:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentWhereInputTypeWithConnectionFields=t.augmentWhereInputTypeWithRelationshipFields=void 0;let n=r(58388),i=r(37277);function o({whereType:e,fieldName:t,filters:r,relationshipAdapter:o,deprecatedDirectives:a,features:s}){let l={};if(!o.isFilterableByValue())return l;if((!o.isList||(0,i.shouldAddDeprecatedFields)(s,"arrayFilters"))&&(l[t]={type:e},l[`${t}_NOT`]={type:e}),r)for(let o of r)l[o.type]={type:e,directives:a,description:o.description},(0,i.shouldAddDeprecatedFields)(s,"arrayFilters")&&(l[t]={type:e,directives:[{name:n.DEPRECATED,args:{reason:`Use \`${t}_SOME\` instead.`}}]},l[`${t}_NOT`]={type:e,directives:[{name:n.DEPRECATED,args:{reason:`Use \`${t}_NONE\` instead.`}}]});return l}t.augmentWhereInputTypeWithRelationshipFields=function(e,t,r){let n=e.listFiltersModel?.filters;return o({whereType:e.target.operations.whereInputTypeName,fieldName:e.name,filters:n,relationshipAdapter:e,deprecatedDirectives:t,features:r})},t.augmentWhereInputTypeWithConnectionFields=function(e,t,r){let n=e.listFiltersModel?.connectionFilters;return o({whereType:e.operations.getConnectionWhereTypename(),fieldName:e.operations.connectionFieldName,filters:n,relationshipAdapter:e,deprecatedDirectives:t,features:r})}},35816:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withConnectFieldInputType=t.augmentConnectInputTypeWithConnectFieldInput=t.withConnectInputType=void 0;let n=r(58388),i=r(64494),o=r(67661),a=r(54627),s=r(43555),l=r(37277),u=r(2650);function c({entityAdapter:e,composer:t}){return i.ConcreteEntityAdapter,t.getOrCreateITC(e.operations.connectInputTypeName)}function p({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r}){let a=e.operations.getConnectFieldInputTypeName(r);return e.nestedOperations.has(n.RelationshipNestedOperationsOption.CONNECT)?t.has(a)?t.getITC(a):t.createInputTC({name:a,fields:function({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r}){let a={};if(e.hasCreateInputFields&&(a.edge=e.operations.edgeCreateInputTypeName),e.target instanceof i.ConcreteEntityAdapter){if(a.where=(0,u.withConnectWhereFieldInputType)(e.target,t),a.overwrite=s.overwrite,(0,l.relationshipTargetHasRelationshipWithNestedOperation)(e.target,n.RelationshipNestedOperationsOption.CONNECT)){let r=c({entityAdapter:e.target,composer:t});r&&(a.connect=e.isList?r.NonNull.List:r)}}else if(e.target instanceof o.InterfaceEntityAdapter){a.where=(0,u.withConnectWhereFieldInputType)(e.target,t);let r=e.target.operations.connectInputTypeName,n=e.target.relationshipDeclarations.size>0;if(t.has(r)||n){let e=t.getOrCreateITC(r);a.connect=e}}else{if(!r)throw Error("Member Entity required.");if(a.where=(0,u.withConnectWhereFieldInputType)(r,t),r.relationships.size){let n=c({entityAdapter:r,composer:t});n&&(a.connect=e.isList?n.NonNull.List:n)}}return a}({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r})}):void 0}t.withConnectInputType=c,t.augmentConnectInputTypeWithConnectFieldInput=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r}){if(e.source instanceof a.UnionEntityAdapter)throw Error("Unexpected union source");let i=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r}){return e.target instanceof a.UnionEntityAdapter?function({relationshipAdapter:e,composer:t,deprecatedDirectives:r}){let i=e.operations.unionConnectInputTypeName;if(!e.nestedOperations.has(n.RelationshipNestedOperationsOption.CONNECT))return;if(t.has(i))return t.getITC(i);let o=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r}){let n={};if(!(e.target instanceof a.UnionEntityAdapter))throw Error("Expected union target");for(let i of e.target.concreteEntities){let o=p({relationshipAdapter:e,ifUnionMemberEntity:i,composer:t});o&&(n[i.name]={type:e.isList?o.NonNull.List:o,directives:r})}return n}({relationshipAdapter:e,composer:t,deprecatedDirectives:r});if(Object.keys(o).length)return t.createInputTC({name:i,fields:o})}({relationshipAdapter:e,composer:t,deprecatedDirectives:r}):p({relationshipAdapter:e,composer:t})}({relationshipAdapter:e,composer:t,deprecatedDirectives:r});if(!i)return;let o=c({entityAdapter:e.source,composer:t});if(!o)return;let s=function({relationshipAdapter:e,connectFieldInput:t,deprecatedDirectives:r}){return e.target instanceof a.UnionEntityAdapter?{[e.name]:{type:t,directives:r}}:{[e.name]:{type:e.isList?t.NonNull.List:t,directives:r}}}({relationshipAdapter:e,connectFieldInput:i,deprecatedDirectives:r});o.addFields(s)},t.withConnectFieldInputType=p},41790:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withConnectOrCreateInputType=t.withConnectOrCreateFieldInputType=void 0;let n=r(58388),i=r(64494),o=r(54627),a=r(1644);function s({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:s}){let l;if(!e.nestedOperations.has(n.RelationshipNestedOperationsOption.CONNECT_OR_CREATE))return;if(e.target instanceof o.UnionEntityAdapter){if(!s)throw Error("Expected member entity.");l=s}else{if(!(e.target instanceof i.ConcreteEntityAdapter))throw Error("Expected concrete target");l=e.target}if(!e.shouldGenerateFieldInputType(s)&&!e.shouldGenerateUpdateFieldInputType(s)||!0!=l.uniqueFields.length>0)return;(0,a.createOnCreateITC)({schemaComposer:t,relationshipAdapter:e,targetEntityAdapter:l,userDefinedFieldDirectives:r}),t.getOrCreateITC(l.operations.connectOrCreateWhereInputTypeName,e=>{e.addFields(l.operations.connectOrCreateWhereInputFieldNames)});let u=e.operations.getConnectOrCreateFieldInputTypeName(l);return t.getOrCreateITC(u,t=>{t.addFields(e.operations.getConnectOrCreateInputFields(l)||{})})}t.withConnectOrCreateFieldInputType=s,t.withConnectOrCreateInputType=function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,deprecatedDirectives:n}){if(e.source instanceof o.UnionEntityAdapter)throw Error("Unexpected union source");let i=e.source.operations.connectOrCreateInputTypeName,a=function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,deprecatedDirectives:n}){return e.target instanceof o.UnionEntityAdapter?function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,deprecatedDirectives:n}){let i=e.operations.getConnectOrCreateInputTypeName();if(!(e.target instanceof o.UnionEntityAdapter))throw Error("Expected union target");if(t.has(i))return t.getITC(i);let a=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n}){let i={};if(!(e.target instanceof o.UnionEntityAdapter))throw Error("Expected union target");for(let o of e.target.concreteEntities){let a=s({relationshipAdapter:e,ifUnionMemberEntity:o,composer:t,userDefinedFieldDirectives:n});a&&(i[o.name]={type:e.isList?a.NonNull.List:a,directives:r})}return i}({relationshipAdapter:e,composer:t,deprecatedDirectives:n,userDefinedFieldDirectives:r});if(Object.keys(a).length)return t.createInputTC({name:i,fields:a})}({relationshipAdapter:e,composer:t,deprecatedDirectives:n,userDefinedFieldDirectives:r}):s({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r})}({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,deprecatedDirectives:n});if(!a)return;let l=function({relationshipAdapter:e,fieldInput:t,deprecatedDirectives:r}){return e.target instanceof o.UnionEntityAdapter?{[e.name]:{type:t,directives:r}}:{[e.name]:{type:e.isList?t.NonNull.List:t,directives:r}}}({relationshipAdapter:e,fieldInput:a,deprecatedDirectives:n}),u=t.getOrCreateITC(i);return u.addFields(l),u}},20289:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withConnectionObjectType=t.withConnectionSortInputType=t.withConnectionWhereInputType=t.makeConnectionWhereInputType=void 0;let n=r(57343),i=r(41435),o=r(64494),a=r(67661),s=r(54627),l=r(43232),u=r(49798),c=r(37277);function p({relationshipAdapter:e,memberEntity:t,composer:r,features:n}){let i=e.operations.getConnectionWhereTypename(t);if(r.has(i))return r.getITC(i);let o=t||e.target,a=r.createInputTC({name:i,fields:{}});return a.addFields({AND:a.NonNull.List,OR:a.NonNull.List,NOT:a,node:o.operations.whereInputTypeName}),(0,c.shouldAddDeprecatedFields)(n,"negationFilters")&&a.addFields({node_NOT:{type:o.operations.whereInputTypeName,directives:[u.DEPRECATE_NOT]}}),e.hasAnyProperties&&(a.addFields({edge:e.operations.whereInputTypeName}),(0,c.shouldAddDeprecatedFields)(n,"negationFilters")&&a.addFields({edge_NOT:{type:e.operations.whereInputTypeName,directives:[u.DEPRECATE_NOT]}})),a}t.makeConnectionWhereInputType=function({relationshipAdapter:e,composer:t,features:r}){let n=e.operations.getConnectionWhereTypename();if(t.has(n))return t.getITC(n);let i=e.target;if(i instanceof s.UnionEntityAdapter){let o=t.createInputTC(n);return i.concreteEntities.forEach(n=>{let i=p({relationshipAdapter:e,memberEntity:n,composer:t,features:r});o.addFields({[n.name]:i})}),o}return p({relationshipAdapter:e,composer:t,features:r})},t.withConnectionWhereInputType=p,t.withConnectionSortInputType=function({relationshipAdapter:e,composer:t}){if(!(e.hasAnyProperties||!(e.target instanceof s.UnionEntityAdapter)))return;let r=e.operations.connectionSortInputTypename;if(t.has(r))return t.getITC(r);let n=function({relationshipAdapter:e}){let t=e.target instanceof a.InterfaceEntityAdapter&&e.target.sortableFields.length,r=e.target instanceof o.ConcreteEntityAdapter&&e.target.sortableFields.length,n={};if((t||r)&&(n.node=e.target.operations.sortInputTypeName),e.hasAnyProperties&&(n.edge=e.operations.sortInputTypeName),0!==Object.keys(n).length)return n}({relationshipAdapter:e});if(n)return t.createInputTC({name:r,fields:n})},t.withConnectionObjectType=function({relationshipAdapter:e,composer:t}){let r=e.operations.connectionFieldTypename;return t.has(r)?t.getOTC(r):t.createObjectTC({name:r,fields:{edges:function({relationshipAdapter:e,composer:t}){let r=e.operations.relationshipFieldTypename;if(t.has(r))return t.getOTC(r);let i=t.createObjectTC({name:r,fields:{cursor:new n.GraphQLNonNull(n.GraphQLString),node:`${e.target.name}!`}});return e instanceof l.RelationshipAdapter&&e.hasAnyProperties&&i.addFields({properties:t.getOTC(e.propertiesTypeName).NonNull}),i}({relationshipAdapter:e,composer:t}).NonNull.List.NonNull,totalCount:new n.GraphQLNonNull(n.GraphQLInt),pageInfo:new n.GraphQLNonNull(i.PageInfo)}})}},26953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withFieldInputType=t.augmentCreateInputTypeWithRelationshipsInput=t.withCreateInputType=void 0;let n=r(64494),i=r(67661),o=r(54627),a=r(43232),s=r(68944),l=r(35816),u=r(41790),c=r(48878);function p({entityAdapter:e,userDefinedFieldDirectives:t,composer:r}){if(r.has(e.operations.createInputTypeName))return r.getITC(e.operations.createInputTypeName);let o=r.createInputTC({name:e.operations.createInputTypeName,fields:{}});return e instanceof n.ConcreteEntityAdapter||e instanceof a.RelationshipAdapter?o.addFields((0,s.concreteEntityToCreateInputFields)(e.createInputFields,t)):o.addFields(function(e){let t=e instanceof i.InterfaceEntityAdapter?e.concreteEntities:e.relationshipImplementations,r={};for(let e of t)r[e.name]={type:e.operations.createInputTypeName};return r}(e)),o}function d({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:i}){let a=e.operations.getFieldInputTypeName(i);if(t.has(a))return t.getITC(a);if(!e.shouldGenerateFieldInputType(i))return;let s=function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:i}){let a;let s={};if(e.target instanceof n.ConcreteEntityAdapter)a=(0,u.withConnectOrCreateFieldInputType)({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r});else if(e.target instanceof o.UnionEntityAdapter){if(!i)throw Error("Member Entity required.");a=(0,u.withConnectOrCreateFieldInputType)({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:i})}a&&(s.connectOrCreate={type:e.isList?a.NonNull.List:a,directives:[]});let p=(0,l.withConnectFieldInputType)({relationshipAdapter:e,ifUnionMemberEntity:i,composer:t});p&&(s.connect={type:e.isList?p.NonNull.List:p,directives:[]});let d=(0,c.withCreateFieldInputType)({relationshipAdapter:e,ifUnionMemberEntity:i,composer:t,userDefinedFieldDirectives:r});return d&&(s.create={type:e.isList?d.NonNull.List:d,directives:[]}),s}({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:i});if(Object.keys(s).length)return t.createInputTC({name:a,fields:s})}t.withCreateInputType=p,t.augmentCreateInputTypeWithRelationshipsInput=function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,deprecatedDirectives:n}){if(!e.isCreatable()||e.source instanceof i.InterfaceEntityAdapter)return;let a=function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,deprecatedDirectives:n}){return e.target instanceof o.UnionEntityAdapter?function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n}){let i=e.operations.unionCreateInputTypeName;if(t.has(i))return t.getITC(i);let a=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n}){let i={};if(!(e.target instanceof o.UnionEntityAdapter))throw Error("Expected union target");for(let o of e.target.concreteEntities){let a=d({relationshipAdapter:e,ifUnionMemberEntity:o,composer:t,userDefinedFieldDirectives:n});a&&(i[o.name]={type:a,directives:r})}return i}({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n});if(Object.keys(a).length)return t.createInputTC({name:i,fields:a})}({relationshipAdapter:e,composer:t,deprecatedDirectives:n,userDefinedFieldDirectives:r}):d({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r})}({relationshipAdapter:e,composer:t,deprecatedDirectives:n,userDefinedFieldDirectives:r});if(!a)return;let s=p({entityAdapter:e.source,userDefinedFieldDirectives:r,composer:t});s&&s.addFields({[e.name]:{type:a,directives:n}})},t.withFieldInputType=d},4202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withDeleteFieldInputType=t.withUnionDeleteInputType=t.augmentDeleteInputTypeWithDeleteFieldInput=t.withDeleteInputType=void 0;let n=r(58388),i=r(64494),o=r(67661),a=r(54627),s=r(20289),l=r(37277);function u({entityAdapter:e,composer:t}){return i.ConcreteEntityAdapter,t.getOrCreateITC(e.operations.updateMutationArgumentNames.delete)}function c({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:i}){let o=e.operations.unionDeleteInputTypeName;if(!e.nestedOperations.has(n.RelationshipNestedOperationsOption.DELETE))return;if(t.has(o))return t.getITC(o);let s=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:n}){let i={};if(!(e.target instanceof a.UnionEntityAdapter))throw Error("Expected union target");for(let o of e.target.concreteEntities){let a=p({relationshipAdapter:e,ifUnionMemberEntity:o,composer:t,features:n});a&&(i[o.name]={type:e.isList?a.NonNull.List:a,directives:r})}return i}({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:i});if(Object.keys(s).length)return t.createInputTC({name:o,fields:s})}function p({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r,features:a}){let c=e.operations.getDeleteFieldInputTypeName(r);return e.nestedOperations.has(n.RelationshipNestedOperationsOption.DELETE)?t.has(c)?t.getITC(c):t.createInputTC({name:c,fields:function({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r,features:a}){let c={};if(e.target instanceof i.ConcreteEntityAdapter){if(c.where=e.operations.getConnectionWhereTypename(),(0,l.relationshipTargetHasRelationshipWithNestedOperation)(e.target,n.RelationshipNestedOperationsOption.DELETE)){let r=u({entityAdapter:e.target,composer:t});r&&(c.delete=r)}}else if(e.target instanceof o.InterfaceEntityAdapter){c.where=e.operations.getConnectionWhereTypename();let r=e.target.operations.updateMutationArgumentNames.delete,n=e.target.relationshipDeclarations.size>0;if(t.has(r)||n){let e=t.getOrCreateITC(r);c.delete=e}}else{if(!r)throw Error("Member Entity required.");if(c.where=(0,s.withConnectionWhereInputType)({relationshipAdapter:e,memberEntity:r,composer:t,features:a}),r.relationships.size){let e=u({entityAdapter:r,composer:t});e&&(c.delete=e)}}return c}({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r,features:a})}):void 0}t.withDeleteInputType=u,t.augmentDeleteInputTypeWithDeleteFieldInput=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:n}){if(e.source instanceof a.UnionEntityAdapter)throw Error("Unexpected union source");let i=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:n}){return e.target instanceof a.UnionEntityAdapter?c({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:n}):p({relationshipAdapter:e,composer:t,features:n})}({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:n});if(!i)return;let o=u({entityAdapter:e.source,composer:t});if(!o)return;let s=function({relationshipAdapter:e,deleteFieldInput:t,deprecatedDirectives:r}){return e.target instanceof a.UnionEntityAdapter?{[e.name]:{type:t,directives:r}}:{[e.name]:{type:e.isList?t.NonNull.List:t,directives:r}}}({relationshipAdapter:e,deleteFieldInput:i,deprecatedDirectives:r});o.addFields(s)},t.withUnionDeleteInputType=c,t.withDeleteFieldInputType=p},49805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withDisconnectFieldInputType=t.augmentDisconnectInputTypeWithDisconnectFieldInput=t.withDisconnectInputType=void 0;let n=r(58388),i=r(64494),o=r(67661),a=r(54627),s=r(20289),l=r(37277);function u({entityAdapter:e,composer:t}){return i.ConcreteEntityAdapter,t.getOrCreateITC(e.operations.updateMutationArgumentNames.disconnect)}function c({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r,features:a}){let c=e.operations.getDisconnectFieldInputTypeName(r);return e.nestedOperations.has(n.RelationshipNestedOperationsOption.DISCONNECT)?t.has(c)?t.getITC(c):t.createInputTC({name:c,fields:function({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r,features:a}){let c={};if(e.target instanceof i.ConcreteEntityAdapter){if(c.where=e.operations.getConnectionWhereTypename(),(0,l.relationshipTargetHasRelationshipWithNestedOperation)(e.target,n.RelationshipNestedOperationsOption.DISCONNECT)){let r=u({entityAdapter:e.target,composer:t});r&&(c.disconnect=r)}}else if(e.target instanceof o.InterfaceEntityAdapter){c.where=e.operations.getConnectionWhereTypename();let r=e.target.operations.updateMutationArgumentNames.disconnect,n=e.target.relationshipDeclarations.size>0;if(t.has(r)||n){let e=t.getOrCreateITC(r);c.disconnect=e}}else{if(!r)throw Error("Member Entity required.");if(c.where=(0,s.withConnectionWhereInputType)({relationshipAdapter:e,memberEntity:r,composer:t,features:a}),r.relationships.size){let e=u({entityAdapter:r,composer:t});e&&(c.disconnect=e)}}return c}({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r,features:a})}):void 0}t.withDisconnectInputType=u,t.augmentDisconnectInputTypeWithDisconnectFieldInput=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:i}){if(e.source instanceof a.UnionEntityAdapter)throw Error("Unexpected union source");let o=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:i}){return e.target instanceof a.UnionEntityAdapter?function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:i}){let o=e.operations.unionDisconnectInputTypeName;if(!e.nestedOperations.has(n.RelationshipNestedOperationsOption.DISCONNECT))return;if(t.has(o))return t.getITC(o);let s=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:n}){let i={};if(!(e.target instanceof a.UnionEntityAdapter))throw Error("Expected union target");for(let o of e.target.concreteEntities){let a=c({relationshipAdapter:e,ifUnionMemberEntity:o,composer:t,features:n});a&&(i[o.name]={type:e.isList?a.NonNull.List:a,directives:r})}return i}({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:i});if(Object.keys(s).length)return t.createInputTC({name:o,fields:s})}({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:i}):c({relationshipAdapter:e,composer:t,features:i})}({relationshipAdapter:e,composer:t,deprecatedDirectives:r,features:i});if(!o)return;let s=u({entityAdapter:e.source,composer:t});if(!s)return;let l=function({relationshipAdapter:e,disconnectFieldInput:t,deprecatedDirectives:r}){return e.target instanceof a.UnionEntityAdapter?{[e.name]:{type:t,directives:r}}:{[e.name]:{type:e.isList?t.NonNull.List:t,directives:r}}}({relationshipAdapter:e,disconnectFieldInput:o,deprecatedDirectives:r});s.addFields(l)},t.withDisconnectFieldInputType=c},70078:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withEdgeWrapperType=void 0,t.withEdgeWrapperType=function({edgeTypeName:e,edgeFieldTypeName:t,edgeFieldAdapter:r,composer:n}){if(!r.propertiesTypeName)return;let i=n.getOrCreateITC(e);return i.addFields({[r.propertiesTypeName]:{type:t,description:function({inputType:e,relationshipAdapter:t}){let r=`* ${t.source.name}`;return[e.hasField(t.propertiesTypeName)?e.getField(t.propertiesTypeName).description:"Relationship properties when source node is of type:",r].join("\n")}({inputType:i,relationshipAdapter:r})}}),i}},66922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withFullTextResultType=t.withFullTextSortInputType=t.withFullTextWhereInputType=t.withFullTextInputType=void 0;let n=r(57343),i=r(58388),o=r(56372),a=r(23281);t.withFullTextInputType=function({concreteEntityAdapter:e,composer:t}){let r=e.operations.fullTextInputTypeName;if(t.has(r))return t.getITC(r);let i=function({concreteEntityAdapter:e,composer:t}){let r={};if(!e.annotations.fulltext)throw Error("Expected fulltext annotation");for(let i of e.annotations.fulltext.indexes){let o=i.indexName||i.name;if(void 0===o)throw Error("The name of the fulltext index should be defined using the indexName argument.");let a=function({composer:e,concreteEntityAdapter:t,indexName:r}){let i=t.operations.getFullTextIndexInputTypeName(r);return e.has(i)?e.getITC(i):e.createInputTC({name:i,fields:{phrase:new n.GraphQLNonNull(n.GraphQLString)}})}({concreteEntityAdapter:e,indexName:o,composer:t});a&&(r[o]=a)}return r}({concreteEntityAdapter:e,composer:t});return t.createInputTC({name:r,fields:i})},t.withFullTextWhereInputType=function({composer:e,concreteEntityAdapter:t}){let r=t.operations.fulltextTypeNames.where;return e.has(r)?e.getITC(r):e.createInputTC({name:r,description:`The input for filtering a fulltext query on an index of ${t.name}`,fields:{[i.SCORE_FIELD]:a.FloatWhere.name,[t.singular]:t.operations.whereInputTypeName}})},t.withFullTextSortInputType=function({composer:e,concreteEntityAdapter:t}){let r=t.operations.fulltextTypeNames.sort;return e.has(r)?e.getITC(r):e.createInputTC({name:r,description:`The input for sorting a fulltext query on an index of ${t.name}`,fields:{[i.SCORE_FIELD]:o.SortDirection.name,[t.singular]:t.operations.sortInputTypeName}})},t.withFullTextResultType=function({composer:e,concreteEntityAdapter:t}){let r=t.operations.fulltextTypeNames.result;return e.has(r)?e.getOTC(r):e.createObjectTC({name:r,description:`The result of a fulltext search on an index of ${t.name}`,fields:{[i.SCORE_FIELD]:new n.GraphQLNonNull(n.GraphQLFloat),[t.singular]:`${t.name}!`}})}},53389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withInterfaceType=void 0;let n=r(68944);t.withInterfaceType=function({interfaceEntityAdapter:e,userDefinedFieldDirectives:t,userDefinedInterfaceDirectives:r,composer:i}){let o=(0,n.attributeAdapterToComposeFields)(Array.from(e.attributes.values()),t),a=e.name;return i.createInterfaceTC({name:a,fields:o,directives:(0,n.graphqlDirectivesToCompose)(r)})}},59664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withObjectType=t.getRelationshipPropertiesTypeDescription=void 0;let n=r(57343),i=r(99030),o=r(43232),a=r(68944);function s({relationshipAdapter:e,propertiesObjectType:t}){return t?[t.getDescription(),`* ${e.source.name}.${e.name}`].join("\n"):`The edge properties for the following fields:
* ${e.source.name}.${e.name}`}t.getRelationshipPropertiesTypeDescription=s,t.withObjectType=function({entityAdapter:e,userDefinedFieldDirectives:t,userDefinedObjectDirectives:r,composer:l}){if(e instanceof o.RelationshipAdapter){let n=(0,a.attributeAdapterToComposeFields)(Array.from(e.attributes.values()),t);return l.createObjectTC({name:e.propertiesTypeName,fields:n,directives:(0,a.graphqlDirectivesToCompose)(r),description:s({relationshipAdapter:e})})}let u=(0,a.attributeAdapterToComposeFields)(e.objectFields,t),c=l.createObjectTC({name:e.name,fields:u,description:e.description,directives:(0,a.graphqlDirectivesToCompose)(r),interfaces:e.compositeEntities.filter(e=>e instanceof i.InterfaceEntity).map(e=>e.name)});return e.isGlobalNode()&&(c.setField("id",{type:new n.GraphQLNonNull(n.GraphQLID),resolve:t=>{let r=t[e.globalIdField.name];return e.toGlobalId(r.toString())}}),c.addInterface("Node")),c}},48878:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withCreateFieldInputType=t.withRelationInputType=void 0;let n=r(58388),i=r(64494),o=r(67661),a=r(54627),s=r(26953);function l({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r,userDefinedFieldDirectives:a}){let l=e.operations.getCreateFieldInputTypeName(r);return e.nestedOperations.has(n.RelationshipNestedOperationsOption.CREATE)?t.has(l)?t.getITC(l):t.createInputTC({name:l,fields:function({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r,userDefinedFieldDirectives:n}){let a={};if(e.hasCreateInputFields&&(a.edge=e.operations.edgeCreateInputTypeName),e.target instanceof i.ConcreteEntityAdapter)a.node=`${e.target.operations.createInputTypeName}!`;else if(e.target instanceof o.InterfaceEntityAdapter){let r=(0,s.withCreateInputType)({entityAdapter:e.target,userDefinedFieldDirectives:n,composer:t});r&&(a.node=r.NonNull)}else{if(!r)throw Error("Member Entity required.");let e=(0,s.withCreateInputType)({entityAdapter:r,userDefinedFieldDirectives:n,composer:t});e&&(a.node=e.NonNull)}return a}({relationshipAdapter:e,composer:t,ifUnionMemberEntity:r,userDefinedFieldDirectives:a})}):void 0}t.withRelationInputType=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n}){let s=e.source;if(s instanceof a.UnionEntityAdapter)throw Error("Unexpected union source");let u=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n}){return e.target instanceof i.ConcreteEntityAdapter||e.target instanceof o.InterfaceEntityAdapter?l({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:n}):e.target instanceof a.UnionEntityAdapter?function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n}){let i=e.operations.unionCreateFieldInputTypeName;if(!(e.target instanceof a.UnionEntityAdapter))throw Error("Expected union target");if(t.has(i))return t.getITC(i);let o=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n}){let i={};if(!(e.target instanceof a.UnionEntityAdapter))throw Error("Expected union target");for(let o of e.target.concreteEntities){let a=l({relationshipAdapter:e,ifUnionMemberEntity:o,composer:t,userDefinedFieldDirectives:n});a&&(i[o.name]={type:e.isList?a.NonNull.List:a,directives:r})}return i}({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n});if(Object.keys(o).length)return t.createInputTC({name:i,fields:o})}({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n}):void 0}({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:n,deprecatedDirectives:r});if(!u)return;let c=t.getOrCreateITC(s.operations.relationInputTypeName),p=function({relationshipAdapter:e,createFieldInputType:t,deprecatedDirectives:r}){return e.target instanceof a.UnionEntityAdapter?{[e.name]:{type:t,directives:r}}:{[e.name]:{type:e.isList?t.NonNull.List:t,directives:r}}}({relationshipAdapter:e,createFieldInputType:u,deprecatedDirectives:r});return c.addFields(p),c},t.withCreateFieldInputType=l},55662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withMutationResponseTypes=void 0;let n=r(57343),i=r(97007),o=r(49046),a=r(68944);t.withMutationResponseTypes=function({concreteEntityAdapter:e,propagatedDirectives:t,composer:r}){r.createObjectTC({name:e.operations.mutationResponseTypeNames.create,fields:{info:new n.GraphQLNonNull(i.CreateInfo),[e.plural]:`[${e.name}!]!`},directives:(0,a.graphqlDirectivesToCompose)(t)}),r.createObjectTC({name:e.operations.mutationResponseTypeNames.update,fields:{info:new n.GraphQLNonNull(o.UpdateInfo),[e.plural]:`[${e.name}!]!`},directives:(0,a.graphqlDirectivesToCompose)(t)})}},62950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withSortInputType=t.withOptionsInputType=void 0;let n=r(57343),i=r(58388),o=r(56372),a=r(64494),s=r(43232),l=r(68944);t.withOptionsInputType=function({entityAdapter:e,userDefinedFieldDirectives:t,composer:r}){let u=function({entityAdapter:e,composer:t}){return t.createInputTC({name:e.operations.optionsInputTypeName,fields:{limit:n.GraphQLInt,offset:n.GraphQLInt}})}({entityAdapter:e,composer:r}),c=function({entityAdapter:e,userDefinedFieldDirectives:t,composer:r}){let n=function({entityAdapter:e,userDefinedFieldDirectives:t}){let r={};for(let n of e.sortableFields){let e=(t.get(n.name)||[]).filter(e=>e.name.value===i.DEPRECATED);r[n.name]={type:o.SortDirection,directives:(0,l.graphqlDirectivesToCompose)(e)}}return r}({entityAdapter:e,userDefinedFieldDirectives:t});if(!Object.keys(n).length)return;let a=r.createInputTC({name:e.operations.sortInputTypeName,fields:n});return e instanceof s.RelationshipAdapter||a.setDescription(`Fields to sort ${e.upperFirstPlural} by. The order in which sorts are applied is not guaranteed when specifying many fields in one ${e.operations.sortInputTypeName} object.`),a}({entityAdapter:e,userDefinedFieldDirectives:t,composer:r});if(!c)return u;let p=e instanceof a.ConcreteEntityAdapter?c.NonNull.List:c.List;return u.addFields({sort:{description:`Specify one or more ${e.operations.sortInputTypeName} objects to sort ${e.upperFirstPlural} by. The sorts will be applied in the order in which they are arranged in the array.`,type:p}}),u},t.withSortInputType=function({relationshipAdapter:e,userDefinedFieldDirectives:t,composer:r}){let n={};for(let r of e.attributes.values()){let e=(t.get(r.name)||[]).filter(e=>e.name.value===i.DEPRECATED);n[r.name]={type:o.SortDirection,directives:(0,l.graphqlDirectivesToCompose)(e)}}return r.createInputTC({name:e.operations.sortInputTypeName,fields:n})}},91249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.augmentUpdateInputTypeWithUpdateFieldInput=t.withUpdateInputType=void 0;let n=r(58388),i=r(64494),o=r(67661),a=r(54627),s=r(43232),l=r(55394),u=r(68944),c=r(35816),p=r(41790),d=r(20289),f=r(4202),h=r(49805),y=r(48878);function m({entityAdapter:e,userDefinedFieldDirectives:t,composer:r}){let n=e instanceof s.RelationshipAdapter?e.operations.edgeUpdateInputTypeName:e.operations.updateInputTypeName;if(r.has(n))return r.getITC(n);let o=r.createInputTC({name:n,fields:{}});if(e instanceof i.ConcreteEntityAdapter||e instanceof s.RelationshipAdapter)o.addFields((0,u.concreteEntityToUpdateInputFields)(e.updateInputFields,t,[(0,u.withMathOperators)(),(0,u.withArrayOperators)()]));else{let n=e.relationshipDeclarations.size>0,i=e.updateInputFields.length>0;n||i||(0,l.ensureNonEmptyInput)(r,o),o.addFields((0,u.concreteEntityToUpdateInputFields)(e.updateInputFields,t,[(0,u.withMathOperators)()]))}return o}function v({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:s,features:l}){let u=e.operations.getUpdateFieldInputTypeName(s);return e.shouldGenerateUpdateFieldInputType(s)&&e.isUpdatable()?t.has(u)?t.getITC(u):t.createInputTC({name:u,fields:function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:s,features:l}){let u,v;let g={},b=e.target;if(b instanceof i.ConcreteEntityAdapter)v=e.operations.getConnectionWhereTypename(),u=(0,p.withConnectOrCreateFieldInputType)({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r});else if(b instanceof o.InterfaceEntityAdapter)v=e.operations.getConnectionWhereTypename();else{if(!s)throw Error("Member Entity required.");v=(0,d.withConnectionWhereInputType)({relationshipAdapter:e,memberEntity:s,composer:t,features:l}),u=(0,p.withConnectOrCreateFieldInputType)({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:s})}v&&(g.where={type:v,directives:[]}),u&&(g.connectOrCreate={type:e.isList?u.NonNull.List:u,directives:[]});let _=(0,c.withConnectFieldInputType)({relationshipAdapter:e,ifUnionMemberEntity:s,composer:t});_&&(g.connect={type:e.isList?_.NonNull.List:_,directives:[]});let T=(0,h.withDisconnectFieldInputType)({relationshipAdapter:e,ifUnionMemberEntity:s,composer:t,features:l});T&&(g.disconnect={type:e.isList?T.NonNull.List:T,directives:[]});let E=(0,y.withCreateFieldInputType)({relationshipAdapter:e,ifUnionMemberEntity:s,composer:t,userDefinedFieldDirectives:r});E&&(g.create={type:e.isList?E.NonNull.List:E,directives:[]});let O=function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:i}){let o=e.operations.getUpdateConnectionInputTypename(i);if(!e.nestedOperations.has(n.RelationshipNestedOperationsOption.UPDATE))return;if(t.has(o))return t.getITC(o);let s=function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:n}){let i={};if(e.target instanceof a.UnionEntityAdapter){if(!n)throw Error("Expected member entity");let e=m({entityAdapter:n,userDefinedFieldDirectives:r,composer:t});i.node=e}else i.node=e.target.operations.updateInputTypeName;return e.hasUpdateInputFields&&(i.edge=e.operations.edgeUpdateInputTypeName),i}({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:i});return t.createInputTC({name:o,fields:s})}({relationshipAdapter:e,ifUnionMemberEntity:s,composer:t,userDefinedFieldDirectives:r});O&&(g.update={type:O,directives:[]});let S=(0,f.withDeleteFieldInputType)({relationshipAdapter:e,ifUnionMemberEntity:s,composer:t,features:l});return S&&(g.delete={type:e.isList?S.NonNull.List:S,directives:[]}),g}({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,ifUnionMemberEntity:s,features:l})}):void 0}t.withUpdateInputType=m,t.augmentUpdateInputTypeWithUpdateFieldInput=function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,deprecatedDirectives:n,features:i}){if(e.source instanceof a.UnionEntityAdapter)throw Error("Unexpected union source");let o=function({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,deprecatedDirectives:n,features:i}){return e.target instanceof a.UnionEntityAdapter?function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n,features:i}){let o=e.operations.unionUpdateInputTypeName;if(t.has(o))return t.getITC(o);let s=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n,features:i}){let o={};if(!(e.target instanceof a.UnionEntityAdapter))throw Error("Expected union target");for(let a of e.target.concreteEntities){let s=v({relationshipAdapter:e,ifUnionMemberEntity:a,composer:t,userDefinedFieldDirectives:n,features:i});s&&(o[a.name]={type:e.isList?s.NonNull.List:s,directives:r})}return o}({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedFieldDirectives:n,features:i});if(Object.keys(s).length)return t.createInputTC({name:o,fields:s})}({relationshipAdapter:e,composer:t,deprecatedDirectives:n,userDefinedFieldDirectives:r,features:i}):v({relationshipAdapter:e,composer:t,userDefinedFieldDirectives:r,features:i})}({relationshipAdapter:e,composer:t,deprecatedDirectives:n,userDefinedFieldDirectives:r,features:i});if(!o)return;let s=m({entityAdapter:e.source,userDefinedFieldDirectives:r,composer:t}),l=function({relationshipAdapter:e,updateFieldInput:t,deprecatedDirectives:r}){return e.target instanceof a.UnionEntityAdapter?{[e.name]:{type:t,directives:r}}:{[e.name]:{type:e.isList?t.NonNull.List:t,directives:r}}}({relationshipAdapter:e,updateFieldInput:o,deprecatedDirectives:n});s.addFields(l)}},37277:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldAddDeprecatedFields=t.relationshipTargetHasRelationshipWithNestedOperation=void 0;let n=r(64494);t.relationshipTargetHasRelationshipWithNestedOperation=function(e,t){return e instanceof n.ConcreteEntityAdapter?Array.from(e.relationships.values()).some(e=>e.nestedOperations.has(t)):Array.from(e.relationshipDeclarations.values()).some(e=>e.nestedOperations.has(t))},t.shouldAddDeprecatedFields=function(e,t){return!e?.excludeDeprecatedFields?.[t]}},44629:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withVectorResultTypeConnection=t.withVectorSortInputType=t.withVectorWhereInputType=void 0;let n=r(57343),i=r(58388),o=r(56372),a=r(23281),s=r(41435);t.withVectorWhereInputType=function({composer:e,concreteEntityAdapter:t}){let r=t.operations.vectorTypeNames.where;return e.has(r)?e.getITC(r):e.createInputTC({name:r,description:`The input for filtering a Vector query on an index of ${t.name}`,fields:{[i.SCORE_FIELD]:a.FloatWhere.name,node:t.operations.whereInputTypeName}})},t.withVectorSortInputType=function({composer:e,concreteEntityAdapter:t}){let r=t.operations.vectorTypeNames.sort;return e.has(r)?e.getITC(r):e.createInputTC({name:r,description:`The input for sorting a Vector query on an index of ${t.name}`,fields:{[i.SCORE_FIELD]:o.SortDirection.name,node:t.operations.sortInputTypeName}})},t.withVectorResultTypeConnection=function({composer:e,concreteEntityAdapter:t}){let r=t.operations.vectorTypeNames.result;if(e.has(r))return e.getOTC(r);let o=e.createObjectTC({name:t.operations.vectorTypeNames.edge,fields:{cursor:new n.GraphQLNonNull(n.GraphQLString),node:`${t.name}!`,[i.SCORE_FIELD]:new n.GraphQLNonNull(n.GraphQLFloat)}}),a=e.createObjectTC({name:t.operations.vectorTypeNames.connection,fields:{totalCount:new n.GraphQLNonNull(n.GraphQLInt),pageInfo:new n.GraphQLNonNull(s.PageInfo),edges:o.NonNull.List.NonNull}});return e.createObjectTC({name:r,fields:{[t.operations.rootTypeFieldNames.connection]:a.NonNull}})}},2650:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withConnectWhereFieldInputType=t.withSourceWhereInputType=t.withWhereInputType=t.withUniqueWhereInputType=void 0;let n=r(57343),i=r(64494),o=r(67661),a=r(54627),s=r(43232),l=r(74014),u=r(38237),c=r(38878);t.withUniqueWhereInputType=function({concreteEntityAdapter:e,composer:t}){let r={};for(let t of e.uniqueFields)r[t.name]=t.getFieldTypeName();return t.createInputTC({name:e.operations.uniqueWhereInputTypeName,fields:r})},t.withWhereInputType=function({entityAdapter:e,userDefinedFieldDirectives:t,features:r,composer:u,typeName:c=e.operations.whereInputTypeName,returnUndefinedIfEmpty:p=!1,alwaysAllowNesting:d}){if(u.has(c))return u.getITC(c);let f=function({entityAdapter:e,userDefinedFieldDirectives:t,features:r}){if(e instanceof a.UnionEntityAdapter){let t={};for(let r of e.concreteEntities)t[r.name]=r.operations.whereInputTypeName;return t}return(0,l.getWhereFieldsForAttributes)({attributes:e.whereFields,userDefinedFieldDirectives:t,features:r})}({entityAdapter:e,userDefinedFieldDirectives:t,features:r});if(p&&!Object.keys(f).length)return;let h=u.createInputTC({name:c,fields:f});if((d||e instanceof i.ConcreteEntityAdapter||e instanceof s.RelationshipAdapter||e instanceof o.InterfaceEntityAdapter)&&h.addFields({OR:h.NonNull.List,AND:h.NonNull.List,NOT:h}),e instanceof i.ConcreteEntityAdapter&&e.isGlobalNode()&&h.addFields({id:n.GraphQLID}),e instanceof o.InterfaceEntityAdapter){let t=Object.fromEntries(e.concreteEntities.map(e=>[e.name,{value:e.name}]));if(e.concreteEntities.length>0){let r=u.createEnumTC({name:e.operations.implementationEnumTypename,values:t});h.addFields({typename_IN:{type:r.NonNull.List}})}}return h},t.withSourceWhereInputType=function({relationshipAdapter:e,composer:t,deprecatedDirectives:r,userDefinedDirectivesOnTargetFields:n,features:i}){let o=e.target,s=e.source,l=t.getITC(s.operations.whereInputTypeName),p=(0,c.augmentWhereInputTypeWithRelationshipFields)(e,r,i);l.addFields(p);let d=(0,c.augmentWhereInputTypeWithConnectionFields)(e,r,i);if(l.addFields(d),o instanceof a.UnionEntityAdapter)return;let f=(0,u.withAggregateInputType)({relationshipAdapter:e,entityAdapter:o,composer:t,userDefinedDirectivesOnTargetFields:n,features:i});return e.isFilterableByAggregate()&&l.addFields({[e.operations.aggregateTypeName]:{type:f,directives:r}}),l},t.withConnectWhereFieldInputType=function(e,t){let r=e.operations.connectWhereInputTypeName;return t.has(r)?t.getITC(r):t.createInputTC({name:r,fields:{node:`${e.operations.whereInputTypeName}!`}})}},91886:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(52462));t.default=function(e){let t=e.arguments?.find(e=>"property"===e.name.value);if(!t)throw Error("@alias property argument is required");let r=t.value.value;return{property:i.default.utils.escapeProperty(r),propertyUnescaped:r}}},40570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectionSetToResolveTree=t.getCustomResolverMeta=t.INVALID_SELECTION_SET_ERROR=t.INVALID_REQUIRED_FIELD_ERROR=void 0;let n=r(57343),i=r(98312),o=["customResolver"];function a(e,r,a,s,l){if(1!==l.definitions.length)throw Error(t.INVALID_SELECTION_SET_ERROR);let u=l.definitions[0];if(!u||u.kind!==n.Kind.OPERATION_DEFINITION)throw Error(t.INVALID_SELECTION_SET_ERROR);return function e(r,a,s,l,u,c){return u.selections.reduce((u,p)=>{let d={};if(p.kind===n.Kind.FRAGMENT_SPREAD)throw Error("Fragment spreads are not supported in @customResolver requires");if(p.kind===n.Kind.INLINE_FRAGMENT){if(!p.selectionSet)return u;let r=p.typeCondition?.name.value;if(!r)throw Error(t.INVALID_SELECTION_SET_ERROR);let n=a.find(e=>e.name.value===r)?.fields;if(!n)throw Error(t.INVALID_SELECTION_SET_ERROR);let i=e(n,a,s,l,p.selectionSet);return{...u,[r]:i}}if(p.selectionSet){let i=r.find(e=>e.name.value===p.name.value),o=function e(r){if(!r)throw Error(t.INVALID_SELECTION_SET_ERROR);return r.kind!==n.Kind.NAMED_TYPE?e(r.type):r.name.value}(i?.type);d=e(function({fieldType:e,objects:r,interfaces:n,unions:i}){let o=i.find(t=>t.name.value===e)?.types,a=[...r,...n].find(t=>t.name.value===e)?.fields||o?.flatMap(e=>[...r,...n].find(t=>t.name.value===e.name.value)?.fields||[]);if(!a)throw Error(t.INVALID_SELECTION_SET_ERROR);return a}({fieldType:o,objects:a,interfaces:s,unions:l}),a,s,l,p.selectionSet,o)}return(function({selection:e,outerFieldType:r,objectFields:n,objects:i}){let a=[n.find(t=>t.name.value===e.name.value)];if(i.filter(e=>e.interfaces?.find(e=>e.name.value===r)).forEach(t=>t.fields?.forEach(t=>{t.name.value===e.name.value&&a.push(t)})),a.find(e=>e?.directives?.find(e=>o.includes(e.name.value))))throw Error(t.INVALID_REQUIRED_FIELD_ERROR)}({selection:p,outerFieldType:c,objectFields:r,objects:a}),c)?{...u,[c]:{...u[c],...(0,i.generateResolveTree)({name:p.name.value,fieldsByTypeName:d})}}:{...u,...(0,i.generateResolveTree)({name:p.name.value,fieldsByTypeName:d})}},{})}(e,r,a,s,u.selectionSet)}t.INVALID_REQUIRED_FIELD_ERROR=`It is not possible to require fields that use the following directives: ${o.map(e=>`\`@${e}\``).join(", ")}`,t.INVALID_SELECTION_SET_ERROR="Invalid selection set passed to @customResolver required",t.getCustomResolverMeta=function({field:e,object:t,objects:r,interfaces:i,unions:o,customResolvers:s,interfaceField:l}){let u=e.directives?.find(e=>"customResolver"===e.name.value)||l?.directives?.find(e=>"customResolver"===e.name.value);if(!u)return;t.kind===n.Kind.INTERFACE_TYPE_DEFINITION||s?.[e.name.value]||console.warn(`Custom resolver for ${e.name.value} has not been provided`);let c=u?.arguments?.find(e=>"requires"===e.name.value);if(!c)return{requiredFields:{}};if(c?.value.kind!==n.Kind.STRING)throw Error("@customResolver requires expects a string");let p=(0,n.parse)(`{ ${c.value.value} }`),d=a(t.fields||[],r,i,o,p);if(d)return{requiredFields:d}},t.selectionSetToResolveTree=a},44506:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(57343),i=r(99227);t.default=function(e){return(e.definitions||[]).reduce((e,t)=>{if(t.kind!==n.Kind.OBJECT_TYPE_DEFINITION||!(0,i.isRootType)(t))return e;let r=(t.fields||[]).filter(e=>e.directives&&e.directives.find(e=>"cypher"===e.name.value)),o=(t.fields||[]).filter(e=>e.directives&&!e.directives.find(e=>"cypher"===e.name.value)||!e.directives);return"Query"===t.name.value&&(r.length&&(e.customCypherQuery={...t,fields:r}),o.length&&(e.customQuery={...t,fields:o})),"Mutation"===t.name.value&&(r.length&&(e.customCypherMutation={...t,fields:r}),o.length&&(e.customMutation={...t,fields:o})),"Subscription"===t.name.value&&o.length&&(e.customSubscription={...t,fields:o}),e},{})}},73871:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCypherMeta=void 0;let n=r(57343);t.getCypherMeta=function(e,t){let r=e.directives?.find(e=>"cypher"===e.name.value)||t?.directives?.find(e=>"cypher"===e.name.value);if(r)return{statement:function(e){let t=e.arguments?.find(e=>"statement"===e.name.value);if(!t)throw Error("@cypher statement required");if(t.value.kind!==n.Kind.STRING)throw Error("@cypher statement is not a string");return t.value.value}(r),columnName:function(e){let t=e.arguments?.find(e=>"columnName"===e.name.value);if(!t)throw Error("@cypher columnName required");if(t.value.kind!==n.Kind.STRING)throw Error("@cypher columnName is not a string");return t.value.value}(r)}}},59751:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getDefinitionNodes=void 0;let i=n(r(19092)),o=r(57343),a=r(99227),s=r(58388),l=(0,i.default)(s.DEBUG_GENERATE);t.getDefinitionNodes=function(e){return e.definitions.reduce((e,t)=>{switch(t.kind){case o.Kind.SCALAR_TYPE_DEFINITION:e.scalarTypes.push(t);break;case o.Kind.OBJECT_TYPE_DEFINITION:(0,a.isRootType)(t)?e.operations.push(t):e.objectTypes.push(t);break;case o.Kind.ENUM_TYPE_DEFINITION:e.enumTypes.push(t);break;case o.Kind.INPUT_OBJECT_TYPE_DEFINITION:e.inputObjectTypes.push(t);break;case o.Kind.INTERFACE_TYPE_DEFINITION:e.interfaceTypes.push(t);break;case o.Kind.DIRECTIVE_DEFINITION:e.directives.push(t);break;case o.Kind.UNION_TYPE_DEFINITION:e.unionTypes.push(t);break;case o.Kind.SCHEMA_EXTENSION:e.schemaExtensions.push(t);break;case o.Kind.SCHEMA_DEFINITION:break;default:l(`Ignoring definition kind ${t.kind}`)}return e},{objectTypes:[],inputObjectTypes:[],enumTypes:[],scalarTypes:[],interfaceTypes:[],directives:[],unionTypes:[],schemaExtensions:[],operations:[]})}},78604:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(57343);function i(e){let t;switch(e.kind){case n.Kind.NAMED_TYPE:t=e.name.value;break;case n.Kind.NON_NULL_TYPE:t=`${i(e.type)}!`;break;case n.Kind.LIST_TYPE:t=`[${i(e.type)}]`}return t}t.default=function(e){let t=function e(t){return t.kind===n.Kind.NAMED_TYPE?t.name.value:e(t.type)}(e),r=i(e),o=/\[.+\]/g.test(r),a=e.kind===n.Kind.NON_NULL_TYPE,s=!1;o&&(s=i(e.type).includes("!"));let l=["Point","CartesianPoint"].includes(t),u=t;l&&(u="Point"===t?"PointInput":"CartesianPointInput");let c=u;return o&&(c=`[${u}${s?"!":""}]`),{name:t,array:o,required:a,pretty:r,input:{where:{type:u,pretty:c},create:{type:t,pretty:`${c}${a?"!":""}`},update:{type:t,pretty:c}},originalType:e}}},15538:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(44706),o=r(14178),a=n(r(57779)),s=n(r(87687)),l=n(r(14337)),u=r(53038),c=n(r(12438));t.default=function(e,t){let r=!1,n=!1,p=!1,d=new Set,f=new Set;return{nodes:e.objectTypes.filter(e=>{let t=(e.directives||[]).map(e=>e.name.value);return!(0,o.haveSharedElement)(t,["relationshipProperties"])}).map(h=>{let y,m,v;let g=(h.directives||[]).filter(e=>!["authorization","authentication","exclude","node","fulltext","limit","plural","shareable","subscriptionsAuthorization","deprecated","query","mutation","subscription","jwt"].includes(e.name.value)),b=(h.directives||[]).filter(e=>["deprecated","shareable"].includes(e.name.value)),_=(h.directives||[]).find(e=>"node"===e.name.value),T=(h.directives||[]).find(e=>"plural"===e.name.value),E=(h.directives||[]).find(e=>"fulltext"===e.name.value),O=(h.directives||[]).find(e=>"limit"===e.name.value),S=[...h.interfaces||[]];_&&(y=(0,s.default)(_));let w=(0,o.asArray)(t.userCustomResolvers),I=w.find(e=>!!e[h.name.value])?.[h.name.value],N=(0,a.default)({obj:h,enums:e.enumTypes,interfaces:e.interfaceTypes,objects:e.objectTypes,scalars:e.scalarTypes,unions:e.unionTypes,callbacks:t.callbacks,customResolvers:I});E&&(m=(0,l.default)({directive:E,nodeFields:N,definition:h}),p=!0),O&&(v=(0,u.parseLimitDirective)({directive:O,definition:h})),N.relationFields.forEach(e=>{e.properties&&d.add(e.properties),e.interface&&f.add(e.typeMeta.name)}),r||(r=N.pointFields.some(e=>"Point"===e.typeMeta.name)),n||(n=N.pointFields.some(e=>"CartesianPoint"===e.typeMeta.name));let A=N.primitiveFields.filter(e=>e.isGlobalIdField)[0];return new i.Node({name:h.name.value,interfaces:S,otherDirectives:g,propagatedDirectives:b,...N,nodeDirective:y,fulltextDirective:m,limitDirective:v,description:h.description?.value,isGlobalNode:!!A,globalIdField:A?.fieldName,globalIdFieldIsInt:A?.typeMeta?.name==="Int",plural:(0,c.default)(T)})}),pointInTypeDefs:r,cartesianPointInTypeDefs:n,floatWhereInTypeDefs:p,relationshipPropertyInterfaceNames:d,interfaceRelationshipNames:f}}},57779:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(57343),o=r(58388),a=r(16747),s=r(95349),l=r(32439),u=n(r(91886)),c=r(40570),p=r(73871),d=n(r(78604)),f=r(28817),h=n(r(7724)),y=n(r(87096));t.default=function({obj:e,objects:t,interfaces:r,scalars:n,unions:m,enums:v,callbacks:g,customResolvers:b}){let _=[...e.interfaces||[]],T=r.filter(e=>_.map(e=>e.name.value).includes(e.name.value));return e?.fields?.reduce((_,E)=>{let O=T.find(e=>e.fields?.map(e=>e.name.value).includes(E.name.value))?.fields?.find(e=>e.name.value===E.name.value),S=[...E?.directives||[],...(O?.directives||[]).filter(e=>!E.directives?.find(t=>t.name.value===e.name.value))];if(S.some(e=>"private"===e.name.value))return _;let w=h.default(E,O),I=p.getCypherMeta(E,O),N=c.getCustomResolverMeta({field:E,object:e,objects:t,interfaces:r,unions:m,customResolvers:b,interfaceField:O}),A=d.default(E.type),C=S.find(e=>"id"===e.name.value),P=S.find(e=>"relayId"===e.name.value),R=S.find(e=>"default"===e.name.value),D=S.find(e=>"coalesce"===e.name.value),F=S.find(e=>"timestamp"===e.name.value),j=S.find(e=>"alias"===e.name.value),L=S.find(e=>"populatedBy"===e.name.value),x=S.find(e=>"selectable"===e.name.value),M=S.find(e=>"settable"===e.name.value),k=S.find(e=>"filterable"===e.name.value),$=y.default(S,e,E.name.value),U=r.find(e=>e.name.value===A.name),V=m.find(e=>e.name.value===A.name),G=n.find(e=>e.name.value===A.name),q=v.find(e=>e.name.value===A.name),B=t.find(e=>e.name.value===A.name),W=o.TEMPORAL_SCALAR_TYPES.includes(A.name),H=o.SPATIAL_TYPES.includes(A.name),Q=function(e){let t={onRead:!0,onAggregate:!0},r=e?(0,a.parseArgumentsFromUnknownDirective)(e):{};return{onRead:r.onRead??t.onRead,onAggregate:r.onAggregate??t.onAggregate}}(x),K=function(e){let t={onCreate:!0,onUpdate:!0},r=e?(0,a.parseArgumentsFromUnknownDirective)(e):{};return{onCreate:r.onCreate??t.onCreate,onUpdate:r.onUpdate??t.onUpdate}}(M),z=function(e){let t={byValue:!0,byAggregate:void 0===e},r=e?(0,a.parseArgumentsFromUnknownDirective)(e):{};return{byValue:r.byValue??t.byValue,byAggregate:r.byAggregate??t.byAggregate}}(k),Y={fieldName:E.name.value,dbPropertyName:E.name.value,typeMeta:A,selectableOptions:Q,settableOptions:K,filterableOptions:z,otherDirectives:(S||[]).filter(e=>!["relationship","cypher","id","authorization","authentication","customResolver","default","coalesce","timestamp","alias","unique","callback","populatedBy","jwtClaim","selectable","settable","subscriptionsAuthorization","filterable","relayId"].includes(e.name.value)),arguments:[...E.arguments||[]],description:E.description?.value,...$?{unique:$}:{}};if(j){let e=u.default(j);e&&(Y.dbPropertyName=e.property,Y.dbPropertyNameUnescaped=e.propertyUnescaped)}if(w){let n={...Y,...w,inherited:!1};if(V){let e=[];V.types?.forEach(t=>{e.push(t.name.value)});let t={...Y,nodes:e};n.union=t}if(U){let e=t.filter(e=>e.interfaces?.some(e=>e.name.value===U.name.value)).map(e=>e.name.value);n.interface={...Y,implementations:e}}let i=e.name.value;if(e.interfaces&&e.interfaces.length){let t=e.interfaces[0];if(!t)throw Error("Cannot get interface in getObjFieldMeta");let o=r.find(e=>e.name.value===t.name.value);o.fields?.some(e=>e.name.value===Y.fieldName)&&(i=t.name.value,n.inherited=!0)}n.connectionPrefix=i;let o=`${i}${l.upperFirst(`${Y.fieldName}Connection`)}`,a=`${i}${l.upperFirst(`${Y.fieldName}Relationship`)}`,s={fieldName:`${Y.fieldName}Connection`,relationshipTypeName:a,selectableOptions:Q,settableOptions:K,filterableOptions:z,typeMeta:{name:o,required:!0,pretty:`${o}!`,input:{where:{type:`${o}Where`,pretty:`${o}Where`},create:{type:"",pretty:""},update:{type:"",pretty:""}}},otherDirectives:Y.otherDirectives,arguments:[...E.arguments||[]],description:E.description?.value,relationship:n};_.relationFields.push(n),_.connectionFields.push(s)}else if(I){let e={...Y,...I,isEnum:!!q,isScalar:!!G||o.SCALAR_TYPES.includes(A.name)};_.cypherFields.push(e)}else if(N)_.customResolverFields.push({...Y,...N});else if(G){let e={...Y};_.scalarFields.push(e)}else if(q){let e={kind:"Enum",...Y};if(R){let t=R.arguments?.find(e=>"value"===e.name.value)?.value;e.typeMeta.array?e.defaultValue=t.values.map(e=>e.value):e.defaultValue=t.value}if(D){let t=D.arguments?.find(e=>"value"===e.name.value)?.value;e.typeMeta.array?e.coalesceValue=t.values.map(e=>e.value):e.coalesceValue=`"${t.value}"`}_.enumFields.push(e)}else if(V){let e={...Y};_.unionFields.push(e)}else if(U)_.interfaceFields.push({...Y});else if(B){let e={...Y};_.objectFields.push(e)}else if(W){let e={...Y};if(L){let t=f.getPopulatedByMeta(L,g);e.callback=t}if(F){let t=F?.arguments?.find(e=>"operations"===e.name.value)?.value,r=t?t?.values.map(e=>s.parseValueNode(e)):["CREATE","UPDATE"];e.timestamps=r}if(R){let t=R.arguments?.find(e=>"value"===e.name.value)?.value;e.defaultValue=t.value}_.temporalFields.push(e)}else if(H){let e={...Y};_.pointFields.push(e)}else{let t={...Y};if(L){let e=f.getPopulatedByMeta(L,g);t.callback=e}if(C){let e=C.arguments?.find(e=>"autogenerate"===e.name.value);(!e||e.value.value)&&(t.autogenerate=!0)}if(P&&(t.isGlobalIdField=!0),R){let r=R.arguments?.find(e=>"value"===e.name.value)?.value,n=`Default value for ${e.name.value}.${t.fieldName} does not have matching type ${t.typeMeta.name}`;switch(Y.typeMeta.name){case"ID":case"String":if(r?.kind!==i.Kind.STRING)throw Error(n);t.defaultValue=r.value;break;case"Boolean":if(r?.kind!==i.Kind.BOOLEAN)throw Error(n);t.defaultValue=r.value;break;case"Int":if(r?.kind!==i.Kind.INT)throw Error(n);t.defaultValue=parseInt(r.value,10);break;case"Float":if(r?.kind!==i.Kind.FLOAT)throw Error(n);t.defaultValue=parseFloat(r.value);break;default:throw Error("@default directive can only be used on types: Int | Float | String | Boolean | ID | DateTime | Enum")}}if(D){let r=D.arguments?.find(e=>"value"===e.name.value)?.value,n=`coalesce() value for ${e.name.value}.${t.fieldName} does not have matching type ${t.typeMeta.name}`;switch(Y.typeMeta.name){case"ID":case"String":if(r?.kind!==i.Kind.STRING)throw Error(n);t.coalesceValue=`"${r.value}"`;break;case"Boolean":if(r?.kind!==i.Kind.BOOLEAN)throw Error(n);t.coalesceValue=r.value;break;case"Int":if(r?.kind!==i.Kind.INT)throw Error(n);t.coalesceValue=parseInt(r.value,10);break;case"Float":if(r?.kind!==i.Kind.FLOAT)throw Error(n);t.coalesceValue=parseFloat(r.value);break;default:throw Error("@coalesce directive can only be used on types: Int | Float | String | Boolean | ID | DateTime")}}_.primitiveFields.push(t)}return _},{relationFields:[],connectionFields:[],primitiveFields:[],cypherFields:[],scalarFields:[],enumFields:[],unionFields:[],interfaceFields:[],objectFields:[],temporalFields:[],pointFields:[],customResolverFields:[]})}},28817:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPopulatedByMeta=void 0,t.getPopulatedByMeta=function(e,t){let r=e.arguments?.find(e=>"operations"===e.name.value),n=e.arguments?.find(e=>"callback"===e.name.value),i=r.value.values.map(e=>e.value),o=n?.value?.value;if("function"!=typeof(t||{})[o])throw Error(`PopulatedBy callback '${o}' must be of type function`);return{operations:i,callbackName:o}}},7724:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(24684),o=r(16747),a=n(r(52462));t.default=function(e,t){let r=e.directives?.find(e=>"relationship"===e.name.value)||t?.directives?.find(e=>"relationship"===e.name.value);if(!r)return;let n=(0,o.parseArguments)(i.relationshipDirective,r),s=n.type,l=a.default.utils.escapeLabel(s);return{...n,type:l,typeUnescaped:s}}},60965:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResolveAndSubscriptionMethods=void 0,t.getResolveAndSubscriptionMethods=function(e){let t=e.getResolveMethods(),r=Object.entries(e.Subscription.getFields()).reduce((e,[t,r])=>(r.subscribe&&r.resolve&&(e[t]={subscribe:r.subscribe,resolve:r.resolve}),e),{});return{...t,Subscription:r}}},74014:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWhereFieldsForAttributes=void 0;let n=r(58388),i=r(49798),o=r(37277),a=r(68944);t.default=function({typeName:e,fields:t,isInterface:r,features:s}){return{...r?{}:{OR:`[${e}Where!]`,AND:`[${e}Where!]`,NOT:`${e}Where`},...[...t.primitiveFields,...t.temporalFields,...t.enumFields,...t.pointFields,...t.scalarFields].reduce((e,t)=>{if(!1===t.filterableOptions.byValue)return e;let r=(0,a.graphqlDirectivesToCompose)(t.otherDirectives.filter(e=>e.name.value===n.DEPRECATED));if(e[t.fieldName]={type:t.typeMeta.input.where.pretty,directives:r},(0,o.shouldAddDeprecatedFields)(s,"negationFilters")&&(e[`${t.fieldName}_NOT`]={type:t.typeMeta.input.where.pretty,directives:r.length?r:[i.DEPRECATE_NOT]}),"Boolean"===t.typeMeta.name)return e;if(t.typeMeta.array)return e[`${t.fieldName}_INCLUDES`]={type:t.typeMeta.input.where.type,directives:r},(0,o.shouldAddDeprecatedFields)(s,"negationFilters")&&(e[`${t.fieldName}_NOT_INCLUDES`]={type:t.typeMeta.input.where.type,directives:r.length?r:[i.DEPRECATE_NOT]}),e;if(e[`${t.fieldName}_IN`]={type:`[${t.typeMeta.input.where.pretty}${t.typeMeta.required?"!":""}]`,directives:r},(0,o.shouldAddDeprecatedFields)(s,"negationFilters")&&(e[`${t.fieldName}_NOT_IN`]={type:`[${t.typeMeta.input.where.pretty}${t.typeMeta.required?"!":""}]`,directives:r.length?r:[i.DEPRECATE_NOT]}),["Float","Int","BigInt","DateTime","Date","LocalDateTime","Time","LocalTime","Duration"].includes(t.typeMeta.name))return["_LT","_LTE","_GT","_GTE"].forEach(n=>{e[`${t.fieldName}${n}`]={type:t.typeMeta.name,directives:r}}),e;if(["Point","CartesianPoint"].includes(t.typeMeta.name))return["_DISTANCE","_LT","_LTE","_GT","_GTE"].forEach(n=>{e[`${t.fieldName}${n}`]={type:`${t.typeMeta.name}Distance`,directives:r}}),e;if(["String","ID"].includes(t.typeMeta.name)){let n=[{comparator:"_CONTAINS",typeName:t.typeMeta.name},{comparator:"_STARTS_WITH",typeName:t.typeMeta.name},{comparator:"_ENDS_WITH",typeName:t.typeMeta.name}];Object.entries(s?.filters?.[t.typeMeta.name]||{}).forEach(([e,r])=>{r&&("MATCHES"===e?n.push({comparator:`_${e}`,typeName:"String"}):n.push({comparator:`_${e}`,typeName:t.typeMeta.name}))}),n.forEach(({comparator:n,typeName:i})=>{e[`${t.fieldName}${n}`]={type:i,directives:r}}),(0,o.shouldAddDeprecatedFields)(s,"negationFilters")&&["_NOT_CONTAINS","_NOT_STARTS_WITH","_NOT_ENDS_WITH"].forEach(n=>{e[`${t.fieldName}${n}`]={type:t.typeMeta.name,directives:r.length?r:[i.DEPRECATE_NOT]}})}return e},{})}},t.getWhereFieldsForAttributes=function({attributes:e,userDefinedFieldDirectives:t,features:r}){let s={};for(let l of e){let e=t?.get(l.name),u=(0,a.graphqlDirectivesToCompose)((e??[]).filter(e=>e.name.value===n.DEPRECATED));if(s[l.name]={type:l.getInputTypeNames().where.pretty,directives:u},(0,o.shouldAddDeprecatedFields)(r,"negationFilters")&&(s[`${l.name}_NOT`]={type:l.getInputTypeNames().where.pretty,directives:u.length?u:[i.DEPRECATE_NOT]}),!l.typeHelper.isBoolean()){if(l.typeHelper.isList()){s[`${l.name}_INCLUDES`]={type:l.getInputTypeNames().where.type,directives:u},(0,o.shouldAddDeprecatedFields)(r,"negationFilters")&&(s[`${l.name}_NOT_INCLUDES`]={type:l.getInputTypeNames().where.type,directives:u.length?u:[i.DEPRECATE_NOT]});continue}if(s[`${l.name}_IN`]={type:l.getFilterableInputTypeName(),directives:u},(0,o.shouldAddDeprecatedFields)(r,"negationFilters")&&(s[`${l.name}_NOT_IN`]={type:l.getFilterableInputTypeName(),directives:u.length?u:[i.DEPRECATE_NOT]}),l.isNumericalOrTemporal()){["_LT","_LTE","_GT","_GTE"].forEach(e=>{s[`${l.name}${e}`]={type:l.getInputTypeNames().where.type,directives:u}});continue}if(l.typeHelper.isSpatial()){["_DISTANCE","_LT","_LTE","_GT","_GTE"].forEach(e=>{s[`${l.name}${e}`]={type:`${l.getTypeName()}Distance`,directives:u}});continue}if(l.typeHelper.isString()||l.typeHelper.isID()){let e=[{comparator:"_CONTAINS",typeName:l.getInputTypeNames().where.type},{comparator:"_STARTS_WITH",typeName:l.getInputTypeNames().where.type},{comparator:"_ENDS_WITH",typeName:l.getInputTypeNames().where.type}];Object.entries(r?.filters?.[l.getInputTypeNames().where.type]||{}).forEach(([t,r])=>{r&&("MATCHES"===t?e.push({comparator:`_${t}`,typeName:"String"}):e.push({comparator:`_${t}`,typeName:l.getInputTypeNames().where.type}))}),e.forEach(({comparator:e,typeName:t})=>{s[`${l.name}${e}`]={type:t,directives:u}}),(0,o.shouldAddDeprecatedFields)(r,"negationFilters")&&["_NOT_CONTAINS","_NOT_STARTS_WITH","_NOT_ENDS_WITH"].forEach(e=>{s[`${l.name}${e}`]={type:l.getInputTypeNames().where.type,directives:u.length?u:[i.DEPRECATE_NOT]}})}}}return s}},56235:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.makeAugmentedSchema=void 0;var i=r(51981);Object.defineProperty(t,"makeAugmentedSchema",{enumerable:!0,get:function(){return n(i).default}})},51981:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let s=r(57343),l=r(1109),u=o(r(65639)),c=r(75625),p=r(61120),d=r(55394),f=a(r(44506)),h=r(59751),y=a(r(57779)),m=r(99417),v=r(52697),g=r(9250),b=r(74848),_=r(48980),T=r(7885),E=r(67648),O=r(68944),S=r(69981),w=r(58388),I=r(97007),N=r(23084),A=r(41435),C=r(49046),P=r(49286),R=r(33559),D=r(99030),F=r(90681),j=r(64494),L=r(67661),x=r(54627),M=r(87401),k=r(14178),$=r(4238),U=r(96265),V=r(8724),G=r(37827),q=r(29457),B=r(4453),W=r(38237),H=r(26953),Q=r(53389),K=r(59664),z=r(55662),Y=r(62950),J=r(91249),X=r(37277),Z=r(2650),ee=a(r(15538)),et=r(60965),er=r(46642),en=r(93246),ei=r(87826);function eo(e){return"name"in e}t.default=function({document:e,features:t,userCustomResolvers:r,subgraph:n,schemaModel:i}){let o=new l.SchemaComposer,a=t?.populatedBy?.callbacks,ea=[],es=(0,h.getDefinitionNodes)(e),el=(0,f.default)(e),{interfaceTypes:eu,scalarTypes:ec,objectTypes:ep,enumTypes:ed,unionTypes:ef,schemaExtensions:eh}=es,ey=new B.AugmentedSchemaGenerator(i,es,[el.customQuery,el.customMutation,el.customSubscription].filter(e=>!!e)).generate();o.merge(ey);let em=[...es.enumTypes,...es.scalarTypes,...es.inputObjectTypes,...es.unionTypes,...es.directives,...(0,k.filterTruthy)([el.customQuery,el.customMutation,el.customSubscription])];for(let[e,r]of(em.length&&o.addTypeDefs((0,s.print)({kind:s.Kind.DOCUMENT,definitions:em})),q.bookmarkDeprecationMap)){let n=o.getOTC(e);(0,X.shouldAddDeprecatedFields)(t,"bookmark")?n.deprecateFields(r.reduce((e,{field:t,reason:r})=>({...e,[t]:r}),{})):n.removeField(r.map(e=>e.field))}if(n){let e=n.getFullyQualifiedDirectiveName(w.SHAREABLE);[I.CreateInfo.name,C.UpdateInfo.name,N.DeleteInfo.name,A.PageInfo.name].forEach(t=>{o.getOTC(t).setDirectiveByName(e)})}let ev=new c.AggregationTypesMapper(o,n),{nodes:eg,relationshipPropertyInterfaceNames:eb,interfaceRelationshipNames:e_}=(0,ee.default)(es,{callbacks:a,userCustomResolvers:r}),eT=(0,V.addGlobalNodeFields)(eg,o,i.concreteEntities),{filteredInterfaceTypes:eE}=(0,er.filterInterfaceTypes)(eu,e_),eO=ep.filter(e=>eb.has(e.name.value)),{userDefinedFieldDirectivesForNode:eS,userDefinedDirectivesForNode:ew,propagatedDirectivesForNode:eI,userDefinedDirectivesForInterface:eN,userDefinedDirectivesForUnion:eA}=(0,en.getUserDefinedDirectives)(es),eC=new Map;eO.forEach(e=>{let t=(0,y.default)({enums:ed,interfaces:eE,objects:ep,scalars:ec,unions:ef,obj:e,callbacks:a});eC.set(e.name.value,t)});let eP=new Set;if(i.entities.forEach(e=>{if(e instanceof F.UnionEntity){let r=new x.UnionEntityAdapter(e);(0,Z.withWhereInputType)({entityAdapter:r,userDefinedFieldDirectives:new Map,features:t,composer:o}),o.getUTC(r.name).setDirectives((0,O.graphqlDirectivesToCompose)(eA.get(r.name)||[])),r.isReadable&&o.Query.addFields({[r.operations.rootTypeFieldNames.read]:(0,T.findResolver)({entityAdapter:r})});return}if(e instanceof D.InterfaceEntity){let r=new L.InterfaceEntityAdapter(e);(function({composer:e,interfaceEntityAdapter:t,features:r,subgraph:n,userDefinedFieldDirectivesForNode:i,userDefinedInterfaceDirectives:o,propagatedDirectivesForNode:a,aggregationTypesMapper:s,seenRelationshipPropertiesTypes:l}){let u=i.get(t.name);(0,Y.withOptionsInputType)({entityAdapter:t,userDefinedFieldDirectives:u,composer:e}),(0,Z.withWhereInputType)({entityAdapter:t,userDefinedFieldDirectives:u,features:r,composer:e}),(0,H.withCreateInputType)({entityAdapter:t,userDefinedFieldDirectives:u,composer:e}),(0,J.withUpdateInputType)({entityAdapter:t,userDefinedFieldDirectives:u,composer:e});let c=(0,Q.withInterfaceType)({interfaceEntityAdapter:t,userDefinedFieldDirectives:u,userDefinedInterfaceDirectives:o,composer:e});(0,G.createRelationshipFields)({entityAdapter:t,schemaComposer:e,composeNode:c,subgraph:n,userDefinedFieldDirectives:u,userDefinedDirectivesForNode:new Map,userDefinedFieldDirectivesForNode:i,features:r,seenRelationshipPropertiesTypes:l});let p=a.get(t.name)||[];t.isReadable&&(e.Query.addFields({[t.operations.rootTypeFieldNames.read]:(0,T.findResolver)({entityAdapter:t})}),e.Query.setFieldDirectives(t.operations.rootTypeFieldNames.read,(0,O.graphqlDirectivesToCompose)(p)),e.Query.addFields({[t.operations.rootTypeFieldNames.connection]:(0,E.rootConnectionResolver)({composer:e,entityAdapter:t,propagatedDirectives:p})}),e.Query.setFieldDirectives(t.operations.rootTypeFieldNames.connection,(0,O.graphqlDirectivesToCompose)(p))),t.isAggregable&&((0,W.withAggregateSelectionType)({entityAdapter:t,aggregationTypesMapper:s,propagatedDirectives:p,composer:e}),e.Query.addFields({[t.operations.rootTypeFieldNames.aggregate]:(0,_.aggregateResolver)({entityAdapter:t})}),e.Query.setFieldDirectives(t.operations.rootTypeFieldNames.aggregate,(0,O.graphqlDirectivesToCompose)(p)))})({composer:o,interfaceEntityAdapter:r,subgraph:n,userDefinedInterfaceDirectives:eN.get(e.name)||[],userDefinedFieldDirectivesForNode:eS,propagatedDirectivesForNode:eI,aggregationTypesMapper:ev,seenRelationshipPropertiesTypes:eP,features:t});let i=(0,U.createConnectionFields)({entityAdapter:r,relationshipFields:eC});ea=[...ea,...i];return}if(e instanceof R.ConcreteEntity){let r=eg.find(t=>t.name===e.name);if(!r)throw Error(`Node not found with the name ${e.name}`);let i=new j.ConcreteEntityAdapter(e),a=eS.get(i.name);if(!a)throw Error(`User defined field directives not found for ${i.name}`);let s=eI.get(e.name)||[];(function({composer:e,concreteEntityAdapter:t,features:r,subgraph:n,userDefinedFieldDirectives:i,userDefinedObjectDirectives:o,propagatedDirectives:a,aggregationTypesMapper:s,node:l,seenRelationshipPropertiesTypes:u,userDefinedDirectivesForNode:c,userDefinedFieldDirectivesForNode:f}){(0,Y.withOptionsInputType)({entityAdapter:t,userDefinedFieldDirectives:i,composer:e}),(0,Z.withWhereInputType)({entityAdapter:t,userDefinedFieldDirectives:i,features:r,composer:e}),(0,p.augmentFulltextSchema)(l,e,t),(0,$.augmentVectorSchema)({composer:e,concreteEntityAdapter:t,features:r}),(0,Z.withUniqueWhereInputType)({concreteEntityAdapter:t,composer:e}),(0,H.withCreateInputType)({entityAdapter:t,userDefinedFieldDirectives:i,composer:e}),(0,J.withUpdateInputType)({entityAdapter:t,userDefinedFieldDirectives:i,composer:e}),(0,z.withMutationResponseTypes)({concreteEntityAdapter:t,propagatedDirectives:a,composer:e});let h=(0,K.withObjectType)({entityAdapter:t,userDefinedFieldDirectives:i,userDefinedObjectDirectives:o,composer:e});(0,G.createRelationshipFields)({entityAdapter:t,schemaComposer:e,composeNode:h,subgraph:n,userDefinedFieldDirectives:i,userDefinedDirectivesForNode:c,userDefinedFieldDirectivesForNode:f,features:r,seenRelationshipPropertiesTypes:u}),(0,d.ensureNonEmptyInput)(e,t.operations.updateInputTypeName),(0,d.ensureNonEmptyInput)(e,t.operations.createInputTypeName),t.isReadable&&(e.Query.addFields({[t.operations.rootTypeFieldNames.read]:(0,T.findResolver)({entityAdapter:t})}),e.Query.setFieldDirectives(t.operations.rootTypeFieldNames.read,(0,O.graphqlDirectivesToCompose)(a)),e.Query.addFields({[t.operations.rootTypeFieldNames.connection]:(0,E.rootConnectionResolver)({composer:e,entityAdapter:t,propagatedDirectives:a})}),e.Query.setFieldDirectives(t.operations.rootTypeFieldNames.connection,(0,O.graphqlDirectivesToCompose)(a))),t.isAggregable&&((0,W.withAggregateSelectionType)({entityAdapter:t,aggregationTypesMapper:s,propagatedDirectives:a,composer:e}),e.Query.addFields({[t.operations.rootTypeFieldNames.aggregate]:(0,_.aggregateResolver)({entityAdapter:t})}),e.Query.setFieldDirectives(t.operations.rootTypeFieldNames.aggregate,(0,O.graphqlDirectivesToCompose)(a))),t.isCreatable&&(e.Mutation.addFields({[t.operations.rootTypeFieldNames.create]:(0,v.createResolver)({node:l,concreteEntityAdapter:t})}),e.Mutation.setFieldDirectives(t.operations.rootTypeFieldNames.create,(0,O.graphqlDirectivesToCompose)(a))),t.isDeletable&&(e.Mutation.addFields({[t.operations.rootTypeFieldNames.delete]:(0,g.deleteResolver)({node:l,composer:e,concreteEntityAdapter:t})}),e.Mutation.setFieldDirectives(t.operations.rootTypeFieldNames.delete,(0,O.graphqlDirectivesToCompose)(a))),t.isUpdatable&&(e.Mutation.addFields({[t.operations.rootTypeFieldNames.update]:(0,b.updateResolver)({node:l,composer:e,concreteEntityAdapter:t})}),e.Mutation.setFieldDirectives(t.operations.rootTypeFieldNames.update,(0,O.graphqlDirectivesToCompose)(a)))})({composer:o,concreteEntityAdapter:i,subgraph:n,features:t,userDefinedObjectDirectives:(ew.get(e.name)||[]).concat(s),userDefinedFieldDirectives:a,propagatedDirectives:s,aggregationTypesMapper:ev,node:r,seenRelationshipPropertiesTypes:eP,userDefinedDirectivesForNode:ew,userDefinedFieldDirectivesForNode:eS});let l=(0,U.createConnectionFields)({entityAdapter:i,relationshipFields:eC});ea=[...ea,...l];return}}),t?.subscriptions&&eg.length){let e=t.subscriptions instanceof S.Neo4jGraphQLSubscriptionsCDCEngine;(0,ei.generateSubscriptionTypes)({schemaComposer:o,schemaModel:i,userDefinedFieldDirectivesForNode:eS,generateRelationshipTypes:!e,features:t})}["Query","Mutation"].forEach(e=>{let t=o[e],r=i.operations[e];if(!r)return;let n=new P.OperationAdapter(r),s=eS.get(e);for(let r of n.attributes.values()){let n=(0,y.default)({obj:el[`customCypher${e}`],scalars:ec,enums:ed,interfaces:eE,unions:ef,objects:ep,callbacks:a}).cypherFields.find(e=>e.fieldName===r.name),i=(0,m.cypherResolver)({field:n,attributeAdapter:r,type:e}),o=(0,O.attributeAdapterToComposeFields)([r],s)[r.name];t.addFields({[r.name]:{...o,...i}})}for(let e of n.userResolvedAttributes.values()){let r=(0,O.attributeAdapterToComposeFields)([e],s)[e.name];r&&t.addFields({[e.name]:r})}}),Object.values(o.Mutation.getFields()).length||o.delete("Mutation"),Object.values(o.Subscription.getFields()).length||o.delete("Subscription");let eR=o.toSDL(),eD=(0,s.parse)(eR),eF=new Set(eD.definitions.filter(eo).map(e=>e.name.value)),ej=(0,et.getResolveAndSubscriptionMethods)(o),eL={};for(let[e,t]of Object.entries(ej))eF.has(e)&&(eL[e]=t);let ex={...eL,...Object.values(u).reduce((e,t)=>(eR.includes(`scalar ${t.name}
`)&&(e[t.name]=t),e),{}),...eT?{Node:{__resolveType:e=>e.__resolveType}}:{}};i.compositeEntities.forEach(e=>{let t=t=>t.kind===s.Kind.UNION_TYPE_DEFINITION&&e instanceof F.UnionEntity||t.kind===s.Kind.INTERFACE_TYPE_DEFINITION&&e instanceof D.InterfaceEntity;if(eD.definitions.some(r=>!!t(r)&&r.name.value===e.name)&&!ex[e.name]&&(ex[e.name]={__resolveType:e=>e.__resolveType}),e instanceof D.InterfaceEntity)for(let t of e.relationshipDeclarations.values()){let e=new M.RelationshipDeclarationAdapter(t).operations.relationshipPropertiesFieldTypename;eD.definitions.some(t=>t.name?.value===e)&&!ex[e]&&(ex[e]={__resolveType:e=>e.__resolveType})}});let eM=eh.map(e=>({kind:e.kind,loc:e.loc,operationTypes:e.operationTypes,directives:e.directives?.filter(e=>!["query","mutation","subscription","authentication"].includes(e.name.value))})),ek={};return eD={...eD,definitions:[...eD.definitions.filter(e=>{if(e.kind===s.Kind.SCALAR_TYPE_DEFINITION&&[s.GraphQLBoolean.name,s.GraphQLFloat.name,s.GraphQLID.name,s.GraphQLInt.name,s.GraphQLString.name].includes(e.name.value))return!1;if(!("name"in e))return!0;let t=e.name?.value;return!ek[t]&&(ek[t]=t,!0)}),...eM]},{nodes:eg,relationships:ea,typeDefs:eD,resolvers:ex}}},46642:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterInterfaceTypes=void 0,t.filterInterfaceTypes=function(e,t){let r=[],n=[];for(let i of e)t.has(i.name.value)?r.push(i):n.push(i);return{interfaceRelationships:r,filteredInterfaceTypes:n}}},93246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserDefinedDirectives=void 0;let n=r(58388),i=r(33530),o=r(14321);function a(e){let t=new Map;for(let r of e.fields||[]){if(!r.directives)break;let e=r.directives.filter(e=>!(0,o.isInArray)(i.LIBRARY_DIRECTIVES,e.name.value));e.length&&t.set(r.name.value,e)}return t}t.getUserDefinedDirectives=function(e){let t=new Map,r=new Map,s=new Map,l=new Map,u=new Map;for(let l of e.objectTypes){let e=l.directives?.filter(e=>!o.isInArray(i.LIBRARY_DIRECTIVES,e.name.value))||[],u=l.directives?.filter(e=>o.isInArray(n.PROPAGATED_DIRECTIVES,e.name.value))||[];r.set(l.name.value,e),s.set(l.name.value,u);let c=a(l);t.set(l.name.value,c)}for(let r of e.interfaceTypes){let e=r.directives?.filter(e=>!o.isInArray(i.LIBRARY_DIRECTIVES,e.name.value))||[],u=r.directives?.filter(e=>o.isInArray(n.PROPAGATED_DIRECTIVES,e.name.value))||[];l.set(r.name.value,e),s.set(r.name.value,u);let c=a(r);t.set(r.name.value,c)}for(let t of e.unionTypes){let e=t.directives?.filter(e=>!o.isInArray(i.LIBRARY_DIRECTIVES,e.name.value))||[],r=t.directives?.filter(e=>o.isInArray(n.PROPAGATED_DIRECTIVES,e.name.value))||[];u.set(t.name.value,e),s.set(t.name.value,r)}for(let r of e.operations){let e=a(r);t.set(r.name.value,e)}return{userDefinedFieldDirectivesForNode:t,userDefinedDirectivesForNode:r,propagatedDirectivesForNode:s,userDefinedDirectivesForInterface:l,userDefinedDirectivesForUnion:u}}},46181:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.makeDocumentToAugment=void 0;let i=r(57343),o=n(r(78604));t.makeDocumentToAugment=function(e){let t=[],r=[];for(let n of e.definitions)n.kind===i.Kind.OBJECT_TYPE_DEFINITION&&(n.directives||[]).some(e=>"jwt"===e.name.value)?t.push(n):r.push(n);let n=function(e){let t=new Map;if(e.length>1)throw Error("@jwt directive can only be used once in the Type Definitions.");let r=e[0];if(r){if((r?.directives||[]).length>1)throw Error("@jwt directive cannot be combined with other directives.");return r?.fields?.forEach(e=>{if(!["String","ID","Int","Float","Boolean"].includes(o.default(e.type).name))throw Error("fields of a @jwt type can only be Scalars or Lists of Scalars.");let r=e.name.value,n=e.directives?.find(e=>"jwtClaim"===e.name.value);if(n){let e=n.arguments?.find(e=>"path"===e.name.value)?.value;if(!e||e.kind!==i.Kind.STRING)throw Error("@jwtClaim path argument required and must be a String.");t.set(r,e.value)}else t.set(r,r)}),{type:r,jwtFieldsMap:t}}}(t);return{document:{...e,definitions:r},typesExcludedFromGeneration:n?{jwt:n}:{}}}},94431:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConnectionWithEdgeProperties=t.connectionFieldResolver=void 0;let n=r(57343),i=r(25354),o=r(14178);function a({selectionSet:e,key:t}){for(let r of e?.selections||[])if(r.kind===n.Kind.FIELD&&r.name.value===t&&r.alias)return r.alias.value;return t}function s({selectionSet:e,source:t,args:r={},totalCount:o}){let{after:s,first:l}=r;if(l<0)throw Error('Argument "first" must be a non-negative integer');let u=(0,i.getOffsetWithDefault)(s,-1)+1,c=t?.edges||[],p=e?.selections||[],d=p.find(e=>e.kind===n.Kind.FIELD&&"edges"===e.name.value),f=a({selectionSet:d?.selectionSet,key:"cursor"}),h=a({selectionSet:d?.selectionSet,key:"node"}),y=u+(l||c.length),m=c.map((e,t)=>({...e,...e.node?{[h]:e.node}:{},[f]:(0,i.offsetToCursor)(u+t)})),v=m[0]?.cursor,g=m[m.length-1]?.cursor,b=a({selectionSet:e,key:"pageInfo"}),_=a({selectionSet:e,key:"edges"}),T=p.find(e=>e.kind===n.Kind.FIELD&&"pageInfo"===e.name.value),E=T?.selectionSet,O=a({selectionSet:E,key:"startCursor"});return{[_]:m,[b]:{[O]:v,[a({selectionSet:E,key:"endCursor"})]:g,[a({selectionSet:E,key:"hasPreviousPage"})]:u>0,[a({selectionSet:E,key:"hasNextPage"})]:"number"==typeof l&&y<o}}}t.connectionFieldResolver=function({connectionFieldName:e,source:t,args:r,info:n}){let i=n.fieldNodes[0];if(!i)throw Error("Field not found");let{selectionSet:l}=i,u=t[e];i.alias&&(u=t[i.alias.value]);let c=a({selectionSet:l,key:"totalCount"}),{totalCount:p}=u;return{[c]:(0,o.isNeoInt)(p)?p.toNumber():p,...s({source:u,selectionSet:l,args:r,totalCount:p})}},t.createConnectionWithEdgeProperties=s},87687:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(57343),i=r(56693);t.default=function(e){if(!e||"node"!==e.name.value)throw Error("Undefined or incorrect directive passed into parseNodeDirective function");return new i.NodeDirective({labels:function(e,t){let r=e.arguments?.find(e=>e.name.value===t);return r?(0,n.valueFromASTUntyped)(r.value):void 0}(e,"labels")})}},87096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(57343);t.default=function(e,t,r){let i=e.find(e=>"unique"===e.name.value);if(i&&t.kind===n.Kind.INTERFACE_TYPE_DEFINITION)throw Error(`@unique directive cannot be used on interface type fields: ${t.name.value}.${r}`);if(i){let e=i.arguments?.find(e=>"constraintName"===e.name.value);return e&&e.value.kind===n.Kind.STRING?{constraintName:e.value.value}:{constraintName:`${t.name.value}_${r}`}}if(e.some(e=>"relayId"===e.name.value))return{constraintName:`${t.name.value}_${r}`}}},14337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(95349);t.default=function({directive:e,nodeFields:t,definition:r}){let i=e.arguments?.find(e=>"indexes"===e.name.value),o=(0,n.parseValueNode)(i.value),a=t.primitiveFields.filter(e=>["String","ID"].includes(e.typeMeta.name)&&!e.typeMeta.array);return o.forEach(e=>{let t=e.indexName||e.name;if(void 0===t)throw Error("The name of the fulltext index should be defined using the indexName argument.");if(o.filter(e=>t===e.indexName||t===e.name).length>1)throw Error(`Node '${r.name.value}' @fulltext index contains duplicate name '${t}'`);e.fields.forEach(e=>{if(!a.find(t=>t.fieldName===e))throw Error(`Node '${r.name.value}' @fulltext index contains invalid index '${t}' cannot use find String or ID field '${e}'`)})}),{indexes:o}}},53038:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parseLimitDirective=void 0;let a=o(r(66007)),s=r(19900),l=r(28549),u=r(95349);function c(e){if(e){let t=(0,u.parseValueNode)(e.value);return a.int(t)}}t.parseLimitDirective=function({directive:e,definition:t}){let r=e.arguments?.find(e=>"default"===e.name.value),n=e.arguments?.find(e=>"max"===e.name.value),i={default:c(r),max:c(n)},o=function(e,t){let r=e.max?.toNumber(),n=e.default?.toNumber();return void 0!==n&&n<=0?new l.Neo4jGraphQLError(`${t} @limit(default: ${n}) invalid value: '${n}', it should be a number greater than 0`):void 0!==r&&r<=0?new l.Neo4jGraphQLError(`${t} @limit(max: ${r}) invalid value: '${r}', it should be a number greater than 0`):r&&n&&r<n?new l.Neo4jGraphQLError(`${t} @limit(max: ${r}, default: ${n}) invalid default value, 'default' must be smaller than 'max'`):void 0}(i,t.name.value);if(o)throw o;return new s.LimitDirective(i)}},12438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e?.arguments?.find(e=>"value"===e.name.value)?.value?.value||void 0}},84578:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthorizationContext=void 0;let i=n(r(52462)),o=n(r(19092)),a=r(58388),s=r(11179),l=(0,o.default)(a.DEBUG_AUTH),u={isAuthenticated:!1,jwtParam:new i.default.NamedParam("jwt",{}),isAuthenticatedParam:new i.default.NamedParam("isAuthenticated",!1)};async function c(e,t,r){if(e.jwt){let t=e.jwt;return(0,s.debugObject)(l,"using JWT provided in context",t),{isAuthenticated:!0,jwt:t,jwtParam:new i.default.NamedParam("jwt",t),isAuthenticatedParam:new i.default.NamedParam("isAuthenticated",!0)}}if(!t)return l("authorization settings not specified, request not authenticated"),u;if(e.token){let n=await t.decode(e);if(n)return e.jwt=n,(0,s.debugObject)(l,"successfully decoded JWT",n),{isAuthenticated:!0,jwt:e.jwt,jwtParam:new i.default.NamedParam("jwt",e.jwt),isAuthenticatedParam:new i.default.NamedParam("isAuthenticated",!0),claims:r}}return l("request not authenticated"),u}t.getAuthorizationContext=c},69094:function(e,t,r){"use strict";let n;var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.wrapQueryAndMutation=void 0;let o=i(r(19092)),a=r(12579),s=r(17381),l=r(58388),u=r(4171),c=r(11179),p=r(84578),d=(0,o.default)(l.DEBUG_GRAPHQL);t.wrapQueryAndMutation=({driver:e,nodes:t,relationships:r,jwtPayloadFieldsMap:i,schemaModel:o,dbInfo:l,authorization:f,features:h})=>y=>async(m,v,g,b)=>{if((0,u.debugGraphQLResolveInfo)(d,b),(0,c.debugObject)(d,"incoming context",g),!g?.executionContext){if(!e)throw Error("A Neo4j driver instance must either be passed to Neo4jGraphQL on construction, or a driver, session or transaction passed as context.executionContext in each request.");g.executionContext=e}let _=!!h.subscriptions,T=await (0,p.getAuthorizationContext)(g,f,i);g.jwt||(g.jwt=T.jwt);let E=new a.Executor({executionContext:g.executionContext,cypherQueryOptions:g.cypherQueryOptions,sessionConfig:g.sessionConfig,cypherParams:g.cypherParams,transactionMetadata:g.transactionMetadata});return l&&(n=l),n?.version||(n=await (0,s.getNeo4jDatabaseInfo)(E)),y(m,v,{neo4jDatabaseInfo:n,...g,nodes:t,relationships:r,schemaModel:o,features:h,subscriptionsEnabled:_,executor:E,authorization:T},b)}},41961:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSubscription=void 0;let i=n(r(19092)),o=r(84578),a=r(58388),s=r(4171),l=r(11179),u=(0,i.default)(a.DEBUG_GRAPHQL);t.wrapSubscription=e=>t=>async(r,n,i,a)=>{(0,s.debugGraphQLResolveInfo)(u,a),(0,l.debugObject)(u,"incoming context",i);let c=e.subscriptionsEngine,p=e.schemaModel,d=e.authorization,f=e.jwtPayloadFieldsMap,h=await (0,o.getAuthorizationContext)(i?.connectionParams||{},d,f);return i.connectionParams?.jwt||(i.connectionParams={...i.connectionParams,jwt:h.jwt}),t(r,n,{...i,authorization:h,schemaModel:p,subscriptionsEngine:c},a)}},99417:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cypherResolver=void 0;let i=r(51086),o=r(63706),a=n(r(46808)),s=r(14178),l=r(68944);t.cypherResolver=function({field:e,attributeAdapter:t,type:r}){async function n(n,l,u,c){let p=(0,a.default)(c);u.resolveTree=p;let{cypher:d,params:f}=(0,i.translateTopLevelCypher)({context:u,field:e,type:r}),h=(await (0,o.execute)({cypher:d,params:f,defaultAccessMode:"Query"===r?"READ":"WRITE",context:u,info:c})).result.records.map(e=>{let t=e.get(0);return["number","string","boolean"].includes(typeof t)?t:t?(0,s.isNeoInt)(t)?Number(t):t.identity&&t.labels&&t.properties?t.properties:t:void 0});return t.typeHelper.isList()?h:h[0]}return{type:t.getTypePrettyName(),resolve:n,args:(0,l.graphqlArgsToCompose)(t.args)}}},58108:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFieldResolver=void 0,t.defaultFieldResolver=function(e,t,r,n){if("object"==typeof e&&null!==e||"function"==typeof e){let i=n.fieldNodes[0],o=i.alias&&Object.prototype.hasOwnProperty.call(e,i.alias.value)?e[i.alias.value]:e[i.name.value];return"function"==typeof o?o(t,r,n):o}}},99262:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.idResolver=void 0;let n=r(58108),i=r(14178);function o(e){return(0,i.isNeoInt)(e)?e.toNumber():"number"==typeof e?e.toString(10):e}t.idResolver=function(e,t,r,i){let a=(0,n.defaultFieldResolver)(e,t,r,i);return Array.isArray(a)?a.map(e=>o(e)):o(a)}},19594:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numericalResolver=void 0;let n=r(66007),i=r(58108);function o(e){return e&&(["number","string","bigint"].includes(typeof e)||(0,n.isInt)(e)||"object"==typeof e&&2===Object.keys(e).length&&Object.prototype.hasOwnProperty.call(e,"low")&&Object.prototype.hasOwnProperty.call(e,"high"))?n.integer.toNumber(e):e}t.numericalResolver=function(e,t,r,n){let a=(0,i.defaultFieldResolver)(e,t,r,n);return Array.isArray(a)?a.map(e=>o(e)):o(a)}},52697:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createResolver=void 0;let i=r(57343),o=r(51086),a=r(63706),s=n(r(46808)),l=r(21676);t.createResolver=function({node:e,concreteEntityAdapter:t}){async function r(r,n,u,c){let p=(0,s.default)(c,{args:n});u.resolveTree=p;let{cypher:d,params:f}=await (0,o.translateCreate)({context:u,node:e}),h=await (0,a.execute)({cypher:d,params:f,defaultAccessMode:"WRITE",context:u,info:c});(0,l.publishEventsToSubscriptionMechanism)(h,u.features?.subscriptions,u.schemaModel);let y=c.fieldNodes[0]?.selectionSet?.selections.find(e=>e.kind===i.Kind.FIELD&&e.name.value===t.plural),m={info:{bookmark:h.bookmark,...h.statistics}};return y&&(m[y?.alias?y.alias.value:y?.name?.value]=h.records[0]?.data||[]),m}return{type:`${t.operations.mutationResponseTypeNames.create}!`,resolve:r,args:t.operations.createMutationArgumentNames}}},9250:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteResolver=void 0;let i=r(51086),o=r(63706),a=n(r(46808)),s=r(21676);t.deleteResolver=function({node:e,composer:t,concreteEntityAdapter:r}){async function n(t,n,l,u){let c=(0,a.default)(u,{args:n});l.resolveTree=c;let{cypher:p,params:d}=(0,i.translateDelete)({context:l,node:e,entityAdapter:r}),f=await (0,o.execute)({cypher:p,params:d,defaultAccessMode:"WRITE",context:l,info:u});return(0,s.publishEventsToSubscriptionMechanism)(f,l.features?.subscriptions,l.schemaModel),{bookmark:f.bookmark,...f.statistics}}let l=t.has(r.operations.deleteInputTypeName);return{type:"DeleteInfo!",resolve:n,args:{where:r.operations.whereInputTypeName,...l?{delete:r.operations.deleteInputTypeName}:{}}}}},74848:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateResolver=void 0;let i=r(57343),o=r(51086),a=r(63706),s=n(r(46808)),l=r(21676);t.updateResolver=function({node:e,composer:t,concreteEntityAdapter:r}){async function n(t,n,u,c){let p=(0,s.default)(c,{args:n});u.resolveTree=p;let[d,f]=await (0,o.translateUpdate)({context:u,node:e}),h=await (0,a.execute)({cypher:d,params:f,defaultAccessMode:"WRITE",context:u,info:c});(0,l.publishEventsToSubscriptionMechanism)(h,u.features?.subscriptions,u.schemaModel);let y=c.fieldNodes[0]?.selectionSet?.selections.find(e=>e.kind===i.Kind.FIELD&&e.name.value===r.plural),m={info:{bookmark:h.bookmark,...h.statistics}};return y&&(m[y.alias?y.alias.value:y.name.value]=h.records[0]?.data||[]),m}let u={};return t.has(r.operations.updateMutationArgumentNames.connect)&&(u.connect=r.operations.updateMutationArgumentNames.connect),t.has(r.operations.updateMutationArgumentNames.disconnect)&&(u.disconnect=r.operations.updateMutationArgumentNames.disconnect),t.has(r.operations.updateMutationArgumentNames.create)&&(u.create=r.operations.updateMutationArgumentNames.create),t.has(r.operations.updateMutationArgumentNames.delete)&&(u.delete=r.operations.updateMutationArgumentNames.delete),t.has(r.operations.updateMutationArgumentNames.connectOrCreate)&&(u.connectOrCreate=r.operations.updateMutationArgumentNames.connectOrCreate),{type:`${r.operations.mutationResponseTypeNames.update}!`,resolve:n,args:{where:r.operations.updateMutationArgumentNames.where,update:r.operations.updateMutationArgumentNames.update,...u}}}},48980:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateResolver=void 0;let i=r(51086),o=r(63706),a=n(r(46808)),s=r(93457);t.aggregateResolver=function({entityAdapter:e}){async function t(t,r,n,s){let l=(0,a.default)(s);n.resolveTree=l;let{cypher:u,params:c}=(0,i.translateAggregate)({context:n,entityAdapter:e});return Object.values((await (0,o.execute)({cypher:u,params:c,defaultAccessMode:"READ",context:n,info:s})).records[0]||{})[0]}return{type:`${e.operations.aggregateTypeNames.selection}!`,resolve:t,args:{where:e.operations.whereInputTypeName,...(0,s.isConcreteEntity)(e)&&e.annotations.fulltext?{fulltext:{type:e.operations.fullTextInputTypeName,description:"Query a full-text index. Allows for the aggregation of results, but does not return the query score. Use the root full-text query fields if you require the score."}}:{}}}}},65358:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyConnection=void 0,t.emptyConnection={totalCount:0,edges:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1,startCursor:null,endCursor:null}}},81179:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fulltextResolver=void 0;let i=n(r(52462)),o=r(51086),a=r(63706),s=n(r(46808));t.fulltextResolver=function({node:e,index:t,entityAdapter:r}){return async function(n,l,u,c){u.fulltext=t,u.fulltext.scoreVariable=new i.default.Variable;let p=(0,s.default)(c,{args:l});p.args.options={sort:p.args.sort,limit:p.args.limit,offset:p.args.offset},u.resolveTree=p;let{cypher:d,params:f}=(0,o.translateRead)({context:u,entityAdapter:r,varName:e.singular});return(await (0,a.execute)({cypher:d,params:f,defaultAccessMode:"READ",context:u,info:c})).records}}},96507:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.globalNodeResolver=void 0;let i=r(41590),o=r(51086),a=r(63706),s=n(r(46808)),l=r(97845);t.globalNodeResolver=function({entities:e}){return{type:"Node",resolve:async function(t,r,n,u){let{typeName:c,field:p,id:d}=(0,l.fromGlobalId)(r.id);if(!c||!p||!d)return null;let f=e.find(e=>e.name===c);if(!f)return null;let h=Object.entries(((0,i.parseResolveInfo)(u)??{fieldsByTypeName:[]}).fieldsByTypeName).reduce((e,[t,r])=>{if("Node"===t)return e;if(t===c){let n={...r,id:{name:"id",alias:"id",args:{},fieldsByTypeName:{}}};return{...e,[t]:n}}return{...e,[t]:r}},{}),y={name:f.plural,alias:"node",args:{where:{[p]:d}},fieldsByTypeName:h};n.resolveTree=(0,s.default)(u,{resolveTree:y});let{cypher:m,params:v}=(0,o.translateRead)({context:n,entityAdapter:f,varName:"this"}),g=await (0,a.execute)({cypher:m,params:v,defaultAccessMode:"READ",context:n,info:u}),b=null,_=g.records[0]?.this;return g.records.length&&_&&(b={..._,id:r.id,__resolveType:f.name}),b},args:{id:"ID!"}}}},7885:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.findResolver=void 0;let i=r(12602),o=r(54627),a=r(51086),s=r(93457),l=r(63706),u=n(r(46808));t.findResolver=function({entityAdapter:e}){async function t(t,r,n,i){let o;let c=(0,u.default)(i,{args:r});n.resolveTree=c,(0,s.isConcreteEntity)(e)&&(o="this");let{cypher:p,params:d}=(0,a.translateRead)({context:n,entityAdapter:e,varName:o});return(await (0,l.execute)({cypher:p,params:d,defaultAccessMode:"READ",context:n,info:i})).records.map(e=>e.this)}let r={};(0,s.isConcreteEntity)(e)&&e.annotations.fulltext&&(r.fulltext={type:`${e.name}Fulltext`,description:"Query a full-text index. Allows for the aggregation of results, but does not return the query score. Use the root full-text query fields if you require the score."});let n=e.operations.whereInputTypeName,c=e instanceof o.UnionEntityAdapter?i.QueryOptions:e.operations.optionsInputTypeName;return{type:`[${e.name}!]!`,resolve:t,args:{where:n,options:c,...r}}}},67648:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.rootConnectionResolver=void 0;let i=r(57343),o=r(41435),a=r(51086),s=r(63706),l=n(r(46808)),u=r(14178),c=r(94431),p=r(68944),d=r(65358);t.rootConnectionResolver=function({composer:e,entityAdapter:t,propagatedDirectives:r}){let n;async function f(e,r,n,i){let o=(0,l.default)(i,{args:r}),{cypher:p,params:f}=(0,a.translateRead)({context:{...n,resolveTree:o},entityAdapter:t,varName:"this"}),h=await (0,s.execute)({cypher:p,params:f,defaultAccessMode:"READ",context:n});if(!h.records[0])return d.emptyConnection;let y=h.records[0].this,m=(0,u.isNeoInt)(y.totalCount)?y.totalCount.toNumber():y.totalCount,v=(0,c.createConnectionWithEdgeProperties)({selectionSet:o,source:{edges:y.edges},args:{first:r.first,after:r.after},totalCount:m});return{totalCount:m,edges:v.edges,pageInfo:v.pageInfo}}let h=e.createObjectTC({name:`${t.name}Edge`,fields:{cursor:new i.GraphQLNonNull(i.GraphQLString),node:`${t.name}!`},directives:(0,p.graphqlDirectivesToCompose)(r)}),y=e.createObjectTC({name:`${t.upperFirstPlural}Connection`,fields:{totalCount:new i.GraphQLNonNull(i.GraphQLInt),pageInfo:new i.GraphQLNonNull(o.PageInfo),edges:h.NonNull.List.NonNull},directives:(0,p.graphqlDirectivesToCompose)(r)});return e.has(t.operations.sortInputTypeName)&&(n=e.getITC(t.operations.sortInputTypeName)),{type:y.NonNull,resolve:f,args:{first:i.GraphQLInt,after:i.GraphQLString,where:t.operations.whereInputTypeName,...n?{sort:n.List}:{},...t.annotations.fulltext?{fulltext:{type:t.operations.fullTextInputTypeName,description:"Query a full-text index. Allows for the aggregation of results, but does not return the query score. Use the root full-text query fields if you require the score."}}:{}}}}},5936:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.vectorResolver=void 0;let i=r(51086),o=r(63706),a=n(r(46808)),s=r(14178),l=r(94431),u=r(65358);t.vectorResolver=function({vectorContext:e,entityAdapter:t}){return async function(r,n,c,p){c.vector=e;let d=(0,a.default)(p,{args:n});d.args.options={sort:d.args.sort,limit:d.args.limit,offset:d.args.offset};let{cypher:f,params:h}=(0,i.translateRead)({context:{...c,resolveTree:d},entityAdapter:t,varName:"this"}),y=await (0,o.execute)({cypher:f,params:h,defaultAccessMode:"READ",context:c,info:p});if(!y.records[0])return{[t.operations.rootTypeFieldNames.connection]:u.emptyConnection};let m=y.records[0].this,v=(0,s.isNeoInt)(m.totalCount)?m.totalCount.toNumber():m.totalCount,g=(0,l.createConnectionWithEdgeProperties)({selectionSet:d,source:{edges:m.edges},args:{first:n.first,after:n.after},totalCount:v});return{[t.operations.rootTypeFieldNames.connection]:{totalCount:v,edges:g.edges,pageInfo:g.pageInfo}}}}},98609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkAuthenticationOnSelectionSet=void 0;let n=r(41590),i=r(33357),o=r(37944);t.checkAuthenticationOnSelectionSet=function(e,t,r,a){let s=(0,n.parseResolveInfo)(e);s&&(0,o.parseSelectionSetForAuthenticated)({resolveTree:s,entity:t,entityTypeName:t.operations.subscriptionEventTypeNames[r],entityPayloadTypeName:t.operations.subscriptionEventPayloadFieldNames[r],context:a}).forEach(({entity:e,fieldSelection:t})=>(function({fieldSelection:e,entity:t,context:r}){for(let n of((0,i.checkAuthentication)({authenticated:t,operation:"READ",context:r}),Object.values(e))){let e=t.attributes.get(n.name);e&&(0,i.checkAuthentication)({authenticated:e,operation:"READ",context:r})}})({entity:e,fieldSelection:t,context:a}))}},33357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkAuthentication=void 0;let n=r(44706),i=r(58388),o=r(60490);function a(e,t){if(!t.authorization.jwt)throw new n.Neo4jGraphQLError(i.AUTHORIZATION_UNAUTHENTICATED);if(e.jwt){let{jwt:r,claims:a}=t.authorization;if(!(0,o.filterByValues)(e.jwt,r,a))throw new n.Neo4jGraphQLError(i.AUTHORIZATION_UNAUTHENTICATED)}}t.checkAuthentication=function({authenticated:e,operation:t,context:r}){let n=r.schemaModel.annotations.authentication;n&&n.operations.has(t)&&a(n,r);let i=e.annotations.authentication;i&&i.operations.has(t)&&a(i,r)}},37944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelectionSetForAuthenticated=void 0;let n=r(32439);function i(e,t){return e.fieldsByTypeName[t]||{}}t.parseSelectionSetForAuthenticated=function({resolveTree:e,entity:t,entityTypeName:r,entityPayloadTypeName:n,context:a}){let s=[];for(let[l,u]of Object.entries(i(e,r))){if(l===n||"previousState"===l){let e=i(u,o.ENTITY_PAYLOAD(t.name));s.push({entity:t,fieldSelection:e})}if("createdRelationship"===l||"deletedRelationship"===l)for(let e of Object.values(i(u,o.RELATIONSHIPS(t.name)))){let r=function({context:e,entity:t,relationshipField:r}){let n=t.relationships.get(r.name);if(!n)return;let i=e.schemaModel.getEntity(n.target.name);return i?i.isConcreteEntity()?[i]:i.isCompositeEntity()?i.concreteEntities:void 0:void 0}({context:a,entity:t,relationshipField:e});if(!r)continue;let n=i(e,o.RELATIONSHIP(t.name,e.name));if(n.node)for(let[e,t]of Object.entries(n.node.fieldsByTypeName)){if(!Object.keys(t).length)continue;let n=r.find(t=>o.ENTITY_PAYLOAD(t.name)===e);if(n)s.push({entity:n,fieldSelection:t});else for(let e of r)s.push({entity:e,fieldSelection:t})}}}return s};let o={ENTITY_PAYLOAD:e=>`${e}EventPayload`,RELATIONSHIPS:e=>`${e}ConnectedRelationships`,RELATIONSHIP:(e,t)=>`${e}${(0,n.upperFirst)(t)}ConnectedRelationship`}},5251:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterAsyncIterator=void 0,t.filterAsyncIterator=function(e,t){return{next:()=>new Promise((r,n)=>{let i=()=>{e.next().then(e=>{if(!0===e.done){r(e);return}Promise.resolve(t(e.value)).then(t=>{!0===t?r(e):i()}).catch(e=>{n(e)})}).catch(e=>{n(e)})};i()}),return:()=>e.return(),throw:t=>e.throw(t),[Symbol.asyncIterator](){return this}}}},44307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSubscribeMethod=t.subscriptionResolve=void 0;let n=r(82361),i=r(44706),o=r(33357),a=r(98609),s=r(5251),l=r(38121),u=r(65403),c=r(9397);t.subscriptionResolve=function(e){if(void 0===e||void 0===e[0])throw new i.Neo4jGraphQLError("Payload is undefined. Can't call subscriptions resolver directly.");return e[0]},t.generateSubscribeMethod=function({entityAdapter:e,type:t}){return(r,p,d,f)=>{(0,a.checkAuthenticationOnSelectionSet)(f,e,t,d),(0,o.checkAuthentication)({authenticated:e,operation:"SUBSCRIBE",context:d});let h=(0,n.on)(d.subscriptionsEngine.events,t);if(["create","update","delete"].includes(t))return(0,s.filterAsyncIterator)(h,t=>{var r;return void 0!==(r=t[0])&&"typename"in r&&t[0].typename===e.name&&(0,u.subscriptionAuthorization)({event:t[0],entity:e,context:d})&&(0,c.subscriptionWhere)({where:p.where,event:t[0],entityAdapter:e})&&(0,l.updateDiffFilter)(t[0])});if(["create_relationship","delete_relationship"].includes(t))return(0,s.filterAsyncIterator)(h,t=>{var r;if(!(void 0!==(r=t[0])&&"toTypename"in r&&"fromTypename"in r))return!1;let n=t[0];return(n.toTypename===e.name||n.fromTypename===e.name)&&!!Array.from(e.relationships.values()).find(e=>e.type===n.relationshipName)?.name&&(0,u.subscriptionAuthorization)({event:t[0],entity:e,context:d})&&(0,c.subscriptionWhere)({where:p.where,event:t[0],entityAdapter:e})});throw new i.Neo4jGraphQLError(`Invalid type in subscription: ${t}`)}}},38121:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateDiffFilter=void 0;let n=r(97502),i=r(14178);t.updateDiffFilter=function(e){return!("update"===e.event&&(0,i.haveSameLength)(e.properties.old,e.properties.new)&&(0,n.compareProperties)(e.properties.old,e.properties.new))}},97502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareProperties=void 0;let n=r(14178);t.compareProperties=function e(t,r){if(!(0,n.isSameType)(t,r)||!(0,n.haveSameLength)(t,r))return!1;for(let[i,o]of Object.entries(t)){let t=r[i];if(null==t||Array.isArray(o)&&(0,n.isSameType)(o,t)&&!e(o,t)||!Array.isArray(o)&&(0,n.isSameType)(o,t)&&t!==o)return!1}return!0}},65403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionAuthorization=void 0;let n=r(15815),i=r(78019),o=r(14214);t.subscriptionAuthorization=function({event:e,entity:t,context:r}){let a=t.annotations.subscriptionsAuthorization,s=(a?.filter||[]).filter(t=>t.events.some(t=>(function(e,t){switch(e){case"CREATED":return"create"===t;case"UPDATED":return"update"===t;case"DELETED":return"delete"===t;case"RELATIONSHIP_CREATED":return"create_relationship"===t;case"RELATIONSHIP_DELETED":return"delete_relationship"===t}})(t,e.event)));if(!s.length)return!0;let l=s.map(i=>{if(i.requireAuthentication&&!r.authorization.jwt)return!1;let a=(0,o.populateWhereParams)({where:i.where,context:r});return(0,n.filterByAuthorizationRules)({entityAdapter:t,where:a,event:e,context:r})});return i.multipleConditionsAggregationMap.OR(l)}},15815:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterByAuthorizationRules=void 0;let n=r(60490),i=r(58046),o=r(78019),a=r(53807);t.filterByAuthorizationRules=function e({entityAdapter:t,where:r,event:s,context:l}){let u=s.properties,c=Object.entries(r).map(([r,c])=>{if(Object.keys(o.multipleConditionsAggregationMap).includes(r)&&!(0,o.multipleConditionsAggregationMap[r])("NOT"===r?e({entityAdapter:t,where:c,event:s,context:l}):c.map(r=>e({entityAdapter:t,where:r,event:s,context:l}))))return!1;if("node"===r)switch(s.event){case"create":return(0,a.filterByProperties)({attributes:t.attributes,whereProperties:c,receivedProperties:s.properties.new});case"update":case"delete":return(0,a.filterByProperties)({attributes:t.attributes,whereProperties:c,receivedProperties:s.properties.old});case"create_relationship":case"delete_relationship":{let e=s.relationshipName,r=Array.from(t.relationships.values()).filter(t=>t.type===e);if(!r.length)return!1;let n="IN"===r[0].direction?"to":"from";return(0,a.filterByProperties)({attributes:t.attributes,whereProperties:c,receivedProperties:u[n]})}}if("relationship"===r){if(!["create_relationship","delete_relationship"].includes(s.event))return!1;let e=s.relationshipName,r=Array.from(t.relationships.values()).filter(t=>t.type===e)[0];return!!r&&(0,i.filterRelationshipKey)({receivedEventRelationship:r,where:c,receivedEvent:s})}if("jwt"===r){let{jwt:e,claims:t}=l.authorization;if(!e)throw Error("JWT Token must be present.");return(0,n.filterByValues)(c,e,t)}return!0});return o.multipleConditionsAggregationMap.AND(c)}},53807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterByProperties=void 0;let n=r(66007),i=r(48126),o=r(78019),a=r(67890);t.filterByProperties=function e({attributes:t,whereProperties:r,receivedProperties:n}){for(let[s,u]of Object.entries(r))if(Object.keys(o.multipleConditionsAggregationMap).includes(s)){if(!(0,o.multipleConditionsAggregationMap[s])("NOT"===s?e({attributes:t,whereProperties:u,receivedProperties:n}):u.map(r=>e({attributes:t,whereProperties:r,receivedProperties:n}))))return!1}else{let{fieldName:e,operator:r}=(0,a.parseFilterProperty)(s),o=n[e];if(!o)return!1;let c=t.get(e);if(!(0,i.getFilteringFn)(r,l)(o,u,c))return!1}return!0};let s=(e,t)=>e?.typeHelper.isFloat()||e?.typeHelper.isString()||e?.typeHelper.isID()&&(0,n.int)(t).toString()!==t,l={INCLUDES:(e,t,r)=>{if(s(r,t))return e.some(e=>e===t);let i=(0,n.int)(t);return e.some(e=>(0,n.int)(e).equals(i))},NOT_INCLUDES:(e,t,r)=>{if(s(r,t))return!e.some(e=>e===t);let i=(0,n.int)(t);return!e.some(e=>(0,n.int)(e).equals(i))},IN:(e,t,r)=>{if(s(r,e))return t.some(t=>t===e);let i=(0,n.int)(e);return t.some(e=>(0,n.int)(e).equals(i))},NOT_IN:(e,t,r)=>{if(s(r,e))return!t.some(t=>t===e);let i=(0,n.int)(e);return!t.some(e=>(0,n.int)(e).equals(i))}}},93973:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterByRelationshipProperties=void 0;let n=r(58046),i=r(78019),o=r(67890),a=r(53807);t.filterByRelationshipProperties=function e({entityAdapter:t,whereProperties:r,receivedEvent:s}){let l=s.properties,u=s.relationshipName,c=Array.from(t.relationships.values()).filter(e=>e.type===u);if(!c.length)return!1;let p=c[0];for(let[u,c]of Object.entries(r)){if(Object.keys(i.multipleConditionsAggregationMap).includes(u)&&!(0,i.multipleConditionsAggregationMap[u])("NOT"===u?e({entityAdapter:t,whereProperties:c,receivedEvent:s}):c.map(r=>e({entityAdapter:t,whereProperties:r,receivedEvent:s}))))return!1;let{fieldName:r}=(0,o.parseFilterProperty)(u);if(r===t.operations.subscriptionEventPayloadFieldNames.create_relationship){let e="IN"===p.direction?"to":"from";if(!(0,a.filterByProperties)({attributes:t.attributes,whereProperties:c,receivedProperties:l[e]}))return!1}if("createdRelationship"===r||"deletedRelationship"===r)return(0,n.filterRelationshipKey)({receivedEventRelationship:p,where:c,receivedEvent:s})}return!0}},58046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterRelationshipKey=void 0;let n=r(67661),i=r(54627),o=r(53807),a=r(22955);function s({relationshipAdapter:e,edgeProperty:t,receivedEventProperties:r}){return!e.attributes.size||(0,o.filterByProperties)({attributes:e.attributes,whereProperties:t,receivedProperties:r.relationship})}t.filterRelationshipKey=function({receivedEventRelationship:e,where:t,receivedEvent:r}){let l=r.properties,u=t[e.name];if(!u)return!1;if(!Object.keys(u).length)return!0;let{edge:c,node:p,...d}=u;if(c&&!s({relationshipAdapter:e,edgeProperty:c,receivedEventProperties:l}))return!1;let f="IN"===e.direction?"from":"to",h=p&&(0,a.isStandardType)(p,e),y=p&&(0,a.isInterfaceType)(p,e),m=Object.keys(d).length;if(h){let t=e.target;if(!(0,o.filterByProperties)({attributes:t.attributes,whereProperties:p,receivedProperties:l[f]}))return!1}if(y&&!function({nodeProperty:e,relationshipAdapter:t,receivedEventProperties:r,targetNodeTypename:i,key:a}){let{...s}=e,l=t.target;if(!(l instanceof n.InterfaceEntityAdapter))throw Error(`Expected ${l.name} to be interface`);let u=l.concreteEntities.find(e=>e.name===i);if(!u)throw Error(`${i} not found as part of interface ${l.name}`);return!s||!!(0,o.filterByProperties)({attributes:u.attributes,whereProperties:s,receivedProperties:r[a]})}({nodeProperty:p,relationshipAdapter:e,receivedEventProperties:l,targetNodeTypename:r[`${f}Typename`],key:f}))return!1;if(m){let t=r[`${f}Typename`],n=d[t];if(!n||!function({targetNodePropsByTypename:e,targetNodeTypename:t,receivedEventProperties:r,relationshipAdapter:n,key:a}){for(let[l,u]of Object.entries(e)){if("node"===l){let e=n.target;if(!(e instanceof i.UnionEntityAdapter))throw Error(`Expected ${e.name} to be union`);let s=e.concreteEntities.find(e=>e.name===t);if(!s)throw Error(`${t} not found as part of union ${e.name}`);if(!(0,o.filterByProperties)({attributes:s.attributes,whereProperties:u,receivedProperties:r[a]}))return!1}if("edge"===l&&!s({relationshipAdapter:n,edgeProperty:u,receivedEventProperties:r}))return!1}return!0}({targetNodePropsByTypename:n,targetNodeTypename:t,receivedEventProperties:l,relationshipAdapter:e,key:f}))return!1}return!0}},48126:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilteringFn=void 0;let r={NOT:(e,t)=>e!==t,LT:(e,t)=>("string"==typeof e?BigInt(e):e)<t,LTE:(e,t)=>("string"==typeof e?BigInt(e):e)<=t,GT:(e,t)=>("string"==typeof e?BigInt(e):e)>t,GTE:(e,t)=>("string"==typeof e?BigInt(e):e)>=t,STARTS_WITH:(e,t)=>e.startsWith(t),NOT_STARTS_WITH:(e,t)=>!e.startsWith(t),ENDS_WITH:(e,t)=>e.endsWith(t),NOT_ENDS_WITH:(e,t)=>!e.endsWith(t),CONTAINS:(e,t)=>e.includes(t),NOT_CONTAINS:(e,t)=>!e.includes(t),INCLUDES:(e,t)=>e.some(e=>e===t),NOT_INCLUDES:(e,t)=>!e.some(e=>e===t),IN:(e,t)=>t.some(t=>t===e),NOT_IN:(e,t)=>!t.some(t=>t===e)};t.getFilteringFn=function(e,t){return e?({...r,...t})[e]:(e,t)=>e===t}},78019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multipleConditionsAggregationMap=void 0,t.multipleConditionsAggregationMap={AND:e=>{for(let t of e)if(!t)return!1;return!0},OR:e=>{for(let t of e)if(t)return!0;return!1},NOT:e=>!e}},67890:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFilterProperty=void 0;let n=r(66606);t.parseFilterProperty=function(e){let t=n.whereRegEx.exec(e);if(!t)throw Error(`Failed to match key in filter: ${e}`);let{fieldName:r,operator:i}=t.groups;if(!r)throw Error(`Failed to find field name in filter: ${e}`);return{fieldName:r,operator:i}}},14214:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.populateWhereParams=void 0;let i=n(r(56884));t.populateWhereParams=function e({where:t,context:r}){let n={};return Object.entries(t).forEach(([t,o])=>{if(Array.isArray(o))n[t]=o.map(t=>e({where:t,context:r}));else if(null===o)n[t]=o;else if("object"==typeof o)n[t]=e({where:o,context:r});else if("string"==typeof o){if(o.startsWith("$jwt")){let e=o.substring(5),a=r.authorization.claims?.get(e),s=i.default.get(r.authorization.jwt,a||e);n[t]=s}else if(o.startsWith("$context")){let e=o.substring(9),a=i.default.get(r,e);n[t]=a||""}else n[t]=o}else n[t]=o}),n}},22955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInterfaceSpecificFieldType=t.isStandardType=t.isInterfaceType=t.isIDAsString=void 0;let n=r(66007),i=r(67661);t.isIDAsString=function(e,t){return e?.typeMeta.name==="ID"&&(0,n.int)(t).toString()!==t},t.isInterfaceType=function(e,t){return t.target instanceof i.InterfaceEntityAdapter},t.isStandardType=function(e,t){return!(t.target instanceof i.InterfaceEntityAdapter)},t.isInterfaceSpecificFieldType=function(e){return!!e}},9397:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionWhere=void 0;let n=r(53807),i=r(93973);t.subscriptionWhere=function({where:e,event:t,entityAdapter:r}){return!e||("create"===t.event?(0,n.filterByProperties)({attributes:r.attributes,whereProperties:e,receivedProperties:t.properties.new}):"update"===t.event||"delete"===t.event?(0,n.filterByProperties)({attributes:r.attributes,whereProperties:e,receivedProperties:t.properties.old}):("create_relationship"===t.event||"delete_relationship"===t.event)&&(0,i.filterByRelationshipProperties)({entityAdapter:r,whereProperties:e,receivedEvent:t}))}},92840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectedTypes=t.hasProperties=void 0;let n=r(67661),i=r(54627),o=r(14178),a=r(68944);function s(e){return!!Object.keys(e.getFields()).length}t.hasProperties=s,t.getConnectedTypes=function({entityAdapter:e,schemaComposer:t,nodeNameToEventPayloadTypes:r,userDefinedFieldDirectivesForNode:l}){return Array.from(e.relationships.values()).map(u=>{let c=t.createObjectTC({name:u.operations.subscriptionConnectedRelationshipTypeName}),p=u.subscriptionConnectedRelationshipFields;if(p.length){let t=l.get(e.name);if(!t)throw Error("fix user directives for relationship properties interface types in subscriptions.");let r=(0,a.attributeAdapterToComposeFields)(p,t);c.addFields(r)}let d=function({relationshipAdapter:e,userDefinedFieldDirectivesForNode:t,schemaComposer:r,nodeNameToEventPayloadTypes:l}){let u=l[e.target.name];return u?s(u)&&u:function({relationshipAdapter:e,userDefinedFieldDirectivesForNode:t,schemaComposer:r,nodeNameToEventPayloadTypes:l}){let u=e.target instanceof i.UnionEntityAdapter?e.target:void 0;if(u)return function({unionNodes:e,unionEntity:t,schemaComposer:r}){return e.filter(s).length?r.createUnionTC({name:t.operations.subscriptionEventPayloadTypeName,types:e}):null}({unionNodes:(0,o.filterTruthy)(u?.concreteEntities?.map(e=>l[e.name])),unionEntity:u,schemaComposer:r});let c=e.target instanceof n.InterfaceEntityAdapter?e.target:void 0;if(c){let e=(0,o.filterTruthy)(c.concreteEntities.map(e=>l[e.name]));return function({interfaceEntity:e,interfaceNodes:t,schemaComposer:r,userDefinedFieldDirectivesForNode:n}){let i=n.get(e.name);if(!i)throw Error("fix user directives for interface types in subscriptions.");let o=(0,a.attributeAdapterToComposeFields)(e.subscriptionEventPayloadFields,i);if(Object.keys(o).length){let n=r.createInterfaceTC({name:e.operations.subscriptionEventPayloadTypeName,fields:o});return t?.forEach(e=>{n.addTypeResolver(e,()=>!0)}),n}}({schemaComposer:r,interfaceEntity:c,interfaceNodes:e,userDefinedFieldDirectivesForNode:t})}}({relationshipAdapter:e,userDefinedFieldDirectivesForNode:t,schemaComposer:r,nodeNameToEventPayloadTypes:l})}({relationshipAdapter:u,userDefinedFieldDirectivesForNode:l,schemaComposer:t,nodeNameToEventPayloadTypes:r});return d&&c.addFields({node:d.getTypeNonNull()}),{relationshipFieldType:c,fieldName:u.name}}).reduce((e,{relationshipFieldType:t,fieldName:r})=>(t&&s(t)&&(e[r]=t),e),{})}},87826:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSubscriptionTypes=void 0;let n=r(57343),i=r(43273),o=r(64494),a=r(2650),s=r(44307),l=r(68944),u=r(92840),c=r(32291);function p(e,t,r){let n=e.toTypename===t.name;if(e.toTypename===e.fromTypename){let i=d({entityAdapter:t,relationshipName:e.relationshipName,nodeToRelationFieldMap:r});n=i?.direction==="IN"}return n?{direction:"IN",properties:e.properties.to,destinationProperties:e.properties.from,destinationTypename:e.fromTypename}:{direction:"OUT",properties:e.properties.from,destinationProperties:e.properties.to,destinationTypename:e.toTypename}}function d({entityAdapter:e,relationshipName:t,nodeToRelationFieldMap:r}){let n;if(r.has(e)?n=r.get(e):(n=new Map,r.set(e,n)),!n.has(t)){let r=Array.from(e.relationships.values()).find(e=>e.type===t);n.set(t,r)}return n.get(t)}t.generateSubscriptionTypes=function({schemaComposer:e,schemaModel:t,userDefinedFieldDirectivesForNode:r,generateRelationshipTypes:f,features:h}){let y=e.Subscription,m=e.createEnumTC(i.EventType),v=t.concreteEntities.map(e=>new o.ConcreteEntityAdapter(e)),g=v.reduce((t,n)=>{let i=r.get(n.name);if(!i)throw Error("fix user directives for object types in subscriptions.");return t[n.name]=e.createObjectTC({name:n.operations.subscriptionEventPayloadTypeName,fields:(0,l.attributeAdapterToComposeFields)(n.subscriptionEventPayloadFields,i)}),t},{});function b(t){return(0,a.withWhereInputType)({entityAdapter:t,composer:e,typeName:t.operations.subscriptionWhereInputTypeName,features:h,userDefinedFieldDirectives:r[t.name],returnUndefinedIfEmpty:!0,alwaysAllowNesting:!0})}v.forEach(e=>b(e));let _=new Map;v.filter(e=>e.isSubscribable).forEach(t=>{let o=g[t.name],a=b(t),l=r=>e.createObjectTC({name:t.operations.subscriptionEventTypeNames[r],fields:{event:{type:m.NonNull,resolve:()=>i.EventType.getValue(r.toUpperCase())?.value},timestamp:{type:new n.GraphQLNonNull(n.GraphQLFloat),resolve:e=>e.timestamp}}}),v=l("create"),T=l("update"),E=l("delete"),O=l("create_relationship"),S=l("delete_relationship"),w=(0,u.getConnectedTypes)({entityAdapter:t,schemaComposer:e,nodeNameToEventPayloadTypes:g,userDefinedFieldDirectivesForNode:r}),I=e.createObjectTC({name:`${t.name}ConnectedRelationships`,fields:w});if((0,u.hasProperties)(o)&&(v.addFields({[t.operations.subscriptionEventPayloadFieldNames.create]:{type:o.NonNull,resolve:e=>e.properties.new}}),T.addFields({previousState:{type:o.NonNull,resolve:e=>e.properties.old},[t.operations.subscriptionEventPayloadFieldNames.update]:{type:o.NonNull,resolve:e=>e.properties.new}}),E.addFields({[t.operations.subscriptionEventPayloadFieldNames.delete]:{type:o.NonNull,resolve:e=>e.properties.old}}),O.addFields({[t.operations.subscriptionEventPayloadFieldNames.create_relationship]:{type:o.NonNull,resolve:e=>p(e,t,_).properties},relationshipFieldName:{type:new n.GraphQLNonNull(n.GraphQLString),resolve:e=>d({entityAdapter:t,relationshipName:e.relationshipName,nodeToRelationFieldMap:_})?.name}}),S.addFields({[t.operations.subscriptionEventPayloadFieldNames.delete_relationship]:{type:o.NonNull,resolve:e=>p(e,t,_).properties},relationshipFieldName:{type:new n.GraphQLNonNull(n.GraphQLString),resolve:e=>d({entityAdapter:t,relationshipName:e.relationshipName,nodeToRelationFieldMap:_})?.name}})),(0,u.hasProperties)(I)){let e=e=>{let r=d({entityAdapter:t,relationshipName:e.relationshipName,nodeToRelationFieldMap:_});if(!r)return;let{destinationProperties:n,destinationTypename:i}=p(e,t,_);return{[r.name]:{...e.properties.relationship,node:{...n,__typename:`${i}EventPayload`}}}};O.addFields({createdRelationship:{type:I.NonNull,resolve:e}}),S.addFields({deletedRelationship:{type:I.NonNull,resolve:e}})}let N=a&&{args:{where:a}};if(t.isSubscribableOnCreate&&y.addFields({[t.operations.rootTypeFieldNames.subscribe.created]:{...N,type:v.NonNull,subscribe:(0,s.generateSubscribeMethod)({entityAdapter:t,type:"create"}),resolve:s.subscriptionResolve}}),t.isSubscribableOnUpdate&&y.addFields({[t.operations.rootTypeFieldNames.subscribe.updated]:{...N,type:T.NonNull,subscribe:(0,s.generateSubscribeMethod)({entityAdapter:t,type:"update"}),resolve:s.subscriptionResolve}}),t.isSubscribableOnDelete&&y.addFields({[t.operations.rootTypeFieldNames.subscribe.deleted]:{...N,type:E.NonNull,subscribe:(0,s.generateSubscribeMethod)({entityAdapter:t,type:"delete"}),resolve:s.subscriptionResolve}}),f){let r=(0,c.generateSubscriptionConnectionWhereType)({entityAdapter:t,schemaComposer:e,features:h});t.relationships.size>0&&(t.isSubscribableOnRelationshipCreate&&y.addFields({[t.operations.rootTypeFieldNames.subscribe.relationship_created]:{...r?.created&&{args:{where:r?.created}},type:O.NonNull,subscribe:(0,s.generateSubscribeMethod)({entityAdapter:t,type:"create_relationship"}),resolve:s.subscriptionResolve}}),t.isSubscribableOnRelationshipDelete&&y.addFields({[t.operations.rootTypeFieldNames.subscribe.relationship_deleted]:{...r?.deleted&&{args:{where:r?.deleted}},type:S.NonNull,subscribe:(0,s.generateSubscribeMethod)({entityAdapter:t,type:"delete_relationship"}),resolve:s.subscriptionResolve}}))}})}},32291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSubscriptionConnectionWhereType=void 0;let n=r(67661),i=r(54627),o=r(2650),a=e=>!Object.keys(e).length;t.generateSubscriptionConnectionWhereType=function({entityAdapter:e,schemaComposer:t,features:r}){let s=function({entityAdapter:e,schemaComposer:t,features:r}){let s=Array.from(e.relationships.values()).reduce((e,s)=>{let l=function({relationshipAdapter:e,schemaComposer:t,features:r,userDefinedDirectivesForInterface:s}){let l=(0,o.withWhereInputType)({entityAdapter:e,composer:t,features:r,typeName:e.operations.edgeSubscriptionWhereInputTypeName,userDefinedFieldDirectives:e.propertiesTypeName?s?.[e.propertiesTypeName]:void 0,returnUndefinedIfEmpty:!0,alwaysAllowNesting:!0}),u=e.target instanceof i.UnionEntityAdapter?e.target:void 0;if(u)return function({unionNodeTypes:e,schemaComposer:t,relationshipAdapter:r,edgeType:n}){let i=e.reduce((e,i)=>{let o=t.has(i.operations.subscriptionWhereInputTypeName);return(o||n)&&(e[i.name]=t.getOrCreateITC(r.operations.getToUnionSubscriptionWhereInputTypeName(i),e=>e.addFields({...o&&{node:i.operations.subscriptionWhereInputTypeName},...n&&{edge:n}}))),e},{});if(!a(i))return i}({unionNodeTypes:u.concreteEntities,schemaComposer:t,relationshipAdapter:e,edgeType:l});let c=e.target instanceof n.InterfaceEntityAdapter?e.target:void 0;return c?function({schemaComposer:e,interfaceEntity:t,edgeType:r,features:n,userDefinedFieldDirectives:i}){let a=(0,o.withWhereInputType)({entityAdapter:t,composer:e,features:n,typeName:t.operations.subscriptionWhereInputTypeName,interfaceOnTypeName:t.operations.implementationsSubscriptionWhereInputTypeName,userDefinedFieldDirectives:i,returnUndefinedIfEmpty:!0,alwaysAllowNesting:!0});if(a||r)return{...a&&{node:a},...r&&{edge:r}}}({schemaComposer:t,interfaceEntity:c,edgeType:l,features:r,userDefinedFieldDirectives:s?.[c.name]}):function({relationshipAdapter:e,edgeType:t,schemaComposer:r}){let n=e.target,i=r.has(n.operations.subscriptionWhereInputTypeName);if(i||t)return{...i&&{node:n.operations.subscriptionWhereInputTypeName},...t&&{edge:t}}}({relationshipAdapter:e,edgeType:l,schemaComposer:t})}({relationshipAdapter:s,schemaComposer:t,features:r});if(!l)return e;let u=t.createInputTC({name:s.operations.subscriptionWhereInputTypeName,fields:l});return e[s.name]=u,e},{});if(!a(s))return t.createInputTC({name:e.operations.relationshipsSubscriptionWhereInputTypeName,fields:s})}({entityAdapter:e,schemaComposer:t,features:r}),l=t.has(e.operations.subscriptionWhereInputTypeName);if(!l&&!s)return;let u=e.operations.subscriptionEventPayloadFieldNames.create_relationship;return{created:t.createInputTC({name:e.operations.relationshipCreatedSubscriptionWhereInputTypeName,fields:{AND:`[${e.operations.relationshipCreatedSubscriptionWhereInputTypeName}!]`,OR:`[${e.operations.relationshipCreatedSubscriptionWhereInputTypeName}!]`,NOT:e.operations.relationshipCreatedSubscriptionWhereInputTypeName,...l&&{[u]:t.getITC(e.operations.subscriptionWhereInputTypeName)},...s&&{createdRelationship:s}}}),deleted:t.createInputTC({name:e.operations.relationshipDeletedSubscriptionWhereInputTypeName,fields:{AND:`[${e.operations.relationshipDeletedSubscriptionWhereInputTypeName}!]`,OR:`[${e.operations.relationshipDeletedSubscriptionWhereInputTypeName}!]`,NOT:e.operations.relationshipDeletedSubscriptionWhereInputTypeName,...l&&{[u]:t.getITC(e.operations.subscriptionWhereInputTypeName)},...s&&{deletedRelationship:s}}})}}},21676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeProperties=t.publishEventsToSubscriptionMechanism=void 0;let n=r(72535);function i(e){return{id:e.id.toString(),id_from:e.id_from.toString(),id_to:e.id_to.toString(),relationshipName:e.relationshipName,fromTypename:(0,n.serializeNeo4jValue)(e.fromTypename),toTypename:(0,n.serializeNeo4jValue)(e.toTypename),timestamp:(0,n.serializeNeo4jValue)(e.timestamp),event:e.event,properties:{from:a(e.properties.from),to:a(e.properties.to),relationship:a(e.properties.relationship)}}}function o({labels:e,schemaModel:t}){if(e&&e.length)return t.getEntitiesByLabels(e).map(e=>e.name)}function a(e){if(e)return Object.entries(e).reduce((e,[t,r])=>(e[t]=(0,n.serializeNeo4jValue)(r),e),{})}t.publishEventsToSubscriptionMechanism=function(e,t,r){if(t){for(let s of function(e,...t){let r=t.reduce((e,t)=>(e.set(t,new Map),e),new Map);return e.reduce((e,n)=>{if(!t.includes(n.event))return e.push(n),e;let i=r.get(n.event),o=i.get(n.id);return o&&(!n.fromTypename||o?.find(e=>e.fromTypename===n.fromTypename&&e.toTypename===n.toTypename))||(i.set(n.id,(o||[]).concat({fromTypename:n.fromTypename,toTypename:n.toTypename})),e.push(n)),e},[])}((e.records[0]?.meta||[]).reduce(function(e,t){if(["create","update","delete"].includes(t.event)&&e.push({id:t.id.toString(),typename:t.typename,timestamp:(0,n.serializeNeo4jValue)(t.timestamp),event:t.event,properties:{old:a(t.properties.old),new:a(t.properties.new)}}),["create_relationship","delete_relationship"].includes(t.event)&&(t.toTypename&&t.fromTypename&&e.push(i(t)),t.toLabels&&t.fromLabels)){let n=o({labels:t.fromLabels,schemaModel:r}),a=o({labels:t.toLabels,schemaModel:r});if(!n||!a)return e;for(let r of n)for(let n of a)e.push(i({...t,fromTypename:r,toTypename:n}))}return e},[]),"delete_relationship","delete","create_relationship"))try{let e=t.publish(s);e&&e.catch(e=>{console.warn(e)})}catch(e){console.warn(e)}}},t.serializeProperties=a},68944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withArrayOperators=t.withMathOperators=t.concreteEntityToUpdateInputFields=t.concreteEntityToCreateInputFields=t.attributeAdapterToComposeFields=t.graphqlDirectivesToCompose=t.graphqlArgsToCompose=void 0;let n=r(57343),i=r(58388),o=r(61518),a=r(95349),s=r(99262),l=r(19594);function u(e){return e.reduce((e,t)=>{let r=new o.ArgumentAdapter(t);return{...e,[t.name]:{type:r.getTypePrettyName(),description:r.description,...void 0!==r.defaultValue?{defaultValue:r.defaultValue}:{}}}},{})}function c(e){return e.map(e=>({args:(e.arguments||[])?.reduce((e,t)=>({...e,[t.name.value]:a.parseValueNode(t.value)}),{}),name:e.name.value}))}t.graphqlArgsToCompose=u,t.graphqlDirectivesToCompose=c,t.attributeAdapterToComposeFields=function(e,t){let r={};for(let n of e){if(!1===n.isReadable())continue;let e={type:n.getTypePrettyName(),args:{},description:n.description},i=t.get(n.name);i&&(e.directives=c(i)),(n.typeHelper.isInt()||n.typeHelper.isFloat())&&(e.resolve=l.numericalResolver),n.typeHelper.isID()&&(e.resolve=s.idResolver),n.args&&(e.args=u(n.args)),r[n.name]=e}return r},t.concreteEntityToCreateInputFields=function(e,t){let r={};for(let n of e){let e={type:n.getInputTypeNames().create.pretty,defaultValue:n.getDefaultValue(),directives:[]},o=t.get(n.name);o&&(e.directives=c(o.filter(e=>e.name.value===i.DEPRECATED))),r[n.name]=e}return r},t.concreteEntityToUpdateInputFields=function(e,t,r=[]){let n={};for(let o of e){let e={type:o.getInputTypeNames().update.pretty,directives:[]},a=t.get(o.name);for(let t of(a&&(e.directives=c(a.filter(e=>e.name.value===i.DEPRECATED))),n[o.name]=e,r)){let r=t(o,e);n={...n,...r}}}return n},t.withMathOperators=function(){return(e,t)=>{let r={};if(e.mathModel)for(let n of e.mathModel.getMathOperations())r[n]=t;return r}},t.withArrayOperators=function(){return e=>{let t={};return e.listModel&&(t[e.listModel.getPop()]=n.GraphQLInt,t[e.listModel.getPush()]=e.getInputTypeNames().update.pretty),t}}},55727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnricherContext=void 0;let n=r(57343);class i{constructor(e,t){this.augmentedSchema=(0,n.buildASTSchema)(t,{assumeValid:!0}),this.userDefinitionNodeMap=this.buildDefinitionsNodeMap(e)}buildDefinitionsNodeMap(e){let t={};for(let r of e.definitions)if((0,n.isTypeDefinitionNode)(r)&&(t[r.name.value]=r),(0,n.isTypeExtensionNode)(r)){let e=`${r.name.value}_EXTENSIONS`;t[e]=(t[e]||[]).concat(r)}return t}}t.EnricherContext=i},73587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveArgumentOfCorrectType=void 0;let n=r(57343),i=r(90781),o=r(83310),a=r(56883);t.DirectiveArgumentOfCorrectType=function(e=!0){return function(t){let r;let s=()=>(r||(r=(0,n.buildASTSchema)(t.getDocument(),{assumeValid:!0,assumeValidSDL:!0})),r);return{Directive(r,l,u,c,p){let d,f;let h=e&&["subscriptionsAuthorization","authorization","authentication"].reduce((e,t)=>(!e&&r.name.value.toLowerCase().includes(t.toLowerCase())&&(e=t),e),void 0),y=["fulltext","relationship","node","customResolver","cypher"].find(e=>r.name.value.toLowerCase()===e.toLowerCase());if(!h&&!y||(h?(f=s().getDirective(r.name.value),d=h):(f=t.getSchema()?.getDirective(r.name.value),d=r.name.value),!f))return;let m=[...(0,a.getPathToNode)(c,p)[0],`@${d}`];for(let e of r.arguments||[]){let a=function(e,t){return e.find(e=>e.name===t)}(f.args,e.name.value);if(!a)return;let{isValid:s,errorMsg:l,errorPath:u}=function(e,t){let r=t.type,i=(0,n.valueFromASTUntyped)(e.value),o=!0,a="",s=[];return(0,n.coerceInputValue)(i,r,(e,t,r)=>{o=!1,a=r.message,s=e}),{isValid:o,errorMsg:a,errorPath:s}}(e,a);s||t.reportError((0,o.createGraphQLError)({nodes:[e,r],path:[...m,e.name.value,...u],errorMsg:`Invalid argument: ${e.name.value}, error: ${l}`,extensions:{exception:{code:i.VALIDATION_ERROR_CODES[d.toUpperCase()]}}}))}}}}}},26647:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyAuthorization=void 0;let n=r(71744),i=r(83310);t.verifyAuthorization=function(){return function({directiveNode:e}){for(let t of n.AuthorizationAnnotationArguments)if(e.arguments?.find(e=>e.name.value===t))return;throw new i.DocumentValidationError(`@authorization requires at least one of ${n.AuthorizationAnnotationArguments.join(", ")} arguments`,[])}}},21049:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyCoalesce=void 0;let n=r(57343),i=r(21490),o=r(64626),a=r(58388),s=r(83310);t.verifyCoalesce=function(e){return function({directiveNode:t,traversedDef:r}){if(r.kind!==n.Kind.FIELD_DEFINITION)return;let l=t.arguments?.find(e=>"value"===e.name.value),u=(0,o.getInnerTypeName)(r.type);if(l){if(!(0,o.isArrayType)(r)){if((0,a.isSpatial)(u))throw new s.DocumentValidationError("@coalesce is not supported by Spatial types.",["value"]);if((0,a.isTemporal)(u))throw new s.DocumentValidationError("@coalesce is not supported by Temporal types.",["value"]);if(!a.GRAPHQL_BUILTIN_SCALAR_TYPES.includes(u)&&!e.find(e=>e.name.value===u))throw new s.DocumentValidationError("@coalesce directive can only be used on types: Int | Float | String | Boolean | ID | Enum",[])}(0,i.assertArgumentHasSameTypeAsField)({directiveName:"@coalesce",traversedDef:r,argument:l,enums:e})}}}},52866:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyDefault=void 0;let n=r(57343),i=r(21490),o=r(64626),a=r(83310),s=r(58388);t.verifyDefault=function(e){return function({directiveNode:t,traversedDef:r}){if(r.kind!==n.Kind.FIELD_DEFINITION)return;let l=t.arguments?.find(e=>"value"===e.name.value),u=(0,o.getInnerTypeName)(r.type);if(l){if(!(0,o.isArrayType)(r)){if((0,s.isSpatial)(u))throw new a.DocumentValidationError("@default is not supported by Spatial types.",["value"]);if((0,s.isTemporal)(u)){if(Number.isNaN(Date.parse((l?.value).value)))throw new a.DocumentValidationError(`@default.${l.name.value} is not a valid ${u}`,["value"])}else if(!s.GRAPHQL_BUILTIN_SCALAR_TYPES.includes(u)&&!e.some(e=>e.name.value===u))throw new a.DocumentValidationError("@default directive can only be used on Temporal types and types: Int | Float | String | Boolean | ID | Enum",[])}(0,i.assertArgumentHasSameTypeAsField)({directiveName:"@default",traversedDef:r,argument:l,enums:e})}}}},7971:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyFulltext=void 0;let n=r(57343),i=r(95349),o=r(83310);t.verifyFulltext=function({directiveNode:e,traversedDef:t}){if(t.kind!==n.Kind.OBJECT_TYPE_DEFINITION&&t.kind!==n.Kind.OBJECT_TYPE_EXTENSION)return;let r=e.arguments?.find(e=>"indexes"===e.name.value);if(!r)return;let a=(0,i.parseValueNode)(r.value),s=t.fields?.filter(e=>{if(e.type.kind===n.Kind.NON_NULL_TYPE){let t=e.type.type;if(t.kind===n.Kind.NAMED_TYPE)return["String","ID"].includes(t.name.value)}return e.type.kind===n.Kind.NAMED_TYPE&&["String","ID"].includes(e.type.name.value)});a.forEach(e=>{let t=e.indexName||e.name;if(a.filter(e=>t===(e.indexName||e.name)).length>1)throw new o.DocumentValidationError(`@fulltext.indexes invalid value for: ${t}. Duplicate name.`,["indexes"]);(e.fields||[]).forEach(e=>{if(!s?.some(t=>t.name.value===e))throw new o.DocumentValidationError(`@fulltext.indexes invalid value for: ${t}. Field ${e} is not of type String or ID.`,["indexes"])})})}},22311:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyId=void 0;let n=r(57343),i=r(95349),o=r(64626),a=r(83310);t.verifyId=function({directiveNode:e,traversedDef:t}){if(t.kind!==n.Kind.FIELD_DEFINITION)return;let r=e.arguments?.find(e=>"autogenerate"===e.name.value);if(!r||(0,i.parseValueNode)(r.value)){if(t.type.kind===n.Kind.LIST_TYPE)throw new a.DocumentValidationError("Cannot autogenerate an array.",["@id"]);if("ID"!==(0,o.getInnerTypeName)(t.type))throw new a.DocumentValidationError("Cannot autogenerate a non ID field.",["@id"])}}},18261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyLimit=void 0;let n=r(83310),i=r(64626);t.verifyLimit=function({directiveNode:e}){let t=e.arguments?.find(e=>"default"===e.name.value),r=e.arguments?.find(e=>"max"===e.name.value);if(!t&&!r)return;let o=(0,i.parseArgumentToInt)(t),a=(0,i.parseArgumentToInt)(r);if(o){let e=o.toNumber();if(e<=0)throw new n.DocumentValidationError(`@limit.default invalid value: ${e}. Must be greater than 0.`,["default"])}if(a){let e=a.toNumber();if(e<=0)throw new n.DocumentValidationError(`@limit.max invalid value: ${e}. Must be greater than 0.`,["max"])}if(o&&a){let e=o.toNumber(),t=a.toNumber();if(a<o)throw new n.DocumentValidationError(`@limit.max invalid value: ${t}. Must be greater than limit.default: ${e}.`,["max"])}}},63965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyPopulatedBy=void 0;let n=r(57343),i=r(95349),o=r(83310),a=r(64626);t.verifyPopulatedBy=function(e){return function({directiveNode:t,traversedDef:r}){let s=t.arguments?.find(e=>"callback"===e.name.value);if(!s||r.kind!==n.Kind.FIELD_DEFINITION)return;let l=(0,i.parseValueNode)(s.value);if(!e)throw new o.DocumentValidationError("@populatedBy.callback needs to be provided in features option.",["callback"]);if("function"!=typeof(e||{})[l])throw new o.DocumentValidationError(`@populatedBy.callback \`${l}\` must be of type Function.`,["callback"]);if(!["Int","Float","String","Boolean","ID","BigInt","DateTime","Date","Time","LocalDateTime","LocalTime","Duration"].includes((0,a.getInnerTypeName)(r.type)))throw new o.DocumentValidationError("@populatedBy can only be used on fields of type Int, Float, String, Boolean, ID, BigInt, DateTime, Date, Time, LocalDateTime, LocalTime or Duration.",[])}}},60783:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyRelationshipArgumentValue=void 0;let n=r(57343),i=r(95349),o=r(83310),a=r(35835),s=r(64626);function l(e,t,r){if(!e)return;let n=e.get(r);n?.forEach(([e,r,n])=>{if(e!==t[0]&&r===t[1]&&n===t[2])throw new o.DocumentValidationError("@relationship invalid. Multiple fields of the same type cannot have a relationship with the same direction and type combination.",[])})}t.verifyRelationshipArgumentValue=function(e,t,r){return function({directiveNode:u,traversedDef:c,parentDef:p}){if(c.kind!==n.Kind.FIELD_DEFINITION)return;if(!p){console.error("No parent definition");return}let d=u.arguments?.find(e=>"type"===e.name.value),f=u.arguments?.find(e=>"direction"===e.name.value),h=u.arguments?.find(e=>"properties"===e.name.value);if(d||f){if(d&&f){let r=(0,s.getPrettyName)(c.type),n=(0,i.parseValueNode)(d.value),o=(0,i.parseValueNode)(f.value);(function(e,t,r,n,i){let o=n.get(e.name.value);l(o,t,r),n.set(e.name.value,function(e,t,r){let n=e||new Map,i=(e?.get(r)||[]).concat([t]);return n.set(r,i),n}(o,t,r)),(0,a.getInheritedTypeNames)(e,i).forEach(e=>{l(n.get(e),t,r)}),(0,a.hydrateInterfaceWithImplementedTypesMap)(e,i)})(p,[c.name.value,o,r],n,e,t)}if(h){let e=(0,i.parseValueNode)(h.value);if(!r)throw Error("Missing data: Enums, Interfaces, Unions.");if(r.interfaces.filter(t=>t.name.value.toLowerCase()===e.toLowerCase()&&t.kind===n.Kind.INTERFACE_TYPE_DEFINITION).length>0)throw new o.DocumentValidationError("@relationship.properties invalid. The @relationshipProperties directive must be applied to a type and not an interface, a breaking change introduced in version 5.0.0.",["properties"]);let t=r.objects.filter(t=>t.name.value.toLowerCase()===e.toLowerCase()&&t.kind===n.Kind.OBJECT_TYPE_DEFINITION);if(t.length>1)throw new o.DocumentValidationError("@relationship.properties invalid. Cannot have more than 1 type represent the relationship properties.",["properties"]);if(!t.length)throw new o.DocumentValidationError(`@relationship.properties invalid. Cannot find type to represent the relationship properties: ${e}.`,["properties"]);if(!t[0]?.directives?.some(e=>"relationshipProperties"===e.name.value))throw new o.DocumentValidationError(`@relationship.properties invalid. Properties type ${e} must use directive \`@relationshipProperties\`.`,["properties"])}}}}},80005:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyTimestamp=void 0;let n=r(57343),i=r(64626),o=r(83310);t.verifyTimestamp=function({traversedDef:e}){if(e.kind===n.Kind.FIELD_DEFINITION){if(e.type.kind===n.Kind.LIST_TYPE)throw new o.DocumentValidationError("Cannot autogenerate an array.",["@timestamp"]);if(!["DateTime","Time"].includes((0,i.getInnerTypeName)(e.type)))throw new o.DocumentValidationError("Cannot timestamp Temporal fields lacking time zone information.",["@timestamp"])}}},71867:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ValidDirectiveAtFieldLocation=void 0;let a=r(57343),s=o(r(49450)),l=r(90976),u=r(33530),c=r(14321),p=r(83310),d=r(56883);function f({directiveNode:e,parentDef:t}){let r=Object.values(s).concat(l.typeDependantDirectivesScaffolds).find(t=>t.name===e.name.value);if(r){if("relationship"===r.name&&t.kind===a.Kind.INTERFACE_TYPE_DEFINITION)throw new p.DocumentValidationError(`Invalid directive usage: Directive @${r.name} is not supported on fields of interface types (${t.name.value}). Since version 5.0.0, interface fields can only have @declareRelationship. Please add the @relationship directive to the fields in all types which implement it.`,[`@${e.name.value}`]);throw new p.DocumentValidationError(`Invalid directive usage: Directive @${r.name} is not supported on fields of the ${t.name.value} type.`,[`@${e.name.value}`])}}t.ValidDirectiveAtFieldLocation=function(e){return{Directive(t,r,n,i,o){let[s,l,h]=(0,d.getPathToNode)(i,o);if(!l||l.kind!==a.Kind.FIELD_DEFINITION)return;if(!h){console.error("No parent of last definition traversed");return}let y=function({directiveNode:e,traversedDef:t,parentDef:r}){return r&&(r.kind===a.Kind.OBJECT_TYPE_DEFINITION||r.kind===a.Kind.OBJECT_TYPE_EXTENSION)&&["Query","Mutation","Subscription"].includes(r.name.value)?()=>(function({directiveNode:e,traversedDef:t,parentDef:r}){if("Subscription"!==r.name.value){if("cypher"===e.name.value||"authentication"===e.name.value)return;let n=t.directives?.some(e=>"cypher"===e.name.value);if("authorization"===e.name.value&&n)throw new p.DocumentValidationError(`Invalid directive usage: Directive @authorization is not supported on fields of the ${r.name.value} type. Did you mean to use @authentication?`,[`@${e.name.value}`])}f({directiveNode:e,parentDef:r})})({directiveNode:e,traversedDef:t,parentDef:r}):r&&(r.kind===a.Kind.INTERFACE_TYPE_DEFINITION||r.kind===a.Kind.INTERFACE_TYPE_EXTENSION)?()=>(function({directiveNode:e,parentDef:t}){(0,c.isInArray)(u.SCHEMA_CONFIGURATION_FIELD_DIRECTIVES,e.name.value)||"declareRelationship"===e.name.value||"private"===e.name.value||f({directiveNode:e,parentDef:t})})({directiveNode:e,parentDef:r}):void 0}({directiveNode:t,traversedDef:l,parentDef:h});if(!y)return;let{isValid:m,errorMsg:v,errorPath:g}=(0,p.assertValid)(y);m||e.reportError((0,p.createGraphQLError)({nodes:[l],path:[...s,...g],errorMsg:v}))}}}},35559:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.directiveIsValid=void 0;let n=r(83310),i=r(56883),o=r(26647),a=r(21049),s=r(52866),l=r(7971),u=r(18261),c=r(63965),p=r(60783);t.directiveIsValid=function(e,t){if(!(e.enums&&e.interfaces&&e.unions&&e.objects))throw Error("Missing data.");return function(r){let d=new Map,f=new Map;return{Directive(h,y,m,v,g){let b=function(e,t,r,n,i){switch(e){case"coalesce":return(0,a.verifyCoalesce)(n.enums);case"default":return(0,s.verifyDefault)(n.enums);case"fulltext":return l.verifyFulltext;case"populatedBy":return(0,c.verifyPopulatedBy)(i);case"limit":return u.verifyLimit;case"relationship":return(0,p.verifyRelationshipArgumentValue)(t,r,n);case"authorization":return(0,o.verifyAuthorization)();default:return}}(h.name.value,d,f,e,t);if(!b)return;let[_,T,E]=(0,i.getPathToNode)(v,g),O=[..._,`@${h.name.value}`];if(!T){console.error("No last definition traversed");return}let{isValid:S,errorMsg:w,errorPath:I}=(0,n.assertValid)(()=>b({directiveNode:h,traversedDef:T,parentDef:E}));S||r.reportError((0,n.createGraphQLError)({nodes:[h,T],path:[...O,...I],errorMsg:w}))}}}}},58418:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidJwtDirectives=void 0;let n=r(57343),i=r(58388),o=r(83310),a=r(56883),s=r(64626);t.ValidJwtDirectives=function(e){let t=new Map,r=new Map;for(let i of e.getDocument().definitions.filter(e=>e.kind===n.Kind.OBJECT_TYPE_DEFINITION||e.kind===n.Kind.OBJECT_TYPE_EXTENSION||e.kind===n.Kind.INTERFACE_TYPE_DEFINITION||e.kind===n.Kind.INTERFACE_TYPE_EXTENSION)){let e=r.get(i.name.value)||[];r.set(i.name.value,e.concat(i)),i.directives?.some(e=>"jwt"===e.name.value)&&t.set(i.name.value,[])}for(let e of t.keys())t.set(e,r.get(e)||[]);return{Directive(r,l,u,c,p){let d,f;let h="jwt"===r.name.value,y="jwtClaim"===r.name.value;if(!h&&!y)return;let[m,v,g]=(0,a.getPathToNode)(c,p);if(!v){console.error("No last definition traversed");return}if(h){if(v.kind!==n.Kind.OBJECT_TYPE_DEFINITION&&v.kind!==n.Kind.OBJECT_TYPE_EXTENSION)return;d=(0,o.assertValid)(()=>(function(e,t){let r=[e.name.value,...(e.interfaces||[]).map(e=>e.name.value)];for(let e of t.keys())if(!r.includes(e))throw new o.DocumentValidationError("Invalid directive usage: Directive @jwt can only be used once in the Type Definitions.",[]);let n=[];for(let e of r){let r=t.get(e);if(r)for(let e of r){if(n.push(...e.directives||[]),n.length>1)throw new o.DocumentValidationError("Invalid directive usage: Directive @jwt cannot be used in combination with other directives.",[]);if(!0===e.fields?.some(e=>!i.GRAPHQL_BUILTIN_SCALAR_TYPES.includes(s.getInnerTypeName(e.type))))throw new o.DocumentValidationError("Invalid directive usage: Fields of a @jwt type can only be Scalars or Lists of Scalars.",[])}}})(v,t)),f="@jwt"}else{if(!g){console.error("No parent of last definition traversed");return}d=(0,o.assertValid)(()=>(function(e,t){for(let r of[t.name.value,...(t.interfaces||[]).map(e=>e.name.value)])if(e.has(r))return;throw new o.DocumentValidationError('Invalid directive usage: Directive @jwtClaim can only be used in \\"@jwt\\" types.',[])})(t,g)),f="@jwtClaim"}let{isValid:b,errorMsg:_}=d;b||e.reportError((0,o.createGraphQLError)({nodes:[r,v],path:[...m,f],errorMsg:_}))}}}},49336:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidRelationshipDeclaration=void 0;let n=r(57343),i=r(83310),o=r(35835),a=r(56883);t.ValidRelationshipDeclaration=function(e){var t;let r=new Map,s=new Map,l=(t=(e,t)=>{let n=r.get(e)||new Set;r.set(e,n.add(t))},function(r,o,s,l,u){let[c,p,d]=(0,a.getPathToNode)(l,u);if(!d){console.error("No parent definition traversed");return}if(!p){console.error("No last definition traversed");return}let f=[n.Kind.INTERFACE_TYPE_DEFINITION,n.Kind.INTERFACE_TYPE_EXTENSION].includes(d.kind);if("relationship"===r.name.value&&!f){t(d.name.value,p.name.value);return}if("declareRelationship"===r.name.value){f||e.reportError((0,i.createGraphQLError)({nodes:[d],path:[...c],errorMsg:"`@declareRelationship` is only available on Interface fields. Use `@relationship` if in an Object type."})),t(d.name.value,p.name.value);return}}),u={leave(t,u,c,p,d){if(function({node:e,context:t,interfaceToImplementationsMap:r,onDirectiveVisitor:i}){let a={ObjectTypeDefinition(e){(0,o.hydrateInterfaceWithImplementedTypesMap)(e,r)},ObjectTypeExtension(e){(0,o.hydrateInterfaceWithImplementedTypesMap)(e,r)},Directive:i};t.getDocument().definitions.filter(t=>(t.kind===n.Kind.INTERFACE_TYPE_EXTENSION||t.kind===n.Kind.OBJECT_TYPE_EXTENSION)&&t.name.value===e.name.value).forEach(e=>(0,n.visit)(e,a))}({node:t,context:e,interfaceToImplementationsMap:s,onDirectiveVisitor:l}),t.kind===n.Kind.OBJECT_TYPE_DEFINITION&&(0,o.hydrateInterfaceWithImplementedTypesMap)(t,s),t.kind===n.Kind.INTERFACE_TYPE_DEFINITION&&!r.has(t.name.value))return;let{isValid:f,errorMsg:h,errorPath:y}=(0,i.assertValid)(()=>(function(e){for(let{declaredRelationshipFields:t,actualRelationshipFields:r}of function({parentDef:e,typeNameToRelationshipFields:t,interfaceToImplementationsMap:r}){let i=(0,o.getInheritedTypeNames)(e,r),a=[n.Kind.INTERFACE_TYPE_DEFINITION,n.Kind.INTERFACE_TYPE_EXTENSION].includes(e.kind);return i.map(r=>a?{declaredRelationshipFields:t.get(e.name.value),actualRelationshipFields:t.get(r)}:{declaredRelationshipFields:t.get(r),actualRelationshipFields:t.get(e.name.value)})}(e))t?.forEach(e=>{if(!r?.has(e))throw new i.DocumentValidationError("Field was declared as a relationship but the `@relationship` directive is missing from the implementation.",[e])})})({parentDef:t,interfaceToImplementationsMap:s,typeNameToRelationshipFields:r})),[m]=(0,a.getPathToNode)(p,d);f||e.reportError((0,i.createGraphQLError)({nodes:[t],path:[...m,t.name.value,...y],errorMsg:h}))}};return{Directive:l,InterfaceTypeDefinition:u,ObjectTypeDefinition:u}}},24856:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidRelationshipProperties=void 0;let n=r(57343),i=r(58388),o=r(83310),a=r(56883);function s(e){(e.kind===n.Kind.OBJECT_TYPE_DEFINITION||e.kind===n.Kind.OBJECT_TYPE_EXTENSION)&&e.fields?.forEach(e=>{let t=[e.name.value];if(i.RESERVED_INTERFACE_FIELDS.forEach(([r,n])=>{if(e.name.value===r)throw new o.DocumentValidationError(`Invalid @relationshipProperties field: ${n}`,t)}),e.directives){let r=["authorization","authentication","subscriptionsAuthorization","relationship","cypher"],n=e.directives.find(e=>r.includes(e.name.value));if(n)throw new o.DocumentValidationError(`Invalid @relationshipProperties field: Cannot use the @${n.name.value} directive on relationship properties.`,t)}})}t.ValidRelationshipProperties=function(e){let t=new Set,r={leave(r,n,i,l,u){if(t.has(r.name.value)){let{isValid:t,errorMsg:n,errorPath:i}=(0,o.assertValid)(()=>s(r)),[c]=(0,a.getPathToNode)(l,u);t||e.reportError((0,o.createGraphQLError)({nodes:[r],path:[...c,r.name.value,...i],errorMsg:n}))}}};return{Directive(r,n,i,l,u){let[c,p]=(0,a.getPathToNode)(l,u);if(!p){console.error("No last definition traversed");return}if("relationshipProperties"===r.name.value){let{isValid:n,errorMsg:i,errorPath:a}=(0,o.assertValid)(()=>s(p));n?t.add(p?.name.value):e.reportError((0,o.createGraphQLError)({nodes:[r,p],path:[...c,...a],errorMsg:i}))}},ObjectTypeDefinition:r,ObjectTypeExtension:r}}},87455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidRelayID=void 0;let n=r(83310),i=r(35835),o=r(56883);function a(e){let t=e.fields?.find(e=>"id"===e.name.value);if(t&&!t.directives?.find(e=>"alias"===e.name.value))return t}function s(e,t,r){return!!t.get(e.name.value)||!!i.getInheritedTypeNames(e,r)?.find(e=>!0===t.get(e))}function l(e){let t=!1,r=!1;for(let n of e)if(n){if(n.has("id")){r=!0;return}}else t=!0;if(!1===r&&!1===t)throw new n.DocumentValidationError("Type already has a field `id`, which is reserved for Relay global node identification.\nEither remove it, or if you need access to this property, consider using the `@alias` directive to access it via another field.",["id"])}t.ValidRelayID=function(e){let t=new Map,r=new Map,u=new Map,c=function(e,t){let r=u.get(e)||new Set;t&&r.add(t),u.set(e,r)},p=function(e){return u.get(e)},d={enter(e){(0,i.hydrateInterfaceWithImplementedTypesMap)(e,r)},leave(o){c(o.name.value);let u=a(o);if(!u||!s(o,t,r))return;let d=((0,i.getInheritedTypeNames)(o,r)||[]).map(p),{isValid:f,errorMsg:h,errorPath:y}=(0,n.assertValid)(()=>l(d));f||e.reportError((0,n.createGraphQLError)({nodes:[o,u],path:[o.name.value,...y],errorMsg:h}))}},f={leave(o){if(c(o.name.value),!a(o)||!s(o,t,r))return;let u=((0,i.getInheritedTypeNames)(o,r)||[]).map(p),{isValid:d,errorMsg:f,errorPath:h}=(0,n.assertValid)(()=>l(u));d||e.reportError((0,n.createGraphQLError)({nodes:[o],path:[o.name.value,...h],errorMsg:f}))}};return{Directive(i,a,l,u,p){let[d,f,h]=(0,o.getPathToNode)(u,p);if(!f){console.error("No last definition traversed");return}if(!h){console.error("No parent of last definition traversed");return}if("alias"===i.name.value&&c(h.name.value,f.name.value),"relayId"!==i.name.value)return;let{isValid:y,errorMsg:m,errorPath:v}=(0,n.assertValid)(()=>(function({typeDef:e,typeNameToGlobalId:t,interfaceToImplementingTypes:r}){if(s(e,t,r))throw new n.DocumentValidationError("Invalid directive usage: Only one field may be decorated with the `@relayId` directive.",["@relayId"]);t.set(e.name.value,!0)})({directiveNode:i,typeDef:h,typeNameToGlobalId:t,interfaceToImplementingTypes:r}));y||e.reportError((0,n.createGraphQLError)({nodes:[i,f],path:[...d,...v],errorMsg:m}))},ObjectTypeDefinition:d,ObjectTypeExtension:d,InterfaceTypeDefinition:f,InterfaceTypeExtension:f}}},66942:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeReplaceWildcardVisitor=void 0;let n=r(14364),i=r(57343),o=r(36859);function a(e){switch(e){case"Boolean":return!1;case"String":return"";case"Int":case"Float":return 0;case"List":return[];default:return null}}t.makeReplaceWildcardVisitor=function({jwt:e,schema:t}){return function(){return{ObjectField:{leave(r){if(r.value.kind!==i.Kind.STRING)return;let s=r.value.value;if(!s.includes("$jwt"))return;let l=s.substring(5),u=e?.fields?.find(e=>e.name.value===l)||o.getStandardJwtDefinition(t)?.fields?.find(e=>e.name.value===l);if(u){var c;let e;let t=(c=u.type,e=null,c.kind===i.Kind.NAMED_TYPE&&(e=a(c.name.value)),c.kind===i.Kind.LIST_TYPE&&(e=a("List")),(0,n.astFromValueUntyped)(e)||r.value);return{...r,value:t}}}}}}}},83310:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGraphQLError=t.assertValid=t.DocumentValidationError=void 0;let n=r(57343);class i extends Error{constructor(e,t){super(e),this.path=t}}t.DocumentValidationError=i,t.assertValid=function(e){let t,r,n=!0;try{e()}catch(e){n=!1,t=e.message,r=e.path||[]}return{isValid:n,errorMsg:t,errorPath:r}},t.createGraphQLError=function({nodes:e,path:t,errorMsg:r,extensions:i}){return new n.GraphQLError(r||"Error",e,void 0,void 0,t,void 0,i)}},79615:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectiveNames=void 0;let n=r(14178);t.getDirectiveNames=function(e){let t=e.directives??[];return(0,n.filterTruthy)(t.map(e=>e.name.value))}},35835:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInheritedTypeNames=t.hydrateInterfaceWithImplementedTypesMap=void 0;let n=r(57343);t.hydrateInterfaceWithImplementedTypesMap=function(e,t){if(e?.kind===n.Kind.OBJECT_TYPE_DEFINITION||e?.kind===n.Kind.OBJECT_TYPE_EXTENSION)for(let r of e.interfaces||[]){let n=t.get(r.name.value)||new Set;t.set(r.name.value,n.add(e.name.value))}},t.getInheritedTypeNames=function(e,t){return e.kind===n.Kind.INTERFACE_TYPE_DEFINITION||e.kind===n.Kind.INTERFACE_TYPE_EXTENSION?Array.from(t.get(e.name.value)?.values()||[]):e.kind===n.Kind.OBJECT_TYPE_DEFINITION||e.kind===n.Kind.OBJECT_TYPE_EXTENSION?(e.interfaces||[]).map(e=>e.name.value):[]}},56883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathToNode=void 0;let n=r(57343);t.getPathToNode=function(e,t){var r,i;let o,a;if(!t||!t[0]||Array.isArray(t[0]))return[[],void 0,void 0];if(t[0].kind===n.Kind.DOCUMENT){let r=t[1];if(!r||Array.isArray(r)&&!r.length)return[[],void 0,void 0];let[,n]=e;o=r[n],a=2}else o=t[0],a=0;let s=[o],l=o;for(let t of(r=o,i=a,function*(t=i){for(;e[t]&&"directives"!==e[t];){let n=e[t],i=e[t+1];r=r[n][i],yield r,t+=2}})())l=t,s.push(t);let u=s.slice(-2)[0];return[s.map(e=>e.name?.value||"Schema"),l,u]}},21490:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertArgumentHasSameTypeAsField=void 0;let n=r(57343),i=r(64626),o=r(58388),a=r(83310);function s(e,t,r){return!!((0,o.isSpatial)(e)||(0,o.isTemporal)(e))||("id"===e.toLowerCase()?!(i.fromValueKind(t,r,e)?.toLowerCase()!=="string"):i.fromValueKind(t,r,e)?.toLowerCase()===e.toLowerCase())}t.assertArgumentHasSameTypeAsField=function({directiveName:e,traversedDef:t,argument:r,enums:o}){let l=(0,i.getInnerTypeName)(t.type);if((0,i.isArrayType)(t)){if(r.value.kind!==n.Kind.LIST)throw new a.DocumentValidationError(`${e}.${r.name.value} on ${l} list fields must be a list of ${l} values`,[r.name.value]);r.value.values.forEach(t=>{if(t&&!s(l,t,o))throw new a.DocumentValidationError(`${e}.${r.name.value} on ${l} list fields must be a list of ${l} values`,[r.name.value])})}else if(!s(l,r.value,o))throw new a.DocumentValidationError(`${e}.${r.name.value} on ${l} fields must be of type ${l}`,[r.name.value])}},64626:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isArrayType=t.parseArgumentToInt=t.getPrettyName=t.fromValueKind=t.getInnerTypeName=void 0;let a=r(57343),s=o(r(66007)),l=r(95349);t.getInnerTypeName=function e(t){return t.kind===a.Kind.LIST_TYPE||t.kind===a.Kind.NON_NULL_TYPE?e(t.type):t.name.value},t.fromValueKind=function(e,t,r){switch(e.kind){case a.Kind.STRING:return"string";case a.Kind.INT:return"int";case a.Kind.FLOAT:return"float";case a.Kind.BOOLEAN:return"boolean";case a.Kind.ENUM:{let n=t?.find(e=>e.name.value===r),i=n?.values?.find(t=>t.name.value===e.value);if(n&&i)return n.name.value;break}default:return}},t.getPrettyName=function e(t){return t.kind===a.Kind.LIST_TYPE?`[${e(t.type)}]`:t.kind===a.Kind.NON_NULL_TYPE?`${e(t.type)}!`:t.name.value},t.parseArgumentToInt=function(e){if(e){let t=(0,l.parseValueNode)(e.value);return s.int(t)}},t.isArrayType=function(e){return e.type.kind===a.Kind.LIST_TYPE||e.type.kind===a.Kind.NON_NULL_TYPE&&e.type.type.kind===a.Kind.LIST_TYPE}},69611:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidDirectiveInheritance=void 0;let n=r(83310);t.ValidDirectiveInheritance=function(e){let t=new Map,r=new Map,i=[];return{ObjectTypeDefinition(e){e.interfaces&&e.interfaces.length>1&&r.set(e.name.value,e.interfaces.map(e=>e.name.value))},InterfaceTypeDefinition(o){if(!o.directives)return;let a=o.directives.find(e=>i.includes(e.name.value));if(t.set(o.name.value,!!a),!a)return;let{isValid:s,errorMsg:l,errorPath:u}=(0,n.assertValid)(()=>(function(e,t){for(let[r,i]of t.entries()){let t=!1;for(let o of i)if(!0===e.get(o)){if(t)throw new n.DocumentValidationError(`Multiple implemented interfaces of ${r} have @exclude directive - cannot determine directive to use.`,[r]);t=!0}}})(t,r));s||e.reportError((0,n.createGraphQLError)({nodes:[o],path:u,errorMsg:l}))}}}},44826:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReservedTypeNames=void 0;let n=r(57343),i=r(58388),o=r(83310);t.ReservedTypeNames=function(e){return{enter(t){if(![n.Kind.OBJECT_TYPE_DEFINITION,n.Kind.SCALAR_TYPE_DEFINITION,n.Kind.INTERFACE_TYPE_DEFINITION,n.Kind.UNION_TYPE_DEFINITION,n.Kind.ENUM_TYPE_DEFINITION,n.Kind.INPUT_OBJECT_TYPE_DEFINITION,n.Kind.INTERFACE_TYPE_EXTENSION].some(e=>e===t.kind))return;let{isValid:r,errorMsg:a}=(0,o.assertValid)(()=>{i.RESERVED_TYPE_NAMES.forEach(e=>{if(e.regex.test(t.name.value))throw new o.DocumentValidationError(e.error,[])})});r||e.reportError((0,o.createGraphQLError)({nodes:[t],errorMsg:a}))}}}},21821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaOrTypeDirectives=t.DirectiveCombinationValid=void 0;let n=r(57343),i=r(4195),o=r(83310),a=r(56883);t.DirectiveCombinationValid=function(e){let t=new Map,r=new Map,s=function(e,i){if(e.kind===n.Kind.OBJECT_TYPE_DEFINITION||e.kind===n.Kind.INTERFACE_TYPE_DEFINITION||e.kind===n.Kind.OBJECT_TYPE_EXTENSION||e.kind===n.Kind.INTERFACE_TYPE_EXTENSION){let t=r.get(e.name.value)||[];r.set(e.name.value,t.concat(e.directives||[]))}if(e.kind===n.Kind.FIELD_DEFINITION){if(!i)return;let r=t.get(i.name.value)||new Map;r.set(e.name.value,e.directives||[]),t.set(i.name.value,r)}},l=function(e,t){let i=[...e.directives||[]];return((e.kind===n.Kind.OBJECT_TYPE_DEFINITION||e.kind===n.Kind.INTERFACE_TYPE_DEFINITION||e.kind===n.Kind.OBJECT_TYPE_EXTENSION||e.kind===n.Kind.INTERFACE_TYPE_EXTENSION)&&i.push(...r.get(e.name.value)||[]),e.kind!==n.Kind.FIELD_DEFINITION||t)?[i]:[[]]};return{enter(t,r,u,c,p){if(!("directives"in t)||!t.directives)return;let[d,f,h]=(0,a.getPathToNode)(c,p),y=(0,n.isTypeDefinitionNode)(t)||(0,n.isTypeExtensionNode)(t)?[...d,t.name.value]:d;s(t,h);let m=l(t,h),{isValid:v,errorMsg:g,errorPath:b}=(0,o.assertValid)(()=>(function(e,t){let r=t===n.Kind.OBJECT_TYPE_DEFINITION||t===n.Kind.OBJECT_TYPE_EXTENSION?i.invalidObjectCombinations:t===n.Kind.FIELD_DEFINITION?i.invalidFieldCombinations:t===n.Kind.INTERFACE_TYPE_DEFINITION||t===n.Kind.INTERFACE_TYPE_EXTENSION?i.invalidInterfaceCombinations:t===n.Kind.UNION_TYPE_DEFINITION||t===n.Kind.UNION_TYPE_EXTENSION?i.invalidUnionCombinations:{};for(let t of e)t.length<2||t.forEach(e=>{r[e.name.value]&&t.forEach(t=>{if(t.name.value!==e.name.value&&r[e.name.value]?.includes(t.name.value))throw new o.DocumentValidationError(`Invalid directive usage: Directive @${e.name.value} cannot be used in combination with @${t.name.value}`,[])})})})(m,t.kind));v||e.reportError((0,o.createGraphQLError)({nodes:[f||t],path:[...y,...b],errorMsg:g}))}}},t.SchemaOrTypeDirectives=function(e){let t=new Map([["query",!1],["mutation",!1],["subscription",!1]]),r=new Map([["query",!1],["mutation",!1],["subscription",!1]]);return{enter(i){if(!("directives"in i)||!i.directives)return;let a=i.kind===n.Kind.SCHEMA_DEFINITION||i.kind===n.Kind.SCHEMA_EXTENSION,s=(0,n.isTypeDefinitionNode)(i)||(0,n.isTypeExtensionNode)(i);if(!a&&!s)return;let{isValid:l,errorMsg:u}=(0,o.assertValid)(()=>(function({directives:e,schemaLevelConfiguration:t,typeLevelConfiguration:r,isSchemaLevel:n,isTypeLevel:i}){e.forEach(e=>{if(t.has(e.name.value)){if(n){if(r.get(e.name.value))throw new o.DocumentValidationError(`Invalid directive usage: Directive @${e.name.value} can only be used in one location: either schema or type.`,[]);t.set(e.name.value,!0)}if(i){if(t.get(e.name.value))throw new o.DocumentValidationError(`Invalid directive usage: Directive @${e.name.value} can only be used in one location: either schema or type.`,[]);r.set(e.name.value,!0)}}})})({directives:i.directives,schemaLevelConfiguration:t,typeLevelConfiguration:r,isSchemaLevel:a,isTypeLevel:s}));l||e.reportError((0,o.createGraphQLError)({nodes:[i],errorMsg:u}))}}}},89690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidFieldTypes=void 0;let n=r(57343),i=r(58388),o=r(22311),a=r(80005),s=r(83310),l=r(56883),u=r(64626);function c({traversedDef:e}){if(e.kind!==n.Kind.FIELD_DEFINITION)return;let t=(0,u.getInnerTypeName)(e.type);if(i.SCALAR_TYPES.includes(t))throw new s.DocumentValidationError("Invalid field type: Scalar types cannot be relationship targets. Please use an Object type instead.",[]);let r=`Invalid field type: List type relationship fields must be non-nullable and have non-nullable entries, please change type to [${t}!]!`;if(e.type.kind===n.Kind.LIST_TYPE||e.type.kind===n.Kind.NON_NULL_TYPE&&!(e.type.type.kind!==n.Kind.LIST_TYPE||e.type.type.type.kind===n.Kind.NON_NULL_TYPE))throw new s.DocumentValidationError(r,[])}t.ValidFieldTypes=function(e){return{Directive(t,r,n,i,u){let[p,d,f]=(0,l.getPathToNode)(i,u),h=function(e){switch(e){case"id":return o.verifyId;case"timestamp":return a.verifyTimestamp;case"relationship":case"declareRelationship":return c;default:return}}(t.name.value);if(!h)return;if(!d){console.error("No last definition traversed");return}let{isValid:y,errorMsg:m,errorPath:v}=(0,s.assertValid)(()=>h({directiveNode:t,traversedDef:d,parentDef:f}));y||e.reportError((0,s.createGraphQLError)({nodes:[d],path:[...p,...v],errorMsg:m}))}}}},71389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidObjectType=void 0;let n=r(83310);function i(e){if(!e.fields||!e.fields.length||e.fields.filter(e=>e.directives?.find(e=>"private"===e.name.value)).length===e.fields.length)throw new n.DocumentValidationError("Objects and Interfaces must have one or more fields.",[])}t.ValidObjectType=function(e){return{ObjectTypeDefinition(t){let{isValid:r,errorMsg:o}=(0,n.assertValid)(()=>i(t));r||e.reportError((0,n.createGraphQLError)({nodes:[t],errorMsg:o}))},InterfaceTypeDefinition(t){let{isValid:r,errorMsg:o}=(0,n.assertValid)(()=>i(t));r||e.reportError((0,n.createGraphQLError)({nodes:[t],errorMsg:o}))}}}},69054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WarnIfAuthorizationFeatureDisabled=void 0,t.WarnIfAuthorizationFeatureDisabled=function(e){return function(){let t=!1;return{Directive(r){!t&&!e&&["authentication","authorization","subscriptionsAuthorization"].includes(r.name.value)&&(console.warn("'@authentication', '@authorization' and/or @subscriptionsAuthorization detected - please ensure that you either specify authorization settings in 'features.authorization'. This warning can be ignored if you intend to pass a decoded JWT into 'context.jwt' on every request."),t=!0)}}}}},18206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WarnIfAMaxLimitCanBeBypassedThroughInterface=void 0;let n=r(66007),i=r(35835),o=r(56883),a=r(64626);t.WarnIfAMaxLimitCanBeBypassedThroughInterface=function(){return function(){let e=new Map,t=new Map,r={leave(r){let n=e.get(r.name.value);if(!n)return;let o=((0,i.getInheritedTypeNames)(r,t)||[]).find(t=>{let r=e.get(t);if(r&&r.lessThan(n))return t});o&&console.warn(`Max limit set on ${o} may be bypassed by its interface ${r.name.value}. To fix this update the \`@limit\` max value on the interface type. Ignore this message if the behavior is intended!`)}},s={enter(e){(0,i.hydrateInterfaceWithImplementedTypesMap)(e,t)},leave(r){let n=e.get(r.name.value);if(!n)return;let o=((0,i.getInheritedTypeNames)(r,t)||[]).find(t=>{let r=e.get(t);if(!r||r.greaterThan(n))return t});o&&console.warn(`Max limit set on ${r.name.value} may be bypassed by its interface ${o}. To fix this update the \`@limit\` max value on the interface type. Ignore this message if the behavior is intended!`)}};return{Directive(t,r,i,s,l){if("limit"!==t.name.value)return;let[,u]=(0,o.getPathToNode)(s,l);if(!u)return;let c=t.arguments?.find(e=>"max"===e.name.value),p=(0,a.parseArgumentToInt)(c)||n.Integer.MAX_SAFE_VALUE;e.set(u.name.value,p)},ObjectTypeDefinition:s,ObjectTypeExtension:s,InterfaceTypeDefinition:r,InterfaceTypeExtension:r}}}},22036:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WarnIfListOfListsFieldDefinition=void 0;let n=r(57343);function i(e){return e.type.kind===n.Kind.NON_NULL_TYPE?i(e.type):e.type.kind===n.Kind.LIST_TYPE?e.type:void 0}t.WarnIfListOfListsFieldDefinition=function(){let e=!1;return{FieldDefinition(t){if(!e){let r=i(t);r&&i(r)&&(console.warn("Encountered list field definition(s) with list elements. This is not supported by Neo4j, however, you can ignore this warning if the field is only used in the result of custom resolver/Cypher."),e=!0)}}}}},57601:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WarnObjectFieldsWithoutResolver=t.VALIDATE_OBJECT_FIELD_WARN_MSG=void 0;let i=n(r(19092)),o=r(57343),a=r(58388),s=r(14178),l=r(79615),u=r(64626),c=(0,i.default)(a.DEBUG_GRAPHQL);t.VALIDATE_OBJECT_FIELD_WARN_MSG="Object types need a way to be resolved for field: ",t.WarnObjectFieldsWithoutResolver=function({customResolvers:e}){return r=>({ObjectTypeDefinition(n){let i=(0,l.getDirectiveNames)(n);if(!(0,s.haveSharedElement)(i,["jwt"])){for(let i of n.fields??[])if(function(e,t){return!!t.definitions.find(t=>{if(t.kind===o.Kind.OBJECT_TYPE_DEFINITION)return t.name.value===e})}((0,u.getInnerTypeName)(i.type),r.getDocument())){let r=function(e){let t=(0,l.getDirectiveNames)(e);return(0,s.haveSharedElement)(t,["cypher","relationship","declareRelationship","customResolver","populatedBy"])}(i),o=function({customResolvers:e,fieldNode:t,objectType:r}){let n=t.name.value,i=r.name.value;for(let t of e)if(t[i]?.[n])return!0;return!1}({customResolvers:e,fieldNode:i,objectType:n});if(!r&&!o){let e=i.name.value;c(`${t.VALIDATE_OBJECT_FIELD_WARN_MSG} ${e}`)}}}}})}},42402:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WarnIfSubscriptionsAuthorizationMissing=void 0;let n=r(79615);t.WarnIfSubscriptionsAuthorizationMissing=function(e){return function(){let t=!1;return{ObjectTypeDefinition(r){if(t||!e)return;let i=(0,n.getDirectiveNames)(r);i.includes("authorization")&&!i.includes("subscriptionsAuthorization")&&(console.warn("'@subscriptionsAuthorization' not found on a type/field which has '@authorization' - subscriptions events are not subject to the authorization rules specified in '@authorization' directives."),t=!0)}}}}},91208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authenticationDirectiveEnricher=void 0;let n=r(2759);t.authenticationDirectiveEnricher=function(e){return(0,n.directiveEnricher)(e,"authentication",e=>e)}},71657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authorizationDirectiveEnricher=t.authorizationDefinitionsEnricher=void 0;let n=r(57343),i=r(61740),o=r(26426),a=r(2759);function s(e,t){return{...e,name:{kind:n.Kind.NAME,value:`${t}Authorization`}}}t.authorizationDefinitionsEnricher=function(e){return(0,o.definitionsEnricher)(e,"authorization",i.createAuthorizationDefinitions)},t.authorizationDirectiveEnricher=function(e){return(0,a.directiveEnricher)(e,"authorization",s)}},26426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.definitionsEnricher=void 0;let n=r(57343),i=r(13659);t.definitionsEnricher=function(e,t,r){return(o,a)=>{switch(a.kind){case n.Kind.INTERFACE_TYPE_DEFINITION:case n.Kind.OBJECT_TYPE_DEFINITION:{let n=a.name.value;if(function(e,t,r){let n=t.userDefinitionNodeMap[e],o=t.userDefinitionNodeMap[`${n?.name.value}_EXTENSIONS`];return!!(n&&(0,i.containsDirective)(n,r)||o&&o.find(e=>(0,i.containsDirective)(e,r)))}(n,e,t)){let t=r(n,e.augmentedSchema);o.push(...t)}}}return o.push(a),o}}},2759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.directiveEnricher=void 0;let n=r(57343),i=r(13659);function o(e,t,r,n){let o=(0,i.getDirectiveDefinition)(t,r),a=e.fields?.map(e=>(function(e,t,r,n){let o=t.fields?.find(t=>e.name.value===t.name.value),a=o&&(0,i.getDirectiveDefinition)(o,r);if(!a)return e;let s=n(a,t.name.value);return{...e,directives:(e.directives??[]).concat(s)}})(e,t,r,n)),s=o&&n(o,e.name.value);return{...e,directives:s?(e.directives??[]).concat(s):e.directives,fields:a}}t.directiveEnricher=function(e,t,r){return(a,s)=>{switch(s.kind){case n.Kind.INTERFACE_TYPE_DEFINITION:case n.Kind.OBJECT_TYPE_DEFINITION:{let n=s.name.value,l=e.userDefinitionNodeMap[n],u=e.userDefinitionNodeMap[`${n}_EXTENSIONS`];if(l){let e=(0,i.containsDirective)(l,t)?o(s,l,t,r):s;return u&&(e=u.reduce((e,n)=>(0,i.containsDirective)(n,t)?o(e,n,t,r):e,e)),a.push(e),a}}}return a.push(s),a}}},13659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectiveDefinition=t.containsDirective=void 0;let n=r(57343);function i(e,t){return e.directives?.find(e=>e.name.value===t)}t.containsDirective=function(e,t){switch(e.kind){case n.Kind.INTERFACE_TYPE_EXTENSION:case n.Kind.OBJECT_TYPE_EXTENSION:case n.Kind.INTERFACE_TYPE_DEFINITION:case n.Kind.OBJECT_TYPE_DEFINITION:return!!(i(e,t)||e.fields&&e.fields.some(e=>i(e,t)));default:return!1}},t.getDirectiveDefinition=i},14699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptionsAuthorizationDirectiveEnricher=t.subscriptionsAuthorizationDefinitionsEnricher=void 0;let n=r(57343),i=r(76752),o=r(26426),a=r(2759);function s(e,t){return{...e,name:{kind:n.Kind.NAME,value:`${t}SubscriptionsAuthorization`}}}t.subscriptionsAuthorizationDefinitionsEnricher=function(e){return(0,o.definitionsEnricher)(e,"subscriptionsAuthorization",i.createSubscriptionsAuthorizationDefinitions)},t.subscriptionsAuthorizationDirectiveEnricher=function(e){return(0,a.directiveEnricher)(e,"subscriptionsAuthorization",s)}},83914:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validateDocument=void 0;var i=r(87317);Object.defineProperty(t,"validateDocument",{enumerable:!0,get:function(){return n(i).default}})},51383:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUserDefinition=void 0;let n=r(57343),i=r(26156),o=r(71657),a=r(55727),s=r(7449),l=r(73587),u=r(39306),c=r(66942),p=r(14699),d=r(46111),f=r(91208);t.validateUserDefinition=function({userDocument:e,augmentedDocument:t,additionalDirectives:r=[],additionalTypes:h=[],rules:y,jwt:m}){y=y||[...s.specifiedSDLRules,(0,l.DirectiveArgumentOfCorrectType)()];let v=function(e,t,r){let n=new a.EnricherContext(e,t),s=[];s.push((0,o.authorizationDefinitionsEnricher)(n)),s.push((0,o.authorizationDirectiveEnricher)(n)),s.push((0,p.subscriptionsAuthorizationDefinitionsEnricher)(n)),s.push((0,p.subscriptionsAuthorizationDirectiveEnricher)(n)),s.push((0,f.authenticationDirectiveEnricher)(n));let l=[...(0,i.getStaticAuthorizationDefinitions)(r),(0,d.createAuthenticationDirectiveDefinition)()];return{...t,definitions:s.reduce((e,t)=>e.reduce(t,[]),t.definitions).concat(...l)}}(e,t,m),g=new n.GraphQLSchema({directives:[...n.specifiedDirectives,...r],types:[...h]}),b=(0,c.makeReplaceWildcardVisitor)({jwt:m,schema:g});v=(0,n.visit)(v,b());let _=(0,u.validateSDL)(v,y,g);if(_.length)throw _}},4195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invalidObjectCombinations=t.invalidUnionCombinations=t.invalidInterfaceCombinations=t.invalidFieldCombinations=void 0;let n=r(33530);t.invalidFieldCombinations={alias:["jwtClaim","cypher","customResolver","relationship"],authentication:["jwtClaim","customResolver","relationship"],authorization:["jwtClaim","customResolver","relationship"],coalesce:["jwtClaim","relationship"],customResolver:["jwtClaim","alias","authentication","authorization","subscriptionsAuthorization","id","relationship","unique","filterable","settable","selectable"],cypher:["jwtClaim","alias","id","relationship","unique"],default:["jwtClaim","populatedBy","relationship"],id:["jwtClaim","cypher","populatedBy","customResolver","relationship","timestamp"],populatedBy:["jwtClaim","id","default","relationship"],relationship:["jwtClaim","alias","authentication","authorization","subscriptionsAuthorization","coalesce","cypher","default","id","customResolver","populatedBy","unique"],timestamp:["jwtClaim","id","unique"],unique:["jwtClaim","cypher","customResolver","relationship","timestamp"],jwtClaim:n.FIELD_DIRECTIVES,relayId:["jwtClaim"],subscriptionsAuthorization:["jwtClaim","customResolver","relationship"],selectable:["jwtClaim","customResolver"],settable:["jwtClaim","customResolver"],filterable:["jwtClaim","customResolver"],declareRelationship:["jwtClaim"]},t.invalidInterfaceCombinations={query:[],plural:[],limit:[]},t.invalidUnionCombinations={query:[],plural:[]},t.invalidObjectCombinations={relationshipProperties:[],authentication:[],authorization:[],deprecated:[],fulltext:[],mutation:[],node:[],plural:[],query:[],shareable:[],subscription:[],subscriptionsAuthorization:[],limit:[]}},9738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapError=void 0;let n=r(90781),i=r(12790),o=r(83310);t.mapError=function(e){let{nodes:t,message:r}=e;if(function(e){let{extensions:t}=e;return!!(t&&t.exception&&Object.keys(t.exception).length&&t.exception.code&&Object.values(n.VALIDATION_ERROR_CODES).includes(t.exception.code))}(e))return function(e){let t;let{nodes:r,message:n,path:i}=e,[u,c]=r;return(u||c)&&((t=function(e){let t=l.exec(e);if(!t||!t[1])return;let r=t[1];return e.replace(r,".")}(n))||(t=function(e){let t=(function(e,...t){return new RegExp(t.map(e=>e.source).join("|"))})(0,a,s).exec(e);if(!t)return;let r=t[1]||t[4];if(r)return e.replace(r,"")}(n)))?(0,o.createGraphQLError)({path:i,errorMsg:t}):e}(e);let u=function(e){let t=a.exec(e);if(!t)return;let[,,r,n]=t;if(r&&n)return e.replace(r,`@${(0,i.lowerFirst)(n)}`)}(r);return u?(0,o.createGraphQLError)({nodes:t,errorMsg:u}):e};let a=/(\s?"([^\s]*?([sS]ubscriptionsAuthorization|Authorization|Authentication)[^\s]*?)")/,s=/type(\s\\?".+?\\?")/,l=/(?:(?:String)|(?:Int)|(?:Float)|(?:Boolean))(?: cannot represent a?\s?)(?:(?:non string)|(?:non-integer)|(?:non numeric)|(?:non boolean))(?: value)(:.+)/},90781:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VALIDATION_ERROR_CODES=void 0,t.VALIDATION_ERROR_CODES={AUTHORIZATION:"@neo4j/graphql:AUTHORIZATION_VALIDATION",SUBSCRIPTIONSAUTHORIZATION:"@neo4j/graphql:SUBSCRIPTIONS_AUTHORIZATION_VALIDATION",AUTHENTICATION:"@neo4j/graphql:AUTHENTICATION_VALIDATION"}},31153:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateCustomResolverRequires=void 0;let n=r(44487),i=r(57343);t.validateCustomResolverRequires=function(e,t){if(e.fields)for(let r of e.fields){if(!r.directives)continue;let o=r.directives.find(e=>"customResolver"===e.name.value);if(!o||!o.arguments)continue;let a=o.arguments.find(e=>"requires"===e.name.value);if(a){if(a.value.kind!==i.Kind.STRING)throw Error("@customResolver requires expects a string");(function(e,t,r){let o=(0,n.mergeSchemas)({schemas:[e],typeDefs:`
                schema {
                    query: ${t.name.value}
                }
            `,assumeValid:!0}),a=(0,i.validate)(o,r);if(a.length)throw Error(`Invalid selection set provided to @customResolver on ${t.name.value}:
${a.join("\n")}`)})(t,e,(0,i.parse)(`{ ${a.value.value} }`))}}}},87317:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let s=r(14364),l=r(57343),u=r(7449),c=a(r(87180)),p=o(r(49450)),d=r(90976),f=r(56372),h=r(65562),y=r(9742),m=r(77286),v=r(94045),g=r(32965),b=r(63174),_=o(r(65639)),T=r(99227),E=r(73587),O=r(35559),S=r(71867),w=r(58418),I=r(49336),N=r(24856),A=r(87455),C=r(69611),P=r(44826),R=r(21821),D=r(89690),F=r(71389),j=r(69054),L=r(18206),x=r(22036),M=r(57601),k=r(42402),$=r(19084),U=r(39306);t.default=function({document:e,features:t,additionalDefinitions:r,userCustomResolvers:n}){let i=function(e){let t=e.definitions.filter(e=>!(e.kind!==l.Kind.OBJECT_TYPE_DEFINITION||(0,T.isRootType)(e))).map(e=>e.name.value),r=e=>e.kind===l.Kind.LIST_TYPE||e.kind===l.Kind.NON_NULL_TYPE?r(e.type):e.name.value,n=e=>e?.filter(e=>{let n=r(e.type),i=/(?<nodeName>.+)(?:ConnectInput|ConnectWhere|CreateInput|DeleteInput|DisconnectInput|Options|RelationInput|Sort|UpdateInput|Where)/gm.exec(n);return!(i?.groups?.nodeName&&t.includes(i.groups.nodeName))}),i=e=>e?.filter(e=>{let n=r(e.type),i=/(?:Create|Update)(?<nodeName>.+)MutationResponse/gm.exec(n);return!(i?.groups?.nodeName&&t.map(e=>c.default(e)).includes(i.groups.nodeName))}).map(e=>({...e,arguments:n(e.arguments)}));return{...e,definitions:e.definitions.reduce((e,t)=>{if(t.kind===l.Kind.INPUT_OBJECT_TYPE_DEFINITION){let r=n(t.fields);return r?.length?[...e,{...t,fields:r}]:e}if(t.kind===l.Kind.OBJECT_TYPE_DEFINITION||t.kind===l.Kind.INTERFACE_TYPE_DEFINITION){if(!t.fields?.length)return[...e,t];let r=i(t.fields);return r?.length?[...e,{...t,fields:r}]:e}return[...e,t]},[])}}(e),{additionalDirectives:o,additionalTypes:a,...V}=r,G=new l.GraphQLSchema({directives:[...Object.values(p),...d.typeDependantDirectivesScaffolds,...l.specifiedDirectives,...o||[]],types:[...Object.values(_),b.Point,g.CartesianPoint,v.PointInput,m.PointDistance,y.CartesianPointInput,h.CartesianPointDistance,f.SortDirection,...a||[]]});!function({schema:e,document:t,extra:r,userCustomResolvers:n,features:i}){let o=(0,U.validateSDL)(t,[...u.specifiedSDLRules,(0,O.directiveIsValid)(r,i?.populatedBy?.callbacks),S.ValidDirectiveAtFieldLocation,R.DirectiveCombinationValid,R.SchemaOrTypeDirectives,w.ValidJwtDirectives,A.ValidRelayID,N.ValidRelationshipProperties,I.ValidRelationshipDeclaration,D.ValidFieldTypes,P.ReservedTypeNames,F.ValidObjectType,C.ValidDirectiveInheritance,(0,E.DirectiveArgumentOfCorrectType)(!1),(0,j.WarnIfAuthorizationFeatureDisabled)(i?.authorization),x.WarnIfListOfListsFieldDefinition,(0,L.WarnIfAMaxLimitCanBeBypassedThroughInterface)(),(0,M.WarnObjectFieldsWithoutResolver)({customResolvers:(0,s.asArray)(n??[])}),(0,k.WarnIfSubscriptionsAuthorizationMissing)(!!i?.subscriptions)],e).filter(e=>"Query root type must be provided."!==e.message);if(o.length)throw o}({schema:G,document:i,extra:V,userCustomResolvers:n,features:t});let q=(0,l.extendSchema)(G,i),B=(0,l.validateSchema)(q).filter(e=>"Query root type must be provided."!==e.message);if(B.length)throw B;(0,$.validateSchemaCustomizations)({document:e,schema:q})}},19084:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaCustomizations=void 0;let n=r(59751),i=r(31153);t.validateSchemaCustomizations=function({document:e,schema:t}){for(let r of(0,n.getDefinitionNodes)(e).objectTypes)(0,i.validateCustomResolverRequires)(r,t)}},39306:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSDL=void 0;let n=r(57343),i=r(54679),o=r(9738);t.validateSDL=function(e,t,r){let a=[],s=new i.SDLValidationContext(e,r,e=>{let t=(0,o.mapError)(e);a.push(t)}),l=t.map(e=>e(s));return(0,n.visit)(e,(0,n.visitInParallel)(l)),a}},87935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAuthenticated=t.checkEntityAuthentication=t.checkAuthentication=void 0;let n=r(42322);function i({context:e,entity:t,targetOperations:r,field:i}){let o=e.schemaModel.annotations.authentication;o&&(0,n.applyAuthentication)({context:e,annotation:o,targetOperations:r});let a=i?t.findAttribute(i)?.annotations.authentication:t.annotations.authentication;a&&(0,n.applyAuthentication)({context:e,annotation:a,targetOperations:r})}t.checkAuthentication=function({context:e,node:t,targetOperations:r,field:n}){let o=e.schemaModel.getEntitiesByNameAndLabels(t.name,t.getAllLabels());if(1!==o.length)throw Error("Couldn't match entity");return i({context:e,entity:o[0],targetOperations:r,field:n})},t.checkEntityAuthentication=i,t.isAuthenticated=(e,t)=>r=>(i,o,a,s)=>{let l=a.schemaModel.annotations.authentication;if(l&&(0,n.applyAuthentication)({context:a,annotation:l,targetOperations:e}),t){let{fieldName:r}=s,i=t.annotations.authentication||r&&t.findUserResolvedAttributes(r)?.annotations.authentication;i&&(0,n.applyAuthentication)({context:a,annotation:i,targetOperations:e})}return r(i,o,a,s)}},54417:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.compilePredicateReturn=void 0;let i=n(r(52462)),o=r(21477);t.compilePredicateReturn=function(e,t){let r;let n={cypher:"",params:{}},{predicate:a,preComputedSubqueries:s}=e;if(a){let{cypher:e,params:l}=new i.default.Raw(e=>{let t=(0,o.compileCypher)(a,e);return s&&!s.empty&&(r=(0,o.compileCypher)(s,e)),t}).build(`authorization_${t||""}`);n.cypher=e,n.params=l,n.subqueries=r}return n}},49879:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createAuthorizationAfterAndParamsField=t.createAuthorizationAfterAndParams=void 0;let i=n(r(52462)),o=r(52731),a=r(54417);function s(e){return e.map(e=>({...e,variable:new i.default.NamedNode(e.variable)}))}t.createAuthorizationAfterAndParams=function({context:e,nodes:t,operations:r,indexPrefix:n}){let i=s(t),l=(0,o.createAuthorizationAfterPredicate)({context:e,nodes:i,operations:r});if(l)return(0,a.compilePredicateReturn)(l,`${n||"_"}after_`)},t.createAuthorizationAfterAndParamsField=function({context:e,nodes:t,operations:r,indexPrefix:n}){let i=s(t),l=(0,o.createAuthorizationAfterPredicateField)({context:e,nodes:i,operations:r});if(l)return(0,a.compilePredicateReturn)(l,`${n||"_"}after_`)}},88086:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createAuthorizationBeforeAndParamsField=t.createAuthorizationBeforeAndParams=void 0;let i=n(r(52462)),o=r(44079),a=r(54417);function s(e){return e.map(e=>({...e,variable:new i.default.NamedNode(e.variable)}))}t.createAuthorizationBeforeAndParams=function({context:e,nodes:t,operations:r,indexPrefix:n}){let i=s(t),l=(0,o.createAuthorizationBeforePredicate)({context:e,nodes:i,operations:r});if(l)return(0,a.compilePredicateReturn)(l,`${n||"_"}before_`)},t.createAuthorizationBeforeAndParamsField=function({context:e,nodes:t,operations:r}){let n=s(t),i=(0,o.createAuthorizationBeforePredicateField)({context:e,nodes:n,operations:r});if(i)return(0,a.compilePredicateReturn)(i,"_before_")}},52731:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createAuthorizationAfterPredicateField=t.createAuthorizationAfterPredicate=void 0;let i=r(14364),o=n(r(52462)),a=r(8593),s=r(14178),l=r(16397),u=r(1743),c=r(93457),p=r(66256);t.createAuthorizationAfterPredicate=function({context:e,nodes:t,operations:r}){let n;let d=[];for(let f of t){let t=f.node,h=f.variable,y=(0,a.getEntityAdapterFromNode)(t,e);if(!(0,c.isConcreteEntity)(y))throw Error("Expected authorization rule to be applied on a concrete entity");let m=new u.QueryASTFactory(e.schemaModel),v=new l.QueryASTEnv,g=new l.QueryASTContext({target:h,env:v,neo4jGraphQLContext:e}),b=m.authorizationFactory.createAuthValidateRule({authAnnotation:y.annotations.authorization,entity:y,operations:r,context:e,when:"AFTER"}),_=b?.getSubqueries(g),T=(0,s.filterTruthy)((0,i.asArray)(_)).map(e=>(0,p.wrapSubqueryInCall)(e,h)),E=b?.getPredicate(g);E&&d.push(E);let O=b?.getSelection(g),S=[...(0,i.asArray)(O),...(0,i.asArray)(T)];S&&(n=o.default.concat(n,...S))}if(d.length)return{predicate:o.default.and(...d),preComputedSubqueries:n}},t.createAuthorizationAfterPredicateField=function({context:e,nodes:t,operations:r,conditionForEvaluation:n}){let s;let p=[];for(let d of t){let t=d.node,f=d.variable,h=d.fieldName,y=(0,a.getEntityAdapterFromNode)(t,e);if(!(0,c.isConcreteEntity)(y))throw Error("Expected authorization rule to be applied on a concrete entity");let m=new u.QueryASTFactory(e.schemaModel),v=new l.QueryASTEnv,g=new l.QueryASTContext({target:f,env:v,neo4jGraphQLContext:e});if(h){let t=y.attributes.get(h);if(!t)throw Error("Couldn't match attribute");let a=m.authorizationFactory.createAuthValidateRule({authAnnotation:t.annotations.authorization,entity:y,operations:r,context:e,when:"AFTER",conditionForEvaluation:n});if(a){let e=a.getPredicate(g),t=a.getSelection(g),r=a.getSubqueries(g),n=[...(0,i.asArray)(t),...(0,i.asArray)(r)];n&&(s=o.default.concat(s,...n)),e&&p.push(e)}}}if(p.length)return{predicate:o.default.and(...p),preComputedSubqueries:s}}},44079:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createAuthorizationBeforePredicateField=t.createAuthorizationBeforePredicate=void 0;let i=n(r(52462)),o=r(8593),a=r(14178),s=r(16397),l=r(1743),u=r(93457),c=r(66256);t.createAuthorizationBeforePredicate=function({context:e,nodes:t,operations:r}){let n;let p=[];for(let d of t){let t=d.node,f=d.variable,h=(0,o.getEntityAdapterFromNode)(t,e);if(!(0,u.isConcreteEntity)(h))throw Error("Expected authorization rule to be applied on a concrete entity");let y=new l.QueryASTFactory(e.schemaModel),m=new s.QueryASTEnv,v=new s.QueryASTContext({target:f,env:m,neo4jGraphQLContext:e});y.authorizationFactory.getAuthFilters({entity:h,operations:r,context:e}).forEach(e=>{let t=e?.getSubqueries(v),r=(0,a.filterTruthy)(t).map(e=>(0,c.wrapSubqueryInCall)(e,f)),o=e?.getPredicate(v);o&&p.push(o);let s=[...e?.getSelection(v),...r];s&&(n=i.default.concat(n,...s))})}if(p.length)return{predicate:i.default.and(...p),preComputedSubqueries:n}},t.createAuthorizationBeforePredicateField=function({context:e,nodes:t,operations:r}){let n;let c=[];for(let p of t){let t=p.node,d=p.variable,f=p.fieldName,h=(0,o.getEntityAdapterFromNode)(t,e);if(!(0,u.isConcreteEntity)(h))throw Error("Expected authorization rule to be applied on a concrete entity");let y=new l.QueryASTFactory(e.schemaModel),m=new s.QueryASTEnv,v=new s.QueryASTContext({target:d,env:m,neo4jGraphQLContext:e});if(f){let t=h.attributes.get(f);if(!t)throw Error("Couldn't match attribute");let o=y.authorizationFactory.createAuthFilterRule({authAnnotation:t.annotations.authorization,entity:h,operations:r,context:e}),s=y.authorizationFactory.createAuthValidateRule({authAnnotation:t.annotations.authorization,entity:h,operations:r,context:e,when:"BEFORE"});(0,a.filterTruthy)([o,s]).forEach(e=>{let t=e.getPredicate(v),r=[...e.getSelection(v),...e.getSubqueries(v)];r&&(n=i.default.concat(n,...r)),t&&c.push(t)})}}if(c.length)return{predicate:i.default.and(...c),preComputedSubqueries:n}}},42322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyAuthentication=void 0;let n=r(44706),i=r(58388),o=r(60490);t.applyAuthentication=function({context:e,annotation:t,targetOperations:r}){if(r.some(e=>t.operations.has(e))){if(!e.authorization.isAuthenticated)throw new n.Neo4jGraphQLError(i.AUTHORIZATION_UNAUTHENTICATED);if(t.jwt){let{jwt:r,claims:a}=e.authorization;if(!r||!(0,o.filterByValues)(t.jwt,r,a))throw new n.Neo4jGraphQLError(i.AUTHORIZATION_UNAUTHENTICATED)}}}},60490:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.filterByValues=void 0;let i=n(r(56884)),o=r(48126),a=r(78019),s=r(67890);t.filterByValues=function e(t,r,n){for(let[l,u]of Object.entries(t))if(Object.keys(a.multipleConditionsAggregationMap).includes(l)){if(!(0,a.multipleConditionsAggregationMap[l])("NOT"===l?e(u,r,n):u.map(t=>e(t,r,n))))return!1}else{let{fieldName:e,operator:t}=(0,s.parseFilterProperty)(l),a=function({fieldName:e,receivedValues:t,jwtClaims:r}){let n=r?.get(e);return n?i.default.get(t,n):t[e]}({fieldName:e,receivedValues:r,jwtClaims:n});if(!a||!(0,o.getFilteringFn)(t)(a,u))return!1}return!0}},80382:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.populateWhereParams=void 0;let i=n(r(52462)),o=n(r(56884));t.populateWhereParams=function e({where:t,context:r}){let n={};return Object.entries(t).forEach(([t,a])=>{"AND"===t||"OR"===t?n[t]=a.map(t=>e({where:t,context:r})):null===a?n[t]=a:"object"!=typeof a||Array.isArray(a)?"string"==typeof a?n[t]=function(e,t){if(e.startsWith("$jwt")){let r=e.substring(5),n=t.authorization.claims?.get(r)||r;return t.authorization.jwtParam.property(...n.split("."))}if(e.startsWith("$context")){let r=e.substring(9);return new i.default.Param(o.default.get(t,r))}return e}(a,r):n[t]=a:n[t]=e({where:a,context:r})}),n}},71277:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(52462)),o=r(99030),a=r(67661),s=r(80395),l=r(21477),u=r(8593),c=r(14178),p=r(87935),d=r(49879),f=r(88086),h=r(32354),y=n(r(67749)),m=r(71614),v=r(17220),g=r(93538);function b(e,t){return`${e}${t}_node`}function _({connect:e,entity:t,targetEntity:r,context:n,nodeName:o}){if(!e.where)return;let a=new i.default.NamedNode(o),s=e.where.node??{},{predicate:u,preComputedSubqueries:c}=(0,g.createWhereNodePredicate)({entity:t,context:n,whereInput:s,targetElement:a,targetEntity:r}),p="",d=new i.default.Raw(e=>(p=(0,l.compileCypherIfExists)(c,e),[u?.getCypher(e)||"",{}])).build(`${o}_`);if(d.cypher)return{predicate:[d.cypher,d.params],preComputedSubqueries:p}}t.default=function e({withVars:t,value:r,varName:n,relationField:l,parentVar:g,refNodes:T,context:E,callbackBucket:O,labelOverride:S,parentNode:w,includeRelationshipValidation:I,isFirstLevel:N=!0,source:A,indexPrefix:C}){function P(r,o,a,u){(0,p.checkAuthentication)({context:E,node:r,targetOperations:["CREATE_RELATIONSHIP"]});let c={},_=b(n,a),T=`${n}${a}_relationship`,N="IN"===l.direction?"<-":"-",P="OUT"===l.direction?"->":"-",R=`[${l.properties||E.subscriptionsEnabled?T:""}:${l.type}]`,D=!1===o.overwrite,F=[],j=r.getLabelString(E),L=S?`:${S}`:j;F.push(`	WITH ${(0,v.filterMetaVariable)(t).join(", ")}`),E.subscriptionsEnabled&&F.push(`	WITH ${(0,v.filterMetaVariable)(t).join(", ")}, [] as meta`),F.push(`	OPTIONAL MATCH (${_}${L})`);let x=[];u&&(x.push(u.predicate[0]),c={...u.predicate[1]},u.preComputedSubqueries&&F.push(u.preComputedSubqueries));let M=[{node:r,variable:_}];"CREATE"!==A&&M.push({node:w,variable:g});let k=(0,f.createAuthorizationBeforeAndParams)({context:E,nodes:M,operations:["CREATE_RELATIONSHIP"],indexPrefix:C});if(k){let{cypher:e,params:t,subqueries:r}=k;x.push(e),c={...c,...t},r&&(F.push(r),x.length&&F.push("WITH *"))}if(x.length){let e=`${x.join(" AND ")}`;if(u?.preComputedSubqueries?.length){let t=[new i.default.NamedVariable(_)],{cypher:r}=(0,s.caseWhere)(new i.default.Raw(e),t).build("aggregateWhereFilter");F.push(r)}else F.push(`	WHERE ${e}`)}F.push("	CALL {"),F.push("		WITH *");let $=[...t.filter(e=>e!==g),`collect(${_}) as connectedNodes`,`collect(${g}) as parentNodes`];E.subscriptionsEnabled&&$.push("[] as meta"),F.push(`		WITH ${(0,v.filterMetaVariable)($).join(", ")}`),F.push("		CALL {"),F.push("			WITH connectedNodes, parentNodes"),F.push(`			UNWIND parentNodes as ${g}`),F.push(`			UNWIND connectedNodes as ${_}`);let U=D?"CREATE":"MERGE";if(F.push(`			${U} (${g})${N}${R}${P}(${_})`),l.properties){let e=E.relationships.find(e=>e.properties===l.properties),t=(0,y.default)({properties:o.edge??{},varName:T,relationship:e,operation:"CREATE",callbackBucket:O});F.push(`			${t[0]}`),c={...c,...t[1]}}if(E.subscriptionsEnabled){let[e,t]="IN"===l.direction?[_,g]:[g,_],[n,i]="IN"===l.direction?[r.name,w.name]:[w.name,r.name],o=(0,m.createConnectionEventMetaObject)({event:"create_relationship",relVariable:T,fromVariable:e,toVariable:t,typename:l.typeUnescaped,fromTypename:n,toTypename:i});F.push(`			WITH ${o} as meta`),F.push("			RETURN collect(meta) as update_meta")}F.push("		}"),E.subscriptionsEnabled&&(F.push("		WITH meta + update_meta as meta"),F.push("		RETURN meta AS connect_meta")),F.push("	}");let V="";if(E.subscriptionsEnabled&&(V=", connect_meta + meta AS meta"),I||D){let e=[];[[w,g],[r,_]].forEach(t=>{let r=(0,h.createRelationshipValidationString)({node:t[0],context:E,varName:t[1],...D&&{relationshipFieldNotOverwritable:l.fieldName}});r&&e.push(r)}),e.length&&(F.push(`	WITH ${[...(0,v.filterMetaVariable)(t),_].join(", ")}${V}`),F.push(e.join("\n")),E.subscriptionsEnabled&&(V=", meta"))}F.push(`WITH ${[...(0,v.filterMetaVariable)(t),_].join(", ")}${V}`),o.connect&&(Array.isArray(o.connect)?o.connect:[o.connect]).forEach(n=>{let i=Object.entries(n).reduce((n,[i,o])=>{let a=r.relationFields.find(e=>i===e.fieldName),s=[];return a.union?Object.keys(o).forEach(e=>{s.push(E.nodes.find(t=>t.name===e))}):a.interface?a.interface.implementations.forEach(e=>{s.push(E.nodes.find(t=>t.name===e))}):s.push(E.nodes.find(e=>e.name===a.typeMeta.name)),s.forEach(s=>{let l=e({withVars:[...t,_],value:a.union?o[s.name]:o,varName:`${_}_${i}${a.union?`_${s.name}`:""}`,relationField:a,parentVar:_,context:E,callbackBucket:O,refNodes:[s],parentNode:r,labelOverride:a.union?s.name:"",includeRelationshipValidation:!0,isFirstLevel:!1,source:"CONNECT"});n.connects.push(l[0]),n.params={...n.params,...l[1]}}),n},{connects:[],params:{}});F.push(i.connects.join("\n")),c={...c,...i.params}});let G=(0,d.createAuthorizationAfterAndParams)({context:E,nodes:[{node:w,variable:g},{node:r,variable:_}],operations:["CREATE_RELATIONSHIP"],indexPrefix:C});if(G){let{cypher:e,params:r,subqueries:n}=G;e&&(n?(F.push("WITH *"),F.push(`${n}`),F.push("WITH *")):F.push(`WITH ${[...t,_].join(", ")}`),F.push(`WHERE ${e}`),c={...c,...r})}return E.subscriptionsEnabled?(F.push("WITH collect(meta) AS connect_meta"),F.push("RETURN REDUCE(m=[],m1 IN connect_meta | m+m1 ) as connect_meta")):F.push(`	RETURN count(*) AS connect_${n}_${r.name}${a}`),{subquery:F.join("\n"),params:c}}(0,p.checkAuthentication)({context:E,node:w,targetOperations:["CREATE_RELATIONSHIP"]});let{connects:R,params:D}=(0,c.asArray)(r).reduce(function(e,r,i){N&&e.connects.push("WITH *");let s=[];if(l.interface){let i=[],u=E.schemaModel.compositeEntities.find(e=>e.name===l.typeMeta.name);if(!u||!(u instanceof o.InterfaceEntity))throw Error(`Target with name ${l.typeMeta.name} not found`);let c=new a.InterfaceEntityAdapter(u);if(T.forEach((t,o)=>{let a=b(n,o),s=c.concreteEntities.find(e=>e.name===t.name),l=_({connect:r,context:E,entity:c,nodeName:a,targetEntity:s}),u=P(t,r,o,l);u.subquery&&(i.push(u.subquery),e.params={...e.params,...u.params})}),i.length>0){if(E.subscriptionsEnabled){let e=`WITH ${(0,v.filterMetaVariable)(t).join(", ")}, connect_meta + meta AS meta`;s.push(i.join(`
}
${e}
CALL {
	`))}else s.push(i.join("\n}\nCALL {\n	"))}}else{let t=T[0];if(!t)throw Error("No refNodes found");let o=(0,u.getEntityAdapterFromNode)(t,E),a=_({connect:r,context:E,entity:o,nodeName:b(n,i)}),l=P(t,r,i,a);s.push(l.subquery),e.params={...e.params,...l.params}}return s.length>0&&(e.connects.push("CALL {"),e.connects.push(...s),e.connects.push("}"),E.subscriptionsEnabled&&e.connects.push(`WITH connect_meta + meta AS meta, ${(0,v.filterMetaVariable)(t).join(", ")}`)),e},{connects:[],params:{}});return[R.join("\n"),D]}},4850:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createConnectOrCreateAndParams=void 0;let i=n(r(52462)),o=r(44706),a=r(21477),s=r(23248),l=r(75006),u=r(14178),c=r(87935),p=r(52731),d=r(44079),f=r(71614),h=r(17220),y=r(35430);function m(e){let t=e.primitiveFields.filter(e=>e.autogenerate).reduce((e,t)=>(t.dbPropertyName&&(e[t.dbPropertyName]=new i.default.Raw("randomUUID()")),e),{});return{...e.temporalFields.filter(e=>["DateTime","Time"].includes(e.typeMeta.name)&&e.timestamps?.includes("CREATE")).reduce((e,t)=>(t.dbPropertyName&&(e[t.dbPropertyName]=new i.default.Raw(`${t.typeMeta.name.toLowerCase()}()`)),e),{}),...t}}function v(e={},t){let r=Object.entries(e).reduce((e,[r,n])=>{let i=t?.constrainableFields.find(e=>e.fieldName===r),o=i?.dbPropertyNameUnescaped||i?.fieldName,a=i?.typeMeta.array?(0,u.asArray)(n):n;return e[o||r]=a,e},{});return i.default.utils.toCypherParams(r)}t.createConnectOrCreateAndParams=function({input:e,varName:t,parentVar:r,relationField:n,refNode:g,node:b,context:_,withVars:T,callbackBucket:E}){(0,u.asArray)(e).forEach(e=>{let t=(0,s.findConflictingProperties)({node:g,input:e.onCreate?.node});if(t.length>0)throw new o.Neo4jGraphQLError(`Conflicting modification of ${t.map(e=>`[[${e}]]`).join(", ")} on type ${g.name}`)}),(0,c.checkAuthentication)({context:_,node:b,targetOperations:["CREATE","CREATE_RELATIONSHIP"]}),(0,c.checkAuthentication)({context:_,node:g,targetOperations:["CREATE","CREATE_RELATIONSHIP"]});let O=T.map(e=>new i.default.NamedVariable(e)),S=(0,u.asArray)(e).map((e,o)=>(function({input:e,baseName:t,parentVar:r,relationField:n,refNode:o,node:s,context:c,callbackBucket:g,withVars:b}){let _;let T=function({context:e,sourceNode:t,sourceName:r}){let n;let o=[],a=(0,d.createAuthorizationBeforePredicate)({context:e,nodes:[{node:t,variable:new i.default.NamedNode(r)}],operations:["CREATE_RELATIONSHIP"]});if(a){let{predicate:e,preComputedSubqueries:t}=a;e&&o.push(e),t&&(n=i.default.concat(n,t))}return{predicate:i.default.and(...o),preComputedSubqueries:n}}({context:c,sourceNode:s,sourceName:r,targetNode:o,targetName:t});T.predicate&&(T.preComputedSubqueries&&(_=i.default.concat(_,new i.default.With("*"),T.preComputedSubqueries)),_=i.default.concat(_,new i.default.With("*").where(T.predicate)));let E=function({input:e,refNode:t,parentRefNode:r,context:n,relationField:o,parentNode:s,varName:c,callbackBucket:p,withVars:d}){let g;let b=v(e.where?.node,t),_=v(e.onCreate?.node,t),T=m(t),E=new i.default.NamedNode(c),O=new i.default.Pattern(E,{properties:b,labels:t.getLabels(n)}),S=(0,u.omitFields)(T,Object.keys(b)),w=[...t.primitiveFields.filter(e=>e.callback),...t.temporalFields.filter(e=>e.callback)].map(e=>{let t=new i.default.NamedVariable(c);return(0,y.addCallbackAndSetParamCypher)(e,t,s,p,"CREATE",E)}).filter(e=>0!==e.length),I=Object.entries({...S,..._}).map(([e,t])=>[E.property(e),t]),N=new i.default.Merge(O).onCreate(...I,...w),A=n.relationships.find(e=>e.properties===o.properties),C=A?m(A):{},P=i.default.utils.toCypherParams(e.onCreate?.edge||{}),R={...C,...P},D=new i.default.Relationship,F=(0,l.getCypherRelationshipDirection)(o),j=new i.default.Pattern(s).related(D,{type:o.type,direction:F}).to(E),L=Object.entries(R).map(([e,t])=>[D.property(e),t]),x=new i.default.Merge(j).onCreate(...L);if(n.subscriptionsEnabled){let[e,n]="IN"===o.direction?[t.name,r.name]:[r.name,t.name],[l,u]="IN"===o.direction?[E,s]:[s,E];g=new i.default.Raw(t=>{let r=(0,f.createConnectionEventMeta)({event:"create_relationship",relVariable:(0,a.compileCypher)(D,t),fromVariable:(0,a.compileCypher)(l,t),toVariable:(0,a.compileCypher)(u,t),typename:o.typeUnescaped,fromTypename:e,toTypename:n});return`WITH ${r}, ${(0,h.filterMetaVariable)([...d,c]).join(", ")}`})}return i.default.concat(N,x,g)}({input:e,refNode:o,parentRefNode:s,context:c,relationField:n,parentNode:new i.default.NamedNode(r),varName:t,callbackBucket:g,withVars:b});_=i.default.concat(_,E);let O=function({context:e,sourceNode:t,sourceName:r,targetNode:n,targetName:o}){let a;let s=[],l=(0,p.createAuthorizationAfterPredicate)({context:e,nodes:[{node:t,variable:new i.default.NamedNode(r)}],operations:["CREATE_RELATIONSHIP"]}),u=(0,p.createAuthorizationAfterPredicate)({context:e,nodes:[{node:n,variable:new i.default.NamedNode(o)}],operations:["CREATE_RELATIONSHIP","CREATE"]});if(l){let{predicate:e,preComputedSubqueries:t}=l;e&&s.push(e),t&&(a=i.default.concat(a,t))}if(u){let{predicate:e,preComputedSubqueries:t}=u;e&&s.push(e),t&&(a=i.default.concat(a,t))}return{predicate:i.default.and(...s),preComputedSubqueries:a}}({context:c,sourceNode:s,sourceName:r,targetNode:o,targetName:t});return O.predicate&&(_=O.preComputedSubqueries&&!O.preComputedSubqueries.empty?i.default.concat(_,new i.default.With(new i.default.NamedVariable("*")),O.preComputedSubqueries,new i.default.With(new i.default.NamedVariable("*")).where(O.predicate)):i.default.concat(_,new i.default.With("*").where(O.predicate))),_})({input:e,baseName:`${t}${o}`,parentVar:r,relationField:n,refNode:g,node:b,context:_,callbackBucket:E,withVars:T})).map(e=>{let t=new i.default.Return(_.subscriptionsEnabled?[new i.default.NamedVariable("meta"),"update_meta"]:[i.default.count(new i.default.Raw("*")),"_"]),r=new i.default.With(...O),n=new i.default.Call(i.default.concat(e,t)).importWith(...O),o=i.default.concat(r,n);if(_.subscriptionsEnabled){let e=new i.default.With("*",[new i.default.NamedVariable("update_meta"),"meta"]);i.default.concat(o,e)}return o});return i.default.concat(...S).build(`${t}_`)}},46717:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(28549),o=r(23248),a=n(r(81685)),s=r(87935),l=r(49879),u=n(r(71277)),c=r(4850),p=r(32354),d=n(r(67749)),f=r(71614),h=r(77855),y=r(35430);function m(e){return`${e.join("_")}_`}t.default=function e({input:t,varName:r,node:n,context:v,callbackBucket:g,withVars:b,includeRelationshipValidation:_,topLevelNodeVariable:T,authorizationPrefix:E=[0]}){let O=(0,o.findConflictingProperties)({node:n,input:t});if(O.length>0)throw new i.Neo4jGraphQLError(`Conflicting modification of ${O.map(e=>`[[${e}]]`).join(", ")} on type ${n.name}`);(0,s.checkAuthentication)({context:v,node:n,targetOperations:["CREATE"]});let S=n.getLabelString(v),w=[`CREATE (${r}${S})`];n.temporalFields.filter(e=>["DateTime","Time"].includes(e.typeMeta.name)&&e.timestamps?.includes("CREATE")).forEach(e=>{w.push(`SET ${r}.${e.dbPropertyName} = ${e.typeMeta.name.toLowerCase()}()`)}),[...n.primitiveFields,...n.temporalFields].forEach(e=>(0,y.addCallbackAndSetParam)(e,r,t,g,w,"CREATE")),n.primitiveFields.filter(e=>e.autogenerate).forEach(e=>{w.push(`SET ${r}.${e.dbPropertyName} = randomUUID()`)});let{creates:I,params:N,meta:A}=Object.entries(t).reduce(function(t,[i,o],h){let y=`${r}_${i}`,_=n.relationFields.find(e=>i===e.fieldName),O=n.primitiveFields.find(e=>i===e.fieldName),S=n.pointFields.find(e=>i===e.fieldName),w=(0,a.default)(n,i);if(O&&(0,s.checkAuthentication)({context:v,node:n,targetOperations:["CREATE"],field:O.fieldName}),_){let i=[];if(_.union?Object.keys(o).forEach(e=>{i.push(v.nodes.find(t=>t.name===e))}):_.interface?_.interface?.implementations?.forEach(e=>{i.push(v.nodes.find(t=>t.name===e))}):i.push(v.nodes.find(e=>e.name===_.typeMeta.name)),i.forEach((i,a)=>{let s=_.union?o[i.name]:o,l=_.union||_.interface?i.name:"";if(s.create){let o=_.interface?.typeMeta.array,u=s.create.node?.[i.name]?Object.keys(s.create.node||[]):[];if(!o&&u.length>1)throw Error(`Relationship field "${_.connectionPrefix}.${_.interface?.dbPropertyName||_.interface?.fieldName}" cannot have more than one node linked`);(_.typeMeta.array?s.create:[s.create]).forEach((o,s)=>{if(_.interface&&!o.node[i.name])return;v.subscriptionsEnabled||t.creates.push(`
WITH *`);let u=`${y}${_.union?"_":""}${l}${s}`,c=`${u}_node`,m=`${u}_relationship`,{create:O,params:S,authorizationPredicates:w,authorizationSubqueries:I}=e({input:_.interface?o.node[i.name]:o.node,context:v,callbackBucket:g,node:i,varName:c,withVars:[...b,c],includeRelationshipValidation:!1,topLevelNodeVariable:T,authorizationPrefix:[...E,h,s,a]});t.creates.push(O),t.params={...t.params,...S};let N="IN"===_.direction?"<-":"-",A="OUT"===_.direction?"->":"-",C=_.properties||v.subscriptionsEnabled?m:"",P=`[${C}:${_.type}]`;if(t.creates.push(`MERGE (${r})${N}${P}${A}(${c})`),_.properties){let e=v.relationships.find(e=>e.properties===_.properties),r=(0,d.default)({properties:o.edge??{},varName:m,relationship:e,operation:"CREATE",callbackBucket:g});t.creates.push(r[0]),t.params={...t.params,...r[1]}}if(w.length&&(I.length&&t.meta.authorizationSubqueries.push(...I),t.meta.authorizationPredicates.push(...w)),v.subscriptionsEnabled){let[e,o]="IN"===_.direction?[c,r]:[r,c],[a,s]="IN"===_.direction?[i.name,n.name]:[n.name,i.name],l=(0,f.createConnectionEventMeta)({event:"create_relationship",relVariable:m,fromVariable:e,toVariable:o,typename:_.typeUnescaped,fromTypename:a,toTypename:s});t.creates.push(`WITH *, ${l}`)}let R=(0,p.createRelationshipValidationString)({node:i,context:v,varName:c});R&&(t.creates.push("WITH *"),t.creates.push(R))})}if(!_.interface&&s.connect){let e=(0,u.default)({withVars:b,value:s.connect,varName:`${y}${_.union?"_":""}${l}_connect`,parentVar:r,relationField:_,context:v,callbackBucket:g,refNodes:[i],labelOverride:l,parentNode:n,source:"CREATE",indexPrefix:m(E)});t.creates.push(e[0]),t.params={...t.params,...e[1]}}if(s.connectOrCreate){let{cypher:e,params:o}=(0,c.createConnectOrCreateAndParams)({input:s.connectOrCreate,varName:`${y}${_.union?"_":""}${l}_connectOrCreate`,parentVar:r,relationField:_,refNode:i,node:n,context:v,withVars:b,callbackBucket:g});t.creates.push(e),t.params={...t.params,...o}}}),_.interface&&o.connect){let e=(0,u.default)({withVars:b,value:o.connect,varName:`${y}${_.union?"_":""}_connect`,parentVar:r,relationField:_,context:v,callbackBucket:g,refNodes:i,labelOverride:"",parentNode:n,source:"CREATE"});t.creates.push(e[0]),t.params={...t.params,...e[1]}}return t}let I=(0,l.createAuthorizationAfterAndParamsField)({context:v,nodes:[{variable:r,node:n,fieldName:O?.fieldName}],operations:["CREATE"],indexPrefix:m(E)});if(I){let{cypher:e,params:r,subqueries:n}=I;n&&t.meta.authorizationSubqueries.push(n),t.meta.authorizationPredicates.push(e),t.params={...t.params,...r}}return S?S.typeMeta.array?t.creates.push(`SET ${r}.${w} = [p in $${y} | point(p)]`):t.creates.push(`SET ${r}.${w} = point($${y})`):t.creates.push(`SET ${r}.${w} = $${y}`),t.params[y]=o,t},{creates:w,params:{},meta:{authorizationPredicates:[],authorizationSubqueries:[]}});if(v.subscriptionsEnabled){let e=(0,h.createEventMeta)({event:"create",nodeVariable:r,typename:n.name});I.push(`WITH *, ${[e].join(", ")}`)}let{authorizationPredicates:C,authorizationSubqueries:P}=A,R=(0,l.createAuthorizationAfterAndParams)({context:v,nodes:[{variable:r,node:n}],operations:["CREATE"],indexPrefix:m(E)});if(R){let{cypher:e,params:t,subqueries:r}=R;r&&P.push(r),C.push(e),N={...N,...t}}if(_){let e=(0,p.createRelationshipValidationString)({node:n,context:v,varName:r});e&&(I.push("WITH *"),I.push(e))}return{create:I.join("\n"),params:N,authorizationPredicates:C,authorizationSubqueries:P}}},58137:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(52462)),o=r(58388),a=r(80395),s=r(87935),l=r(88086),u=r(71614),c=r(77855),p=r(17220),d=n(r(16733));t.default=function e({deleteInput:t,varName:r,node:n,parentVar:f,chainStr:h,withVars:y,context:m,parameterPrefix:v,recursing:g}){(0,s.checkAuthentication)({context:m,node:n,targetOperations:["DELETE"]});let{strs:b,params:_}=Object.entries(t).reduce(function(t,[b,_]){(0,s.checkAuthentication)({context:m,node:n,targetOperations:["DELETE"],field:b});let T=n.relationFields.find(e=>b===e.fieldName);if(T){let E=[],O=m.relationships.find(e=>e.properties===T.properties);T.union?Object.keys(_).forEach(e=>{E.push(m.nodes.find(t=>t.name===e))}):T.interface?T.interface.implementations?.forEach(e=>{E.push(m.nodes.find(t=>t.name===e))}):E.push(m.nodes.find(e=>e.name===T.typeMeta.name));let S="IN"===T.direction?"<-":"-",w="OUT"===T.direction?"->":"-";E.forEach(E=>{(0,s.checkAuthentication)({context:m,node:E,targetOperations:["DELETE"]});let I=T.union?_[E.name]:_;(T.typeMeta.array?I:[I]).forEach((s,_)=>{let I=[],N=h?`${r}${_}`:`${r}_${b}${T.union||T.interface?`_${E.name}`:""}${_}`,A=`${N}_relationship`,C=`[${A}:${T.type}]`,P=`${N}_to_delete`,R=E.getLabelString(m),D=(0,p.filterMetaVariable)(y).join(", ");I.push("WITH *"),I.push("CALL {"),y&&(m.subscriptionsEnabled?(I.push("WITH *"),I.push(`WITH *, []  AS ${o.META_CYPHER_VARIABLE}`)):I.push("WITH *")),I.push(`OPTIONAL MATCH (${f})${S}${C}${w}(${N}${R})`);let F=[],j=!1;if(s.where)try{let{cypher:e,subquery:r,params:n}=(0,d.default)({nodeVariable:N,whereInput:s.where,node:E,context:m,relationshipVariable:A,relationship:O,parameterPrefix:`${v}${g?"":`.${b}`}${T.union?`.${E.name}`:""}${T.typeMeta.array?`[${_}]`:""}.where`});e&&(F.push(e),t.params={...t.params,...n},r&&(I.push(r),j=!0))}catch(e){I.push(" \n}");return}let L=(0,l.createAuthorizationBeforeAndParams)({context:m,nodes:[{variable:N,node:E}],operations:["DELETE"]});if(L){let{cypher:e,params:r,subqueries:n}=L;F.push(e),t.params={...t.params,...r},n&&(I.push(n),I.push("WITH *"))}if(F.length){let e=`${F.join(" AND ")}`;if(j){let t=[new i.default.NamedVariable(A),new i.default.NamedVariable(N)],{cypher:r}=(0,a.caseWhere)(new i.default.Raw(e),t).build("aggregateWhereFilter");I.push(r)}else I.push(`WHERE ${e}`)}if(s.delete){let r=Object.entries(s.delete).reduce((e,[t,r])=>({...e,[t]:r}),{}),n=m.subscriptionsEnabled?[...y,N,A]:[...y,N],i=e({context:m,node:E,deleteInput:r,varName:N,withVars:n,parentVar:N,parameterPrefix:`${v}${g?"":`.${b}`}${T.union?`.${E.name}`:""}${T.typeMeta.array?`[${_}]`:""}.delete`,recursing:!1});I.push(i[0]),t.params={...t.params,...i[1]}}if(m.subscriptionsEnabled){let e=(0,c.createEventMetaObject)({event:"delete",nodeVariable:"x",typename:E.name}),[t,r]="IN"===T.direction?["x",f]:[f,"x"],[i,a]="IN"===T.direction?[E.name,n.name]:[n.name,E.name],s=(0,u.createConnectionEventMetaObject)({event:"delete_relationship",relVariable:A,fromVariable:t,toVariable:r,typename:T.typeUnescaped,fromTypename:i,toTypename:a}),l=[`WITH ${D}, ${o.META_CYPHER_VARIABLE}, ${A}, collect(DISTINCT ${N}) AS ${P}`,"CALL {",`	WITH ${A}, ${P}, ${D}`,`	UNWIND ${P} AS x`,`	WITH [] + ${e} + ${s} AS ${o.META_CYPHER_VARIABLE}, x, ${A}, ${D}`,"	DETACH DELETE x",`	RETURN collect(${o.META_CYPHER_VARIABLE}) AS delete_meta`,"}",`WITH delete_meta, ${o.META_CYPHER_VARIABLE}`,`RETURN reduce(m=${o.META_CYPHER_VARIABLE}, n IN delete_meta | m + n) AS delete_meta`,"}",`WITH ${D}, ${o.META_CYPHER_VARIABLE}, collect(delete_meta) as delete_meta`,`WITH ${D}, reduce(m=${o.META_CYPHER_VARIABLE}, n IN delete_meta | m + n) AS ${o.META_CYPHER_VARIABLE}`];I.push(...l)}else{let e=[`WITH ${A}, collect(DISTINCT ${N}) AS ${P}`,"CALL {",`	WITH ${P}`,`	UNWIND ${P} AS x`,"	DETACH DELETE x","}","}"];I.push(...e)}t.strs.push(...I)})})}return t},{strs:[],params:{}});return[b.join("\n"),_]}},80517:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(52462)),o=r(80395),a=r(87935),s=r(49879),l=r(88086),u=r(71614),c=r(17220),p=n(r(16733));t.default=function e({withVars:t,value:r,varName:n,relationField:d,parentVar:f,refNodes:h,context:y,labelOverride:m,parentNode:v,parameterPrefix:g,isFirstLevel:b=!0}){function _(r,h,b){let _;(0,a.checkAuthentication)({context:y,node:r,targetOperations:["DELETE_RELATIONSHIP"]});let T=`${n}${b}`,E="IN"===d.direction?"<-":"-",O="OUT"===d.direction?"->":"-",S=`${T}_rel`,w=`[${S}:${d.type}]`,I=[],N=r.getLabelString(y),A=m?`:${m}`:N;I.push(`WITH ${t.join(", ")}`),I.push(`OPTIONAL MATCH (${f})${E}${w}${O}(${T}${A})`);let C=y.relationships.find(e=>e.properties===d.properties),P=[],R=!1;if(h.where)try{let{cypher:e,subquery:t,params:n}=(0,p.default)({nodeVariable:T,whereInput:h.where,node:r,context:y,relationshipVariable:S,relationship:C,parameterPrefix:`${g}${d.typeMeta.array?`[${b}]`:""}.where.${r.name}`});e&&(P.push(e),_={..._,...n},t&&(I.push(t),R=!0))}catch{return{subquery:"",params:{}}}let D=(0,l.createAuthorizationBeforeAndParams)({context:y,nodes:[{node:v,variable:f},{node:r,variable:T}],operations:["DELETE_RELATIONSHIP"]});if(D){let{cypher:e,params:t,subqueries:r}=D;P.push(e),_={..._,...t},r&&(I.push(r),P.length&&I.push("WITH *"))}if(P.length){let e=`${P.join(" AND ")}`;if(R){let t=[new i.default.NamedVariable(S),new i.default.NamedVariable(T)],{cypher:r}=(0,o.caseWhere)(new i.default.Raw(e),t).build("aggregateWhereFilter");I.push(r)}else I.push(`WHERE ${e}`)}if(I.push("CALL {"),I.push(`	WITH ${T}, ${S}, ${f}`),I.push(`	WITH collect(${T}) as ${T}, ${S}, ${f}`),I.push(`	UNWIND ${T} as x`),y.subscriptionsEnabled){let[e,t]="IN"===d.direction?["x",f]:[f,"x"],[n,i]="IN"===d.direction?[r.name,v.name]:[v.name,r.name],o=(0,u.createConnectionEventMetaObject)({event:"delete_relationship",relVariable:S,fromVariable:e,toVariable:t,typename:d.typeUnescaped,fromTypename:n,toTypename:i});I.push(`	WITH ${o} as meta, ${S}`),I.push(`	DELETE ${S}`),I.push("	RETURN collect(meta) as update_meta")}else I.push(`	DELETE ${S}`);I.push("}"),y.subscriptionsEnabled&&I.push(`WITH ${(0,c.filterMetaVariable)(t).join(", ")}, ${T}, meta + update_meta as meta`),h.disconnect&&(Array.isArray(h.disconnect)?h.disconnect:[h.disconnect]).forEach(n=>{let i=Object.entries(n).reduce((n,[i,o])=>{let a=r.relationFields.find(e=>i.startsWith(e.fieldName)),s=[];return a.union?Object.keys(o).forEach(e=>{s.push(y.nodes.find(t=>t.name===e))}):a.interface?a.interface.implementations.forEach(e=>{s.push(y.nodes.find(t=>t.name===e))}):s.push(y.nodes.find(e=>e.name===a.typeMeta.name)),s.forEach((s,l)=>{let u=e({withVars:[...t,T],value:a.union?o[s.name]:o,varName:`${T}_${i}${a.union?`_${s.name}`:""}`,relationField:a,parentVar:T,context:y,refNodes:[s],parentNode:r,parameterPrefix:`${g}${a.typeMeta.array?`[${l}]`:""}.disconnect.${i}${a.union?`.${s.name}`:""}`,labelOverride:a.union?s.name:"",isFirstLevel:!1});n.disconnects.push(u[0]),n.params={...n.params,...u[1]}}),n},{disconnects:[],params:{}});I.push(i.disconnects.join("\n")),_={..._,...i.params}});let F=(0,s.createAuthorizationAfterAndParams)({context:y,nodes:[{node:v,variable:f},{node:r,variable:T}],operations:["DELETE_RELATIONSHIP"]});if(F){let{cypher:e,params:r,subqueries:n}=F;e&&(n?(I.push("WITH *"),I.push(`${n}`),I.push("WITH *")):I.push(`WITH ${[...t,T].join(", ")}`),I.push(`WHERE ${e}`),_={..._,...r})}return y.subscriptionsEnabled?(I.push("WITH collect(meta) AS disconnect_meta"),I.push("RETURN REDUCE(m=[],m1 IN disconnect_meta | m+m1 ) as disconnect_meta")):I.push(`RETURN count(*) AS disconnect_${n}_${r.name}`),{subquery:I.join("\n"),params:_}}(0,a.checkAuthentication)({context:y,node:v,targetOperations:["DELETE_RELATIONSHIP"]});let{disconnects:T,params:E}=(d.typeMeta.array?r:[r]).reduce(function(e,r,n){b&&e.disconnects.push(`WITH ${t.join(", ")}`);let i=[];if(d.interface){let o=[];if(h.forEach(t=>{let i=_(t,r,n);i.subquery&&(o.push(i.subquery),e.params={...e.params,...i.params})}),o.length>0){if(y.subscriptionsEnabled){let e=`WITH ${(0,c.filterMetaVariable)(t).join(", ")}, disconnect_meta + meta AS meta`;i.push(o.join(`
}
${e}
CALL {
	`))}else i.push(o.join("\n}\nCALL {\n	"))}}else{let t=_(h[0],r,n);i.push(t.subquery),e.params={...e.params,...t.params}}return i.length>0&&(e.disconnects.push("CALL {"),e.disconnects.push(...i),e.disconnects.push("}"),y.subscriptionsEnabled&&e.disconnects.push(`WITH ${(0,c.filterMetaVariable)(t).join(", ")}, disconnect_meta + meta as meta`)),e},{disconnects:[],params:{}});return[T.join("\n"),E]}},20701:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createRelationshipValidationClauses=void 0;let a=o(r(52462)),s=r(58388),l=r(14178),u=r(20631),c=r(86904),p=r(42447);t.createRelationshipValidationClauses=function({entity:e,context:t,varName:r,relationshipFieldNotOverwritable:n}){return(0,l.filterTruthy)([...e.relationships.values()].map(i=>{let o=i.target;if((0,c.isInterfaceEntity)(o)||(0,p.isUnionEntity)(o))return;let l=new a.default.Relationship,d=(!i.isList||n!==i.name)&&(i.isList||i.isNullable)?!i.isList&&i.isNullable?[a.default.lte(new a.NamedVariable("c"),new a.default.Literal(1)),`${s.RELATIONSHIP_REQUIREMENT_PREFIX}${e.name}.${i.name} must be less than or equal to one`]:void 0:[a.default.eq(new a.NamedVariable("c"),new a.default.Literal(1)),`${s.RELATIONSHIP_REQUIREMENT_PREFIX}${e.name}.${i.name} required exactly once`];if(!d)return;let[f,h]=d,y=new a.NamedVariable("c"),m=a.default.not(f),v=i.isList?a.default.collect(y):y,g=new a.default.Match(new a.default.Pattern(r).related(l,{type:i.type,direction:i.getCypherDirection()}).to({labels:(0,u.getEntityLabels)(o,t)})).with([a.default.count(l),y]).where(a.default.apoc.util.validatePredicate(m,h)).return([v,new a.default.Variable]);return new a.default.Call(g).importWith(r)}))}},32354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRelationshipValidationString=void 0;let n=r(58388);t.createRelationshipValidationString=function({node:e,context:t,varName:r,relationshipFieldNotOverwritable:i}){let o=[];return e.relationFields.forEach(a=>{let s,l,u;let c=a.typeMeta.array;if(a.union||a.interface)return;let p=t.nodes.find(e=>e.name===a.typeMeta.name),d="IN"===a.direction?"<-":"-",f="OUT"===a.direction?"->":"-",h=`${r}_${a.fieldName}_${p.name}_unique`;c?i===a.fieldName&&(s="c = 1",l=`${n.RELATIONSHIP_REQUIREMENT_PREFIX}${e.name}.${a.fieldName} required exactly once for a specific ${p.name}`,u=`CALL {
	WITH ${r}
	MATCH (${r})${d}[${h}:${a.type}]${f}(other${p.getLabelString(t)})
	WITH count(${h}) as c, other
	WHERE apoc.util.validatePredicate(NOT (${s}), '${l}', [0])
	RETURN collect(c) AS ${h}_ignored
}`):(s="c = 1",l=`${n.RELATIONSHIP_REQUIREMENT_PREFIX}${e.name}.${a.fieldName} required exactly once`,a.typeMeta.required||(s="c <= 1",l=`${n.RELATIONSHIP_REQUIREMENT_PREFIX}${e.name}.${a.fieldName} must be less than or equal to one`),u=`CALL {
	WITH ${r}
	MATCH (${r})${d}[${h}:${a.type}]${f}(${p.getLabelString(t)})
	WITH count(${h}) as c
	WHERE apoc.util.validatePredicate(NOT (${s}), '${l}', [0])
	RETURN c AS ${h}_ignored
}`),u&&o.push(u)}),o.join("\n")}},67749:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(81685)),o=r(35430);t.default=function({properties:e,varName:t,relationship:r,operation:n,callbackBucket:a}){let s=[],l={},u=r.properties&&e[r.properties]?e[r.properties]:e;return r.primitiveFields.forEach(e=>{e?.autogenerate&&"CREATE"===n&&s.push(`SET ${t}.${e.dbPropertyName} = randomUUID()`)}),r.temporalFields.forEach(e=>{["DateTime","Time"].includes(e.typeMeta.name)&&e?.timestamps?.includes(n)&&s.push(`SET ${t}.${e.dbPropertyName} = ${e.typeMeta.name.toLowerCase()}()`)}),[...r.primitiveFields,...r.temporalFields].forEach(e=>(0,o.addCallbackAndSetParam)(e,t,u,a,s,n)),Object.entries(u).forEach(([e,n])=>{let o=`${t}_${e}`,a=r.pointFields.find(t=>t.fieldName===e);if(a){a.typeMeta.array?s.push(`SET ${t}.${a.dbPropertyName} = [p in $${o} | point(p)]`):s.push(`SET ${t}.${a.dbPropertyName} = point($${o})`),l[o]=n;return}let u=(0,i.default)(r,e);s.push(`SET ${t}.${u} = $${o}`),l[o]=n}),[s.join("\n"),l]}},65847:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(81685)),o=r(35430),a=r(20492);function s({properties:e,varName:t,withVars:r,relationship:n,operation:s,callbackBucket:l,parameterPrefix:u}){let c=[];return n.primitiveFields.forEach(e=>{e?.autogenerate&&"CREATE"===s&&c.push(`SET ${t}.${e.dbPropertyName} = randomUUID()`)}),n.temporalFields.forEach(e=>{["DateTime","Time"].includes(e.typeMeta.name)&&e?.timestamps?.includes(s)&&c.push(`SET ${t}.${e.dbPropertyName} = ${e.typeMeta.name.toLowerCase()}()`)}),[...n.primitiveFields,...n.temporalFields].forEach(r=>(0,o.addCallbackAndSetParam)(r,t,e,l,c,s)),Object.entries(e).forEach(([e,o],s,l)=>{let d=`${u}.${e}`,f=n.pointFields.find(t=>t.fieldName===e);if(f){f.typeMeta.array?c.push(`SET ${t}.${f.dbPropertyName} = [p in $${d} | point(p)]`):c.push(`SET ${t}.${f.dbPropertyName} = point($${d})`);return}let h=n.primitiveFields.find(t=>`${t.fieldName}_PUSH`===e);if(h&&h.dbPropertyName){p(l,h.dbPropertyName),c.push(`SET ${t}.${h.dbPropertyName} = ${t}.${h.dbPropertyName} + $${d}`);return}let y=n.pointFields.find(t=>`${t.fieldName}_PUSH`===e);if(y&&y.dbPropertyName){p(l,y.dbPropertyName),c.push(`SET ${t}.${y.dbPropertyName} = ${t}.${y.dbPropertyName} + [p in $${d} | point(p)]`);return}let m=n.primitiveFields.find(t=>`${t.fieldName}_POP`===e);if(m&&m.dbPropertyName){p(l,m.dbPropertyName),c.push(`SET ${t}.${m.dbPropertyName} = ${t}.${m.dbPropertyName}[0..-$${d}]`);return}let v=n.pointFields.find(t=>`${t.fieldName}_POP`===e);if(v&&v.dbPropertyName){p(l,v.dbPropertyName),c.push(`SET ${t}.${v.dbPropertyName} = ${t}.${v.dbPropertyName}[0..-$${d}]`);return}let g=(0,a.matchMathField)(e),{hasMatched:b}=g;if(b){let e=(0,a.mathDescriptorBuilder)(o,n,g);p(l,e.dbName);let i=(0,a.buildMathStatements)(e,t,r,d);c.push(...i);return}let _=(0,i.default)(n,e);c.push(`SET ${t}.${_} = $${d}`)}),c.join("\n");function p(e,t){if(e.find(([e])=>e===t))throw Error(`Cannot mutate the same field multiple times in one Mutation: ${t}`)}}t.default=function({properties:e,varName:t,withVars:r,relationship:n,relationshipAdapter:i,operation:o,callbackBucket:a,parameterPrefix:l}){if(Object.keys(e).find(e=>i?.siblings?.includes(e))){let i=e[n.properties];return i?s({properties:i,varName:t,withVars:r,relationship:n,operation:o,callbackBucket:a,parameterPrefix:`${l}.${n.properties}`}):void 0}return s({properties:e,varName:t,withVars:r,relationship:n,operation:o,callbackBucket:a,parameterPrefix:l})}},37732:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(52462)),o=n(r(87180)),a=r(44706),s=r(58388),l=r(80395),u=r(23248),c=n(r(81685)),p=r(1978),d=r(87935),f=r(49879),h=r(88086),y=n(r(71277)),m=r(4850),v=n(r(46717)),g=n(r(58137)),b=n(r(80517)),_=r(32354),T=n(r(65847)),E=r(71614),O=r(77855),S=r(17220),w=r(35430),I=r(64726),N=r(87587),A=r(20492),C=n(r(16733));function P(e,t,r){e.meta.preArrayMethodValidationStrs.push([`${t}.${r.dbPropertyName}`,`${r.dbPropertyName}`])}t.default=function e({updateInput:t,varName:r,node:n,parentVar:R,chainStr:D,withVars:F,context:j,callbackBucket:L,parameterPrefix:x,includeRelationshipValidation:M}){let k=!1,$=(0,u.findConflictingProperties)({node:n,input:t});if($.length>0)throw new a.Neo4jGraphQLError(`Conflicting modification of ${$.map(e=>`[[${e}]]`).join(", ")} on type ${n.name}`);(0,d.checkAuthentication)({context:j,node:n,targetOperations:["UPDATE"]});let U=Object.entries(t).reduce(function(o,[a,u]){let p;p=D?`${D}_${a}`:`${R}_update_${a}`;let O=n.relationFields.find(e=>a===e.fieldName),M=n.pointFields.find(e=>a===e.fieldName),$=(0,c.default)(n,a);if(O){let t=[],c=j.relationships.find(e=>e.properties===O.properties);O.union?Object.keys(u).forEach(e=>{t.push(j.nodes.find(t=>t.name===e))}):O.interface?O.interface?.implementations?.forEach(e=>{t.push(j.nodes.find(t=>t.name===e))}):t.push(j.nodes.find(e=>e.name===O.typeMeta.name));let d="IN"===O.direction?"<-":"-",f="OUT"===O.direction?"->":"-",w=[],A=[];if(t.forEach((t,P)=>{let D=O.union?u[t.name]:u,M=O.typeMeta.array?D:[D],k=[],$="";M.forEach((u,w)=>{let D=`${r}_${O.typeUnescaped.toLowerCase()}${w}_relationship`,M=`[${D}:${O.type}]`,U=`${r}_${a}${O.union?`_${t.name}`:""}${w}`;if(u.delete){let e=`${U}_delete`,t=(0,g.default)({context:j,node:n,deleteInput:{[a]:u.delete},varName:e,chainStr:e,parentVar:R,withVars:F,parameterPrefix:`${x}.${a}${O.typeMeta.array?`[${w}]`:""}.delete`,recursing:!0});k.push(t[0]),o.params={...o.params,...t[1]}}if(u.disconnect){let e=(0,b.default)({context:j,refNodes:[t],value:u.disconnect,varName:`${U}_disconnect`,withVars:F,parentVar:R,relationField:O,labelOverride:O.union?t.name:"",parentNode:n,parameterPrefix:`${x}.${a}${O.union?`.${t.name}`:""}${O.typeMeta.array?`[${w}]`:""}.disconnect`});k.push(e[0]),o.params={...o.params,...e[1]}}if(u.update){let r=[],y=[],m=!1;if(u.where)try{let{cypher:e,subquery:n,params:i}=(0,C.default)({whereInput:u.where,node:t,nodeVariable:U,relationship:c,relationshipVariable:D,context:j,parameterPrefix:`${x}.${a}${O.union?`.${t.name}`:""}${O.typeMeta.array?`[${w}]`:""}.where`});e&&(r.push(e),o.params={...o.params,...i},n&&(y.push(n),m=!0))}catch{return}let v=[];F&&v.push(`WITH ${F.join(", ")}`);let g=t.getLabelString(j);v.push(`MATCH (${R})${d}${M}${f}(${U}${g})`),v.push(...y);let b=(0,h.createAuthorizationBeforeAndParams)({context:j,nodes:[{node:t,variable:U}],operations:["UPDATE"]});if(b){let{cypher:e,params:t,subqueries:n}=b;r.push(e),o.params={...o.params,...t},n&&v.push(n)}if(r.length){let e=`${r.join(" AND ")}`;if(m){let t=[new i.default.NamedVariable(D),new i.default.NamedVariable(U)],{cypher:r}=(0,l.caseWhere)(new i.default.Raw(e),t).build("aggregateWhereFilter");v.push(r)}else v.push(`WHERE ${e}`)}if(u.update.edge){let e=j.schemaModel.getConcreteEntityAdapter(n.name),r=e?e.findRelationship(O.fieldName):void 0,i=(0,T.default)({properties:u.update.edge,varName:D,withVars:F,relationship:c,relationshipAdapter:r,callbackBucket:L,operation:"UPDATE",parameterPrefix:`${x}.${a}${O.union?`.${t.name}`:""}${O.typeMeta.array?`[${w}]`:""}.update.edge`});i&&v.push(i)}if(u.update.node){let r=[...F,U],n=e({context:j,callbackBucket:L,node:t,updateInput:Object.entries(u.update.node).reduce((e,[t,r])=>({...e,[t]:r}),{}),varName:U,withVars:r,parentVar:U,chainStr:`${p}${O.union?`_${t.name}`:""}${w}`,parameterPrefix:`${x}.${a}${O.union?`.${t.name}`:""}${O.typeMeta.array?`[${w}]`:""}.update.node`,includeRelationshipValidation:!0});o.params={...o.params,...n[1]},v.push(n[0])}if(j.subscriptionsEnabled?(v.push(`RETURN collect(${s.META_CYPHER_VARIABLE}) as update_meta`),$=`meta AS update${P}_meta`,A.push(`WITH *, update${P}_meta AS meta`)):v.push(`RETURN count(*) AS update_${U}`),k.push(`WITH ${F.join(", ")}`,"CALL {",(0,N.indentBlock)(v.join("\n")),"}"),j.subscriptionsEnabled){let e=`REDUCE(m=${s.META_CYPHER_VARIABLE}, n IN update_meta | m + n) AS ${s.META_CYPHER_VARIABLE}`;k.push(`WITH ${(0,S.filterMetaVariable)(F).join(", ")}, ${e}`)}}if(u.connect){let e=(0,y.default)({context:j,callbackBucket:L,refNodes:[t],value:u.connect,varName:`${U}_connect`,withVars:F,parentVar:R,relationField:O,labelOverride:O.union?t.name:"",parentNode:n,source:"UPDATE"});k.push(e[0]),j.subscriptionsEnabled&&($=`meta AS update${P}_meta`,A.push(`WITH *, update${P}_meta AS meta`)),o.params={...o.params,...e[1]}}if(u.connectOrCreate){let{cypher:e,params:i}=(0,m.createConnectOrCreateAndParams)({input:u.connectOrCreate,varName:`${U}_connectOrCreate`,parentVar:r,relationField:O,refNode:t,node:n,context:j,withVars:F,callbackBucket:L});k.push(e),o.params={...o.params,...i}}if(u.create&&(F&&k.push(`WITH ${F.join(", ")}`),(O.typeMeta.array?u.create:[u.create]).forEach((e,i)=>{let s=`${U}_create${i}`,l=`${s}_node`,u=`${s}_relationship`,p={input:e.node};if(O.interface){let r=e.node[t.name];if(!r)return;p={input:r}}let{create:h,params:y,authorizationPredicates:m,authorizationSubqueries:g}=(0,v.default)({context:j,node:t,callbackBucket:L,varName:l,withVars:[...F,l],includeRelationshipValidation:!1,...p});k.push(h),o.params={...o.params,...y};let b=e.edge||j.subscriptionsEnabled?u:"";if(k.push(`MERGE (${R})${d}[${b}:${O.type}]${f}(${l})`),e.edge){let r=j.schemaModel.getConcreteEntityAdapter(n.name),o=r?r.findRelationship(O.fieldName):void 0,s=(0,T.default)({properties:e.edge,varName:u,withVars:F,relationship:c,relationshipAdapter:o,callbackBucket:L,operation:"CREATE",parameterPrefix:`${x}.${a}${O.union?`.${t.name}`:""}[${w}].create[${i}].edge`});s&&k.push(s)}if(k.push(...(0,I.getAuthorizationStatements)(m,g)),j.subscriptionsEnabled){let[e,i]="IN"===O.direction?[l,r]:[r,l],[o,a]="IN"===O.direction?[t.name,n.name]:[n.name,t.name],s=(0,E.createConnectionEventMeta)({event:"create_relationship",relVariable:u,fromVariable:e,toVariable:i,typename:O.typeUnescaped,fromTypename:o,toTypename:a});k.push(`WITH ${s}, ${(0,S.filterMetaVariable)([...F,l]).join(", ")}`),$=`meta AS update${P}_meta`,A.push(`WITH *, update${P}_meta AS meta`)}let N=(0,_.createRelationshipValidationString)({node:t,context:j,varName:l});N&&(k.push(`WITH ${[...F,l].join(", ")}`),k.push(N))})),O.interface){let e=`RETURN count(*) AS update_${r}_${t.name}`;j.subscriptionsEnabled&&$?k.push(`RETURN ${$}`):k.push(e)}}),k.length&&w.push(k.join("\n"))}),O.interface){o.strs.push(`WITH ${F.join(", ")}`),o.strs.push(`CALL {
	 WITH ${F.join(", ")}
	`);let e=w.map((e,t)=>e+`
}
${A[t]||""}`);o.strs.push(e.join(`
CALL {
	 WITH ${F.join(", ")}
	`))}else o.strs.push(w.join("\n"));return o}k||(n.temporalFields.filter(e=>["DateTime","Time"].includes(e.typeMeta.name)&&e.timestamps?.includes("UPDATE")).forEach(e=>{o.strs.push(`SET ${r}.${e.dbPropertyName} = ${e.typeMeta.name.toLowerCase()}()`)}),k=!0),[...n.primitiveFields,...n.temporalFields].forEach(e=>(0,w.addCallbackAndSetParam)(e,r,t,L,o.strs,"UPDATE"));let U=(0,A.matchMathField)(a),{hasMatched:V,propertyName:G}=U,q=V?G:a,B=n.mutableFields.find(e=>e.fieldName===q),W=n.authableFields.find(e=>e.fieldName===a||`${e.fieldName}_PUSH`===a||`${e.fieldName}_POP`===a);if(B){if(B.typeMeta.required&&null===u)throw Error(`Cannot set non-nullable field ${n.name}.${B.fieldName} to null`);if(M)M.typeMeta.array?o.strs.push(`SET ${r}.${$} = [p in $${p} | point(p)]`):o.strs.push(`SET ${r}.${$} = point($${p})`);else if(V){let e=(0,A.mathDescriptorBuilder)(u,n,U);if(t[e.dbName])throw Error(`Cannot mutate the same field multiple times in one Mutation: ${e.dbName}`);let i=(0,A.buildMathStatements)(e,r,F,p);o.strs.push(...i)}else o.strs.push(`SET ${r}.${$} = $${p}`);o.params[p]=u}if(W){let e=(0,h.createAuthorizationBeforeAndParamsField)({context:j,nodes:[{node:n,variable:r,fieldName:W.fieldName}],operations:["UPDATE"]});if(e){let{cypher:t,params:r,subqueries:n}=e;o.meta.authorizationBeforePredicates.push(t),n&&o.meta.authorizationBeforeSubqueries.push(n),o.params={...o.params,...r}}let t=(0,f.createAuthorizationAfterAndParamsField)({context:j,nodes:[{node:n,variable:r,fieldName:W.fieldName}],operations:["UPDATE"]});if(t){let{cypher:e,params:r,subqueries:n}=t;o.meta.authorizationAfterPredicates.push(e),n&&o.meta.authorizationAfterSubqueries.push(n),o.params={...o.params,...r}}}let H=n.mutableFields.find(e=>`${e.fieldName}_PUSH`===a);if(H){if(H.dbPropertyName&&t[H.dbPropertyName])throw Error(`Cannot mutate the same field multiple times in one Mutation: ${H.dbPropertyName}`);P(o,r,H),(0,d.checkAuthentication)({context:j,node:n,targetOperations:["UPDATE"],field:H.fieldName}),n.pointFields.find(e=>`${e.fieldName}_PUSH`===a)?o.strs.push(`SET ${r}.${H.dbPropertyName} = ${r}.${H.dbPropertyName} + [p in $${p} | point(p)]`):o.strs.push(`SET ${r}.${H.dbPropertyName} = ${r}.${H.dbPropertyName} + $${p}`),o.params[p]=u}let Q=n.mutableFields.find(e=>`${e.fieldName}_POP`===a);if(Q){if(Q.dbPropertyName&&t[Q.dbPropertyName])throw Error(`Cannot mutate the same field multiple times in one Mutation: ${Q.dbPropertyName}`);P(o,r,Q),(0,d.checkAuthentication)({context:j,node:n,targetOperations:["UPDATE"],field:Q.fieldName}),o.strs.push(`SET ${r}.${Q.dbPropertyName} = ${r}.${Q.dbPropertyName}[0..-$${p}]`),o.params[p]=u}return H||Q||(0,d.checkAuthentication)({context:j,node:n,targetOperations:["UPDATE"],field:a}),o},{strs:[],meta:{preArrayMethodValidationStrs:[],authorizationBeforeSubqueries:[],authorizationBeforePredicates:[],authorizationAfterSubqueries:[],authorizationAfterPredicates:[]},params:{}}),{strs:V,meta:G}=U,q=U.params,B=G.authorizationBeforePredicates,W=G.authorizationBeforeSubqueries,H=G.authorizationAfterPredicates,Q=G.authorizationAfterSubqueries,K=`WITH ${F.join(", ")}`,z=(0,f.createAuthorizationAfterAndParams)({context:j,nodes:[{node:n,variable:r}],operations:["UPDATE"]});if(z){let{cypher:e,params:t,subqueries:r}=z;e&&(r&&Q.push(r),H.push(e),q={...q,...t})}let Y=M?(0,_.createRelationshipValidationString)({node:n,context:j,varName:r}):"";if(G.preArrayMethodValidationStrs.length){let e=G.preArrayMethodValidationStrs.map(e=>`${e[0]} IS NULL`),t=G.preArrayMethodValidationStrs.map(e=>e[1]);B.push(`apoc.util.validatePredicate(${e.join(" OR ")}, "${(0,o.default)("Property",t.length)} ${t.map(()=>"%s").join(", ")} cannot be NULL", [${(0,p.wrapStringInApostrophes)(t).join(", ")}])`)}let J="",X="";B.length&&(J=W.length?`${K}
${W.join("\n")}
WITH *
WHERE ${B.join(" AND ")}`:`${K}
WHERE ${B.join(" AND ")}`),H.length&&(X=Q.length?`${K}
${Q.join("\n")}
WITH *
WHERE ${H.join(" AND ")}`:`${K}
WHERE ${H.join(" AND ")}`);let Z=V;return j.subscriptionsEnabled&&(Z=function({statements:e,nodeVariable:t,typename:r,withVars:n}){let i="update_meta",o=`WITH ${t} { .* } AS ${s.META_OLD_PROPS_CYPHER_VARIABLE}, ${n.join(", ")}`,a=["WITH *",...e,`RETURN ${s.META_CYPHER_VARIABLE} as ${i}`],l=`WITH *, ${i} as ${s.META_CYPHER_VARIABLE}`,u=(0,O.createEventMeta)({event:"update",nodeVariable:t,typename:r}),c=`WITH ${(0,S.filterMetaVariable)(n).join(", ")}, ${u}`;return[o,"CALL {",...(0,N.indentBlock)(a),"}",l,c]}({withVars:F,nodeVariable:r,typename:n.name,statements:V})),[[J,"",...Z,X,...Y?[K,Y]:[]].join("\n"),q]}},51086:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.translateUpdate=t.translateTopLevelCypher=t.translateRead=t.translateDelete=t.translateCreate=t.translateAggregate=void 0;var i=r(37260);Object.defineProperty(t,"translateAggregate",{enumerable:!0,get:function(){return i.translateAggregate}});var o=r(3575);Object.defineProperty(t,"translateCreate",{enumerable:!0,get:function(){return n(o).default}});var a=r(73789);Object.defineProperty(t,"translateDelete",{enumerable:!0,get:function(){return a.translateDelete}});var s=r(77735);Object.defineProperty(t,"translateRead",{enumerable:!0,get:function(){return s.translateRead}});var l=r(89128);Object.defineProperty(t,"translateTopLevelCypher",{enumerable:!0,get:function(){return l.translateTopLevelCypher}});var u=r(47062);Object.defineProperty(t,"translateUpdate",{enumerable:!0,get:function(){return n(u).default}})},69412:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryAST=void 0;let i=n(r(52462)),o=r(20631),a=r(16397),s=r(81069),l=r(86288),u=r(24670),c=r(73445),p=r(71148);class d{constructor(e){this.operation=e}build(e,t){let r=this.buildQueryASTContext(e,t);return i.default.concat(...this.transpile(r).clauses)}buildNew(e,t){let r=this.buildQueryASTContext(e,t),{clauses:n,projectionExpr:o,extraProjectionColumns:a}=this.transpile(r),s=new i.default.Return(t?[o,t]:o);if(a)for(let e of a)s.addColumns(e);return i.default.concat(...n,s)}transpile(e){return this.operation.transpile(e)}buildQueryASTContext(e,t){let r=new a.QueryASTEnv,n=this.getTargetFromOperation(t),o=new i.default.NamedVariable(t??"this");return new a.QueryASTContext({target:n,env:r,neo4jGraphQLContext:e,returnVariable:o})}getTargetFromOperation(e){if(this.operation instanceof c.ReadOperation||this.operation instanceof l.ConnectionReadOperation||this.operation instanceof u.DeleteOperation||this.operation instanceof s.AggregationOperation||this.operation instanceof p.UnwindCreateOperation)return(0,o.createNode)(e)}print(){return(function e(t,r=0){let n=t.print(),i=[],o="";if(0===r)i.push(`${n}`);else if(1===r)i.push(`|${o} ${n}`);else{let e=(o.length+1)*(r-1);r>2&&(e+=r-2),i.push(`|${" ".repeat(e)}|${o} ${n}`)}let a=t.getChildren();return a.length>0&&a.forEach(t=>{let n=e(t,r+1);i.push(...n)}),i})(this.operation).join("\n")}}t.QueryAST=d},16397:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryASTContext=t.QueryASTEnv=void 0;let i=n(r(52462));class o{constructor(){this.scopes=new Map,this.topLevelOperationName="READ"}getScope(e){let t=this.scopes.get(e);if(t)return t;{let t=new Map;return this.scopes.set(e,t),t}}}t.QueryASTEnv=o;class a{constructor({target:e,relationship:t,direction:r,source:n,env:a,neo4jGraphQLContext:s,returnVariable:l,shouldCollect:u,shouldDistinct:c}){this.target=e,this.relationship=t,this.source=n,this.env=a??new o,this.neo4jGraphQLContext=s,this.returnVariable=l??new i.default.Variable,this.shouldCollect=u??!1,this.shouldDistinct=c??!1,this.direction=r}hasTarget(){return!!this.target}getRelationshipScope(){if(!this.relationship)throw Error("Cannot get relationship scope on top-level context");return this.env.getScope(this.relationship)}getTargetScope(){if(!this.target)throw Error("Cannot get target scope on top-level context");return this.env.getScope(this.target)}getScopeVariable(e){let t=this.getTargetScope(),r=t.get(e);if(!r){let r=new i.default.Node;return t.set(e,r),r}return r}push({relationship:e,direction:t,target:r,returnVariable:n}){return new a({source:this.target,relationship:e,direction:t,target:r,env:this.env,neo4jGraphQLContext:this.neo4jGraphQLContext,returnVariable:n})}setReturn(e){return new a({source:this.source,relationship:this.relationship,target:this.target,env:this.env,neo4jGraphQLContext:this.neo4jGraphQLContext,returnVariable:e})}}t.QueryASTContext=a},15794:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryASTNode=void 0;class r{print(){return this.constructor.name}getSubqueries(e){return[]}getSelection(e){return[]}}t.QueryASTNode=r},27832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;let n=r(15794);class i extends n.QueryASTNode{constructor(e){super(),this.alias=e}print(){return`${super.print()} <${this.alias}>`}isCypherField(){return!1}}t.Field=i},59054:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OperationField=void 0;let i=n(r(52462)),o=r(16397),a=r(96206),s=r(85050),l=r(73406),u=r(27832);class c extends u.Field{constructor({operation:e,alias:t}){super(t),this.operation=e}getChildren(){return[this.operation]}getProjectionField(){if(!this.projectionExpr)throw Error("Projection expression of operation not available (has transpile been called)?");return{[this.alias]:this.projectionExpr}}getSubqueries(e){let t=new o.QueryASTContext({...e,returnVariable:new i.default.Variable}),r=this.operation.transpile(t);return this.projectionExpr=r.projectionExpr,r.clauses}isCypherField(){return this.operation instanceof a.CypherOperation||this.operation instanceof s.CypherScalarOperation||this.operation instanceof l.CompositeCypherOperation}}t.OperationField=c},81227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreField=void 0;let n=r(27832);class i extends n.Field{constructor({alias:e,score:t}){super(e),this.score=t}getProjectionField(){return{score:this.score}}getChildren(){return[]}}t.ScoreField=i},62771:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationAttributeField=void 0;let i=n(r(52462)),o=r(14178),a=r(81935);class s extends a.AggregationField{constructor({alias:e,attribute:t,aggregationProjection:r}){super(e),this.attribute=t,this.aggregationProjection=r}getChildren(){return[]}getProjectionField(e){return{[this.alias]:e}}getAggregationExpr(e){let t=e.property(this.attribute.databaseName);return this.createAggregationExpr(t)}getAggregationProjection(e,t){if(this.attribute.typeHelper.isString()){let r=e.property(this.attribute.databaseName),n=new i.default.NamedVariable("list"),o=new i.default.Return([this.createAggregationExpr(n),t]);return i.default.concat(new i.default.With(e).orderBy([i.default.size(r),"DESC"]).with([i.default.collect(r),n]),o)}return new i.default.Return([this.getAggregationExpr(e),t])}createAggregationExpr(e){if(this.attribute.typeHelper.isString()){let e=new i.default.NamedVariable("list");return new i.default.Map(this.filterProjection({longest:i.default.head(e),shortest:i.default.last(e)}))}if(this.attribute.typeHelper.isNumeric())return new i.default.Map(this.filterProjection({min:i.default.min(e),max:i.default.max(e),average:i.default.avg(e),sum:i.default.sum(e)}));if(this.attribute.typeHelper.isDateTime())return new i.default.Map(this.filterProjection({min:this.createDatetimeProjection(i.default.min(e)),max:this.createDatetimeProjection(i.default.max(e))}));if(this.attribute.typeHelper.isTemporal())return new i.default.Map(this.filterProjection({min:i.default.min(e),max:i.default.max(e)}));if(this.attribute.typeHelper.isID())return new i.default.Map(this.filterProjection({shortest:i.default.min(e),longest:i.default.max(e)}));throw Error(`Invalid aggregation type ${this.attribute.type.name}`)}filterProjection(e){let t=(0,o.filterFields)(e,Object.keys(this.aggregationProjection));return(0,o.renameFields)(t,this.aggregationProjection)}createDatetimeProjection(e){return i.default.apoc.date.convertFormat(e,"iso_zoned_date_time","iso_offset_date_time")}}t.AggregationAttributeField=s},81935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationField=void 0;let n=r(27832);class i extends n.Field{}t.AggregationField=i},88708:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CountField=void 0;let i=n(r(52462)),o=r(81935);class a extends o.AggregationField{constructor({alias:e,entity:t}){super(e),this.entity=t}getChildren(){return[]}getProjectionField(e){return{[this.alias]:e}}getAggregationExpr(e){return i.default.count(e)}getAggregationProjection(e,t){return new i.default.Return([this.getAggregationExpr(e),t])}}t.CountField=a},64170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeField=void 0;let n=r(27832);class i extends n.Field{constructor({alias:e,attribute:t}){super(e),this.attribute=t}getChildren(){return[]}getFieldName(){return this.attribute.name}getCypherExpr(e){return e.property(this.attribute.databaseName)}getProjectionField(e){let t=e.property(this.attribute.databaseName);return this.createAttributeProperty(t)}createAttributeProperty(e){return this.alias!==this.attribute.databaseName?{[this.alias]:e}:this.attribute.databaseName}}t.AttributeField=i},66:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DateTimeField=void 0;let i=n(r(52462)),o=r(64170);class a extends o.AttributeField{getCypherExpr(e){let t=e.property(this.attribute.databaseName);return this.createDateTimeProjection(t)}getProjectionField(e){let t=e.property(this.attribute.databaseName),r=this.createDateTimeProjection(t);return{[this.alias]:r}}createDateTimeProjection(e){return this.attribute.typeHelper.isList()?this.createArrayProjection(e):this.createApocConvertFormat(e)}createArrayProjection(e){let t=new i.default.Variable,r=this.createApocConvertFormat(t);return new i.default.ListComprehension(t).in(e).map(r)}createApocConvertFormat(e){return i.default.apoc.date.convertFormat(e,"iso_zoned_date_time","iso_offset_date_time")}}t.DateTimeField=a},8833:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PointAttributeField=void 0;let i=n(r(52462)),o=r(64170);class a extends o.AttributeField{constructor({attribute:e,alias:t,crs:r}){super({alias:t,attribute:e}),this.crs=r}getProjectionField(e){let t=this.createPointProjection(e);return{[this.alias]:t}}getCypherExpr(e){return this.createPointProjection(e)}createPointProjection(e){let t=e.property(this.attribute.databaseName),r=new i.default.Case().when(i.default.isNotNull(t));if(this.attribute.typeHelper.isList()){let e=this.createPointArrayProjection(t);return r.then(e).else(i.default.Null)}{let e=this.createPointProjectionMap(t);return r.then(e).else(i.default.Null)}}createPointArrayProjection(e){let t=new i.default.Variable,r=this.createPointProjectionMap(t);return new i.default.ListComprehension(t).in(e).map(r)}createPointProjectionMap(e){let t=new i.default.Map;return t.set({point:e}),this.crs&&t.set({crs:e.property("crs")}),t}}t.PointAttributeField=a},31731:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionFilter=void 0;let i=n(r(52462)),o=r(31359),a=r(20631),s=r(93457),l=r(86904),u=r(82864);class c extends u.Filter{constructor({relationship:e,target:t,operator:r,isNot:n}){super(),this.innerFilters=[],this.relationship=e,this.isNot=n,this.operator=r||"SOME",this.target=t}addFilters(e){this.innerFilters.push(...e)}getChildren(){return[...this.innerFilters]}print(){return`${super.print()} [${this.relationship.name}] <${this.operator}>`}getSubqueries(e){if(!(0,o.hasTarget)(e))throw Error("No parent node found!");let t=new i.default.Node,r=(0,a.getEntityLabels)(this.target,e.neo4jGraphQLContext),n=new i.default.Relationship,s=new i.default.Pattern(e.target).related(n,{type:this.relationship.type,direction:this.relationship.getCypherDirection()}).to(t,{labels:r}),l=e.push({relationship:n,target:t});return"ALL"===this.operator?this.getSubqueriesForOperationAll(s,l):this.getSubqueriesForDefaultOperations(s,l)}getPredicate(e){if(!(0,o.hasTarget)(e))throw Error("No parent node found!");if(this.subqueryPredicate)return this.subqueryPredicate;let t=new i.default.Node,r=[];(0,l.isInterfaceEntity)(this.target)||(r=(0,a.getEntityLabels)(this.target,e.neo4jGraphQLContext));let n=new i.default.Relationship,s=new i.default.Pattern(e.target).related(n,{type:this.relationship.type,direction:this.relationship.getCypherDirection()}).to(t,{labels:r}),u=e.push({target:t,relationship:n}),c=this.createRelationshipOperation(s,u);if(c)return this.wrapInNotIfNeeded(c)}getLabelPredicate(e){if(!(0,o.hasTarget)(e))throw Error("No parent node found!");if((0,s.isConcreteEntity)(this.target))return;let t=this.target.concreteEntities.map(t=>e.target.hasLabels(...t.labels));return i.default.or(...t)}createRelationshipOperation(e,t){let r=this.innerFilters.map(e=>e.getPredicate(t)),n=this.getLabelPredicate(t),o=i.default.and(...r,n);if(o)switch(this.operator){case"ALL":{let t=new i.default.Match(e).where(o),r=new i.default.Match(e).where(i.default.not(o));return i.default.and(new i.default.Exists(t),i.default.not(new i.default.Exists(r)))}case"SINGLE":return this.createSingleRelationshipOperation(e,t,o);default:{if(!this.relationship.isList)return this.createSingleRelationshipOperation(e,t,o);let r=new i.default.Match(e).where(o);return new i.default.Exists(r)}}}createSingleRelationshipOperation(e,t,r){if(!(0,o.hasTarget)(t))throw Error("No parent node found!");let n=new i.default.PatternComprehension(e,new i.default.Literal(1)).where(r);return i.default.single(t.target,n,new i.default.Literal(!0))}getSubqueriesForDefaultOperations(e,t){if(!(0,o.hasTarget)(t))throw Error("No parent node found!");let r=new i.default.Match(e),n=new i.default.Variable,a=[],s=this.innerFilters.flatMap(e=>{let r=e.getSubqueries(t).map(e=>new i.default.Call(e).importWith(t.target)),n=e.getSelection(t),o=e.getPredicate(t),s=[...n,...r];return o&&a.push(o),s});if(0===s.length)return[];let l=this.isNot?i.default.false:i.default.true;this.subqueryPredicate=i.default.eq(n,l);let u="SINGLE"===this.operator?i.default.eq(i.default.count(t.target),new i.default.Literal(1)):i.default.gt(i.default.count(t.target),new i.default.Literal(0)),c=new i.default.With("*").where(i.default.and(...a)).return([u,n]);return[i.default.concat(r,...s,c)]}getSubqueriesForOperationAll(e,t){if(!(0,o.hasTarget)(t))throw Error("No parent node found!");let r=new i.default.Match(e),n=new i.default.Match(e),a=[],s=[],l=this.innerFilters.flatMap(e=>e.getSubqueries(t).map(r=>{let n=e.getPredicate(t);if(n){let e=new i.default.Variable;return a.push(e),new i.default.Call(r).importWith(t.target).with("*").where(n).return([i.default.gt(i.default.count(t.target),new i.default.Literal(0)),e])}}));if(0===l.length)return[];let u=this.innerFilters.flatMap(e=>e.getSubqueries(t).map(r=>{let n=e.getPredicate(t);if(n){let e=new i.default.Variable;return s.push(e),new i.default.Call(r).importWith(t.target).with("*").where(i.default.not(n)).return([i.default.gt(i.default.count(t.target),new i.default.Literal(0)),e])}})),c=s.map(e=>i.default.eq(e,i.default.false)),p=a.map(e=>i.default.eq(e,i.default.true));return this.subqueryPredicate=i.default.and(...c,...p),[i.default.concat(r,...l),i.default.concat(n,...u)]}wrapInNotIfNeeded(e){return this.isNot?i.default.not(e):e}}t.ConnectionFilter=c},82864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Filter=t.isRelationshipOperator=void 0;let n=r(15794),i=["ALL","NONE","SINGLE","SOME"];t.isRelationshipOperator=function(e){return i.includes(e)};class o extends n.QueryASTNode{}t.Filter=o},70380:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LogicalFilter=void 0;let i=n(r(52462)),o=r(14178),a=r(82864);class s extends a.Filter{constructor({operation:e,filters:t}){super(),this.operation=e,this.children=t}getChildren(){return[...this.children]}print(){return`${super.print()} <${this.operation}>`}getSubqueries(e){return this.children.flatMap(t=>t.getSubqueries(e))}getSelection(e){return this.getChildren().flatMap(t=>t.getSelection(e))}getPredicate(e){let t=(0,o.filterTruthy)(this.children.map(t=>t.getPredicate(e)));switch(this.operation){case"NOT":if(0===t.length)return;return i.default.not(i.default.and(...t));case"AND":return i.default.and(...t);case"OR":return i.default.or(...t);case"XOR":return i.default.xor(...t)}}}t.LogicalFilter=s},93910:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipFilter=void 0;let o=i(r(52462)),a=r(65106),s=r(14178),l=r(20631),u=r(1808),c=r(82864);class p extends c.Filter{constructor({relationship:e,operator:t,isNot:r,target:n}){super(),this.targetNodeFilters=[],this.countVariable=new o.default.Variable,this.relationship=e,this.isNot=r,this.operator=t,this.target=n,this.countVariable=new o.default.NamedVariable(`${this.relationship.name}Count`)}getChildren(){return this.targetNodeFilters}addTargetNodeFilter(...e){this.targetNodeFilters.push(...e)}print(){return`${super.print()} [${this.relationship.name}] <${this.isNot?"NOT ":""}${this.operator}>`}getNestedContext(e){let t=new o.default.Node,r=new o.default.Relationship;return e.push({target:t,relationship:r})}getNestedSelectionSubqueries(e){let t=[],r=(0,s.filterTruthy)(this.targetNodeFilters.map(r=>{let n;if(!e.hasTarget())throw Error("No parent node found!");let i=r.getSelection(e);if(0===i.length)return;let a=new o.default.Pattern(e.source).related({type:this.relationship.type,direction:this.relationship.getCypherDirection()}).to(e.target,{labels:(0,l.getEntityLabels)(this.target,e.neo4jGraphQLContext)}),s=new o.default.Match(a),u=new o.default.Variable;t.push(u);let c=r.getPredicate(e),p=new o.default.With("*");return c&&p.where(c),n=this.relationship.isList?o.default.gt(o.default.count(e.target),new o.default.Literal(0)):o.default.eq(o.default.count(e.target),new o.default.Literal(1)),p.return([n,u]),o.default.concat(s,...i,p)})),n=t.map(e=>o.default.eq(e,o.default.true));return this.subqueryPredicate=o.default.and(...n),r}getSubqueries(e){let t=new o.default.Node,r=new o.default.Relationship,n=e.push({target:t,relationship:r}),i=[],a=this.targetNodeFilters.flatMap(e=>e.getSubqueries(n)),s=this.getNestedSelectionSubqueries(n);return a.length>0&&i.push(...this.getNestedSubqueries(n)),s.length>0&&i.push(...s),i}getNestedSubqueries(e){let t=new o.default.Pattern(e.source).related({direction:this.relationship.getCypherDirection(),type:this.relationship.type}).to(e.target,{labels:(0,l.getEntityLabels)(this.target,e.neo4jGraphQLContext)});switch(this.operator){case"NONE":case"SOME":case"SINGLE":{if(!e.hasTarget())throw Error("No parent node found!");let r=new o.default.Match(t),n=new o.default.Variable,i=(0,u.wrapSubqueriesInCypherCalls)(e,this.targetNodeFilters,[e.target]),a=this.targetNodeFilters.map(t=>t.getPredicate(e)),s=o.default.and(...a),l=this.isNot?o.default.false:o.default.true;this.subqueryPredicate=o.default.eq(n,l);let c=new o.default.With("*");s&&c.where(s);let p=this.getNestedSubqueryFilter(e.target);return c.return([p,n]),[o.default.concat(r,...i,c)]}case"ALL":{let{clause:r,returnVariables:n}=this.getSubqueryForAllFilter(t,e,!1),{clause:i,returnVariables:a}=this.getSubqueryForAllFilter(t,e,!0);return this.subqueryPredicate=o.default.and(...a.map(e=>o.default.eq(e,o.default.false)),...n.map(e=>o.default.eq(e,o.default.true))),[r,i]}}}getSubqueryForAllFilter(e,t,r){let n=[],i=new o.default.Match(e),a=this.targetNodeFilters.map(e=>{if(!t.hasTarget())throw Error("No parent node found!");let i=new o.default.Variable;n.push(i);let a=e.getSubqueries(t).map(e=>new o.default.Call(e).importWith(t.target)),s=e.getPredicate(t);s&&r&&(s=o.default.not(s));let l=new o.default.With("*");return s&&l.where(s),l.return([o.default.gt(o.default.count(t.target),new o.default.Literal(0)),i]),o.default.concat(...a,l)});return{clause:o.default.concat(i,...a),returnVariables:n}}getNestedSubqueryFilter(e){switch(this.operator){case"NONE":case"SOME":if(this.relationship.isList)return o.default.gt(o.default.count(e),new o.default.Literal(0));return o.default.eq(o.default.count(e),new o.default.Literal(1));case"SINGLE":return o.default.eq(o.default.count(e),new o.default.Literal(1));case"ALL":throw Error("Not supported")}}shouldCreateOptionalMatch(){return!this.relationship.isList&&!this.relationship.isNullable}getSelection(e){if(this.shouldCreateOptionalMatch()&&!this.subqueryPredicate){let t=this.getNestedContext(e);if(!t.hasTarget())throw Error("No parent node found!");let r=new o.default.Pattern(t.source).related({type:this.relationship.type,direction:this.relationship.getCypherDirection()}).to(t.target,{labels:(0,l.getEntityLabels)(this.target,t.neo4jGraphQLContext)});return[new o.default.OptionalMatch(r).with("*",[o.default.count(t.target),this.countVariable])]}return[]}getPredicate(e){if(this.subqueryPredicate)return this.subqueryPredicate;let t=this.getNestedContext(e);if(this.shouldCreateOptionalMatch()){let e=this.targetNodeFilters.map(e=>e.getPredicate(t)),r=o.default.and(...e);return o.default.and(o.default.neq(this.countVariable,new o.default.Literal(0)),r)}let r=new o.default.Pattern(t.source).related({type:this.relationship.type,direction:this.relationship.getCypherDirection()}).to(t.target,{labels:(0,l.getEntityLabels)(this.target,t.neo4jGraphQLContext)}),n=this.createRelationshipOperation(r,t);if(n)return this.wrapInNotIfNeeded(n)}getSingleRelationshipOperation({pattern:e,queryASTContext:t,innerPredicate:r}){if(!t.hasTarget())throw Error("No parent node found!");let n=new o.default.PatternComprehension(e,new o.default.Literal(1)).where(r);return o.default.single(t.target,n,new o.default.Literal(!0))}createRelationshipOperation(e,t){let r=this.targetNodeFilters.map(e=>e.getPredicate(t)),n=o.default.and(...r);switch(this.operator){case"ALL":{if(!n)return;let t=new o.default.Match(e).where(n),r=new o.default.Match(e).where(o.default.not(n));return o.default.and(new o.default.Exists(t),o.default.not(new o.default.Exists(r)))}case"SINGLE":if(!n)return;return this.getSingleRelationshipOperation({pattern:e,queryASTContext:t,innerPredicate:n});case"NONE":case"SOME":{let r=new o.default.Match(e);if(n){if(!this.relationship.isList)return this.getSingleRelationshipOperation({pattern:e,queryASTContext:t,innerPredicate:n});return new o.default.Exists(r.where(n))}return new o.default.Exists(r)}}}wrapInNotIfNeeded(e){return this.isNot?o.default.not(e):e}}t.RelationshipFilter=p,n([(0,a.Memoize)()],p.prototype,"getNestedContext",null)},57727:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationDurationFilter=void 0;let i=n(r(52462)),o=r(3060);class a extends o.AggregationPropertyFilter{getOperation(e){return this.createDurationOperation({operator:this.logicalOperator,property:e,param:new i.default.Param(this.comparisonValue)})}createDurationOperation({operator:e,property:t,param:r}){let n=i.default.plus(i.default.datetime(),r),o=i.default.plus(i.default.datetime(),t);return this.createBaseOperation({operator:e,property:o,param:n})}}t.AggregationDurationFilter=a},71215:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationFilter=void 0;let i=n(r(52462)),o=r(67661),a=r(31359),s=r(20631),l=r(82864);class u extends l.Filter{constructor(e){super(),this.filters=[],this.relationship=e}addFilters(...e){this.filters.push(...e)}getChildren(){return[...this.filters]}getSubqueries(e){let t;if(!(0,a.hasTarget)(e))throw Error("No parent node found!");this.subqueryReturnVariable=new i.default.Variable;let r=this.relationship.target,n=new i.default.Node,l=[];if(r instanceof o.InterfaceEntityAdapter){let e=r.concreteEntities.map(e=>n.hasLabels(...e.getLabels()));t=i.default.or(...e)}else l=(0,s.getEntityLabels)(r,e.neo4jGraphQLContext);let u=new i.default.Relationship,c=new i.default.Pattern(e.target).related(u,{direction:this.relationship.getCypherDirection(),type:this.relationship.type}).to(n,{labels:l}),p=e.push({target:n,relationship:u}),d=i.default.and(...this.filters.map(e=>e.getPredicate(p))),f=[];return(d&&f.push([d,this.subqueryReturnVariable]),0===f.length)?[]:[t?new i.default.Match(c).where(t).return(...f):new i.default.Match(c).return(...f)]}getPredicate(e){if(this.subqueryReturnVariable)return i.default.eq(this.subqueryReturnVariable,i.default.true)}}t.AggregationFilter=u},3060:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationPropertyFilter=void 0;let i=n(r(52462)),o=r(67661),a=r(31359),s=r(82864);class l extends s.Filter{constructor({attribute:e,relationship:t,logicalOperator:r,comparisonValue:n,aggregationOperator:i,attachedTo:o}){super(),this.attribute=e,this.relationship=t,this.comparisonValue=n,this.logicalOperator=r,this.aggregationOperator=i,this.attachedTo=o??"node"}getChildren(){return[]}getPropertyRefOrAliasesCase(e){let t=this.getAliasesToResolve();return t?this.generateCaseForAliasedFields(e,t):this.getPropertyRef(e)}getPredicate(e){let t=new i.default.Variable,r=this.getPropertyRefOrAliasesCase(e);if(this.aggregationOperator){let e=r;this.attribute.typeHelper.isString()&&(e=i.default.size(r));let t=this.getAggregateOperation(e,this.aggregationOperator);return this.getOperation(t)}{let e;e="EQUAL"!==this.logicalOperator&&this.attribute.typeHelper.isString()?i.default.collect(i.default.size(r)):i.default.collect(r);let n=this.getOperation(t);return i.default.any(t,e,n)}}getOperation(e){return this.createBaseOperation({operator:this.logicalOperator,property:e,param:new i.default.Param(this.comparisonValue)})}getAliasesToResolve(){if(!this.relationship||!(this.relationship.target instanceof o.InterfaceEntityAdapter))return;let e=this.relationship.target.getImplementationToAliasMapWhereAliased(this.attribute);if(e.length)return e}generateCaseForAliasedFields(e,t){if(!(0,a.hasTarget)(e))throw Error("No parent node found!");let r=new i.default.Case;for(let[n,i]of t)r.when(e.target.hasLabels(...n)).then(e.target.property(i));return r.else(e.target.property(this.attribute.databaseName)),r}getPropertyRef(e){if("node"===this.attachedTo){if(!(0,a.hasTarget)(e))throw Error("No parent node found!");return e.target.property(this.attribute.databaseName)}if("relationship"===this.attachedTo&&e.relationship)return e.relationship.property(this.attribute.databaseName);throw Error("Transpilation error, relationship on filter not available")}getAggregateOperation(e,t){switch(t){case"AVERAGE":return i.default.avg(e);case"MIN":case"SHORTEST":return i.default.min(e);case"MAX":case"LONGEST":return i.default.max(e);case"SUM":return i.default.sum(e);default:throw Error(`Invalid operator ${t}`)}}createBaseOperation({operator:e,property:t,param:r}){switch(e){case"LT":return i.default.lt(t,r);case"LTE":return i.default.lte(t,r);case"GT":return i.default.gt(t,r);case"GTE":return i.default.gte(t,r);case"EQUAL":return i.default.eq(t,r);default:throw Error(`Invalid operator ${e}`)}}}t.AggregationPropertyFilter=l},80891:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CountFilter=void 0;let i=n(r(52462)),o=r(82864),a=r(31359);class s extends o.Filter{constructor({isNot:e,operator:t,comparisonValue:r}){super(),this.comparisonValue=r,this.operator=t,this.isNot=e}getPredicate(e){if(!(0,a.hasTarget)(e))throw Error("No parent node found!");return this.createBaseOperation({operator:this.operator,expr:i.default.count(e.target),param:new i.default.Param(this.comparisonValue)})}getChildren(){return[]}print(){return`${super.print()} <${this.isNot?"NOT ":""}${this.operator}>`}createBaseOperation({operator:e,expr:t,param:r}){switch(e){case"LT":return i.default.lt(t,r);case"LTE":return i.default.lte(t,r);case"GT":return i.default.gt(t,r);case"GTE":return i.default.gte(t,r);case"ENDS_WITH":return i.default.endsWith(t,r);case"STARTS_WITH":return i.default.startsWith(t,r);case"MATCHES":return i.default.matches(t,r);case"CONTAINS":return i.default.contains(t,r);case"IN":return i.default.in(t,r);case"INCLUDES":return i.default.in(r,t);case"EQ":return i.default.eq(t,r);default:throw Error(`Invalid operator ${e}`)}}}t.CountFilter=s},26214:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthConnectionFilter=void 0;let i=n(r(52462)),o=r(31731);class a extends o.ConnectionFilter{createRelationshipOperation(e,t){let r=this.innerFilters.map(e=>e.getPredicate(t)),n=this.getLabelPredicate(t),o=i.default.and(...r,n),a=t.neo4jGraphQLContext.neo4jDatabaseInfo?.gte("5.0");if(o)switch(this.operator){case"ALL":{if(!a){let t=new i.default.PatternComprehension(e,new i.default.Literal(1)),r=i.default.size(t.where(i.default.not(o)));return i.default.eq(r,new i.default.Literal(0))}let t=new i.default.Match(e).where(o),r=new i.default.Match(e).where(i.default.not(o));return i.default.and(new i.default.Exists(t),i.default.not(new i.default.Exists(r)))}case"SINGLE":return this.createSingleRelationshipOperation(e,t,o);default:{if(!this.relationship.isList)return this.createSingleRelationshipOperation(e,t,o);if(!a){let t=new i.default.PatternComprehension(e,new i.default.Literal(1)),r=i.default.size(t.where(o));return i.default.gt(r,new i.default.Literal(0))}let r=new i.default.Match(e).where(o);return new i.default.Exists(r)}}}}t.AuthConnectionFilter=a},67413:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthRelationshipFilter=void 0;let i=n(r(52462)),o=r(20631),a=r(93910);class s extends a.RelationshipFilter{getPredicate(e){if(this.subqueryPredicate)return this.subqueryPredicate;let t=this.getNestedContext(e);if(this.shouldCreateOptionalMatch()){let e=this.targetNodeFilters.map(e=>e.getPredicate(t)),r=i.default.and(...e);return i.default.and(i.default.neq(this.countVariable,new i.default.Literal(0)),r)}let r=new i.default.Pattern(t.source).related({type:this.relationship.type,direction:this.relationship.getCypherDirection()}).to(t.target,{labels:(0,o.getEntityLabels)(this.target,e.neo4jGraphQLContext)}),n=this.createRelationshipOperation(r,t);if(n)return this.wrapInNotIfNeeded(n)}createRelationshipOperation(e,t){let r=this.targetNodeFilters.map(e=>e.getPredicate(t)),n=i.default.and(...r);if(!n)return;let o=t.neo4jGraphQLContext.neo4jDatabaseInfo?.gte("5.0");switch(this.operator){case"ALL":{if(!o){let t=new i.default.PatternComprehension(e,new i.default.Literal(1)),r=i.default.size(t.where(i.default.not(n)));return i.default.eq(r,new i.default.Literal(0))}let t=new i.default.Match(e).where(n),r=new i.default.Match(e).where(i.default.not(n));return i.default.and(new i.default.Exists(t),i.default.not(new i.default.Exists(r)))}case"SINGLE":return this.getSingleRelationshipOperation({pattern:e,queryASTContext:t,innerPredicate:n});case"NONE":case"SOME":{if(!this.relationship.isList&&this.relationship.isNullable)return this.getSingleRelationshipOperation({pattern:e,queryASTContext:t,innerPredicate:n});if(!o){let t=new i.default.PatternComprehension(e,new i.default.Literal(1)),r=i.default.size(t.where(n));return i.default.gt(r,new i.default.Literal(0))}let r=new i.default.Match(e).where(n);return new i.default.Exists(r)}}}}t.AuthRelationshipFilter=s},65423:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationFilters=void 0;let i=n(r(52462)),o=r(58388),a=r(82864);class s extends a.Filter{constructor({validationFilters:e,whereFilters:t,conditionForEvaluation:r}){super(),this.validationFilters=[],this.whereFilters=[],this.validationFilters=e,this.whereFilters=t,this.conditionForEvaluation=r}getPredicate(e){let t;let r=i.default.or(...this.validationFilters.map(t=>t.getPredicate(e))),n=i.default.or(...this.whereFilters.map(t=>t.getPredicate(e)));if(r){let e=this.conditionForEvaluation?i.default.and(this.conditionForEvaluation,i.default.not(r)):i.default.not(r);t=i.default.apoc.util.validatePredicate(e,o.AUTH_FORBIDDEN_ERROR)}return i.default.and(n,t)}getSubqueries(e){return[...this.validationFilters,...this.whereFilters].flatMap(t=>t.getSubqueries(e))}getSelection(e){return[...this.validationFilters,...this.whereFilters].flatMap(t=>t.getSelection(e))}getChildren(){return[...this.validationFilters,...this.whereFilters]}}t.AuthorizationFilters=s},29355:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationRuleFilter=void 0;let i=n(r(52462)),o=r(82864);class a extends o.Filter{constructor({requireAuthentication:e,filters:t,isAuthenticatedParam:r}){super(),this.requireAuthentication=e,this.children=t,this.isAuthenticatedParam=r}getPredicate(e){let t;this.requireAuthentication&&(t=i.default.eq(this.isAuthenticatedParam,i.default.true));let r=i.default.and(t,...this.children.map(t=>t.getPredicate(e)));if(r)return r}getSubqueries(e){return this.children.flatMap(t=>t.getSubqueries(e))}getSelection(e){return this.children.flatMap(t=>t.getSelection(e))}getChildren(){return[...this.children]}}t.AuthorizationRuleFilter=a},12677:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JWTFilter=void 0;let i=r(82864),o=n(r(52462)),a=r(4525);class s extends i.Filter{constructor({operator:e,JWTClaim:t,comparisonValue:r,isNot:n}){super(),this.operator=e,this.JWTClaim=t,this.comparisonValue=r,this.isNot=n}getChildren(){return[]}getPredicate(e){let t=(0,a.createComparisonOperation)({operator:this.operator,property:this.JWTClaim,param:new o.default.Param(this.comparisonValue)}),r=this.wrapInNotIfNeeded(t);return o.default.and(o.default.isNotNull(this.JWTClaim),r)}print(){return`${super.print()} <${this.operator} ${this.comparisonValue}>`}wrapInNotIfNeeded(e){return this.isNot?o.default.not(e):e}}t.JWTFilter=s},43509:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DurationFilter=void 0;let i=n(r(52462)),o=r(93383);class a extends o.PropertyFilter{getOperation(e){return"EQ"===this.operator?i.default.eq(e,new i.default.Param(this.comparisonValue)):this.createDurationOperation({operator:this.operator,property:e,param:new i.default.Param(this.comparisonValue)})}createDurationOperation({operator:e,property:t,param:r}){let n=i.default.plus(i.default.datetime(),r),o=i.default.plus(i.default.datetime(),t);return this.createBaseOperation({operator:e,property:o,param:n})}}t.DurationFilter=a},58167:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ParamPropertyFilter=void 0;let i=n(r(52462)),o=r(93383);class a extends o.PropertyFilter{constructor(e){super(e),this.comparisonValue=e.comparisonValue}getPredicate(e){let t=super.getPredicate(e);return i.default.and(i.default.isNotNull(this.comparisonValue),t)}getOperation(e){let t=this.comparisonValue;return this.createBaseOperation({operator:this.operator,property:e,param:t})}}t.ParamPropertyFilter=a},75038:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PointFilter=void 0;let i=n(r(52462)),o=r(93383);class a extends o.PropertyFilter{getOperation(e){return this.createPointOperation({operator:this.operator||"EQ",property:e,param:new i.default.Param(this.comparisonValue),attribute:this.attribute})}createPointOperation({operator:e,property:t,param:r,attribute:n}){let o=this.createPointDistanceExpression(t,r),a=r.property("distance");switch(e){case"LT":return i.default.lt(o,a);case"LTE":return i.default.lte(o,a);case"GT":return i.default.gt(o,a);case"GTE":return i.default.gte(o,a);case"DISTANCE":return i.default.eq(o,a);case"EQ":if(n.typeHelper.isList()){let e=this.createPointListComprehension(r);return i.default.eq(t,e)}return i.default.eq(t,i.default.point(r));case"IN":{let e=this.createPointListComprehension(r);return i.default.in(t,e)}case"INCLUDES":return i.default.in(i.default.point(r),t);default:throw Error(`Invalid operator ${e}`)}}createPointListComprehension(e){let t=new i.default.Variable,r=i.default.point(t);return new i.default.ListComprehension(t,e).map(r)}createPointDistanceExpression(e,t){let r=t.property("point");return i.default.point.distance(e,i.default.point(r))}}t.PointFilter=a},93383:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyFilter=void 0;let i=n(r(52462)),o=r(4525),a=r(82864),s=r(31359),l=r(67661);class u extends a.Filter{constructor({attribute:e,relationship:t,comparisonValue:r,operator:n,isNot:i,attachedTo:o}){super(),this.attribute=e,this.relationship=t,this.comparisonValue=r,this.operator=n,this.isNot=i,this.attachedTo=o??"node"}getChildren(){return[]}print(){return`${super.print()} [${this.attribute.name}] <${this.isNot?"NOT ":""}${this.operator}>`}getPredicate(e){let t=this.getPropertyRefOrAliasesCase(e);if(null===this.comparisonValue)return this.getNullPredicate(t);let r=this.getOperation(t);return this.wrapInNotIfNeeded(r)}getPropertyRefOrAliasesCase(e){let t=this.getAliasesToResolve();return t?this.generateCaseForAliasedFields(e,t):this.getPropertyRef(e)}getAliasesToResolve(){if(!this.relationship||!(this.relationship.target instanceof l.InterfaceEntityAdapter))return;let e=this.relationship.target.getImplementationToAliasMapWhereAliased(this.attribute);if(e.length)return e}generateCaseForAliasedFields(e,t){if(!(0,s.hasTarget)(e))throw Error("No parent node found!");let r=new i.default.Case;for(let[n,i]of t)r.when(e.target.hasLabels(...n)).then(e.target.property(i));return r.else(e.target.property(this.attribute.databaseName)),r}getPropertyRef(e){if("node"===this.attachedTo){if(!(0,s.hasTarget)(e))throw Error("No parent node found!");return e.target.property(this.attribute.databaseName)}if("relationship"===this.attachedTo&&e.relationship)return e.relationship.property(this.attribute.databaseName);throw Error("Transpilation error")}getOperation(e){return this.createBaseOperation({operator:this.operator,property:e,param:new i.default.Param(this.comparisonValue)})}createBaseOperation({operator:e,property:t,param:r}){let n=this.coalesceValueIfNeeded(t);return(0,o.createComparisonOperation)({operator:e,property:n,param:r})}coalesceValueIfNeeded(e){if(this.attribute.annotations.coalesce){let t=this.attribute.annotations.coalesce.value,r=new i.default.Literal(t);return i.default.coalesce(e,r)}return e}getNullPredicate(e){return this.isNot?i.default.isNotNull(e):i.default.isNull(e)}wrapInNotIfNeeded(e){return this.isNot?i.default.not(e):e}}t.PropertyFilter=u},67620:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreFilter=void 0;let i=n(r(52462)),o=r(82864);class a extends o.Filter{constructor({scoreVariable:e,min:t,max:r}){super(),this.scoreVariable=e,this.min=t,this.max=r}getChildren(){return[]}getPredicate(e){let t=[];if(this.max||0===this.max){let e=i.default.lte(this.scoreVariable,new i.default.Param(this.max));t.push(e)}if(this.min||0===this.min){let e=i.default.gte(this.scoreVariable,new i.default.Param(this.min));t.push(e)}return i.default.and(...t)}}t.ScoreFilter=a},26609:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TypenameFilter=void 0;let i=n(r(52462)),o=r(82864),a=r(31359);class s extends o.Filter{constructor(e){super(),this.acceptedEntities=e}getChildren(){return[]}print(){let e=this.acceptedEntities.map(e=>e.name);return`${super.print()} [${e.join(", ")}]`}getPredicate(e){if(!(0,a.hasTarget)(e))throw Error("No parent node found!");let t=this.acceptedEntities.map(t=>e.target.hasLabels(t.name));return i.default.or(...t)}}t.TypenameFilter=s},87020:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IdField=void 0;let i=n(r(52462)),o=r(82883);class a extends o.InputField{constructor(e,t,r="node"){super(e,r),this.attribute=t}getChildren(){return[]}print(){return`${super.print()} <${this.name}>`}getSetParams(e){return[[this.getTarget(e).property(this.attribute.databaseName),i.default.randomUUID()]]}getSetClause(){return[]}}t.IdField=a},82883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputField=void 0;let n=r(15794);class i extends n.QueryASTNode{constructor(e,t="node"){super(),this.name=e,this.attachedTo=t}print(){return`${super.print()} <${this.name}>`}getTarget(e){let t="node"===this.attachedTo?e.target:e.relationship;if(!t)throw Error("No target found");return t}}t.InputField=i},89369:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MutationOperationField=void 0;let n=r(82883);class i extends n.InputField{constructor(e,t){super(e),this.mutationOperation=t}getChildren(){return[this.mutationOperation]}print(){return`${super.print()} <${this.name}>`}getSetParams(){return[]}getSubqueries(e){let{clauses:t}=this.mutationOperation.transpile(e);return t}}t.MutationOperationField=i},70597:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyInputField=void 0;let i=n(r(52462)),o=r(82883);class a extends o.InputField{constructor({attribute:e,attachedTo:t}){super(e.name,t),this.attribute=e}getChildren(){return[]}print(){return`${super.print()} <${this.name}>`}getSetParams(e,t){let r=this.getTarget(e);if(!t)throw Error("Transpile Error: No input variable found");let n=this.getVariablePath(e,t);return[[r.property(this.attribute.databaseName),this.coerceReference(n)]]}getVariablePath(e,t){let r="node"===this.attachedTo?"node":"edge";return e.relationship?t.property(r).property(this.attribute.name):t.property(this.attribute.name)}coerceReference(e){if(this.attribute.typeHelper.isSpatial()){if(!this.attribute.typeHelper.isList())return i.default.point(e);let t=new i.default.Variable,r=i.default.point(t);return new i.default.ListComprehension(t,e).map(r)}return e}getSetClause(){return[]}}t.PropertyInputField=a},23266:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TimestampField=void 0;let i=n(r(52462)),o=r(14998),a=r(82883);class s extends a.InputField{constructor(e,t,r="node"){super(e,r),this.attribute=t}getChildren(){return[]}print(){return`${super.print()} <${this.name}>`}getSetParams(e){let t=this.getTarget(e),r=this.GetFunctionForTemporalType(this.attribute.type.name);return[[t.property(this.attribute.databaseName),r]]}getSetClause(){return[]}GetFunctionForTemporalType(e){switch(e){case o.Neo4jGraphQLTemporalType.DateTime:return i.default.datetime();case o.Neo4jGraphQLTemporalType.LocalDateTime:return i.default.localdatetime();case o.Neo4jGraphQLTemporalType.Time:return i.default.time();case o.Neo4jGraphQLTemporalType.LocalTime:return i.default.localtime();default:throw Error(`Transpile error: Expected type to one of:
                [ 
                    ${o.Neo4jGraphQLTemporalType.DateTime},
                    ${o.Neo4jGraphQLTemporalType.LocalDateTime}, 
                    ${o.Neo4jGraphQLTemporalType.Time},
                    ${o.Neo4jGraphQLTemporalType.LocalTime}
                ]
                but found ${e} instead`)}}}t.TimestampField=s},81069:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationOperation=void 0;let i=n(r(52462)),o=r(43232),a=r(14178),s=r(1808),l=r(16397),u=r(86726);class c extends u.Operation{constructor({entity:e,directed:t=!0,selection:r}){super(),this.fields=[],this.nodeFields=[],this.edgeFields=[],this.authFilters=[],this.aggregationProjectionMap=new i.default.Map,this.filters=[],this.sortFields=[],this.entity=e,this.directed=t,this.selection=r}setFields(e){this.fields=e}addSort(...e){this.sortFields.push(...e)}addPagination(e){this.pagination=e}addFilters(...e){this.filters.push(...e)}addAuthFilters(...e){this.authFilters.push(...e)}getChildren(){return(0,a.filterTruthy)([...this.fields,...this.nodeFields,...this.edgeFields,...this.filters,...this.sortFields,...this.authFilters,this.selection,this.pagination])}setNodeFields(e){this.nodeFields=e}setEdgeFields(e){this.edgeFields=e}transpile(e){if(!e.hasTarget())throw Error("No parent node found!");let t=this.transpileAggregation(e);return this.entity instanceof o.RelationshipAdapter?{clauses:t,projectionExpr:this.aggregationProjectionMap}:{clauses:t.flatMap(e=>new i.default.Call(e)),projectionExpr:this.aggregationProjectionMap}}getPredicates(e){let t=this.getAuthFilterPredicate(e);return i.default.and(...this.filters.map(t=>t.getPredicate(e)),...t)}getAuthFilterPredicate(e){return(0,a.filterTruthy)(this.authFilters.map(t=>t.getPredicate(e)))}addSortToClause(e,t,r){let n=this.sortFields.flatMap(r=>r.getSortFields(e,t)),i=this.pagination?this.pagination.getPagination():void 0;r.orderBy(...n),i?.skip&&r.skip(i.skip),i?.limit&&r.limit(i.limit)}getFieldProjectionClause(e,t,r){return r.getAggregationProjection(e,t)}getPattern(e){if(!e.target)throw Error("Not Target");if(!e.relationship)return new i.default.Pattern(e.target);if(!e.direction||!e.source)throw Error("No valid relationship");return new i.default.Pattern(e.source).related(e.relationship,{direction:e.direction}).to(e.target)}createContext(e){if(this.entity instanceof o.RelationshipAdapter){let t=new i.default.Relationship,r=new i.default.Node,n=this.entity.getCypherDirection(this.directed);return e.push({relationship:t,target:r,direction:n})}{let t=new i.default.Node;return new l.QueryASTContext({target:t,neo4jGraphQLContext:e.neo4jGraphQLContext})}}transpileAggregation(e){let t=this.createContext(e),r=this.getPattern(t),n=this.fields.map(t=>{let n=new i.default.Variable;return this.aggregationProjectionMap.set(t.getProjectionField(n)),this.createSubquery(t,r,n,e)}),o=new i.default.Map,a=this.nodeFields.map(t=>{let n=new i.default.Variable;return o.set(t.getProjectionField(n)),this.createSubquery(t,r,n,e)});o.size>0&&this.aggregationProjectionMap.set("node",o);let s=[];if(t.relationship){let t=new i.default.Map;s=this.edgeFields.map(n=>{let o=new i.default.Variable;return t.set(n.getProjectionField(o)),this.createSubquery(n,r,o,e,"edge")}),t.size>0&&this.aggregationProjectionMap.set("edge",t)}return[...n,...a,...s]}createSubquery(e,t,r,n,o="node"){let a,l;let{selection:u,nestedContext:c}=this.selection.apply(n),p=(0,s.wrapSubqueriesInCypherCalls)(c,this.getChildren(),[c.target]),d="edge"===o?c.relationship:c.target;if(!d)throw Error("Edge not define in aggregations");let f=this.getPredicates(c),h=this.getChildren().flatMap(e=>e.getSelection(c));(h.length>0||p.length>0)&&(l=new i.default.With("*")),f&&(l?l.where(f):u.where(f));let y=this.getFieldProjectionClause(d,r,e);return(this.sortFields.length>0||this.pagination)&&(a=new i.default.With("*"),this.addSortToClause(c,d,a)),i.default.concat(u,...h,...p,l,a,y)}}t.AggregationOperation=c},86288:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionReadOperation=void 0;let i=n(r(52462)),o=r(14178),a=r(1808),s=r(59054),l=r(29999),u=r(85050),c=r(86726);class p extends c.Operation{constructor({relationship:e,target:t,selection:r}){super(),this.nodeFields=[],this.edgeFields=[],this.filters=[],this.sortFields=[],this.authFilters=[],this.relationship=e,this.target=t,this.selection=r}setNodeFields(e){this.nodeFields=e}addFilters(...e){this.filters.push(...e)}setEdgeFields(e){this.edgeFields=e}addAuthFilters(...e){this.authFilters.push(...e)}addSort(e){this.sortFields.push(e)}addPagination(e){this.pagination=e}getChildren(){let e=this.sortFields.flatMap(e=>[...e.edge,...e.node]);return(0,o.filterTruthy)([this.selection,...this.nodeFields,...this.edgeFields,...this.filters,...this.authFilters,this.pagination,...e])}getWithCollectEdgesAndTotalCount(e,t,r){let n=new i.default.Map({node:e.target});return e.relationship&&n.set("relationship",e.relationship),new i.default.With([i.default.collect(n),t]).with(t,[i.default.size(t),r])}transpile(e){let t;if(!e.target)throw Error();let{selection:r,nestedContext:n}=this.selection.apply(e),o=this.getChildren().flatMap(e=>e.getSelection(n));o.length>0&&(o=[r,...o],r=new i.default.With("*"));let a=[...this.getAuthFilterSubqueries(n).map(e=>new i.default.Call(e).importWith(n.target)),...this.getFilterSubqueries(n).map(e=>new i.default.Call(e).importWith(n.target))],s=new i.default.NamedVariable("edges"),l=new i.default.NamedVariable("totalCount"),u=new i.default.Variable,c=this.createUnwindAndProjectionSubquery(n,s,u);a.length>0?(t=new i.default.With("*"),this.addFiltersToClause(t,n)):this.addFiltersToClause(r,n);let p=this.getWithCollectEdgesAndTotalCount(n,s,l),d=new i.default.Return([new i.default.Map({edges:u,totalCount:l}),e.returnVariable]);return{clauses:[i.default.concat(...o,r,...a,t,p,c,d)],projectionExpr:e.returnVariable}}getAuthFilterSubqueries(e){return this.authFilters.flatMap(t=>t.getSubqueries(e))}getFilterSubqueries(e){return this.filters.flatMap(t=>t.getSubqueries(e))}getAuthFilterPredicate(e){return(0,o.filterTruthy)(this.authFilters.map(t=>t.getPredicate(e)))}getUnwindClause(e,t,r){return e.relationship?new i.default.Unwind([r,t]).with([t.property("node"),e.target],[t.property("relationship"),e.relationship]):new i.default.Unwind([r,t]).with([t.property("node"),e.target])}createUnwindAndProjectionSubquery(e,t,r){let n=new i.default.NamedVariable("edge"),{prePaginationSubqueries:o,postPaginationSubqueries:a}=this.getPreAndPostSubqueries(e),s=this.getUnwindClause(e,n,t),l=this.createProjectionMapForEdge(e),u=this.generateSortAndPaginationClause(e);return new i.default.Call(i.default.concat(s,...o,u,...a,new i.default.Return([i.default.collect(l),r]))).importWith(t)}createProjectionMapForNode(e){let t=this.generateProjectionMapForFields(this.nodeFields,e.target);return 0===t.size&&t.set({__id:i.default.id(e.target)}),t.set({__resolveType:new i.default.Literal(this.target.name)}),t}addProjectionMapForRelationshipProperties(e,t){if(e.relationship){let r=this.generateProjectionMapForFields(this.edgeFields,e.relationship);r.size&&(this.relationship?.propertiesTypeName&&r.set("__resolveType",new i.default.Literal(this.relationship.propertiesTypeName)),t.set("properties",r))}}createProjectionMapForEdge(e){let t=new i.default.Map;return this.addProjectionMapForRelationshipProperties(e,t),t.set("node",this.createProjectionMapForNode(e)),t}generateProjectionMapForFields(e,t){let r=new i.default.Map;return e.map(e=>e.getProjectionField(t)).forEach(e=>{"string"==typeof e?r.set(e,t.property(e)):r.set(e)}),r}generateSortAndPaginationClause(e){if(!(this.pagination||this.sortFields.length>0))return;let t=new i.default.With("*");return this.addPaginationSubclauses(t),this.addSortSubclause(t,e),t}addPaginationSubclauses(e){let t=this.pagination&&this.pagination.getPagination();t?.limit&&e.limit(t.limit),t?.skip&&e.skip(t.skip)}addSortSubclause(e,t){if(this.sortFields.length>0){let r=this.getSortFields({context:t,nodeVar:t.target,edgeVar:t.relationship});e.orderBy(...r)}}addFiltersToClause(e,t){let r=this.filters.map(e=>e.getPredicate(t)),n=this.getAuthFilterPredicate(t),o=i.default.and(...r,...n);o&&e.where(o)}getSortFields({context:e,nodeVar:t,edgeVar:r}){return this.sortFields.flatMap(({node:n,edge:i})=>{let o=n.flatMap(r=>r.getSortFields(e,t,!0));return r?[...o,...i.flatMap(t=>t.getSortFields(e,r,!0))]:o})}getPreAndPostSubqueries(e){if(!e.hasTarget())throw Error("No parent node found!");let t=this.sortFields.flatMap(e=>e.node),r=t.reduce((e,t)=>(t instanceof l.CypherPropertySort&&(e[t.getFieldName()]=!0),e),{}),n=this.nodeFields.reduce((e,t)=>(t instanceof s.OperationField&&t.isCypherField()&&t.operation instanceof u.CypherScalarOperation&&r[t.operation.cypherAttributeField.name]?e.Pre.push(t):e.Post.push(t),e),{Pre:[],Post:[]}),i=(0,a.wrapSubqueriesInCypherCalls)(e,n.Pre,[e.target]),o=(0,a.wrapSubqueriesInCypherCalls)(e,n.Post,[e.target]);return{prePaginationSubqueries:[...(0,a.wrapSubqueriesInCypherCalls)(e,t,[e.target]),...i],postPaginationSubqueries:o}}}t.ConnectionReadOperation=p},81360:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateOperation=void 0;let i=n(r(52462)),o=r(14178),a=r(86726);class s extends a.MutationOperation{constructor({target:e}){super(),this.projectionOperations=[],this.target=e}getChildren(){return(0,o.filterTruthy)(this.projectionOperations)}addProjectionOperations(e){this.projectionOperations.push(...e)}transpile(e){if(!e.target)throw Error("No parent node found!");e.env.topLevelOperationName="CREATE";let t=this.getProjectionClause(e);return{projectionExpr:e.returnVariable,clauses:t}}getProjectionClause(e){return this.projectionOperations.map(t=>i.default.concat(...t.transpile(e).clauses))}}t.CreateOperation=s},96206:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CypherOperation=void 0;let i=n(r(52462)),o=r(73445);class a extends o.ReadOperation{constructor({cypherAttributeField:e,target:t,relationship:r,selection:n}){super({target:t,relationship:r,selection:n}),this.cypherAttributeField=e}transpile(e){let{selection:t,nestedContext:r}=this.selection.apply(e),n=i.default.concat(...this.getFieldsSubqueries(r),...this.getCypherFieldsSubqueries(r)),o=this.getAuthFilterSubqueries(r).map(e=>new i.default.Call(e).importWith(r.target)),a=this.getAuthFilterPredicate(r),s=a.length?[...o,new i.default.With("*").where(i.default.and(...a))]:[],l=this.getReturnClause(r,e.returnVariable),u=this.getChildren().flatMap(e=>e.getSelection(r));return{clauses:[i.default.concat(t,...u,n,...s,l)],projectionExpr:e.returnVariable}}getReturnClause(e,t){let r;let n=this.getProjectionMap(e);r=e.shouldCollect?i.default.collect(e.target):e.target,e.shouldCollect&&!this.cypherAttributeField.typeHelper.isList()&&(r=i.default.head(r));let o=new i.default.With([n,e.target]);return(this.sortFields.length>0||this.pagination)&&this.addSortToClause(e,e.target,o),o.return([r,t])}}t.CypherOperation=a},85050:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CypherScalarOperation=void 0;let i=n(r(52462)),o=r(86726);class a extends o.Operation{constructor(e,t,r){super(),this.selection=e,this.cypherAttributeField=t,this.isNested=r}getChildren(){return[this.selection]}transpile(e){let t;let{selection:r,nestedContext:n}=this.selection.apply(e);t=this.isNested&&this.cypherAttributeField.typeHelper.isList()?[i.default.collect(n.returnVariable),e.returnVariable]:[n.returnVariable,e.returnVariable];let o=new i.default.Return(t);return e.getTargetScope().set(this.cypherAttributeField.name,e.returnVariable),{clauses:[i.default.concat(r,o)],projectionExpr:e.returnVariable}}}t.CypherScalarOperation=a},24670:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteOperation=void 0;let i=n(r(52462)),o=r(14178),a=r(1808),s=r(86726);class l extends s.MutationOperation{constructor({target:e,selection:t,nestedOperations:r=[],filters:n=[],authFilters:i=[]}){super(),this.target=e,this.selection=t,this.filters=n,this.authFilters=i,this.nestedOperations=r}getChildren(){return[this.selection,...this.filters,...this.authFilters,...this.nestedOperations]}transpile(e){if(!e.hasTarget())throw Error("No parent node found!");let{selection:t,nestedContext:r}=this.selection.apply(e);return r.relationship?this.transpileNested(t,r):this.transpileTopLevel(t,r)}transpileTopLevel(e,t){this.validateSelection(e);let r=(0,a.wrapSubqueriesInCypherCalls)(t,this.filters,[t.target]),n=this.getAuthFilterSubqueries(t),o=this.getPredicate(t),s=this.getExtraSelections(t),l=this.getNestedDeleteSubQueries(t),u=[e,...s,...r,...n];return u=this.appendFilters(u,o),l.length&&u.push(new i.default.With("*"),...l),u=this.appendDeleteClause(u,t),{clauses:[i.default.concat(...u)],projectionExpr:t.target}}transpileNested(e,t){if(this.validateSelection(e),!t.relationship)throw Error("Transpile error: No relationship found!");let r=(0,a.wrapSubqueriesInCypherCalls)(t,this.filters,[t.target]),n=this.getAuthFilterSubqueries(t),o=this.getPredicate(t),s=this.getExtraSelections(t),l=i.default.collect(t.target).distinct(),u=new i.default.Variable,c=new i.default.With(t.relationship,[l,u]),p=new i.default.Variable,d=new i.default.Unwind([u,p]).detachDelete(p),f=new i.default.Call(d).importWith(u),h=this.getNestedDeleteSubQueries(t),y=this.appendFilters([e,...s,...r,...n],o);return h.length&&y.push(new i.default.With("*"),...h),y.push(c,f),{clauses:[i.default.concat(...y)],projectionExpr:i.default.Null}}appendDeleteClause(e,t){let r=this.getLastClause(e);if(r instanceof i.default.Match||r instanceof i.default.OptionalMatch||r instanceof i.default.With)return r.detachDelete(t.target),e;let n=new i.default.With("*");return n.detachDelete(t.target),e.push(n),e}getLastClause(e){let t=e[e.length-1];if(!t)throw Error("Transpile error");return t}appendFilters(e,t){if(!t)return e;let r=this.getLastClause(e);if(r instanceof i.default.Match||r instanceof i.default.OptionalMatch||r instanceof i.default.With)return r.where(t),e;let n=new i.default.With("*");return n.where(t),e.push(n),e}getNestedDeleteSubQueries(e){let t=[];for(let r of this.nestedOperations){let{clauses:n}=r.transpile(e);t.push(...n.map(e=>new i.default.Call(e).importWith("*")))}return t}validateSelection(e){if(!(e instanceof i.default.Match||e instanceof i.default.With))throw Error("Cypher Yield statement is not a valid selection for Delete Operation")}getPredicate(e){let t=this.getAuthFilterPredicate(e);return i.default.and(...this.filters.map(t=>t.getPredicate(e)),...t)}getAuthFilterSubqueries(e){return this.authFilters.flatMap(t=>t.getSubqueries(e))}getAuthFilterPredicate(e){return(0,o.filterTruthy)(this.authFilters.map(t=>t.getPredicate(e)))}getExtraSelections(e){return this.getChildren().flatMap(t=>t.getSelection(e))}}t.DeleteOperation=l},95097:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FulltextOperation=void 0;let i=n(r(52462)),o=r(14178),a=r(73445);class s extends a.ReadOperation{constructor({target:e,relationship:t,scoreField:r,selection:n}){super({target:e,relationship:t,selection:n}),this.scoreField=r}transpile(e){let{clauses:t,projectionExpr:r}=super.transpile(e),n=[];if(this.scoreField){let e=this.scoreField.getProjectionField();n.push([e.score,new i.default.NamedVariable("score")])}return{clauses:t,projectionExpr:r,extraProjectionColumns:n}}getChildren(){return(0,o.filterTruthy)([...super.getChildren(),this.scoreField])}getReturnStatement(e,t){let r=super.getReturnStatement(e,t);if(this.scoreField){let e=this.scoreField.getProjectionField();r.addColumns([e.score,"score"])}return r}}t.FulltextOperation=s},73445:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReadOperation=void 0;let i=n(r(52462)),o=r(14178),a=r(31359),s=r(1808),l=r(29999),u=r(86726);class c extends u.Operation{constructor({target:e,relationship:t,selection:r}){super(),this.fields=[],this.filters=[],this.authFilters=[],this.sortFields=[],this.target=e,this.relationship=t,this.selection=r}setFields(e){this.fields=e}addSort(...e){this.sortFields.push(...e)}addPagination(e){this.pagination=e}addFilters(...e){this.filters.push(...e)}addAuthFilters(...e){this.authFilters.push(...e)}getAuthFilterSubqueries(e){return this.authFilters.flatMap(t=>t.getSubqueries(e))}getAuthFilterPredicate(e){return(0,o.filterTruthy)(this.authFilters.map(t=>t.getPredicate(e)))}getProjectionClause(e,t,r){if(!(0,a.hasTarget)(e))throw Error("No parent node found!");let n=this.getProjectionMap(e),o=i.default.collect(e.target);r||(o=i.default.head(o));let s=new i.default.With([n,e.target]);return(this.sortFields.length>0||this.pagination)&&this.addSortToClause(e,e.target,s),s.return([o,t])}getPredicates(e){return i.default.and(...this.filters.map(t=>t.getPredicate(e)))}transpile(e){let t,r,n,o,a,{selection:l,nestedContext:u}=this.selection.apply(e),c=(this.relationship?e:u).env.topLevelOperationName,p="CREATE"===c,d="UPDATE"===c;if(p||d){if(!e.hasTarget())throw Error("Invalid target for create operation");this.relationship||(u=e)}let f=(0,s.wrapSubqueriesInCypherCalls)(u,this.filters,[u.target]),h=this.getPredicates(u),y=this.getFieldsSubqueries(u),m=this.getCypherFieldsSubqueries(u),v=(0,s.wrapSubqueriesInCypherCalls)(u,this.sortFields,[u.target]),g=this.getAuthFilterSubqueries(u).map(e=>new i.default.Call(e).importWith(u.target)),b=this.getAuthFilterPredicate(u),_=this.relationship?this.getProjectionClause(u,e.returnVariable,this.relationship.isList):this.getReturnStatement(p||d?e:u,u.returnVariable),T=g.length||b.length;if((f.length||T)&&(r=i.default.concat(...f),(!p||g.length)&&(t=new i.default.With("*"))),this.relationship)o=i.default.concat(...y,...m,...v);else{let e;o=i.default.concat(...y),(this.sortFields.length||this.pagination)&&(e=new i.default.With("*"),this.addSortToClause(u,u.target,e));let t=i.default.concat(...v,e);n=this.hasCypherSort()?i.default.concat(...m,t):i.default.concat(t,...m)}if(p&&!this.relationship)a=i.default.concat(r,t,n,o,_);else{let e;let s=this.getChildren().flatMap(e=>e.getSelection(u)),c=i.default.and(h,...b);c&&(t?t.where(c):s.length?e=new i.default.With("*").where(c):l.where(c));let p=[];(!d||this.relationship)&&p.push(l),p.push(...s,e),a=i.default.concat(...p,...g,r,t,n,o,_)}return{clauses:[a],projectionExpr:e.returnVariable}}getReturnStatement(e,t){let r=this.getProjectionMap(e);if(e.shouldCollect){let n=i.default.collect(r);return e.shouldDistinct&&n.distinct(),new i.default.Return([n,t])}return new i.default.Return([r,t])}hasCypherSort(){return this.sortFields.some(e=>e instanceof l.CypherPropertySort)}getChildren(){return(0,o.filterTruthy)([this.selection,...this.filters,...this.authFilters,...this.fields,this.pagination,...this.sortFields])}getFieldsSubqueries(e){let t=this.fields.filter(e=>!e.isCypherField());if(!e.hasTarget())throw Error("No parent node found!");return(0,s.wrapSubqueriesInCypherCalls)(e,t,[e.target])}getCypherFieldsSubqueries(e){if(!e.hasTarget())throw Error("No parent node found!");return(0,s.wrapSubqueriesInCypherCalls)(e,this.getCypherFields(),[e.target])}getCypherFields(){return this.fields.filter(e=>e.isCypherField())}getProjectionMap(e){if(!e.hasTarget())throw Error("No parent node found!");let t=Array.from(new Set([...this.fields.map(t=>t.getProjectionField(e.target)),...this.sortFields.map(t=>t.getProjectionField(e))])),r=[],n={};for(let e of t)"string"==typeof e?r.push(e):n={...n,...e};return new i.default.MapProjection(e.target,r,n)}addSortToClause(e,t,r){let n=!!e.source,i=this.sortFields.flatMap(r=>r.getSortFields(e,t,!n)),o=this.pagination?this.pagination.getPagination():void 0;r.orderBy(...i),o?.skip&&r.skip(o.skip),o?.limit&&r.limit(o.limit)}}t.ReadOperation=c},71148:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnwindCreateOperation=void 0;let i=n(r(52462)),o=r(43232),a=r(87935),s=r(20701),l=r(20631),u=r(93457),c=r(16397),p=r(70597),d=r(86726);class f extends d.MutationOperation{constructor({target:e,argumentToUnwind:t}){super(),this.projectionOperations=[],this.authFilters=[],this.target=e,this.inputFields=new Map,this.argumentToUnwind=t,this.unwindVariable=new i.default.Variable,this.isNested=e instanceof o.RelationshipAdapter}getChildren(){return[...this.inputFields.values(),...this.authFilters,...this.projectionOperations]}addAuthFilters(...e){this.authFilters.push(...e)}getField(e,t){return this.inputFields.get(`${t}_${e}`)}addField(e,t){this.inputFields.has(e.name)||this.inputFields.set(`${t}_${e.name}`,e)}getUnwindVariable(){return this.unwindVariable}addProjectionOperations(e){this.projectionOperations.push(...e)}transpile(e){let t;let r=this.getNestedContext(e);if(r.env.topLevelOperationName="CREATE",!r.hasTarget())throw Error("No parent node found!");let n=this.getTarget();(0,a.checkEntityAuthentication)({context:r.neo4jGraphQLContext,entity:n.entity,targetOperations:["CREATE"]}),this.inputFields.forEach(e=>{"node"===e.attachedTo&&e instanceof p.PropertyInputField&&(0,a.checkEntityAuthentication)({context:r.neo4jGraphQLContext,entity:n.entity,targetOperations:["CREATE"],field:e.name})});let o=new i.default.Unwind([this.argumentToUnwind,this.unwindVariable]),u=new i.default.Create(new i.default.Pattern(r.target,{labels:(0,l.getEntityLabels)(n,e.neo4jGraphQLContext)})),d=[],f=this.getMergeClause(r);for(let e of this.inputFields.values())"relationship"===e.attachedTo&&f?f.set(...e.getSetParams(r,this.unwindVariable)):"node"===e.attachedTo&&(u.set(...e.getSetParams(r,this.unwindVariable)),d.push(...e.getSubqueries(r)));let h=d.flatMap(e=>[new i.default.With(r.target,this.unwindVariable),new i.default.Call(e).importWith(r.target,this.unwindVariable)]),y=this.getAuthorizationClauses(r),m=(0,s.createRelationshipValidationClauses)({entity:n,context:r.neo4jGraphQLContext,varName:r.target}),v=i.default.concat(u,f,...h,...y,...m.length?[new i.default.With(r.target),...m]:[]);t=this.isNested?i.default.concat(v,new i.default.Return([i.default.collect(i.default.Null),new i.default.Variable])):new i.default.Call(i.default.concat(v,new i.default.Return(r.target))).importWith(this.unwindVariable);let g=new c.QueryASTContext({...r,target:r.target,returnVariable:new i.default.NamedVariable("data"),shouldCollect:!0}),b=i.default.concat(o,t,...this.getProjectionClause(g));return{projectionExpr:r.returnVariable,clauses:[b]}}getMergeClause(e){if(this.isNested){if(!e.source||!e.relationship)throw Error("Transpile error: No source or relationship found!");if(!(this.target instanceof o.RelationshipAdapter))throw Error("Transpile error: Invalid target");return new i.default.Merge(new i.default.Pattern(e.source).related(e.relationship,{type:this.target.type,direction:this.target.cypherDirectionFromRelDirection()}).to(e.target))}}getTarget(){if(this.target instanceof o.RelationshipAdapter){let e=this.target.target;return(0,u.assertIsConcreteEntity)(e),e}return this.target}getNestedContext(e){if(this.target instanceof o.RelationshipAdapter){let t=new i.default.Node,r=new i.default.Relationship;return e.push({target:t,relationship:r})}return e}getAuthorizationClauses(e){let{selections:t,subqueries:r,predicates:n}=this.getAuthFilters(e),o=t[t.length-1];return o?(o.where(i.default.and(...n)),[...r,new i.default.With("*"),...t]):n.length?[...r,new i.default.With("*").where(i.default.and(...n))]:[...r]}getAuthFilters(e){let t=[],r=[],n=[];for(let i of this.authFilters){let o=i.getSelection(e),a=i.getSubqueries(e),s=i.getPredicate(e);o&&t.push(...o),a&&r.push(...a),s&&n.push(s)}return{selections:t,subqueries:r,predicates:n}}getProjectionClause(e){if(0===this.projectionOperations.length&&!this.isNested){let e=new i.default.Literal("Query cannot conclude with CALL");return[new i.default.Return(e)]}return this.projectionOperations.map(t=>i.default.concat(...t.transpile(e).clauses))}}t.UnwindCreateOperation=f},27075:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateOperation=void 0;let i=n(r(52462)),o=r(14178),a=r(86726);class s extends a.Operation{constructor({target:e}){super(),this.projectionOperations=[],this.target=e}getChildren(){return(0,o.filterTruthy)(this.projectionOperations)}addProjectionOperations(e){this.projectionOperations.push(...e)}transpile(e){if(!e.target)throw Error("No parent node found!");e.env.topLevelOperationName="UPDATE";let t=this.getProjectionClause(e);return{projectionExpr:e.returnVariable,clauses:t}}getProjectionClause(e){return this.projectionOperations.map(t=>i.default.concat(...t.transpile(e).clauses))}}t.UpdateOperation=s},8453:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VectorOperation=void 0;let i=n(r(52462)),o=r(14178),a=r(86288);class s extends a.ConnectionReadOperation{constructor({target:e,relationship:t,scoreField:r,selection:n}){super({target:e,relationship:t,selection:n}),this.scoreField=r}getChildren(){return(0,o.filterTruthy)([...super.getChildren(),this.scoreField])}createProjectionMapForEdge(e){let t=new i.default.Map;return t.set("node",this.createProjectionMapForNode(e)),this.scoreField&&e.neo4jGraphQLContext.vector&&t.set("score",e.neo4jGraphQLContext.vector.scoreVariable),t}getUnwindClause(e,t,r){return this.scoreField&&e.neo4jGraphQLContext.vector?new i.default.Unwind([r,t]).with([t.property("node"),e.target],[t.property("score"),e.neo4jGraphQLContext.vector.scoreVariable]):super.getUnwindClause(e,t,r)}getWithCollectEdgesAndTotalCount(e,t,r){if(!this.scoreField||!e.neo4jGraphQLContext.vector)return super.getWithCollectEdgesAndTotalCount(e,t,r);{let n=new i.default.Map({node:e.target});for(let[t,r]of(e.relationship&&n.set("relationship",e.relationship),Object.entries(this.scoreField.getProjectionField())))n.set(t,r);return new i.default.With([i.default.collect(n),t]).with(t,[i.default.size(t),r])}}}t.VectorOperation=s},49125:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeAggregationOperation=void 0;let i=n(r(52462)),o=r(14178),a=r(16397),s=r(86726);class l extends s.Operation{constructor({compositeEntity:e,children:t,directed:r=!0}){super(),this.fields=[],this.nodeFields=[],this.edgeFields=[],this.authFilters=[],this.filters=[],this.sortFields=[],this.addWith=!0,this.aggregationProjectionMap=new i.default.Map,this.nodeMap=new i.default.Map,this.edgeMap=new i.default.Map,this.entity=e,this.children=t,this.directed=r}getChildren(){return(0,o.filterTruthy)([...this.fields,...this.nodeFields,...this.edgeFields,...this.filters,...this.sortFields,...this.authFilters,this.pagination,...this.children])}getSortFields(e,t){return this.sortFields.flatMap(r=>r.getSortFields(e,t,!1))}transpile(e){if(e.target)return this.transpileAggregationOperation(e);{let t=new a.QueryASTContext({target:new i.default.Node,neo4jGraphQLContext:e.neo4jGraphQLContext}),r=this.transpileAggregationOperation(t,!1);return{clauses:r.clauses.map(e=>new i.default.Call(e)),projectionExpr:r.projectionExpr}}}setFields(e){this.fields=e}addSort(...e){this.sortFields.push(...e)}addPagination(e){this.pagination=e}addFilters(...e){this.filters.push(...e)}addAuthFilters(...e){this.authFilters.push(...e)}setNodeFields(e){this.nodeFields=e}setEdgeFields(e){this.edgeFields=e}getPredicates(e){let t=this.getAuthFilterPredicate(e);return i.default.and(...this.filters.map(t=>t.getPredicate(e)),...t)}getAuthFilterPredicate(e){return(0,o.filterTruthy)(this.authFilters.map(t=>t.getPredicate(e)))}addSortToClause(e,t,r){let n=this.sortFields.flatMap(r=>r.getSortFields(e,t)),i=this.pagination?this.pagination.getPagination():void 0;r.orderBy(...n),i?.skip&&r.skip(i.skip),i?.limit&&r.limit(i.limit)}getFieldProjectionClause(e,t,r){return r.getAggregationProjection(e,t)}transpileAggregationOperation(e,t=!0){this.addWith=t;let r=this.createSubqueries(this.fields,e,this.aggregationProjectionMap),n=this.createSubqueries(this.nodeFields,e,this.nodeMap),o=this.createSubqueries(this.edgeFields,e,this.edgeMap,new i.default.NamedNode("edge"));return this.nodeMap.size>0&&this.aggregationProjectionMap.set("node",this.nodeMap),this.edgeMap.size>0&&this.aggregationProjectionMap.set("edge",this.edgeMap),{clauses:[...r,...n,...o],projectionExpr:this.aggregationProjectionMap}}createSubqueries(e,t,r,n=new i.default.NamedNode("node")){return e.map(e=>{let o=new i.default.Node,a=t.setReturn(o),s=this.createWithClause(t),l=this.createNestedSubquery(a,n);return r.set(e.getProjectionField(a.returnVariable)),i.default.concat(l,s,e.getAggregationProjection(n,a.returnVariable))})}createWithClause(e){let t;let r=new i.default.NamedNode("node"),n=new a.QueryASTContext({neo4jGraphQLContext:e.neo4jGraphQLContext,target:r}),o=this.getPredicates(n);return o&&(t=new i.default.With("*")).where(o),t}createNestedSubquery(e,t){let r=e.target,n=this.children.flatMap(n=>{"edge"===t.name?n.setAttachedTo("relationship"):n.setAttachedTo("node");let o=n.getSubqueries(e);return r&&this.addWith&&(o=o.map(e=>i.default.concat(new i.default.With(r),e))),o});return new i.default.Call(new i.default.Union(...n))}}t.CompositeAggregationOperation=l},13750:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeAggregationPartial=void 0;let i=n(r(52462)),o=r(43232),a=r(14178),s=r(20631),l=r(1808),u=r(15794);class c extends u.QueryASTNode{constructor({target:e,entity:t,directed:r=!0,attachedTo:n}){super(),this.authFilters=[],this.entity=t,this.target=e,this.directed=r,this.attachedTo=n??"node"}getChildren(){return this.authFilters}addAuthFilters(...e){this.authFilters.push(...e)}getAuthFilterPredicate(e){return(0,a.filterTruthy)(this.authFilters.map(t=>t.getPredicate(e)))}getSubqueries(e){let t;if(!e.target)throw Error("No parent node found!");let r=new i.default.Node,n=(0,s.getEntityLabels)(this.target,e.neo4jGraphQLContext),a=r,u=this.getAuthFilterPredicate(e);if(this.entity instanceof o.RelationshipAdapter){let o=new i.default.Relationship,s=this.entity.getCypherDirection(this.directed);"relationship"===this.attachedTo&&(a=o),t=new i.default.Pattern(e.target).related(o,{direction:s,type:this.entity.type}).to(r,{labels:n});let c=new i.default.Match(t).where(i.default.and(...u)),p=(0,l.wrapSubqueriesInCypherCalls)(e,this.getChildren(),[a]);return[i.default.concat(c,...p,new i.default.Return([r,"node"],[o,"edge"]))]}{t=new i.default.Pattern(r,{labels:n});let o=new i.default.Match(t).where(i.default.and(...u)),s=(0,l.wrapSubqueriesInCypherCalls)(e,this.getChildren(),[a]);return[i.default.concat(o,...s,new i.default.Return([r,"node"]))]}}print(){return`${super.print()} <${this.target.name}>`}setAttachedTo(e){this.attachedTo=e}}t.CompositeAggregationPartial=c},43203:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeConnectionPartial=void 0;let i=n(r(52462)),o=r(1808),a=r(86288);class s extends a.ConnectionReadOperation{transpile(e){let t,{selection:r,nestedContext:n}=this.selection.apply(e),a=this.getChildren().flatMap(e=>e.getSelection(n)),s=(0,o.wrapSubqueriesInCypherCalls)(n,this.filters,[n.target]);(a.length>0||s.length>0)&&(a=[r,...a],r=new i.default.With("*"));let l=this.filters.map(e=>e.getPredicate(n)),u=this.getAuthFilterPredicate(n),c=this.getAuthFilterSubqueries(n),p=i.default.and(...l,...u),d=(0,o.wrapSubqueriesInCypherCalls)(n,this.nodeFields,[n.target]),f=new i.default.Map,h=this.target.name;f.set({__resolveType:new i.default.Literal(h),__id:i.default.id(n.target)}),Array.from(new Set([...this.nodeFields.map(e=>e.getProjectionField(n.target)),...this.sortFields.flatMap(e=>e.node.map(e=>e.getProjectionField(n)))])).forEach(e=>{"string"==typeof e?f.set(e,n.target.property(e)):f.set(e)});let y=new i.default.NamedVariable("edge"),m=new i.default.Map,v=Array.from(new Set([...this.edgeFields.map(e=>e.getProjectionField(n.relationship)),...this.sortFields.flatMap(e=>e.edge.map(e=>e.getProjectionField(n)))])),g=new i.default.Map;v.forEach(e=>{"string"==typeof e?g.set(e,n.relationship.property(e)):g.set(e)}),g.size&&(this.relationship?.propertiesTypeName&&g.set("__resolveType",new i.default.Literal(this.relationship.propertiesTypeName)),m.set("properties",g)),m.set("node",f),p&&(c.length>0?t=new i.default.With("*").where(p):r.where(p));let b=new i.default.With([m,y]).return(e.returnVariable);return{clauses:[i.default.concat(...a,...s,r,...c,t,...d,b)],projectionExpr:e.returnVariable}}addPagination(e){}}t.CompositeConnectionPartial=s},64891:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeConnectionReadOperation=void 0;let i=n(r(52462)),o=r(86726),a=r(14178),s=r(31359),l=r(16397);class u extends o.Operation{constructor(e){super(),this.sortFields=[],this.children=e}transpile(e){let t;let r=new i.default.NamedVariable("edge"),n=new i.default.NamedVariable("edges"),o=new i.default.NamedVariable("totalCount"),a=this.children.flatMap(t=>{let n=new l.QueryASTContext({...e,returnVariable:r}),o=t.transpile(n);if(!(0,s.hasTarget)(e))return o.clauses;{let t=e.target;return o.clauses.map(e=>i.default.concat(new i.default.With(t),e))}}),u=new i.default.Union(...a),c=new i.default.Call(u),p=n;if(this.pagination||this.sortFields.length>0){let o=this.pagination&&this.pagination.getPagination(),a=new l.QueryASTContext({target:new i.default.Node,env:e.env,neo4jGraphQLContext:e.neo4jGraphQLContext}),s=this.getSortFields(a,r.property("node"),r.property("properties")),u=new i.default.Unwind([n,r]).with(r).orderBy(...s);o&&o.skip&&u.skip(o.skip),o&&o.limit&&u.limit(o.limit);let c=new i.default.Variable;u.return([i.default.collect(r),c]),p=c,t=new i.default.Call(u).importWith(n)}c.with([i.default.collect(r),n]).with(n,[i.default.size(n),o]);let d=new i.default.Return([new i.default.Map({edges:p,totalCount:o}),e.returnVariable]);return{clauses:[i.default.concat(c,t,d)],projectionExpr:e.returnVariable}}addSort(e){this.sortFields.push(e)}addPagination(e){this.pagination=e}getChildren(){let e=this.sortFields.flatMap(e=>[...e.edge,...e.node]);return(0,a.filterTruthy)([...this.children,...e,this.pagination])}getSortFields(e,t,r){return this.sortFields.flatMap(({node:n,edge:i})=>[...n.flatMap(r=>r.getSortFields(e,t,!1)),...i.flatMap(t=>t.getSortFields(e,r,!1))])}}t.CompositeConnectionReadOperation=u},73406:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeCypherOperation=void 0;let i=n(r(52462)),o=r(86726);class a extends o.Operation{constructor({selection:e,partials:t,cypherAttributeField:r}){super(),this.selection=e,this.partials=t,this.cypherAttributeField=r}getChildren(){return[this.selection,...this.partials]}transpile(e){let{selection:t,nestedContext:r}=this.selection.apply(e),n=new i.default.Variable,o=r.setReturn(n),a=this.partials.map(e=>{let{clauses:t}=e.transpile(o);return i.default.concat(new i.default.With("*"),...t)}),s=new i.default.Call(new i.default.Union(...a)).return(o.returnVariable),l=this.getReturnExpression(r,n),u=new i.default.Call(s).importWith(r.target).return([l,r.returnVariable]);return{clauses:[i.default.concat(t,u)],projectionExpr:r.returnVariable}}getReturnExpression(e,t){return this.wrapWithHeadIfNeeded(e,this.wrapWithCollectIfNeeded(e,t))}wrapWithCollectIfNeeded(e,t){return e.shouldCollect?i.default.collect(t):t}wrapWithHeadIfNeeded(e,t){return e.shouldCollect&&!this.cypherAttributeField.typeHelper.isList()?i.default.head(t):t}}t.CompositeCypherOperation=a},88480:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeReadOperation=void 0;let i=n(r(52462)),o=r(86726);class a extends o.Operation{constructor({compositeEntity:e,children:t,relationship:r}){super(),this.sortFields=[],this.entity=e,this.children=t,this.relationship=r}getChildren(){return this.children}transpile(e){let t=e.target,r=this.children.flatMap(r=>{let n=r.transpile(e).clauses;return t&&(n=n.map(e=>i.default.concat(new i.default.With("*"),e))),n}),n=i.default.collect(e.returnVariable);this.relationship||(n=e.returnVariable),this.relationship&&!this.relationship.isList&&(n=i.default.head(n));let o=new i.default.Call(new i.default.Union(...r)).with(e.returnVariable);if(this.sortFields.length>0&&o.orderBy(...this.getSortFields(e,e.returnVariable)),this.pagination){let e=this.pagination.getPagination();e&&(e.skip&&o.skip(e.skip),e.limit&&o.limit(e.limit))}return o.return([n,e.returnVariable]),{clauses:[o],projectionExpr:e.returnVariable}}addPagination(e){this.pagination=e}addSort(...e){this.sortFields.push(...e)}getSortFields(e,t){return this.sortFields.flatMap(r=>r.getSortFields(e,t,!1))}}t.CompositeReadOperation=a},96364:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeReadPartial=void 0;let i=n(r(52462)),o=r(31359),a=r(1808),s=r(73445);class l extends s.ReadOperation{transpile(e){return this.relationship?this.transpileNestedCompositeRelationship(this.relationship,e):this.transpileTopLevelCompositeEntity(e)}transpileNestedCompositeRelationship(e,t){if(!(0,o.hasTarget)(t))throw Error("No parent node found!");let{selection:r,nestedContext:n}=this.selection.apply(t),s=this.getChildren().flatMap(e=>e.getSelection(n)),l=(0,a.wrapSubqueriesInCypherCalls)(n,this.filters,[n.target]),u=this.getPredicates(n),c=this.getAuthFilterSubqueries(n).map(e=>new i.default.Call(e).importWith(n.target)),p=this.getAuthFilterPredicate(n);(s.length>0||l.length>0||c.length>0)&&(s=[r,...s],r=new i.default.With("*"));let d=i.default.and(u,...p);d&&r.where(d);let f=this.getCypherFieldsSubqueries(n),h=i.default.concat(...this.getFieldsSubqueries(n),...f),y=this.sortFields.flatMap(e=>e.getSubqueries(n)).map(e=>new i.default.Call(e).importWith(n.target)),m=this.getProjectionClause(n,t.returnVariable);return{clauses:[i.default.concat(...s,...l,...c,r,h,...y,m)],projectionExpr:n.returnVariable}}transpileTopLevelCompositeEntity(e){let{selection:t,nestedContext:r}=this.selection.apply(e),n=this.getChildren().flatMap(e=>e.getSelection(r)),o=(0,a.wrapSubqueriesInCypherCalls)(r,this.filters,[r.target]);(n.length>0||o.length>0)&&(n=[t,...n],t=new i.default.With("*"));let s=this.getPredicates(r),l=this.getAuthFilterSubqueries(r),u=this.getAuthFilterPredicate(r),c=i.default.and(s,...u);c&&t.where(c);let p=this.getCypherFieldsSubqueries(r),d=i.default.concat(...this.getFieldsSubqueries(r),...p),f=this.getProjectionClause(r,e.returnVariable);return{clauses:[i.default.concat(...n,...o,t,...l,d,f)],projectionExpr:e.returnVariable}}getProjectionClause(e,t){if(!(0,o.hasTarget)(e))throw Error("No parent node found!");let r=this.getProjectionMap(e),n=this.target.name;return r.set({__resolveType:new i.default.Literal(n),__id:i.default.id(e.target)}),new i.default.With([r,e.target]).return([e.target,t])}}t.CompositeReadPartial=l},86726:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MutationOperation=t.Operation=void 0;let n=r(15794);class i extends n.QueryASTNode{}t.Operation=i;class o extends i{}t.MutationOperation=o},69417:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Pagination=void 0;let i=n(r(52462)),o=r(66007),a=r(15794);class s extends a.QueryASTNode{constructor({skip:e,limit:t}){super(),this.skip=this.toNeo4jInt(e),this.limit=this.toNeo4jInt(t)}getPagination(){return{skip:this.skip?new i.default.Param(this.skip):void 0,limit:this.limit?new i.default.Param(this.limit):void 0}}getChildren(){return[]}toNeo4jInt(e){return"number"==typeof e?(0,o.int)(e):e}print(){return`${super.print()} <skip: ${this.skip} | limit: ${this.limit}>`}}t.Pagination=s},7420:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCypherSelection=void 0;let i=n(r(52462)),o=r(16397),a=r(1458),s=r(84737),l=new i.default.NamedVariable("this");class u extends a.EntitySelection{constructor({operationField:e,rawArguments:t={},isNested:r}){if(super(),this.operationField=e,this.rawArguments=t,this.isNested=r,!this.operationField.annotations.cypher)throw Error("Missing Cypher Annotation on Cypher field");this.cypherAnnotation=this.operationField.annotations.cypher}apply(e){let t;let r={};this.cypherAnnotation.statement.includes("$jwt")&&e.neo4jGraphQLContext.authorization.jwtParam&&(r.jwt=e.neo4jGraphQLContext.authorization.jwtParam.value);let n=new i.default.NamedVariable(this.cypherAnnotation.columnName),a=new i.default.Raw(e=>[(0,s.replaceArgumentsInStatement)({env:e,definedArguments:this.operationField.args,rawArguments:this.rawArguments,statement:this.cypherAnnotation.statement}),r]),u=new i.default.Node;if(this.isNested&&e.target){let r=new i.default.With([e.target,l]);(t=new i.default.Call(i.default.concat(r,a))).importWith(e.target)}else t=new i.default.Call(a);let c=new i.default.Variable;return{selection:this.operationField.typeHelper.isList()&&this.operationField.typeHelper.isScalar()?t.unwind([n,c]).with([c,u]):t.with([n,u]),nestedContext:new o.QueryASTContext({source:e.target,target:u,neo4jGraphQLContext:e.neo4jGraphQLContext,returnVariable:u,env:e.env,shouldCollect:this.isNested})}}}t.CustomCypherSelection=u},1458:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntitySelection=void 0;let n=r(15794);class i extends n.QueryASTNode{getChildren(){return[]}}t.EntitySelection=i},30391:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FulltextSelection=void 0;let i=n(r(52462)),o=r(55672),a=r(16397),s=r(1458);class l extends s.EntitySelection{constructor({target:e,fulltext:t,scoreVariable:r}){super(),this.target=e,this.fulltext=t,this.scoreVariable=r}apply(e){let t=new i.default.Node,r=new i.default.Param(this.fulltext.phrase),n=new i.default.Literal(this.fulltext.index),s=i.default.db.index.fulltext.queryNodes(n,r).yield(["node",t],["score",this.scoreVariable]),l=(0,o.mapLabelsWithContext)(this.target.getLabels(),e.neo4jGraphQLContext).map(e=>i.default.in(new i.default.Param(e),i.default.labels(t)));return s.where(i.default.and(...l)),{selection:s,nestedContext:new a.QueryASTContext({target:t,neo4jGraphQLContext:e.neo4jGraphQLContext,returnVariable:e.returnVariable,env:e.env,shouldCollect:e.shouldCollect})}}}t.FulltextSelection=l},21689:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeSelection=void 0;let i=n(r(52462)),o=r(20631),a=r(16397),s=r(1458);class l extends s.EntitySelection{constructor({target:e,alias:t,optional:r=!1,useContextTarget:n=!1}){super(),this.target=e,this.alias=t,this.optional=r,this.useContextTarget=n}apply(e){let t,r;if(this.useContextTarget){if(!e.hasTarget())throw Error("No target found in the context");t=e.target,r=new i.default.Pattern(t)}else t=(0,o.createNode)(this.alias),r=new i.default.Pattern(t,{labels:(0,o.getEntityLabels)(this.target,e.neo4jGraphQLContext)});let n=new i.default.Match(r??t);return this.optional&&n.optional(),{selection:n,nestedContext:new a.QueryASTContext({target:t,neo4jGraphQLContext:e.neo4jGraphQLContext,returnVariable:e.returnVariable,env:e.env,shouldCollect:e.shouldCollect})}}}t.NodeSelection=l},55107:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RelationshipSelection=void 0;let i=n(r(52462)),o=r(31359),a=r(20631),s=r(1458);class l extends s.EntitySelection{constructor({relationship:e,alias:t,directed:r,targetOverride:n,optional:i}){super(),this.relationship=e,this.alias=t,this.directed=r,this.targetOverride=n,this.optional=i??!1}apply(e){if(!(0,o.hasTarget)(e))throw Error("No parent node over a nested relationship match!");let t=new i.default.Relationship,r=this.targetOverride??this.relationship.target,n=(0,a.createNode)(this.alias),s=(0,a.getEntityLabels)(r,e.neo4jGraphQLContext),l=this.relationship.getCypherDirection(this.directed),u=new i.default.Pattern(e.target).related(t,{direction:l,type:this.relationship.type}).to(n,{labels:s}),c=e.push({target:n,relationship:t}),p=new i.default.Match(u);return this.optional&&p.optional(),{nestedContext:c,selection:p}}}t.RelationshipSelection=l},43712:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VectorSelection=void 0;let i=n(r(52462)),o=r(55672),a=r(16397),s=r(1458);class l extends s.EntitySelection{constructor({target:e,vectorOptions:t,scoreVariable:r,settings:n}){super(),this.target=e,this.vectorOptions=t,this.scoreVariable=r,this.settings=n}apply(e){let t;let r=new i.default.Node,n=new i.default.Param(this.vectorOptions.vector),s=new i.default.Param(this.vectorOptions.phrase),l=new i.default.Literal(this.vectorOptions.index.indexName);if(this.vectorOptions.vector&&(t=i.default.db.index.vector.queryNodes(l,4,n).yield(["node",r],["score",this.scoreVariable])),this.vectorOptions.phrase&&this.vectorOptions.index.provider){if(!this.settings||!this.settings[this.vectorOptions.index.provider])throw Error(`Missing settings for provider ${this.vectorOptions.index.provider}. Please check your configuration.`);let e=this.settings[this.vectorOptions.index.provider],n=new i.default.Variable,o=i.default.db.index.vector.queryNodes(l,4,n),a=i.default.genai.vector.encode(s,this.vectorOptions.index.provider,e);t=new i.default.With([a,n]).callProcedure(o).yield(["node",r],["score",this.scoreVariable])}if(!t)throw Error("Unsupported vector index configuration");let u=(0,o.mapLabelsWithContext)(this.target.getLabels(),e.neo4jGraphQLContext).map(e=>i.default.in(new i.default.Param(e),i.default.labels(r)));return t.where(i.default.and(...u)),{selection:t,nestedContext:new a.QueryASTContext({target:r,neo4jGraphQLContext:e.neo4jGraphQLContext,returnVariable:e.returnVariable,env:e.env,shouldCollect:e.shouldCollect})}}}t.VectorSelection=l},29999:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CypherPropertySort=void 0;let i=n(r(52462)),o=r(58779);class a extends o.Sort{constructor({attribute:e,direction:t,cypherOperation:r}){super(),this.attribute=e,this.direction=t,this.cypherOperation=r}getChildren(){return[]}print(){return`${super.print()} <${this.attribute.name}>`}getFieldName(){return this.attribute.name}getSortFields(e,t,r=!0){return[[e.getScopeVariable(this.attribute.name),this.direction]]}getProjectionField(e){let t=e.getScopeVariable(this.attribute.name);return{[this.attribute.databaseName]:t}}getSubqueries(e){if(e.getTargetScope().has(this.attribute.name))return[];let t=new i.default.Variable,r=e.setReturn(t),{clauses:n}=this.cypherOperation.transpile(r);return n}}t.CypherPropertySort=a},13203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertySort=void 0;let n=r(58779);class i extends n.Sort{constructor({attribute:e,direction:t}){super(),this.attribute=e,this.direction=t}getChildren(){return[]}print(){return`${super.print()} <${this.attribute.name}>`}getSortFields(e,t,r=!0){let n=r?this.attribute.databaseName:this.attribute.name;return[[t.property(n),this.direction]]}getProjectionField(e){return this.attribute.databaseName!==this.attribute.name?{}:this.attribute.databaseName}}t.PropertySort=i},85623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreSort=void 0;let n=r(58779);class i extends n.Sort{constructor({scoreVariable:e,direction:t}){super(),this.scoreVariable=e,this.direction=t}getChildren(){return[]}getSortFields(e,t){return[[this.scoreVariable,this.direction]]}getProjectionField(e){return{}}}t.ScoreSort=i},58779:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sort=void 0;let n=r(15794);class i extends n.QueryASTNode{getSubqueries(e){return[]}}t.Sort=i},3589:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthFilterFactory=void 0;let i=r(14364),o=n(r(52462)),a=r(80103),s=r(70380),l=r(26214),u=r(67413),c=r(12677),p=r(58167),d=r(93383),f=r(45111),h=r(1540);class y extends f.FilterFactory{createAuthFilters({entity:e,operations:t,context:r,populatedWhere:n}){return Object.entries(n).flatMap(([n,i])=>{if((0,a.isLogicalOperator)(n)){let o=i.flatMap(n=>this.createAuthFilters({entity:e,operations:t,context:r,populatedWhere:n}));return[new s.LogicalFilter({operation:n,filters:o})]}return"node"===n?this.createNodeFilters(e,i):"jwt"===n?this.createJWTFilters(r.authorization.jwtParam,i,r):[]})}createJWTFilters(e,t,r){return Object.entries(t).map(([t,n])=>{if((0,a.isLogicalOperator)(t)){let o=(0,i.asArray)(n).flatMap(t=>this.createJWTFilters(e,t,r));return new s.LogicalFilter({operation:t,filters:o})}let{fieldName:o,operator:l,isNot:u}=(0,h.parseWhereField)(t);if(!o)throw Error(`Failed to find field name in filter: ${t}`);let p=r.authorization.claims?.get(o),d=e.property(o);if(p){let t=p.split(/(?<!\\)\./);t=t.map(e=>e.replaceAll(/\\\./g,".")),d=e.property(...t)}return new c.JWTFilter({operator:l||"EQ",JWTClaim:d,comparisonValue:n,isNot:u})})}createPropertyFilter({attribute:e,comparisonValue:t,operator:r,isNot:n,attachedTo:i,relationship:a}){let s=r||"EQ";return"boolean"==typeof t?new p.ParamPropertyFilter({attribute:e,relationship:a,comparisonValue:new o.default.Param(t),isNot:n,operator:s,attachedTo:i}):t instanceof o.default.Variable||t instanceof o.default.Property||t instanceof o.default.Param?new p.ParamPropertyFilter({attribute:e,relationship:a,comparisonValue:t,isNot:n,operator:s,attachedTo:i}):null===t?new d.PropertyFilter({attribute:e,relationship:a,comparisonValue:t,isNot:n,operator:s,attachedTo:i}):new p.ParamPropertyFilter({attribute:e,relationship:a,comparisonValue:new o.default.Param(t),isNot:n,operator:s,attachedTo:i})}createRelationshipFilterTreeNode(e){return new u.AuthRelationshipFilter(e)}createConnectionFilterTreeNode(e){return new l.AuthConnectionFilter(e)}}t.AuthFilterFactory=y},37417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationFactory=void 0;let n=r(14178),i=r(80382),o=r(65423),a=r(29355),s=r(93457);class l{constructor(e){this.filterFactory=e}getAuthFilters({attributes:e,...t}){let r=this.createAuthFilterRule({...t,authAnnotation:t.entity.annotations.authorization}),i=this.createAuthValidateRule({...t,authAnnotation:t.entity.annotations.authorization,when:"BEFORE"}),o=[],a=[];if(e?.length&&(0,s.isConcreteEntity)(t.entity))for(let r of e)o.push(this.createAuthFilterRule({...t,authAnnotation:r.annotations.authorization})),a.push(this.createAuthValidateRule({...t,when:"BEFORE",authAnnotation:r.annotations.authorization}));return(0,n.filterTruthy)([r,...o,i,...a])}createAuthFilterRule({authAnnotation:e,...t}){let r=this.createAuthRuleFilter(t,e?.filter??[]);if(r.length)return new o.AuthorizationFilters({validationFilters:[],whereFilters:r})}createAuthValidateRule({authAnnotation:e,when:t,conditionForEvaluation:r,...n}){let i=e?.validate?.filter(e=>e.when.includes(t)),a=this.createAuthRuleFilter(n,i??[]);if(a.length)return new o.AuthorizationFilters({validationFilters:a,whereFilters:[],conditionForEvaluation:r})}createAuthRuleFilter(e,t){return t.filter(t=>t.operations.some(t=>e.operations.includes(t))).map(t=>{let r=(0,i.populateWhereParams)({where:t.where,context:e.context}),n=this.filterFactory.createAuthFilters({...e,populatedWhere:r});return new a.AuthorizationRuleFilter({requireAuthentication:t.requireAuthentication,filters:n,isAuthenticatedParam:e.context.authorization.isAuthenticatedParam})})}}t.AuthorizationFactory=l},57304:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldFactory=void 0;let n=r(14364),i=r(62437),o=r(14178),a=r(87935),s=r(59054),l=r(62771),u=r(88708),c=r(64170),p=r(66),d=r(8833),f=r(93457),h=r(34857);class y{constructor(e){this.queryASTFactory=e}createFields(e,t,r){let i=(0,o.filterTruthy)(Object.values(t).map(t=>{let{fieldName:r}=(0,h.parseSelectionSetField)(t.name);return this.getRequiredResolveTree({entity:e,fieldName:r})})),s=Object.values((0,n.mergeDeep)([t,...i])).flatMap(t=>{let{fieldName:n,isConnection:i,isAggregation:o}=(0,h.parseSelectionSetField)(t.name);if((0,f.isConcreteEntity)(e)){(0,a.checkEntityAuthentication)({entity:e.entity,targetOperations:["READ"],context:r,field:t.name});let s=e.findRelationship(n);if(s)return i?this.createConnectionField(s,t,r):o?this.createRelationshipAggregationField(s,t,r):this.createRelationshipField({relationship:s,field:t,context:r});if(!s&&(i||o))throw Error(`Relationship ${n} not found in entity ${e.name}`)}return this.createAttributeField({entity:e,fieldName:n,field:t,context:r})});return(0,o.filterTruthy)(s)}createRelationshipAggregationField(e,t,r){let n=this.queryASTFactory.operationsFactory.createAggregationOperation(e,t,r);return new s.OperationField({alias:t.alias,operation:n})}createAggregationFields(e,t){return(0,o.filterTruthy)(Object.values(t).map(t=>{if("count"===t.name)return new u.CountField({alias:t.alias,entity:e});{let r=e.findAttribute(t.name);if(!r)throw Error(`Attribute ${t.name} not found`);let n=Object.values(t.fieldsByTypeName[r.getAggregateSelectionTypeName()]||{}).reduce((e,t)=>(e[t.name]=t.alias,e),{});return new l.AggregationAttributeField({attribute:r,alias:t.alias,aggregationProjection:n})}}))}getRequiredResolveTree({entity:e,fieldName:t}){let r=e.findAttribute(t);if(!r)return;let n=r.annotations.customResolver;if(n)return n.parsedRequires}createAttributeField({entity:e,fieldName:t,field:r,context:n}){if(["cursor","node"].includes(t))return;let i=e.findAttribute(t);if("id"===t&&!i&&(0,f.isConcreteEntity)(e)){let r=e.globalIdField;if(!r)throw Error(`attribute ${t} not found`);return new c.AttributeField({alias:r.name,attribute:r})}if(!i)throw Error(`attribute ${t} not found`);let o=i.annotations.cypher;if(o)return this.createCypherAttributeField({field:r,attribute:i,context:n,cypherAnnotation:o});if(i.typeHelper.isPoint()||i.typeHelper.isCartesianPoint()){let e=i.typeHelper.isList()?i.type.ofType.name:i.type.name,{crs:t}=r.fieldsByTypeName[e];return new d.PointAttributeField({attribute:i,alias:r.alias,crs:!!t})}return i.typeHelper.isDateTime()?new p.DateTimeField({attribute:i,alias:r.alias}):new c.AttributeField({alias:r.alias,attribute:i})}createCypherAttributeField({field:e,attribute:t,context:r,cypherAnnotation:n}){let o=t.typeHelper.isList()?t.type.ofType.name:t.type.name,a=e.fieldsByTypeName[o];n.statement.includes("$jwt")&&r.authorization.jwtParam&&r.authorization.jwtParam.value;let s={...e.args};if(e.args={},a){if(t.typeHelper.isObject()){let n=this.queryASTFactory.schemaModel.getConcreteEntityAdapter(o);if(!n)throw Error(`Entity ${o} not found`);return this.createCypherOperationField({target:n,field:e,context:r,cypherAttributeField:t,cypherArguments:s})}if(t.typeHelper.isAbstract()){let n=this.queryASTFactory.schemaModel.getEntity(o);if(!n)throw Error(`Entity ${o} not found`);if(!n.isCompositeEntity())throw Error(`Entity ${o} is not a composite entity`);let a=(0,i.getEntityAdapter)(n);return this.createCypherOperationField({target:a,field:e,context:r,cypherAttributeField:t,cypherArguments:s})}}return this.createCypherOperationField({field:e,context:r,cypherAttributeField:t,cypherArguments:s})}createConnectionOperation(e,t,r,n){return(0,f.isConcreteEntity)(t)?this.queryASTFactory.operationsFactory.createConnectionOperationAST({relationship:e,target:t,resolveTree:r,context:n}):this.queryASTFactory.operationsFactory.createCompositeConnectionOperationAST({relationship:e,target:t,resolveTree:r,context:n})}createConnectionField(e,t,r){let n=this.createConnectionOperation(e,e.target,t,r);return new s.OperationField({operation:n,alias:t.alias})}createCypherOperationField({target:e,field:t,context:r,cypherAttributeField:n,cypherArguments:i}){let o=this.queryASTFactory.operationsFactory.createCustomCypherOperation({resolveTree:t,context:r,entity:e,cypherAttributeField:n,cypherArguments:i});return new s.OperationField({operation:o,alias:t.alias})}createRelationshipField({relationship:e,field:t,context:r}){let n=this.queryASTFactory.operationsFactory.createReadOperation({entityOrRel:e,resolveTree:t,context:r});return new s.OperationField({operation:n,alias:t.alias})}}t.FieldFactory=y},45111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterFactory=void 0;let n=r(43232),i=r(97845),o=r(14178),a=r(80103),s=r(31731),l=r(82864),u=r(70380),c=r(93910),p=r(57727),d=r(71215),f=r(3060),h=r(80891),y=r(43509),m=r(75038),v=r(93383),g=r(26609),b=r(23326),_=r(93457),T=r(86904),E=r(42447),O=r(1540);class S{constructor(e){this.queryASTFactory=e}createConnectionFilter(e,t,r){let n;if((0,T.isInterfaceEntity)(e.target)&&this.isLabelOptimizationForInterfacePossible(t,e.target)){let n=this.createConnectionFilterTreeNode({relationship:e,target:e.target,isNot:r.isNot,operator:r.operator}),i=this.createConnectionPredicates({rel:e,entity:e.target,where:t});return n.addFilters(i),(0,o.asArray)(n)}let i=(0,b.getConcreteEntities)(e.target,t),a=[];for(let o of((0,T.isInterfaceEntity)(e.target)&&(n=e.target),i)){let i=this.createConnectionFilterTreeNode({relationship:e,target:o,isNot:r.isNot,operator:r.operator}),s=this.createConnectionPredicates({rel:e,entity:o,where:t,partialOf:n});i.addFilters(s),a.push(i)}let s=this.getLogicalOperatorForRelatedNodeFilters(e.target,r.operator);return this.wrapMultipleFiltersInLogical(a,s)}createConnectionPredicates({rel:e,entity:t,where:r,partialOf:n,context:i}){let s=r;e&&(0,E.isUnionEntity)(e.target)&&r[t.name]&&(s=r[t.name]);let l=(0,o.asArray)(s).flatMap(r=>Object.entries(r).flatMap(([r,s])=>{if((0,a.isLogicalOperator)(r)){let i=this.createConnectionPredicates({rel:e,entity:t,where:s,partialOf:n});return[new u.LogicalFilter({operation:r,filters:(0,o.filterTruthy)(i)})]}let l=(0,O.parseConnectionWhereFields)(r);return e&&"edge"===l.fieldName?this.createEdgeFilters(e,s):"node"===l.fieldName?n&&(0,T.isInterfaceEntity)(n)&&(0,_.isConcreteEntity)(t)?this.createInterfaceNodeFilters({entity:n,targetEntity:t,whereFields:s}):(0,T.isInterfaceEntity)(t)?this.createInterfaceNodeFilters({entity:t,whereFields:s,relationship:e}):this.createNodeFilters(t,s,i):void 0}));return(0,o.filterTruthy)(l)}createPropertyFilter({attribute:e,relationship:t,comparisonValue:r,operator:n,isNot:i,attachedTo:o}){let a=n||"EQ";return e.typeHelper.isDuration()?new y.DurationFilter({attribute:e,comparisonValue:r,isNot:i,operator:a,attachedTo:o}):e.typeHelper.isPoint()||e.typeHelper.isCartesianPoint()?new m.PointFilter({attribute:e,comparisonValue:r,isNot:i,operator:a,attachedTo:o}):new v.PropertyFilter({attribute:e,relationship:t,comparisonValue:r,isNot:i,operator:a,attachedTo:o})}createRelationshipFilter(e,t,r,n){let i=null===t;if(!i&&0===Object.keys(t).length)return[];let o=i?!r.isNot:r.isNot,a=(0,b.getConcreteEntities)(e.target,t),s=[];for(let l of a){let a=this.createRelationshipFilterTreeNode({relationship:e,target:l,isNot:o,operator:r.operator||"SOME"});if(!i){let e=t[l.name]??t,r=this.createNodeFilters(l,e,n);a.addTargetNodeFilter(...r)}s.push(a)}let l=this.getLogicalOperatorForRelatedNodeFilters(e.target,r.operator);return this.wrapMultipleFiltersInLogical(s,l)}createRelationshipFilterTreeNode(e){return new c.RelationshipFilter(e)}createConnectionFilterTreeNode(e){return new s.ConnectionFilter(e)}createInterfaceNodeFilters({entity:e,targetEntity:t,whereFields:r,relationship:n,context:i}){let s=(0,o.filterTruthy)(Object.entries(r).flatMap(([r,s])=>{let l=(0,o.asArray)(s);if((0,a.isLogicalOperator)(r)){let n=l.flatMap(r=>this.createInterfaceNodeFilters({entity:e,targetEntity:t,whereFields:r}));return new u.LogicalFilter({operation:r,filters:n})}if("typename_IN"===r){let t=e.concreteEntities.filter(e=>l.some(t=>t===e.name));return new g.TypenameFilter(t)}let{fieldName:c,operator:p,isNot:d,isConnection:f,isAggregate:h}=(0,O.parseWhereField)(r),y=e.findRelationshipDeclarations(c);if(t&&y){let e=y.relationshipImplementations.find(e=>e.source.name===t.name);if(!e)throw Error(`Relationship ${c} not found`);return this.createRelatedNodeFilters({relationship:e,value:s,operator:p,isNot:d,isConnection:f,isAggregate:h,context:i})}let m=e.findAttribute(c);if(!m)throw Error(`Attribute ${c} not found`);return this.createPropertyFilter({attribute:m,relationship:n,comparisonValue:s,isNot:d,operator:p})}));return this.wrapMultipleFiltersInLogical(s)}createNodeFilters(e,t,r){if((0,E.isUnionEntity)(e))return[];let n=(0,o.filterTruthy)(Object.entries(t).flatMap(([t,n])=>{let i=(0,o.asArray)(n);if((0,a.isLogicalOperator)(t)){let n=i.flatMap(t=>this.createNodeFilters(e,t,r));return new u.LogicalFilter({operation:t,filters:n})}let{fieldName:s,operator:l,isNot:c,isConnection:p,isAggregate:d}=(0,O.parseWhereField)(t),f=e.findRelationship(s);if(f)return this.createRelatedNodeFilters({relationship:f,value:n,operator:l,isNot:c,isConnection:p,isAggregate:d});let h=e.findAttribute(s);if(!h){if("id"===s&&e.globalIdField)return this.createRelayIdPropertyFilter(e,c,l,n);throw Error(`Attribute ${s} not found`)}return this.createPropertyFilter({attribute:h,comparisonValue:n,isNot:c,operator:l})}));return this.wrapMultipleFiltersInLogical(n)}createRelatedNodeFilters({relationship:e,value:t,operator:r,isNot:n,isConnection:i,isAggregate:o,context:a}){if(o)return this.createAggregationFilter(e,t);if(r&&!(0,l.isRelationshipOperator)(r))throw Error(`Invalid operator ${r} for relationship`);return i?this.createConnectionFilter(e,t,{isNot:n,operator:r}):this.createRelationshipFilter(e,t,{isNot:n,operator:r},a)}getLogicalOperatorForRelatedNodeFilters(e,t="SOME"){if((0,T.isInterfaceEntity)(e)){if("SOME"===t)return"OR";if("SINGLE"===t)return"XOR"}return"AND"}createRelayIdPropertyFilter(e,t,r,n){let o=(0,i.fromGlobalId)(n),{typeName:a,field:s}=o,l=o.id;if(a!==e.name||!s||!l)throw Error(`Cannot query Relay Id on "${e.name}"`);let u=e.findAttribute(s);if(!u)throw Error(`Attribute ${s} not found`);if(u.typeHelper.isNumeric()&&Number.isNaN(l=Number(l)))throw Error("Can't parse non-numeric relay id");return this.createPropertyFilter({attribute:u,comparisonValue:l,isNot:t,operator:r})}createEdgeFilters(e,t){let r=Object.entries(t).flatMap(([t,r])=>{if((0,a.isLogicalOperator)(t)){let n=(0,o.asArray)(r).flatMap(t=>this.createEdgeFilters(e,t));return new u.LogicalFilter({operation:t,filters:n})}let{fieldName:n,operator:i,isNot:s}=(0,O.parseWhereField)(t),l=e.findAttribute(n);return l?this.createPropertyFilter({attribute:l,comparisonValue:r,isNot:s,operator:i,attachedTo:"relationship"}):n===e.propertiesTypeName?this.createEdgeFilters(e,r):void 0});return this.wrapMultipleFiltersInLogical((0,o.filterTruthy)(r))}getAggregationNestedFilters(e,t){let r=Object.entries(e).flatMap(([e,r])=>{if((0,a.isLogicalOperator)(e)){let n=(0,o.asArray)(r).flatMap(e=>this.getAggregationNestedFilters(e,t));return[new u.LogicalFilter({operation:e,filters:n})]}let{fieldName:n,operator:i,isNot:s}=(0,O.parseWhereField)(e);if("count"===n)return[new h.CountFilter({operator:i||"EQ",isNot:s,comparisonValue:r})];if("node"===n)return this.createAggregationNodeFilters(r,t.target,t);if("edge"===n)return this.createAggregationNodeFilters(r,t);throw Error(`Aggregation filter not found ${e}`)});return this.wrapMultipleFiltersInLogical(r)}createAggregationFilter(e,t){let r=new d.AggregationFilter(e),n=this.getAggregationNestedFilters(t,e);return r.addFilters(...n),r}createAggregationNodeFilters(e,t,r){let i=Object.entries(e).map(([e,i])=>{if((0,a.isLogicalOperator)(e))return this.createAggregateLogicalFilter(e,i,t,r);let{fieldName:o,logicalOperator:s,aggregationOperator:l}=(0,O.parseAggregationWhereFields)(e),u=t.findAttribute(o);if(!u)throw Error(`Attribute ${o} not found`);let c=t instanceof n.RelationshipAdapter?"relationship":"node";return u.typeHelper.isDuration()?new p.AggregationDurationFilter({attribute:u,comparisonValue:i,logicalOperator:s||"EQUAL",aggregationOperator:l,attachedTo:c}):new f.AggregationPropertyFilter({attribute:u,relationship:r,comparisonValue:i,logicalOperator:s||"EQUAL",aggregationOperator:l,attachedTo:c})});return this.wrapMultipleFiltersInLogical(i)}wrapMultipleFiltersInLogical(e,t="AND"){if(e.length>1)return[new u.LogicalFilter({operation:t,filters:e})];let r=e[0];return r?[r]:[]}createAggregateLogicalFilter(e,t,r,n){let i=(0,o.asArray)(t).flatMap(e=>this.createAggregationNodeFilters(e,r,n));return new u.LogicalFilter({operation:e,filters:i})}isLabelOptimizationForInterfacePossible(e,t){return!e.node||!Object.keys(e.node).some(e=>{let{fieldName:r,isAggregate:n,isConnection:i}=(0,O.parseWhereField)(e);return!!(n||i||t.findRelationshipDeclarations(r))})}}t.FilterFactory=S},17173:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationsFactory=void 0;let n=r(14364),i=r(66007),o=r(14178),a=r(93457),s=r(86904),l=r(42447),u=r(96303),c=r(11739),p=r(43614),d=r(60650),f=r(72181),h=r(37961),y=r(12699),m=r(50346),v=r(19615),g=r(35402),b=r(34857);class _{constructor(e){this.filterFactory=e.filterFactory,this.fieldFactory=e.fieldFactory,this.sortAndPaginationFactory=e.sortAndPaginationFactory,this.authorizationFactory=e.authorizationFactory,this.createFactory=new p.CreateFactory(e),this.updateFactory=new m.UpdateFactory(e),this.deleteFactory=new f.DeleteFactory(e),this.fulltextFactory=new h.FulltextFactory(e),this.aggregateFactory=new u.AggregateFactory(e),this.customCypherFactory=new d.CustomCypherFactory(e),this.connectionFactory=new c.ConnectionFactory(e),this.readFactory=new y.ReadFactory(e),this.vectorFactory=new v.VectorFactory(e)}createTopLevelOperation({entity:e,resolveTree:t,context:r,varName:n,reference:i,resolveAsUnwind:o=!1}){if(e&&(0,a.isConcreteEntity)(e)&&e.annotations.fulltext&&r.fulltext&&r.resolveTree.args.phrase){if(void 0===(r.fulltext.indexName??r.fulltext.name))throw Error("The name of the fulltext index should be defined using the indexName argument.");return(0,a.assertIsConcreteEntity)(e),this.fulltextFactory.createFulltextOperation(e,t,r)}switch((0,g.parseTopLevelOperationField)(t.name,r,e)){case"READ":if(r.resolveTree.args.fulltext||r.resolveTree.args.phrase)return(0,a.assertIsConcreteEntity)(e),this.fulltextFactory.createFulltextOperation(e,t,r);if(!e)throw Error("Entity is required for top level read operations");return this.readFactory.createReadOperation({entityOrRel:e,resolveTree:t,context:r,varName:n,reference:i});case"VECTOR":if(!e)throw Error("Entity is required for top level connection read operations");if(!(0,a.isConcreteEntity)(e))throw Error("Vector operations are only supported on concrete entities");return this.vectorFactory.createVectorOperation(e,t,r);case"CONNECTION":{if(!e)throw Error("Entity is required for top level connection read operations");let n=this.connectionFactory.normalizeResolveTreeForTopLevelConnection(t);return this.connectionFactory.createConnectionOperationAST({target:e,resolveTree:n,context:r})}case"AGGREGATE":if(!e||(0,l.isUnionEntity)(e))throw Error("Aggregate operations are not supported for Union types");return this.aggregateFactory.createAggregationOperation(e,t,r);case"CREATE":if((0,a.assertIsConcreteEntity)(e),o)return this.createFactory.createUnwindCreateOperation(e,t,r);return this.createFactory.createCreateOperation(e,t,r);case"UPDATE":return(0,a.assertIsConcreteEntity)(e),this.updateFactory.createUpdateOperation(e,t,r);case"DELETE":return(0,a.assertIsConcreteEntity)(e),this.deleteFactory.createTopLevelDeleteOperation({entity:e,resolveTree:t,context:r,varName:n});case"CUSTOM_CYPHER":return this.customCypherFactory.createTopLevelCustomCypherOperation({entity:e,resolveTree:t,context:r});default:throw Error(`Unsupported top level operation: ${t.name}`)}}createReadOperation(e){return this.readFactory.createReadOperation(e)}getFulltextSelection(e,t){return this.fulltextFactory.getFulltextSelection(e,t)}getVectorSelection(e,t){return this.vectorFactory.getVectorSelection(e,t)}createAggregationOperation(e,t,r){return this.aggregateFactory.createAggregationOperation(e,t,r)}splitConnectionFields(e){return this.connectionFactory.splitConnectionFields(e)}createConnectionOperationAST(e){return this.connectionFactory.createConnectionOperationAST(e)}createCompositeConnectionOperationAST(e){return this.connectionFactory.createCompositeConnectionOperationAST(e)}hydrateReadOperation(e){return this.readFactory.hydrateReadOperation(e)}hydrateConnectionOperation(e){return this.connectionFactory.hydrateConnectionOperationAST(e)}createCustomCypherOperation(e){return this.customCypherFactory.createCustomCypherOperation(e)}hydrateOperation({entity:e,operation:t,whereArgs:r,context:i,sortArgs:a,fieldsByTypeName:l,partialOf:u}){let c={...l[e.name]},p=e.compositeEntities,d=(0,o.filterTruthy)(p.map(e=>l[e.name])),f=(0,n.mergeDeep)([...d,c]),h=this.fieldFactory.createFields(e,f,i);if(u&&(0,s.isInterfaceEntity)(u)){let n=this.filterFactory.createInterfaceNodeFilters({entity:u,targetEntity:e,whereFields:r});t.addFilters(...n)}else{let n=this.filterFactory.createNodeFilters(e,r,i);t.addFilters(...n)}let y=this.authorizationFactory.getAuthFilters({entity:e,operations:["READ"],attributes:this.getSelectedAttributes(e,f),context:i});if(t.setFields(h),t.addAuthFilters(...y),a){let r=this.getOptions(e,a);if(r){let n=this.sortAndPaginationFactory.createSortFields(r,e,i);t.addSort(...n);let o=this.sortAndPaginationFactory.createPagination(r);o&&t.addPagination(o)}}return t}getOptions(e,t){if(!t)return;let r=(0,l.isUnionEntity)(e)?void 0:e.annotations.limit,n=t?.limit??r?.default??r?.max;n instanceof i.Integer&&(n=n.toNumber());let o=r?.max;if(void 0!==n&&void 0!==o&&(n=Math.min(n,o)),void 0!==n||void 0!==t.offset||void 0!==t.sort)return{limit:n,offset:t.offset,sort:t.sort}}getSelectedAttributes(e,t){return(0,o.filterTruthy)(Object.values(t).map(t=>{let{fieldName:r}=(0,b.parseSelectionSetField)(t.name);return e.findAttribute(r)}))}getWhereArgs(e,t){let r=(0,o.isRecord)(e.args.where)?e.args.where:{};if("_entities"===e.name&&t){let{__typename:e,...n}=t;return{...n,...r}}return r}}t.OperationsFactory=_},96303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregateFactory=void 0;let n=r(43232),i=r(87935),o=r(81069),a=r(49125),s=r(13750),l=r(21689),u=r(55107),c=r(23326),p=r(93457),d=r(86904);class f{constructor(e){this.queryASTFactory=e}createAggregationOperation(e,t,r){let d;d=e instanceof n.RelationshipAdapter?e.target:e;let f=this.queryASTFactory.operationsFactory.getWhereArgs(t);if(e instanceof n.RelationshipAdapter){if((0,p.isConcreteEntity)(d)){(0,i.checkEntityAuthentication)({entity:d.entity,targetOperations:["AGGREGATE"],context:r});let n=new u.RelationshipSelection({relationship:e,directed:!!(t.args?.directed??!0)}),a=new o.AggregationOperation({entity:e,directed:!!(t.args?.directed??!0),selection:n});return this.hydrateAggregationOperation({relationship:e,operation:a,entity:d,resolveTree:t,context:r,whereArgs:f})}{let n=(0,c.getConcreteEntities)(d,f),i=this.getAggregationParsedProjectionFields(e,t),o={...i.node?.fieldsByTypeName[e.operations.getAggregationFieldTypename("node")]},l=n.map(n=>{let i=new s.CompositeAggregationPartial({target:n,entity:e,directed:!!(t.args?.directed??!0)}),a=this.queryASTFactory.operationsFactory.getSelectedAttributes(n,o),l=this.queryASTFactory.authorizationFactory.getAuthFilters({entity:n,operations:["AGGREGATE"],context:r,attributes:a});return i.addAuthFilters(...l),i}),u=new a.CompositeAggregationOperation({compositeEntity:d,children:l});return this.hydrateAggregationOperation({relationship:e,entity:d,resolveTree:t,context:r,operation:u,whereArgs:f}),u}}if((0,p.isConcreteEntity)(d)){let e;e=r.resolveTree.args.fulltext||r.resolveTree.args.phrase?this.queryASTFactory.operationsFactory.getFulltextSelection(d,r):new l.NodeSelection({target:d,alias:"this"});let n=new o.AggregationOperation({entity:d,directed:!!(t.args?.directed??!0),selection:e}),i=this.getAggregationParsedProjectionFields(d,t),a=this.queryASTFactory.fieldFactory.createAggregationFields(d,i.fields);n.setFields(a);let s=this.queryASTFactory.operationsFactory.getWhereArgs(t),u=this.queryASTFactory.authorizationFactory.getAuthFilters({entity:d,operations:["AGGREGATE"],attributes:this.queryASTFactory.operationsFactory.getSelectedAttributes(d,i.fields),context:r}),c=this.queryASTFactory.filterFactory.createNodeFilters(d,s);n.addFilters(...c),n.addAuthFilters(...u);let p=this.queryASTFactory.operationsFactory.getOptions(d,t.args.options??{});if(p){let e=this.queryASTFactory.sortAndPaginationFactory.createSortFields(p,d,r);n.addSort(...e);let t=this.queryASTFactory.sortAndPaginationFactory.createPagination(p);t&&n.addPagination(t)}return n}{let e=(0,c.getConcreteEntities)(d,f),n=this.getAggregationParsedProjectionFields(d,t),i=e.map(e=>{let i=new s.CompositeAggregationPartial({target:e,directed:!!(t.args?.directed??!0)}),o=this.queryASTFactory.authorizationFactory.getAuthFilters({entity:e,operations:["AGGREGATE"],attributes:this.queryASTFactory.operationsFactory.getSelectedAttributes(e,n.fields),context:r});return i.addAuthFilters(...o),i}),o=new a.CompositeAggregationOperation({compositeEntity:d,children:i});return this.hydrateAggregationOperation({entity:d,resolveTree:t,context:r,operation:o,whereArgs:f})}}getAggregationParsedProjectionFields(e,t){let r={...t.fieldsByTypeName[e.operations.getAggregationFieldTypename()]};return this.queryASTFactory.operationsFactory.splitConnectionFields(r)}hydrateAggregationOperation({relationship:e,entity:t,operation:r,resolveTree:n,context:i,whereArgs:o}){if(e){let a=this.getAggregationParsedProjectionFields(e,n),s={...a.edge?.fieldsByTypeName[e.operations.getAggregationFieldTypename("edge")]},l={...a.node?.fieldsByTypeName[e.operations.getAggregationFieldTypename("node")]},u=this.queryASTFactory.fieldFactory.createAggregationFields(t,a.fields),c=this.queryASTFactory.fieldFactory.createAggregationFields(t,l),p=this.queryASTFactory.fieldFactory.createAggregationFields(e,s);if((0,d.isInterfaceEntity)(t)){let e=this.queryASTFactory.filterFactory.createInterfaceNodeFilters({entity:t,whereFields:o});r.addFilters(...e)}else{let e=this.queryASTFactory.filterFactory.createNodeFilters(t,o);r.addFilters(...e);let n=this.queryASTFactory.operationsFactory.getSelectedAttributes(t,l),a=this.queryASTFactory.authorizationFactory.getAuthFilters({entity:t,operations:["AGGREGATE"],attributes:n,context:i});r.addAuthFilters(...a)}r.setFields(u),r.setNodeFields(c),r.setEdgeFields(p)}else{let e={...n.fieldsByTypeName[t.operations.aggregateTypeNames.selection]},a=this.queryASTFactory.fieldFactory.createAggregationFields(t,e);if((0,d.isInterfaceEntity)(t)){let e=this.queryASTFactory.filterFactory.createInterfaceNodeFilters({entity:t,whereFields:o});r.addFilters(...e)}else{let e=this.queryASTFactory.filterFactory.createNodeFilters(t,o);r.addFilters(...e);let n=this.queryASTFactory.authorizationFactory.getAuthFilters({entity:t,operations:["AGGREGATE"],context:i});r.addAuthFilters(...n)}r.setFields(a)}let a=this.queryASTFactory.operationsFactory.getOptions(t,n.args.options??{});if(a){let e=this.queryASTFactory.sortAndPaginationFactory.createSortFields(a,t,i);r.addSort(...e);let n=this.queryASTFactory.sortAndPaginationFactory.createPagination(a);n&&r.addPagination(n)}return r}}t.AggregateFactory=f},11739:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionFactory=void 0;let n=r(14364),i=r(1109),o=r(44766),a=r(66007),s=r(99030),l=r(64494),u=r(87935),c=r(86288),p=r(43203),d=r(64891),f=r(21689),h=r(55107),y=r(23326),m=r(35596),v=r(86904),g=r(93831),b=r(42447),_=r(33204),T=r(17607),E=r(37961);class O{constructor(e){this.queryASTFactory=e,this.fulltextFactory=new E.FulltextFactory(e)}createCompositeConnectionOperationAST({relationship:e,target:t,resolveTree:r,context:n}){let o;let a=r.args.directed,s=this.queryASTFactory.operationsFactory.getWhereArgs(r);o=(0,v.isInterfaceEntity)(t)?(0,i.isObject)(s)?s.node:{}:s;let l=(0,y.getConcreteEntities)(t,o).map(t=>{let i,o;e?(i=new h.RelationshipSelection({relationship:e,directed:a,targetOverride:t}),o=this.parseConnectionFields({entityOrRel:e,target:t,resolveTree:r})):(i=new f.NodeSelection({target:t}),o=this.parseConnectionFields({entityOrRel:t,target:t,resolveTree:r}));let l=new p.CompositeConnectionPartial({relationship:e,target:t,selection:i});return this.hydrateConnectionOperationAST({relationship:e,target:t,resolveTree:r,context:n,operation:l,whereArgs:s,resolveTreeEdgeFields:o})}),u=new d.CompositeConnectionReadOperation(l);return this.hydrateConnectionOperationsASTWithSort({entityOrRel:e??t,resolveTree:r,operation:u,context:n}),u}createConnectionOperationAST({relationship:e,target:t,resolveTree:r,context:n}){let i,o;if(!(t instanceof l.ConcreteEntityAdapter))return this.createCompositeConnectionOperationAST({relationship:e,target:t,resolveTree:r,context:n});let a=this.queryASTFactory.operationsFactory.getWhereArgs(r);(0,u.checkEntityAuthentication)({entity:t.entity,targetOperations:["READ"],context:n}),e?(i=new h.RelationshipSelection({relationship:e,directed:r.args.directed}),o=this.parseConnectionFields({entityOrRel:e,target:t,resolveTree:r})):(i=n.resolveTree.args.fulltext||n.resolveTree.args.phrase?this.fulltextFactory.getFulltextSelection(t,n):new f.NodeSelection({target:t}),o=this.parseConnectionFields({entityOrRel:t,target:t,resolveTree:r}));let s=new c.ConnectionReadOperation({relationship:e,target:t,selection:i});return this.hydrateConnectionOperationAST({relationship:e,target:t,resolveTree:r,context:n,operation:s,whereArgs:a,resolveTreeEdgeFields:o})}hydrateConnectionOperationsASTWithSort({entityOrRel:e,resolveTree:t,operation:r,context:n}){let a;let s=(0,g.isRelationshipEntity)(e)?e.target:e;a=(0,b.isUnionEntity)(s)?t.args:this.getConnectionOptions(s,t.args);let l=a?.first,u=a?.sort,c=a?.after,p=(0,i.isString)(c)?(0,o.cursorToOffset)(c)+1:void 0;if(l||p){let e=this.queryASTFactory.sortAndPaginationFactory.createPagination({limit:l,offset:p});e&&r.addPagination(e)}return u&&u.forEach(t=>{let i=this.queryASTFactory.sortAndPaginationFactory.createConnectionSortFields(t,e,n);r.addSort(i)}),r}normalizeResolveTreeForTopLevelConnection(e){let t=Object.assign({},e);return t.args.sort&&(t.args.sort=e.args.sort.map(e=>({node:e}))),t.args.where&&(t.args.where={node:e.args.where}),t}splitConnectionFields(e){let t,r;let n={};return Object.entries(e).forEach(([e,i])=>{"node"===i.name?t=i:"edge"===i.name?r=i:n[e]=i}),{node:t,edge:r,fields:n}}getConnectionOptions(e,t){let r=e.annotations.limit,n=t?.first??r?.default??r?.max;n instanceof a.Integer&&(n=n.toNumber());let i=r?.max;if(void 0!==n&&void 0!==i&&(n=Math.min(n,i)),void 0!==n||void 0!==t.after||void 0!==t.sort)return{first:n,after:t.after,sort:t.sort}}hydrateConnectionOperationAST({relationship:e,target:t,resolveTree:r,context:n,operation:i,whereArgs:o,resolveTreeEdgeFields:a}){let l=e??t,u=(0,_.findFieldsByNameInFieldsByTypeNameField)(a,"node"),c=(0,_.findFieldsByNameInFieldsByTypeNameField)(a,"properties");this.hydrateConnectionOperationsASTWithSort({entityOrRel:l,resolveTree:r,operation:i,context:n});let p=!e,d=[t.name,...t.compositeEntities.filter(e=>e instanceof s.InterfaceEntity).map(e=>e.name)];p||d.push(e.target.name);let f=(0,T.getFieldsByTypeName)(u,d),h=this.queryASTFactory.fieldFactory.createFields(t,f,n),y=[];if(!p&&e.propertiesTypeName){let t=(0,T.getFieldsByTypeName)(c,[e.propertiesTypeName]);y=this.queryASTFactory.fieldFactory.createFields(e,t,n)}let m=this.queryASTFactory.authorizationFactory.getAuthFilters({entity:t,operations:["READ"],attributes:this.queryASTFactory.operationsFactory.getSelectedAttributes(t,f),context:n}),v=this.queryASTFactory.filterFactory.createConnectionPredicates({rel:e,entity:t,where:o,context:n});return i.setNodeFields(h),i.setEdgeFields(y),i.addFilters(...v),i.addAuthFilters(...m),i}parseConnectionFields({target:e,resolveTree:t,entityOrRel:r}){let i=(0,m.getEntityInterfaces)(e),o=i.map(e=>t.fieldsByTypeName[e.operations.connectionFieldTypename]??{}),a={...t.fieldsByTypeName[r.operations.connectionFieldTypename]??t.fieldsByTypeName[r.operations.vectorTypeNames.connection]},s=(0,n.mergeDeep)([...o,a]),l=(0,_.findFieldsByNameInFieldsByTypeNameField)(s,"edges"),u=i.map(e=>(0,T.getFieldsByTypeName)(l,`${e.name}Edge`)),c=(0,T.getFieldsByTypeName)(l,r.operations.relationshipFieldTypename);return(0,n.mergeDeep)([...u,c])}}t.ConnectionFactory=O},43614:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateFactory=void 0;let i=n(r(52462)),o=r(14178),a=r(89369),s=r(70597),l=r(81360),u=r(71148),c=r(93457),p=r(33169),d=r(69634);class f{constructor(e){this.queryASTFactory=e}createCreateOperation(e,t,r){let n=Object.values(t.fieldsByTypeName[e.operations.mutationResponseTypeNames.create]??{}),i=new l.CreateOperation({target:e}),o=n.filter(t=>t.name===e.plural).map(t=>this.queryASTFactory.operationsFactory.createReadOperation({entityOrRel:e,resolveTree:t,context:r}));return i.addProjectionOperations(o),i}createUnwindCreateOperation(e,t,r){let n=Object.values(t.fieldsByTypeName[e.operations.mutationResponseTypeNames.create]??{}),o=t.args.input??[],a=this.parseUnwindCreate({target:e,input:o,context:r,argumentToUnwind:new i.default.Param(o)}),s=n.filter(t=>t.name===e.plural).map(t=>this.queryASTFactory.operationsFactory.createReadOperation({entityOrRel:e,resolveTree:t,context:r}));return a.addProjectionOperations(s),a}parseUnwindCreate({target:e,relationship:t,input:r,context:n,argumentToUnwind:i}){let o=!!t,a=new u.UnwindCreateOperation({target:t??e,argumentToUnwind:i});return this.addEntityAuthorization({entity:e,context:n,unwindCreate:a}),this.addAuthorizationsForAttributes({target:e,context:n,unwindCreate:a,isNested:o}),this.hydrateUnwindCreateOperation({target:e,relationship:t,input:r,unwindCreate:a,context:n}),a}hydrateUnwindCreateOperation({target:e,relationship:t,input:r,unwindCreate:n,context:i}){let s=!!t;[e,t].forEach(e=>this.addAutogeneratedFields({target:e,unwindCreate:n})),(0,o.asArray)(r).forEach(r=>{let o=this.getInputNode(r,s);for(let r of((0,p.raiseAttributeAmbiguity)(Object.keys(o),e),(0,p.raiseAttributeAmbiguity)(Object.keys(this.getInputEdge(e)),t),Object.keys(o))){let t=e.relationships.get(r),l=e.attributes.get(r);if(!l&&!t)throw Error(`Transpile Error: Input field ${r} not found in entity ${e.name}`);if(l)this.parseAttributeInputField({target:e,attribute:l,unwindCreate:n});else if(t){let e=t.target;(0,c.assertIsConcreteEntity)(e);let l=n.getField(r,"node"),p=o[r]?.create;l&&l instanceof a.MutationOperationField&&l.mutationOperation instanceof u.UnwindCreateOperation?this.hydrateUnwindCreateOperation({target:e,relationship:t,input:p,unwindCreate:l.mutationOperation,context:i}):this.addRelationshipInputFieldToUnwindOperation({relationship:t,unwindCreate:n,context:i,nestedCreateInput:p,isNested:s})}}if(t)for(let e of Object.keys(this.getInputEdge(r))){let r=t.attributes.get(e);r&&this.parseAttributeInputField({target:t,attribute:r,unwindCreate:n})}})}getInputNode(e,t){return t?e.node??{}:e}getInputEdge(e){return e.edge??{}}addAutogeneratedFields({target:e,unwindCreate:t}){if(!e)return;let r=(0,c.isConcreteEntity)(e)?"node":"relationship";(0,d.getAutogeneratedFields)(e).forEach(e=>{t.getField(e.name,r)||t.addField(e,r)})}parseAttributeInputField({target:e,attribute:t,unwindCreate:r}){let n=(0,c.isConcreteEntity)(e);this.addAttributeInputFieldToUnwindOperation({attribute:t,unwindCreate:r,pathStr:n?"edge":"node",attachedTo:n?"node":"relationship"})}getEdgeOrNodePath({unwindVariable:e,isNested:t,isRelField:r}){if(!t&&r)throw Error("Transpile error: invalid invoke of getEdgeOrNodePath for relationship field.");return t?e.property(r?"edge":"node"):e}addAttributeInputFieldToUnwindOperation({attribute:e,unwindCreate:t,attachedTo:r}){if(t.getField(e.name,r))return;let n=new s.PropertyInputField({attribute:e,attachedTo:r});t.addField(n,r)}addRelationshipInputFieldToUnwindOperation({relationship:e,unwindCreate:t,context:r,nestedCreateInput:n,isNested:i}){if(!t.getField(e.name,"node")){if(n){let o=this.getEdgeOrNodePath({unwindVariable:t.getUnwindVariable(),isNested:i,isRelField:!1}).property(e.name).property("create"),s=this.parseUnwindCreate({target:e.target,relationship:e,input:n,argumentToUnwind:o,context:r}),l=new a.MutationOperationField(e.name,s);t.addField(l,"node")}else throw Error(`Expected create operation, but found: ${e.name}`)}}addEntityAuthorization({entity:e,context:t,unwindCreate:r}){let n=this.queryASTFactory.authorizationFactory.createAuthValidateRule({entity:e,authAnnotation:e.annotations.authorization,when:"AFTER",operations:["CREATE"],context:t});n&&r.addAuthFilters(n)}addAttributeAuthorization({attribute:e,context:t,unwindCreate:r,entity:n,conditionForEvaluation:i}){let o=this.queryASTFactory.authorizationFactory.createAuthValidateRule({entity:n,when:"AFTER",authAnnotation:e.annotations.authorization,conditionForEvaluation:i,operations:["CREATE"],context:t});o&&r.addAuthFilters(o)}addAuthorizationsForAttributes({target:e,context:t,unwindCreate:r,isNested:n}){let o=this.getEdgeOrNodePath({unwindVariable:r.getUnwindVariable(),isRelField:!1,isNested:n});for(let n of e.attributes.values()){let a=o.property(n.name);this.addAttributeAuthorization({attribute:n,context:t,unwindCreate:r,entity:e,conditionForEvaluation:i.default.isNotNull(a)})}}}t.CreateFactory=f},60650:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCypherFactory=void 0;let n=r(2364),i=r(26609),o=r(96206),a=r(85050),s=r(73406),l=r(96364),u=r(7420),c=r(21689),p=r(93457);class d{constructor(e){this.queryASTFactory=e}createCustomCypherOperation({resolveTree:e,context:t,entity:r,cypherAttributeField:n,cypherArguments:d={}}){let f=new u.CustomCypherSelection({operationField:n,rawArguments:d,isNested:!0});if(!r)return new a.CypherScalarOperation(f,n,!0);if((0,p.isConcreteEntity)(r)){let i=new o.CypherOperation({cypherAttributeField:n,target:r,selection:f});return e?this.queryASTFactory.operationsFactory.hydrateReadOperation({entity:r,operation:i,resolveTree:e,context:t,whereArgs:{}}):i}let h=r.concreteEntities.map(r=>{let n=new c.NodeSelection({target:r,useContextTarget:!0}),o=new l.CompositeReadPartial({target:r,selection:n});return(o.addFilters(new i.TypenameFilter([r])),e)?this.queryASTFactory.operationsFactory.hydrateReadOperation({entity:r,operation:o,resolveTree:e,context:t,whereArgs:{}}):o});return new s.CompositeCypherOperation({selection:f,partials:h,cypherAttributeField:n})}createTopLevelCustomCypherOperation({resolveTree:e,context:t,entity:r}){let d=t.schemaModel.operations.Query?.findAttribute(e.name)??t.schemaModel.operations.Mutation?.findAttribute(e.name);if(!d)throw Error(`Failed to collect information about the operation field with name: ${e.name}`);let f=new n.AttributeAdapter(d),h=new u.CustomCypherSelection({operationField:f,rawArguments:e.args,isNested:!1});if(!r)return new a.CypherScalarOperation(h,f,!1);if((0,p.isConcreteEntity)(r)){let n=new o.CypherOperation({cypherAttributeField:f,target:r,selection:h});return this.queryASTFactory.operationsFactory.hydrateReadOperation({entity:r,operation:n,resolveTree:e,context:t,whereArgs:{}})}let y=r.concreteEntities.map(r=>{let n=new c.NodeSelection({target:r,useContextTarget:!0}),o=new l.CompositeReadPartial({target:r,selection:n});return o.addFilters(new i.TypenameFilter([r])),this.queryASTFactory.operationsFactory.hydrateReadOperation({entity:r,operation:o,resolveTree:e,context:t,whereArgs:{}})});return new s.CompositeCypherOperation({selection:h,partials:y,cypherAttributeField:f})}}t.CustomCypherFactory=d},72181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteFactory=void 0;let n=r(14364),i=r(14178),o=r(87935),a=r(24670),s=r(21689),l=r(55107),u=r(23326),c=r(86904),p=r(42447);class d{constructor(e){this.queryASTFactory=e}parseDeleteArgs(e,t){let r=(0,i.isRecord)(e.where)?e.where:{};return{whereArg:t?{node:r.node??{},edge:r.edge??{}}:{node:r,edge:{}},deleteArg:(0,i.isRecord)(e.delete)?e.delete:{}}}createTopLevelDeleteOperation({entity:e,resolveTree:t,context:r,varName:n}){(0,o.checkEntityAuthentication)({entity:e.entity,targetOperations:["DELETE"],context:r});let{whereArg:i,deleteArg:l}=this.parseDeleteArgs(t.args,!1),u=new s.NodeSelection({target:e,alias:n}),c=this.queryASTFactory.filterFactory.createNodeFilters(e,i.node),p=this.queryASTFactory.authorizationFactory.getAuthFilters({entity:e,operations:["DELETE"],context:r}),d=this.createNestedDeleteOperations(l,e,r);return new a.DeleteOperation({target:e,selection:u,filters:c,authFilters:p,nestedOperations:d})}createNestedDeleteOperationsForInterface({deleteArg:e,relationship:t,target:r,context:n}){return r.concreteEntities.flatMap(i=>this.createNestedDeleteOperation({relationship:t,target:i,args:e,context:n,partialOf:r}))}createNestedDeleteOperationsForUnion({deleteArg:e,relationship:t,target:r,context:i}){return(0,u.getConcreteEntities)(r,e).flatMap(r=>(0,n.asArray)(e[r.name]).flatMap(e=>this.createNestedDeleteOperation({relationship:t,target:r,args:e,context:i})))}createNestedDeleteOperations(e,t,r){return(0,i.filterTruthy)(Object.entries(e).flatMap(([e,i])=>(0,n.asArray)(i).flatMap(n=>{let i=t.findRelationship(e);if(!i)throw Error(`Failed to find relationship ${e}`);let o=i.target;return(0,c.isInterfaceEntity)(o)?this.createNestedDeleteOperationsForInterface({deleteArg:n,relationship:i,target:o,context:r}):(0,p.isUnionEntity)(o)?this.createNestedDeleteOperationsForUnion({deleteArg:n,relationship:i,target:o,context:r}):this.createNestedDeleteOperation({relationship:i,target:o,args:n,context:r})})))}createNestedDeleteOperation({relationship:e,target:t,args:r,context:n,partialOf:i}){let{whereArg:s,deleteArg:u}=this.parseDeleteArgs(r,!0);(0,o.checkEntityAuthentication)({entity:t.entity,targetOperations:["DELETE"],context:n});let p=new l.RelationshipSelection({relationship:e,directed:!0,optional:!0,targetOverride:t}),d=[...i&&(0,c.isInterfaceEntity)(i)?this.queryASTFactory.filterFactory.createInterfaceNodeFilters({entity:i,targetEntity:t,whereFields:s.node}):this.queryASTFactory.filterFactory.createNodeFilters(t,s.node),...this.queryASTFactory.filterFactory.createEdgeFilters(e,s.edge)],f=this.queryASTFactory.authorizationFactory.getAuthFilters({entity:t,operations:["DELETE"],context:n}),h=this.createNestedDeleteOperations(u,t,n);return[new a.DeleteOperation({target:t,selection:p,filters:d,authFilters:f,nestedOperations:h})]}}t.DeleteFactory=d},37961:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FulltextFactory=void 0;let i=n(r(52462)),o=r(14178),a=r(87935),s=r(81227),l=r(67620),u=r(95097),c=r(30391);class p{constructor(e){this.queryASTFactory=e}createFulltextOperation(e,t,r){let n,i,p=this.queryASTFactory.operationsFactory.getWhereArgs(t),d=t.args.options||{},f=t.fieldsByTypeName,h=this.getFulltextOptions(r),y=t.fieldsByTypeName[e.operations.fulltextTypeNames.result];if(y){let t=p.score;p=p[e.singular]||{};let r=y.score,a=y[e.singular]||{};d={limit:d.limit,offset:d.offset,sort:(0,o.filterTruthy)((d.sort||[]).map(t=>t[e.singular]||t))},f=a.fieldsByTypeName||{},r&&(n=new s.ScoreField({alias:r.alias,score:h.score})),t&&(i=new l.ScoreFilter({scoreVariable:h.score,min:t.min,max:t.max}))}(0,a.checkEntityAuthentication)({entity:e.entity,targetOperations:["READ"],context:r});let m=new c.FulltextSelection({target:e,fulltext:h,scoreVariable:h.score}),v=new u.FulltextOperation({target:e,scoreField:n,selection:m});i&&v.addFilters(i),this.queryASTFactory.operationsFactory.hydrateOperation({operation:v,entity:e,fieldsByTypeName:f,context:r,whereArgs:p});let g=this.queryASTFactory.operationsFactory.getOptions(e,d);if(g){let t=this.queryASTFactory.sortAndPaginationFactory.createSortFields(g,e,r,h.score);v.addSort(...t);let n=this.queryASTFactory.sortAndPaginationFactory.createPagination(g);n&&v.addPagination(n)}return v}getFulltextSelection(e,t){let r=this.getFulltextOptions(t);return new c.FulltextSelection({target:e,fulltext:r,scoreVariable:r.score})}getFulltextOptions(e){if(e.fulltext){let t=e.fulltext.indexName??e.fulltext.name;if(void 0===t)throw Error("The name of the fulltext index should be defined using the indexName argument.");let r=e.resolveTree.args.phrase;if(!r||"string"!=typeof r)throw Error("Invalid phrase");return{index:t,phrase:r,score:e.fulltext.scoreVariable}}let t=Object.entries(e.resolveTree.args.fulltext||{});if(t.length>1)throw Error("Can only call one search at any given time");let[r,n]=t[0];return{index:r,phrase:n.phrase,score:new i.default.Variable}}}t.FulltextFactory=p},12699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadFactory=void 0;let n=r(43232),i=r(87935),o=r(73445),a=r(88480),s=r(96364),l=r(21689),u=r(55107),c=r(23326),p=r(13842),d=r(93457);class f{constructor(e){this.queryASTFactory=e}createReadOperation({entityOrRel:e,resolveTree:t,context:r,varName:f,reference:h}){let y=e instanceof n.RelationshipAdapter?e.target:e,m=e instanceof n.RelationshipAdapter?e:void 0,v=this.queryASTFactory.operationsFactory.getWhereArgs(t,h);if((0,d.isConcreteEntity)(y)){let e;(0,i.checkEntityAuthentication)({entity:y.entity,targetOperations:["READ"],context:r}),e=m?new u.RelationshipSelection({relationship:m,directed:!!(t.args?.directed??!0)}):new l.NodeSelection({target:y,alias:f});let n=new o.ReadOperation({target:y,relationship:m,selection:e});return this.hydrateReadOperation({operation:n,entity:y,resolveTree:t,context:r,whereArgs:v})}{let e=(0,c.getConcreteEntities)(y,v).map(e=>{let n;n=m?new u.RelationshipSelection({relationship:m,directed:!!(t.args?.directed??!0),targetOverride:e}):new l.NodeSelection({target:e,alias:f});let i=new s.CompositeReadPartial({target:e,relationship:m,selection:n}),o=(0,p.getConcreteWhere)(y,e,v);return this.hydrateReadOperation({operation:i,entity:e,resolveTree:t,context:r,whereArgs:o,partialOf:y})}),n=new a.CompositeReadOperation({compositeEntity:y,children:e,relationship:m});return this.hydrateCompositeReadOperationWithPagination(y,n,t,r),n}}hydrateReadOperation({entity:e,operation:t,resolveTree:r,context:n,whereArgs:i,partialOf:o}){return this.queryASTFactory.operationsFactory.hydrateOperation({entity:e,operation:t,context:n,whereArgs:i,fieldsByTypeName:r.fieldsByTypeName,sortArgs:r.args.options||{},partialOf:o})}hydrateCompositeReadOperationWithPagination(e,t,r,n){let i=this.queryASTFactory.operationsFactory.getOptions(e,r.args.options??{});if(i){let r=this.queryASTFactory.sortAndPaginationFactory.createSortFields(i,e,n);t.addSort(...r);let o=this.queryASTFactory.sortAndPaginationFactory.createPagination(i);o&&t.addPagination(o)}}}t.ReadFactory=f},50346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateFactory=void 0;let n=r(27075);class i{constructor(e){this.queryASTFactory=e}createUpdateOperation(e,t,r){let i=Object.values(t.fieldsByTypeName[e.operations.mutationResponseTypeNames.update]??{}),o=new n.UpdateOperation({target:e}),a=i.filter(t=>t.name===e.plural).map(t=>this.queryASTFactory.operationsFactory.createReadOperation({entityOrRel:e,resolveTree:t,context:r}));return o.addProjectionOperations(a),o}}t.UpdateFactory=i},19615:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorFactory=void 0;let n=r(58388),i=r(87935),o=r(81227),a=r(67620),s=r(8453),l=r(43712),u=r(85623),c=r(33204),p=r(17607);class d{constructor(e){this.queryASTFactory=e}createVectorOperation(e,t,r){let n;let a=this.queryASTFactory.operationsFactory.getWhereArgs(t)??{};(0,i.checkEntityAuthentication)({entity:e.entity,targetOperations:["READ"],context:r});let l=t.fieldsByTypeName[e.operations.vectorTypeNames.result];if(!l)throw Error("Vector result field not found");let u=(0,c.findFieldsByNameInFieldsByTypeNameField)(l,e.operations.rootTypeFieldNames.connection)[0];u.args=t.args;let d=(0,p.getFieldsByTypeName)(u,e.operations.vectorTypeNames.connection),f=(0,c.findFieldsByNameInFieldsByTypeNameField)(d,"edges"),h=(0,p.getFieldsByTypeName)(f,e.operations.vectorTypeNames.edge),y=(0,c.findFieldsByNameInFieldsByTypeNameField)(h,"score");y.length>0&&y[0]&&r.vector&&(n=new o.ScoreField({alias:y[0].alias,score:r.vector.scoreVariable}));let m=new s.VectorOperation({target:e,scoreField:n,selection:this.getVectorSelection(e,r)}),v=(0,p.getFieldsByTypeName)(f,e.operations.vectorTypeNames.edge);return this.addVectorScoreFilter({operation:m,context:r,whereArgs:a}),this.addScoreSort(m,u,r),this.queryASTFactory.operationsFactory.hydrateConnectionOperation({target:e,resolveTree:u,context:r,operation:m,whereArgs:a,resolveTreeEdgeFields:v}),m}addScoreSort(e,t,r){for(let i of t.args.sort??[])if(i[n.SCORE_FIELD]&&r?.vector){let t=new u.ScoreSort({scoreVariable:r.vector.scoreVariable,direction:i[n.SCORE_FIELD]});e.addSort({node:[t],edge:[]})}}addVectorScoreFilter({operation:e,whereArgs:t,context:r}){if(t.score&&r?.vector){let n=new a.ScoreFilter({scoreVariable:r.vector.scoreVariable,min:t.score.min,max:t.score.max});e.addFilters(n)}}getVectorSelection(e,t){let r=this.getVectorOptions(t);return new l.VectorSelection({target:e,vectorOptions:r,scoreVariable:r.score,settings:t.vector?.vectorSettings})}getVectorOptions(e){if(!e.vector)throw Error("Vector context is missing");if(e.resolveTree.args.vector){let t=e.resolveTree.args.vector;if(!Array.isArray(t)||!t.every(e=>"number"==typeof e))throw Error("Invalid vector");return{index:e.vector.index,vector:t,score:e.vector.scoreVariable}}let t=e.resolveTree.args.phrase;if(!t||"string"!=typeof t)throw Error("Invalid phrase");return{index:e.vector.index,phrase:t,score:e.vector.scoreVariable}}}t.VectorFactory=d},1743:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryASTFactory=void 0;let n=r(69412),i=r(3589),o=r(37417),a=r(57304),s=r(45111),l=r(17173),u=r(74430);class c{constructor(e){this.schemaModel=e,this.filterFactory=new s.FilterFactory(this),this.fieldFactory=new a.FieldFactory(this),this.sortAndPaginationFactory=new u.SortAndPaginationFactory(this);let t=new i.AuthFilterFactory(this);this.authorizationFactory=new o.AuthorizationFactory(t),this.operationsFactory=new l.OperationsFactory(this)}createQueryAST({resolveTree:e,entityAdapter:t,context:r,reference:i,varName:o,resolveAsUnwind:a=!1}){let s=this.operationsFactory.createTopLevelOperation({entity:t,resolveTree:e,context:r,varName:o,reference:i,resolveAsUnwind:a});return new n.QueryAST(s)}}t.QueryASTFactory=c},74430:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortAndPaginationFactory=void 0;let n=r(58388),i=r(43232),o=r(85050),a=r(69417),s=r(29999),l=r(13203),u=r(85623),c=r(93457),p=r(93831),d=r(42447);class f{constructor(e){this.queryASTFactory=e}createSortFields(e,t,r,n){return(e.sort||[])?.flatMap(e=>this.createPropertySort({optionArg:e,entity:t,context:r,scoreVariable:n}))}createConnectionSortFields(e,t,r){if((0,p.isRelationshipEntity)(t)){let n=this.createPropertySort({optionArg:e.node??{},entity:t.target,context:r});return{edge:this.createPropertySort({optionArg:e.edge||{},entity:t,context:r}),node:n}}return{edge:[],node:this.createPropertySort({optionArg:e.node??{},entity:t,context:r})}}createPagination(e){if(e.limit||e.offset)return new a.Pagination({skip:e.offset,limit:e.limit})}createPropertySort({optionArg:e,entity:t,context:r,scoreVariable:a}){return(0,d.isUnionEntity)(t)?[]:t instanceof i.RelationshipAdapter&&t.propertiesTypeName&&Object.keys(e).some(e=>(t.siblings||[]).includes(e))?e[t.propertiesTypeName]?this.createPropertySort({optionArg:e[t.propertiesTypeName],entity:t,context:r,scoreVariable:a}):[]:Object.entries(e).map(([e,i])=>{if(e===n.SCORE_FIELD&&a)return new u.ScoreSort({scoreVariable:a,direction:i});let p=t.findAttribute(e);if(!p)throw Error(`no filter attribute ${e}`);if(p.annotations.cypher&&(0,c.isConcreteEntity)(t)){let e=this.queryASTFactory.operationsFactory.createCustomCypherOperation({context:r,cypherAttributeField:p});if(!(e instanceof o.CypherScalarOperation))throw Error("Transpile error: sorting is supported only for scalar properties");return new s.CypherPropertySort({direction:i,attribute:p,cypherOperation:e})}return new l.PropertySort({direction:i,attribute:p})})}}t.SortAndPaginationFactory=f},33204:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findFieldsByNameInFieldsByTypeNameField=void 0,t.findFieldsByNameInFieldsByTypeNameField=function(e,t){return Object.values(e).filter(e=>e.name===t)}},69634:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutogeneratedFields=void 0;let n=r(87020),i=r(23266),o=r(93457);t.getAutogeneratedFields=function(e){let t=(0,o.isConcreteEntity)(e)?"node":"relationship",r=[];for(let o of e.attributes.values())o.timestampCreateIsGenerated()&&r.push(new i.TimestampField(o.name,o,t)),o.annotations.id&&r.push(new n.IdField(o.name,o,t));return r}},17607:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFieldsByTypeName=void 0;let n=r(14364);t.getFieldsByTypeName=function(e,t){return(0,n.mergeDeep)((0,n.asArray)(e).map(e=>(0,n.asArray)(t).reduce((t,r)=>({...t,...e?.fieldsByTypeName[r]}),{})))}},62715:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUnwindCreateSupported=t.UNSUPPORTED_REASON_CONNECT_OR_CREATE=t.UNSUPPORTED_REASON_CONNECT=t.UNSUPPORTED_REASON_POPULATED_BY=t.UNSUPPORTED_REASON_ABSTRACT_TYPES=t.UNSUPPORTED_REASON_SUBSCRIPTION=void 0;let n=r(14178),i=r(93457);t.UNSUPPORTED_REASON_SUBSCRIPTION="Unwind create optimization does not yet support subscriptions",t.UNSUPPORTED_REASON_ABSTRACT_TYPES="Abstract types are not yet supported",t.UNSUPPORTED_REASON_POPULATED_BY="Annotation: populatedBy is not yet supported",t.UNSUPPORTED_REASON_CONNECT="Operation: connect is not yet supported",t.UNSUPPORTED_REASON_CONNECT_OR_CREATE="Operation: connectOrCreate is not yet supported";let o={isSupported:!0,reason:""};function a(e){for(let r of e.attributes.values())if(r.annotations.populatedBy&&r.annotations.populatedBy.operations.includes("CREATE"))return{isSupported:!1,reason:t.UNSUPPORTED_REASON_POPULATED_BY};return o}t.isUnwindCreateSupported=function e(r,s,l){let u=l.subscriptionsEnabled?{isSupported:!1,reason:t.UNSUPPORTED_REASON_SUBSCRIPTION}:o;if(!u.isSupported)return u;let c=(0,i.isConcreteEntity)(r)?o:{isSupported:!1,reason:t.UNSUPPORTED_REASON_ABSTRACT_TYPES};if(!c.isSupported)return c;(0,i.assertIsConcreteEntity)(r);let p=a(r);if(!p.isSupported)return p;for(let i of s)for(let[s,u]of(i.node&&(i=i.node),Object.entries(i))){let i=r.relationships.get(s);if(i){let r=u.connect?{isSupported:!1,reason:t.UNSUPPORTED_REASON_CONNECT}:u.connectOrCreate?{isSupported:!1,reason:t.UNSUPPORTED_REASON_CONNECT_OR_CREATE}:o;if(!r.isSupported)return r;let s=a(i);if(!s.isSupported)return s;let c=e(i.target,(0,n.asArray)(u.create),l);if(!c.isSupported)return c}}return{isSupported:!0,reason:""}}},35402:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTopLevelOperationField=void 0;let n=r(86904),i=r(42447);t.parseTopLevelOperationField=function(e,t,r){return r?t.vector?"VECTOR":(0,n.isInterfaceEntity)(r)?function(e,t,r){let n=r.operations.rootTypeFieldNames;if(t.operations.Query?.findAttribute(e)||t.operations.Mutation?.findAttribute(e))return"CUSTOM_CYPHER";switch(e){case n.read:return"READ";case n.connection:return"CONNECTION";case n.aggregate:return"AGGREGATE";default:throw Error(`Interface does not support this operation: ${e}`)}}(e,t.schemaModel,r):(0,i.isUnionEntity)(r)?function(e,t,r){let n=r.operations.rootTypeFieldNames;if(t.operations.Query?.findAttribute(e)||t.operations.Mutation?.findAttribute(e))return"CUSTOM_CYPHER";if(e===n.read)return"READ";throw Error(`Union does not support this operation: ${e}`)}(e,t.schemaModel,r):function(e,t,r){let n=r.operations.rootTypeFieldNames;if(t.operations.Query?.findAttribute(e)||t.operations.Mutation?.findAttribute(e))return"CUSTOM_CYPHER";switch(e){case"_entities":case n.read:return"READ";case n.connection:return"CONNECTION";case n.aggregate:return"AGGREGATE";case n.create:return"CREATE";case n.update:return"UPDATE";case n.delete:return"DELETE";default:throw Error(`Type does not support this operation: ${e}`)}}(e,t.schemaModel,r):"CUSTOM_CYPHER"}},34857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelectionSetField=void 0;let r=/(?<fieldName>[_A-Za-z]\w*?)(?<isConnection>Connection)?(?<isAggregation>Aggregate)?$/;t.parseSelectionSetField=function(e){let t=r.exec(e),n=t?.groups;return{fieldName:n.fieldName,isConnection:!!n.isConnection,isAggregation:!!n.isAggregation}}},1540:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAggregationWhereFields=t.aggregationFieldRegEx=t.parseConnectionWhereFields=t.parseWhereField=t.whereRegEx=void 0,t.whereRegEx=/(?<prefix>\w*\.)?(?<fieldName>[_A-Za-z]\w*?)(?<isConnection>Connection)?(?<isAggregate>Aggregate)?(?:_(?<operator>NOT|NOT_IN|IN|NOT_INCLUDES|INCLUDES|MATCHES|NOT_CONTAINS|CONTAINS|NOT_STARTS_WITH|STARTS_WITH|NOT_ENDS_WITH|ENDS_WITH|LT|LTE|GT|GTE|DISTANCE|ALL|NONE|SINGLE|SOME))?$/,t.parseWhereField=function(e){let r;let n=t.whereRegEx.exec(e),i=n?.groups,o=!1;if(i.operator){let e=i.operator.split("NOT_");2===e.length?(o=!0,r=e[1]):"NOT"===i.operator||"NONE"===i.operator?(o=!0,"NONE"===i.operator&&(r=e[0])):r=e[0]}return{fieldName:i.fieldName,isAggregate:!!i.isAggregate,operator:r,isNot:o,prefix:i.prefix,isConnection:!!i.isConnection}},t.parseConnectionWhereFields=function(e){let t=e.split("_NOT"),r=t.length>1;return{fieldName:t[0],isNot:r}},t.aggregationFieldRegEx=/(?<fieldName>[_A-Za-z]\w*?)(?:_(?<aggregationOperator>AVERAGE|MAX|MIN|SUM|SHORTEST|LONGEST))?(?:_LENGTH)?(?:_(?<logicalOperator>EQUAL|GT|GTE|LT|LTE))?$/,t.parseAggregationWhereFields=function(e){let r=t.aggregationFieldRegEx.exec(e),n=r?.groups;return{fieldName:n.fieldName,aggregationOperator:n.aggregationOperator,logicalOperator:n.logicalOperator}}},31359:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasTarget=void 0,t.hasTarget=function(e){return void 0!==e.target}},4525:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createComparisonOperation=void 0;let i=n(r(52462));t.createComparisonOperation=function({operator:e,property:t,param:r}){switch(e){case"LT":return i.default.lt(t,r);case"LTE":return i.default.lte(t,r);case"GT":return i.default.gt(t,r);case"GTE":return i.default.gte(t,r);case"ENDS_WITH":return i.default.endsWith(t,r);case"STARTS_WITH":return i.default.startsWith(t,r);case"MATCHES":return i.default.matches(t,r);case"CONTAINS":return i.default.contains(t,r);case"IN":return i.default.in(t,r);case"INCLUDES":return i.default.in(r,t);case"EQ":return i.default.eq(t,r);default:throw Error(`Invalid operator ${e}`)}}},20631:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createRelationship=t.getEntityLabels=t.createNode=void 0;let i=n(r(52462)),o=r(64494),a=r(55672);t.createNode=function(e){return e?new i.default.NamedNode(e):new i.default.Node},t.getEntityLabels=function(e,t){let r=e instanceof o.ConcreteEntityAdapter?e.getLabels():[e.name];return t?(0,a.mapLabelsWithContext)(r,t):r},t.createRelationship=function(e){return e?new i.default.NamedRelationship(e):new i.default.Relationship}},23326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConcreteEntities=void 0;let n=r(93457),i=r(42447);t.getConcreteEntities=function(e,t){return(0,n.isConcreteEntity)(e)?[e]:(0,i.isUnionEntity)(e)&&t&&0!==Object.keys(t).length?function(e,t){let r=[];for(let n of e.concreteEntities)t[n.name]&&r.push(n);return r}(e,t):e.concreteEntities}},13842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConcreteWhere=void 0;let n=r(42447);t.getConcreteWhere=function(e,t,r){return r?(0,n.isUnionEntity)(e)?r[t.name]??{}:r:{}}},35596:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEntityInterfaces=void 0;let n=r(99030),i=r(67661),o=r(14178);t.getEntityInterfaces=function(e){return(0,o.filterTruthy)(e.compositeEntities.map(e=>{if(e instanceof n.InterfaceEntity)return new i.InterfaceEntityAdapter(e)}))}},93457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertIsConcreteEntity=t.isConcreteEntity=void 0;let n=r(64494);function i(e){return e instanceof n.ConcreteEntityAdapter}t.isConcreteEntity=i,t.assertIsConcreteEntity=function(e){if(!e||!i(e))throw Error("Transpile Error: Expected EntityAdapter to be a ConcreteEntityAdapter")}},86904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInterfaceEntity=void 0;let n=r(67661);t.isInterfaceEntity=function(e){return e instanceof n.InterfaceEntityAdapter}},93831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRelationshipEntity=void 0;let n=r(43232);t.isRelationshipEntity=function(e){return e instanceof n.RelationshipAdapter}},42447:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUnionEntity=void 0;let n=r(54627);t.isUnionEntity=function(e){return e instanceof n.UnionEntityAdapter}},33169:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raiseAttributeAmbiguity=void 0;let n=r(44706),i=r(93457);t.raiseAttributeAmbiguity=function(e,t){if(!t)return;let r={};e.forEach(e=>{if((0,i.isConcreteEntity)(t)&&t.relationships.get(e))return;let o=t.findAttribute(e)?.databaseName;if(void 0===o)throw Error(`Transpile Error: Impossible to translate property ${e} on entity ${t.name}`);if(r[o])throw new n.Neo4jGraphQLError(`Conflicting modification of ${[r[o],e].map(e=>`[[${e}]]`).join(", ")} on type ${t.name}`);r[o]=e})}},84737:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.replaceArgumentsInStatement=void 0;let i=n(r(52462));t.replaceArgumentsInStatement=function({env:e,definedArguments:t,rawArguments:r,statement:n}){let o=t.map(e=>e.name);if(0===o.length)return n;let a=RegExp(`\\$(${o.join("|")})\\b`,"g"),s=new Map;return n.replaceAll(a,(t,n)=>{let o=r[n];if(null==o)return"NULL";{let t=s.get(o);if(t)return t;let r=new i.default.Param(o).getCypher(e);return s.set(o,r),r}})}},66256:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSubqueryInCall=void 0;let i=n(r(52462));t.wrapSubqueryInCall=function(e,t){return new i.default.Call(e).importWith(t)}},1808:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSubqueriesInCypherCalls=void 0;let i=n(r(52462)),o=r(14178);t.wrapSubqueriesInCypherCalls=function(e,t,r){return(0,o.filterTruthy)(t.flatMap(t=>t.getSubqueries(e))).map(e=>{let t=new i.default.Call(e);return r&&t.importWith(...r),t})}},71614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConnectionEventMetaObject=t.createConnectionEventMeta=void 0;let n=r(58388);function i(e){return`${e} { .* }`}function o(e){let{event:t,relVariable:r,typename:n,fromVariable:o,toVariable:a}=e,s=`event: "${t}", timestamp: timestamp()`,l=`id_from: id(${o}), id_to: id(${a}), id: id(${r})`;return e.fromTypename?`{ ${[s,l,`relationshipName: "${n}", fromTypename: "${e.fromTypename}", toTypename: "${e.toTypename}"`,`properties: { from: ${i(o)}, to: ${i(a)}, relationship: ${i(r)} }`].join(", ")} }`:`{ ${[s,l,`relationshipName: ${n}, fromLabels: ${e.fromLabels}, toLabels: ${e.toLabels}`,`properties: { from: ${e.fromProperties}, to: ${e.toProperties}, relationship: ${i(r)} }`].join(", ")} }`}t.createConnectionEventMeta=function(e){return`${n.META_CYPHER_VARIABLE} + ${o(e)} AS ${n.META_CYPHER_VARIABLE}`},t.createConnectionEventMetaObject=o},77855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEventMetaObject=t.createEventMeta=void 0;let n=r(58388);function i({event:e,nodeVariable:t,typename:r}){let i=function({event:e,nodeVariable:t}){let r,i;switch(e){case"create":r="null",i=`${t} { .* }`;break;case"update":r=n.META_OLD_PROPS_CYPHER_VARIABLE,i=`${t} { .* }`;break;case"delete":r=`${t} { .* }`,i="null"}return`properties: { old: ${r}, new: ${i} }`}({event:e,nodeVariable:t});return`{ event: "${e}", id: id(${t}), ${i}, timestamp: timestamp(), typename: "${r}" }`}t.createEventMeta=function(e){return`${n.META_CYPHER_VARIABLE} + ${i(e)} AS ${n.META_CYPHER_VARIABLE}`},t.createEventMetaObject=i},17220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterMetaVariable=void 0;let n=r(58388);t.filterMetaVariable=function(e){return e.filter(e=>e!==n.META_CYPHER_VARIABLE)}},37260:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.translateAggregate=void 0;let i=n(r(19092)),o=r(58388),a=r(1743),s=(0,i.default)(o.DEBUG_TRANSLATE);t.translateAggregate=function({context:e,entityAdapter:t}){let{resolveTree:r}=e,n=new a.QueryASTFactory(e.schemaModel);if(!t)throw Error("Entity not found");let i=n.createQueryAST({resolveTree:r,entityAdapter:t,context:e});return s(i.print()),i.buildNew(e).build()}},3575:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(52462)),o=n(r(19092)),a=r(33602),s=r(58388),l=r(21477),u=r(14178),c=n(r(46717)),p=r(16397),d=r(1743),f=r(62715),h=n(r(97791)),y=r(64726),m=(0,o.default)(s.DEBUG_TRANSLATE);async function v({context:e,node:t}){let{resolveTree:r}=e,n=r.args.input,o=e.schemaModel.getConcreteEntityAdapter(t.name);if(!o)throw Error(`Transpilation error: ${t.name} is not a concrete entity`);let{isSupported:v,reason:g}=(0,f.isUnwindCreateSupported)(o,(0,u.asArray)(n),e);if(v)return(0,h.default)({context:e,entityAdapter:o});m(`Unwind create optimization not supported: ${g}`);let b=[],_=new a.CallbackBucket(e),T=[],E=n.map((e,t)=>`this${t}`),O=E.map(e=>new i.default.NamedNode(e)),{createStrs:S,params:w}=n.reduce((r,n,i)=>{let o=E[i],a=["CALL {"],l=[o];b.push(o),e.subscriptionsEnabled&&(a.push(`WITH [] AS ${s.META_CYPHER_VARIABLE}`),l.push(s.META_CYPHER_VARIABLE));let{create:u,params:p,authorizationPredicates:d,authorizationSubqueries:f}=(0,c.default)({input:n,node:t,context:e,varName:o,withVars:l,includeRelationshipValidation:!0,topLevelNodeVariable:o,callbackBucket:_});if(a.push(u),a.push(...(0,y.getAuthorizationStatements)(d,f)),e.subscriptionsEnabled){let e=`${o}_${s.META_CYPHER_VARIABLE}`;a.push(`RETURN ${o}, ${s.META_CYPHER_VARIABLE} AS ${e}`),T.push(e)}else a.push(`RETURN ${o}`);return a.push("}"),r.createStrs.push(a.join("\n")),r.params={...r.params,...p},r},{createStrs:[],params:{},withVars:[]});T.length>0&&b.push(`${T.join(" + ")} AS meta`);let I=new d.QueryASTFactory(e.schemaModel).createQueryAST({resolveTree:r,entityAdapter:o,context:e}),N=new p.QueryASTEnv,A=[],C=i.default.concat(...(0,u.filterTruthy)(O.map(t=>{let r=new p.QueryASTContext({target:t,env:N,neo4jGraphQLContext:e});m(I.print());let n=I.transpile(r);if(n.clauses.length){A.push(n.projectionExpr);let e=i.default.concat(...n.clauses);return new i.default.Call(e).importWith(t)}}))),P=function(e,t){let r=new i.default.Return;return e.length&&r.addColumns([new i.default.List(e),new i.default.NamedVariable("data")]),t.subscriptionsEnabled&&r.addColumns(new i.default.NamedVariable("meta")),e.length||t.subscriptionsEnabled||r.addColumns(new i.default.Literal("Query cannot conclude with CALL")),r}(A,e),R=new i.default.Raw(t=>[(0,u.filterTruthy)([`${S.join("\n")}`,e.subscriptionsEnabled?`WITH ${b.join(", ")}`:"",(0,l.compileCypherIfExists)(C,t),(0,l.compileCypherIfExists)(P,t)]).filter(Boolean).join("\n"),{...w}]).build("create_"),{cypher:D,params:F}=await _.resolveCallbacksAndFilterCypher({cypher:R.cypher});return{cypher:D,params:{...R.params,resolvedCallbacks:F}}}t.default=v},73789:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.translateDelete=void 0;let i=n(r(52462)),o=n(r(19092)),a=r(58388),s=r(87935),l=n(r(58137)),u=r(1743),c=r(71614),p=r(77855),d=r(70395),f=(0,o.default)(a.DEBUG_TRANSLATE);function h({relVariable:e,fromVariable:t,toVariable:r}){return(0,c.createConnectionEventMetaObject)({event:"delete_relationship",relVariable:e,fromVariable:t,toVariable:r,typename:`type(${e})`,fromLabels:`labels(${t})`,toLabels:`labels(${r})`,toProperties:`properties(${r})`,fromProperties:`properties(${t})`})}t.translateDelete=function({context:e,node:t,entityAdapter:r}){let n="this",{resolveTree:o}=e;if(!e.subscriptionsEnabled)return function({context:e,entityAdapter:t,resolveTree:r,varName:n}){let i=new u.QueryASTFactory(e.schemaModel);if(!t)throw Error("Entity not found");let o=i.createQueryAST({resolveTree:r,entityAdapter:t,context:e,varName:n});return f(o.print()),o.build(e,n).build()}({context:e,entityAdapter:r,resolveTree:o,varName:n});let c=o.args.delete,y="",m="",v={},g=[n];e.subscriptionsEnabled&&g.push(a.META_CYPHER_VARIABLE);let b=o.args.where,_=new i.default.NamedNode(n),T=new i.default.Pattern(_,{labels:t.getLabels(e)}),E=(0,d.translateTopLevelMatch)({matchNode:_,matchPattern:T,node:t,context:e,operation:"DELETE",where:b});if(y=E.cypher,v={...v,...E.params},c){let r=(0,l.default)({context:e,node:t,deleteInput:c,varName:n,parentVar:n,withVars:g,parameterPrefix:`${n}_${o.name}.args.delete`});[m]=r,v={...v,...m.includes(o.name)?{[`${n}_${o.name}`]:{args:{delete:c}}}:{},...r[1]}}else(0,s.checkAuthentication)({context:e,node:t,targetOperations:["DELETE"]});return e.subscriptionsEnabled&&!c&&(m=`CALL {
	WITH ${n}
	OPTIONAL MATCH (${n})-[r]-()
	WITH ${n}, collect(DISTINCT r) AS relationships_to_delete
	UNWIND relationships_to_delete AS x
	WITH CASE
		WHEN id(${n})=id(startNode(x)) THEN ${h({relVariable:"x",fromVariable:n,toVariable:"endNode(x)"})}
		WHEN id(${n})=id(endNode(x)) THEN ${h({relVariable:"x",fromVariable:"startNode(x)",toVariable:n})}
	END AS meta
	RETURN collect(DISTINCT meta) AS relationship_meta
}
WITH REDUCE(m=meta, r IN relationship_meta | m + r) AS meta, ${n}`),new i.default.Raw(()=>{let r=(0,p.createEventMeta)({event:"delete",nodeVariable:n,typename:t.name});return[[...e.subscriptionsEnabled?[`WITH [] AS ${a.META_CYPHER_VARIABLE}`]:[],y,...e.subscriptionsEnabled?[`WITH ${n}, ${r}`]:[],m,`DETACH DELETE ${n}`,...e.subscriptionsEnabled?[`WITH collect(${a.META_CYPHER_VARIABLE}) AS ${a.META_CYPHER_VARIABLE}`,`WITH REDUCE(m=[], n IN ${a.META_CYPHER_VARIABLE} | m + n) AS ${a.META_CYPHER_VARIABLE}`,`RETURN ${a.META_CYPHER_VARIABLE}`]:[]].filter(Boolean).join("\n"),v]}).build(n)}},77735:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.translateRead=void 0;let i=n(r(19092)),o=r(58388),a=r(1743),s=(0,i.default)(o.DEBUG_TRANSLATE);t.translateRead=function({context:e,entityAdapter:t,varName:r}){let{resolveTree:n}=e,i=new a.QueryASTFactory(e.schemaModel).createQueryAST({resolveTree:n,entityAdapter:t,context:e,varName:r});return s(i.print()),i.build(e,r).build()}},30467:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.translateResolveReference=void 0;let i=n(r(19092)),o=r(1743),a=r(58388),s=(0,i.default)(a.DEBUG_TRANSLATE);t.translateResolveReference=function({entityAdapter:e,context:t,reference:r}){let{resolveTree:n}=t,i=new o.QueryASTFactory(t.schemaModel).createQueryAST({resolveTree:n,entityAdapter:e,context:t,reference:r,varName:"this"});return s(i.print()),i.build(t,"this").build()}},89128:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.translateTopLevelCypher=void 0;let i=n(r(52462)),o=n(r(19092)),a=r(58388),s=r(62437),l=r(42322),u=r(16397),c=r(1743),p=(0,o.default)(a.DEBUG_TRANSLATE);t.translateTopLevelCypher=function({context:e,field:t,type:r}){let n=e.schemaModel.operations[r];if(!n)throw Error(`Failed to find operation ${r} in Schema Model.`);let o=n.findAttribute(t.fieldName);if(!o)throw Error(`Failed to find field ${t.fieldName} on operation ${r}.`);let a=e.schemaModel.entities.get(t.typeMeta.name),d=o.annotations.authentication;d&&(0,l.applyAuthentication)({context:e,annotation:d,targetOperations:"Query"===r?["READ"]:["CREATE","UPDATE","DELETE"]});let{resolveTree:f}=e,h=a&&(0,s.getEntityAdapter)(a),y=new c.QueryASTFactory(e.schemaModel).createQueryAST({resolveTree:f,entityAdapter:h,context:e,varName:"this"}),m=new u.QueryASTEnv,v=new i.default.NamedNode("this"),g=new u.QueryASTContext({target:v,env:m,neo4jGraphQLContext:e,returnVariable:v,shouldCollect:!1,shouldDistinct:!1});p(y.print());let b=y.transpile(g);return(b.clauses.length?i.default.concat(...b.clauses):new i.default.Return(new i.default.Literal("Query cannot conclude with CALL"))).build()}},70395:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.translateTopLevelMatch=void 0;let i=n(r(52462)),o=r(58388),a=r(8593),s=r(44079),l=r(93538);t.translateTopLevelMatch=function({matchNode:e,matchPattern:t,node:r,context:n,operation:u,where:c}){let{matchClause:p,preComputedWhereFieldSubqueries:d,whereClause:f}=function({matchNode:e,matchPattern:t,node:r,context:n,operation:u,where:c}){let p,d;let{resolveTree:f}=n,h=f.args.fulltext||{},y=new i.default.Match(t),m=[],v=Object.entries(h);if(v.length){if(v.length>1)throw Error("Can only call one search at any given time");let[t,o]=v[0],a=new i.default.Param(o.phrase);y=i.default.db.index.fulltext.queryNodes(t,a).yield(["node",e]),m=r.getLabels(n).map(t=>i.default.in(new i.default.Param(t),i.default.labels(e)))}else n.fulltext&&({matchClause:y,whereOperators:m}=function(e,t,r,n){if(!n.fulltext)throw Error("Full-text context not defined");let a=n.fulltext.indexName||n.fulltext.name;if(void 0===a)throw Error("The name of the fulltext index should be defined using the indexName argument.");let s=new i.default.Param(n.resolveTree.args.phrase),l=n.fulltext.scoreVariable,u=i.default.db.index.fulltext.queryNodes(a,s).yield(["node",e],["score",l]),c=r.getLabels(n),p=e.hasLabels(...c),d=[];if(t?.[o.SCORE_FIELD]){if(t[o.SCORE_FIELD].min||0===t[o.SCORE_FIELD].min){let e=i.default.gte(l,new i.default.Param(t[o.SCORE_FIELD].min));e&&d.push(e)}if(t[o.SCORE_FIELD].max||0===t[o.SCORE_FIELD].max){let e=i.default.lte(l,new i.default.Param(t[o.SCORE_FIELD].max));e&&d.push(e)}}return p&&d.push(p),{matchClause:u,whereOperators:d}}(e,c,r,n),c=c?.[r.singular]);let g=(0,s.createAuthorizationBeforePredicate)({context:n,nodes:[{variable:e,node:r}],operations:[u]});if(p=g?.predicate?new i.default.With("*"):y,c){let t=(0,a.getEntityAdapterFromNode)(r,n),{predicate:o,preComputedSubqueries:s}=(0,l.createWhereNodePredicate)({targetElement:e,whereInput:c,context:n,entity:t});(d=s)&&!d.empty&&(p=new i.default.With("*")),o&&p.where(o)}if(m&&m.length){let e=i.default.and(...m);p.where(e)}if(g){let{predicate:e,preComputedSubqueries:t}=g;e&&p.where(e),t&&!t.empty&&(d=i.default.concat(d,t))}return y===p&&(p=void 0),{matchClause:y,preComputedWhereFieldSubqueries:d,whereClause:p}}({matchNode:e,matchPattern:t,node:r,context:n,operation:u,where:c});return i.default.concat(p,d,f).build()}},47062:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(52462)),o=n(r(19092)),a=r(33602),s=r(58388),l=r(71614),u=r(17220),c=r(21477),p=n(r(71277)),d=r(4850),f=n(r(46717)),h=n(r(58137)),y=n(r(80517)),m=r(32354),v=n(r(67749)),g=n(r(37732)),b=r(16397),_=r(1743),T=r(70395),E=r(64726),O=(0,o.default)(s.DEBUG_TRANSLATE);async function S({node:e,context:t}){let{resolveTree:r}=t,n=r.args.update,o=r.args.connect,S=r.args.disconnect,w=r.args.create,I=r.args.delete,N=r.args.connectOrCreate,A="this",C=new a.CallbackBucket(t),P=[A];t.subscriptionsEnabled&&P.push(s.META_CYPHER_VARIABLE);let R="",D="",F=[],j=[],L=[],x="",M=!!o&&!!S,k=new i.default.NamedNode(A),$=r.args.where,U=new i.default.Pattern(k,{labels:e.getLabels(t)}),V=(0,T.translateTopLevelMatch)({matchNode:k,matchPattern:U,node:e,context:t,operation:"UPDATE",where:$});R=V.cypher;let G=V.params,q=[],B=[],W={};if(I){let n=(0,h.default)({context:t,node:e,deleteInput:I,varName:`${A}_delete`,parentVar:A,withVars:P,parameterPrefix:`${r.name}.args.delete`});[x]=n,G={...G,...n[1]},W={...W,...x.includes(r.name)?{delete:I}:{}}}if(S&&(Object.entries(S).forEach(n=>{let i=e.relationFields.find(e=>e.fieldName===n[0]),o=[];if(i.union?Object.keys(n[1]).forEach(e=>{o.push(t.nodes.find(t=>t.name===e))}):i.interface?i.interface?.implementations?.forEach(e=>{o.push(t.nodes.find(t=>t.name===e))}):o.push(t.nodes.find(e=>e.name===i.typeMeta.name)),i.interface){let a=(0,y.default)({context:t,parentVar:A,refNodes:o,relationField:i,value:n[1],varName:`${A}_disconnect_${n[0]}`,withVars:P,parentNode:e,parameterPrefix:`${r.name}.args.disconnect.${n[0]}`,labelOverride:""});j.push(a[0]),G={...G,...a[1]}}else o.forEach(o=>{let a=(0,y.default)({context:t,parentVar:A,refNodes:[o],relationField:i,value:i.union?n[1][o.name]:n[1],varName:`${A}_disconnect_${n[0]}${i.union?`_${o.name}`:""}`,withVars:P,parentNode:e,parameterPrefix:`${r.name}.args.disconnect.${n[0]}${i.union?`.${o.name}`:""}`,labelOverride:i.union?o.name:""});j.push(a[0]),G={...G,...a[1]}})}),W={...W,disconnect:S}),n){let i=(0,g.default)({context:t,callbackBucket:C,node:e,updateInput:n,varName:A,parentVar:A,withVars:P,parameterPrefix:`${r.name}.args.update`,includeRelationshipValidation:!1});[D]=i,G={...G,...i[1]},W={...W,...D.includes(r.name)?{update:n}:{}}}o&&Object.entries(o).forEach(r=>{let n=e.relationFields.find(e=>r[0]===e.fieldName),i=[];if(n.union?Object.keys(r[1]).forEach(e=>{i.push(t.nodes.find(t=>t.name===e))}):n.interface?n.interface?.implementations?.forEach(e=>{i.push(t.nodes.find(t=>t.name===e))}):i.push(t.nodes.find(e=>e.name===n.typeMeta.name)),n.interface){if(!n.typeMeta.array){let e="IN"===n.direction?"<-":"-",t="OUT"===n.direction?"->":"-",r=[];i.forEach(i=>{let o=`EXISTS((${A})${e}[:${n.type}]${t}(:${i.name}))`;r.push(o)}),r.length&&(F.push("WITH *"),F.push(`WHERE apoc.util.validatePredicate(${r.join(" OR ")},'Relationship field "%s.%s" cannot have more than one node linked',["${n.connectionPrefix}","${n.fieldName}"])`))}let o=(0,p.default)({context:t,callbackBucket:C,parentVar:A,refNodes:i,relationField:n,value:r[1],varName:`${A}_connect_${r[0]}`,withVars:P,parentNode:e,labelOverride:"",includeRelationshipValidation:!!M,source:"UPDATE"});F.push(o[0]),G={...G,...o[1]}}else i.forEach(i=>{let o=(0,p.default)({context:t,callbackBucket:C,parentVar:A,refNodes:[i],relationField:n,value:n.union?r[1][i.name]:r[1],varName:`${A}_connect_${r[0]}${n.union?`_${i.name}`:""}`,withVars:P,parentNode:e,labelOverride:n.union?i.name:"",source:"UPDATE"});F.push(o[0]),G={...G,...o[1]}})}),N&&Object.entries(N).forEach(([r,n])=>{let i=e.relationFields.find(e=>r===e.fieldName),o=[];i.union?Object.keys(n).forEach(e=>{o.push(t.nodes.find(t=>t.name===e))}):i.interface?i.interface?.implementations?.forEach(e=>{o.push(t.nodes.find(t=>t.name===e))}):o.push(t.nodes.find(e=>e.name===i.typeMeta.name)),o.forEach(o=>{let{cypher:a,params:s}=(0,d.createConnectOrCreateAndParams)({input:n[o.name]||n,varName:`${A}_connectOrCreate_${r}${i.union?`_${o.name}`:""}`,parentVar:A,relationField:i,refNode:o,node:e,context:t,withVars:P,callbackBucket:C});F.push(a),G={...G,...s}})}),w&&Object.entries(w).forEach(r=>{let n=e.relationFields.find(e=>r[0]===e.fieldName),i=[];n.union?Object.keys(r[1]).forEach(e=>{i.push(t.nodes.find(t=>t.name===e))}):n.interface?n.interface?.implementations?.forEach(e=>{i.push(t.nodes.find(t=>t.name===e))}):i.push(t.nodes.find(e=>e.name===n.typeMeta.name));let o="IN"===n.direction?"<-":"-",a="OUT"===n.direction?"->":"-";i.forEach(i=>{let s=n.union?r[1][i.name]:r[1];if(n.interface){if(n.typeMeta.array){if(!(s=r[1].filter(e=>Object.keys(e.node).includes(i.name)).map(e=>({edge:e.edge,node:e.node[i.name]}))).length)return}else{if(!r[1].node[i.name])return;s={edge:r[1].edge,node:r[1].node[i.name]}}}let c=n.typeMeta.array?s:[s];c.forEach((s,p)=>{let d=`${A}_create_${r[0]}${n.union||n.interface?`_${i.name}`:""}${p}`,h=`${d}_node${n.interface?`_${i.name}`:""}`,y=`${d}_relationship`,m=n.properties||t.subscriptionsEnabled?y:"",g=`[${m}:${n.type}]`;if(!n.typeMeta.array){L.push("WITH *");let e=e=>`WHERE apoc.util.validatePredicate(${e},'Relationship field "%s.%s" cannot have more than one node linked',["${n.connectionPrefix}","${n.fieldName}"])`,t=e=>`EXISTS((${A})${o}[:${n.type}]${a}(:${e}))`;if(n.union&&n.union.nodes){let r=n.union.nodes.map(t);L.push(e(r.join(" OR ")))}else if(n.interface&&n.interface.implementations){let r=n.interface.implementations.map(t);L.push(e(r.join(" OR ")))}else{let r=t(i.name);L.push(e(r))}}let{create:b,params:_,authorizationPredicates:T,authorizationSubqueries:O}=(0,f.default)({context:t,callbackBucket:C,node:i,input:s.node,varName:h,withVars:[...P,h],includeRelationshipValidation:!1});if(L.push(b),G={...G,..._},L.push(`MERGE (${A})${o}${g}${a}(${h})`),n.properties){let e=t.relationships.find(e=>e.properties===n.properties),r=(0,v.default)({properties:s.edge??{},varName:y,relationship:e,operation:"CREATE",callbackBucket:C});L.push(r[0]),G={...G,...r[1]}}if(c.push(...(0,E.getAuthorizationStatements)(T,O)),t.subscriptionsEnabled){let[t,r]="IN"===n.direction?[h,A]:[A,h],[o,a]="IN"===n.direction?[i.name,e.name]:[e.name,i.name],s=(0,l.createConnectionEventMeta)({event:"create_relationship",relVariable:y,fromVariable:t,toVariable:r,typename:n.typeUnescaped,fromTypename:o,toTypename:a});L.push(`WITH ${s}, ${(0,u.filterMetaVariable)([...P,h]).join(", ")}`)}})})});let H=t.schemaModel.getConcreteEntityAdapter(e.name);if(!H)throw Error(`Transpilation error: ${e.name} is not a concrete entity`);let Q=new _.QueryASTFactory(t.schemaModel).createQueryAST({resolveTree:r,entityAdapter:H,context:t}),K=new b.QueryASTEnv,z=new b.QueryASTContext({target:new i.default.NamedNode(A),env:K,neo4jGraphQLContext:t,returnVariable:new i.default.NamedVariable("data"),shouldCollect:!0,shouldDistinct:!0});O(Q.print());let Y=Q.transpile(z),J=Y.clauses.length?i.default.concat(...Y.clauses):new i.default.Return(new i.default.Literal("Query cannot conclude with CALL")),X=(0,m.createRelationshipValidationString)({node:e,context:t,varName:A}),Z=new i.default.Raw(e=>[[...t.subscriptionsEnabled?[`WITH [] AS ${s.META_CYPHER_VARIABLE}`]:[],R,x,j.join("\n"),D,F.join("\n"),L.join("\n"),...x.length||F.length||j.length||L.length||q.length||function e(t){if(t.children?.length){if(t.children[0]instanceof i.default.Call)return!0;if(t.children[0]?.children?.length)return e(t.children[0])}return!1}(J)?["WITH *"]:[],...X?["WITH *",X]:[],...q,...B,...t.subscriptionsEnabled?["WITH *",`UNWIND (CASE ${s.META_CYPHER_VARIABLE} WHEN [] then [null] else ${s.META_CYPHER_VARIABLE} end) AS m`]:[],(0,c.compileCypher)(J,e),...t.subscriptionsEnabled?[`,
collect(DISTINCT m) as ${s.META_CYPHER_VARIABLE}`]:[]].filter(Boolean).join("\n"),{...G,...Object.keys(W).length?{[r.name]:{args:W}}:{}}]).build("update_"),{cypher:ee,params:et}=await C.resolveCallbacksAndFilterCypher({cypher:Z.cypher});return[ee,{...Z.params,resolvedCallbacks:et}]}t.default=S},97791:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(19092)),o=r(58388),a=r(1743),s=(0,i.default)(o.DEBUG_TRANSLATE);t.default=function({context:e,entityAdapter:t}){let{resolveTree:r}=e,n=new a.QueryASTFactory(e.schemaModel).createQueryAST({resolveTree:r,entityAdapter:t,context:e,resolveAsUnwind:!0});return s(n.print()),n.build(e).build("create_")}},35430:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addCallbackAndSetParamCypher=t.addCallbackAndSetParam=void 0;let i=n(r(52462)),o=r(21477);t.addCallbackAndSetParam=(e,t,r,n,i,o)=>{if(!e.callback||!e.callback.operations.includes(o))return;let a=`${t}_${e.fieldName}_${e.callback?.callbackName}`;n.addCallback({functionName:e.callback?.callbackName,paramName:a,parent:r,type:e.typeMeta}),i.push(`SET ${t}.${e.dbPropertyName} = $resolvedCallbacks.${a}`)},t.addCallbackAndSetParamCypher=(e,t,r,n,a,s)=>e.callback&&e.callback.operations.includes(a)?[s.property(e.dbPropertyName),new i.default.Raw(i=>{let a=(0,o.compileCypher)(t,i),s=`${a}_${e.fieldName}_${e.callback?.callbackName}`;return n.addCallback({functionName:e.callback?.callbackName,paramName:s,parent:r,type:e.typeMeta}),[`$resolvedCallbacks.${s}`,{}]})]:[]},64726:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthorizationStatements=void 0,t.getAuthorizationStatements=function(e,t){let r=[];return e.length&&(r.push("WITH *"),t.length&&(r.push(...t),r.push("WITH *")),r.push(`WHERE ${e.join(" AND ")}`)),r}},87587:(e,t)=>{"use strict";function r(e){return e.map(e=>`	${e}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.indentBlock=void 0,t.indentBlock=function(e){return"string"==typeof e?r(e.split("\n")).join("\n"):r(e)}},80103:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isLogicalOperator=t.getLogicalPredicate=void 0;let i=n(r(52462)),o=r(58388),a=r(14321);t.getLogicalPredicate=function(e,t){if(0!==t.length){if("NOT"===e){let e=t[0];return e?i.default.not(e):void 0}if("AND"===e)return i.default.and(...t);if("OR"===e)return i.default.or(...t)}},t.isLogicalOperator=function(e){return(0,a.isInArray)(o.LOGICAL_OPERATORS,e)}},20492:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buildMathStatements=t.mathDescriptorBuilder=t.matchMathField=void 0;let i=n(r(81685)),o=new Map([["_ADD","+"],["_SUBTRACT","-"],["_MULTIPLY","*"],["_DIVIDE","/"],["_INCREMENT","+"],["_DECREMENT","-"]]),a=/(?<propertyName>\w*)(?<operatorName>_INCREMENT|_DECREMENT|_ADD|_SUBTRACT|_DIVIDE|_MULTIPLY)\b/;t.matchMathField=function(e){let t=e.match(a);if(t&&t.groups){let{operatorName:e,propertyName:r}=t.groups;return{hasMatched:!!(t&&t.length>2&&e&&r),operatorName:e,propertyName:r}}return{hasMatched:!1,operatorName:"",propertyName:""}},t.mathDescriptorBuilder=function(e,t,r){let n=r.propertyName,a=t.primitiveFields.find(e=>e.fieldName===n);if(!a)throw Error(`${n} is not settable`);return{dbName:(0,i.default)(t,n),graphQLType:a.typeMeta.name,fieldName:n,operationName:r.operatorName,operationSymbol:function(e){if(o.has(e))return o.get(e);throw Error(`${e} is not a valid math operator`)}(r.operatorName),value:e}},t.buildMathStatements=function(e,t,r,n){if("/"===e.operationSymbol&&0===e.value)throw Error("Division by zero is not supported");let i=[];i.push(`apoc.util.validatePredicate(${t}.${e.dbName} IS NULL, 'Cannot %s %s to Nan', ["${e.operationName}", $${n}])`);let o="Int"===e.graphQLType?32:64;i.push(`apoc.util.validatePredicate(${t}.${e.dbName} IS NOT NULL AND ${t}.${e.dbName} ${e.operationSymbol} $${n} > 2^${o-1}-1, 'Overflow: Value returned from operator %s is larger than %s bit', ["${e.operationName}", "${o}"])`),"/"===e.operationSymbol&&e.graphQLType.includes("Int")&&i.push(`apoc.util.validatePredicate(${t}.${e.dbName} IS NOT NULL AND (${t}.${e.dbName} ${e.operationSymbol} $${n}) % 1 <> 0, 'Type Mismatch: Value returned from operator %s does not match: %s', ["${e.operationName}", "${e.graphQLType}"])`);let a=[],s=Array.from(new Set([t,...r]));return a.push(`WITH ${s.join(", ")}`),a.push("CALL {"),a.push(`WITH ${t}`),a.push(`WITH ${t}`),a.push(`WHERE ${i.join(" AND ")}`),a.push(`SET ${t}.${e.dbName} = ${t}.${e.dbName} ${e.operationSymbol} $${n}`),a.push(`RETURN ${t} as ${t}_${e.dbName}_${e.operationName}`),a.push("}"),a}},98312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateMissingOrAliasedFields=t.generateResolveTree=t.getAliasedResolveTreeByFieldName=t.getResolveTreeByFieldName=void 0;let n=r(14178);function i({fieldName:e,selection:t}){return Object.values(t).find(t=>t.name===e)}function o({fieldName:e,selection:t}){return Object.values(t).find(t=>t.name===e&&t.alias!==e)}function a({name:e,alias:t,args:r={},fieldsByTypeName:n={}}){return{[e]:{name:e,alias:t??e,args:r,fieldsByTypeName:n}}}t.getResolveTreeByFieldName=i,t.getAliasedResolveTreeByFieldName=o,t.generateResolveTree=a,t.generateMissingOrAliasedFields=function({fieldNames:e,selection:t}){return(0,n.removeDuplicates)(e).reduce((e,r)=>{let n=i({fieldName:r,selection:t}),s=o({fieldName:r,selection:t});return!n||s?{...e,...a({name:r})}:e},{})}},16733:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(52462)),o=r(19309),a=r(21477);t.default=function({whereInput:e,context:t,node:r,nodeVariable:n,relationship:s,relationshipVariable:l,parameterPrefix:u}){let c=new i.default.NamedNode(n),p=new i.default.NamedVariable(l),{predicate:d,preComputedSubqueries:f}=(0,o.createConnectionWherePropertyOperation)({context:t,whereInput:e,edgeRef:p,targetNode:c,node:r,edge:s}),h="",y=new i.default.Raw(e=>{let t=d?.getCypher(e)||"";return f&&(h=(0,a.compileCypher)(f,e)),[t,{}]}).build(`${u.replace(/\./g,"_").replace(/\[|\]/g,"")}_${n}`);return{cypher:y.cypher,subquery:h,params:y.params}}},93538:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createWhereEdgePredicate=t.createWhereNodePredicate=void 0;let i=n(r(52462)),o=r(43232),a=r(16397),s=r(1743),l=r(1808),u=r(86904);function c({factory:e,queryASTContext:t,entityOrRel:r,whereInput:n,targetElement:a,targetEntity:s}){let c=[];r instanceof o.RelationshipAdapter?c.push(...e.filterFactory.createEdgeFilters(r,n)):(0,u.isInterfaceEntity)(r)?c.push(...e.filterFactory.createInterfaceNodeFilters({entity:r,targetEntity:s,whereFields:n})):c.push(...e.filterFactory.createNodeFilters(r,n));let p=(0,l.wrapSubqueriesInCypherCalls)(t,c,[a]),d=c.map(e=>e.getPredicate(t)),f=[...c.flatMap(e=>e.getSelection(t)),...p];return{predicate:i.default.and(...d),preComputedSubqueries:i.default.concat(...f)}}t.createWhereNodePredicate=function({targetElement:e,whereInput:t,context:r,entity:n,targetEntity:i}){let o=new s.QueryASTFactory(r.schemaModel),l=new a.QueryASTEnv;return c({factory:o,queryASTContext:new a.QueryASTContext({target:e,env:l,neo4jGraphQLContext:r}),entityOrRel:n,whereInput:t,targetElement:e,targetEntity:i})},t.createWhereEdgePredicate=function({targetElement:e,relationshipVariable:t,whereInput:r,context:n,relationship:i}){let o=new s.QueryASTFactory(n.schemaModel),l=new a.QueryASTEnv;return c({factory:o,queryASTContext:new a.QueryASTContext({target:e,relationship:t,env:l,neo4jGraphQLContext:n}),entityOrRel:i,whereInput:r,targetElement:e})}},19309:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createConnectionWherePropertyOperation=void 0;let i=n(r(52462)),o=r(8593),a=r(14178),s=r(80103),l=r(93538);t.createConnectionWherePropertyOperation=function e({context:t,whereInput:r,edgeRef:n,targetNode:u,node:c,edge:p,useExistExpr:d=!0,checkParameterExistence:f}){let h=[],y=[];return Object.entries(r).forEach(([r,i])=>{if((0,s.isLogicalOperator)(r)){let o=[];(0,a.asArray)(i).forEach(r=>{let{predicate:i,preComputedSubqueries:a}=e({context:t,whereInput:r,edgeRef:n,targetNode:u,node:c,edge:p,useExistExpr:d,checkParameterExistence:f});o.push(i),a&&!a.empty&&h.push(a)});let l=(0,s.getLogicalPredicate)(r,(0,a.filterTruthy)(o));y.push(l);return}if(r.startsWith("edge")){let e=t.schemaModel.getConcreteEntityAdapter(p.source);if(!e)throw Error(`Transpilation error: entity not found: ${p.source}`);let r=[...e.relationships.values()].find(e=>e.operations.relationshipFieldTypename===p.name);if(!r)throw Error(`No relationship found for ${p.name}`);let{predicate:o,preComputedSubqueries:a}=(0,l.createWhereEdgePredicate)({targetElement:u,relationshipVariable:n,relationship:r,context:t,whereInput:i});y.push(o),a&&!a.empty&&h.push(a);return}if(r.startsWith("node")||r.startsWith(c.name)){let e={...i},r=(0,o.getEntityAdapterFromNode)(c,t),{predicate:n,preComputedSubqueries:a}=(0,l.createWhereNodePredicate)({entity:r,context:t,whereInput:e,targetElement:u});y.push(n),a&&!a.empty&&h.push(a);return}}),{predicate:i.default.and(...(0,a.filterTruthy)(y)),preComputedSubqueries:h.length?i.default.concat(...h):void 0}}},66606:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.whereRegEx=void 0,t.whereRegEx=/(?<prefix>\w*\.)?(?<fieldName>[_A-Za-z]\w*?)(?<isAggregate>Aggregate)?(?:_(?<operator>NOT|NOT_IN|IN|NOT_INCLUDES|INCLUDES|MATCHES|NOT_CONTAINS|CONTAINS|NOT_STARTS_WITH|STARTS_WITH|NOT_ENDS_WITH|ENDS_WITH|LT|LTE|GT|GTE|DISTANCE|ALL|NONE|SINGLE|SOME))?$/},80395:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.caseWhere=void 0;let i=n(r(52462));t.caseWhere=function(e,t){let r=new i.default.Variable,n=new i.default.List(Array(t.length).fill(new i.default.Literal(null))),o=new i.default.Case(e).when(new i.default.Literal(!0)).then(new i.default.List(t)).else(n),a=new i.default.With("*",[o,r]),s=Array(t.length).fill(()=>void 0).map((e,n)=>[r.index(n),t[n]]),l=new i.default.With("*",...s);return i.default.concat(a,l)}},21477:(e,t)=>{"use strict";function r(e,t){if(!e)throw Error("Cypher element is not defined");return e.getCypher(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.compileCypher=t.compileCypherIfExists=void 0,t.compileCypherIfExists=function(e,t){return e?r(e,t):""},t.compileCypher=r},42996:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=n(r(19092)),o=r(58388),a=(0,i.default)(o.DEBUG_EXECUTE);async function s({cypher:e,params:t,defaultAccessMode:r,context:n,info:i}){let o=await n.executor.execute(e,t,r,i);if(!o)throw Error("Unable to execute query against Neo4j database");let s=o.records.map(e=>e.toObject());return a(`Execute successful, received ${s.length} records`),{bookmark:n.executor.lastBookmark,result:o,statistics:o.summary.counters.updates(),records:s}}t.default=s},23248:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.findConflictingProperties=void 0;let i=n(r(81685));t.findConflictingProperties=function({node:e,input:t}){return t?Object.values(Object.keys(t).reduce((t,r)=>{let n=(0,i.default)(e,r);return n&&(t[n]?t[n].push(r):t[n]=[r]),t},{})).filter(e=>e.length>1).reduce((e,t)=>(e.push(...t),e),[]):[]}},8593:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEntityAdapterFromNode=void 0,t.getEntityAdapterFromNode=function(e,t){let r=t.schemaModel.getConcreteEntityAdapter(e.name);if(!r)throw Error(`Could not find entity for node ${e.name}`);return r}},46808:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(57343),o=r(41590),a=n(r(66007));t.default=function e(t,r){let n;let s=r?.resolveTree||(0,o.parseResolveInfo)(t),l=r?.args,u={...s.args,...l};n=r?.field?r.field:function(e,t){let r=e.getQueryType(),n=e.getMutationType(),i=e.getSubscriptionType(),o=r?.getFields()[t],a=n?.getFields()[t],s=i?.getFields()[t],l=o||a||s;if(!l)throw Error(`Field ${l} not found`);return l}(t.schema,s.name);let c=Object.entries(u).reduce((e,[t,r])=>{let o=n.args.find(e=>e.name===t);if(!o)throw Error(`Error whilst generating Neo4j resolve tree: could not find argument ${t} on field ${n.name}`);return{...e,[t]:function e({argument:t,type:r}){if(null===t)return t;if(r.toString().endsWith("!"))return e({argument:t,type:r.ofType});if(r.toString().startsWith("[")&&r.toString().endsWith("]"))return t.map(t=>e({argument:t,type:r.ofType}));if(r instanceof i.GraphQLInputObjectType)return Object.entries(t).reduce((t,[n,i])=>{if("_emptyInput"===n)return t;let o=Object.values(r.getFields()).find(e=>e.name===n);if(!o)throw Error(`Error whilst generating Neo4j resolve tree: could not find field ${n} in type ${r.name}`);return{...t,[n]:e({argument:i,type:o.type})}},{});if(r instanceof i.GraphQLScalarType){if("Int"===r.name)return a.default.int(t);if("ID"===r.name&&"number"==typeof t)return t.toString(10)}return t}({argument:r,type:o.type})}},{}),p=Object.entries(s.fieldsByTypeName).reduce((r,[n,o])=>{let a;let s=t.schema.getType(n);if(!s)throw Error(`Error whilst generating Neo4j resolve tree: could not find type with name ${n} in schema`);if(s.astNode?.kind===i.Kind.OBJECT_TYPE_DEFINITION)a=s;else{if(s.astNode?.kind!==i.Kind.INTERFACE_TYPE_DEFINITION)return{...r,[n]:o};a=s}let l=Object.entries(o).reduce((r,[n,i])=>({...r,[n]:e(t,{resolveTree:i,field:Object.values(a.getFields()).find(e=>e.name===i.name)})}),{});return{...r,[n]:l}},{}),{alias:d,name:f}=s;return{alias:d,args:c,fieldsByTypeName:p,name:f}}},75006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCypherRelationshipDirection=void 0;let n=r(28549),i=r(58388);t.getCypherRelationshipDirection=function(e,t={}){switch(function(e,t){let r=e.direction,o="undirected";switch(e.queryDirection){case i.RelationshipQueryDirectionOption.DEFAULT_DIRECTED:if(!1===t.directed)return o;return r;case i.RelationshipQueryDirectionOption.DEFAULT_UNDIRECTED:if(!0===t.directed)return r;return o;case i.RelationshipQueryDirectionOption.DIRECTED_ONLY:if(!1===t.directed)throw Error("Invalid direction in 'DIRECTED_ONLY' relationship");return r;case i.RelationshipQueryDirectionOption.UNDIRECTED_ONLY:if(!0===t.directed)throw Error("Invalid direction in 'UNDIRECTED_ONLY' relationship");return o;default:throw new n.Neo4jGraphQLError(`Invalid queryDirection argument ${e.queryDirection}`)}}(e,t)){case"IN":return"left";case"OUT":return"right";case"undirected":return"undirected"}}},97845:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromGlobalId=t.toGlobalId=void 0;let n=r(57343),i=r(57626);t.toGlobalId=function({typeName:e,field:t,id:r}){return(0,i.base64)([e,t,n.GraphQLID.serialize(r)].join(":"))},t.fromGlobalId=function(e,t){let[r,n,...o]=(0,i.unbase64)(e).split(":");return{typeName:r,field:n,id:t?parseInt(o[0],10):o.join(":")}}},63706:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.execute=t.trimmer=void 0;var i=r(55235);Object.defineProperty(t,"trimmer",{enumerable:!0,get:function(){return n(i).default}});var o=r(42996);Object.defineProperty(t,"execute",{enumerable:!0,get:function(){return n(o).default}})},14321:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInArray=void 0,t.isInArray=function(e,t){return e.includes(t)}},99227:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRootType=void 0;let r=["Query","Mutation","Subscription"];t.isRootType=function(e){return r.includes(e.name.value)}},74849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.leadingUnderscores=void 0,t.leadingUnderscores=function(e){let t=/^(_+).+/.exec(e);return t?.[1]||""}},12790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lowerFirst=void 0,t.lowerFirst=function(e){return`${e.charAt(0).toLowerCase()}${e.slice(1)}`}},81685:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let r=e.primitiveFields.concat(e.temporalFields,e.pointFields).find(({fieldName:e})=>e===t);return r?.dbPropertyNameUnescaped||t}},72535:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.serializeNeo4jValue=void 0;let a=o(r(66007));t.serializeNeo4jValue=function(e){return a.isInt(e)?e.inSafeRange()?e.toNumber():e.toString():e}},41200:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setsAreEqual=void 0,t.setsAreEqual=function(e,t){return e.size===t.size&&Array.from(e).every(e=>t.has(e))}},55235:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/\n/g," ").replace(/\s\s+/g," ").trim()}},32439:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.upperFirst=void 0,t.upperFirst=function(e){return`${e.charAt(0).toUpperCase()}${e.slice(1)}`}},14178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renameFields=t.filterFields=t.omitFields=t.delay=t.removeDuplicates=t.haveSharedElement=t.filterTruthy=t.asArray=t.toNumber=t.isNeoInt=t.haveSameLength=t.isSameType=t.isRecord=t.isObject=t.isString=void 0;let n=r(66007);function i(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function o(e){return(0,n.isInt)(e)}t.isString=function(e){return"string"==typeof e},t.isObject=i,t.isRecord=function(e){return null!=e&&"Object"===e.constructor.name},t.isSameType=function(e,t){return typeof e==typeof t&&i(e)===i(t)&&Array.isArray(e)===Array.isArray(t)},t.haveSameLength=function(e,t){return Object.keys(e).length===Object.keys(t).length},t.isNeoInt=o,t.toNumber=function(e){return o(e)?e.toNumber():e},t.asArray=function(e){return Array.isArray(e)?e:null==e?[]:[e]},t.filterTruthy=function(e){return e.filter(e=>!!e)},t.haveSharedElement=function(e,t){for(let r of e)if(t.includes(r))return!0;return!1},t.removeDuplicates=function(e){return Array.from(new Set(e))},t.delay=function(e){return new Promise(t=>{setTimeout(t,e)})},t.omitFields=function(e,t){return Object.entries(e).filter(e=>!t.includes(e[0])).reduce((e,[t,r])=>(e[t]=r,e),{})},t.filterFields=function(e,t){return Object.entries(e).filter(e=>t.includes(e[0])).reduce((e,[t,r])=>(e[t]=r,e),{})},t.renameFields=function(e,t){return Object.entries(e).reduce((e,[r,n])=>(e[t[r]||r]=n,e),{})}},1978:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapStringInApostrophes=void 0,t.wrapStringInApostrophes=function(e){if("string"==typeof e)return`'${e}'`;if(Array.isArray(e))return e.map(e=>`'${e}'`);throw Error("wrapStringInApostrophes can only be used on strings or arrays of strings")}},19952:(e,t,r)=>{let n=r(34838);e.exports=function(e={}){let t={};if(t.URLPattern=globalThis.URLPattern,!t.URLPattern){let e=r(36203);t.URLPattern=e.URLPattern}if(e.skipPonyfill||n())return{fetch:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response,FormData:globalThis.FormData,ReadableStream:globalThis.ReadableStream,WritableStream:globalThis.WritableStream,TransformStream:globalThis.TransformStream,CompressionStream:globalThis.CompressionStream,DecompressionStream:globalThis.DecompressionStream,Blob:globalThis.Blob,File:globalThis.File,crypto:globalThis.crypto,btoa:globalThis.btoa,TextEncoder:globalThis.TextEncoder,TextDecoder:globalThis.TextDecoder,URLPattern:t.URLPattern,URL:globalThis.URL,URLSearchParams:globalThis.URLSearchParams};let i=r(31242);if(t.fetch=i.fetch,t.Request=i.Request,t.Response=i.Response,t.Headers=i.Headers,t.FormData=i.FormData,t.ReadableStream=i.ReadableStream,t.URL=i.URL,t.URLSearchParams=i.URLSearchParams,t.WritableStream=i.WritableStream,t.TransformStream=i.TransformStream,t.CompressionStream=i.CompressionStream,t.DecompressionStream=i.DecompressionStream,t.Blob=i.Blob,t.File=i.File,t.crypto=globalThis.crypto,t.btoa=i.btoa,t.TextEncoder=i.TextEncoder,t.TextDecoder=i.TextDecoder,e.formDataLimits&&(t.Body=class extends i.Body{constructor(t,r){super(t,{formDataLimits:e.formDataLimits,...r})}},t.Request=class extends i.Request{constructor(t,r){super(t,{formDataLimits:e.formDataLimits,...r})}},t.Response=class extends i.Response{constructor(t,r){super(t,{formDataLimits:e.formDataLimits,...r})}}),!t.crypto){let e=r(6113);t.crypto=e.webcrypto}return t}},72600:(e,t,r)=>{let n=r(19952),i=r(34838),o=n();if(!i())try{globalThis.libcurl=globalThis.libcurl||r(64735)("node-libcurl")}catch(e){}e.exports.fetch=o.fetch,e.exports.Headers=o.Headers,e.exports.Request=o.Request,e.exports.Response=o.Response,e.exports.FormData=o.FormData,e.exports.ReadableStream=o.ReadableStream,e.exports.WritableStream=o.WritableStream,e.exports.TransformStream=o.TransformStream,e.exports.CompressionStream=o.CompressionStream,e.exports.DecompressionStream=o.DecompressionStream,e.exports.Blob=o.Blob,e.exports.File=o.File,e.exports.crypto=o.crypto,e.exports.btoa=o.btoa,e.exports.TextEncoder=o.TextEncoder,e.exports.TextDecoder=o.TextDecoder,e.exports.URLPattern=o.URLPattern,e.exports.URL=o.URL,e.exports.URLSearchParams=o.URLSearchParams,t.createFetch=n},34838:e=>{e.exports=function(){return!!(globalThis.Deno||process.versions.bun||Object.keys(globalThis).some(e=>e.startsWith("__NEXT")))}},44649:(e,t,r)=>{"use strict";let n;e=r.nmd(e);let i=(e,t)=>(...r)=>{let n=e(...r);return`\u001B[${n+t}m`},o=(e,t)=>(...r)=>{let n=e(...r);return`\u001B[${38+t};5;${n}m`},a=(e,t)=>(...r)=>{let n=e(...r);return`\u001B[${38+t};2;${n[0]};${n[1]};${n[2]}m`},s=e=>e,l=(e,t,r)=>[e,t,r],u=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{let n=r();return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})},c=(e,t,i,o)=>{void 0===n&&(n=r(27443));let a=o?10:0,s={};for(let[r,o]of Object.entries(n)){let n="ansi16"===r?"ansi":r;r===t?s[n]=e(i,a):"object"==typeof o&&(s[n]=e(o[t],a))}return s};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};for(let[r,n]of(t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright,Object.entries(t))){for(let[r,i]of Object.entries(n))t[r]={open:`\u001B[${i[0]}m`,close:`\u001B[${i[1]}m`},n[r]=t[r],e.set(i[0],i[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1b[39m",t.bgColor.close="\x1b[49m",u(t.color,"ansi",()=>c(i,"ansi16",s,!1)),u(t.color,"ansi256",()=>c(o,"ansi256",s,!1)),u(t.color,"ansi16m",()=>c(a,"rgb",l,!1)),u(t.bgColor,"ansi",()=>c(i,"ansi16",s,!0)),u(t.bgColor,"ansi256",()=>c(o,"ansi256",s,!0)),u(t.bgColor,"ansi16m",()=>c(a,"rgb",l,!0)),t}})},21035:(e,t,r)=>{"use strict";let n=r(58058),i=r(20152),o=r(42860),a=r(2661),s=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let e=s.create(n,t);Array.isArray(e)?r.push(...e):r.push(e)}else r=[].concat(s.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(r=[...new Set(r)]),r};s.parse=(e,t={})=>a(e,t),s.stringify=(e,t={})=>"string"==typeof e?n(s.parse(e,t),t):n(e,t),s.compile=(e,t={})=>("string"==typeof e&&(e=s.parse(e,t)),i(e,t)),s.expand=(e,t={})=>{"string"==typeof e&&(e=s.parse(e,t));let r=o(e,t);return!0===t.noempty&&(r=r.filter(Boolean)),!0===t.nodupes&&(r=[...new Set(r)]),r},s.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?s.compile(e,t):s.expand(e,t),e.exports=s},20152:(e,t,r)=>{"use strict";let n=r(59445),i=r(75736);e.exports=(e,t={})=>{let r=(e,o={})=>{let a=i.isInvalidBrace(o),s=!0===e.invalid&&!0===t.escapeInvalid,l=!0===a||!0===s,u=!0===t.escapeInvalid?"\\":"",c="";if(!0===e.isOpen)return u+e.value;if(!0===e.isClose)return console.log("node.isClose",u,e.value),u+e.value;if("open"===e.type)return l?u+e.value:"(";if("close"===e.type)return l?u+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":l?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let r=i.reduce(e.nodes),o=n(...r,{...t,wrap:!1,toRegex:!0,strictZeros:!0});if(0!==o.length)return r.length>1&&o.length>1?`(${o})`:o}if(e.nodes)for(let t of e.nodes)c+=r(t,e);return c};return r(e)}},2309:e=>{"use strict";e.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:"\xa0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}},42860:(e,t,r)=>{"use strict";let n=r(59445),i=r(58058),o=r(75736),a=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return r?o.flatten(t).map(e=>`{${e}}`):t;for(let i of e)if(Array.isArray(i))for(let e of i)n.push(a(e,t,r));else for(let e of t)!0===r&&"string"==typeof e&&(e=`{${e}}`),n.push(Array.isArray(e)?a(i,e,r):i+e);return o.flatten(n)};e.exports=(e,t={})=>{let r=void 0===t.rangeLimit?1e3:t.rangeLimit,s=(e,l={})=>{e.queue=[];let u=l,c=l.queue;for(;"brace"!==u.type&&"root"!==u.type&&u.parent;)c=(u=u.parent).queue;if(e.invalid||e.dollar){c.push(a(c.pop(),i(e,t)));return}if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length){c.push(a(c.pop(),["{}"]));return}if(e.nodes&&e.ranges>0){let s=o.reduce(e.nodes);if(o.exceedsLimit(...s,t.step,r))throw RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let l=n(...s,t);0===l.length&&(l=i(e,t)),c.push(a(c.pop(),l)),e.nodes=[];return}let p=o.encloseBrace(e),d=e.queue,f=e;for(;"brace"!==f.type&&"root"!==f.type&&f.parent;)d=(f=f.parent).queue;for(let t=0;t<e.nodes.length;t++){let r=e.nodes[t];if("comma"===r.type&&"brace"===e.type){1===t&&d.push(""),d.push("");continue}if("close"===r.type){c.push(a(c.pop(),d,p));continue}if(r.value&&"open"!==r.type){d.push(a(d.pop(),r.value));continue}r.nodes&&s(r,e)}return d};return o.flatten(s(e))}},2661:(e,t,r)=>{"use strict";let n=r(58058),{MAX_LENGTH:i,CHAR_BACKSLASH:o,CHAR_BACKTICK:a,CHAR_COMMA:s,CHAR_DOT:l,CHAR_LEFT_PARENTHESES:u,CHAR_RIGHT_PARENTHESES:c,CHAR_LEFT_CURLY_BRACE:p,CHAR_RIGHT_CURLY_BRACE:d,CHAR_LEFT_SQUARE_BRACKET:f,CHAR_RIGHT_SQUARE_BRACKET:h,CHAR_DOUBLE_QUOTE:y,CHAR_SINGLE_QUOTE:m,CHAR_NO_BREAK_SPACE:v,CHAR_ZERO_WIDTH_NOBREAK_SPACE:g}=r(2309);e.exports=(e,t={})=>{let r;if("string"!=typeof e)throw TypeError("Expected a string");let b=t||{},_="number"==typeof b.maxLength?Math.min(i,b.maxLength):i;if(e.length>_)throw SyntaxError(`Input length (${e.length}), exceeds max characters (${_})`);let T={type:"root",input:e,nodes:[]},E=[T],O=T,S=T,w=0,I=e.length,N=0,A=0,C=()=>e[N++],P=e=>{if("text"===e.type&&"dot"===S.type&&(S.type="text"),S&&"text"===S.type&&"text"===e.type){S.value+=e.value;return}return O.nodes.push(e),e.parent=O,e.prev=S,S=e,e};for(P({type:"bos"});N<I;)if(O=E[E.length-1],(r=C())!==g&&r!==v){if(r===o){P({type:"text",value:(t.keepEscaping?r:"")+C()});continue}if(r===h){P({type:"text",value:"\\"+r});continue}if(r===f){let e;for(w++;N<I&&(e=C());){if(r+=e,e===f){w++;continue}if(e===o){r+=C();continue}if(e===h&&0==--w)break}P({type:"text",value:r});continue}if(r===u){O=P({type:"paren",nodes:[]}),E.push(O),P({type:"text",value:r});continue}if(r===c){if("paren"!==O.type){P({type:"text",value:r});continue}O=E.pop(),P({type:"text",value:r}),O=E[E.length-1];continue}if(r===y||r===m||r===a){let e;let n=r;for(!0!==t.keepQuotes&&(r="");N<I&&(e=C());){if(e===o){r+=e+C();continue}if(e===n){!0===t.keepQuotes&&(r+=e);break}r+=e}P({type:"text",value:r});continue}if(r===p){A++,O=P({type:"brace",open:!0,close:!1,dollar:S.value&&"$"===S.value.slice(-1)||!0===O.dollar,depth:A,commas:0,ranges:0,nodes:[]}),E.push(O),P({type:"open",value:r});continue}if(r===d){if("brace"!==O.type){P({type:"text",value:r});continue}(O=E.pop()).close=!0,P({type:"close",value:r}),A--,O=E[E.length-1];continue}if(r===s&&A>0){if(O.ranges>0){O.ranges=0;let e=O.nodes.shift();O.nodes=[e,{type:"text",value:n(O)}]}P({type:"comma",value:r}),O.commas++;continue}if(r===l&&A>0&&0===O.commas){let e=O.nodes;if(0===A||0===e.length){P({type:"text",value:r});continue}if("dot"===S.type){if(O.range=[],S.value+=r,S.type="range",3!==O.nodes.length&&5!==O.nodes.length){O.invalid=!0,O.ranges=0,S.type="text";continue}O.ranges++,O.args=[];continue}if("range"===S.type){e.pop();let t=e[e.length-1];t.value+=S.value+r,S=t,O.ranges--;continue}P({type:"dot",value:r});continue}P({type:"text",value:r})}do if("root"!==(O=E.pop()).type){O.nodes.forEach(e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)});let e=E[E.length-1],t=e.nodes.indexOf(O);e.nodes.splice(t,1,...O.nodes)}while(E.length>0);return P({type:"eos"}),T}},58058:(e,t,r)=>{"use strict";let n=r(75736);e.exports=(e,t={})=>{let r=(e,i={})=>{let o=t.escapeInvalid&&n.isInvalidBrace(i),a=!0===e.invalid&&!0===t.escapeInvalid,s="";if(e.value)return(o||a)&&n.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)s+=r(t);return s};return r(e)}},75736:(e,t)=>{"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find(e=>e.type===t),t.exceedsLimit=(e,r,n=1,i)=>!!(!1!==i&&t.isInteger(e)&&t.isInteger(r))&&(Number(r)-Number(e))/Number(n)>=i,t.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||"open"===n.type||"close"===n.type)&&!0!==n.escaped&&(n.value="\\"+n.value,n.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0),t.isInvalidBrace=e=>"brace"===e.type&&(!0===e.invalid||!!e.dollar||(e.commas>>0+e.ranges>>0==0||!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0)),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||!0===e.open||!0===e.close,t.reduce=e=>e.reduce((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e),[]),t.flatten=(...e)=>{let t=[],r=e=>{for(let n=0;n<e.length;n++){let i=e[n];if(Array.isArray(i)){r(i);continue}void 0!==i&&t.push(i)}return t};return r(e),t}},53410:(e,t,r)=>{"use strict";let{parseContentType:n}=r(74288),i=[r(2540),r(8286)].filter(function(e){return"function"==typeof e.detect});e.exports=e=>{if(("object"!=typeof e||null===e)&&(e={}),"object"!=typeof e.headers||null===e.headers||"string"!=typeof e.headers["content-type"])throw Error("Missing Content-Type");return function(e){let t=e.headers,r=n(t["content-type"]);if(!r)throw Error("Malformed content type");for(let n of i){if(!n.detect(r))continue;let i={limits:e.limits,headers:t,conType:r,highWaterMark:void 0,fileHwm:void 0,defCharset:void 0,defParamCharset:void 0,preservePath:!1};return e.highWaterMark&&(i.highWaterMark=e.highWaterMark),e.fileHwm&&(i.fileHwm=e.fileHwm),i.defCharset=e.defCharset,i.defParamCharset=e.defParamCharset,i.preservePath=e.preservePath,new n(i)}throw Error(`Unsupported content type: ${t["content-type"]}`)}(e)}},2540:(e,t,r)=>{"use strict";let{Readable:n,Writable:i}=r(12781),o=r(10481),{basename:a,convertToUTF8:s,getDecoder:l,parseContentType:u,parseDisposition:c}=r(74288),p=Buffer.from("\r\n"),d=Buffer.from("\r"),f=Buffer.from("-");function h(){}class y{constructor(e){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=0,this.name="",this.value="",this.crlf=0,this.cb=e}reset(){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=0,this.name="",this.value="",this.crlf=0}push(e,t,r){let n=t;for(;t<r;)switch(this.state){case 0:{let i=!1;for(;t<r;++t){if(16384===this.byteCount)return -1;++this.byteCount;let r=e[t];if(1!==E[r]){if(58!==r||(this.name+=e.latin1Slice(n,t),0===this.name.length))return -1;++t,i=!0,this.state=1;break}}if(!i){this.name+=e.latin1Slice(n,t);break}}case 1:{let i=!1;for(;t<r;++t){if(16384===this.byteCount)return -1;++this.byteCount;let r=e[t];if(32!==r&&9!==r){n=t,i=!0,this.state=2;break}}if(!i)break}case 2:switch(this.crlf){case 0:for(;t<r;++t){if(16384===this.byteCount)return -1;++this.byteCount;let r=e[t];if(1!==O[r]){if(13!==r)return -1;++this.crlf;break}}this.value+=e.latin1Slice(n,t++);break;case 1:if(16384===this.byteCount||(++this.byteCount,10!==e[t++]))return -1;++this.crlf;break;case 2:{if(16384===this.byteCount)return -1;++this.byteCount;let r=e[t];32===r||9===r?(n=t,this.crlf=0):(++this.pairCount<2e3&&(this.name=this.name.toLowerCase(),void 0===this.header[this.name]?this.header[this.name]=[this.value]:this.header[this.name].push(this.value)),13===r?(++this.crlf,++t):(n=t,this.crlf=0,this.state=0,this.name="",this.value=""));break}case 3:{if(16384===this.byteCount||(++this.byteCount,10!==e[t++]))return -1;let r=this.header;return this.reset(),this.cb(r),t}}}return t}}class m extends n{constructor(e,t){super(e),this.truncated=!1,this._readcb=null,this.once("end",()=>{if(this._read(),0==--t._fileEndsLeft&&t._finalcb){let e=t._finalcb;t._finalcb=null,process.nextTick(e)}})}_read(e){let t=this._readcb;t&&(this._readcb=null,t())}}let v={push:(e,t)=>{},destroy:()=>{}};function g(e,t){return e}class b extends i{constructor(e){let t,r,n,i,b;if(super({autoDestroy:!0,emitClose:!0,highWaterMark:"number"==typeof e.highWaterMark?e.highWaterMark:void 0}),!e.conType.params||"string"!=typeof e.conType.params.boundary)throw Error("Multipart: Boundary not found");let _=e.conType.params.boundary,T="string"==typeof e.defParamCharset&&e.defParamCharset?l(e.defParamCharset):g,E=e.defCharset||"utf8",O=e.preservePath,S={autoDestroy:!0,emitClose:!0,highWaterMark:"number"==typeof e.fileHwm?e.fileHwm:void 0},w=e.limits,I=w&&"number"==typeof w.fieldSize?w.fieldSize:1048576,N=w&&"number"==typeof w.fileSize?w.fileSize:1/0,A=w&&"number"==typeof w.files?w.files:1/0,C=w&&"number"==typeof w.fields?w.fields:1/0,P=w&&"number"==typeof w.parts?w.parts:1/0,R=-1,D=0,F=0,j=!1;this._fileEndsLeft=0,this._fileStream=void 0,this._complete=!1;let L=0,x=0,M=!1,k=!1,$=!1;this._hparser=null;let U=new y(e=>{let o;if(this._hparser=null,j=!1,i="text/plain",r=E,n="7bit",b=void 0,M=!1,!e["content-disposition"]){j=!0;return}let s=c(e["content-disposition"][0],T);if(!s||"form-data"!==s.type){j=!0;return}if(s.params&&(s.params.name&&(b=s.params.name),s.params["filename*"]?o=s.params["filename*"]:s.params.filename&&(o=s.params.filename),void 0===o||O||(o=a(o))),e["content-type"]){let t=u(e["content-type"][0]);t&&(i=`${t.type}/${t.subtype}`,t.params&&"string"==typeof t.params.charset&&(r=t.params.charset.toLowerCase()))}if(e["content-transfer-encoding"]&&(n=e["content-transfer-encoding"][0].toLowerCase()),"application/octet-stream"===i||void 0!==o){if(F===A){k||(k=!0,this.emit("filesLimit")),j=!0;return}if(++F,0===this.listenerCount("file")){j=!0;return}L=0,this._fileStream=new m(S,this),++this._fileEndsLeft,this.emit("file",b,this._fileStream,{filename:o,encoding:n,mimeType:i})}else{if(D===C){$||($=!0,this.emit("fieldsLimit")),j=!0;return}if(++D,0===this.listenerCount("field")){j=!0;return}t=[],x=0}}),V=0,G=(e,o,a,l,u)=>{for(;o;){if(null!==this._hparser){let e=this._hparser.push(o,a,l);if(-1===e){this._hparser=null,U.reset(),this.emit("error",Error("Malformed part header"));break}a=e}if(a===l)break;if(0!==V){if(1===V){switch(o[a]){case 45:V=2,++a;break;case 13:V=3,++a;break;default:V=0}if(a===l)return}if(2===V){if(V=0,45===o[a]){this._complete=!0,this._bparser=v;return}let e=this._writecb;this._writecb=h,G(!1,f,0,1,!1),this._writecb=e}else if(3===V){if(V=0,10===o[a]){if(++a,R>=P||(this._hparser=U,a===l))break;continue}{let e=this._writecb;this._writecb=h,G(!1,d,0,1,!1),this._writecb=e}}}if(!j){if(this._fileStream){let e;let t=Math.min(l-a,N-L);u?e=o.slice(a,a+t):(e=Buffer.allocUnsafe(t),o.copy(e,0,a,a+t)),(L+=e.length)===N?(e.length>0&&this._fileStream.push(e),this._fileStream.emit("limit"),this._fileStream.truncated=!0,j=!0):this._fileStream.push(e)||(this._writecb&&(this._fileStream._readcb=this._writecb),this._writecb=null)}else if(void 0!==t){let e;let r=Math.min(l-a,I-x);u?e=o.slice(a,a+r):(e=Buffer.allocUnsafe(r),o.copy(e,0,a,a+r)),x+=r,t.push(e),x===I&&(j=!0,M=!0)}}break}if(e){if(V=1,this._fileStream)this._fileStream.push(null),this._fileStream=null;else if(void 0!==t){let e;switch(t.length){case 0:e="";break;case 1:e=s(t[0],r,0);break;default:e=s(Buffer.concat(t,x),r,0)}t=void 0,x=0,this.emit("field",b,e,{nameTruncated:!1,valueTruncated:M,encoding:n,mimeType:i})}++R===P&&this.emit("partsLimit")}};this._bparser=new o(`\r
--${_}`,G),this._writecb=null,this._finalcb=null,this.write(p)}static detect(e){return"multipart"===e.type&&"form-data"===e.subtype}_write(e,t,r){this._writecb=r,this._bparser.push(e,0),this._writecb&&function(e,t){let r=e._writecb;e._writecb=null,r&&r()}(this)}_destroy(e,t){this._hparser=null,this._bparser=v,e||(e=T(this));let r=this._fileStream;r&&(this._fileStream=null,r.destroy(e)),t(e)}_final(e){if(this._bparser.destroy(),!this._complete)return e(Error("Unexpected end of form"));this._fileEndsLeft?this._finalcb=_.bind(null,this,e):_(this,e)}}function _(e,t,r){if(r)return t(r);t(r=T(e))}function T(e){if(e._hparser)return Error("Malformed part header");let t=e._fileStream;if(t&&(e._fileStream=null,t.destroy(Error("Unexpected end of file"))),!e._complete)return Error("Unexpected end of form")}let E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];e.exports=b},8286:(e,t,r)=>{"use strict";let{Writable:n}=r(12781),{getDecoder:i}=r(74288);class o extends n{constructor(e){super({autoDestroy:!0,emitClose:!0,highWaterMark:"number"==typeof e.highWaterMark?e.highWaterMark:void 0});let t=e.defCharset||"utf8";e.conType.params&&"string"==typeof e.conType.params.charset&&(t=e.conType.params.charset),this.charset=t;let r=e.limits;this.fieldSizeLimit=r&&"number"==typeof r.fieldSize?r.fieldSize:1048576,this.fieldsLimit=r&&"number"==typeof r.fields?r.fields:1/0,this.fieldNameSizeLimit=r&&"number"==typeof r.fieldNameSize?r.fieldNameSize:100,this._inKey=!0,this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,this._fields=0,this._key="",this._val="",this._byte=-2,this._lastPos=0,this._encode=0,this._decoder=i(t)}static detect(e){return"application"===e.type&&"x-www-form-urlencoded"===e.subtype}_write(e,t,r){if(this._fields>=this.fieldsLimit)return r();let n=0,i=e.length;if(this._lastPos=0,-2!==this._byte){if(-1===(n=a(this,e,n,i)))return r(Error("Malformed urlencoded form"));if(n>=i)return r();this._inKey?++this._bytesKey:++this._bytesVal}t:for(;n<i;)if(this._inKey){for(n=s(this,e,n,i);n<i;){switch(e[n]){case 61:this._lastPos<n&&(this._key+=e.latin1Slice(this._lastPos,n)),this._lastPos=++n,this._key=this._decoder(this._key,this._encode),this._encode=0,this._inKey=!1;continue t;case 38:if(this._lastPos<n&&(this._key+=e.latin1Slice(this._lastPos,n)),this._lastPos=++n,this._key=this._decoder(this._key,this._encode),this._encode=0,this._bytesKey>0&&this.emit("field",this._key,"",{nameTruncated:this._keyTrunc,valueTruncated:!1,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),r();continue;case 43:this._lastPos<n&&(this._key+=e.latin1Slice(this._lastPos,n)),this._key+=" ",this._lastPos=n+1;break;case 37:if(0===this._encode&&(this._encode=1),this._lastPos<n&&(this._key+=e.latin1Slice(this._lastPos,n)),this._lastPos=n+1,this._byte=-1,-1===(n=a(this,e,n+1,i)))return r(Error("Malformed urlencoded form"));if(n>=i)return r();++this._bytesKey,n=s(this,e,n,i);continue}++n,++this._bytesKey,n=s(this,e,n,i)}this._lastPos<n&&(this._key+=e.latin1Slice(this._lastPos,n))}else{for(n=l(this,e,n,i);n<i;){switch(e[n]){case 38:if(this._lastPos<n&&(this._val+=e.latin1Slice(this._lastPos,n)),this._lastPos=++n,this._inKey=!0,this._val=this._decoder(this._val,this._encode),this._encode=0,(this._bytesKey>0||this._bytesVal>0)&&this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),r();continue t;case 43:this._lastPos<n&&(this._val+=e.latin1Slice(this._lastPos,n)),this._val+=" ",this._lastPos=n+1;break;case 37:if(0===this._encode&&(this._encode=1),this._lastPos<n&&(this._val+=e.latin1Slice(this._lastPos,n)),this._lastPos=n+1,this._byte=-1,-1===(n=a(this,e,n+1,i)))return r(Error("Malformed urlencoded form"));if(n>=i)return r();++this._bytesVal,n=l(this,e,n,i);continue}++n,++this._bytesVal,n=l(this,e,n,i)}this._lastPos<n&&(this._val+=e.latin1Slice(this._lastPos,n))}r()}_final(e){if(-2!==this._byte)return e(Error("Malformed urlencoded form"));(!this._inKey||this._bytesKey>0||this._bytesVal>0)&&(this._inKey?this._key=this._decoder(this._key,this._encode):this._val=this._decoder(this._val,this._encode),this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"})),e()}}function a(e,t,r,n){if(r>=n)return n;if(-1===e._byte){let i=u[t[r++]];if(-1===i)return -1;if(i>=8&&(e._encode=2),r<n){let n=u[t[r++]];if(-1===n)return -1;e._inKey?e._key+=String.fromCharCode((i<<4)+n):e._val+=String.fromCharCode((i<<4)+n),e._byte=-2,e._lastPos=r}else e._byte=i}else{let n=u[t[r++]];if(-1===n)return -1;e._inKey?e._key+=String.fromCharCode((e._byte<<4)+n):e._val+=String.fromCharCode((e._byte<<4)+n),e._byte=-2,e._lastPos=r}return r}function s(e,t,r,n){if(e._bytesKey>e.fieldNameSizeLimit){for(!e._keyTrunc&&e._lastPos<r&&(e._key+=t.latin1Slice(e._lastPos,r-1)),e._keyTrunc=!0;r<n;++r){let n=t[r];if(61===n||38===n)break;++e._bytesKey}e._lastPos=r}return r}function l(e,t,r,n){if(e._bytesVal>e.fieldSizeLimit){for(!e._valTrunc&&e._lastPos<r&&(e._val+=t.latin1Slice(e._lastPos,r-1)),e._valTrunc=!0;r<n&&38!==t[r];++r)++e._bytesVal;e._lastPos=r}return r}let u=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];e.exports=o},74288:function(e){"use strict";function t(e){let t;for(;;)switch(e){case"utf-8":case"utf8":return r.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return r.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return r.utf16le;case"base64":return r.base64;default:if(void 0===t){t=!0,e=e.toLowerCase();continue}return r.other.bind(e)}}let r={utf8:(e,t)=>{if(0===e.length)return"";if("string"==typeof e){if(t<2)return e;e=Buffer.from(e,"latin1")}return e.utf8Slice(0,e.length)},latin1:(e,t)=>0===e.length?"":"string"==typeof e?e:e.latin1Slice(0,e.length),utf16le:(e,t)=>0===e.length?"":("string"==typeof e&&(e=Buffer.from(e,"latin1")),e.ucs2Slice(0,e.length)),base64:(e,t)=>0===e.length?"":("string"==typeof e&&(e=Buffer.from(e,"latin1")),e.base64Slice(0,e.length)),other:(e,t)=>{if(0===e.length)return"";"string"==typeof e&&(e=Buffer.from(e,"latin1"));try{return new TextDecoder(this).decode(e)}catch{}}};function n(e,r,n){let i=t(r);if(i)return i(e,n)}let i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];e.exports={basename:function(e){if("string"!=typeof e)return"";for(let t=e.length-1;t>=0;--t)switch(e.charCodeAt(t)){case 47:case 92:return".."===(e=e.slice(t+1))||"."===e?"":e}return".."===e||"."===e?"":e},convertToUTF8:n,getDecoder:t,parseContentType:function(e){if(0===e.length)return;let t=Object.create(null),r=0;for(;r<e.length;++r){let t=e.charCodeAt(r);if(1!==i[t]){if(47!==t||0===r)return;break}}if(r===e.length)return;let n=e.slice(0,r).toLowerCase(),a=++r;for(;r<e.length;++r)if(1!==i[e.charCodeAt(r)]){if(r===a||void 0===function(e,t,r){for(;t<e.length;){let n,a;for(;t<e.length;++t){let r=e.charCodeAt(t);if(32!==r&&9!==r)break}if(t===e.length)break;if(59!==e.charCodeAt(t++))return;for(;t<e.length;++t){let r=e.charCodeAt(t);if(32!==r&&9!==r)break}if(t===e.length)return;let s=t;for(;t<e.length;++t){let r=e.charCodeAt(t);if(1!==i[r]){if(61!==r)return;break}}if(t===e.length||(n=e.slice(s,t),++t===e.length))return;let l="";if(34===e.charCodeAt(t)){a=++t;let r=!1;for(;t<e.length;++t){let n=e.charCodeAt(t);if(92===n){r?(a=t,r=!1):(l+=e.slice(a,t),r=!0);continue}if(34===n){if(r){a=t,r=!1;continue}l+=e.slice(a,t);break}if(r&&(a=t-1,r=!1),1!==o[n])return}if(t===e.length)return;++t}else{for(a=t;t<e.length;++t)if(1!==i[e.charCodeAt(t)]){if(t===a)return;break}l=e.slice(a,t)}void 0===r[n=n.toLowerCase()]&&(r[n]=l)}return r}(e,r,t))return;break}if(r!==a)return{type:n,subtype:e.slice(a,r).toLowerCase(),params:t}},parseDisposition:function(e,t){if(0===e.length)return;let r=Object.create(null),u=0;for(;u<e.length;++u)if(1!==i[e.charCodeAt(u)]){if(void 0===function(e,t,r,u){for(;t<e.length;){let c,p,d;for(;t<e.length;++t){let r=e.charCodeAt(t);if(32!==r&&9!==r)break}if(t===e.length)break;if(59!==e.charCodeAt(t++))return;for(;t<e.length;++t){let r=e.charCodeAt(t);if(32!==r&&9!==r)break}if(t===e.length)return;let f=t;for(;t<e.length;++t){let r=e.charCodeAt(t);if(1!==i[r]){if(61===r)break;return}}if(t===e.length)return;let h="";if(42===(c=e.slice(f,t)).charCodeAt(c.length-1)){let r=++t;for(;t<e.length;++t){let r=e.charCodeAt(t);if(1!==a[r]){if(39!==r)return;break}}if(t===e.length)return;for(d=e.slice(r,t),++t;t<e.length&&39!==e.charCodeAt(t);++t);if(t===e.length||++t===e.length)return;p=t;let i=0;for(;t<e.length;++t){let r=e.charCodeAt(t);if(1!==s[r]){if(37===r){let r,n;if(t+2<e.length&&-1!==(r=l[e.charCodeAt(t+1)])&&-1!==(n=l[e.charCodeAt(t+2)])){let o=(r<<4)+n;h+=e.slice(p,t)+String.fromCharCode(o),t+=2,p=t+1,o>=128?i=2:0===i&&(i=1);continue}return}break}}if(h+=e.slice(p,t),void 0===(h=n(h,d,i)))return}else{if(++t===e.length)return;if(34===e.charCodeAt(t)){p=++t;let r=!1;for(;t<e.length;++t){let n=e.charCodeAt(t);if(92===n){r?(p=t,r=!1):(h+=e.slice(p,t),r=!0);continue}if(34===n){if(r){p=t,r=!1;continue}h+=e.slice(p,t);break}if(r&&(p=t-1,r=!1),1!==o[n])return}if(t===e.length)return;++t}else{for(p=t;t<e.length;++t)if(1!==i[e.charCodeAt(t)]){if(t===p)return;break}h=e.slice(p,t)}if(void 0===(h=u(h,2)))return}void 0===r[c=c.toLowerCase()]&&(r[c]=h)}return r}(e,u,r,t))return;break}return{type:e.slice(0,u).toLowerCase(),params:r}}}},73499:e=>{"use strict";let t=/[\p{Lu}]/u,r=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,i=/([\p{Alpha}\p{N}_]|$)/u,o=/[_.\- ]+/,a=RegExp("^"+o.source),s=RegExp(o.source+i.source,"gu"),l=RegExp("\\d+"+i.source,"gu"),u=(e,n,i)=>{let o=!1,a=!1,s=!1;for(let l=0;l<e.length;l++){let u=e[l];o&&t.test(u)?(e=e.slice(0,l)+"-"+e.slice(l),o=!1,s=a,a=!0,l++):a&&s&&r.test(u)?(e=e.slice(0,l-1)+"-"+e.slice(l-1),s=a,a=!1,o=!0):(o=n(u)===u&&i(u)!==u,s=a,a=i(u)===u&&n(u)!==u)}return e},c=(e,t)=>(n.lastIndex=0,e.replace(n,e=>t(e))),p=(e,t)=>(s.lastIndex=0,l.lastIndex=0,e.replace(s,(e,r)=>t(r)).replace(l,e=>t(e))),d=(e,t)=>{if(!("string"==typeof e||Array.isArray(e)))throw TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},0===(e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim()).length)return"";let r=!1===t.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t.locale),n=!1===t.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t.locale);return 1===e.length?t.pascalCase?n(e):r(e):(e!==r(e)&&(e=u(e,r,n)),e=e.replace(a,""),e=t.preserveConsecutiveUppercase?c(e,r):r(e),t.pascalCase&&(e=n(e.charAt(0))+e.slice(1)),p(e,n))};e.exports=d,e.exports.default=d},73004:(e,t,r)=>{"use strict";let n;let i=r(44649),{stdout:o,stderr:a}=r(67057),{stringReplaceAll:s,stringEncaseCRLFWithFirstIndex:l}=r(14286),{isArray:u}=Array,c=["ansi","ansi","ansi256","ansi16m"],p=Object.create(null),d=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw Error("The `level` option should be an integer from 0 to 3");let r=o?o.level:0;e.level=void 0===t.level?r:t.level};class f{constructor(e){return h(e)}}let h=e=>{let t={};return d(t,e),t.template=(...e)=>T(t.template,...e),Object.setPrototypeOf(t,y.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=f,t.template};function y(e){return h(e)}for(let[e,t]of Object.entries(i))p[e]={get(){let r=b(this,g(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:r}),r}};p.visible={get(){let e=b(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};let m=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let e of m)p[e]={get(){let{level:t}=this;return function(...r){return b(this,g(i.color[c[t]][e](...r),i.color.close,this._styler),this._isEmpty)}}};for(let e of m)p["bg"+e[0].toUpperCase()+e.slice(1)]={get(){let{level:t}=this;return function(...r){return b(this,g(i.bgColor[c[t]][e](...r),i.bgColor.close,this._styler),this._isEmpty)}}};let v=Object.defineProperties(()=>{},{...p,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),g=(e,t,r)=>{let n,i;return void 0===r?(n=e,i=t):(n=r.openAll+e,i=t+r.closeAll),{open:e,close:t,openAll:n,closeAll:i,parent:r}},b=(e,t,r)=>{let n=(...e)=>u(e[0])&&u(e[0].raw)?_(n,T(n,...e)):_(n,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(n,v),n._generator=e,n._styler=t,n._isEmpty=r,n},_=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let r=e._styler;if(void 0===r)return t;let{openAll:n,closeAll:i}=r;if(-1!==t.indexOf("\x1b"))for(;void 0!==r;)t=s(t,r.close,r.open),r=r.parent;let o=t.indexOf("\n");return -1!==o&&(t=l(t,i,n,o)),n+t+i},T=(e,...t)=>{let[i]=t;if(!u(i)||!u(i.raw))return t.join(" ");let o=t.slice(1),a=[i.raw[0]];for(let e=1;e<i.length;e++)a.push(String(o[e-1]).replace(/[{}\\]/g,"\\$&"),String(i.raw[e]));return void 0===n&&(n=r(12289)),n(e,a.join(""))};Object.defineProperties(y.prototype,p);let E=h(void 0);E.supportsColor=o,E.stderr=h({level:a?a.level:0}),E.stderr.supportsColor=a,e.exports=E},12289:e=>{"use strict";let t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,r=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,i=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,o=new Map([["n","\n"],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1b"],["a","\x07"]]);function a(e){let t="u"===e[0],r="{"===e[1];return t&&!r&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):t&&r?String.fromCodePoint(parseInt(e.slice(2,-1),16)):o.get(e)||e}function s(e,t){let r={};for(let e of t)for(let t of e.styles)r[t[0]]=e.inverse?null:t.slice(1);let n=e;for(let[e,t]of Object.entries(r))if(Array.isArray(t)){if(!(e in n))throw Error(`Unknown Chalk style: ${e}`);n=t.length>0?n[e](...t):n[e]}return n}e.exports=(e,o)=>{let l=[],u=[],c=[];if(o.replace(t,(t,o,p,d,f,h)=>{if(o)c.push(a(o));else if(d){let t=c.join("");c=[],u.push(0===l.length?t:s(e,l)(t)),l.push({inverse:p,styles:function(e){let t;r.lastIndex=0;let o=[];for(;null!==(t=r.exec(e));){let e=t[1];if(t[2]){let r=function(e,t){let r;let o=[];for(let s of t.trim().split(/\s*,\s*/g)){let t=Number(s);if(Number.isNaN(t)){if(r=s.match(n))o.push(r[2].replace(i,(e,t,r)=>t?a(t):r));else throw Error(`Invalid Chalk template style argument: ${s} (in style '${e}')`)}else o.push(t)}return o}(e,t[2]);o.push([e].concat(r))}else o.push([e])}return o}(d)})}else if(f){if(0===l.length)throw Error("Found extraneous } in Chalk template literal");u.push(s(e,l)(c.join(""))),c=[],l.pop()}else c.push(h)}),u.push(c.join("")),l.length>0)throw Error(`Chalk template literal is missing ${l.length} closing bracket${1===l.length?"":"s"} (\`}\`)`);return u.join("")}},14286:e=>{"use strict";e.exports={stringReplaceAll:(e,t,r)=>{let n=e.indexOf(t);if(-1===n)return e;let i=t.length,o=0,a="";do a+=e.substr(o,n-o)+t+r,o=n+i,n=e.indexOf(t,o);while(-1!==n);return a+e.substr(o)},stringEncaseCRLFWithFirstIndex:(e,t,r,n)=>{let i=0,o="";do{let a="\r"===e[n-1];o+=e.substr(i,(a?n-1:n)-i)+t+(a?"\r\n":"\n")+r,i=n+1,n=e.indexOf("\n",i)}while(-1!==n);return o+e.substr(i)}}},10787:(e,t,r)=>{let n=r(7051),i={};for(let e of Object.keys(n))i[n[e]]=e;let o={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(let t of(e.exports=o,Object.keys(o))){if(!("channels"in o[t]))throw Error("missing channels property: "+t);if(!("labels"in o[t]))throw Error("missing channel labels property: "+t);if(o[t].labels.length!==o[t].channels)throw Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=o[t];delete o[t].channels,delete o[t].labels,Object.defineProperty(o[t],"channels",{value:e}),Object.defineProperty(o[t],"labels",{value:r})}o.rgb.hsl=function(e){let t;let r=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.min(r,n,i),a=Math.max(r,n,i),s=a-o;a===o?t=0:r===a?t=(n-i)/s:n===a?t=2+(i-r)/s:i===a&&(t=4+(r-n)/s),(t=Math.min(60*t,360))<0&&(t+=360);let l=(o+a)/2;return[t,100*(a===o?0:l<=.5?s/(a+o):s/(2-a-o)),100*l]},o.rgb.hsv=function(e){let t,r,n,i,o;let a=e[0]/255,s=e[1]/255,l=e[2]/255,u=Math.max(a,s,l),c=u-Math.min(a,s,l),p=function(e){return(u-e)/6/c+.5};return 0===c?(i=0,o=0):(o=c/u,t=p(a),r=p(s),n=p(l),a===u?i=n-r:s===u?i=1/3+t-n:l===u&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*u]},o.rgb.hwb=function(e){let t=e[0],r=e[1],n=e[2];return[o.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(r,n))*100,100*(n=1-1/255*Math.max(t,Math.max(r,n)))]},o.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n);return[100*((1-t-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*i]},o.rgb.keyword=function(e){let t;let r=i[e];if(r)return r;let o=1/0;for(let r of Object.keys(n)){let i=n[r],a=(e[0]-i[0])**2+(e[1]-i[1])**2+(e[2]-i[2])**2;a<o&&(o=a,t=r)}return t},o.keyword.rgb=function(e){return n[e]},o.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?((t+.055)/1.055)**2.4:t/12.92)+.3576*(r=r>.04045?((r+.055)/1.055)**2.4:r/12.92)+.1805*(n=n>.04045?((n+.055)/1.055)**2.4:n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},o.rgb.lab=function(e){let t=o.rgb.xyz(e),r=t[0],n=t[1],i=t[2];return r/=95.047,n/=100,i/=108.883,[116*(n=n>.008856?n**(1/3):7.787*n+16/116)-16,500*((r=r>.008856?r**(1/3):7.787*r+16/116)-n),200*(n-(i=i>.008856?i**(1/3):7.787*i+16/116))]},o.hsl.rgb=function(e){let t,r,n;let i=e[0]/360,o=e[1]/100,a=e[2]/100;if(0===o)return[n=255*a,n,n];t=a<.5?a*(1+o):a+o-a*o;let s=2*a-t,l=[0,0,0];for(let e=0;e<3;e++)(r=i+-(1/3*(e-1)))<0&&r++,r>1&&r--,n=6*r<1?s+(t-s)*6*r:2*r<1?t:3*r<2?s+(t-s)*(2/3-r)*6:s,l[e]=255*n;return l},o.hsl.hsv=function(e){let t=e[0],r=e[1]/100,n=e[2]/100,i=r,o=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=o<=1?o:2-o;let a=(n+r)/2;return[t,100*(0===n?2*i/(o+i):2*r/(n+r)),100*a]},o.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,n=e[2]/100,i=t-Math.floor(t),o=255*n*(1-r),a=255*n*(1-r*i),s=255*n*(1-r*(1-i));switch(n*=255,Math.floor(t)%6){case 0:return[n,s,o];case 1:return[a,n,o];case 2:return[o,n,s];case 3:return[o,a,n];case 4:return[s,o,n];case 5:return[n,o,a]}},o.hsv.hsl=function(e){let t,r;let n=e[0],i=e[1]/100,o=e[2]/100,a=Math.max(o,.01);r=(2-i)*o;let s=(2-i)*a;return[n,100*(i*a/(s<=1?s:2-s)||0),100*(r/=2)]},o.hwb.rgb=function(e){let t,r,n,i;let o=e[0]/360,a=e[1]/100,s=e[2]/100,l=a+s;l>1&&(a/=l,s/=l);let u=Math.floor(6*o),c=1-s;t=6*o-u,(1&u)!=0&&(t=1-t);let p=a+t*(c-a);switch(u){default:case 6:case 0:r=c,n=p,i=a;break;case 1:r=p,n=c,i=a;break;case 2:r=a,n=c,i=p;break;case 3:r=a,n=p,i=c;break;case 4:r=p,n=a,i=c;break;case 5:r=c,n=a,i=p}return[255*r,255*n,255*i]},o.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},o.xyz.rgb=function(e){let t,r,n;let i=e[0]/100,o=e[1]/100,a=e[2]/100;return t=(t=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*t**(1/2.4)-.055:12.92*t,r=(r=-.9689*i+1.8758*o+.0415*a)>.0031308?1.055*r**(1/2.4)-.055:12.92*r,n=(n=.0557*i+-.204*o+1.057*a)>.0031308?1.055*n**(1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},o.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];return t/=95.047,r/=100,n/=108.883,[116*(r=r>.008856?r**(1/3):7.787*r+16/116)-16,500*((t=t>.008856?t**(1/3):7.787*t+16/116)-r),200*(r-(n=n>.008856?n**(1/3):7.787*n+16/116))]},o.lab.xyz=function(e){let t,r,n;let i=e[0],o=e[1],a=e[2];t=o/500+(r=(i+16)/116),n=r-a/200;let s=r**3,l=t**3,u=n**3;return r=(s>.008856?s:(r-16/116)/7.787)*100,[t=(l>.008856?l:(t-16/116)/7.787)*95.047,r,n=(u>.008856?u:(n-16/116)/7.787)*108.883]},o.lab.lch=function(e){let t;let r=e[0],n=e[1],i=e[2];return(t=360*Math.atan2(i,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+i*i),t]},o.lch.lab=function(e){let t=e[0],r=e[1],n=e[2]/360*2*Math.PI;return[t,r*Math.cos(n),r*Math.sin(n)]},o.rgb.ansi16=function(e,t=null){let[r,n,i]=e,a=null===t?o.rgb.hsv(e)[2]:t;if(0===(a=Math.round(a/50)))return 30;let s=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return 2===a&&(s+=60),s},o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])},o.rgb.ansi256=function(e){let t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},o.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];let r=(~~(e>50)+1)*.5;return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},o.ansi256.rgb=function(e){let t;if(e>=232){let t=(e-232)*10+8;return[t,t,t]}return[Math.floor((e-=16)/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},o.rgb.hex=function(e){let t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},o.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];3===t[0].length&&(r=r.split("").map(e=>e+e).join(""));let n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},o.rgb.hcg=function(e){let t;let r=e[0]/255,n=e[1]/255,i=e[2]/255,o=Math.max(Math.max(r,n),i),a=Math.min(Math.min(r,n),i),s=o-a;return t=s<1?a/(1-s):0,[(s<=0?0:o===r?(n-i)/s%6:o===n?2+(i-r)/s:4+(r-n)/s)/6%1*360,100*s,100*t]},o.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],100*n,100*i]},o.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,n=t*r,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},o.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];let i=[0,0,0],o=t%1*6,a=o%1,s=1-a,l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=a,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=a;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=a,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return l=(1-r)*n,[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]},o.hcg.hsv=function(e){let t=e[1]/100,r=t+e[2]/100*(1-t),n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},o.hcg.hsl=function(e){let t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},o.hcg.hwb=function(e){let t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],(r-t)*100,(1-r)*100]},o.hwb.hcg=function(e){let t=e[1]/100,r=1-e[2]/100,n=r-t,i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},o.gray.hsl=function(e){return[0,0,e[0]]},o.gray.hsv=o.gray.hsl,o.gray.hwb=function(e){return[0,100,e[0]]},o.gray.cmyk=function(e){return[0,0,0,e[0]]},o.gray.lab=function(e){return[e[0],0,0]},o.gray.hex=function(e){let t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},o.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},27443:(e,t,r)=>{let n=r(10787),i=r(6436),o={};Object.keys(n).forEach(e=>{o[e]={},Object.defineProperty(o[e],"channels",{value:n[e].channels}),Object.defineProperty(o[e],"labels",{value:n[e].labels});let t=i(e);Object.keys(t).forEach(r=>{let n=t[r];o[e][r]=function(e){let t=function(...t){let r=t[0];if(null==r)return r;r.length>1&&(t=r);let n=e(t);if("object"==typeof n)for(let e=n.length,t=0;t<e;t++)n[t]=Math.round(n[t]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(n),o[e][r].raw=function(e){let t=function(...t){let r=t[0];return null==r?r:(r.length>1&&(t=r),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)})}),e.exports=o},6436:(e,t,r)=>{let n=r(10787);e.exports=function(e){let t=function(e){let t=function(){let e={},t=Object.keys(n);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;){let e=r.pop(),i=Object.keys(n[e]);for(let n=i.length,o=0;o<n;o++){let n=i[o],a=t[n];-1===a.distance&&(a.distance=t[e].distance+1,a.parent=e,r.unshift(n))}}return t}(e),r={},i=Object.keys(t);for(let e=i.length,o=0;o<e;o++){let e=i[o];null!==t[e].parent&&(r[e]=function(e,t){let r=[t[e].parent,e],i=n[t[e].parent][e],o=t[e].parent;for(;t[o].parent;)r.unshift(t[o].parent),i=function(e,t){return function(r){return t(e(r))}}(n[t[o].parent][o],i),o=t[o].parent;return i.conversion=r,i}(e,t))}return r}},7051:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},93050:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(30783)(t);let{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},30783:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,o;let a=null;function s(...e){if(!s.enabled)return;let n=Number(new Date),i=n-(r||n);s.diff=i,s.prev=r,s.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";o++;let i=t.formatters[n];if("function"==typeof i){let t=e[o];r=i.call(s,t),e.splice(o,1),o--}return r}),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,r){let n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(i),...t.skips.map(i).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,n;if("*"===e[e.length-1])return!0;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(13974),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},19092:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=r(93050):e.exports=r(12226)},12226:(e,t,r)=>{let n=r(76224),i=r(73837);t.init=function(e){e.inspectOpts={};let r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(i.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){let{namespace:n,useColors:i}=this;if(i){let t=this.color,i="\x1b[3"+(t<8?t:"8;5;"+t),o=`  ${i};1m${n} \u001B[0m`;r[0]=o+r[0].split("\n").join("\n"+o),r.push(i+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else r[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:n.isatty(process.stderr.fd)},t.destroy=i.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=r(67057);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(30783)(t);let{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},56884:(e,t,r)=>{"use strict";let n=r(62605),i=new Set(["__proto__","prototype","constructor"]),o=e=>!e.some(e=>i.has(e));function a(e){let t=e.split("."),r=[];for(let e=0;e<t.length;e++){let n=t[e];for(;"\\"===n[n.length-1]&&void 0!==t[e+1];)n=n.slice(0,-1)+"."+t[++e];r.push(n)}return o(r)?r:[]}e.exports={get(e,t,r){if(!n(e)||"string"!=typeof t)return void 0===r?e:r;let i=a(t);if(0!==i.length){for(let t=0;t<i.length;t++)if(null==(e=e[i[t]])){if(t!==i.length-1)return r;break}return void 0===e?r:e}},set(e,t,r){if(!n(e)||"string"!=typeof t)return e;let i=e,o=a(t);for(let t=0;t<o.length;t++){let i=o[t];n(e[i])||(e[i]={}),t===o.length-1&&(e[i]=r),e=e[i]}return i},delete(e,t){if(!n(e)||"string"!=typeof t)return!1;let r=a(t);for(let t=0;t<r.length;t++){let i=r[t];if(t===r.length-1)return delete e[i],!0;if(!n(e=e[i]))return!1}},has(e,t){if(!n(e)||"string"!=typeof t)return!1;let r=a(t);if(0===r.length)return!1;for(let t=0;t<r.length;t++){if(!n(e)||!(r[t]in e))return!1;e=e[r[t]]}return!0}}},286:(e,t)=>{function r(e,t,n){if("object"==typeof e&&"object"==typeof t){if(Array.isArray(e)&&Array.isArray(t))for(n=0;n<t.length;n++)e[n]=r(e[n],t[n]);else for(n in t){if("__proto__"===n||"constructor"===n||"prototype"===n)break;e[n]=r(e[n],t[n])}return e}return t}t.dset=function(e,t,n){t.split&&(t=t.split("."));for(var i,o,a=0,s=t.length,l=e;a<s&&"__proto__"!==(o=t[a++])&&"constructor"!==o&&"prototype"!==o;)l=l[o]=a===s?r(l[o],n):typeof(i=l[o])==typeof t?i:0*t[a]!=0||~(""+t[a]).indexOf(".")?{}:[]},t.merge=r},96985:e=>{"use strict";var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],r={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function n(e,t){var n=r[e];return void 0===n?255:n<<t}e.exports=function(e){var r=e.indexOf("%");if(-1===r)return e;for(var i=e.length,o="",a=0,s=0,l=r,u=12;r>-1&&r<i;){var c=n(e[r+1],4)|n(e[r+2],0),p=t[c];if(u=t[256+u+p],s=s<<6|c&t[364+p],12===u)o+=e.slice(a,l)+(s<=65535?String.fromCharCode(s):String.fromCharCode(55232+(s>>10),56320+(1023&s))),s=0,a=r+3,r=l=e.indexOf("%",a);else{if(0===u)return null;if((r+=3)<i&&37===e.charCodeAt(r))continue;return null}}return o+e.slice(a)}},61125:(e,t,r)=>{"use strict";let n=r(14534),i=r(86562),o={parse:n,stringify:i};e.exports=o,e.exports.default=o,e.exports.parse=n,e.exports.stringify=i},30775:e=>{let t=Array.from({length:256},(e,t)=>"%"+((t<16?"0":"")+t.toString(16)).toUpperCase()),r=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);e.exports={encodeString:function(e){let n=e.length;if(0===n)return"";let i="",o=0,a=0;r:for(;a<n;a++){let s=e.charCodeAt(a);for(;s<128;){if(1!==r[s]&&(o<a&&(i+=e.slice(o,a)),o=a+1,i+=t[s]),++a===n)break r;s=e.charCodeAt(a)}if(o<a&&(i+=e.slice(o,a)),s<2048){o=a+1,i+=t[192|s>>6]+t[128|63&s];continue}if(s<55296||s>=57344){o=a+1,i+=t[224|s>>12]+t[128|s>>6&63]+t[128|63&s];continue}if(++a>=n)throw Error("URI malformed");let l=1023&e.charCodeAt(a);o=a+1,i+=t[240|(s=65536+((1023&s)<<10|l))>>18]+t[128|s>>12&63]+t[128|s>>6&63]+t[128|63&s]}return 0===o?e:o<n?i+e.slice(o):i}}},14534:(e,t,r)=>{"use strict";let n=r(96985),i=/\+/g,o=function(){};o.prototype=Object.create(null),e.exports=function(e){let t=new o;if("string"!=typeof e)return t;let r=e.length,a="",s="",l=-1,u=-1,c=!1,p=!1,d=!1,f=!1,h=!1,y=0;for(let o=0;o<r+1;o++)if(38===(y=o!==r?e.charCodeAt(o):38)){if((h=u>l)||(u=o),a=e.slice(l+1,u),h||a.length>0){d&&(a=a.replace(i," ")),c&&(a=n(a)||a),h&&(s=e.slice(u+1,o),f&&(s=s.replace(i," ")),p&&(s=n(s)||s));let r=t[a];void 0===r?t[a]=s:r.pop?r.push(s):t[a]=[r,s]}s="",l=o,u=o,c=!1,p=!1,d=!1,f=!1}else 61===y?u<=l?u=o:p=!0:43===y?u>l?f=!0:d=!0:37===y&&(u>l?p=!0:c=!0);return t}},86562:(e,t,r)=>{"use strict";let{encodeString:n}=r(30775);function i(e){let t=typeof e;return"string"===t?n(e):"bigint"===t?e.toString():"boolean"===t?e?"true":"false":"number"===t&&Number.isFinite(e)?e<1e21?""+e:n(""+e):""}e.exports=function(e){let t="";if(null===e||"object"!=typeof e)return t;let r=Object.keys(e),o=r.length,a=0;for(let s=0;s<o;s++){let o=r[s],l=e[o],u=n(o)+"=";if(s&&(t+="&"),Array.isArray(l)){a=l.length;for(let e=0;e<a;e++)e&&(t+="&"),t+=u+i(l[e])}else t+=u+i(l)}return t}},59445:(e,t,r)=>{"use strict";let n=r(73837),i=r(34495),o=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),a=e=>t=>!0===e?Number(t):String(t),s=e=>"number"==typeof e||"string"==typeof e&&""!==e,l=e=>Number.isInteger(+e),u=e=>{let t=`${e}`,r=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++r];);return r>0},c=(e,t,r)=>"string"==typeof e||"string"==typeof t||!0===r.stringify,p=(e,t,r)=>{if(t>0){let r="-"===e[0]?"-":"";r&&(e=e.slice(1)),e=r+e.padStart(r?t-1:t,"0")}return!1===r?String(e):e},d=(e,t)=>{let r="-"===e[0]?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},f=(e,t,r)=>{let n;e.negatives.sort((e,t)=>e<t?-1:e>t?1:0),e.positives.sort((e,t)=>e<t?-1:e>t?1:0);let i=t.capture?"":"?:",o="",a="";return(e.positives.length&&(o=e.positives.map(e=>d(String(e),r)).join("|")),e.negatives.length&&(a=`-(${i}${e.negatives.map(e=>d(String(e),r)).join("|")})`),n=o&&a?`${o}|${a}`:o||a,t.wrap)?`(${i}${n})`:n},h=(e,t,r,n)=>{if(r)return i(e,t,{wrap:!1,...n});let o=String.fromCharCode(e);if(e===t)return o;let a=String.fromCharCode(t);return`[${o}-${a}]`},y=(e,t,r)=>{if(Array.isArray(e)){let t=!0===r.wrap,n=r.capture?"":"?:";return t?`(${n}${e.join("|")})`:e.join("|")}return i(e,t,r)},m=(...e)=>RangeError("Invalid range arguments: "+n.inspect(...e)),v=(e,t,r)=>{if(!0===r.strictRanges)throw m([e,t]);return[]},g=(e,t)=>{if(!0===t.strictRanges)throw TypeError(`Expected step "${e}" to be a number`);return[]},b=(e,t,r=1,n={})=>{let i=Number(e),o=Number(t);if(!Number.isInteger(i)||!Number.isInteger(o)){if(!0===n.strictRanges)throw m([e,t]);return[]}0===i&&(i=0),0===o&&(o=0);let s=i>o,l=String(e),v=String(t),g=String(r);r=Math.max(Math.abs(r),1);let b=u(l)||u(v)||u(g),_=b?Math.max(l.length,v.length,g.length):0,T=!1===b&&!1===c(e,t,n),E=n.transform||a(T);if(n.toRegex&&1===r)return h(d(e,_),d(t,_),!0,n);let O={negatives:[],positives:[]},S=e=>O[e<0?"negatives":"positives"].push(Math.abs(e)),w=[],I=0;for(;s?i>=o:i<=o;)!0===n.toRegex&&r>1?S(i):w.push(p(E(i,I),_,T)),i=s?i-r:i+r,I++;return!0===n.toRegex?r>1?f(O,n,_):y(w,null,{wrap:!1,...n}):w},_=(e,t,r=1,n={})=>{if(!l(e)&&e.length>1||!l(t)&&t.length>1)return v(e,t,n);let i=n.transform||(e=>String.fromCharCode(e)),o=`${e}`.charCodeAt(0),a=`${t}`.charCodeAt(0),s=o>a,u=Math.min(o,a),c=Math.max(o,a);if(n.toRegex&&1===r)return h(u,c,!1,n);let p=[],d=0;for(;s?o>=a:o<=a;)p.push(i(o,d)),o=s?o-r:o+r,d++;return!0===n.toRegex?y(p,null,{wrap:!1,options:n}):p},T=(e,t,r,n={})=>{if(null==t&&s(e))return[e];if(!s(e)||!s(t))return v(e,t,n);if("function"==typeof r)return T(e,t,1,{transform:r});if(o(r))return T(e,t,0,r);let i={...n};return(!0===i.capture&&(i.wrap=!0),l(r=r||i.step||1))?l(e)&&l(t)?b(e,t,r,i):_(e,t,Math.max(Math.abs(r),1),i):null==r||o(r)?T(e,t,1,r):g(r,i)};e.exports=T},80881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumTypeComposer=void 0;let n=r(55284),i=r(45567),o=r(64166),a=r(53406),s=r(41838),l=r(19988),u=r(8849),c=r(23780),p=r(57538),d=r(32800),f=r(22049);class h{constructor(e,t){if(!(t instanceof l.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `new EnumTypeComposer(GraphQLEnumType, SchemaComposer)`");if(!(e instanceof n.GraphQLEnumType))throw Error("EnumTypeComposer accept only GraphQLEnumType in constructor");this.schemaComposer=t,this._gqType=e,this.schemaComposer.set(e,this),this.schemaComposer.set(e.name,this),this._gqcFields=(0,a.convertEnumValuesToConfig)(this._gqType.getValues(),this.schemaComposer),this._gqType.astNode||(this._gqType.astNode=(0,f.getEnumTypeDefinitionNode)(this)),this._gqcIsModified=!1}static create(e,t){if(!(t instanceof l.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `EnumTypeComposer.create(typeDef, schemaComposer)`");if(t.hasInstance(e,h))return t.getETC(e);let r=this.createTemp(e,t);return t&&t.add(r),r}static createTemp(e,t){let r;let a=t||new l.SchemaComposer;if((0,i.isString)(e)){if((0,p.isTypeNameString)(e))r=new h(new n.GraphQLEnumType({name:e,values:s.graphqlVersion<13?{_OldGraphqlStubValue_:{}}:{}}),a);else if(!((r=a.typeMapper.convertSDLTypeDefinition(e))instanceof h))throw Error("You should provide correct GraphQLEnumType type definition. Eg. `enum MyType { KEY1 KEY2 KEY3 }`")}else if(e instanceof n.GraphQLEnumType)r=new h(e,a);else if((0,i.isObject)(e))(r=new h(new n.GraphQLEnumType(Object.assign({},e)),a)).setFields(e.values||{}),r.setExtensions(e.extensions),Array.isArray(null==e?void 0:e.directives)&&r.setDirectives(e.directives);else throw Error(`You should provide GraphQLEnumTypeConfig or string with enum name or SDL. Provided:
${(0,o.inspect)(e)}`);return r}hasField(e){return!!this.getFields()[e]}getFields(){return this._gqcFields}getField(e){let t=this.getFields();if(!t[e])throw Error(`Cannot get value '${e}' from enum type '${this.getTypeName()}'. Value with such name does not exist.`);return t[e]}getFieldNames(){return Object.keys(this._gqcFields)}setFields(e){return this._gqcFields={},Object.keys(e).forEach(t=>{this.setField(t,e[t])}),this}setField(e,t){return this._gqcFields[e]={value:t.hasOwnProperty("value")?t.value:e,description:t.description,deprecationReason:t.deprecationReason,extensions:t.extensions||{},directives:t.directives||[]},this._gqcIsModified=!0,this}addFields(e){return Object.keys(e).forEach(t=>{this.setField(t,e[t])}),this}removeField(e){return(Array.isArray(e)?e:[e]).forEach(e=>{delete this._gqcFields[e],this._gqcIsModified=!0}),this}removeOtherFields(e){let t=Array.isArray(e)?e:[e];return Object.keys(this._gqcFields).forEach(e=>{-1===t.indexOf(e)&&(delete this._gqcFields[e],this._gqcIsModified=!0)}),this}reorderFields(e){let t={},r=this._gqcFields;return e.forEach(e=>{r[e]&&(t[e]=r[e],delete r[e])}),this._gqcFields=Object.assign(Object.assign({},t),r),this._gqcIsModified=!0,this}extendField(e,t){let r;try{r=this.getField(e)}catch(t){throw Error(`Cannot extend value '${e}' from enum '${this.getTypeName()}'. Value does not exist.`)}return this.setField(e,Object.assign(Object.assign(Object.assign({},r),t),{extensions:Object.assign(Object.assign({},r.extensions||{}),t.extensions||{}),directives:[...r.directives||[],...t.directives||[]]})),this}deprecateFields(e){let t=this.getFieldNames();if("string"==typeof e){if(-1===t.indexOf(e))throw Error(`Cannot deprecate non-existent value '${e}' from enum '${this.getTypeName()}'`);this.extendField(e,{deprecationReason:"deprecated"})}else Array.isArray(e)?e.forEach(e=>{if(-1===t.indexOf(e))throw Error(`Cannot deprecate non-existent value '${e}' from enum '${this.getTypeName()}'`);this.extendField(e,{deprecationReason:"deprecated"})}):Object.keys(e).forEach(r=>{if(-1===t.indexOf(r))throw Error(`Cannot deprecate non-existent value '${r}' from enum '${this.getTypeName()}'`);let n=e[r];this.extendField(r,{deprecationReason:n})});return this}getType(){let e=this._gqType;return this._gqcIsModified&&(this._gqcIsModified=!1,e.astNode=(0,f.getEnumTypeDefinitionNode)(this),s.graphqlVersion>=14?(e._values=(0,a.defineEnumValues)(e,this._gqcFields,e.astNode),e._valueLookup=new Map(e._values.map(e=>[e.value,e])),e._nameLookup=(0,o.keyMap)(e._values,e=>e.name)):(delete e._valueLookup,delete e._nameLookup,e._values=(0,a.defineEnumValues)(e,this._gqcFields,e.astNode))),e}getTypePlural(){return new u.ListComposer(this)}getTypeNonNull(){return new c.NonNullComposer(this)}get List(){return new u.ListComposer(this)}get NonNull(){return new c.NonNullComposer(this)}getTypeName(){return this._gqType.name}setTypeName(e){return this._gqType.name=e,this._gqcIsModified=!0,this.schemaComposer.add(this),this}getDescription(){return this._gqType.description||""}setDescription(e){return this._gqType.description=e,this._gqcIsModified=!0,this}clone(e){if(!e)throw Error("You should provide newTypeName:string for EnumTypeComposer.clone()");let t=e instanceof h?e:h.create(e,this.schemaComposer);return t._gqcFields=(0,o.mapEachKey)(this._gqcFields,e=>Object.assign(Object.assign({},e),{extensions:Object.assign({},e.extensions),directives:e.directives&&[...e.directives||[]]})),t._gqcExtensions=Object.assign({},this._gqcExtensions),t.setDescription(this.getDescription()),t.setDirectives(this.getDirectives()),t}cloneTo(e,t=new Map){if(!e)throw Error("You should provide SchemaComposer for EnumTypeComposer.cloneTo()");if(t.has(this))return t.get(this);let r=h.create(this.getTypeName(),e);return t.set(this,r),this.clone(r)}merge(e){let t;if(e instanceof n.GraphQLEnumType)t=h.createTemp(e,this.schemaComposer);else if(e instanceof h)t=e;else throw Error(`Cannot merge ${(0,o.inspect)(e)} with EnumType(${this.getTypeName()}). Provided type should be GraphQLEnumType or EnumTypeComposer.`);return this.addFields(t.getFields()),this}getExtensions(){return this._gqcExtensions?this._gqcExtensions:{}}setExtensions(e){return this._gqcExtensions=e,this._gqcIsModified=!0,this}extendExtensions(e){let t=this.getExtensions();return this.setExtensions(Object.assign(Object.assign({},t),e)),this}clearExtensions(){return this.setExtensions({}),this}getExtension(e){return this.getExtensions()[e]}hasExtension(e){return e in this.getExtensions()}setExtension(e,t){return this.extendExtensions({[e]:t}),this}removeExtension(e){let t=Object.assign({},this.getExtensions());return delete t[e],this.setExtensions(t),this}getFieldExtensions(e){return this.getField(e).extensions||{}}setFieldExtensions(e,t){let r=this.getField(e);return this.setField(e,Object.assign(Object.assign({},r),{extensions:t})),this}extendFieldExtensions(e,t){let r=this.getFieldExtensions(e);return this.setFieldExtensions(e,Object.assign(Object.assign({},r),t)),this}clearFieldExtensions(e){return this.setFieldExtensions(e,{}),this}getFieldExtension(e,t){return this.getFieldExtensions(e)[t]}hasFieldExtension(e,t){return t in this.getFieldExtensions(e)}setFieldExtension(e,t,r){return this.extendFieldExtensions(e,{[t]:r}),this}removeFieldExtension(e,t){let r=Object.assign({},this.getFieldExtensions(e));return delete r[t],this.setFieldExtensions(e,r),this}getDirectives(){return this._gqcDirectives||[]}setDirectives(e){return this._gqcDirectives=e,this._gqcIsModified=!0,this}getDirectiveNames(){return this.getDirectives().map(e=>e.name)}getDirectiveByName(e){let t=this.getDirectives().find(t=>t.name===e);if(t)return t.args}setDirectiveByName(e,t){let r=this.getDirectives(),n=r.findIndex(t=>t.name===e);return n>=0?r[n].args=t:r.push({name:e,args:t}),this.setDirectives(r),this}getDirectiveById(e){let t=this.getDirectives()[e];if(t)return t.args}getFieldDirectives(e){return this.getField(e).directives||[]}setFieldDirectives(e,t){return this.getField(e).directives=t,this._gqcIsModified=!0,this}getFieldDirectiveNames(e){return this.getFieldDirectives(e).map(e=>e.name)}getFieldDirectiveByName(e,t){let r=this.getFieldDirectives(e).find(e=>e.name===t);if(r)return r.args}setFieldDirectiveByName(e,t,r){let n=this.getFieldDirectives(e),i=n.findIndex(e=>e.name===t);return i>=0?n[i].args=r:n.push({name:t,args:r}),this.setFieldDirectives(e,n),this}getFieldDirectiveById(e,t){let r=this.getFieldDirectives(e)[t];if(r)return r.args}toSDL(e){return(0,d.printEnum)(this.getType(),e)}}t.EnumTypeComposer=h},18704:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.InputTypeComposer=void 0;let i=r(55284),o=r(64166),a=r(45567),s=r(18955),l=r(19988),u=r(8849),c=r(23780),p=r(41838),d=r(53406),f=r(57538),h=r(32800),y=r(22049),m=r(16143);class v{constructor(e,t){if(!(t instanceof l.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `new InputTypeComposer(GraphQLInputType, SchemaComposer)`");if(!(e instanceof i.GraphQLInputObjectType))throw Error("InputTypeComposer accept only GraphQLInputObjectType in constructor");if(this.schemaComposer=t,this._gqType=e,this.schemaComposer.set(e,this),this.schemaComposer.set(e.name,this),p.graphqlVersion>=14)this._gqcFields=(0,d.convertInputFieldMapToConfig)(this._gqType._fields,this.schemaComposer);else{let e=this._gqType._typeConfig.fields;this._gqcFields=this.schemaComposer.typeMapper.convertInputFieldConfigMap((0,o.resolveMaybeThunk)(e)||{},this.getTypeName())}this._gqType.astNode||(this._gqType.astNode=(0,y.getInputObjectTypeDefinitionNode)(this)),this._gqcIsModified=!1}static create(e,t){if(!(t instanceof l.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `InputTypeComposer.create(typeDef, schemaComposer)`");if(t.hasInstance(e,v))return t.getITC(e);let r=this.createTemp(e,t);return t.add(r),r}static createTemp(e,t){let r;let n=t||new l.SchemaComposer;if((0,a.isString)(e)){if((0,f.isTypeNameString)(e))r=new v(new i.GraphQLInputObjectType({name:e,fields:()=>({})}),n);else if(!((r=n.typeMapper.convertSDLTypeDefinition(e))instanceof v))throw Error("You should provide correct GraphQLInputObjectType type definition. Eg. `input MyInputType { name: String! }`")}else if(e instanceof i.GraphQLInputObjectType)r=new v(e,n);else if((0,a.isObject)(e)){r=new v(new i.GraphQLInputObjectType({name:e.name,description:e.description,fields:()=>({})}),n);let t=e.fields;(0,a.isFunction)(t)&&r.addFields((0,d.convertInputFieldMapToConfig)(t,n)),(0,a.isObject)(t)&&r.addFields(t),r.setExtensions(e.extensions||void 0),Array.isArray(null==e?void 0:e.directives)&&r.setDirectives(e.directives)}else throw Error(`You should provide InputObjectConfig or string with type name to InputTypeComposer.create(typeDef). Provided:
${(0,o.inspect)(e)}`);return r}getFields(){return this._gqcFields}getFieldNames(){return Object.keys(this._gqcFields)}hasField(e){return!!this._gqcFields[e]}setFields(e){return this._gqcFields={},Object.keys(e).forEach(t=>{this.setField(t,e[t])}),this}setField(e,t){return this._gqcFields[e]=(0,a.isFunction)(t)?t:this.schemaComposer.typeMapper.convertInputFieldConfig(t,e,this.getTypeName()),this._gqcIsModified=!0,this}addFields(e){return Object.keys(e).forEach(t=>{this.setField(t,e[t])}),this}addNestedFields(e){return Object.keys(e).forEach(t=>{let r=e[t],n=t.split("."),i=n.shift();if(!i)throw Error(`Type ${this.getTypeName()} has invalid field name: ${t}`);if(0===n.length)this.setField(i,r);else{let e;this.hasField(i)?e=this.getFieldTC(i):(e=v.create(`${this.getTypeName()}${(0,o.upperFirst)(i)}`,this.schemaComposer),this.setField(i,e)),e instanceof v&&e.addNestedFields({[n.join(".")]:r})}}),this}getField(e){if((0,a.isFunction)(this._gqcFields[e])){let t=this._gqcFields[e](this.schemaComposer);this.setField(e,t)}let t=this._gqcFields[e];if(!t)throw Error(`Cannot get field '${e}' from input type '${this.getTypeName()}'. Field does not exist.`);return t}removeField(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=e.split("."),r=t.shift();if(r){if(0===t.length)delete this._gqcFields[r],this._gqcIsModified=!0;else if(this.hasField(r)){let e=this.getFieldTC(r);e instanceof v&&e.removeField(t.join("."))}}}),this}removeOtherFields(e){let t=Array.isArray(e)?e:[e];return Object.keys(this._gqcFields).forEach(e=>{-1===t.indexOf(e)&&(delete this._gqcFields[e],this._gqcIsModified=!0)}),this}extendField(e,t){let r;try{r=this.getField(e)}catch(t){throw Error(`Cannot extend field '${e}' from input type '${this.getTypeName()}'. Field does not exist.`)}return this.setField(e,Object.assign(Object.assign(Object.assign({},r),t),{extensions:Object.assign(Object.assign({},r.extensions||{}),t.extensions||{}),directives:[...r.directives||[],...t.directives||[]]})),this}reorderFields(e){let t={},r=this._gqcFields;return e.forEach(e=>{r[e]&&(t[e]=r[e],delete r[e])}),this._gqcFields=Object.assign(Object.assign({},t),r),this._gqcIsModified=!0,this}getFieldConfig(e){let t=this.getField(e),{type:r}=t,i=n(t,["type"]);return Object.assign({type:r.getType()},i)}getFieldType(e){return this.getField(e).type.getType()}getFieldTypeName(e){return this.getField(e).type.getTypeName()}getFieldTC(e){let t=this.getField(e).type;return(0,f.unwrapInputTC)(t)}getFieldITC(e){let t=this.getFieldTC(e);if(!(t instanceof v))throw Error(`${this.getTypeName()}.getFieldITC('${e}') must be InputTypeComposer, but received ${t.constructor.name}. Maybe you need to use 'getFieldTC()' method which returns any type composer?`);return t}isRequired(e){return this.isFieldNonNull(e)}isFieldNonNull(e){return this.getField(e).type instanceof c.NonNullComposer}makeFieldNonNull(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];!t||t.type instanceof c.NonNullComposer||(t.type=new c.NonNullComposer(t.type),this._gqcIsModified=!0)}),this}makeRequired(e){return this.makeFieldNonNull(e)}makeFieldNullable(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];t&&t.type instanceof c.NonNullComposer&&(t.type=t.type.ofType,this._gqcIsModified=!0)}),this}makeOptional(e){return this.makeFieldNullable(e)}isFieldPlural(e){let t=this.getField(e).type;return t instanceof u.ListComposer||t instanceof c.NonNullComposer&&t.ofType instanceof u.ListComposer}makeFieldPlural(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];!t||t.type instanceof u.ListComposer||(t.type=new u.ListComposer(t.type),this._gqcIsModified=!0)}),this}makeFieldNonPlural(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];t&&(t.type instanceof u.ListComposer?(t.type=t.type.ofType,this._gqcIsModified=!0):t.type instanceof c.NonNullComposer&&t.type.ofType instanceof u.ListComposer&&(t.type=t.type.ofType.ofType instanceof c.NonNullComposer?t.type.ofType.ofType:new c.NonNullComposer(t.type.ofType.ofType),this._gqcIsModified=!0))}),this}getType(){return this._gqcIsModified&&(this._gqcIsModified=!1,this._gqType.astNode=(0,y.getInputObjectTypeDefinitionNode)(this),p.graphqlVersion>=14?this._gqType._fields=()=>(0,d.defineInputFieldMap)(this._gqType,(0,o.mapEachKey)(this._gqcFields,(e,t)=>this.getFieldConfig(t)),this._gqType.astNode):(this._gqType._typeConfig.fields=()=>(0,o.mapEachKey)(this._gqcFields,(e,t)=>this.getFieldConfig(t)),delete this._gqType._fields)),this._gqType}getTypePlural(){return new u.ListComposer(this)}getTypeNonNull(){return new c.NonNullComposer(this)}get List(){return new u.ListComposer(this)}get NonNull(){return new c.NonNullComposer(this)}getTypeName(){return this._gqType.name}setTypeName(e){return this._gqType.name=e,this._gqcIsModified=!0,this.schemaComposer.set(e,this),this}getDescription(){return this._gqType.description||""}setDescription(e){return this._gqType.description=e,this._gqcIsModified=!0,this}clone(e){if(!e)throw Error("You should provide new type name for clone() method");let t=e instanceof v?e:v.create(e,this.schemaComposer);return t._gqcFields=(0,o.mapEachKey)(this._gqcFields,e=>Object.assign(Object.assign({},e),{extensions:Object.assign({},e.extensions),directives:e.directives&&[...e.directives||[]]})),t._gqcExtensions=Object.assign({},this._gqcExtensions),t.setDescription(this.getDescription()),t.setDirectives(this.getDirectives()),t}cloneTo(e,t=new Map){if(!e)throw Error("You should provide SchemaComposer for InputTypeComposer.cloneTo()");if(t.has(this))return t.get(this);let r=v.create(this.getTypeName(),e);return t.set(this,r),r._gqcFields=(0,o.mapEachKey)(this._gqcFields,r=>Object.assign(Object.assign({},r),{type:(0,f.cloneTypeTo)(r.type,e,t),extensions:Object.assign({},r.extensions)})),r._gqcExtensions=Object.assign({},this._gqcExtensions),r.setDescription(this.getDescription()),r}merge(e){let t;if(e instanceof i.GraphQLInputObjectType)t=v.createTemp(e,this.schemaComposer);else if(e instanceof v)t=e;else throw Error(`Cannot merge ${(0,o.inspect)(e)} with InputObjectType(${this.getTypeName()}). Provided type should be GraphQLInputObjectType or InputTypeComposer.`);let r=Object.assign({},t.getFields());return Object.keys(r).forEach(e=>{r[e]=Object.assign(Object.assign({},r[e]),{type:t.getFieldTypeName(e)})}),this.addFields(r),this}getExtensions(){return this._gqcExtensions?this._gqcExtensions:{}}setExtensions(e){return this._gqcExtensions=e||void 0,this._gqcIsModified=!0,this}extendExtensions(e){let t=this.getExtensions();return this.setExtensions(Object.assign(Object.assign({},t),e)),this}clearExtensions(){return this.setExtensions({}),this}getExtension(e){return this.getExtensions()[e]}hasExtension(e){return e in this.getExtensions()}setExtension(e,t){return this.extendExtensions({[e]:t}),this}removeExtension(e){let t=Object.assign({},this.getExtensions());return delete t[e],this.setExtensions(t),this}getFieldExtensions(e){return this.getField(e).extensions||{}}setFieldExtensions(e,t){let r=this.getField(e);return this.setField(e,Object.assign(Object.assign({},r),{extensions:t})),this}extendFieldExtensions(e,t){let r=this.getFieldExtensions(e);return this.setFieldExtensions(e,Object.assign(Object.assign({},r),t)),this}clearFieldExtensions(e){return this.setFieldExtensions(e,{}),this}getFieldExtension(e,t){return this.getFieldExtensions(e)[t]}hasFieldExtension(e,t){return t in this.getFieldExtensions(e)}setFieldExtension(e,t,r){return this.extendFieldExtensions(e,{[t]:r}),this}removeFieldExtension(e,t){let r=Object.assign({},this.getFieldExtensions(e));return delete r[t],this.setFieldExtensions(e,r),this}getDirectives(){return this._gqcDirectives||[]}setDirectives(e){return this._gqcDirectives=e,this._gqcIsModified=!0,this}getDirectiveNames(){return this.getDirectives().map(e=>e.name)}getDirectiveByName(e){let t=this.getDirectives().find(t=>t.name===e);if(t)return t.args}setDirectiveByName(e,t){let r=this.getDirectives(),n=r.findIndex(t=>t.name===e);return n>=0?r[n].args=t:r.push({name:e,args:t}),this.setDirectives(r),this}getDirectiveById(e){let t=this.getDirectives()[e];if(t)return t.args}getFieldDirectives(e){return this.getField(e).directives||[]}setFieldDirectives(e,t){return this.getField(e).directives=t,this._gqcIsModified=!0,this}getFieldDirectiveNames(e){return this.getFieldDirectives(e).map(e=>e.name)}getFieldDirectiveByName(e,t){let r=this.getFieldDirectives(e).find(e=>e.name===t);if(r)return r.args}setFieldDirectiveByName(e,t,r){let n=this.getFieldDirectives(e),i=n.findIndex(e=>e.name===t);return i>=0?n[i].args=r:n.push({name:t,args:r}),this.setFieldDirectives(e,n),this}getFieldDirectiveById(e,t){let r=this.getFieldDirectives(e)[t];if(r)return r.args}get(e){return(0,s.typeByPath)(this,e)}getNestedTCs(e={},t=new Set){let r=Array.isArray(e.exclude)?e.exclude:[];return this.getFieldNames().forEach(n=>{let i=this.getFieldTC(n);!t.has(i)&&!r.includes(i.getTypeName())&&(t.add(i),i instanceof v&&i.getNestedTCs(e,t))}),t}toSDL(e){let t=e||{},{deep:r}=t,i=n(t,["deep"]);i.sortTypes=i.sortTypes||!1;let o=Array.isArray(i.exclude)?i.exclude:[];if(r){let e="";e+=(0,h.printInputObject)(this.getType(),i);let t=Array.from(this.getNestedTCs({exclude:o})),r=(0,m.getSortMethodFromOption)(i.sortAll||i.sortTypes);return r&&t.sort(r),t.forEach(t=>{if(t!==this&&!o.includes(t.getTypeName())){let r=t.toSDL(i);r&&(e+=`

${r}`)}}),e}return(0,h.printInputObject)(this.getType(),i)}}t.InputTypeComposer=v},88688:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceTypeComposer=void 0;let o=r(55284),a=r(45567),s=r(64166),l=r(39068),u=r(18704),c=r(74408),p=r(80881),d=r(19988),f=r(8849),h=r(23780),y=r(12777),m=r(3989),v=r(18955),g=r(57538),b=r(53406),_=r(41838),T=r(32800),E=r(22049),O=r(16143);class S{constructor(e,t){if(this._gqcInterfaces=[],this._gqcFallbackResolveType=null,!(t instanceof d.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `new InterfaceTypeComposer(GraphQLInterfaceType, SchemaComposer)`");if(!(e instanceof o.GraphQLInterfaceType))throw Error("InterfaceTypeComposer accept only GraphQLInterfaceType in constructor");if(this.schemaComposer=t,this._gqType=e,this.schemaComposer.set(e,this),this.schemaComposer.set(e.name,this),_.graphqlVersion>=15)this._gqcFields=(0,b.convertObjectFieldMapToConfig)(this._gqType._fields,this.schemaComposer),this._gqcInterfaces=(0,b.convertInterfaceArrayAsThunk)(this._gqType._interfaces,this.schemaComposer);else if(_.graphqlVersion>=14)this._gqcFields=(0,b.convertObjectFieldMapToConfig)(this._gqType._fields,this.schemaComposer);else{let e=this._gqType._typeConfig.fields;this._gqcFields=this.schemaComposer.typeMapper.convertOutputFieldConfigMap((0,s.resolveMaybeThunk)(e)||{},this.getTypeName())}this._gqType.astNode||(this._gqType.astNode=(0,E.getInterfaceTypeDefinitionNode)(this)),this._gqcIsModified=!1}static create(e,t){if(!(t instanceof d.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `InterfaceTypeComposer.create(typeDef, schemaComposer)`");if(t.hasInstance(e,S))return t.getIFTC(e);let r=this.createTemp(e,t);return t.add(r),r}static createTemp(e,t){let r;let n=t||new d.SchemaComposer;if((0,a.isString)(e)){if((0,g.isTypeNameString)(e))r=new S(new o.GraphQLInterfaceType({name:e,fields:()=>({})}),n);else if(!((r=n.typeMapper.convertSDLTypeDefinition(e))instanceof S))throw Error("You should provide correct GraphQLInterfaceType type definition. Eg. `interface MyType { id: ID!, name: String! }`")}else if(e instanceof o.GraphQLInterfaceType)r=new S(e,n);else if(e instanceof S)r=e;else if(!(0,a.isObject)(e)||e instanceof S)throw Error(`You should provide GraphQLInterfaceTypeConfig or string with interface name or SDL definition. Provided:
${(0,s.inspect)(e)}`);else{r=new S(new o.GraphQLInterfaceType(Object.assign(Object.assign({},e),{fields:()=>({})})),n);let t=e.fields;(0,a.isFunction)(t)?r.addFields((0,b.convertObjectFieldMapToConfig)(t,n)):(0,a.isObject)(t)&&r.addFields(t);let i=e.interfaces;Array.isArray(i)?r.setInterfaces(i):(0,a.isFunction)(i)&&r.setInterfaces((0,b.convertInterfaceArrayAsThunk)(i,n)),r.setExtensions(e.extensions),Array.isArray(null==e?void 0:e.directives)&&r.setDirectives(e.directives)}return r}getFields(){return this._gqcFields}getFieldNames(){return Object.keys(this._gqcFields)}getField(e){if((0,a.isFunction)(this._gqcFields[e])){let t=this._gqcFields[e](this.schemaComposer);this.setField(e,t)}let t=this._gqcFields[e];if(!t)throw Error(`Cannot get field '${e}' from type '${this.getTypeName()}'. Field does not exist.`);return t}hasField(e){return!!this._gqcFields[e]}setFields(e){return this._gqcFields={},Object.keys(e).forEach(t=>{this.setField(t,e[t])}),this}setField(e,t){return this._gqcFields[e]=(0,a.isFunction)(t)?t:this.schemaComposer.typeMapper.convertOutputFieldConfig(t,e,this.getTypeName()),this._gqcIsModified=!0,this}addFields(e){return Object.keys(e).forEach(t=>{this.setField(t,e[t])}),this}removeField(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=e.split("."),r=t.shift();if(r){if(0===t.length)delete this._gqcFields[r],this._gqcIsModified=!0;else if(this.hasField(r)){let e=this.getFieldTC(r);(e instanceof l.ObjectTypeComposer||e instanceof p.EnumTypeComposer)&&e.removeField(t.join("."))}}}),this}removeOtherFields(e){let t=Array.isArray(e)?e:[e];return Object.keys(this._gqcFields).forEach(e=>{-1===t.indexOf(e)&&(delete this._gqcFields[e],this._gqcIsModified=!0)}),this}reorderFields(e){let t={},r=this._gqcFields;return e.forEach(e=>{r[e]&&(t[e]=r[e],delete r[e])}),this._gqcFields=Object.assign(Object.assign({},t),r),this._gqcIsModified=!0,this}extendField(e,t){let r;try{r=this.getField(e)}catch(t){throw Error(`Cannot extend field '${e}' from type '${this.getTypeName()}'. Field does not exist.`)}return this.setField(e,Object.assign(Object.assign(Object.assign({},r),t),{extensions:Object.assign(Object.assign({},r.extensions||{}),t.extensions||{}),directives:[...r.directives||[],...t.directives||[]]})),this}getFieldConfig(e){let t=this.getField(e),{type:r,args:n}=t,o=i(t,["type","args"]);return Object.assign({type:r.getType(),args:n&&(0,s.mapEachKey)(n,e=>Object.assign(Object.assign({},e),{type:e.type.getType()}))},o)}getFieldType(e){return this.getField(e).type.getType()}getFieldTypeName(e){return this.getField(e).type.getTypeName()}getFieldTC(e){let t=this.getField(e).type;return(0,g.unwrapOutputTC)(t)}getFieldOTC(e){let t=this.getFieldTC(e);if(!(t instanceof l.ObjectTypeComposer))throw Error(`${this.getTypeName()}.getFieldOTC('${e}') must be ObjectTypeComposer, but received ${t.constructor.name}. Maybe you need to use 'getFieldTC()' method which returns any type composer?`);return t}isFieldNonNull(e){return this.getField(e).type instanceof h.NonNullComposer}makeFieldNonNull(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];!t||t.type instanceof h.NonNullComposer||(t.type=new h.NonNullComposer(t.type),this._gqcIsModified=!0)}),this}makeFieldNullable(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];t&&t.type instanceof h.NonNullComposer&&(t.type=t.type.ofType,this._gqcIsModified=!0)}),this}isFieldPlural(e){let t=this.getField(e).type;return t instanceof f.ListComposer||t instanceof h.NonNullComposer&&t.ofType instanceof f.ListComposer}makeFieldPlural(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];!t||t.type instanceof f.ListComposer||(t.type=new f.ListComposer(t.type),this._gqcIsModified=!0)}),this}makeFieldNonPlural(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];t&&(t.type instanceof f.ListComposer?(t.type=t.type.ofType,this._gqcIsModified=!0):t.type instanceof h.NonNullComposer&&t.type.ofType instanceof f.ListComposer&&(t.type=t.type.ofType.ofType instanceof h.NonNullComposer?t.type.ofType.ofType:new h.NonNullComposer(t.type.ofType.ofType),this._gqcIsModified=!0))}),this}deprecateFields(e){let t=this.getFieldNames();if("string"==typeof e){if(-1===t.indexOf(e))throw Error(`Cannot deprecate non-existent field '${e}' from interface type '${this.getTypeName()}'`);this.extendField(e,{deprecationReason:"deprecated"})}else Array.isArray(e)?e.forEach(e=>{if(-1===t.indexOf(e))throw Error(`Cannot deprecate non-existent field '${e}' from interface type '${this.getTypeName()}'`);this.extendField(e,{deprecationReason:"deprecated"})}):Object.keys(e).forEach(r=>{if(-1===t.indexOf(r))throw Error(`Cannot deprecate non-existent field '${r}' from interface type '${this.getTypeName()}'`);let n=e[r];this.extendField(r,{deprecationReason:n})});return this}getFieldArgs(e){try{return this.getField(e).args||{}}catch(t){throw Error(`Cannot get field args. Field '${e}' from type '${this.getTypeName()}' does not exist.`)}}getFieldArgNames(e){return Object.keys(this.getFieldArgs(e))}hasFieldArg(e,t){try{return!!this.getFieldArgs(e)[t]}catch(e){return!1}}getFieldArg(e,t){let r=this.getFieldArgs(e)[t];if(!r)throw Error(`Cannot get '${this.getTypeName()}.${e}@${t}'. Argument does not exist.`);return r}getFieldArgType(e,t){return this.getFieldArg(e,t).type.getType()}getFieldArgTypeName(e,t){return this.getFieldArg(e,t).type.getTypeName()}getFieldArgTC(e,t){let r=this.getFieldArg(e,t).type;return(0,g.unwrapInputTC)(r)}getFieldArgITC(e,t){let r=this.getFieldArgTC(e,t);if(!(r instanceof u.InputTypeComposer))throw Error(`${this.getTypeName()}.getFieldArgITC('${e}', '${t}') must be InputTypeComposer, but received ${r.constructor.name}. Maybe you need to use 'getFieldArgTC()' method which returns any type composer?`);return r}setFieldArgs(e,t){return this.getField(e).args=this.schemaComposer.typeMapper.convertArgConfigMap(t,e,this.getTypeName()),this._gqcIsModified=!0,this}addFieldArgs(e,t){let r=this.getField(e);return r.args=Object.assign(Object.assign({},r.args),this.schemaComposer.typeMapper.convertArgConfigMap(t,e,this.getTypeName())),this._gqcIsModified=!0,this}setFieldArg(e,t,r){let n=this.getField(e);return n.args=n.args||{},n.args[t]=this.schemaComposer.typeMapper.convertArgConfig(r,t,e,this.getTypeName()),this._gqcIsModified=!0,this}isFieldArgPlural(e,t){let r=this.getFieldArg(e,t).type;return r instanceof f.ListComposer||r instanceof h.NonNullComposer&&r.ofType instanceof f.ListComposer}makeFieldArgPlural(e,t){let r=this.getField(e).args;return r&&(Array.isArray(t)?t:[t]).forEach(e=>{let t=r[e];!t||t.type instanceof f.ListComposer||(t.type=new f.ListComposer(t.type),this._gqcIsModified=!0)}),this}makeFieldArgNonPlural(e,t){let r=this.getField(e).args;return r&&(Array.isArray(t)?t:[t]).forEach(e=>{let t=r[e];t&&(t.type instanceof f.ListComposer?(t.type=t.type.ofType,this._gqcIsModified=!0):t.type instanceof h.NonNullComposer&&t.type.ofType instanceof f.ListComposer&&(t.type=t.type.ofType.ofType instanceof h.NonNullComposer?t.type.ofType.ofType:new h.NonNullComposer(t.type.ofType.ofType),this._gqcIsModified=!0))}),this}isFieldArgNonNull(e,t){return this.getFieldArg(e,t).type instanceof h.NonNullComposer}makeFieldArgNonNull(e,t){let r=this.getField(e).args;return r&&(Array.isArray(t)?t:[t]).forEach(e=>{let t=r[e];!t||t.type instanceof h.NonNullComposer||(t.type=new h.NonNullComposer(t.type),this._gqcIsModified=!0)}),this}makeFieldArgNullable(e,t){let r=this.getField(e).args;return r&&(Array.isArray(t)?t:[t]).forEach(e=>{let t=r[e];t&&t.type instanceof h.NonNullComposer&&(t.type=t.type.ofType,this._gqcIsModified=!0)}),this}getType(){return this._gqcIsModified&&(this._gqcIsModified=!1,this._gqType.astNode=(0,E.getInterfaceTypeDefinitionNode)(this),_.graphqlVersion>=15?(this._gqType._fields=()=>(0,b.defineFieldMap)(this._gqType,(0,s.mapEachKey)(this._gqcFields,(e,t)=>this.getFieldConfig(t)),this._gqType.astNode),this._gqType._interfaces=()=>this.getInterfacesTypes()):_.graphqlVersion>=14?this._gqType._fields=()=>(0,b.defineFieldMap)(this._gqType,(0,s.mapEachKey)(this._gqcFields,(e,t)=>this.getFieldConfig(t)),this._gqType.astNode):(this._gqType._typeConfig.fields=()=>(0,s.mapEachKey)(this._gqcFields,(e,t)=>this.getFieldConfig(t)),this._gqType._fields={})),this._gqType}getTypePlural(){return new f.ListComposer(this)}getTypeNonNull(){return new h.NonNullComposer(this)}get List(){return new f.ListComposer(this)}get NonNull(){return new h.NonNullComposer(this)}getTypeName(){return this._gqType.name}setTypeName(e){return this._gqType.name=e,this._gqcIsModified=!0,this.schemaComposer.add(this),this}getDescription(){return this._gqType.description||""}setDescription(e){return this._gqType.description=e,this._gqcIsModified=!0,this}clone(e){if(!e)throw Error("You should provide newTypeName:string for InterfaceTypeComposer.clone()");let t=e instanceof S?e:S.create(e,this.schemaComposer);return t._gqcFields=(0,s.mapEachKey)(this._gqcFields,e=>Object.assign(Object.assign({},e),{args:(0,s.mapEachKey)(e.args,e=>Object.assign(Object.assign({},e),{extensions:Object.assign({},e.extensions),directives:[...e.directives||[]]})),extensions:Object.assign({},e.extensions),directives:[...e.directives||[]]})),t._gqcInterfaces=[...this._gqcInterfaces],this._gqcTypeResolvers&&(t._gqcTypeResolvers=new Map(this._gqcTypeResolvers)),t._gqcFallbackResolveType=this._gqcFallbackResolveType,t._gqcExtensions=Object.assign({},this._gqcExtensions),t.setDescription(this.getDescription()),t.setDirectives(this.getDirectives()),t}cloneTo(e,t=new Map){if(!e)throw Error("You should provide SchemaComposer for InterfaceTypeComposer.cloneTo()");if(t.has(this))return t.get(this);let r=S.create(this.getTypeName(),e);t.set(this,r),r._gqcFields=(0,s.mapEachKey)(this._gqcFields,r=>Object.assign(Object.assign({},r),{type:(0,g.cloneTypeTo)(r.type,e,t),args:(0,s.mapEachKey)(r.args,r=>Object.assign(Object.assign({},r),{type:(0,g.cloneTypeTo)(r.type,e,t),extensions:Object.assign({},r.extensions),directives:[...r.directives||[]]})),extensions:Object.assign({},r.extensions),directives:[...r.directives||[]]})),r._gqcInterfaces=this._gqcInterfaces.map(r=>r.cloneTo(e,t)),r._gqcExtensions=Object.assign({},this._gqcExtensions),r.setDescription(this.getDescription());let n=this.getTypeResolvers();if(n.size>0){let i=new Map;n.forEach((r,n)=>{let o=(0,g.cloneTypeTo)(n,e,t);i.set(o,r)}),r.setTypeResolvers(i)}return this._gqcFallbackResolveType&&(r._gqcFallbackResolveType=(0,g.cloneTypeTo)(this._gqcFallbackResolveType,e,t)),r}merge(e){let t;if(e instanceof l.ObjectTypeComposer||e instanceof S)t=e;else if(e instanceof o.GraphQLObjectType)t=l.ObjectTypeComposer.createTemp(e,this.schemaComposer);else if(e instanceof o.GraphQLInterfaceType)t=S.createTemp(e,this.schemaComposer);else throw Error(`Cannot merge ${(0,s.inspect)(e)} with InterfaceType(${this.getTypeName()}). Provided type should be GraphQLInterfaceType, GraphQLObjectType, InterfaceTypeComposer or ObjectTypeComposer.`);let r=Object.assign({},t.getFields());return Object.keys(r).forEach(e=>{r[e]=Object.assign(Object.assign({},r[e]),{args:Object.assign({},r[e].args),type:t.getFieldTypeName(e)}),t.getFieldArgNames(e).forEach(n=>{r[e].args[n]=Object.assign(Object.assign({},r[e].args[n]),{type:t.getFieldArgTypeName(e,n)})})}),this.addFields(r),this.addInterfaces(t.getInterfaces().map(e=>e.getTypeName())),this}getInputType(){return this.getInputTypeComposer().getType()}hasInputTypeComposer(){return!!this._gqcInputTypeComposer}setInputTypeComposer(e){return this._gqcInputTypeComposer=e,this}getInputTypeComposer(e){return this._gqcInputTypeComposer||(this._gqcInputTypeComposer=(0,m.toInputObjectType)(this,e)),this._gqcInputTypeComposer}getITC(e){return this.getInputTypeComposer(e)}removeInputTypeComposer(){return this._gqcInputTypeComposer=void 0,this}getResolveType(){return this._gqType.resolveType}setResolveType(e){return this._gqType.resolveType=e,this._gqcIsModified=!0,this}hasTypeResolver(e){return this.getTypeResolvers().has(e)}getTypeResolvers(){return this._gqcTypeResolvers||(this._gqcTypeResolvers=new Map),this._gqcTypeResolvers}getTypeResolverCheckFn(e){let t=this.getTypeResolvers();if(!t.has(e))throw Error(`Type resolve function in interface '${this.getTypeName()}' is not defined for type ${(0,s.inspect)(e)}.`);return t.get(e)}getTypeResolverNames(){let e=this.getTypeResolvers(),t=[];return e.forEach((e,r)=>{r instanceof l.ObjectTypeComposer?t.push(r.getTypeName()):r&&r.name&&t.push(r.name)}),t}getTypeResolverTypes(){let e=this.getTypeResolvers(),t=[];return e.forEach((e,r)=>{t.push((0,g.getGraphQLType)(r))}),t}setTypeResolvers(e){return this._isTypeResolversValid(e),this._gqcTypeResolvers=e,this._initResolveTypeFn(),this}_initResolveTypeFn(){let e;let t=this._gqcTypeResolvers||new Map,r=this._gqcFallbackResolveType?(0,g.getGraphQLType)(this._gqcFallbackResolveType):null,i=[];if(_.graphqlVersion>=16)for(let[e,r]of t.entries())i.push([(0,g.getComposeTypeName)(e,this.schemaComposer),r]);else for(let[e,r]of t.entries())i.push([(0,g.getGraphQLType)(e),r]);return e=this._isTypeResolversAsync(t)?(e,t,o)=>n(this,void 0,void 0,function*(){for(let[r,n]of i)if(yield n(e,t,o))return r;return r}):(e,t,n)=>{for(let[r,o]of i)if(o(e,t,n))return r;return r},this.setResolveType(e),this}_isTypeResolversValid(e){if(!(e instanceof Map))throw Error(`For interface ${this.getTypeName()} you should provide Map object for type resolvers.`);for(let[t,r]of e.entries())this._isTypeResolverValid(t,r);return!0}_isTypeResolverValid(e,t){try{if(!((0,g.getGraphQLType)(e) instanceof o.GraphQLObjectType))throw Error("Must be GraphQLObjectType")}catch(t){throw Error(`For interface type resolver ${this.getTypeName()} you must provide GraphQLObjectType or ObjectTypeComposer, but provided ${(0,s.inspect)(e)}`)}if(!(0,a.isFunction)(t))throw Error(`Interface ${this.getTypeName()} has invalid check function for type ${(0,s.inspect)(e)}`);return!0}_isTypeResolversAsync(e){let t=!1;for(let[,r]of e.entries())try{let e=r({},{},{});e instanceof Promise&&(e.catch(()=>{}),t=!0)}catch(e){}return t}addTypeResolver(e,t){let r=this.getTypeResolvers();return this._isTypeResolverValid(e,t),r.set(e,t),this._initResolveTypeFn(),e instanceof l.ObjectTypeComposer&&e.addInterface(this),this.schemaComposer.addSchemaMustHaveType(e),this}removeTypeResolver(e){return this.getTypeResolvers().delete(e),this._initResolveTypeFn(),this}setTypeResolverFallback(e){return e&&(e instanceof l.ObjectTypeComposer&&e.addInterface(this),this.schemaComposer.addSchemaMustHaveType(e)),this._gqcFallbackResolveType=e,this._initResolveTypeFn(),this}getInterfaces(){return this._gqcInterfaces}getInterfacesTypes(){return this._gqcInterfaces.map(e=>e.getType())}setInterfaces(e){return this._gqcInterfaces=(0,b.convertInterfaceArrayAsThunk)(e,this.schemaComposer),this._gqcIsModified=!0,this}hasInterface(e){let t=(0,g.getComposeTypeName)(e,this.schemaComposer);return!!this._gqcInterfaces.find(e=>e.getTypeName()===t)}addInterface(e){return this.hasInterface(e)||(this._gqcInterfaces.push(this.schemaComposer.typeMapper.convertInterfaceTypeDefinition(e)),this._gqcIsModified=!0),this}addInterfaces(e){if(!Array.isArray(e))throw Error(`InterfaceTypeComposer[${this.getTypeName()}].addInterfaces() accepts only array`);return e.forEach(e=>this.addInterface(e)),this}removeInterface(e){let t=(0,g.getComposeTypeName)(e,this.schemaComposer);return this._gqcInterfaces=this._gqcInterfaces.filter(e=>e.getTypeName()!==t),this._gqcIsModified=!0,this}getExtensions(){return this._gqcExtensions?this._gqcExtensions:{}}setExtensions(e){return this._gqcExtensions=e,this._gqcIsModified=!0,this}extendExtensions(e){let t=this.getExtensions();return this.setExtensions(Object.assign(Object.assign({},t),e)),this}clearExtensions(){return this.setExtensions({}),this}getExtension(e){return this.getExtensions()[e]}hasExtension(e){return e in this.getExtensions()}setExtension(e,t){return this.extendExtensions({[e]:t}),this}removeExtension(e){let t=Object.assign({},this.getExtensions());return delete t[e],this.setExtensions(t),this}getFieldExtensions(e){return this.getField(e).extensions||{}}setFieldExtensions(e,t){let r=this.getField(e);return this.setField(e,Object.assign(Object.assign({},r),{extensions:t})),this}extendFieldExtensions(e,t){let r=this.getFieldExtensions(e);return this.setFieldExtensions(e,Object.assign(Object.assign({},r),t)),this}clearFieldExtensions(e){return this.setFieldExtensions(e,{}),this}getFieldExtension(e,t){return this.getFieldExtensions(e)[t]}hasFieldExtension(e,t){return t in this.getFieldExtensions(e)}setFieldExtension(e,t,r){return this.extendFieldExtensions(e,{[t]:r}),this}removeFieldExtension(e,t){let r=Object.assign({},this.getFieldExtensions(e));return delete r[t],this.setFieldExtensions(e,r),this}getFieldArgExtensions(e,t){return this.getFieldArg(e,t).extensions||{}}setFieldArgExtensions(e,t,r){let n=this.getFieldArg(e,t);return this.setFieldArg(e,t,Object.assign(Object.assign({},n),{extensions:r})),this}extendFieldArgExtensions(e,t,r){let n=this.getFieldArgExtensions(e,t);return this.setFieldArgExtensions(e,t,Object.assign(Object.assign({},n),r)),this}clearFieldArgExtensions(e,t){return this.setFieldArgExtensions(e,t,{}),this}getFieldArgExtension(e,t,r){return this.getFieldArgExtensions(e,t)[r]}hasFieldArgExtension(e,t,r){return r in this.getFieldArgExtensions(e,t)}setFieldArgExtension(e,t,r,n){return this.extendFieldArgExtensions(e,t,{[r]:n}),this}removeFieldArgExtension(e,t,r){let n=Object.assign({},this.getFieldArgExtensions(e,t));return delete n[r],this.setFieldArgExtensions(e,t,n),this}getDirectives(){return this._gqcDirectives||[]}setDirectives(e){return this._gqcDirectives=e,this._gqcIsModified=!0,this}getDirectiveNames(){return this.getDirectives().map(e=>e.name)}getDirectiveByName(e){let t=this.getDirectives().find(t=>t.name===e);if(t)return t.args}setDirectiveByName(e,t){let r=this.getDirectives(),n=r.findIndex(t=>t.name===e);return n>=0?r[n].args=t:r.push({name:e,args:t}),this.setDirectives(r),this}getDirectiveById(e){let t=this.getDirectives()[e];if(t)return t.args}getFieldDirectives(e){return this.getField(e).directives||[]}setFieldDirectives(e,t){return this.getField(e).directives=t,this._gqcIsModified=!0,this}getFieldDirectiveNames(e){return this.getFieldDirectives(e).map(e=>e.name)}getFieldDirectiveByName(e,t){let r=this.getFieldDirectives(e).find(e=>e.name===t);if(r)return r.args}setFieldDirectiveByName(e,t,r){let n=this.getFieldDirectives(e),i=n.findIndex(e=>e.name===t);return i>=0?n[i].args=r:n.push({name:t,args:r}),this.setFieldDirectives(e,n),this}getFieldDirectiveById(e,t){let r=this.getFieldDirectives(e)[t];if(r)return r.args}getFieldArgDirectives(e,t){return this.getFieldArg(e,t).directives||[]}setFieldArgDirectives(e,t,r){return this.getFieldArg(e,t).directives=r,this._gqcIsModified=!0,this}getFieldArgDirectiveNames(e,t){return this.getFieldArgDirectives(e,t).map(e=>e.name)}getFieldArgDirectiveByName(e,t,r){let n=this.getFieldArgDirectives(e,t).find(e=>e.name===r);if(n)return n.args}setFieldArgDirectiveByName(e,t,r,n){let i=this.getFieldArgDirectives(e,t),o=i.findIndex(e=>e.name===r);return o>=0?i[o].args=n:i.push({name:r,args:n}),this.setFieldArgDirectives(e,t,i),this}getFieldArgDirectiveById(e,t,r){let n=this.getFieldArgDirectives(e,t)[r];if(n)return n.args}get(e){return(0,v.typeByPath)(this,e)}getNestedTCs(e={},t=new Set){let r=Array.isArray(e.exclude)?e.exclude:[];return this.getFieldNames().forEach(n=>{let i=this.getFieldTC(n);!t.has(i)&&!r.includes(i.getTypeName())&&(t.add(i),(i instanceof l.ObjectTypeComposer||i instanceof c.UnionTypeComposer)&&i.getNestedTCs(e,t)),this.getFieldArgNames(n).forEach(i=>{let o=this.getFieldArgTC(n,i);!t.has(o)&&!r.includes(o.getTypeName())&&(t.add(o),o instanceof u.InputTypeComposer&&o.getNestedTCs(e,t))}),this.getInterfaces().forEach(n=>{let i=n instanceof y.ThunkComposer?n.ofType:n;t.has(i)||r.includes(i.getTypeName())||(t.add(i),i.getNestedTCs(e,t))})}),t}toSDL(e){let t=e||{},{deep:r}=t,n=i(t,["deep"]);n.sortTypes=n.sortTypes||!1;let o=Array.isArray(n.exclude)?n.exclude:[];if(r){let e="";e+=(0,T.printInterface)(this.getType(),n);let t=Array.from(this.getNestedTCs({exclude:o})),r=(0,O.getSortMethodFromOption)(n.sortAll||n.sortTypes);return r&&t.sort(r),t.forEach(t=>{if(t!==this&&!o.includes(t.getTypeName())){let r=t.toSDL(n);r&&(e+=`

${r}`)}}),e}return(0,T.printInterface)(this.getType(),n)}}t.InterfaceTypeComposer=S},8849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListComposer=void 0;let n=r(55284),i=r(57538),o=r(23780);class a{constructor(e){this.ofType=e}getType(){return new n.GraphQLList(this.ofType.getType())}getTypeName(){return`[${this.ofType.getTypeName()}]`}getUnwrappedTC(){let e=this;for(;!(0,i.isNamedTypeComposer)(e);)e=e.ofType;return e}getTypePlural(){return new a(this)}getTypeNonNull(){return new o.NonNullComposer(this)}get List(){return new a(this)}get NonNull(){return new o.NonNullComposer(this)}cloneTo(e,t=new Map){return new a(this.ofType.cloneTo(e,t))}}t.ListComposer=a},23780:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonNullComposer=void 0;let n=r(55284),i=r(57538),o=r(8849),a=r(64166);class s{constructor(e){(0,a.invariant)(!(e instanceof s),"You provide NonNull value to NonNullComposer constructor. Nesting NonNull is not allowed."),this.ofType=e}getType(){return new n.GraphQLNonNull(this.ofType.getType())}getTypeName(){return`${this.ofType.getTypeName()}!`}getUnwrappedTC(){let e=this;for(;!(0,i.isNamedTypeComposer)(e);)e=e.ofType;return e}getTypePlural(){return new o.ListComposer(this)}getTypeNonNull(){return this}get List(){return new o.ListComposer(this)}get NonNull(){return this}cloneTo(e,t=new Map){return new s(this.ofType.cloneTo(e,t))}}t.NonNullComposer=s},39068:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectTypeComposer=void 0;let i=r(55284),o=r(18704),a=r(74408),s=r(88688),l=r(59923),u=r(19988),c=r(8849),p=r(23780),d=r(12777),f=r(80881),h=r(64166),y=r(45567),m=r(53406),v=r(3989),g=r(18955),b=r(57538),_=r(41838),T=r(41248),E=r(32800),O=r(22049),S=r(16143);class w{constructor(e,t){if(!(t instanceof u.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `new ObjectTypeComposer(GraphQLObjectType, SchemaComposer)`");if(!(e instanceof i.GraphQLObjectType))throw Error("ObjectTypeComposer accept only GraphQLObjectType in constructor");this.schemaComposer=t,this._gqType=e,this.schemaComposer.set(e,this);let r=e.name;if("Query"!==r&&"Mutation"!==r&&"Subscription"!==r&&this.schemaComposer.set(r,this),_.graphqlVersion>=14)this._gqcFields=(0,m.convertObjectFieldMapToConfig)(this._gqType._fields,this.schemaComposer),this._gqcInterfaces=(0,m.convertInterfaceArrayAsThunk)(this._gqType._interfaces,this.schemaComposer);else{let e=this._gqType._typeConfig.fields;this._gqcFields=this.schemaComposer.typeMapper.convertOutputFieldConfigMap((0,h.resolveMaybeThunk)(e)||{},this.getTypeName()),this._gqcInterfaces=(0,m.convertInterfaceArrayAsThunk)(this._gqType._interfaces||this._gqType._typeConfig.interfaces,this.schemaComposer)}this._gqType.astNode||(this._gqType.astNode=(0,O.getObjectTypeDefinitionNode)(this)),this._gqcIsModified=!1}static create(e,t){if(!(t instanceof u.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `ObjectTypeComposer.create(typeDef, schemaComposer)`");if(t.hasInstance(e,w))return t.getOTC(e);let r=this.createTemp(e,t),n=r.getTypeName();return"Query"!==n&&"Mutation"!==n&&"Subscription"!==n&&t.add(r),r}static createTemp(e,t){let r;let n=t||new u.SchemaComposer;if((0,y.isString)(e)){if((0,b.isTypeNameString)(e))r=new w(new i.GraphQLObjectType({name:e,fields:()=>({})}),n);else if(!((r=n.typeMapper.convertSDLTypeDefinition(e))instanceof w))throw Error("You should provide correct GraphQLObjectType type definition. Eg. `type MyType { name: String }`")}else if(e instanceof i.GraphQLObjectType)r=new w(e,n);else if(e instanceof w)return e;else if((0,y.isObject)(e)){r=new w(new i.GraphQLObjectType(Object.assign(Object.assign({},e),{fields:()=>({})})),n);let t=e.fields;(0,y.isFunction)(t)?r.addFields((0,m.convertObjectFieldMapToConfig)(t,n)):(0,y.isObject)(t)&&r.addFields(t);let o=e.interfaces;Array.isArray(o)?r.setInterfaces(o):(0,y.isFunction)(o)&&r.setInterfaces((0,m.convertInterfaceArrayAsThunk)(o,n)),r.setExtensions(e.extensions),Array.isArray(null==e?void 0:e.directives)&&r.setDirectives(e.directives)}else throw Error(`You should provide GraphQLObjectTypeConfig or string with type name to ObjectTypeComposer.create(opts). Provided:
${(0,h.inspect)(e)}`);return r}getFields(){return this._gqcFields}getFieldNames(){return Object.keys(this._gqcFields)}getField(e){if((0,y.isFunction)(this._gqcFields[e])){let t=this._gqcFields[e](this.schemaComposer);this.setField(e,t)}let t=this._gqcFields[e];if(!t)throw Error(`Cannot get field '${e}' from type '${this.getTypeName()}'. Field does not exist.`);return t}hasField(e){return!!this._gqcFields[e]}setFields(e){return this._gqcFields={},Object.keys(e).forEach(t=>{this.setField(t,e[t])}),this}setField(e,t){return this._gqcFields[e]=(0,y.isFunction)(t)?t:this.schemaComposer.typeMapper.convertOutputFieldConfig(t,e,this.getTypeName()),this._gqcIsModified=!0,this}addFields(e){return Object.keys(e).forEach(t=>{this.setField(t,e[t])}),this}addNestedFields(e){return Object.keys(e).forEach(t=>{let r=e[t],n=t.split("."),i=n.shift();if(!i)throw Error(`Type ${this.getTypeName()} has invalid field name: ${t}`);if(0===n.length)this.setField(i,r);else{let e;this.hasField(i)?e=this.getFieldTC(i):(e=w.create(`${this.getTypeName()}${(0,h.upperFirst)(i)}`,this.schemaComposer),this.setField(i,{type:e,resolve:()=>({})})),e instanceof w&&e.addNestedFields({[n.join(".")]:r})}}),this}removeField(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=e.split("."),r=t.shift();if(r){if(0===t.length)delete this._gqcFields[r],this._gqcIsModified=!0;else if(this.hasField(r)){let e=this.getFieldTC(r);(e instanceof w||e instanceof f.EnumTypeComposer)&&e.removeField(t.join("."))}}}),this}removeOtherFields(e){let t=Array.isArray(e)?e:[e];return Object.keys(this._gqcFields).forEach(e=>{-1===t.indexOf(e)&&(delete this._gqcFields[e],this._gqcIsModified=!0)}),this}reorderFields(e){let t={},r=this._gqcFields;return e.forEach(e=>{r[e]&&(t[e]=r[e],delete r[e])}),this._gqcFields=Object.assign(Object.assign({},t),r),this._gqcIsModified=!0,this}extendField(e,t){let r;try{r=this.getField(e)}catch(t){throw Error(`Cannot extend field '${e}' from type '${this.getTypeName()}'. Field does not exist.`)}return this.setField(e,Object.assign(Object.assign(Object.assign({},r),t),{extensions:Object.assign(Object.assign({},r.extensions||{}),t.extensions||{}),directives:[...r.directives||[],...t.directives||[]]})),this}getFieldConfig(e){let t=this.getField(e),{type:r,args:i}=t,o=n(t,["type","args"]);return Object.assign({type:r.getType(),args:i&&(0,h.mapEachKey)(i,e=>Object.assign(Object.assign({},e),{type:e.type.getType()}))},o)}getFieldType(e){return this.getField(e).type.getType()}getFieldTypeName(e){return this.getField(e).type.getTypeName()}getFieldTC(e){let t=this.getField(e).type;return(0,b.unwrapOutputTC)(t)}getFieldOTC(e){let t=this.getFieldTC(e);if(!(t instanceof w))throw Error(`${this.getTypeName()}.getFieldOTC('${e}') must be ObjectTypeComposer, but received ${t.constructor.name}. Maybe you need to use 'getFieldTC()' method which returns any type composer?`);return t}isFieldNonNull(e){return this.getField(e).type instanceof p.NonNullComposer}makeFieldNonNull(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];!t||t.type instanceof p.NonNullComposer||(t.type=new p.NonNullComposer(t.type),this._gqcIsModified=!0)}),this}makeFieldNullable(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];t&&t.type instanceof p.NonNullComposer&&(t.type=t.type.ofType,this._gqcIsModified=!0)}),this}isFieldPlural(e){let t=this.getField(e).type;return t instanceof c.ListComposer||t instanceof p.NonNullComposer&&t.ofType instanceof c.ListComposer}makeFieldPlural(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];!t||t.type instanceof c.ListComposer||(t.type=new c.ListComposer(t.type),this._gqcIsModified=!0)}),this}makeFieldNonPlural(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this._gqcFields[e];t&&(t.type instanceof c.ListComposer?(t.type=t.type.ofType,this._gqcIsModified=!0):t.type instanceof p.NonNullComposer&&t.type.ofType instanceof c.ListComposer&&(t.type=t.type.ofType.ofType instanceof p.NonNullComposer?t.type.ofType.ofType:new p.NonNullComposer(t.type.ofType.ofType),this._gqcIsModified=!0))}),this}deprecateFields(e){let t=this.getFieldNames();if("string"==typeof e){if(-1===t.indexOf(e))throw Error(`Cannot deprecate non-existent field '${e}' from type '${this.getTypeName()}'`);this.extendField(e,{deprecationReason:"deprecated"})}else Array.isArray(e)?e.forEach(e=>{if(-1===t.indexOf(e))throw Error(`Cannot deprecate non-existent field '${e}' from type '${this.getTypeName()}'`);this.extendField(e,{deprecationReason:"deprecated"})}):Object.keys(e).forEach(r=>{if(-1===t.indexOf(r))throw Error(`Cannot deprecate non-existent field '${r}' from type '${this.getTypeName()}'`);let n=e[r];this.extendField(r,{deprecationReason:n})});return this}getFieldArgs(e){try{return this.getField(e).args||{}}catch(t){throw Error(`Cannot get args from '${this.getTypeName()}.${e}'. Field does not exist.`)}}getFieldArgNames(e){return Object.keys(this.getFieldArgs(e))}hasFieldArg(e,t){try{return!!this.getFieldArgs(e)[t]}catch(e){return!1}}getFieldArg(e,t){let r=this.getFieldArgs(e)[t];if(!r)throw Error(`Cannot get '${this.getTypeName()}.${e}@${t}'. Argument does not exist.`);return r}getFieldArgType(e,t){return this.getFieldArg(e,t).type.getType()}getFieldArgTypeName(e,t){return this.getFieldArg(e,t).type.getTypeName()}getFieldArgTC(e,t){let r=this.getFieldArg(e,t).type;return(0,b.unwrapInputTC)(r)}getFieldArgITC(e,t){let r=this.getFieldArgTC(e,t);if(!(r instanceof o.InputTypeComposer))throw Error(`${this.getTypeName()}.getFieldArgITC('${e}', '${t}') must be InputTypeComposer, but received ${r.constructor.name}. Maybe you need to use 'getFieldArgTC()' method which returns any type composer?`);return r}setFieldArgs(e,t){return this.getField(e).args=this.schemaComposer.typeMapper.convertArgConfigMap(t,e,this.getTypeName()),this._gqcIsModified=!0,this}addFieldArgs(e,t){let r=this.getField(e);return r.args=Object.assign(Object.assign({},r.args),this.schemaComposer.typeMapper.convertArgConfigMap(t,e,this.getTypeName())),this._gqcIsModified=!0,this}setFieldArg(e,t,r){let n=this.getField(e);return n.args=n.args||{},n.args[t]=this.schemaComposer.typeMapper.convertArgConfig(r,t,e,this.getTypeName()),this._gqcIsModified=!0,this}removeFieldArg(e,t){let r=Array.isArray(t)?t:[t],n=this._gqcFields[e]&&this._gqcFields[e].args;return n&&(r.forEach(e=>delete n[e]),this._gqcIsModified=!0),this}removeFieldOtherArgs(e,t){let r=Array.isArray(t)?t:[t],n=this._gqcFields[e]&&this._gqcFields[e].args;return n&&Object.keys(n).forEach(e=>{-1===r.indexOf(e)&&(delete n[e],this._gqcIsModified=!0)}),this}isFieldArgPlural(e,t){let r=this.getFieldArg(e,t).type;return r instanceof c.ListComposer||r instanceof p.NonNullComposer&&r.ofType instanceof c.ListComposer}makeFieldArgPlural(e,t){let r=this.getField(e).args;return r&&(Array.isArray(t)?t:[t]).forEach(e=>{let t=r[e];!t||t.type instanceof c.ListComposer||(t.type=new c.ListComposer(t.type),this._gqcIsModified=!0)}),this}makeFieldArgNonPlural(e,t){let r=this.getField(e).args;return r&&(Array.isArray(t)?t:[t]).forEach(e=>{let t=r[e];t&&(t.type instanceof c.ListComposer?(t.type=t.type.ofType,this._gqcIsModified=!0):t.type instanceof p.NonNullComposer&&t.type.ofType instanceof c.ListComposer&&(t.type=t.type.ofType.ofType instanceof p.NonNullComposer?t.type.ofType.ofType:new p.NonNullComposer(t.type.ofType.ofType),this._gqcIsModified=!0))}),this}isFieldArgNonNull(e,t){return this.getFieldArg(e,t).type instanceof p.NonNullComposer}makeFieldArgNonNull(e,t){let r=this.getField(e).args;return r&&(Array.isArray(t)?t:[t]).forEach(e=>{let t=r[e];!t||t.type instanceof p.NonNullComposer||(t.type=new p.NonNullComposer(t.type),this._gqcIsModified=!0)}),this}makeFieldArgNullable(e,t){let r=this.getField(e).args;return r&&(Array.isArray(t)?t:[t]).forEach(e=>{let t=r[e];t&&t.type instanceof p.NonNullComposer&&(t.type=t.type.ofType,this._gqcIsModified=!0)}),this}getType(){return this._gqcIsModified&&(this._gqcIsModified=!1,this._gqType.astNode=(0,O.getObjectTypeDefinitionNode)(this),_.graphqlVersion>=14?(this._gqType._fields=()=>(0,m.defineFieldMap)(this._gqType,(0,h.mapEachKey)(this._gqcFields,(e,t)=>this.getFieldConfig(t)),this._gqType.astNode),this._gqType._interfaces=()=>this.getInterfacesTypes()):(this._gqType._typeConfig.fields=()=>(0,h.mapEachKey)(this._gqcFields,(e,t)=>this.getFieldConfig(t)),this._gqType._typeConfig.interfaces=()=>this.getInterfacesTypes(),delete this._gqType._fields,delete this._gqType._interfaces)),this._gqType}getTypePlural(){return new c.ListComposer(this)}getTypeNonNull(){return new p.NonNullComposer(this)}get List(){return new c.ListComposer(this)}get NonNull(){return new p.NonNullComposer(this)}getTypeName(){return this._gqType.name}setTypeName(e){return this._gqType.name=e,this._gqcIsModified=!0,this.schemaComposer.add(this),this}getDescription(){return this._gqType.description||""}setDescription(e){return this._gqType.description=e,this._gqcIsModified=!0,this}clone(e){if(!e)throw Error("You should provide newTypeName:string for ObjectTypeComposer.clone()");let t=e instanceof w?e:w.create(e,this.schemaComposer);return t._gqcFields=(0,h.mapEachKey)(this._gqcFields,e=>Object.assign(Object.assign({},e),{args:(0,h.mapEachKey)(e.args||{},e=>Object.assign(Object.assign({},e),{extensions:Object.assign({},e.extensions),directives:[...e.directives||[]]})),extensions:Object.assign({},e.extensions),directives:[...e.directives||[]]})),t._gqcInterfaces=[...this._gqcInterfaces],t._gqcExtensions=Object.assign({},this._gqcExtensions),t._gqcGetRecordIdFn=this._gqcGetRecordIdFn,t.setDescription(this.getDescription()),t.setDirectives(this.getDirectives()),this.getResolvers().forEach(e=>{let r=e.clone();r.type=(0,b.replaceTC)(r.type,e=>e===this?t:e),t.addResolver(r)}),t}cloneTo(e,t=new Map){if(!e)throw Error("You should provide SchemaComposer for ObjectTypeComposer.cloneTo()");if(t.has(this))return t.get(this);let r=w.create(this.getTypeName(),e);return t.set(this,r),r._gqcFields=(0,h.mapEachKey)(this._gqcFields,r=>Object.assign(Object.assign({},r),{type:(0,b.cloneTypeTo)(r.type,e,t),args:(0,h.mapEachKey)(r.args,r=>Object.assign(Object.assign({},r),{type:(0,b.cloneTypeTo)(r.type,e,t),extensions:Object.assign({},r.extensions),directives:[...r.directives||[]]})),extensions:Object.assign({},r.extensions),directives:[...r.directives||[]]})),r._gqcInterfaces=this._gqcInterfaces.map(r=>r.cloneTo(e,t)),r._gqcExtensions=Object.assign({},this._gqcExtensions),r._gqcGetRecordIdFn=this._gqcGetRecordIdFn,r.setDescription(this.getDescription()),r.setDirectives(this.getDirectives()),this.getResolvers().forEach(n=>{let i=n.cloneTo(e,t);r.addResolver(i)}),r}getIsTypeOf(){return this._gqType.isTypeOf}setIsTypeOf(e){return this._gqType.isTypeOf=e,this._gqcIsModified=!0,this}merge(e){let t;if(e instanceof w||e instanceof s.InterfaceTypeComposer)t=e;else if(e instanceof i.GraphQLObjectType)t=w.createTemp(e,this.schemaComposer);else if(e instanceof i.GraphQLInterfaceType)t=s.InterfaceTypeComposer.createTemp(e,this.schemaComposer);else throw Error(`Cannot merge ${(0,h.inspect)(e)} with ObjectType(${this.getTypeName()}). Provided type should be GraphQLInterfaceType, GraphQLObjectType, InterfaceTypeComposer or ObjectTypeComposer.`);let r=Object.assign({},t.getFields());return Object.keys(r).forEach(e=>{r[e]=Object.assign(Object.assign({},r[e]),{args:Object.assign({},r[e].args),type:t.getFieldTypeName(e)}),t.getFieldArgNames(e).forEach(n=>{r[e].args[n]=Object.assign(Object.assign({},r[e].args[n]),{type:t.getFieldArgTypeName(e,n)})})}),this.addFields(r),this.addInterfaces(t.getInterfaces().map(e=>e.getTypeName())),this}getInputType(){return this.getInputTypeComposer().getType()}hasInputTypeComposer(){return!!this._gqcInputTypeComposer}setInputTypeComposer(e){return this._gqcInputTypeComposer=e,this}getInputTypeComposer(e){return this._gqcInputTypeComposer||(this._gqcInputTypeComposer=(0,v.toInputObjectType)(this,e)),this._gqcInputTypeComposer}getITC(e){return this.getInputTypeComposer(e)}removeInputTypeComposer(){return this._gqcInputTypeComposer=void 0,this}getResolvers(){return this._gqcResolvers||(this._gqcResolvers=new Map),this._gqcResolvers}hasResolver(e){return!!this._gqcResolvers&&this._gqcResolvers.has(e)}getResolver(e,t){if(!this.hasResolver(e))throw Error(`Type ${this.getTypeName()} does not have resolver with name '${e}'`);let r=this._gqcResolvers.get(e);return Array.isArray(t)?r.withMiddlewares(t):r}setResolver(e,t){if(this._gqcResolvers||(this._gqcResolvers=new Map),!(t instanceof l.Resolver))throw Error("setResolver() accept only Resolver instance");return this._gqcResolvers.set(e,t),t.setDisplayName(`${this.getTypeName()}.${t.name}`),this}addResolver(e){let t;if(!e)throw Error("addResolver called with empty Resolver");if(e instanceof l.Resolver)t=e;else{let r=Object.assign({},e);r.hasOwnProperty("resolve")||(r.resolve=()=>({})),t=new l.Resolver(r,this.schemaComposer)}if(!t.name)throw Error("resolver should have non-empty `name` property");return this.setResolver(t.name,t),this}removeResolver(e){return e&&this.getResolvers().delete(e),this}wrapResolver(e,t){let r=this.getResolver(e).wrap(t);return this.setResolver(e,r),this}wrapResolverAs(e,t,r){let n=this.getResolver(t).wrap(r);return this.setResolver(e,n),this}wrapResolverResolve(e,t){let r=this.getResolver(e);return this.setResolver(e,r.wrapResolve(t)),this}getInterfaces(){return this._gqcInterfaces}getInterfacesTypes(){return this._gqcInterfaces.map(e=>e.getType())}setInterfaces(e){return this._gqcInterfaces=(0,m.convertInterfaceArrayAsThunk)(e,this.schemaComposer),this._gqcIsModified=!0,this}hasInterface(e){let t=(0,b.getComposeTypeName)(e,this.schemaComposer);return!!this._gqcInterfaces.find(e=>e.getTypeName()===t)}addInterface(e){return this.hasInterface(e)||(this._gqcInterfaces.push(this.schemaComposer.typeMapper.convertInterfaceTypeDefinition(e)),this._gqcIsModified=!0),this}addInterfaces(e){if(!Array.isArray(e))throw Error(`ObjectTypeComposer[${this.getTypeName()}].addInterfaces() accepts only array`);return e.forEach(e=>this.addInterface(e)),this}removeInterface(e){let t=(0,b.getComposeTypeName)(e,this.schemaComposer);return this._gqcInterfaces=this._gqcInterfaces.filter(e=>e.getTypeName()!==t),this._gqcIsModified=!0,this}getExtensions(){return this._gqcExtensions?this._gqcExtensions:{}}setExtensions(e){return this._gqcExtensions=e,this._gqcIsModified=!0,this}extendExtensions(e){let t=this.getExtensions();return this.setExtensions(Object.assign(Object.assign({},t),e)),this}clearExtensions(){return this.setExtensions({}),this}getExtension(e){return this.getExtensions()[e]}hasExtension(e){return e in this.getExtensions()}setExtension(e,t){return this.extendExtensions({[e]:t}),this}removeExtension(e){let t=Object.assign({},this.getExtensions());return delete t[e],this.setExtensions(t),this}getFieldExtensions(e){return this.getField(e).extensions||{}}setFieldExtensions(e,t){let r=this.getField(e);return this.setField(e,Object.assign(Object.assign({},r),{extensions:t})),this}extendFieldExtensions(e,t){let r=this.getFieldExtensions(e);return this.setFieldExtensions(e,Object.assign(Object.assign({},r),t)),this}clearFieldExtensions(e){return this.setFieldExtensions(e,{}),this}getFieldExtension(e,t){return this.getFieldExtensions(e)[t]}hasFieldExtension(e,t){return t in this.getFieldExtensions(e)}setFieldExtension(e,t,r){return this.extendFieldExtensions(e,{[t]:r}),this}removeFieldExtension(e,t){let r=Object.assign({},this.getFieldExtensions(e));return delete r[t],this.setFieldExtensions(e,r),this}getFieldArgExtensions(e,t){return this.getFieldArg(e,t).extensions||{}}setFieldArgExtensions(e,t,r){let n=this.getFieldArg(e,t);return this.setFieldArg(e,t,Object.assign(Object.assign({},n),{extensions:r})),this}extendFieldArgExtensions(e,t,r){let n=this.getFieldArgExtensions(e,t);return this.setFieldArgExtensions(e,t,Object.assign(Object.assign({},n),r)),this}clearFieldArgExtensions(e,t){return this.setFieldArgExtensions(e,t,{}),this}getFieldArgExtension(e,t,r){return this.getFieldArgExtensions(e,t)[r]}hasFieldArgExtension(e,t,r){return r in this.getFieldArgExtensions(e,t)}setFieldArgExtension(e,t,r,n){return this.extendFieldArgExtensions(e,t,{[r]:n}),this}removeFieldArgExtension(e,t,r){let n=Object.assign({},this.getFieldArgExtensions(e,t));return delete n[r],this.setFieldArgExtensions(e,t,n),this}getDirectives(){return this._gqcDirectives||[]}setDirectives(e){return this._gqcDirectives=e,this._gqcIsModified=!0,this}getDirectiveNames(){return this.getDirectives().map(e=>e.name)}getDirectiveByName(e){let t=this.getDirectives().find(t=>t.name===e);if(t)return t.args}setDirectiveByName(e,t){let r=this.getDirectives(),n=r.findIndex(t=>t.name===e);return n>=0?r[n].args=t:r.push({name:e,args:t}),this.setDirectives(r),this}getDirectiveById(e){let t=this.getDirectives()[e];if(t)return t.args}getFieldDirectives(e){return this.getField(e).directives||[]}setFieldDirectives(e,t){return this.getField(e).directives=t,this._gqcIsModified=!0,this}getFieldDirectiveNames(e){return this.getFieldDirectives(e).map(e=>e.name)}getFieldDirectiveByName(e,t){let r=this.getFieldDirectives(e).find(e=>e.name===t);if(r)return r.args}setFieldDirectiveByName(e,t,r){let n=this.getFieldDirectives(e),i=n.findIndex(e=>e.name===t);return i>=0?n[i].args=r:n.push({name:t,args:r}),this.setFieldDirectives(e,n),this}getFieldDirectiveById(e,t){let r=this.getFieldDirectives(e)[t];if(r)return r.args}getFieldArgDirectives(e,t){return this.getFieldArg(e,t).directives||[]}setFieldArgDirectives(e,t,r){return this.getFieldArg(e,t).directives=r,this._gqcIsModified=!0,this}getFieldArgDirectiveNames(e,t){return this.getFieldArgDirectives(e,t).map(e=>e.name)}getFieldArgDirectiveByName(e,t,r){let n=this.getFieldArgDirectives(e,t).find(e=>e.name===r);if(n)return n.args}setFieldArgDirectiveByName(e,t,r,n){let i=this.getFieldArgDirectives(e,t),o=i.findIndex(e=>e.name===r);return o>=0?i[o].args=n:i.push({name:r,args:n}),this.setFieldArgDirectives(e,t,i),this}getFieldArgDirectiveById(e,t,r){let n=this.getFieldArgDirectives(e,t)[r];if(n)return n.args}addRelation(e,t){return this._gqcRelations||(this._gqcRelations={}),this._gqcRelations[e]=t,this._gqcIsModified=!0,t.hasOwnProperty("resolver")?(0,y.isFunction)(t.resolver)?this._gqcFields[e]=(0,T.createThunkedObjectProxy)(()=>this._relationWithResolverToFC(t,e)):this._gqcFields[e]=this._relationWithResolverToFC(t,e):t.hasOwnProperty("type")&&this.setField(e,t),this}getRelations(){return this._gqcRelations||(this._gqcRelations={}),this._gqcRelations}_relationWithResolverToFC(e,t=""){let r=(0,y.isFunction)(e.resolver)?e.resolver(this.schemaComposer):e.resolver;if(!(r instanceof l.Resolver))throw Error(`You should provide correct Resolver object for relation ${this.getTypeName()}.${t}`);if(e.type)throw Error(`You can not use \`resolver\` and \`type\` properties simultaneously for relation ${this.getTypeName()}.${t}`);if(e.resolve)throw Error(`You can not use \`resolver\` and \`resolve\` properties simultaneously for relation ${this.getTypeName()}.${t}`);let n=Object.assign({},r.args),i={},o=[],a=e.prepareArgs||{};Object.keys(a).forEach(e=>{let t=a[e];void 0!==t&&(delete n[e],(0,y.isFunction)(t)?o.push([e,t]):null!==t&&(i[e]=t))});let{catchErrors:s=!0}=e,u=r.getFieldConfig();return{type:r.type,description:e.description||r.description,deprecationReason:e.deprecationReason,args:n,resolve:(e,r,n,a)=>{let l=Object.assign(Object.assign({},r),i);o.forEach(([t,i])=>{l[t]=i(e,r,n,a)});let c=u.resolve?u.resolve(e,l,n,a):null;return s?Promise.resolve(c).catch(e=>(console.log(`GQC ERROR: relation for ${this.getTypeName()}.${t} throws error:`),console.log(e),null)):c},projection:e.projection,extensions:Object.assign(Object.assign({},r.extensions),e.extensions)}}setRecordIdFn(e){return this._gqcGetRecordIdFn=e,this}hasRecordIdFn(){return!!this._gqcGetRecordIdFn}getRecordIdFn(){if(!this._gqcGetRecordIdFn)throw Error(`Type ${this.getTypeName()} does not have RecordIdFn`);return this._gqcGetRecordIdFn}getRecordId(e,t,r){return this.getRecordIdFn()(e,t,r)}get(e){return(0,g.typeByPath)(this,e)}getNestedTCs(e={},t=new Set){let r=Array.isArray(e.exclude)?e.exclude:[];return this.getFieldNames().forEach(n=>{let i=this.getFieldTC(n);!t.has(i)&&!r.includes(i.getTypeName())&&(t.add(i),(i instanceof w||i instanceof a.UnionTypeComposer)&&i.getNestedTCs(e,t)),this.getFieldArgNames(n).forEach(i=>{let a=this.getFieldArgTC(n,i);!t.has(a)&&!r.includes(a.getTypeName())&&(t.add(a),a instanceof o.InputTypeComposer&&a.getNestedTCs(e,t))})}),this.getInterfaces().forEach(n=>{let i=n instanceof d.ThunkComposer?n.ofType:n;t.has(i)||r.includes(i.getTypeName())||(t.add(i),i.getNestedTCs(e,t))}),t}toSDL(e){let t=e||{},{deep:r}=t,i=n(t,["deep"]);i.sortTypes=i.sortTypes||!1;let o=Array.isArray(i.exclude)?i.exclude:[];if(r){let e="";e+=(0,E.printObject)(this.getType(),i);let t=Array.from(this.getNestedTCs({exclude:o})),r=(0,S.getSortMethodFromOption)(i.sortAll||i.sortTypes);return r&&t.sort(r),t.forEach(t=>{if(t!==this&&!o.includes(t.getTypeName())){let r=t.toSDL(i);r&&(e+=`

${r}`)}}),e}return(0,E.printObject)(this.getType(),i)}}t.ObjectTypeComposer=w},59923:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Resolver=void 0;let i=r(39068),o=r(18704),a=r(80881),s=r(19988),l=r(2632),u=r(64166),c=r(45567),p=r(81456),d=r(48322),f=r(18955),h=r(57538),y=r(90910),m=r(23780),v=r(8849);class g{constructor(e,t){if(this.resolve=()=>Promise.resolve(),!(t instanceof s.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `new Resolver(opts, SchemaComposer)`");if(this.schemaComposer=t,!e.name)throw Error("For Resolver constructor the `opts.name` is required option.");this.name=e.name,this.displayName=e.displayName,this.parent=e.parent,this.kind=e.kind,this.description=e.description,this.deprecationReason=e.deprecationReason,this.projection=e.projection||{},this.extensions=e.extensions,e.type&&this.setType(e.type),this.setArgs(e.args||{}),e.resolve&&(this.resolve=e.resolve),e.directives&&(this.directives=e.directives)}getType(){return this.type?this.type.getType():y.GraphQLJSON}getTypeName(){return this.type.getTypeName()}getTypeComposer(){let e=this.type;return(0,h.unwrapOutputTC)(e)}getOTC(){let e=this.getTypeComposer();if(!(e instanceof i.ObjectTypeComposer))throw Error(`Resolver ${this.name} cannot return its output type as ObjectTypeComposer instance. Cause '${this.type.toString()}' does not instance of ${e.constructor.name}.`);return e}setType(e){let t=this.schemaComposer.typeMapper.convertOutputTypeDefinition(e,"setType","Resolver");if(!t)throw Error(`Cannot convert to ObjectType following value: ${(0,u.inspect)(e)}`);return this.type=t,this}hasArg(e){return!!this.args[e]}getArg(e){if(!this.hasArg(e))throw Error(`Cannot get arg '${e}' for resolver ${this.name}. Argument does not exist.`);let t=this.args[e];return((0,c.isFunction)(t)&&(t=t(this.schemaComposer)),"string"==typeof t||(0,h.isComposeInputType)(t)||Array.isArray(t))?{type:t}:t}getArgConfig(e){let t=this.getArg(e);return Object.assign(Object.assign({},t),{type:t.type.getType()})}getArgType(e){return this.getArgConfig(e).type}getArgTypeName(e){return this.getArg(e).type.getTypeName()}getArgs(){return this.args}getArgNames(){return Object.keys(this.args)}setArgs(e){return this.args=this.schemaComposer.typeMapper.convertArgConfigMap(e,this.name,"Resolver"),this}setArg(e,t){return this.args[e]=this.schemaComposer.typeMapper.convertArgConfig(t,e,this.name,"Resolver"),this}setArgType(e,t){let r=this.getArg(e),n=this.schemaComposer.typeMapper.convertInputTypeDefinition(t,e,"Resolver.args");if(!n)throw Error(`Cannot create InputType from ${(0,u.inspect)(t)}`);return r.type=n,this}extendArg(e,t){let r;try{r=this.getArgConfig(e)}catch(t){throw Error(`Cannot extend arg '${e}' in Resolver '${this.name}'. Argument does not exist.`)}return this.setArg(e,Object.assign(Object.assign({},r),t)),this}addArgs(e){return this.setArgs(Object.assign(Object.assign({},this.getArgs()),e)),this}removeArg(e){return(Array.isArray(e)?e:[e]).forEach(e=>{delete this.args[e]}),this}removeOtherArgs(e){let t=Array.isArray(e)?e:[e];return Object.keys(this.args).forEach(e=>{-1===t.indexOf(e)&&delete this.args[e]}),this}reorderArgs(e){let t={};return e.forEach(e=>{this.args[e]&&(t[e]=this.args[e],delete this.args[e])}),this.args=Object.assign(Object.assign({},t),this.args),this}getArgTC(e){let t=this.getArg(e).type;return(0,h.unwrapInputTC)(t)}getArgITC(e){let t=this.getArgTC(e);if(!(t instanceof o.InputTypeComposer))throw Error(`Resolver(${this.name}).getArgITC('${e}') must be InputTypeComposer, but received ${t.constructor.name}. Maybe you need to use 'getArgTC()' method which returns any type composer?`);return t}isArgNonNull(e){return this.getArg(e).type instanceof m.NonNullComposer}makeArgNonNull(e){return(Array.isArray(e)?e:[e]).forEach(e=>{if(this.hasArg(e)){let t=this.getArg(e).type;t instanceof m.NonNullComposer||this.setArgType(e,new m.NonNullComposer(t))}}),this}makeRequired(e){return this.makeArgNonNull(e)}makeArgNullable(e){return(Array.isArray(e)?e:[e]).forEach(e=>{if(this.hasArg(e)){let t=this.getArg(e).type;t instanceof m.NonNullComposer&&this.setArgType(e,t.ofType)}}),this}makeOptional(e){return this.makeArgNullable(e)}isArgPlural(e){let t=this.getArg(e).type;return t instanceof v.ListComposer||t instanceof m.NonNullComposer&&t.ofType instanceof v.ListComposer}makeArgPlural(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this.args[e];!t||t.type instanceof v.ListComposer||(t.type=new v.ListComposer(t.type))}),this}makeArgNonPlural(e){return(Array.isArray(e)?e:[e]).forEach(e=>{let t=this.args[e];t&&(t.type instanceof v.ListComposer?t.type=t.type.ofType:t.type instanceof m.NonNullComposer&&t.type.ofType instanceof v.ListComposer&&(t.type=t.type.ofType.ofType instanceof m.NonNullComposer?t.type.ofType.ofType:new m.NonNullComposer(t.type.ofType.ofType)))}),this}cloneArg(e,t){if(!({}).hasOwnProperty.call(this.args,e))throw Error(`Can not clone arg ${(0,u.inspect)(e)} for resolver ${this.name}. Argument does not exist.`);let r=this.getArg(e).type,n=(0,h.replaceTC)(r,r=>{if(!(r instanceof o.InputTypeComposer))throw Error(`Cannot clone arg ${(0,u.inspect)(e)} for resolver ${(0,u.inspect)(this.name)}. Argument should be InputObjectType, but received: ${(0,u.inspect)(r)}.`);if(!t||t!==(0,u.clearName)(t))throw Error("You should provide new type name as second argument");if(t===r.getTypeName())throw Error(`You should provide new type name. It is equal to current name: ${(0,u.inspect)(t)}.`);return r.clone(t)});return n&&this.setArgType(e,n),this}addFilterArg(e){let t;if(!e.name)throw Error("For Resolver.addFilterArg the arg name `opts.name` is required.");if(!e.type)throw Error("For Resolver.addFilterArg the arg type `opts.type` is required.");let r=this.wrap(null,{name:"addFilterArg"});if(r.hasArg("filter")&&(t=r.getArgTC("filter")),!(t instanceof o.InputTypeComposer)){if(!e.filterTypeNameFallback||!(0,c.isString)(e.filterTypeNameFallback))throw Error("For Resolver.addFilterArg needs to provide `opts.filterTypeNameFallback: string`. This string will be used as unique name for `filter` type of input argument. Eg. FilterXXXXXInput");t=o.InputTypeComposer.create(e.filterTypeNameFallback,this.schemaComposer),r.args.filter={type:t}}let{name:i,type:a,defaultValue:s,description:l}=e;t.setField(i,{type:a,description:l}),void 0!==s&&(r.args.filter.defaultValue=r.args.filter.defaultValue||{},r.args.filter.defaultValue[i]=s);let u=r.getResolve(),p=e.query;return p&&(0,c.isFunction)(p)&&r.setResolve(e=>n(this,void 0,void 0,function*(){var t,r;let n=null===(r=null===(t=null==e?void 0:e.args)||void 0===t?void 0:t.filter)||void 0===r?void 0:r[i];return null!=n&&(e.rawQuery||(e.rawQuery={}),yield p(e.rawQuery,n,e)),u(e)})),r}addSortArg(e){let t;if(!e.name)throw Error("For Resolver.addSortArg the `opts.name` is required.");if(!e.value)throw Error("For Resolver.addSortArg the `opts.value` is required.");let r=this.wrap(null,{name:"addSortArg"});if(r.hasArg("sort")&&(t=r.getArgTC("sort")),!t){if(!e.sortTypeNameFallback||!(0,c.isString)(e.sortTypeNameFallback))throw Error("For Resolver.addSortArg needs to provide `opts.sortTypeNameFallback: string`. This string will be used as unique name for `sort` type of input argument. Eg. SortXXXXXEnum");t=a.EnumTypeComposer.create(e.sortTypeNameFallback,this.schemaComposer),r.args.sort={type:t}}if(!(t instanceof a.EnumTypeComposer))throw Error(`Resolver must have 'sort' arg with EnumType, but got: ${(0,u.inspect)(t)} `);let{name:n,description:i,deprecationReason:o,value:s}=e;t.setField(n,{description:i,deprecationReason:o,value:s});let l=r.getResolve();return(0,c.isFunction)(s)&&(t.extendField(n,{value:n}),r.setResolve(e=>{var t;if((null===(t=null==e?void 0:e.args)||void 0===t?void 0:t.sort)===n){let t=s(e);e.args.sort=t}return l(e)})),r}getResolve(){return this.resolve}setResolve(e){return this.resolve=e,this}withMiddlewares(e){if(!Array.isArray(e))throw Error(`You should provide array of middlewares '(resolve, source, args, context, info) => any', but provided ${(0,u.inspect)(e)}.`);let t=this;return e.reverse().forEach(e=>{let r;r=e.name?e.name:e.constructor&&e.constructor.name?e.constructor.name:"middleware";let n=this.clone({name:r,parent:t}),i=t.getResolve();n.setResolve(t=>e((e,r,n,o)=>i(Object.assign(Object.assign({},t),{source:e,args:r,context:n,info:o})),t.source,t.args,t.context,t.info)),t=n}),t}wrap(e,t={}){let r=this.clone(Object.assign({name:"wrap",parent:this},t));if((0,c.isFunction)(e)){let t=e(r,this);if(t)return t}return r}wrapResolve(e,t="wrapResolve"){return this.wrap((t,r)=>{let n=e(r.getResolve());return t.setResolve(n),t},{name:t})}wrapArgs(e,t="wrapArgs"){return this.wrap((t,r)=>{let n=Object.assign({},r.getArgs()),i=e(n)||n;return t.setArgs(i),t},{name:t})}wrapCloneArg(e,t){return this.wrap(r=>r.cloneArg(e,t),{name:"cloneFilterArg"})}wrapType(e,t="wrapType"){return this.wrap((t,r)=>{let n=r.type,i=e(n)||n;return t.setType(i),t},{name:t})}getFieldConfig(e={}){let t={type:this.getType(),args:(0,u.mapEachKey)(this.getArgs(),e=>Object.assign(Object.assign({},e),{type:e.type.getType()})),resolve:this.getFieldResolver(e)};return this.description&&(t.description=this.description),this.deprecationReason&&(t.deprecationReason=this.deprecationReason),t}getFieldResolver(e={}){let t=this.getResolve();return(r,n,i,o)=>{let a=(0,d.getProjectionFromAST)(o);return this.projection&&(a=(0,l.deepmerge)(a,this.projection)),e.projection&&(a=(0,l.deepmerge)(a,e.projection)),t({source:r,args:n,context:i,info:o,projection:a})}}getKind(){return this.kind}setKind(e){if("query"!==e&&"mutation"!==e&&"subscription"!==e)throw Error(`You provide incorrect value '${e}' for Resolver.setKind method. Valid values are: query | mutation | subscription`);return this.kind=e,this}getDescription(){return this.description}setDescription(e){return this.description=e,this}getDeprecationReason(){return this.deprecationReason}setDeprecationReason(e){return this.deprecationReason=e,this}get(e){return(0,f.typeByPath)(this,e)}clone(e={}){let t={};for(let e in this)this.hasOwnProperty(e)&&(t[e]=this[e]);return t.displayName=void 0,t.args=Object.assign({},this.args),this.projection&&(t.projection=Object.assign({},this.projection)),new g(Object.assign(Object.assign({},t),e),this.schemaComposer)}cloneTo(e,t=new Map){if(!e)throw Error("You should provide SchemaComposer for InterfaceTypeComposer.cloneTo()");if(t.has(this))return t.get(this);let r=new g({name:this.name,displayName:this.displayName,kind:this.kind,description:this.description,deprecationReason:this.deprecationReason,projection:Object.assign({},this.projection),extensions:Object.assign({},this.extensions),resolve:this.resolve},e);return t.set(this,r),this.type&&(r.type=this.type.cloneTo(e,t)),this.parent&&(r.parent=this.parent.cloneTo(e,t)),r.args=(0,u.mapEachKey)(this.args,r=>Object.assign(Object.assign({},r),{type:(0,h.cloneTypeTo)(r.type,e,t),extensions:Object.assign({},r.extensions)})),r}getExtensions(){return this.extensions?this.extensions:{}}setExtensions(e){return this.extensions=e,this}extendExtensions(e){let t=this.getExtensions();return this.setExtensions(Object.assign(Object.assign({},t),e)),this}clearExtensions(){return this.setExtensions({}),this}getExtension(e){return this.getExtensions()[e]}hasExtension(e){return e in this.getExtensions()}setExtension(e,t){return this.extendExtensions({[e]:t}),this}removeExtension(e){let t=Object.assign({},this.getExtensions());return delete t[e],this.setExtensions(t),this}getNestedName(){let e=this.displayName||this.name;return this.parent?`${e}(${this.parent.getNestedName()})`:e}toString(){return(0,u.inspect)(this.toDebugStructure()).replace(/\\n/g,"\n")}setDisplayName(e){return this.displayName=e,this}toDebugStructure(){let e={name:this.name,displayName:this.displayName,type:(0,u.inspect)(this.type),args:this.args,resolve:this.resolve?this.resolve.toString():this.resolve};return this.parent&&(e.resolve=[e.resolve,{"Parent resolver":this.parent.toDebugStructure()}]),e}debugExecTime(){return this.wrapResolve(e=>t=>n(this,void 0,void 0,function*(){let r=`Execution time for ${this.getNestedName()}`;console.time(r);let n=yield e(t);return console.timeEnd(r),n}),"debugExecTime")}debugParams(e,t={colors:!0,depth:5}){return this.wrapResolve(r=>n=>{var i,o,a;return console.log(`ResolverResolveParams for ${this.getNestedName()}:`),console.dir((0,p.filterByDotPaths)(n,e,{hideFields:(null==n?void 0:n.context)&&(null===(i=n.context)||void 0===i?void 0:i.res)&&(null===(o=n.context)||void 0===o?void 0:o.params)&&(null===(a=n.context)||void 0===a?void 0:a.headers)?{info:"[[hidden]]",context:"[[hidden]]"}:{info:"[[hidden]]","context.*":"[[hidden]]"},hideFieldsNote:'Some data was [[hidden]] to display this fields use debugParams("%fieldNames%")'}),t),r(n)},"debugParams")}debugPayload(e,t={colors:!0,depth:5}){return this.wrapResolve(r=>i=>n(this,void 0,void 0,function*(){try{let n=yield r(i);return console.log(`Resolved Payload for ${this.getNestedName()}:`),Array.isArray(n)&&n.length>3&&!e?console.dir([e?(0,p.filterByDotPaths)(n[0],e):n[0],`[debug note]: Other ${n.length-1} records was [[hidden]]. Use debugPayload("0 1 2 3 4") or debug({ payload: "0 1 2 3 4" }) for display this records`],t):console.dir(e?(0,p.filterByDotPaths)(n,e):n,t),n}catch(e){throw console.log(`Rejected Payload for ${this.getNestedName()}:`),console.log(e),e}}),"debugPayload")}debug(e,t={colors:!0,depth:2}){return this.debugExecTime().debugParams(e?e.params:null,t).debugPayload(e?e.payload:null,t)}}t.Resolver=g},32281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScalarTypeComposer=void 0;let n=r(55284),i=r(45567),o=r(19988),a=r(8849),s=r(23780),l=r(57538),u=r(64166),c=r(41838),p=r(32800),d=r(22049);class f{constructor(e,t){let r,i,a;if(!(t instanceof o.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `new ScalarTypeComposer(GraphQLScalarType, SchemaComposer)`");if(!(e instanceof n.GraphQLScalarType))throw Error("ScalarTypeComposer accept only GraphQLScalarType in constructor");this.schemaComposer=t,this._gqType=e,this.schemaComposer.set(e,this),this.schemaComposer.set(e.name,this),c.graphqlVersion>=14?(r=this._gqType.serialize,i=this._gqType.parseValue,a=this._gqType.parseLiteral):(r=this._gqType._scalarConfig.serialize,i=this._gqType._scalarConfig.parseValue,a=this._gqType._scalarConfig.parseLiteral),this.setSerialize(r),this.setParseValue(i),this.setParseLiteral(a),this._gqType.specifiedByUrl&&this.setDirectiveByName("specifiedBy",{url:this._gqType.specifiedByUrl}),this._gqType.specifiedByURL&&this.setDirectiveByName("specifiedBy",{url:this._gqType.specifiedByURL}),this._gqType.astNode||(this._gqType.astNode=(0,d.getScalarTypeDefinitionNode)(this)),this._gqcIsModified=!1}static create(e,t){if(!(t instanceof o.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `ScalarTypeComposer.create(typeDef, schemaComposer)`");if(t.hasInstance(e,f))return t.getSTC(e);let r=this.createTemp(e,t);return t.add(r),r}static createTemp(e,t){let r;let a=t||new o.SchemaComposer;if((0,i.isString)(e)){if((0,l.isTypeNameString)(e))r=new f(new n.GraphQLScalarType({name:e,serialize:()=>{}}),a);else if(!((r=a.typeMapper.convertSDLTypeDefinition(e))instanceof f))throw Error("You should provide correct GraphQLScalarType type definition. Eg. `scalar UInt`")}else if(e instanceof n.GraphQLScalarType)r=new f(e,a);else if((0,i.isObject)(e))(r=new f(new n.GraphQLScalarType(Object.assign({},e)),a)).setExtensions(e.extensions),Array.isArray(null==e?void 0:e.directives)&&r.setDirectives(e.directives);else throw Error(`You should provide GraphQLScalarTypeConfig or string with scalar name or SDL. Provided:
${(0,u.inspect)(e)}`);return r}setSerialize(e){return this._gqcSerialize=e,this._gqcIsModified=!0,this}getSerialize(){return this._gqcSerialize}setParseValue(e){return this._gqcParseValue=e||(e=>e),this._gqcIsModified=!0,this}getParseValue(){return this._gqcParseValue}setParseLiteral(e){return this._gqcParseLiteral=e||n.valueFromASTUntyped,this._gqcIsModified=!0,this}getParseLiteral(){return this._gqcParseLiteral}getType(){return this._gqcIsModified&&(this._gqcIsModified=!1,this._gqType.astNode=(0,d.getScalarTypeDefinitionNode)(this),c.graphqlVersion>=14?(this._gqType.specifiedByUrl=this.getSpecifiedByUrl(),this._gqType.specifiedByURL=this.getSpecifiedByUrl(),this._gqType.serialize=this._gqcSerialize,this._gqType.parseValue=this._gqcParseValue,this._gqType.parseLiteral=this._gqcParseLiteral):this._gqType._scalarConfig=Object.assign(Object.assign({},this._gqType._scalarConfig),{serialize:this._gqcSerialize,parseValue:this._gqcParseValue,parseLiteral:this._gqcParseLiteral})),this._gqType}getTypePlural(){return new a.ListComposer(this)}getTypeNonNull(){return new s.NonNullComposer(this)}get List(){return new a.ListComposer(this)}get NonNull(){return new s.NonNullComposer(this)}getTypeName(){return this._gqType.name}setTypeName(e){return this._gqType.name=e,this._gqcIsModified=!0,this.schemaComposer.add(this),this}getDescription(){return this._gqType.description||""}setDescription(e){return this._gqType.description=e,this._gqcIsModified=!0,this}getSpecifiedByUrl(){var e;return null===(e=this.getDirectiveByName("specifiedBy"))||void 0===e?void 0:e.url}setSpecifiedByUrl(e){return this.setDirectiveByName("specifiedBy",{url:e}),this}clone(e){if(!e)throw Error("You should provide newTypeName:string for ScalarTypeComposer.clone()");let t=e instanceof f?e:f.create(e,this.schemaComposer);return t._gqcSerialize=this._gqcSerialize,t._gqcParseValue=this._gqcParseValue,t._gqcParseLiteral=this._gqcParseLiteral,t._gqcExtensions=Object.assign({},this._gqcExtensions),t.setDescription(this.getDescription()),t.setDirectives(this.getDirectives()),t}cloneTo(e,t=new Map){if(!e)throw Error("You should provide SchemaComposer for ObjectTypeComposer.cloneTo()");return t.has(this)?t.get(this):(t.set(this,this),e.has(this.getTypeName())||e.add(this),this)}merge(e){let t;if(e instanceof n.GraphQLScalarType?t=f.createTemp(e,this.schemaComposer):e instanceof f&&(t=e),t)this.setSerialize(t.getSerialize()),this.setParseValue(t.getParseValue()),this.setParseLiteral(t.getParseLiteral());else throw Error(`Cannot merge ${(0,u.inspect)(e)} with ScalarType(${this.getTypeName()}). Provided type should be GraphQLScalarType or ScalarTypeComposer.`);return this}getExtensions(){return this._gqcExtensions?this._gqcExtensions:{}}setExtensions(e){return this._gqcExtensions=e||void 0,this._gqcIsModified=!0,this}extendExtensions(e){let t=this.getExtensions();return this.setExtensions(Object.assign(Object.assign({},t),e)),this}clearExtensions(){return this.setExtensions({}),this}getExtension(e){return this.getExtensions()[e]}hasExtension(e){return e in this.getExtensions()}setExtension(e,t){return this.extendExtensions({[e]:t}),this}removeExtension(e){let t=Object.assign({},this.getExtensions());return delete t[e],this.setExtensions(t),this}getDirectives(){return this._gqcDirectives||[]}setDirectives(e){return this._gqcDirectives=e,this._gqcIsModified=!0,this}getDirectiveNames(){return this.getDirectives().map(e=>e.name)}getDirectiveByName(e){let t=this.getDirectives().find(t=>t.name===e);if(t)return t.args}setDirectiveByName(e,t){let r=this.getDirectives(),n=r.findIndex(t=>t.name===e);return n>=0?r[n].args=t:r.push({name:e,args:t}),this.setDirectives(r),this}getDirectiveById(e){let t=this.getDirectives()[e];if(t)return t.args}toSDL(e){return(0,p.printScalar)(this.getType(),e)}}t.ScalarTypeComposer=f},19988:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaComposer=t.BUILT_IN_DIRECTIVES=void 0;let o=i(r(63242)),a=r(99089),s=r(21457),l=r(39068),u=r(18704),c=r(32281),p=r(80881),d=r(88688),f=r(74408),h=r(8849),y=r(23780),m=r(12777),v=r(59923),g=r(45567),b=r(64166),_=r(58896),T=r(57538),E=r(55284),O=r(32800),S=r(95838);t.BUILT_IN_DIRECTIVES=[E.GraphQLSkipDirective,E.GraphQLIncludeDirective,E.GraphQLDeprecatedDirective];class w extends a.TypeStorage{constructor(e){let r;if(super(),this._schemaMustHaveTypes=[],this._directives=[...t.BUILT_IN_DIRECTIVES],this.typeMapper=new s.TypeMapper(this),(r="string"==typeof e?(0,E.buildSchema)(e):e)instanceof E.GraphQLSchema){r.getDirectives().forEach(e=>{this.addDirective(e)}),(0,b.forEachKey)(r.getTypeMap(),(e,t)=>{t.startsWith("__")||this.typeMapper.convertGraphQLTypeToComposer(e)});let e=r.getQueryType();e&&this.set("Query",this.get(e));let t=r.getMutationType();t&&this.set("Mutation",this.get(t));let n=r.getSubscriptionType();n&&this.set("Subscription",this.get(n)),r.description&&this.setDescription(r.description)}}get Query(){return this.getOrCreateOTC("Query")}get Mutation(){return this.getOrCreateOTC("Mutation")}get Subscription(){return this.getOrCreateOTC("Subscription")}buildSchema(e){let t={};if(this.has("Query")){let e=this.getOTC("Query");this.removeEmptyTypes(e,new Set),t.query=e.getType()}if(this.has("Mutation")){let e=this.getOTC("Mutation");this.removeEmptyTypes(e,new Set),e.getFieldNames().length&&(t.mutation=e.getType())}if(this.has("Subscription")){let e=this.getOTC("Subscription");this.removeEmptyTypes(e,new Set),e.getFieldNames().length&&(t.subscription=e.getType())}let r=e||{},{keepUnusedTypes:i}=r,o=n(r,["keepUnusedTypes"]),a=new Set;i&&this.types.forEach(e=>{a.add((0,E.getNamedType)((0,T.getGraphQLType)(e)))}),this._schemaMustHaveTypes.forEach(e=>{a.add((0,E.getNamedType)((0,T.getGraphQLType)(e)))}),Array.isArray(null==e?void 0:e.types)&&(null==e||e.types.forEach(e=>{a.add((0,E.getNamedType)((0,T.getGraphQLType)(e)))}));let s=[...this._directives,...Array.isArray(null==e?void 0:e.directives)?[...e.directives]:[]],l=this.getDescription()||o.description||void 0;return new E.GraphQLSchema(Object.assign(Object.assign(Object.assign({},o),t),{types:Array.from(a),directives:s,description:l}))}addSchemaMustHaveType(e){return this._schemaMustHaveTypes.push(e),this}removeEmptyTypes(e,t=new Set){e.getFieldNames().forEach(r=>{let n=e.getFieldTC(r);if(!n)throw Error(`fieldTC "${r}" is not defined.`);let i=n.getTypeName();!t.has(i)&&(t.add(i),n instanceof l.ObjectTypeComposer&&(n.getFieldNames().length>0?this.removeEmptyTypes(n,t):(console.log(`graphql-compose: Delete field '${e.getTypeName()}.${r}' with type '${n.getTypeName()}', cause it does not have fields.`),e.removeField(r))))})}clone(){let e=new w,t=new Map;return this.forEach((r,n)=>{e.set(n,(0,T.cloneTypeTo)(r,e,t))}),e._schemaMustHaveTypes=this._schemaMustHaveTypes.map(r=>(0,T.cloneTypeTo)(r,e,t)),e._directives=[...this._directives],e}merge(e){let t;if(e instanceof w)t=e;else if(e instanceof E.GraphQLSchema)t=new w(e);else throw Error("SchemaComposer.merge() accepts only GraphQLSchema or SchemaComposer instances.");return this.Query.merge(t.Query),this.Mutation.merge(t.Mutation),this.Subscription.merge(t.Subscription),t.types.forEach((e,r)=>{let n;if(!("string"==typeof r&&r.startsWith("__"))&&e!==t.Query&&e!==t.Mutation&&e!==t.Subscription){if((0,T.isComposeNamedType)(e)&&(n=(0,T.getComposeTypeName)(e,this)),this.has(r))this.getAnyTC(r).merge(e);else if(n&&this.has(n))this.getAnyTC(n).merge(e);else{let t=e.cloneTo(this);this.set(r,t),n&&n!==r&&this.set(n,t)}}}),t.getDirectives().forEach(e=>{this.addDirective(e)}),this}getDescription(){return this._description}setDescription(e){return this._description=e,this}addTypeDefs(e){let t;try{t=this.typeMapper.parseTypesFromString(e)}catch(e){throw Error(e.toString())}if(t.forEach(e=>{let t=e.getTypeName();"Query"!==t&&"Mutation"!==t&&"Subscription"!==t&&this.add(e)}),t.has("Query")){let e=t.get("Query");if(!(e instanceof l.ObjectTypeComposer))throw Error("Type Query in typedefs isn't an Object Type.");this.Query.addFields(e.getFields())}if(t.has("Mutation")){let e=t.get("Mutation");if(!(e instanceof l.ObjectTypeComposer))throw Error("Type Mutation in typedefs isn't an Object Type.");this.Mutation.addFields(e.getFields())}if(t.has("Subscription")){let e=t.get("Subscription");if(!(e instanceof l.ObjectTypeComposer))throw Error("Type Subscription in typedefs isn't an Object Type.");this.Subscription.addFields(e.getFields())}return t}addResolveMethods(e){Object.keys(e).forEach(t=>{let r=this.get(t);if(r instanceof c.ScalarTypeComposer){let n=e[t];if(n instanceof E.GraphQLScalarType){r.merge(n),n.name!==t&&this.set(t,r);return}if("string"==typeof n.name&&"function"==typeof n.serialize){r.merge(new E.GraphQLScalarType(n)),n.name!==t&&this.set(t,r);return}}else if(r instanceof l.ObjectTypeComposer){let n=e[t];Object.keys(n).forEach(e=>{r.extendField(e,{resolve:n[e]})});return}else if(r instanceof p.EnumTypeComposer){let n=e[t];Object.keys(n).forEach(e=>{r.extendField(e,{value:n[e]})});return}throw Error((0,_.dedent)`
        Cannot add resolver to the following type: 
          ${(0,b.inspect)(r)}
      `)})}createObjectTC(e){return l.ObjectTypeComposer.create(e,this)}createInputTC(e){return u.InputTypeComposer.create(e,this)}createEnumTC(e){return p.EnumTypeComposer.create(e,this)}createInterfaceTC(e){return d.InterfaceTypeComposer.create(e,this)}createUnionTC(e){return f.UnionTypeComposer.create(e,this)}createScalarTC(e){return c.ScalarTypeComposer.create(e,this)}createResolver(e){return new v.Resolver(e,this)}createTC(e){if(this.has(e))return this.get(e);let t=(0,T.isNamedTypeComposer)(e)?e:this.createTempTC(e),r=t.getTypeName();return this.set(r,t),this.set(e,t),t}createTempTC(e){let t;if(t="string"==typeof e?this.typeMapper.convertSDLTypeDefinition(e):e,(0,T.isTypeComposer)(t))return t instanceof y.NonNullComposer||t instanceof h.ListComposer||t instanceof m.ThunkComposer?t.getUnwrappedTC():t;if(t instanceof E.GraphQLObjectType)return l.ObjectTypeComposer.createTemp(t,this);if(t instanceof E.GraphQLInputObjectType)return u.InputTypeComposer.createTemp(t,this);if(t instanceof E.GraphQLScalarType)return c.ScalarTypeComposer.createTemp(t,this);if(t instanceof E.GraphQLEnumType)return p.EnumTypeComposer.createTemp(t,this);if(t instanceof E.GraphQLInterfaceType)return d.InterfaceTypeComposer.createTemp(t,this);if(t instanceof E.GraphQLUnionType)return f.UnionTypeComposer.createTemp(t,this);throw Error((0,_.dedent)`
      Cannot create as TypeComposer the following value: 
        ${(0,b.inspect)(t)}.
    `)}getOrCreateTC(e,t){return(0,o.default)("Use SchemaComposer.getOrCreateOTC() method instead"),this.getOrCreateOTC(e,t)}getOrCreateOTC(e,t){try{return this.getOTC(e)}catch(n){let r=l.ObjectTypeComposer.create(e,this);return this.set(e,r),t&&(0,g.isFunction)(t)&&t(r),r}}getOrCreateITC(e,t){try{return this.getITC(e)}catch(n){let r=u.InputTypeComposer.create(e,this);return this.set(e,r),t&&(0,g.isFunction)(t)&&t(r),r}}getOrCreateETC(e,t){try{return this.getETC(e)}catch(n){let r=p.EnumTypeComposer.create(e,this);return this.set(e,r),t&&(0,g.isFunction)(t)&&t(r),r}}getOrCreateIFTC(e,t){try{return this.getIFTC(e)}catch(n){let r=d.InterfaceTypeComposer.create(e,this);return this.set(e,r),t&&(0,g.isFunction)(t)&&t(r),r}}getOrCreateUTC(e,t){try{return this.getUTC(e)}catch(n){let r=f.UnionTypeComposer.create(e,this);return this.set(e,r),t&&(0,g.isFunction)(t)&&t(r),r}}getOrCreateSTC(e,t){try{return this.getSTC(e)}catch(n){let r=c.ScalarTypeComposer.create(e,this);return this.set(e,r),t&&(0,g.isFunction)(t)&&t(r),r}}getOTC(e){if(this.hasInstance(e,E.GraphQLObjectType))return l.ObjectTypeComposer.create(this.get(e),this);if(this.hasInstance(e,l.ObjectTypeComposer))return this.get(e);throw Error(`Cannot find ObjectTypeComposer with name ${e}`)}getITC(e){if(this.hasInstance(e,E.GraphQLInputObjectType))return u.InputTypeComposer.create(this.get(e),this);if(this.hasInstance(e,u.InputTypeComposer))return this.get(e);throw Error(`Cannot find InputTypeComposer with name ${e}`)}getETC(e){if(this.hasInstance(e,E.GraphQLEnumType))return p.EnumTypeComposer.create(this.get(e),this);if(this.hasInstance(e,p.EnumTypeComposer))return this.get(e);throw Error(`Cannot find EnumTypeComposer with name ${e}`)}getIFTC(e){if(this.hasInstance(e,E.GraphQLInterfaceType))return d.InterfaceTypeComposer.create(this.get(e),this);if(this.hasInstance(e,d.InterfaceTypeComposer))return this.get(e);throw Error(`Cannot find InterfaceTypeComposer with name ${e}`)}getUTC(e){if(this.hasInstance(e,E.GraphQLUnionType))return f.UnionTypeComposer.create(this.get(e),this);if(this.hasInstance(e,f.UnionTypeComposer))return this.get(e);throw Error(`Cannot find UnionTypeComposer with name ${e}`)}getSTC(e){if(this.hasInstance(e,E.GraphQLScalarType))return c.ScalarTypeComposer.create(this.get(e),this);if(this.hasInstance(e,c.ScalarTypeComposer))return this.get(e);throw Error(`Cannot find ScalarTypeComposer with name ${e}`)}getAnyTC(e){let t;if(null==(t="string"==typeof e?this.get(e):e))throw Error(`Cannot find type with name ${e}`);if((0,T.isNamedTypeComposer)(t))return t;for(;t instanceof E.GraphQLList||t instanceof E.GraphQLNonNull;)t=t.ofType;if(t instanceof E.GraphQLObjectType)return l.ObjectTypeComposer.create(t,this);if(t instanceof E.GraphQLInputObjectType)return u.InputTypeComposer.create(t,this);if(t instanceof E.GraphQLScalarType)return c.ScalarTypeComposer.create(t,this);if(t instanceof E.GraphQLEnumType)return p.EnumTypeComposer.create(t,this);if(t instanceof E.GraphQLInterfaceType)return d.InterfaceTypeComposer.create(t,this);if(t instanceof E.GraphQLUnionType)return f.UnionTypeComposer.create(t,this);throw Error((0,_.dedent)`
      Type with name ${(0,b.inspect)(e)} cannot be obtained as any Composer helper.
      Put something strange?
    `)}addAsComposer(e){return(0,o.default)("Use schemaComposer.add() method instead. From v7 all types in storage saved as TypeComposers."),this.add(e)}isObjectType(e){return!!("string"==typeof e&&(0,T.isOutputTypeDefinitionString)(e))||!!this.has(e)&&this.getAnyTC(e) instanceof l.ObjectTypeComposer}isInputObjectType(e){return!!("string"==typeof e&&(0,T.isInputTypeDefinitionString)(e))||!!this.has(e)&&this.getAnyTC(e) instanceof u.InputTypeComposer}isScalarType(e){return!!("string"==typeof e&&(0,T.isScalarTypeDefinitionString)(e))||!!this.has(e)&&this.getAnyTC(e) instanceof c.ScalarTypeComposer}isEnumType(e){return!!("string"==typeof e&&(0,T.isEnumTypeDefinitionString)(e))||!!this.has(e)&&this.getAnyTC(e) instanceof p.EnumTypeComposer}isInterfaceType(e){return!!("string"==typeof e&&(0,T.isInterfaceTypeDefinitionString)(e))||!!this.has(e)&&this.getAnyTC(e) instanceof d.InterfaceTypeComposer}isUnionType(e){return!!("string"==typeof e&&(0,T.isUnionTypeDefinitionString)(e))||!!this.has(e)&&this.getAnyTC(e) instanceof f.UnionTypeComposer}clear(){super.clear(),this._schemaMustHaveTypes=[],this._directives=t.BUILT_IN_DIRECTIVES}add(e){return this.createTC(e).getTypeName()}set(e,t){return(0,T.isNamedTypeComposer)(t)||(0,o.default)(`SchemaComposer.set() accept only TypeComposers. You provide with key ${(0,b.inspect)(e)} the following wrong value ${(0,b.inspect)(t)}.`),super.set(e,t),this}addDirective(e){if(!(e instanceof E.GraphQLDirective))throw Error((0,_.dedent)`
        You should provide GraphQLDirective to schemaComposer.addDirective(), but received: 
          ${(0,b.inspect)(e)}
      `);return this.hasDirective(e)||this._directives.push(e),this}removeDirective(e){return this._directives=this._directives.filter(t=>t!==e),this}getDirectives(){return this._directives}_getDirective(e){return this.getDirectives().find(t=>t.name===e)}getDirective(e){let t=this._getDirective(e);if(!t)throw Error(`Directive instance with name ${e} does not exists.`);return t}hasDirective(e){if(!e)return!1;if("string"==typeof e){let t=e.startsWith("@")?e.slice(1):e;return!!this._directives.find(e=>e.name===t)}return e instanceof E.GraphQLDirective&&!!this._directives.find(t=>t===e)}toString(){return"SchemaComposer"}toJSON(){return"SchemaComposer"}inspect(){return"SchemaComposer"}getTypeSDL(e,t){return this.getAnyTC(e).toSDL(t)}toSDL(e){let t=Object.assign({sortTypes:"GROUP_BY_TYPE"},e);return(0,O.printSchemaComposer)(this,t)}getResolveMethods(e){let t={},r=(null==e?void 0:e.exclude)||[];return(0,S.visitSchema)(this,{OBJECT_TYPE:e=>{let n=e.getTypeName();r.includes(n)||(0,b.forEachKey)(e.getFields(),(e,r)=>{e.resolve&&e.resolve!==E.defaultFieldResolver&&(t[n]||(t[n]={}),t[n][r]=e.resolve)})},ENUM_TYPE:e=>{let n=e.getTypeName();if(r.includes(n))return;let i=!1,o={};(0,b.forEachKey)(e.getFields(),(e,t)=>{e.value!==t&&(i=!0),o[t]=e.value}),i&&(t[n]=o)}}),t}}t.SchemaComposer=w},12777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThunkComposer=void 0;let n=r(45567),i=r(8849),o=r(23780),a=r(64166);class s{constructor(e,t){this._thunk=e,t&&"string"==typeof t&&(this._typeName=t)}get ofType(){if(this._typeFromThunk||(this._typeFromThunk=this._thunk()),!this._typeFromThunk)throw Error(`ThunkComposer(${this._typeName||""}) returns empty value: ${(0,a.inspect)(this._typeFromThunk)}`);return this._typeFromThunk}getUnwrappedTC(){return this.ofType}getType(){return this.ofType.getType()}getTypeName(){return this._typeFromThunk&&(0,n.isFunction)(this._typeFromThunk.getTypeName)?this._typeFromThunk.getTypeName():this._typeName?this._typeName:this.getUnwrappedTC().getTypeName()}getTypePlural(){return new i.ListComposer(this)}getTypeNonNull(){return new o.NonNullComposer(this)}get List(){return new i.ListComposer(this)}get NonNull(){return new o.NonNullComposer(this)}cloneTo(e,t=new Map){let r=this.ofType.cloneTo(e,t);return new s(()=>r,this._typeName)}}t.ThunkComposer=s},21457:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getDescription=t.TypeMapper=void 0;let o=r(43423),a=r(36548),s=r(64166),l=r(91165),u=i(r(63242)),c=r(64166),p=r(55284),d=r(90910),f=r(39068),h=r(18704),y=r(32281),m=r(80881),v=r(88688),g=r(74408),b=r(8849),_=r(23780),T=r(12777),E=r(59923),O=r(99089),S=r(45567),w=r(57538),I=r(22049),N=r(62329);class A{constructor(e){if(!e)throw Error("TypeMapper must have SchemaComposer instance.");this.schemaComposer=e}static isOutputType(e){return(0,u.default)("Use `import { isSomeOutputTypeComposer } from './utils/typeHelpers'` instead."),(0,w.isSomeOutputTypeComposer)(e)}static isInputType(e){return(0,u.default)("Use `import { isSomeInputTypeComposer } from './utils/typeHelpers'` instead."),(0,w.isSomeInputTypeComposer)(e)}static isTypeNameString(e){return(0,u.default)("Use `import { isTypeNameString } from './utils/typeHelpers'` instead."),(0,w.isTypeNameString)(e)}static isTypeDefinitionString(e){return(0,u.default)("Use `import { isTypeDefinitionString } from './utils/typeHelpers'` instead."),(0,w.isTypeDefinitionString)(e)}static isOutputTypeDefinitionString(e){return(0,u.default)("Use `import { isOutputTypeDefinitionString } from './utils/typeHelpers'` instead."),(0,w.isOutputTypeDefinitionString)(e)}static isInputTypeDefinitionString(e){return(0,u.default)("Use `import { isInputTypeDefinitionString } from './utils/typeHelpers'` instead."),(0,w.isInputTypeDefinitionString)(e)}static isEnumTypeDefinitionString(e){return(0,u.default)("Use `import { isEnumTypeDefinitionString } from './utils/typeHelpers'` instead."),(0,w.isEnumTypeDefinitionString)(e)}static isScalarTypeDefinitionString(e){return(0,u.default)("Use `import { isScalarTypeDefinitionString } from './utils/typeHelpers'` instead."),(0,w.isScalarTypeDefinitionString)(e)}static isInterfaceTypeDefinitionString(e){return(0,u.default)("Use `import { isInterfaceTypeDefinitionString } from './utils/typeHelpers'` instead."),(0,w.isInterfaceTypeDefinitionString)(e)}static isUnionTypeDefinitionString(e){return(0,u.default)("Use `import { isUnionTypeDefinitionString } from './utils/typeHelpers'` instead."),(0,w.isUnionTypeDefinitionString)(e)}convertGraphQLTypeToComposer(e){if(e instanceof p.GraphQLObjectType)return f.ObjectTypeComposer.create(e,this.schemaComposer);if(e instanceof p.GraphQLInputObjectType)return h.InputTypeComposer.create(e,this.schemaComposer);if(e instanceof p.GraphQLScalarType)return y.ScalarTypeComposer.create(e,this.schemaComposer);if(e instanceof p.GraphQLEnumType)return m.EnumTypeComposer.create(e,this.schemaComposer);if(e instanceof p.GraphQLInterfaceType)return v.InterfaceTypeComposer.create(e,this.schemaComposer);if(e instanceof p.GraphQLUnionType)return g.UnionTypeComposer.create(e,this.schemaComposer);if(e instanceof p.GraphQLNonNull)return new _.NonNullComposer(this.convertGraphQLTypeToComposer(e.ofType));else if(e instanceof p.GraphQLList)return new b.ListComposer(this.convertGraphQLTypeToComposer(e.ofType));throw Error(`Cannot convert to Composer the following value: ${(0,c.inspect)(e)}`)}convertSDLWrappedTypeName(e){let t=(0,o.parseType)(e);return this.typeFromAST(t)}convertSDLTypeDefinition(e){if(this.schemaComposer.has(e))return this.schemaComposer.getAnyTC(e);let t=(0,o.parse)(e);if(!t||t.kind!==a.Kind.DOCUMENT)throw Error("You should provide correct type syntax. Eg. convertSDLTypeDefinition('type IntRange { min: Int, max: Int }')");let r=this.parseTypes(t)[0];if(r)return this.schemaComposer.set(r.getTypeName(),r),this.schemaComposer.set(e,r),r}convertOutputTypeDefinition(e,t="",r=""){if("string"==typeof e){let t;if((0,w.isInputTypeDefinitionString)(e))throw Error(`Should be OutputType, but got input type definition: ${(0,c.inspect)(e)}'`);if(this.schemaComposer.has(e))t=this.schemaComposer.getAnyTC(e);else if(!(t=(0,w.isTypeDefinitionString)(e)?this.convertSDLTypeDefinition(e):this.convertSDLWrappedTypeName(e)))throw Error(`Cannot convert to OutputType the following string: ${(0,c.inspect)(e)}`);if(!(0,w.isSomeOutputTypeComposer)(t))throw Error(`Provided incorrect OutputType: ${(0,c.inspect)(e)}`);return t}if((0,w.isSomeOutputTypeComposer)(e))return e;if(Array.isArray(e)){if(1!==e.length)throw Error(`Array must have exact one output type definition, but has ${e.length}: ${(0,c.inspect)(e)}`);let n=this.convertOutputTypeDefinition(e[0],t,r);if(!n)throw Error(`Cannot construct TypeComposer from ${(0,c.inspect)(e)}`);return new b.ListComposer(n)}if((0,S.isFunction)(e))return new T.ThunkComposer(()=>{let n=e(this.schemaComposer),i=this.convertOutputFieldConfig(n,t,r).type;if(!(0,w.isSomeOutputTypeComposer)(i))throw Error(`Provided incorrect OutputType: Function[${(0,c.inspect)(n)}]`);return i});if(e instanceof E.Resolver)return e.getTypeComposer();if(e instanceof p.GraphQLList||e instanceof p.GraphQLNonNull){let t=this.convertGraphQLTypeToComposer(e);if((0,w.isSomeOutputTypeComposer)(t))return t;throw Error(`Provided incorrect OutputType: ${(0,c.inspect)(t)}`)}if(e instanceof p.GraphQLObjectType||e instanceof p.GraphQLEnumType||e instanceof p.GraphQLInterfaceType||e instanceof p.GraphQLUnionType||e instanceof p.GraphQLScalarType)return this.convertGraphQLTypeToComposer(e);if(e instanceof h.InputTypeComposer)throw Error(`Should be OutputType, but provided InputTypeComposer ${(0,c.inspect)(e)}`)}convertOutputFieldConfig(e,t="",r=""){var i,o,a,s,l;try{if(!e)throw Error(`You provide empty output field definition: ${(0,c.inspect)(e)}`);if(e instanceof E.Resolver)return{type:e.type,args:e.getArgs(),resolve:e.getFieldResolver(),description:e.getDescription(),extensions:e.extensions,directives:e.directives||[],projection:e.projection};let u=this.convertOutputTypeDefinition(e,t,r);if(u)return{type:u};if((0,S.isObject)(e)){let{type:u,args:p}=e,d=n(e,["type","args"]);if(!u)throw Error(`Definition object should contain 'type' property: ${(0,c.inspect)(e)}`);let f=this.convertOutputTypeDefinition(u,t,r);if(f){let e=Object.assign({type:f,args:this.convertArgConfigMap(p||{},t,r)},d),n=null!==(o=null===(i=null==e?void 0:e.directives)||void 0===i?void 0:i.findIndex(e=>"deprecated"===e.name))&&void 0!==o?o:-1;return e.deprecationReason?(e.directives||(e.directives=[]),n>=0?e.directives[n].args={reason:e.deprecationReason}:e.directives.push({name:"deprecated",args:{reason:e.deprecationReason}})):n>=0&&(e.deprecationReason=null===(l=null===(s=null===(a=null==e?void 0:e.directives)||void 0===a?void 0:a[n])||void 0===s?void 0:s.args)||void 0===l?void 0:l.reason),e}}throw Error(`Cannot convert to OutputType the following value: ${(0,c.inspect)(e)}`)}catch(e){throw e.message=`TypeError[${r}.${t}]: ${e.message}`,e}}convertOutputFieldConfigMap(e,t=""){let r={};return Object.keys(e).forEach(n=>{r[n]=this.convertOutputFieldConfig(e[n],n,t)}),r}convertArgConfig(e,t="",r="",i=""){var o,a,s,l,u;try{if(!e)throw Error(`You provide empty argument config ${(0,c.inspect)(e)}`);let t=this.convertInputTypeDefinition(e);if(t)return{type:t};if((0,S.isObject)(e)){let{type:t}=e,r=n(e,["type"]);if(!t)throw Error(`Definition object should contain 'type' property: ${(0,c.inspect)(e)}'`);let i=this.convertInputTypeDefinition(t);if(i){let e=Object.assign({type:i},r),t=null!==(a=null===(o=null==e?void 0:e.directives)||void 0===o?void 0:o.findIndex(e=>"deprecated"===e.name))&&void 0!==a?a:-1;return e.deprecationReason?(e.directives||(e.directives=[]),t>=0?e.directives[t].args={reason:e.deprecationReason}:e.directives.push({name:"deprecated",args:{reason:e.deprecationReason}})):t>=0&&(e.deprecationReason=null===(u=null===(l=null===(s=null==e?void 0:e.directives)||void 0===s?void 0:s[t])||void 0===l?void 0:l.args)||void 0===u?void 0:u.reason),e}}throw Error(`Cannot convert to InputType the following value: ${(0,c.inspect)(t)}`)}catch(e){throw e.message=`TypeError[${i}.${r}.${t}]: ${e.message}`,e}}convertArgConfigMap(e,t="",r=""){let n={};return e&&Object.keys(e).forEach(i=>{n[i]=this.convertArgConfig(e[i],i,t,r)}),n}convertInputTypeDefinition(e,t="",r=""){if("string"==typeof e){let t;if((0,w.isOutputTypeDefinitionString)(e))throw Error(`Should be InputType, but got output type definition: ${(0,c.inspect)(e)}`);if(this.schemaComposer.has(e))t=this.schemaComposer.getAnyTC(e);else if(!(t=(0,w.isTypeDefinitionString)(e)?this.convertSDLTypeDefinition(e):this.convertSDLWrappedTypeName(e)))throw Error(`Cannot convert to InputType the following string: ${(0,c.inspect)(e)}`);if(!(0,w.isSomeInputTypeComposer)(t))throw Error(`Provided incorrect InputType: ${(0,c.inspect)(e)}`);return t}if((0,w.isSomeInputTypeComposer)(e))return e;if(Array.isArray(e)){if(1!==e.length)throw Error(`Array must have exact one input type definition, but has ${e.length}: ${(0,c.inspect)(e)}`);let n=this.convertInputTypeDefinition(e[0],t,r);if(!n)throw Error(`Cannot construct TypeComposer from ${(0,c.inspect)(e)}`);return new b.ListComposer(n)}if((0,S.isFunction)(e))return new T.ThunkComposer(()=>{let n=e(this.schemaComposer),i=this.convertInputFieldConfig(n,t,r).type;if(!(0,w.isSomeInputTypeComposer)(i))throw Error(`Provided incorrect InputType: Function[${(0,c.inspect)(n)}]`);return i});if(e instanceof p.GraphQLList||e instanceof p.GraphQLNonNull){let t=this.convertGraphQLTypeToComposer(e);if((0,w.isSomeInputTypeComposer)(t))return t;throw Error(`Provided incorrect InputType: ${(0,c.inspect)(t)}`)}if(e instanceof p.GraphQLInputObjectType||e instanceof p.GraphQLScalarType||e instanceof p.GraphQLEnumType)return this.convertGraphQLTypeToComposer(e);if(e instanceof f.ObjectTypeComposer)throw Error(`Should be InputType, but provided ObjectTypeComposer ${(0,c.inspect)(e)}`)}convertInputFieldConfig(e,t="",r=""){var i,o,a,s,l;try{if(!e)throw Error(`You provide empty input field definition: ${(0,c.inspect)(e)}`);let u=this.convertInputTypeDefinition(e,t,r);if(u)return{type:u};if((0,S.isObject)(e)){let{type:u}=e,p=n(e,["type"]);if(!u)throw Error(`Definition object should contain 'type' property: ${(0,c.inspect)(e)}`);let d=this.convertInputTypeDefinition(u,t,r);if(d){let e=Object.assign({type:d},p),t=null!==(o=null===(i=null==e?void 0:e.directives)||void 0===i?void 0:i.findIndex(e=>"deprecated"===e.name))&&void 0!==o?o:-1;return e.deprecationReason?(e.directives||(e.directives=[]),t>=0?e.directives[t].args={reason:e.deprecationReason}:e.directives.push({name:"deprecated",args:{reason:e.deprecationReason}})):t>=0&&(e.deprecationReason=null===(l=null===(s=null===(a=null==e?void 0:e.directives)||void 0===a?void 0:a[t])||void 0===s?void 0:s.args)||void 0===l?void 0:l.reason),e}}throw Error(`Cannot convert to InputType the following value: ${(0,c.inspect)(e)}`)}catch(e){throw e.message=`TypeError[${r}.${t}]: ${e.message}`,e}}convertInputFieldConfigMap(e,t=""){let r={};return Object.keys(e).forEach(n=>{r[n]=this.convertInputFieldConfig(e[n],n,t)}),r}convertInterfaceTypeDefinition(e){if(this.schemaComposer.hasInstance(e,v.InterfaceTypeComposer))return this.schemaComposer.getIFTC(e);if("string"==typeof e){let t=(0,w.isInterfaceTypeDefinitionString)(e)?this.convertSDLTypeDefinition(e):this.convertSDLWrappedTypeName(e);if(!(t instanceof v.InterfaceTypeComposer)&&!(t instanceof T.ThunkComposer))throw Error(`Cannot convert to InterfaceType the following definition: ${(0,c.inspect)(e)}`);return t}if(e instanceof p.GraphQLInterfaceType)return new v.InterfaceTypeComposer(e,this.schemaComposer);if(e instanceof v.InterfaceTypeComposer||e instanceof T.ThunkComposer)return e;if((0,S.isFunction)(e))return new T.ThunkComposer(()=>this.convertInterfaceTypeDefinition(e(this.schemaComposer)));throw Error(`Cannot convert to InterfaceType the following definition: ${(0,c.inspect)(e)}`)}parseTypesFromString(e){let t=new a.Source(e);t.name="GraphQL SDL";let r=(0,o.parse)(t);if(!r||"Document"!==r.kind)throw Error("You should provide correct SDL syntax.");let n=this.parseTypes(r),i=new O.TypeStorage;return n.forEach(e=>{i.set(e.getTypeName(),e)}),i}parseTypes(e){let t=[];for(let r=0;r<e.definitions.length;r++){let n=e.definitions[r],i=this.makeSchemaDef(n);i&&(t[r]=i)}return t}typeFromAST(e){if(e.kind===a.Kind.LIST_TYPE)return new b.ListComposer(this.typeFromAST(e.type));if(e.kind===a.Kind.NON_NULL_TYPE)return new _.NonNullComposer(this.typeFromAST(e.type));(0,s.invariant)(e.kind===a.Kind.NAMED_TYPE,`Must be a named type for ${(0,c.inspect)(e)}.`);let t=e.name.value;return this.schemaComposer.has(t)?this.schemaComposer.get(t):this.getBuiltInType(t)||new T.ThunkComposer(()=>this.schemaComposer.get(t),t)}typeFromASTInput(e){let t=this.typeFromAST(e);if(!(0,w.isSomeInputTypeComposer)(t))throw Error(`TypeAST should be for Input types. But received ${(0,c.inspect)(e)}`);return t}typeFromASTOutput(e){let t=this.typeFromAST(e);if(!(0,w.isSomeOutputTypeComposer)(t))throw Error(`TypeAST should be for Output types. But received ${(0,c.inspect)(e)}`);return t}makeSchemaDef(e){if(!e)throw Error("def must be defined");switch(e.kind){case a.Kind.OBJECT_TYPE_DEFINITION:return this.makeTypeDef(e);case a.Kind.INTERFACE_TYPE_DEFINITION:return this.makeInterfaceDef(e);case a.Kind.ENUM_TYPE_DEFINITION:return this.makeEnumDef(e);case a.Kind.UNION_TYPE_DEFINITION:return this.makeUnionDef(e);case a.Kind.SCALAR_TYPE_DEFINITION:return this.makeScalarDef(e);case a.Kind.SCHEMA_DEFINITION:return this.checkSchemaDef(e),null;case a.Kind.DIRECTIVE_DEFINITION:{let t=this.makeDirectiveDef(e);return t&&this.schemaComposer.addDirective(t),null}case a.Kind.INPUT_OBJECT_TYPE_DEFINITION:return this.makeInputObjectDef(e);case a.Kind.OBJECT_TYPE_EXTENSION:return this.makeExtendTypeDef(e);case a.Kind.INPUT_OBJECT_TYPE_EXTENSION:return this.makeExtendInputObjectDef(e);case a.Kind.INTERFACE_TYPE_EXTENSION:return this.makeExtendInterfaceDef(e);case a.Kind.UNION_TYPE_EXTENSION:return this.makeExtendUnionDef(e);case a.Kind.ENUM_TYPE_EXTENSION:return this.makeExtendEnumDef(e);case a.Kind.SCALAR_TYPE_EXTENSION:return this.makeExtendScalarDef(e);default:throw Error(`Type kind "${e.kind}" not supported.`)}}makeArguments(e){if(!e)return{};let t={};return e.forEach(e=>{var r;let n=e.name.value,i=this.getNamedTypeAST(e.type).name.value,o={type:this.typeFromASTInput(e.type),description:C(e),directives:this.parseDirectives(e.directives),deprecationReason:this.getDeprecationReason(e.directives),astNode:e};if(e.defaultValue){if(!this.schemaComposer.has(i)&&(null===(r=null==e?void 0:e.defaultValue)||void 0===r?void 0:r.value))o.defaultValue=e.defaultValue.value;else{let t=this.schemaComposer.get(i),r=this.buildWrappedTypeDef(t,e.type);if((0,w.isSomeInputTypeComposer)(r))o.defaultValue=(0,p.valueFromAST)(e.defaultValue,r.getType());else throw Error("Non-input type as an argument.")}}t[n]=o}),t}makeFieldDefMap(e){return e.fields?(0,c.keyValMap)(e.fields,e=>e.name.value,e=>({type:this.typeFromASTOutput(e.type),description:C(e),args:this.makeArguments(e.arguments),deprecationReason:this.getDeprecationReason(e.directives),astNode:e,directives:this.parseDirectives(e.directives)})):{}}makeInputFieldDef(e){return e.fields?(0,c.keyValMap)(e.fields,e=>e.name.value,e=>{let t={type:this.typeFromASTInput(e.type),description:C(e),deprecationReason:this.getDeprecationReason(e.directives),astNode:e,directives:this.parseDirectives(e.directives)};return e.defaultValue&&(t.defaultValue=(0,p.valueFromAST)(e.defaultValue,t.type.getType())),t}):{}}makeEnumDef(e){return this.schemaComposer.createEnumTC({name:e.name.value,description:C(e),values:this.makeEnumValuesDef(e),directives:this.parseDirectives(e.directives),astNode:e})}makeEnumValuesDef(e){return e.values?(0,c.keyValMap)(e.values,e=>e.name.value,e=>({description:C(e),deprecationReason:this.getDeprecationReason(e.directives),directives:this.parseDirectives(e.directives)})):{}}makeInputObjectDef(e){return this.schemaComposer.createInputTC({name:e.name.value,description:C(e),fields:this.makeInputFieldDef(e),astNode:e,directives:this.parseDirectives(e.directives)})}makeDirectiveDef(e){let t=e.locations.map(({value:e})=>e),r={};return(e.arguments||[]).forEach(e=>{let t;let n=e.name.value,i=this.typeFromAST(e.type);if((0,w.isSomeInputTypeComposer)(i))t={type:i.getType(),description:C(e),defaultValue:(0,p.valueFromAST)(e.defaultValue,i.getType())};else throw Error("Non-input type as an argument.");r[n]=t}),new p.GraphQLDirective({name:e.name.value,description:C(e),locations:t,args:r,astNode:e})}getBuiltInType(e){let t;switch(e){case"String":t=p.GraphQLString;break;case"Float":t=p.GraphQLFloat;break;case"Int":t=p.GraphQLInt;break;case"Boolean":t=p.GraphQLBoolean;break;case"ID":t=p.GraphQLID;break;case"JSON":t=d.GraphQLJSON;break;case"JSONObject":t=d.GraphQLJSONObject;break;case"Date":t=d.GraphQLDate;break;case"Buffer":t=d.GraphQLBuffer;break;default:t=void 0}if(t)return this.schemaComposer.createScalarTC(t)}makeScalarDef(e){let t;let r=this.getBuiltInType(e.name.value);return r&&(t=r),t||(t=this.schemaComposer.createScalarTC({name:e.name.value,description:C(e),serialize:e=>e,astNode:e})),e.directives&&t.setDirectives(this.parseDirectives(e.directives)),t}makeImplementedInterfaces(e){return(e.interfaces||[]).map(e=>{let t=this.getNamedTypeAST(e).name.value;return this.schemaComposer.hasInstance(t,v.InterfaceTypeComposer)?this.schemaComposer.getIFTC(t):new T.ThunkComposer(()=>this.schemaComposer.getIFTC(t),t)})}makeTypeDef(e){let t=e.name.value;return this.schemaComposer.createObjectTC({name:t,description:C(e),fields:this.makeFieldDefMap(e),interfaces:this.makeImplementedInterfaces(e),astNode:e,directives:this.parseDirectives(e.directives)})}makeInterfaceDef(e){return this.schemaComposer.createInterfaceTC({name:e.name.value,description:C(e),fields:this.makeFieldDefMap(e),interfaces:this.makeImplementedInterfaces(e),astNode:e,directives:this.parseDirectives(e.directives)})}makeUnionDef(e){let t=e.types,r=this.schemaComposer.createUnionTC({name:e.name.value,description:C(e),types:(t||[]).map(e=>this.getNamedTypeAST(e).name.value),astNode:e});return e.directives&&r.setDirectives(this.parseDirectives(e.directives)),r}checkSchemaDef(e){let t={query:"Query",mutation:"Mutation",subscription:"Subscription"};e.operationTypes.forEach(e=>{if(e.operation){let r=t[e.operation],n=e.type.name.value;if(n!==r)throw Error(`Incorrect type name '${n}' for '${e.operation}'. The valid definition is "schema { ${e.operation}: ${r} }"`)}})}getNamedTypeAST(e){let t=e;for(;t.kind===a.Kind.LIST_TYPE||t.kind===a.Kind.NON_NULL_TYPE;)t=t.type;return t}buildWrappedTypeDef(e,t){if(t.kind===a.Kind.LIST_TYPE)return new b.ListComposer(this.buildWrappedTypeDef(e,t.type));if(t.kind===a.Kind.NON_NULL_TYPE){let r=this.buildWrappedTypeDef(e,t.type);return new _.NonNullComposer(r)}return e}getDeprecationReason(e){let t=null==e?void 0:e.find(e=>e.name.value===p.GraphQLDeprecatedDirective.name);if(!t)return;let{reason:r}=(0,l.getArgumentValues)(p.GraphQLDeprecatedDirective,t);return r}parseDirectives(e){let t=[];return e&&e.forEach(e=>{let r=e.name.value,n=this.schemaComposer._getDirective(r),i=n?(0,l.getArgumentValues)(n,e):(0,c.keyValMap)(e.arguments||[],e=>e.name.value,e=>(0,I.parseValueNode)(e.value));t.push({name:r,args:i})}),t}makeExtendTypeDef(e){let t=this.schemaComposer.getOrCreateOTC(e.name.value);return t.addInterfaces(this.makeImplementedInterfaces(e)),t.addFields(this.makeFieldDefMap(e)),e.directives&&t.setDirectives([...t.getDirectives(),...this.parseDirectives(e.directives)]),t}makeExtendInputObjectDef(e){let t=this.schemaComposer.getOrCreateITC(e.name.value);return t.addFields(this.makeInputFieldDef(e)),e.directives&&t.setDirectives([...t.getDirectives(),...this.parseDirectives(e.directives)]),t}makeExtendInterfaceDef(e){let t=this.schemaComposer.getOrCreateIFTC(e.name.value);return t.addFields(this.makeFieldDefMap(e)),e.directives&&t.setDirectives([...t.getDirectives(),...this.parseDirectives(e.directives)]),t}makeExtendUnionDef(e){let t=e.types,r=this.schemaComposer.getOrCreateUTC(e.name.value);return r.addTypes((t||[]).map(e=>this.getNamedTypeAST(e).name.value)),e.directives&&r.setDirectives([...r.getDirectives(),...this.parseDirectives(e.directives)]),r}makeExtendEnumDef(e){let t=this.schemaComposer.getOrCreateETC(e.name.value);return t.addFields(this.makeEnumValuesDef(e)),e.directives&&t.setDirectives([...t.getDirectives(),...this.parseDirectives(e.directives)]),t}makeExtendScalarDef(e){let t=this.schemaComposer.getSTC(e.name.value);return e.directives&&t.setDirectives([...t.getDirectives(),...this.parseDirectives(e.directives)]),t}}function C(e,t){if(e.description)return e.description.value;if((null==t?void 0:t.commentDescriptions)===!0){let t=function(e){let t=e.loc;if(!t)return;let r=[],n=t.startToken.prev;for(;null!=n&&n.kind===a.TokenKind.COMMENT&&n.next&&n.prev&&n.line+1===n.next.line&&n.line!==n.prev.line;){let e=String(n.value);r.push(e),n=n.prev}return r.length>0?r.reverse().join("\n"):void 0}(e);if(void 0!==t&&N.dedentBlockStringValue)return(0,N.dedentBlockStringValue)("\n"+t)}}t.TypeMapper=A,t.getDescription=C},99089:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeStorage=void 0;let n=r(45567),i=r(64166);class o{constructor(){this.types=new Map}get size(){return this.types.size}clear(){this.types.clear()}delete(e){return this.types.delete(e)}entries(){return this.types.entries()}forEach(e,t){return this.types.forEach(e,t)}get(e){let t=this.types.get(e);if(!t)throw Error(`Type with name ${(0,i.inspect)(e)} does not exists`);return t}has(e){return this.types.has(e)}keys(){return this.types.keys()}set(e,t){return this.types.set(e,t),this}values(){return this.types.values()}add(e){if(e){let t;if(e.getTypeName&&e.getTypeName.call?t=e.getTypeName():e.name&&(t=e.name),t)return this.set(t,e),t}return null}hasInstance(e,t){if(!this.has(e))return!1;let r=this.get(e);return!!r&&r instanceof t}getOrSet(e,t){let r=this.types.get(e);if(r)return r;let i=(0,n.isFunction)(t)?t(this):t;return i&&this.set(e,i),i}}t.TypeStorage=o},74408:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.UnionTypeComposer=void 0;let o=r(55284),a=r(45567),s=r(64166),l=r(39068),u=r(19988),c=r(8849),p=r(23780),d=r(12777),f=r(53406),h=r(57538),y=r(41838),m=r(32800),v=r(22049),g=r(16143);class b{constructor(e,t){if(this._gqcFallbackResolveType=null,!(t instanceof u.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `new UnionTypeComposer(GraphQLUnionType, SchemaComposer)`");if(!(e instanceof o.GraphQLUnionType))throw Error("UnionTypeComposer accept only GraphQLUnionType in constructor. Try to use more flexible method `UnionTypeComposer.create()`.");this.schemaComposer=t,this._gqType=e,this.schemaComposer.set(e,this),this.schemaComposer.set(e.name,this);let r=[];r=y.graphqlVersion>=14?this._gqType._types:this._gqType._types||this._gqType._typeConfig.types,r=(0,f.convertObjectTypeArrayAsThunk)(r,this.schemaComposer),this._gqcTypes=new Set,r.forEach(e=>{this._gqcTypes.add(e)}),this._gqcTypeResolvers=new Map,this._gqType.astNode||(this._gqType.astNode=(0,v.getUnionTypeDefinitionNode)(this)),this._gqcIsModified=!1}static create(e,t){if(!(t instanceof u.SchemaComposer))throw Error("You must provide SchemaComposer instance as a second argument for `UnionTypeComposer.create(typeDef, schemaComposer)`");if(t.hasInstance(e,b))return t.getUTC(e);let r=this.createTemp(e,t);return t.add(r),r}static createTemp(e,t){let r;let n=t||new u.SchemaComposer;if((0,a.isString)(e)){if((0,h.isTypeNameString)(e))r=new b(new o.GraphQLUnionType({name:e,types:()=>[]}),n);else if(!((r=n.typeMapper.convertSDLTypeDefinition(e))instanceof b))throw Error("You should provide correct GraphQLUnionType type definition. Eg. `union MyType = Photo | Person`")}else if(e instanceof o.GraphQLUnionType)r=new b(e,n);else if((0,a.isObject)(e)){r=new b(new o.GraphQLUnionType(Object.assign(Object.assign({},e),{types:()=>[]})),n);let t=e.types;Array.isArray(t)?r.setTypes(t):(0,a.isFunction)(t)&&r.setTypes((0,f.convertObjectTypeArrayAsThunk)(t,n)),r.setExtensions(e.extensions),Array.isArray(null==e?void 0:e.directives)&&r.setDirectives(e.directives)}else throw Error(`You should provide GraphQLUnionTypeConfig or string with union name or SDL definition. Provided:
${(0,s.inspect)(e)}`);return r}hasType(e){let t=(0,h.getComposeTypeName)(e,this.schemaComposer);for(let e of this._gqcTypes)if(e.getTypeName()===t)return!0;return!1}getTypes(){return Array.from(this._gqcTypes.values())}getTypeComposers(){return this.getTypes().map(e=>(0,h.unwrapOutputTC)(e))}getTypeNames(){return this.getTypes().map(e=>e.getTypeName())}clearTypes(){return this._gqcTypes.clear(),this._gqcIsModified=!0,this}setTypes(e){let t=(0,f.convertObjectTypeArrayAsThunk)(e,this.schemaComposer);return this._gqcTypes=new Set(t),this._gqcIsModified=!0,this}addType(e){let t=this._convertObjectType(e);return this.removeType(t.getTypeName()),this._gqcTypes.add(t),this._gqcIsModified=!0,this}addTypes(e){if(!Array.isArray(e))throw Error(`UnionTypeComposer[${this.getTypeName()}].addType() accepts only array`);return e.forEach(e=>this.addType(e)),this}removeType(e){return(Array.isArray(e)?e:[e]).forEach(e=>{for(let t of this._gqcTypes)t.getTypeName()===e&&(this._gqcTypes.delete(t),this._gqcIsModified=!0)}),this}removeOtherTypes(e){let t=Array.isArray(e)?e:[e];for(let e of this._gqcTypes)-1===t.indexOf(e.getTypeName())&&(this._gqcTypes.delete(e),this._gqcIsModified=!0);return this}getType(){if(this._gqcIsModified){this._gqcIsModified=!1,this._gqType.astNode=(0,v.getUnionTypeDefinitionNode)(this);let e=()=>{try{return this.getTypes().map(e=>e.getType())}catch(e){throw e.message=`UnionError[${this.getTypeName()}]: ${e.message}`,e}};y.graphqlVersion>=14?this._gqType._types=e:(this._gqType._types=null,this._gqType._typeConfig.types=e)}return this._gqType}getTypePlural(){return new c.ListComposer(this)}getTypeNonNull(){return new p.NonNullComposer(this)}get List(){return new c.ListComposer(this)}get NonNull(){return new p.NonNullComposer(this)}getTypeName(){return this._gqType.name}setTypeName(e){return this._gqType.name=e,this._gqcIsModified=!0,this.schemaComposer.add(this),this}getDescription(){return this._gqType.description||""}setDescription(e){return this._gqType.description=e,this._gqcIsModified=!0,this}clone(e){if(!e)throw Error("You should provide newTypeName:string for UnionTypeComposer.clone()");let t=e instanceof b?e:b.create(e,this.schemaComposer);return t._gqcExtensions=Object.assign({},this._gqcExtensions),t._gqcTypes=new Set(this._gqcTypes),t._gqcTypeResolvers=new Map(this._gqcTypeResolvers),t._gqcFallbackResolveType=this._gqcFallbackResolveType,t.setDescription(this.getDescription()),t.setDirectives(this.getDirectives()),t}cloneTo(e,t=new Map){if(!e)throw Error("You should provide SchemaComposer for ObjectTypeComposer.cloneTo()");if(t.has(this))return this;let r=b.create(this.getTypeName(),e);t.set(this,r),r._gqcExtensions=Object.assign({},this._gqcExtensions),r.setDescription(this.getDescription());let n=this.getTypeResolvers();if(n.size>0){let i=new Map;n.forEach((r,n)=>{let o=(0,h.cloneTypeTo)(n,e,t);i.set(o,r)}),r.setTypeResolvers(i)}this._gqcFallbackResolveType&&(r._gqcFallbackResolveType=(0,h.cloneTypeTo)(this._gqcFallbackResolveType,e,t));let i=this.getTypes();return i.length>0&&r.setTypes(i.map(r=>(0,h.cloneTypeTo)(r,e,t))),r}merge(e){let t;if(e instanceof o.GraphQLUnionType)t=b.createTemp(e,this.schemaComposer);else if(e instanceof b)t=e;else throw Error(`Cannot merge ${(0,s.inspect)(e)} with UnionType(${this.getTypeName()}). Provided type should be GraphQLUnionType or UnionTypeComposer.`);return this.addTypes(t.getTypes().map(e=>e.getTypeName())),this}getResolveType(){return this._gqType.resolveType}setResolveType(e){return this._gqType.resolveType=e,this._gqcIsModified=!0,this}hasTypeResolver(e){let t=this.getTypeResolvers(),r=this._convertObjectType(e);return t.has(r)}getTypeResolvers(){return this._gqcTypeResolvers}getTypeResolverCheckFn(e){let t=this.getTypeResolvers(),r=this._convertObjectType(e);if(!t.has(r))throw Error(`Type resolve function in union '${this.getTypeName()}' is not defined for type ${(0,s.inspect)(e)}.`);return t.get(r)}getTypeResolverNames(){let e=this.getTypeResolvers(),t=[];return e.forEach((e,r)=>{t.push(r.getTypeName())}),t}getTypeResolverTypes(){return Array.from(this.getTypeResolvers().keys())}setTypeResolvers(e){return this._gqcTypeResolvers=this._convertTypeResolvers(e),this._gqcIsModified=!0,this._initResolveTypeFn(),this}_initResolveTypeFn(){let e;let t=this._gqcFallbackResolveType?(0,h.getGraphQLType)(this._gqcFallbackResolveType):void 0,r=[];if(y.graphqlVersion>=16)for(let[e,t]of this._gqcTypeResolvers.entries())r.push([(0,h.getComposeTypeName)(e,this.schemaComposer),t]),this.addType(e);else for(let[e,t]of this._gqcTypeResolvers.entries())r.push([(0,h.getGraphQLType)(e),t]),this.addType(e);return e=this._isTypeResolversAsync(this._gqcTypeResolvers)?(e,i,o)=>n(this,void 0,void 0,function*(){for(let[t,n]of r)if(yield n(e,i,o))return t;return t}):(e,n,i)=>{for(let[t,o]of r)if(o(e,n,i))return t;return t},this.setResolveType(e),this}_convertObjectType(e){let t=this.schemaComposer.typeMapper.convertOutputTypeDefinition(e);if(t instanceof l.ObjectTypeComposer||t instanceof d.ThunkComposer)return t;throw Error(`Should be provided ObjectType but received ${(0,s.inspect)(e)}`)}_convertTypeResolvers(e){if(!(e instanceof Map))throw Error(`For union ${this.getTypeName()} you should provide Map object for type resolvers.`);let t=new Map;for(let[r,n]of e.entries()){try{t.set(this._convertObjectType(r),n)}catch(e){throw Error(`For union type resolver ${this.getTypeName()} you must provide GraphQLObjectType or ObjectTypeComposer, but provided ${(0,s.inspect)(r)}`)}if(!(0,a.isFunction)(n))throw Error(`Union ${this.getTypeName()} has invalid check function for type ${(0,s.inspect)(r)}`)}return t}_isTypeResolversAsync(e){let t=!1;for(let[,r]of e.entries())try{let e=r({},{},{});e instanceof Promise&&(e.catch(()=>{}),t=!0)}catch(e){}return t}addTypeResolver(e,t){let r=this.getTypeResolvers(),n=this._convertObjectType(e);return r.set(n,t),this.schemaComposer.addSchemaMustHaveType(n),this.setTypeResolvers(r),this}removeTypeResolver(e){let t=this.getTypeResolvers(),r=this._convertObjectType(e);return t.delete(r),this.setTypeResolvers(t),this}setTypeResolverFallback(e){return e&&(this.addType(e),this.schemaComposer.addSchemaMustHaveType(e)),this._gqcFallbackResolveType=e,this._gqcIsModified=!0,this._initResolveTypeFn(),this}getExtensions(){return this._gqcExtensions?this._gqcExtensions:{}}setExtensions(e){return this._gqcExtensions=e,this._gqcIsModified=!0,this}extendExtensions(e){let t=this.getExtensions();return this.setExtensions(Object.assign(Object.assign({},t),e)),this}clearExtensions(){return this.setExtensions({}),this}getExtension(e){return this.getExtensions()[e]}hasExtension(e){return e in this.getExtensions()}setExtension(e,t){return this.extendExtensions({[e]:t}),this}removeExtension(e){let t=Object.assign({},this.getExtensions());return delete t[e],this.setExtensions(t),this}getDirectives(){return this._gqcDirectives||[]}setDirectives(e){return this._gqcDirectives=e,this._gqcIsModified=!0,this}getDirectiveNames(){return this.getDirectives().map(e=>e.name)}getDirectiveByName(e){let t=this.getDirectives().find(t=>t.name===e);if(t)return t.args}setDirectiveByName(e,t){let r=this.getDirectives(),n=r.findIndex(t=>t.name===e);return n>=0?r[n].args=t:r.push({name:e,args:t}),this.setDirectives(r),this}getDirectiveById(e){let t=this.getDirectives()[e];if(t)return t.args}getNestedTCs(e={},t=new Set){let r=Array.isArray(e.exclude)?e.exclude:[];return this.getTypeComposers().forEach(n=>{!t.has(n)&&!r.includes(n.getTypeName())&&(t.add(n),n instanceof l.ObjectTypeComposer&&n.getNestedTCs(e,t))}),t}toSDL(e){let t=e||{},{deep:r}=t,n=i(t,["deep"]);n.sortTypes=n.sortTypes||!1;let o=Array.isArray(n.exclude)?n.exclude:[];if(r){let e="";e+=(0,m.printUnion)(this.getType(),n);let t=Array.from(this.getNestedTCs({exclude:o})),r=(0,g.getSortMethodFromOption)(n.sortAll||n.sortTypes);return r&&t.sort(r),t.forEach(t=>{if(t!==this&&!o.includes(t.getTypeName())){let r=t.toSDL(n);r&&(e+=`

${r}`)}}),e}return(0,m.printUnion)(this.getType(),n)}}t.UnionTypeComposer=b},55284:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(57343),t)},1109:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.dedent=t.pluralize=t.filterByDotPaths=t.deepmerge=t.createThunkedObjectProxy=t.toDottedObject=t.convertInputObjectField=t.toInputObjectType=t.toInputType=t.getFlatProjectionFromAST=t.getProjectionFromAST=t.GraphQLJSONObject=t.GraphQLJSON=t.GraphQLBuffer=t.GraphQLDate=t.ThunkComposer=t.ListComposer=t.NonNullComposer=t.TypeMapper=t.TypeStorage=t.Resolver=t.UnionTypeComposer=t.InterfaceTypeComposer=t.ScalarTypeComposer=t.EnumTypeComposer=t.InputTypeComposer=t.ObjectTypeComposer=t.sc=t.schemaComposer=t.SchemaComposer=t.graphql=void 0;let s=o(r(55284));t.graphql=s;let l=r(19988);Object.defineProperty(t,"SchemaComposer",{enumerable:!0,get:function(){return l.SchemaComposer}});let u=new l.SchemaComposer;t.schemaComposer=u,t.sc=u;var c=r(39068);Object.defineProperty(t,"ObjectTypeComposer",{enumerable:!0,get:function(){return c.ObjectTypeComposer}});var p=r(18704);Object.defineProperty(t,"InputTypeComposer",{enumerable:!0,get:function(){return p.InputTypeComposer}});var d=r(80881);Object.defineProperty(t,"EnumTypeComposer",{enumerable:!0,get:function(){return d.EnumTypeComposer}});var f=r(32281);Object.defineProperty(t,"ScalarTypeComposer",{enumerable:!0,get:function(){return f.ScalarTypeComposer}});var h=r(88688);Object.defineProperty(t,"InterfaceTypeComposer",{enumerable:!0,get:function(){return h.InterfaceTypeComposer}});var y=r(74408);Object.defineProperty(t,"UnionTypeComposer",{enumerable:!0,get:function(){return y.UnionTypeComposer}});var m=r(59923);Object.defineProperty(t,"Resolver",{enumerable:!0,get:function(){return m.Resolver}});var v=r(99089);Object.defineProperty(t,"TypeStorage",{enumerable:!0,get:function(){return v.TypeStorage}});var g=r(21457);Object.defineProperty(t,"TypeMapper",{enumerable:!0,get:function(){return g.TypeMapper}});var b=r(23780);Object.defineProperty(t,"NonNullComposer",{enumerable:!0,get:function(){return b.NonNullComposer}});var _=r(8849);Object.defineProperty(t,"ListComposer",{enumerable:!0,get:function(){return _.ListComposer}});var T=r(12777);Object.defineProperty(t,"ThunkComposer",{enumerable:!0,get:function(){return T.ThunkComposer}});var E=r(90910);Object.defineProperty(t,"GraphQLDate",{enumerable:!0,get:function(){return E.GraphQLDate}}),Object.defineProperty(t,"GraphQLBuffer",{enumerable:!0,get:function(){return E.GraphQLBuffer}}),Object.defineProperty(t,"GraphQLJSON",{enumerable:!0,get:function(){return E.GraphQLJSON}}),Object.defineProperty(t,"GraphQLJSONObject",{enumerable:!0,get:function(){return E.GraphQLJSONObject}});var O=r(48322);Object.defineProperty(t,"getProjectionFromAST",{enumerable:!0,get:function(){return O.getProjectionFromAST}}),Object.defineProperty(t,"getFlatProjectionFromAST",{enumerable:!0,get:function(){return O.getFlatProjectionFromAST}});var S=r(3989);Object.defineProperty(t,"toInputType",{enumerable:!0,get:function(){return S.toInputType}}),Object.defineProperty(t,"toInputObjectType",{enumerable:!0,get:function(){return S.toInputObjectType}}),Object.defineProperty(t,"convertInputObjectField",{enumerable:!0,get:function(){return S.convertInputObjectField}}),a(r(64166),t),a(r(57538),t),a(r(45567),t),a(r(16709),t),a(r(41838),t),a(r(32800),t);var w=r(24977);Object.defineProperty(t,"toDottedObject",{enumerable:!0,get:function(){return w.toDottedObject}});var I=r(41248);Object.defineProperty(t,"createThunkedObjectProxy",{enumerable:!0,get:function(){return I.createThunkedObjectProxy}});var N=r(2632);Object.defineProperty(t,"deepmerge",{enumerable:!0,get:function(){return N.deepmerge}});var A=r(81456);Object.defineProperty(t,"filterByDotPaths",{enumerable:!0,get:function(){return A.filterByDotPaths}});var C=r(37052);Object.defineProperty(t,"pluralize",{enumerable:!0,get:function(){return C.pluralize}});var P=r(58896);Object.defineProperty(t,"dedent",{enumerable:!0,get:function(){return P.dedent}})},54718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(55284);t.default=new n.GraphQLScalarType({name:"Buffer",serialize(e){if(!(e instanceof Buffer))throw TypeError("Field error: value is not an instance of Buffer");return e.toString()},parseValue(e){if("string"!=typeof e)throw Error("Field error: value must be a String");return Buffer.from(e)},parseLiteral(e){if(e.kind!==n.Kind.STRING)throw new n.GraphQLError(`Query error: Can only parse strings to buffers but got a: ${e.kind}`,[e]);let t=Buffer.from(e.value);if(e.value!==t.toString())throw new n.GraphQLError("Query error: Invalid buffer encoding",[e]);return t}})},39476:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(55284);t.default=new n.GraphQLScalarType({name:"Date",serialize(e){if("string"==typeof e&&/^(\d{4})-(\d{2})-(\d{2})(T((\d{2}):(\d{2}):(\d{2}))(\.(\d{1,3}))?Z)?$/.test(e))return e;if("number"==typeof e&&Number.isFinite(e))return new Date(e).toJSON();if(!(e instanceof Date))throw TypeError("Field error: value is not an instance of Date");if(Number.isNaN(e.getTime()))throw TypeError("Field error: value is an invalid Date");return e.toJSON()},parseValue(e){let t=new Date(e);if(Number.isNaN(t.getTime()))throw TypeError("Field error: value is an invalid Date");return t},parseLiteral(e){if(e.kind===n.Kind.INT)return new Date(parseInt(e.value,10));if(e.kind!==n.Kind.STRING)throw new n.GraphQLError(`Query error: Can only parse string or integer to Date but got a: ${e.kind}`,[e]);let t=new Date(e.value);if(Number.isNaN(t.getTime()))throw new n.GraphQLError("Query error: Invalid date",[e]);return t}})},90910:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLJSONObject=t.GraphQLJSON=t.GraphQLBuffer=t.GraphQLDate=void 0;let i=r(8178),o=n(r(39476));t.GraphQLDate=o.default;let a=n(r(54718));t.GraphQLBuffer=a.default;let s=i.GraphQLJSON;t.GraphQLJSON=s;let l=i.GraphQLJSONObject;t.GraphQLJSONObject=l},53406:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.convertInterfaceArrayAsThunk=t.convertObjectTypeArrayAsThunk=t.convertInputFieldMapToConfig=t.defineInputFieldMap=t.convertEnumValuesToConfig=t.defineEnumValues=t.convertObjectFieldMapToConfig=t.defineFieldMap=void 0;let i=r(64166),o=r(45567),a=r(12777),s=r(39068),l=r(88688),u=r(57538);function c(e){return e&&"object"==typeof e&&!Array.isArray(e)}t.defineFieldMap=function(e,t,r){var n,o,a;(0,i.invariant)(c(t),`${e.name} fields must be an object with field names as keys or a function which returns such an object.`);let s=Object.create(null),l=Object.create(null);for(let e of null!==(n=null==r?void 0:r.fields)&&void 0!==n?n:[])for(let t of(s[e.name.value]||(s[e.name.value]=e,l[e.name.value]=Object.create(null)),null!==(o=null==e?void 0:e.arguments)&&void 0!==o?o:[]))l[e.name.value][t.name.value]||(l[e.name.value][t.name.value]=t);let u=Object.create(null);for(let r of Object.keys(t)){let n=t[r],o=s[r];(0,i.invariant)(c(n),`${e.name}.${r} field config must be an object`);let p=Object.assign(Object.assign({},n),{isDeprecated:!!n.deprecationReason,name:r,astNode:o});(0,i.invariant)(null==p.resolve||"function"==typeof p.resolve,`${e.name}.${r} field resolver must be a function if provided, but got: ${(0,i.inspect)(p.resolve)}.`);let d=n.args;if(d){(0,i.invariant)(c(d),`${e.name}.${r} args must be an object with argument names as keys.`);let t=null!==(a=l[r])&&void 0!==a?a:{};p.args=Object.keys(d).map(e=>{let r=d[e];return{name:e,description:void 0===r.description?null:r.description,type:r.type,isDeprecated:!!n.deprecationReason,deprecationReason:null==r?void 0:r.deprecationReason,defaultValue:r.defaultValue,astNode:t[e]}})}else p.args=[];u[r]=p}return u},t.convertObjectFieldMapToConfig=function(e,t){let r={},i=(0,o.isFunction)(e),s=i?e(t):e;return(0,o.isObject)(s)?(Object.keys(s).forEach(e=>{var l;let u=s[e],{name:c,isDeprecated:p}=u,d=n(u,["name","isDeprecated"]),f={};Array.isArray(d.args)?(d.args.forEach(e=>{var r;let{name:o}=e,s=n(e,["name"]);f[o]=Object.assign(Object.assign({},s),{type:i?new a.ThunkComposer(()=>t.typeMapper.convertInputTypeDefinition(s.type||e)):t.typeMapper.convertInputTypeDefinition(s.type||e),directives:t.typeMapper.parseDirectives(null===(r=null==s?void 0:s.astNode)||void 0===r?void 0:r.directives)})}),d.args=f):(0,o.isObject)(d.args)&&(Object.keys(d.args).forEach(e=>{let r=d.args;f[e]=Object.assign(Object.assign({},(0,o.isObject)(r[e])?r[e]:null),{type:i?new a.ThunkComposer(()=>t.typeMapper.convertInputTypeDefinition(r[e].type||r[e])):t.typeMapper.convertInputTypeDefinition(r[e].type||r[e])})}),d.args=f),r[e]=Object.assign(Object.assign({},d),{type:i?new a.ThunkComposer(()=>t.typeMapper.convertOutputTypeDefinition(d.type||s[e])):t.typeMapper.convertOutputTypeDefinition(d.type||s[e]),directives:t.typeMapper.parseDirectives(null===(l=null==d?void 0:d.astNode)||void 0===l?void 0:l.directives)})}),r):{}},t.defineEnumValues=function(e,t,r){var n;(0,i.invariant)(c(t),`${e.name} values must be an object with value names as keys.`);let o=Object.create(null);for(let e of null!==(n=null==r?void 0:r.values)&&void 0!==n?n:[])o[e.name.value]=e;return Object.keys(t).map(r=>{let n=t[r];return(0,i.invariant)(c(n),`${e.name}.${r} must refer to an object with a "value" key representing an internal value but got: ${(0,i.inspect)(n)}.`),(0,i.invariant)(!n.hasOwnProperty("isDeprecated"),`${e.name}.${r} should provide "deprecationReason" instead of "isDeprecated".`),{name:r,description:n.description,isDeprecated:!!n.deprecationReason,deprecationReason:n.deprecationReason,astNode:o[r],value:n.hasOwnProperty("value")?n.value:r,extensions:{}}})},t.convertEnumValuesToConfig=function(e,t){let r={};return e.forEach(e=>{var i,{name:o,isDeprecated:a}=e,s=n(e,["name","isDeprecated"]);if(r[o]=s,null===(i=null==s?void 0:s.astNode)||void 0===i?void 0:i.directives){let e=t.typeMapper.parseDirectives(s.astNode.directives);e&&(r[o].directives=e)}}),r},t.defineInputFieldMap=function(e,t,r){var n;(0,i.invariant)(c(t),`${e.name} fields must be an object with field names as keys or a function which returns such an object.`);let o=Object.create(null);for(let e of null!==(n=null==r?void 0:r.fields)&&void 0!==n?n:[])o[e.name.value]=e;let a=Object.create(null);for(let r of Object.keys(t)){let n=Object.assign(Object.assign({},t[r]),{name:r,astNode:o[r]});(0,i.invariant)(!n.hasOwnProperty("resolve"),`${e.name}.${r} field has a resolve property, but Input Types cannot define resolvers.`),a[r]=n}return a},t.convertInputFieldMapToConfig=function(e,t){let r={},i=(0,o.isFunction)(e),s=i?e(t):e;return Object.keys(s).forEach(e=>{var o;let l=s[e],{name:u,isDeprecated:c}=l,p=n(l,["name","isDeprecated"]);r[e]=Object.assign(Object.assign({},p),{type:i?new a.ThunkComposer(()=>t.typeMapper.convertInputTypeDefinition(p.type||s[e])):t.typeMapper.convertInputTypeDefinition(p.type||s[e]),directives:t.typeMapper.parseDirectives(null===(o=null==p?void 0:p.astNode)||void 0===o?void 0:o.directives)})}),r},t.convertObjectTypeArrayAsThunk=function(e,t){let r=(0,o.isFunction)(e),n=r?e(t):e;return Array.isArray(n)?n.map(e=>{if(e instanceof s.ObjectTypeComposer||e instanceof a.ThunkComposer)return e;let n=t.typeMapper.convertOutputTypeDefinition(e);if(!n&&r)return new a.ThunkComposer(()=>t.typeMapper.convertOutputTypeDefinition(e),(0,u.getComposeTypeName)(e,t));if(!(n instanceof s.ObjectTypeComposer)&&!(n instanceof a.ThunkComposer))throw Error(`Should be provided ObjectType but received ${(0,i.inspect)(e)}`);return n}):[]},t.convertInterfaceArrayAsThunk=function(e,t){let r=(0,o.isFunction)(e),n=r?e(t):e;return Array.isArray(n)?n.map(e=>e instanceof l.InterfaceTypeComposer||e instanceof a.ThunkComposer?e:r?new a.ThunkComposer(()=>t.typeMapper.convertInterfaceTypeDefinition(e),(0,u.getComposeTypeName)(e,t)):t.typeMapper.convertInterfaceTypeDefinition(e)):[]}},41248:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createThunkedObjectProxy=void 0;let n=r(45567);t.createThunkedObjectProxy=function(e){let t={},r=!1,i=()=>{if(!r){r=!0;let i=(0,n.isFunction)(e)?e():e;Object.keys(i).forEach(e=>{t[e]=i[e]})}return t};return new Proxy(t,{get:(e,t)=>i()[t],set:(e,t,r)=>(i()[t]=r,!0),has:(e,t)=>t in i(),deleteProperty:(e,t)=>(delete i()[t],!0),ownKeys:()=>Reflect.ownKeys(i()),defineProperty:(e,t,r)=>Object.defineProperty(i(),t,r),getOwnPropertyNames:()=>Object.getOwnPropertyNames(i()),getOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(i(),t)})}},58896:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dedent=void 0,t.dedent=function(e,...t){let r="string"==typeof e?[e]:e.raw,n="";for(let e=0;e<r.length;e++)n+=r[e].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`"),e<t.length&&(n+=t[e]);let i=n.split("\n"),o=null;if(i.forEach(e=>{let t=e.match(/^(\s+)\S+/);if(t){let e=t[1].length;o=o?Math.min(o,e):e}}),null!==o){let e=o;n=i.map(t=>" "===t[0]?t.slice(e):t).join("\n")}return n.trim().replace(/\\n/g,"\n")}},2632:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepmerge=void 0,t.deepmerge=function e(t,r){let n=Array.isArray(r),i=n&&[]||{};return n?(t=t||[],i=i.concat(t),r.forEach((r,n)=>{void 0===i[n]?i[n]=r:"object"==typeof r?i[n]=e(t[n],r):-1===t.indexOf(r)&&i.push(r)})):(t&&"object"==typeof t&&Object.keys(t).forEach(e=>{i[e]=t[e]}),Object.keys(r).forEach(n=>{let o=r[n];"object"==typeof o&&o&&t[n]?i[n]=e(t[n],o):i[n]=o})),i}},22049:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseValueNode=t.getEnumValueDefinitionNodes=t.getNameNode=t.getInputValueDefinitionNodes=t.getFieldDefinitionNodes=t.getArgumentsDefinitionNodes=t.getTypeNode=t.getInterfaceNodes=t.getDirectiveNodes=t.getDescriptionNode=t.getUnionTypeDefinitionNode=t.getScalarTypeDefinitionNode=t.getInterfaceTypeDefinitionNode=t.getEnumTypeDefinitionNode=t.getInputObjectTypeDefinitionNode=t.getObjectTypeDefinitionNode=void 0;let n=r(12777),i=r(23780),o=r(8849),a=r(64166),s=r(57343);function l(e){if(e)return{kind:s.Kind.STRING,value:e}}function u(e){switch(typeof e){case"string":return{kind:s.Kind.STRING,value:e};case"number":if(Number.isInteger(e))return{kind:s.Kind.INT,value:e.toString()};return{kind:s.Kind.FLOAT,value:e.toString()};case"boolean":return{kind:s.Kind.BOOLEAN,value:e};case"object":if(null===e)return{kind:s.Kind.NULL};if(Array.isArray(e))return{kind:s.Kind.LIST,values:e.map(e=>u(e))};return{kind:s.Kind.OBJECT,fields:Object.keys(e).map(t=>({kind:s.Kind.OBJECT_FIELD,name:m(t),value:u(e[t])}))};default:return console.log(`Cannot determine astNode in toValueNode() method: ${(0,a.inspect)(e)}`),{kind:s.Kind.NULL}}}function c(e,t){if(e&&e.length)return e.map(e=>({kind:s.Kind.DIRECTIVE,name:m(e.name),arguments:e.args&&function(e,t){let r=Object.keys(e);if(!r.length)return;let n=[];return r.forEach(r=>{var i;let o;t&&(o=null===(i=t.args.find(e=>e.name===r))||void 0===i?void 0:i.type);let a={kind:s.Kind.ARGUMENT,name:m(r),value:o?(0,s.astFromValue)(e[r],o)||{kind:s.Kind.NULL}:u(e[r])};n.push(a)}),n}(e.args,t._getDirective(e.name))}))}function p(e){return e.map(e=>{if(e&&e.getTypeName)return{kind:s.Kind.NAMED_TYPE,name:m(e.getTypeName())}}).filter(Boolean)}function d(e){if(e instanceof n.ThunkComposer)return d(e.ofType);if(e instanceof o.ListComposer){let t=d(e.ofType);if(!t)return;return{kind:s.Kind.LIST_TYPE,type:t}}if(e instanceof i.NonNullComposer){let t=d(e.ofType);if(!t)return;return{kind:s.Kind.NON_NULL_TYPE,type:t}}if(e&&e.getTypeName)return{kind:s.Kind.NAMED_TYPE,name:m(e.getTypeName())}}function f(e,t){let r=e.getFieldArgNames(t);if(r.length)return r.map(r=>{let n=e.getFieldArg(t,r),i=d(n.type);if(i)return{kind:s.Kind.INPUT_VALUE_DEFINITION,name:m(r),type:i,description:l(n.description),directives:c(e.getFieldArgDirectives(t,r),e.schemaComposer),defaultValue:void 0!==n.defaultValue&&g(n.defaultValue,e.getFieldArgType(t,r))||void 0}}).filter(Boolean)}function h(e){let t=e.getFieldNames();if(t.length)return t.map(t=>{let r=e.getField(t),n=d(r.type);if(n)return{kind:s.Kind.FIELD_DEFINITION,name:m(t),type:n,arguments:f(e,t),description:l(r.description),directives:c(e.getFieldDirectives(t),e.schemaComposer)}}).filter(Boolean)}function y(e){let t=e.getFieldNames();if(t.length)return t.map(t=>{let r=e.getField(t),n=d(r.type);if(n)return{kind:s.Kind.INPUT_VALUE_DEFINITION,name:m(t),type:n,description:l(r.description),directives:c(e.getFieldDirectives(t),e.schemaComposer),defaultValue:void 0!==r.defaultValue&&g(r.defaultValue,e.getFieldType(t))||void 0}}).filter(Boolean)}function m(e){return{kind:s.Kind.NAME,value:e}}function v(e){let t=e.getFieldNames();if(t.length)return t.map(t=>{let r=e.getField(t);return{kind:s.Kind.ENUM_VALUE_DEFINITION,name:m(t),description:l(r.description),directives:c(e.getFieldDirectives(t),e.schemaComposer)}})}function g(e,t){try{return(0,s.astFromValue)(e,t)}catch(t){return u(e)}}t.getObjectTypeDefinitionNode=function(e){return{kind:s.Kind.OBJECT_TYPE_DEFINITION,name:m(e.getTypeName()),description:l(e.getDescription()),directives:c(e.getDirectives(),e.schemaComposer),interfaces:p(e.getInterfaces()),fields:h(e)}},t.getInputObjectTypeDefinitionNode=function(e){return{kind:s.Kind.INPUT_OBJECT_TYPE_DEFINITION,name:m(e.getTypeName()),directives:c(e.getDirectives(),e.schemaComposer),description:l(e.getDescription()),fields:y(e)}},t.getEnumTypeDefinitionNode=function(e){return{kind:s.Kind.ENUM_TYPE_DEFINITION,name:m(e.getTypeName()),description:l(e.getDescription()),directives:c(e.getDirectives(),e.schemaComposer),values:v(e)||[]}},t.getInterfaceTypeDefinitionNode=function(e){return{kind:s.Kind.INTERFACE_TYPE_DEFINITION,name:m(e.getTypeName()),description:l(e.getDescription()),directives:c(e.getDirectives(),e.schemaComposer),fields:h(e)}},t.getScalarTypeDefinitionNode=function(e){return{kind:s.Kind.SCALAR_TYPE_DEFINITION,name:m(e.getTypeName()),description:l(e.getDescription()),directives:c(e.getDirectives(),e.schemaComposer)}},t.getUnionTypeDefinitionNode=function(e){return{kind:s.Kind.UNION_TYPE_DEFINITION,name:m(e.getTypeName()),description:l(e.getDescription()),directives:c(e.getDirectives(),e.schemaComposer),types:e.getTypeNames().map(e=>({kind:s.Kind.NAMED_TYPE,name:m(e)}))}},t.getDescriptionNode=l,t.getDirectiveNodes=c,t.getInterfaceNodes=p,t.getTypeNode=d,t.getArgumentsDefinitionNodes=f,t.getFieldDefinitionNodes=h,t.getInputValueDefinitionNodes=y,t.getNameNode=m,t.getEnumValueDefinitionNodes=v,t.parseValueNode=function e(t,r={},n){switch(t.kind){case s.Kind.STRING:case s.Kind.BOOLEAN:return t.value;case s.Kind.INT:case s.Kind.FLOAT:return parseFloat(t.value);case s.Kind.OBJECT:let i=Object.create(null);return t.fields.forEach(t=>{i[t.name.value]=e(t.value,r,n)}),i;case s.Kind.LIST:return t.values.map(t=>e(t,r,n));case s.Kind.NULL:return null;case s.Kind.VARIABLE:return r?r[t.name.value]:void 0;default:throw TypeError(`${n} cannot represent value: ${(0,a.inspect)(t)}`)}}},16709:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},63242:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t="",r=Error();r.stack&&r.stack.replace(/^\s+at\s+/gm,"").split("\n").slice(2,7).forEach((e,r)=>{t+=(1===r?"\n--> ":"\n    ")+e}),console.log(`GRAPHQL-COMPOSE DEPRECATION: ${e} ${t}

`)}},81456:(e,t)=>{"use strict";function r(e){if(!e)return null;if(Array.isArray(e))return e;let t=e.split(/\s|,/).filter(e=>""!==e);return t.length>0?t:null}function n(e,t="was hidden"){if(null==e)return e;let r=typeof e;return"boolean"===r||"number"===r?e:"string"===r?e.length<500?e:`String(length:${e.length}) ${t}`:"object"===r&&e.constructor?"Array"===e.constructor.name?`Array(length:${e.length}) ${t}`:"Object"===e.constructor.name?`Object {} ${t}`:`Object(${e.constructor.name}) ${t}`:r}function i(e,t){if(!t)return!1;if(!Array.isArray(t))return t===e||0===t.indexOf(`${e}.`);for(let r=0;r<t.length;r++)if(t[r]===e||0===t[r].indexOf(`${e}.`))return!0;return!1}function o(e,t){if(!e)return;let r=t.shift(),n=parseInt(r,10);e[r=n>=0?n:r]&&(Array.isArray(e[r])?(e[r]=e[r].slice(0),o(e[r],t)):"object"==typeof e[r]&&(e[r]=Object.assign({},e[r]),o(e[r],t)))}function a(e,t,r,a){let s=[],l=t.match(/(.*)\.\*$/);if(l){let t=l[1],u=t.split(".");o(e,[...u]);let c=e;u.forEach(e=>{c=null==c?void 0:c[e]});let p=null!=c?c:e[t];if(p&&"object"==typeof p)return Object.keys(p).forEach(e=>{if(p[e]&&!i(`${t}.${e}`,a)){let i=n(p[e],r?r.replace(RegExp(`${t}.*`.replace(/([.*])/g,"\\$1"),"g"),`${t}.${e}`):r);i!==p[e]&&(p[e]=i,s.push(`${t}.${e}`))}}),s}if(e[t]&&!i(t,a)){let i=n(e[t],r);i!==e[t]&&(e[t]=i,s.push(t))}return s}Object.defineProperty(t,"__esModule",{value:!0}),t.hideField=t.partialCloneSubpath=t.isPresentInDotFilter=t.hideComplexValue=t.preparePathsFilter=t.filterByDotPaths=void 0,t.filterByDotPaths=function(e,t,n){let i;let o=r(t);if(o?(i={},o.forEach(t=>{let r=e;t.split(".").forEach(e=>{r=null==r?void 0:r[e]}),i[t]=r})):i=Object.assign({},e),n&&n.hideFields){let e=[],r=n.hideFields;Object.keys(r).forEach(n=>{let o=r[n];e.push(...a(i,n,o,t))}),e.length>0&&n.hideFieldsNote&&(i["[debug note]"]=n.hideFieldsNote.replace("%fieldNames%",e.join(" ")))}return i},t.preparePathsFilter=r,t.hideComplexValue=n,t.isPresentInDotFilter=i,t.partialCloneSubpath=o,t.hideField=a},71857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectivesFromSchema=t.getTypesFromSchema=void 0;let n=r(19988),i=r(39068),o=r(18704),a=r(88688),s=r(74408);t.getTypesFromSchema=function(e,t){let{exclude:r=[],include:l,omitDirectiveDefinitions:u}=t||{},c=new Set;Array.isArray(l)&&l.length?l.forEach(t=>{t&&"string"==typeof t&&c.add(e.getAnyTC(t))}):(e.has("Query")&&c.add(e.getOTC("Query")),e.has("Mutation")&&c.add(e.getOTC("Mutation")),e.has("Subscription")&&c.add(e.getOTC("Subscription"))),u||e._directives.filter(e=>!n.BUILT_IN_DIRECTIVES.includes(e)).forEach(t=>{Array.isArray(t.args)&&t.args.forEach(t=>{let n=e.getAnyTC(t.type);r.includes(n.getTypeName())||c.add(n)})});let p=new Set;return c.forEach(e=>{e instanceof i.ObjectTypeComposer||e instanceof o.InputTypeComposer||e instanceof a.InterfaceTypeComposer||e instanceof s.UnionTypeComposer?(p.add(e),e.getNestedTCs({exclude:r},p)):p.add(e)}),p},t.getDirectivesFromSchema=function(e){return e._directives.filter(e=>!n.BUILT_IN_DIRECTIVES.includes(e))}},41838:(e,t,r)=>{"use strict";function n(){var e,t,n;let i=r(55284);return(null===(e=null==i?void 0:i.versionInfo)||void 0===e?void 0:e.major)?parseFloat(`${null===(t=null==i?void 0:i.versionInfo)||void 0===t?void 0:t.major}.${null===(n=null==i?void 0:i.versionInfo)||void 0===n?void 0:n.minor}`):i.getOperationRootType?14:i.lexicographicSortSchema?13:i.lexographicSortSchema?13:11}Object.defineProperty(t,"__esModule",{value:!0}),t.graphqlVersion=t.getGraphqlVersion=void 0,t.getGraphqlVersion=n,t.graphqlVersion=n()},45567:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=t.isObject=t.isString=void 0,t.isString=function(e){return"string"==typeof e},t.isObject=function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e},t.isFunction=function(e){return!!(e&&e.constructor&&e.call&&"function"==typeof e&&e.apply)}},64166:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invariant=t.keyMap=t.keyValMap=t.mapEachKey=t.forEachKey=t.inspect=t.only=t.omit=t.clearName=t.upperFirst=t.getPluralName=t.camelCase=t.resolveMaybeThunk=void 0;let n=r(45567),i=r(37052);function o(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>0===t?e.toLowerCase():e.toUpperCase()).replace(/\s+/g,"")}t.resolveMaybeThunk=function(e){return"function"==typeof e?e():e},t.camelCase=o,t.getPluralName=function(e){return(0,i.pluralize)(o(e))},t.upperFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.clearName=function(e){return e.replace(/[^_a-zA-Z0-9]/g,"")},t.omit=function(e,t){if(!e)return{};let r=Object.assign({},e);return Array.isArray(t)?t.forEach(e=>{delete r[e]}):delete r[t],r},t.only=function(e,t){if(!e)return{};let r={};return Array.isArray(t)?t.forEach(t=>{({}).hasOwnProperty.call(e,t)&&(r[t]=e[t])}):({}).hasOwnProperty.call(e,t)&&(r[t]=e[t]),r},t.inspect=function e(t){return t&&"object"==typeof t?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?`[${t.map(e).join(", ")}]`:function(t){let r;t&&t.constructor&&t.constructor.name&&(r=t.constructor.name);let n=`{ ${Object.keys(t).filter(e=>"loc"!==e).map(r=>`${r}: ${e(t[r])}`).join(", ")} }`;return r?`${r}(${n})`:n}(t):"string"==typeof t?`"${t}"`:"function"==typeof t?`[function ${t.name}]`:String(t)},t.forEachKey=function(e,t){Object.keys(e).forEach(r=>{t(e[r],r)})},t.mapEachKey=function(e,t){if(!(0,n.isObject)(e))return e;let r={};return Object.keys(e).forEach(n=>{r[n]=t(e[n],n)}),r},t.keyValMap=function(e,t,r){let n=Object.create(null);for(let i of e)n[t(i)]=r(i);return n},t.keyMap=function(e,t){let r=Object.create(null);for(let n of e)r[t(n)]=n;return r},t.invariant=function(e,t){if(!e)throw Error(null!=t?t:"Unexpected invariant triggered.")}},37052:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluralize=void 0;let r=[[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]],n=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];t.pluralize=function(e){let t;return!~n.indexOf(e.toLowerCase())&&(t=r.filter(t=>e.match(t[0])))[0]?e.replace(t[0][0],t[0][1]):e}},48322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendByFieldProjection=t.getFlatProjectionFromAST=t.getProjectionFromASTquery=t.getProjectionFromASTQuery=t.getProjectionFromAST=void 0;let n=r(55284),i=r(2632),{FIELD:o,FRAGMENT_SPREAD:a,INLINE_FRAGMENT:s}=n.Kind;function l(e,t){if(!e)return{};let r=u(e,t);return c(e.returnType,r)}function u(e,t){let r;return e?(t?t.selectionSet&&(r=t.selectionSet.selections):Array.isArray(e.fieldNodes)&&(r=e.fieldNodes.reduce((e,t)=>(t.selectionSet&&e.push(...t.selectionSet.selections),e),[])),(r||[]).reduce((t,r)=>{switch(r.kind){case o:{let{value:n}=r.name;return t[n]?t[n]=(0,i.deepmerge)(t[n],u(e,r)||!0):t[n]=u(e,r)||!0,t}case s:return(0,i.deepmerge)(t,u(e,r));case a:return(0,i.deepmerge)(t,u(e,e.fragments[r.name.value]));default:throw Error("Unsupported query selection")}},{})):{}}function c(e,t){let r=e;for(;r instanceof n.GraphQLList||r instanceof n.GraphQLNonNull;)r=r.ofType;if(!(r instanceof n.GraphQLObjectType||r instanceof n.GraphQLInterfaceType))return t;let o=t;return Object.keys(o).forEach(e=>{let t=r.getFields()[e];t&&(t.projection&&(o=(0,i.deepmerge)(o,t.projection)),t.extensions&&t.extensions.projection&&(o=(0,i.deepmerge)(o,t.extensions.projection)),o[e]=c(t.type,o[e]))}),o}t.getProjectionFromAST=l,t.getProjectionFromASTQuery=u,t.getProjectionFromASTquery=u,t.getFlatProjectionFromAST=function(e,t){let r=l(e,t)||{},n={};return Object.keys(r).forEach(e=>{n[e]=!!r[e]}),n},t.extendByFieldProjection=c},32800:function(e,t,r){"use strict";let n;var i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.printDescriptionWithComments=t.printDescription=t.printNodeDirectives=t.printDirective=t.printInputValue=t.printArgs=t.printBlock=t.printFields=t.printInputObject=t.printEnum=t.printUnion=t.printInterface=t.printObject=t.printImplementedInterfaces=t.printScalar=t.printType=t.isSchemaOfCommonNames=t.printSchemaDefinition=t.printFilteredSchema=t.isDefinedType=t.printIntrospectionSchema=t.printSchema=t.printSchemaComposer=void 0;let o=r(64166),a=r(82260),s=r(62329),l=r(28754),u=r(26755),c=r(46928),p=r(589),d=r(76736),f=r(71857),h=r(16143);function y(e){return!(0,u.isSpecifiedScalarType)(e)&&!(0,l.isIntrospectionType)(e)}function m(e,t,r,n){let i=e.getDirectives().filter(t),o=Object.values(e.getTypeMap()).sort((e,t)=>e.name.localeCompare(t.name)).filter(r);return`${[v(e)].concat(i.map(e=>R(e,n)),o.map(e=>b(e,n))).filter(Boolean).join("\n\n")}
`}function v(e){if(g(e))return"";let t=[],r=e.getQueryType();r&&t.push(`  query: ${r.name}`);let n=e.getMutationType();n&&t.push(`  mutation: ${n.name}`);let i=e.getSubscriptionType();return i&&t.push(`  subscription: ${i.name}`),`schema {
${t.join("\n")}
}`}function g(e){let t=e.getQueryType();if(t&&"Query"!==t.name)return!1;let r=e.getMutationType();if(r&&"Mutation"!==r.name)return!1;let n=e.getSubscriptionType();return!n||"Subscription"===n.name}function b(e,t){return(0,p.isScalarType)(e)?_(e,t):(0,p.isObjectType)(e)?E(e,t):(0,p.isInterfaceType)(e)?O(e,t):(0,p.isUnionType)(e)?S(e,t):(0,p.isEnumType)(e)?w(e,t):(0,p.isInputObjectType)(e)?I(e,t):((0,o.invariant)(!1,`Unexpected type: ${(0,o.inspect)(e)}`),"")}function _(e,t){return(null==t?void 0:t.omitScalars)?"":`${F(e,t)}scalar ${e.name}${D(e.astNode)}`}function T(e,t){let r=e.getInterfaces?e.getInterfaces():[];return r.length?(null==t?void 0:t.sortAll)||(null==t?void 0:t.sortInterfaces)?` implements ${r.map(e=>e.name).sort().join(" & ")}`:` implements ${r.map(e=>e.name).join(" & ")}`:""}function E(e,t){return`${F(e,t)}type ${e.name}${T(e,t)}${D(e.astNode)}${N(e,t)}`}function O(e,t){return`${F(e,t)}interface ${e.name}${T(e,t)}${D(e.astNode)}${N(e,t)}`}function S(e,t){let r=e.getTypes();((null==t?void 0:t.sortAll)||(null==t?void 0:t.sortUnions))&&(r=[...r].sort());let n=r.length?` = ${r.join(" | ")}`:"";return`${F(e,t)}union ${e.name}${D(e.astNode)}${n}`}function w(e,t){let r=e.getValues();((null==t?void 0:t.sortAll)||(null==t?void 0:t.sortEnums))&&(r=[...r].sort((e,t)=>e.name.localeCompare(t.name)));let n=r.map((e,r)=>`${F(e,t,"  ",!r)}  ${e.name}${D(e.astNode)}`);return`${F(e,t)}enum ${e.name}${D(e.astNode)}${A(n)}`}function I(e,t){let r=Object.values(e.getFields());((null==t?void 0:t.sortAll)||(null==t?void 0:t.sortFields))&&(r=r.sort((e,t)=>e.name.localeCompare(t.name)));let n=r.map((e,r)=>`${F(e,t,"  ",!r)}  ${P(e)}`);return`${F(e,t)}input ${e.name}${D(e.astNode)}${A(n)}`}function N(e,t){let r=Object.values(e.getFields());return((null==t?void 0:t.sortAll)||(null==t?void 0:t.sortFields))&&(r=r.sort((e,t)=>e.name.localeCompare(t.name))),A(r.map((e,r)=>`${F(e,t,"  ",!r)}  ${e.name}${C(e.args,t,"  ")}: ${String(e.type)}${D(e.astNode)}`))}function A(e){return 0!==e.length?` {
${e.join("\n")}
}`:""}function C(e,t,r=""){if(0===e.length)return"";let n=(null==t?void 0:t.sortAll)||(null==t?void 0:t.sortArgs)?[...e].sort((e,t)=>e.name.localeCompare(t.name)):e;return n.every(e=>!e.description)?`(${n.map(P).join(", ")})`:`(
${n.map((e,n)=>`${F(e,t,`  ${r}`,!n)}  ${r}${P(e)}`).join("\n")}
${r})`}function P(e){let t=(0,d.astFromValue)(e.defaultValue,e.type),r=`${e.name}: ${String(e.type)}`;return t&&(r+=` = ${(0,a.print)(t)}`),`${r}${D(e.astNode)}`}function R(e,t){return`${F(e,t)}directive @${e.name}${C(e.args,t)}${e.isRepeatable?" repeatable":""} on ${e.locations.join(" | ")}`}function D(e){return e&&e.directives&&e.directives.length?` ${e.directives.map(e=>{let t="";return e.arguments&&e.arguments.length&&(t=`(${e.arguments.map(e=>`${e.name.value}: ${(0,a.print)(e.value)}`).join(", ")})`),`@${e.name.value}${t}`}).join(" ")}`:""}function F(e,t,r="",i=!0){let{description:o}=e;if(null==o||(null==t?void 0:t.omitDescriptions))return"";if(o=o.trimRight(),t&&t.commentDescriptions)return j(o,r,i);let a=o.length>70,s=n(o,a),l=r&&!i?`
${r}`:r;return`${l+s.replace(/\n/g,`
${r}`)}
`}function j(e,t,r){let n=e.split("\n").map(e=>t+(""!==e?`# ${e}`:"#")).join("\n");return`${(t&&!r?"\n":"")+n}
`}n=r(41838).graphqlVersion>=16?s.printBlockString:(e,t)=>s.printBlockString(e,"",t),t.printSchemaComposer=function(e,t){let{optPrinter:r,optFilter:n}=function(e){let t=e||{},{exclude:r=[],include:n,omitDirectiveDefinitions:o}=t;return{optPrinter:i(t,["exclude","include","omitDirectiveDefinitions"]),optFilter:{exclude:r,include:n,omitDirectiveDefinitions:o}}}(t),o=Array.from((0,f.getTypesFromSchema)(e,n)),a=(0,h.getSortMethodFromOption)(null==r?void 0:r.sortTypes,n);a&&o.sort(a);let s=[];return n.omitDirectiveDefinitions||s.push(...(0,f.getDirectivesFromSchema)(e).map(e=>R(e,r))),s.push(...o.map(e=>e.toSDL(r))),s.filter(Boolean).join("\n\n")},t.printSchema=function(e,t){return m(e,e=>!(0,c.isSpecifiedDirective)(e),y,t)},t.printIntrospectionSchema=function(e,t){return m(e,c.isSpecifiedDirective,l.isIntrospectionType,t)},t.isDefinedType=y,t.printFilteredSchema=m,t.printSchemaDefinition=v,t.isSchemaOfCommonNames=g,t.printType=b,t.printScalar=_,t.printImplementedInterfaces=T,t.printObject=E,t.printInterface=O,t.printUnion=S,t.printEnum=w,t.printInputObject=I,t.printFields=N,t.printBlock=A,t.printArgs=C,t.printInputValue=P,t.printDirective=R,t.printNodeDirectives=D,t.printDescription=F,t.printDescriptionWithComments=j},16143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSortMethodFromOption=t.fnPrintSortByType=t.printSortAlpha=void 0;let n=r(32281),i=r(80881),o=r(88688),a=r(18704),s=r(39068),l=r(74408),u=r(45567),c=["Query","Mutation","Subscription"];function p(e,t){return e.getTypeName().localeCompare(t.getTypeName())}function d(e,t=[]){switch(!0){case e instanceof n.ScalarTypeComposer:return[2];case e instanceof i.EnumTypeComposer:return[3];case e instanceof l.UnionTypeComposer:return[4];case e instanceof o.InterfaceTypeComposer:return[5];case e instanceof s.ObjectTypeComposer:let r=t.indexOf(e.getTypeName());if(-1!==r)return[1,r];return[6];case e instanceof a.InputTypeComposer:return[7]}throw Error(`Unknown kind of type ${e.getTypeName()}`)}function f(e){let t=(null==e?void 0:e.include)||c;return function(e,r){return function(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){if(e[n]<t[n])return -1;if(e[n]>t[n])return 1}return 0}(d(e,t),d(r,t))||p(e,r)}}t.printSortAlpha=p,t.fnPrintSortByType=f,t.getSortMethodFromOption=function(e,t){return null==e||!0===e||"ALPHABETIC"===e?p:"GROUP_BY_TYPE"===e?f(t):(0,u.isFunction)(e)?e:void 0}},95838:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUnionTypeComposer=t.isInterfaceTypeComposer=t.isInputTypeComposer=t.isObjectTypeComposer=t.isEnumTypeComposer=t.isScalarTypeComposer=t.visitSchema=t.getVisitKinds=void 0;let n=r(39068),i=r(18704),o=r(32281),a=r(80881),s=r(88688),l=r(74408),u=r(57538);function c(e,t){let r=[];return e instanceof n.ObjectTypeComposer?(r=["OBJECT_TYPE","COMPOSITE_TYPE","TYPE"],t.Query===e&&r.unshift("QUERY","ROOT_OBJECT"),t.Mutation===e&&r.unshift("MUTATION","ROOT_OBJECT"),t.Subscription===e&&r.unshift("SUBSCRIPTION","ROOT_OBJECT")):e instanceof i.InputTypeComposer?r=["INPUT_OBJECT_TYPE","TYPE"]:e instanceof s.InterfaceTypeComposer?r=["INTERFACE_TYPE","ABSTRACT_TYPE","COMPOSITE_TYPE","TYPE"]:e instanceof l.UnionTypeComposer?r=["UNION_TYPE","ABSTRACT_TYPE","COMPOSITE_TYPE","TYPE"]:e instanceof o.ScalarTypeComposer?r=["SCALAR_TYPE","TYPE"]:e instanceof a.EnumTypeComposer&&(r=["ENUM_TYPE","TYPE"]),r}t.getVisitKinds=c,t.visitSchema=function(e,t){let r=new WeakSet;e.forEach((n,i)=>{if(r.has(n))return;r.add(n);let o=n;for(let r of c(o,e)){let n=t[r];if(n){let t=n(o,e);if(null===t)e.delete(i);else if(!1===t)break;else(0,u.isNamedTypeComposer)(t)&&(o=t,e.set(i,o))}}})},t.isScalarTypeComposer=function(e){return e instanceof o.ScalarTypeComposer},t.isEnumTypeComposer=function(e){return e instanceof a.EnumTypeComposer},t.isObjectTypeComposer=function(e){return e instanceof n.ObjectTypeComposer},t.isInputTypeComposer=function(e){return e instanceof i.InputTypeComposer},t.isInterfaceTypeComposer=function(e){return e instanceof s.InterfaceTypeComposer},t.isUnionTypeComposer=function(e){return e instanceof l.UnionTypeComposer}},24977:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toDottedObject=void 0,t.toDottedObject=function e(t,r={},n=[]){return Object.keys(t).forEach(i=>{Object(t[i])===t[i]?e(t[i],r,n.concat(i)):r[n.concat(i).join(".")]=t[i]}),r}},3989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertInputObjectField=t.toInputObjectType=t.toInputType=void 0;let n=r(39068),i=r(23780),o=r(8849),a=r(12777),s=r(88688),l=r(57538),u=r(64166),c=r(74408);function p(e,t){let r=e,p=[];for(;r instanceof o.ListComposer||r instanceof i.NonNullComposer||r instanceof a.ThunkComposer;)r instanceof a.ThunkComposer?r=r.getUnwrappedTC():(p.unshift(r.constructor),r=r.ofType);if(!(0,l.isSomeInputTypeComposer)(r)){if(r instanceof n.ObjectTypeComposer||r instanceof s.InterfaceTypeComposer)r=d(r,t);else{if(null==t?void 0:t.fallbackType)return t.fallbackType;if(r instanceof c.UnionTypeComposer)throw Error(`Cannot convert UnionTypeComposer(${r.getTypeName()}) to Input type. Please use 'fallbackType' option for removing this error.`);throw Error(`Cannot convert '${(0,u.inspect)(r)}' to InputType. Please use 'fallbackType' option for removing this error.`)}}return r&&(r=p.reduce((e,t)=>new t(e),r)),r}function d(e,t){if(e.hasInputTypeComposer())return e.getInputTypeComposer();let r=(null==t?void 0:t.prefix)||"",n=(null==t?void 0:t.postfix)||"Input",i=`${r}${e.getTypeName()}${n}`,o=e.schemaComposer.createInputTC(i);return e.setInputTypeComposer(o),e.getFieldNames().forEach(r=>{let n;let i=e.getField(r);try{n=p(i.type,t)}catch(o){if((null==t?void 0:t.fallbackType)||(null==t?void 0:t.fallbackType)===null)n=null==t?void 0:t.fallbackType;else throw Error(`${`Can not convert field '${e.getTypeName()}.${r}' to InputType
It should be ObjectType or InterfaceType, but got 
`}${(0,u.inspect)(i.type)}`)}n&&o.setField(r,{type:n,description:i.description})}),o}t.toInputType=p,t.toInputObjectType=d,t.convertInputObjectField=function(e,t){return p(e,t)}},18955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processType=t.typeByPathIFTC=t.typeByPathRSV=t.typeByPathITC=t.typeByPathTC=t.typeByPath=void 0;let n=r(39068),i=r(18704),o=r(88688),a=r(59923),s=r(57538);function l(e,t){if(!e)return;if(0===t.length)return e;let r=t[0];if(!r)return;let n=t[1];if(r.startsWith("$")){let n=t.slice(1),i=e.getResolver(r.substring(1));return i?n.length>0?c(i,n):i:void 0}return n&&n.startsWith("@")?d(e.getFieldArg(r,n.substring(1)).type,t.slice(2)):d(e.getField(r).type,t.slice(1))}function u(e,t){return e?0===t.length?e:d(e.getField(t[0]).type,t.slice(1)):void 0}function c(e,t){if(!e)return;if(0===t.length)return e;let r=t[0];if(r){if(r.startsWith("@")){let n=r.substring(1);if(!e.getArg(n))return;return d(e.getArg(n).type,t.slice(1))}return d(e.type,t)}}function p(e,t){if(!e)return;if(0===t.length)return e;let r=t[0];if(!r)return;let n=t[1];return r.startsWith("$")?void 0:n&&n.startsWith("@")?d(e.getFieldArg(r,n.substring(1)).type,t.slice(2)):d(e.getField(r).type,t.slice(1))}function d(e,t){if(!e)return;let r=(0,s.unwrapTC)(e);return r instanceof n.ObjectTypeComposer?t.length>0?l(r,t):r:r instanceof i.InputTypeComposer?t.length>0?u(r,t):r:r instanceof o.InterfaceTypeComposer?t.length>0?p(r,t):r:t.length>0?void 0:r}t.typeByPath=function(e,t){let r=Array.isArray(t)?t:String(t).split(".");return 0===r.length?e:e instanceof n.ObjectTypeComposer?l(e,r):e instanceof i.InputTypeComposer?u(e,r):e instanceof a.Resolver?c(e,r):e instanceof o.InterfaceTypeComposer?p(e,r):e},t.typeByPathTC=l,t.typeByPathITC=u,t.typeByPathRSV=c,t.typeByPathIFTC=p,t.processType=d},57538:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneTypeTo=t.unwrapTypeNameString=t.replaceTC=t.changeUnwrappedTC=t.unwrapOutputTC=t.unwrapInputTC=t.unwrapTC=t.getComposeTypeName=t.getGraphQLType=t.isTypeComposer=t.isNamedTypeComposer=t.isComposeInputType=t.isComposeOutputType=t.isComposeType=t.isComposeNamedType=t.isSomeInputTypeComposer=t.isSomeOutputTypeComposer=t.isUnionTypeDefinitionString=t.isInterfaceTypeDefinitionString=t.isScalarTypeDefinitionString=t.isEnumTypeDefinitionString=t.isInputTypeDefinitionString=t.isOutputTypeDefinitionString=t.isSomeInputTypeDefinitionString=t.isSomeOutputTypeDefinitionString=t.isTypeDefinitionString=t.isWrappedTypeNameString=t.isTypeNameString=void 0;let i=r(55284),o=r(45567),a=r(64166),s=r(58896),l=r(39068),u=r(18704),c=r(32281),p=r(80881),d=r(88688),f=r(74408),h=r(59923),y=r(23780),m=r(8849),v=r(12777),g=n(r(63242));function b(e){return/^[_A-Za-z][_0-9A-Za-z]*$/.test(e)}function _(e){return/type\s[^{]+\{[^}]+\}/im.test(e)}function T(e){return/input\s[^{]+\{[^}]+\}/im.test(e)}function E(e){return/enum\s[^{]+\{[^}]+\}/im.test(e)}function O(e){return/scalar\s/im.test(e)}function S(e){return/interface\s/im.test(e)}function w(e){return/union\s/im.test(e)}function I(e){return e instanceof l.ObjectTypeComposer||e instanceof d.InterfaceTypeComposer||e instanceof p.EnumTypeComposer||e instanceof f.UnionTypeComposer||e instanceof c.ScalarTypeComposer||e instanceof y.NonNullComposer&&I(e.ofType)||e instanceof m.ListComposer&&I(e.ofType)||e instanceof v.ThunkComposer}function N(e){return e instanceof u.InputTypeComposer||e instanceof p.EnumTypeComposer||e instanceof c.ScalarTypeComposer||e instanceof y.NonNullComposer&&N(e.ofType)||e instanceof m.ListComposer&&N(e.ofType)||e instanceof v.ThunkComposer}function A(e){return(0,i.isNamedType)(e)||e instanceof l.ObjectTypeComposer||e instanceof u.InputTypeComposer||e instanceof d.InterfaceTypeComposer||e instanceof p.EnumTypeComposer||e instanceof f.UnionTypeComposer||e instanceof c.ScalarTypeComposer}function C(e){return A(e)||Array.isArray(e)&&C(e[0])||e instanceof y.NonNullComposer||e instanceof m.ListComposer||e instanceof v.ThunkComposer||e instanceof h.Resolver||(0,i.isType)(e)}function P(e){return e instanceof l.ObjectTypeComposer||e instanceof u.InputTypeComposer||e instanceof c.ScalarTypeComposer||e instanceof p.EnumTypeComposer||e instanceof d.InterfaceTypeComposer||e instanceof f.UnionTypeComposer}function R(e){let t=e;if(t&&(0,o.isFunction)(t.getType)&&(t=t.getType()),!(0,i.isType)(t))throw Error(`You provide incorrect type for 'getGraphQLType' method: ${(0,a.inspect)(t)}`);return t}function D(e){return e instanceof y.NonNullComposer||e instanceof m.ListComposer||e instanceof v.ThunkComposer?D(e.getUnwrappedTC()):e}function F(e,t){let r=e,n=[];for(;r instanceof m.ListComposer||r instanceof y.NonNullComposer||r instanceof v.ThunkComposer;)r instanceof v.ThunkComposer?r=r.getUnwrappedTC():(n.unshift(r.constructor),r=r.ofType);return(r=(0,o.isFunction)(t)?t(r):t)&&(r=n.reduce((e,t)=>new t(e),r)),r}function j(e){return e.endsWith("!")?j(e.slice(0,-1)):e.startsWith("[")&&e.endsWith("]")?j(e.slice(1,-1)):e}t.isTypeNameString=b,t.isWrappedTypeNameString=function(e){return b(j(e))},t.isTypeDefinitionString=function(e){return _(e)||T(e)||E(e)||O(e)||S(e)||w(e)},t.isSomeOutputTypeDefinitionString=function(e){return _(e)||E(e)||O(e)||S(e)||w(e)},t.isSomeInputTypeDefinitionString=function(e){return T(e)||E(e)||O(e)},t.isOutputTypeDefinitionString=_,t.isInputTypeDefinitionString=T,t.isEnumTypeDefinitionString=E,t.isScalarTypeDefinitionString=O,t.isInterfaceTypeDefinitionString=S,t.isUnionTypeDefinitionString=w,t.isSomeOutputTypeComposer=I,t.isSomeInputTypeComposer=N,t.isComposeNamedType=A,t.isComposeType=C,t.isComposeOutputType=function e(t){return(0,i.isOutputType)(t)||Array.isArray(t)&&e(t[0])||I(t)||t instanceof h.Resolver},t.isComposeInputType=function e(t){return(0,i.isInputType)(t)||Array.isArray(t)&&e(t[0])||N(t)},t.isNamedTypeComposer=P,t.isTypeComposer=function(e){return P(e)||e instanceof m.ListComposer||e instanceof y.NonNullComposer||e instanceof v.ThunkComposer},t.getGraphQLType=R,t.getComposeTypeName=function e(t,r){if("string"==typeof t){if(/^[_a-zA-Z][_a-zA-Z0-9]*$/.test(t))return t;{let e=(0,i.parse)(t);if(e.definitions[0]&&e.definitions[0].name&&"string"==typeof e.definitions[0].name.value)return e.definitions[0].name.value}throw Error(`Cannot get type name from string: ${(0,a.inspect)(t)}`)}if((0,o.isFunction)(t))return e(t(r),r);if(P(t))return t.getTypeName();try{let e=R(t);if("string"==typeof e.name)return e.name}catch(e){}throw Error(`Cannot get type name from ${(0,a.inspect)(t)}`)},t.unwrapTC=D,t.unwrapInputTC=function(e){return D(e)},t.unwrapOutputTC=function(e){return D(e)},t.changeUnwrappedTC=function(e,t){return(0,g.default)("Please use `replaceTC()` function instead."),F(e,t)},t.replaceTC=F,t.unwrapTypeNameString=j,t.cloneTypeTo=function(e,t,r=new Map){if(r.has(e))return r.get(e);if("string"==typeof e)return e;if(C(e))return Array.isArray(e)?e[0].cloneTo(t,r):e.cloneTo(t,r);if((0,i.isType)(e)){let n=t.typeMapper.convertGraphQLTypeToComposer(e);return r.set(e,n),n}throw Error((0,s.dedent)`
      Something strange was provided to utils cloneTypeTo() method:
        ${(0,a.inspect)(e)}
    `)}},2901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAlias=t.simplify=t.parse=t.simplifyParsedResolveInfoFragmentWithType=t.parseResolveInfo=t.getAliasFromResolveInfo=void 0;let n=r(39491),i=r(57343),o=r(91165),a=r(19092)("graphql-parse-resolve-info"),s=a.enabled;function l(e,t){return"Variable"===t.kind?e.variableValues[t.name.value]:"BooleanValue"===t.kind?t.value:void 0}function u(e){return!!e&&!!e.name&&"if"===e.name.value}function c(e){let t=e.fieldNodes||e.fieldASTs;for(let e=0,r=t.length;e<r;e++){let r=t[e];if("Field"===r.kind){let e=r.alias?r.alias.value:r.name&&r.name.value;if(e)return e}}throw Error("Could not determine alias?!")}function p(e,t={}){let r=e.fieldNodes||e.fieldASTs,{parentType:c}=e;if(!r)throw Error("No fieldNodes provided!");null==t.keepRoot&&(t.keepRoot=!1),null==t.deep&&(t.deep=!0);let p=function e(t,r,c={},p={},f,h=""){let m=d++;s&&a("%s[%d] Entering fieldTreeFromAST with parent type '%s'",h,m,f);let{variableValues:v}=r,g=r.fragments||{},b=Array.isArray(t)?t:[t];return c[f.name]||(c[f.name]={}),b.reduce((t,c,d)=>{let _=s?`${h}  `:null;if(s&&a("%s[%d] Processing AST %d of %d; kind = %s",_,m,d+1,b.length,c.kind),function(e,{directives:t=[]}){let r=!1;return t.forEach(t=>{let n=t.name.value;if(Array.isArray(t.arguments)){let i=t.arguments.find(u);if(i){let t=i.value;"skip"===n?r=r||l(e,t):"include"===n&&(r=r||!l(e,t))}}}),r}(r,c))s&&a("%s[%d] IGNORING due to directive",_,m);else if("Field"===c.kind){let n=c.name.value;if("_"===n[0]&&"_"===n[1]&&"__id"!==n)s&&a("%s[%d] IGNORING because field '%s' is reserved",_,m,n);else{let l=c.alias&&c.alias.value?c.alias.value:n;s&&a("%s[%d] Field '%s' (alias = '%s')",_,m,n,l);let u=function(e,t){if("Field"===e.kind){let r=e.name.value;if(!(t instanceof i.GraphQLUnionType))return t.getFields()[r]}}(c,f);if(null==u)return t;let d=(0,i.getNamedType)(u.type);if(!d)return t;let h=(0,o.getArgumentValues)(u,c,v)||{};if(f.name&&!t[f.name][l]){let e={name:n,alias:l,args:h,fieldsByTypeName:(0,i.isCompositeType)(d)?{[d.name]:{}}:{}};t[f.name][l]=e}let y=c.selectionSet;null!=y&&p.deep&&(0,i.isCompositeType)(d)?(s&&a("%s[%d] Recursing into subfields",_,m),e(y.selections,r,t[f.name][l].fieldsByTypeName,p,d,`${_}  `)):s&&a("%s[%d] Exiting (no fields to add)",_,m)}}else if("FragmentSpread"===c.kind&&p.deep){let o=c.name&&c.name.value;s&&a("%s[%d] Fragment spread '%s'",_,m,o);let l=g[o];n(l,'unknown fragment "'+o+'"');let u=f;if(l.typeCondition&&(u=y(r,l.typeCondition)),u&&(0,i.isCompositeType)(u)){let n=u;e(l.selectionSet.selections,r,t,p,n,`${_}  `)}}else if("InlineFragment"===c.kind&&p.deep){let n=f;if(c.typeCondition&&(n=y(r,c.typeCondition)),s&&a("%s[%d] Inline fragment (parent = '%s', type = '%s')",_,m,f,n),n&&(0,i.isCompositeType)(n)){let i=n;e(c.selectionSet.selections,r,t,p,i,`${_}  `)}}else s&&a("%s[%d] IGNORING because kind '%s' not understood",_,m,c.kind);return t},c)}(r,e,void 0,t,c);if(!t.keepRoot){let e=h(p);if(!e)return null;let t=p[e],r=h(t);return r?t[r]:null}return p}t.getAliasFromResolveInfo=c,t.parseResolveInfo=p;let d=1,f=Object.prototype.hasOwnProperty;function h(e){for(let t in e)if(f.call(e,t))return t}function y(e,t){let{schema:r}=e,{kind:n,name:i}=t;if("NamedType"===n){let e=i.value;return r.getType(e)}}function m(e,t){let{fieldsByTypeName:r}=e,n={},o=(0,i.getNamedType)(t);if((0,i.isCompositeType)(o)&&(Object.assign(n,r[o.name]),o instanceof i.GraphQLObjectType))for(let e of o.getInterfaces())Object.assign(n,r[e.name]);return{...e,fields:n}}t.simplifyParsedResolveInfoFragmentWithType=m,t.parse=p,t.simplify=m,t.getAlias=c},41590:(e,t,r)=>{if("1"===process.env.GRAPHILE_TURBO){if(12>parseInt(process.version.replace(/\..*$/,""),10))throw Error("Turbo mode requires Node v12 or higher");e.exports=r(2901)}else e.exports=r(45345)},45345:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAlias=t.simplify=t.parse=t.simplifyParsedResolveInfoFragmentWithType=t.parseResolveInfo=t.getAliasFromResolveInfo=void 0;let n=r(39491),i=r(57343),o=r(91165),a=r(19092)("graphql-parse-resolve-info"),s=a.enabled;function l(e,t){return"Variable"===t.kind?e.variableValues[t.name.value]:"BooleanValue"===t.kind?t.value:void 0}function u(e){return!!e&&!!e.name&&"if"===e.name.value}function c(e){let t=e.fieldNodes||e.fieldASTs;for(let e=0,r=t.length;e<r;e++){let r=t[e];if("Field"===r.kind){let e=r.alias?r.alias.value:r.name&&r.name.value;if(e)return e}}throw Error("Could not determine alias?!")}function p(e,t={}){let r=e.fieldNodes||e.fieldASTs,{parentType:c}=e;if(!r)throw Error("No fieldNodes provided!");null==t.keepRoot&&(t.keepRoot=!1),null==t.deep&&(t.deep=!0);let p=function e(t,r,c={},p={},f,h=""){let m=d++;s&&a("%s[%d] Entering fieldTreeFromAST with parent type '%s'",h,m,f);let{variableValues:v}=r,g=r.fragments||{},b=Array.isArray(t)?t:[t];return c[f.name]||(c[f.name]={}),b.reduce((t,c,d)=>{let _=s?`${h}  `:null;if(s&&a("%s[%d] Processing AST %d of %d; kind = %s",_,m,d+1,b.length,c.kind),function(e,{directives:t=[]}){let r=!1;return t.forEach(t=>{let n=t.name.value;if(Array.isArray(t.arguments)){let i=t.arguments.find(u);if(i){let t=i.value;"skip"===n?r=r||l(e,t):"include"===n&&(r=r||!l(e,t))}}}),r}(r,c))s&&a("%s[%d] IGNORING due to directive",_,m);else if("Field"===c.kind){let n=c.name.value;if("_"===n[0]&&"_"===n[1]&&"__id"!==n)s&&a("%s[%d] IGNORING because field '%s' is reserved",_,m,n);else{let l=c.alias&&c.alias.value?c.alias.value:n;s&&a("%s[%d] Field '%s' (alias = '%s')",_,m,n,l);let u=function(e,t){if("Field"===e.kind){let r=e.name.value;if(!(t instanceof i.GraphQLUnionType))return t.getFields()[r]}}(c,f);if(null==u)return t;let d=(0,i.getNamedType)(u.type);if(!d)return t;let h=(0,o.getArgumentValues)(u,c,v)||{};if(f.name&&!t[f.name][l]){let e={name:n,alias:l,args:h,fieldsByTypeName:(0,i.isCompositeType)(d)?{[d.name]:{}}:{}};t[f.name][l]=e}let y=c.selectionSet;null!=y&&p.deep&&(0,i.isCompositeType)(d)?(s&&a("%s[%d] Recursing into subfields",_,m),e(y.selections,r,t[f.name][l].fieldsByTypeName,p,d,`${_}  `)):s&&a("%s[%d] Exiting (no fields to add)",_,m)}}else if("FragmentSpread"===c.kind&&p.deep){let o=c.name&&c.name.value;s&&a("%s[%d] Fragment spread '%s'",_,m,o);let l=g[o];n(l,'unknown fragment "'+o+'"');let u=f;if(l.typeCondition&&(u=y(r,l.typeCondition)),u&&(0,i.isCompositeType)(u)){let n=u;e(l.selectionSet.selections,r,t,p,n,`${_}  `)}}else if("InlineFragment"===c.kind&&p.deep){let n=f;if(c.typeCondition&&(n=y(r,c.typeCondition)),s&&a("%s[%d] Inline fragment (parent = '%s', type = '%s')",_,m,f,n),n&&(0,i.isCompositeType)(n)){let i=n;e(c.selectionSet.selections,r,t,p,i,`${_}  `)}}else s&&a("%s[%d] IGNORING because kind '%s' not understood",_,m,c.kind);return t},c)}(r,e,void 0,t,c);if(!t.keepRoot){let e=h(p);if(!e)return null;let t=p[e],r=h(t);return r?t[r]:null}return p}t.getAliasFromResolveInfo=c,t.parseResolveInfo=p;let d=1,f=Object.prototype.hasOwnProperty;function h(e){for(let t in e)if(f.call(e,t))return t}function y(e,t){let{schema:r}=e,{kind:n,name:i}=t;if("NamedType"===n){let e=i.value;return r.getType(e)}}function m(e,t){let{fieldsByTypeName:r}=e,n={},o=(0,i.getNamedType)(t);if((0,i.isCompositeType)(o)&&(Object.assign(n,r[o.name]),o instanceof i.GraphQLObjectType))for(let e of o.getInterfaces())Object.assign(n,r[e.name]);return Object.assign(Object.assign({},e),{fields:n})}t.simplifyParsedResolveInfoFragmentWithType=m,t.parse=p,t.simplify=m,t.getAlias=c},25354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectionFromArray=i,t.connectionFromPromisedArray=function(e,t){return e.then(e=>i(e,t))},t.connectionFromArraySlice=o,t.connectionFromPromisedArraySlice=function(e,t,r){return e.then(e=>o(e,t,r))},t.offsetToCursor=s,t.cursorToOffset=l,t.cursorForObjectInConnection=function(e,t){let r=e.indexOf(t);return -1===r?null:s(r)},t.getOffsetWithDefault=u;var n=r(57626);function i(e,t){return o(e,t,{sliceStart:0,arrayLength:e.length})}function o(e,t,r){let{after:n,before:i,first:o,last:a}=t,{sliceStart:l,arrayLength:c}=r,p=l+e.length,d=Math.max(l,0),f=Math.min(p,c),h=u(n,-1);0<=h&&h<c&&(d=Math.max(d,h+1));let y=u(i,f);if(0<=y&&y<c&&(f=Math.min(f,y)),"number"==typeof o){if(o<0)throw Error('Argument "first" must be a non-negative integer');f=Math.min(f,d+o)}if("number"==typeof a){if(a<0)throw Error('Argument "last" must be a non-negative integer');d=Math.max(d,f-a)}let m=e.slice(d-l,f-l).map((e,t)=>({cursor:s(d+t),node:e})),v=m[0],g=m[m.length-1],b=null!=n?h+1:0,_=null!=i?y:c;return{edges:m,pageInfo:{startCursor:v?v.cursor:null,endCursor:g?g.cursor:null,hasPreviousPage:"number"==typeof a&&d>b,hasNextPage:"number"==typeof o&&f<_}}}let a="arrayconnection:";function s(e){return(0,n.base64)(a+e.toString())}function l(e){return parseInt((0,n.unbase64)(e).substring(a.length),10)}function u(e,t){if("string"!=typeof e)return t;let r=l(e);return isNaN(r)?t:r}},71517:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectionDefinitions=function(e){var t;let{nodeType:r}=e,i=null!==(t=e.name)&&void 0!==t?t:(0,n.getNamedType)(r).name,o=new n.GraphQLObjectType({name:i+"Edge",description:"An edge in a connection.",fields:()=>{var t;return{node:{type:r,resolve:e.resolveNode,description:"The item at the end of the edge"},cursor:{type:new n.GraphQLNonNull(n.GraphQLString),resolve:e.resolveCursor,description:"A cursor for use in pagination"},...(0,n.resolveObjMapThunk)(null!==(t=e.edgeFields)&&void 0!==t?t:{})}}}),a=new n.GraphQLObjectType({name:i+"Connection",description:"A connection to a list of items.",fields:()=>{var t;return{pageInfo:{type:new n.GraphQLNonNull(s),description:"Information to aid in pagination."},edges:{type:new n.GraphQLList(o),description:"A list of edges."},...(0,n.resolveObjMapThunk)(null!==(t=e.connectionFields)&&void 0!==t?t:{})}}});return{edgeType:o,connectionType:a}},t.connectionArgs=t.backwardConnectionArgs=t.forwardConnectionArgs=void 0;var n=r(57343);let i=Object.freeze({after:{type:n.GraphQLString,description:"Returns the items in the list that come after the specified cursor."},first:{type:n.GraphQLInt,description:"Returns the first n items from the list."}});t.forwardConnectionArgs=i;let o=Object.freeze({before:{type:n.GraphQLString,description:"Returns the items in the list that come before the specified cursor."},last:{type:n.GraphQLInt,description:"Returns the last n items from the list."}});t.backwardConnectionArgs=o;let a={...i,...o};t.connectionArgs=a;let s=new n.GraphQLObjectType({name:"PageInfo",description:"Information about pagination in a connection.",fields:()=>({hasNextPage:{type:new n.GraphQLNonNull(n.GraphQLBoolean),description:"When paginating forwards, are there more items?"},hasPreviousPage:{type:new n.GraphQLNonNull(n.GraphQLBoolean),description:"When paginating backwards, are there more items?"},startCursor:{type:n.GraphQLString,description:"When paginating backwards, the cursor to continue."},endCursor:{type:n.GraphQLString,description:"When paginating forwards, the cursor to continue."}})})},44766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"backwardConnectionArgs",{enumerable:!0,get:function(){return n.backwardConnectionArgs}}),Object.defineProperty(t,"connectionArgs",{enumerable:!0,get:function(){return n.connectionArgs}}),Object.defineProperty(t,"connectionDefinitions",{enumerable:!0,get:function(){return n.connectionDefinitions}}),Object.defineProperty(t,"forwardConnectionArgs",{enumerable:!0,get:function(){return n.forwardConnectionArgs}}),Object.defineProperty(t,"connectionFromArray",{enumerable:!0,get:function(){return i.connectionFromArray}}),Object.defineProperty(t,"connectionFromArraySlice",{enumerable:!0,get:function(){return i.connectionFromArraySlice}}),Object.defineProperty(t,"connectionFromPromisedArray",{enumerable:!0,get:function(){return i.connectionFromPromisedArray}}),Object.defineProperty(t,"connectionFromPromisedArraySlice",{enumerable:!0,get:function(){return i.connectionFromPromisedArraySlice}}),Object.defineProperty(t,"cursorForObjectInConnection",{enumerable:!0,get:function(){return i.cursorForObjectInConnection}}),Object.defineProperty(t,"cursorToOffset",{enumerable:!0,get:function(){return i.cursorToOffset}}),Object.defineProperty(t,"getOffsetWithDefault",{enumerable:!0,get:function(){return i.getOffsetWithDefault}}),Object.defineProperty(t,"offsetToCursor",{enumerable:!0,get:function(){return i.offsetToCursor}}),Object.defineProperty(t,"mutationWithClientMutationId",{enumerable:!0,get:function(){return o.mutationWithClientMutationId}}),Object.defineProperty(t,"nodeDefinitions",{enumerable:!0,get:function(){return a.nodeDefinitions}}),Object.defineProperty(t,"fromGlobalId",{enumerable:!0,get:function(){return a.fromGlobalId}}),Object.defineProperty(t,"globalIdField",{enumerable:!0,get:function(){return a.globalIdField}}),Object.defineProperty(t,"toGlobalId",{enumerable:!0,get:function(){return a.toGlobalId}}),Object.defineProperty(t,"pluralIdentifyingRootField",{enumerable:!0,get:function(){return s.pluralIdentifyingRootField}});var n=r(71517),i=r(25354),o=r(57406),a=r(67956),s=r(48997)},57406:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mutationWithClientMutationId=function(e){let{name:t,inputFields:r,outputFields:i,mutateAndGetPayload:o}=e,a=new n.GraphQLObjectType({name:t+"Payload",fields:()=>({...(0,n.resolveObjMapThunk)(i),clientMutationId:{type:n.GraphQLString}})}),s=new n.GraphQLInputObjectType({name:t+"Input",fields:()=>({...(0,n.resolveObjMapThunk)(r),clientMutationId:{type:n.GraphQLString}})});return{type:a,description:e.description,deprecationReason:e.deprecationReason,extensions:e.extensions,args:{input:{type:new n.GraphQLNonNull(s)}},resolve:(e,{input:t},r,n)=>{let{clientMutationId:i}=t,a=o(t,r,n);if("function"==typeof(null==a?void 0:a.then))return a.then(s);return s(a);function s(e){return"object"==typeof e&&null!==e&&(e.clientMutationId=i),e}}}};var n=r(57343)},67956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nodeDefinitions=function(e,t){let r=new n.GraphQLInterfaceType({name:"Node",description:"An object with an ID",fields:()=>({id:{type:new n.GraphQLNonNull(n.GraphQLID),description:"The id of the object."}}),resolveType:t}),i={description:"Fetches an object given its ID",type:r,args:{id:{type:new n.GraphQLNonNull(n.GraphQLID),description:"The ID of an object"}},resolve:(t,{id:r},n,i)=>e(r,n,i)},o={description:"Fetches objects given their IDs",type:new n.GraphQLNonNull(new n.GraphQLList(r)),args:{ids:{type:new n.GraphQLNonNull(new n.GraphQLList(new n.GraphQLNonNull(n.GraphQLID))),description:"The IDs of objects"}},resolve:(t,{ids:r},n,i)=>r.map(t=>e(t,n,i))};return{nodeInterface:r,nodeField:i,nodesField:o}},t.toGlobalId=o,t.fromGlobalId=function(e){let t=(0,i.unbase64)(e),r=t.indexOf(":");return{type:t.substring(0,r),id:t.substring(r+1)}},t.globalIdField=function(e,t){return{description:"The ID of an object",type:new n.GraphQLNonNull(n.GraphQLID),resolve:(r,n,i,a)=>o(null!=e?e:a.parentType.name,t?t(r,i,a):r.id)}};var n=r(57343),i=r(57626);function o(e,t){return(0,i.base64)([e,n.GraphQLID.serialize(t)].join(":"))}},48997:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluralIdentifyingRootField=function(e){return{description:e.description,type:new n.GraphQLList(e.outputType),args:{[e.argName]:{type:new n.GraphQLNonNull(new n.GraphQLList(new n.GraphQLNonNull((0,n.getNullableType)(e.inputType))))}},resolve:(t,r,n,i)=>r[e.argName].map(t=>e.resolveSingleInput(t,n,i))}};var n=r(57343)},57626:(e,t)=>{"use strict";function r(e){return a(e>>2&63)}function n(e,t){return a((e<<4|t>>4)&63)}function i(e,t){return a((e<<2|t>>6)&63)}Object.defineProperty(t,"__esModule",{value:!0}),t.base64=function(e){let t=function(e){let t=[];for(let r of e){let e=r.codePointAt(0);e<128?t.push(e):(e<2048?t.push(192|e>>6):(e<65536?t.push(224|e>>12):(t.push(240|e>>18),t.push(128|e>>12&63)),t.push(128|e>>6&63)),t.push(128|63&e))}return t}(e),o="",s=t.length,l=s%3;for(let e=0;e<s-l;e+=3){let s=t[e],l=t[e+1],u=t[e+2];o+=r(s)+n(s,l)+i(l,u)+a(63&u)}if(1===l){let e=t[s-1];o+=r(e)+n(e,0)+"=="}else if(2===l){let e=t[s-2],a=t[s-1];o+=r(e)+n(e,a)+i(a,0)+"="}return o},t.unbase64=function(e){let t=[];for(let r=0;r<e.length;r+=4){let n=s(e[r]),i=s(e[r+1]),o=s(e[r+2]),a=s(e[r+3]);if(-1===n||-1===i||-1===o||-1===a)return"";let l=n<<18|i<<12|o<<6|a;t.push(l>>16&255),t.push(l>>8&255),t.push(255&l)}let r=e.length-1;for(;"="===e[r];)--r,t.pop();return function(e){let t="";for(let r=0;r<e.length;){let n=e[r++];if((128&n)==0){t+=l(n);continue}let i=e[r++];if((224&n)==192){t+=l((31&n)<<6|63&i);continue}let o=e[r++];if((240&n)==224){t+=l((15&n)<<12|(63&i)<<6|63&o);continue}t+=l((7&n)<<18|(63&i)<<12|(63&o)<<6|63&e[r++])}return t}(t)};let o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(e){return o.charAt(e)}function s(e){return void 0===e?-1:"="===e?0:o.indexOf(e)}function l(e){return e>1114111?"":String.fromCodePoint(e)}},8178:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GraphQLJSON:()=>u,GraphQLJSONObject:()=>p,default:()=>c});var n=r(57343),i=r(36548);function o(e){return e}function a(e){if("object"!=typeof e||null===e||Array.isArray(e))throw TypeError("JSONObject cannot represent non-object value: "+e);return e}function s(e,t,r){var n=Object.create(null);return t.fields.forEach(function(t){n[t.name.value]=l(e,t.value,r)}),n}function l(e,t,r){switch(t.kind){case i.Kind.STRING:case i.Kind.BOOLEAN:return t.value;case i.Kind.INT:case i.Kind.FLOAT:return parseFloat(t.value);case i.Kind.OBJECT:return s(e,t,r);case i.Kind.LIST:return t.values.map(function(t){return l(e,t,r)});case i.Kind.NULL:return null;case i.Kind.VARIABLE:return r?r[t.name.value]:void 0;default:throw TypeError(e+" cannot represent value: "+(0,i.print)(t))}}var u=new n.GraphQLScalarType({name:"JSON",description:"The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).",specifiedByUrl:"http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf",serialize:o,parseValue:o,parseLiteral:function(e,t){return l("JSON",e,t)}});let c=u;var p=new n.GraphQLScalarType({name:"JSONObject",description:"The `JSONObject` scalar type represents JSON objects as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).",specifiedByUrl:"http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf",serialize:a,parseValue:a,parseLiteral:function(e,t){if(e.kind!==i.Kind.OBJECT)throw TypeError("JSONObject cannot represent non-object value: "+(0,i.print)(e));return s("JSONObject",e,t)}})},72616:e=>{"use strict";e.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return -1!==n&&(-1===i||n<i)}},79631:e=>{"use strict";e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},62605:e=>{"use strict";e.exports=e=>{let t=typeof e;return null!==e&&("object"===t||"function"===t)}},39797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cryptoRuntime=t.base64url=t.generateSecret=t.generateKeyPair=t.errors=t.decodeJwt=t.decodeProtectedHeader=t.importJWK=t.importX509=t.importPKCS8=t.importSPKI=t.exportJWK=t.exportSPKI=t.exportPKCS8=t.UnsecuredJWT=t.experimental_jwksCache=t.jwksCache=t.createRemoteJWKSet=t.createLocalJWKSet=t.EmbeddedJWK=t.calculateJwkThumbprintUri=t.calculateJwkThumbprint=t.EncryptJWT=t.SignJWT=t.GeneralSign=t.FlattenedSign=t.CompactSign=t.FlattenedEncrypt=t.CompactEncrypt=t.jwtDecrypt=t.jwtVerify=t.generalVerify=t.flattenedVerify=t.compactVerify=t.GeneralEncrypt=t.generalDecrypt=t.flattenedDecrypt=t.compactDecrypt=void 0;var n=r(82569);Object.defineProperty(t,"compactDecrypt",{enumerable:!0,get:function(){return n.compactDecrypt}});var i=r(86166);Object.defineProperty(t,"flattenedDecrypt",{enumerable:!0,get:function(){return i.flattenedDecrypt}});var o=r(1103);Object.defineProperty(t,"generalDecrypt",{enumerable:!0,get:function(){return o.generalDecrypt}});var a=r(38621);Object.defineProperty(t,"GeneralEncrypt",{enumerable:!0,get:function(){return a.GeneralEncrypt}});var s=r(78274);Object.defineProperty(t,"compactVerify",{enumerable:!0,get:function(){return s.compactVerify}});var l=r(73586);Object.defineProperty(t,"flattenedVerify",{enumerable:!0,get:function(){return l.flattenedVerify}});var u=r(52588);Object.defineProperty(t,"generalVerify",{enumerable:!0,get:function(){return u.generalVerify}});var c=r(28146);Object.defineProperty(t,"jwtVerify",{enumerable:!0,get:function(){return c.jwtVerify}});var p=r(78225);Object.defineProperty(t,"jwtDecrypt",{enumerable:!0,get:function(){return p.jwtDecrypt}});var d=r(87355);Object.defineProperty(t,"CompactEncrypt",{enumerable:!0,get:function(){return d.CompactEncrypt}});var f=r(30075);Object.defineProperty(t,"FlattenedEncrypt",{enumerable:!0,get:function(){return f.FlattenedEncrypt}});var h=r(77545);Object.defineProperty(t,"CompactSign",{enumerable:!0,get:function(){return h.CompactSign}});var y=r(21533);Object.defineProperty(t,"FlattenedSign",{enumerable:!0,get:function(){return y.FlattenedSign}});var m=r(80627);Object.defineProperty(t,"GeneralSign",{enumerable:!0,get:function(){return m.GeneralSign}});var v=r(11013);Object.defineProperty(t,"SignJWT",{enumerable:!0,get:function(){return v.SignJWT}});var g=r(95914);Object.defineProperty(t,"EncryptJWT",{enumerable:!0,get:function(){return g.EncryptJWT}});var b=r(92608);Object.defineProperty(t,"calculateJwkThumbprint",{enumerable:!0,get:function(){return b.calculateJwkThumbprint}}),Object.defineProperty(t,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return b.calculateJwkThumbprintUri}});var _=r(19883);Object.defineProperty(t,"EmbeddedJWK",{enumerable:!0,get:function(){return _.EmbeddedJWK}});var T=r(47721);Object.defineProperty(t,"createLocalJWKSet",{enumerable:!0,get:function(){return T.createLocalJWKSet}});var E=r(98869);Object.defineProperty(t,"createRemoteJWKSet",{enumerable:!0,get:function(){return E.createRemoteJWKSet}}),Object.defineProperty(t,"jwksCache",{enumerable:!0,get:function(){return E.jwksCache}}),Object.defineProperty(t,"experimental_jwksCache",{enumerable:!0,get:function(){return E.experimental_jwksCache}});var O=r(42498);Object.defineProperty(t,"UnsecuredJWT",{enumerable:!0,get:function(){return O.UnsecuredJWT}});var S=r(94315);Object.defineProperty(t,"exportPKCS8",{enumerable:!0,get:function(){return S.exportPKCS8}}),Object.defineProperty(t,"exportSPKI",{enumerable:!0,get:function(){return S.exportSPKI}}),Object.defineProperty(t,"exportJWK",{enumerable:!0,get:function(){return S.exportJWK}});var w=r(37872);Object.defineProperty(t,"importSPKI",{enumerable:!0,get:function(){return w.importSPKI}}),Object.defineProperty(t,"importPKCS8",{enumerable:!0,get:function(){return w.importPKCS8}}),Object.defineProperty(t,"importX509",{enumerable:!0,get:function(){return w.importX509}}),Object.defineProperty(t,"importJWK",{enumerable:!0,get:function(){return w.importJWK}});var I=r(28679);Object.defineProperty(t,"decodeProtectedHeader",{enumerable:!0,get:function(){return I.decodeProtectedHeader}});var N=r(34407);Object.defineProperty(t,"decodeJwt",{enumerable:!0,get:function(){return N.decodeJwt}}),t.errors=r(45099);var A=r(68606);Object.defineProperty(t,"generateKeyPair",{enumerable:!0,get:function(){return A.generateKeyPair}});var C=r(86690);Object.defineProperty(t,"generateSecret",{enumerable:!0,get:function(){return C.generateSecret}}),t.base64url=r(74789);var P=r(75440);Object.defineProperty(t,"cryptoRuntime",{enumerable:!0,get:function(){return P.default}})},82569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactDecrypt=void 0;let n=r(86166),i=r(45099),o=r(36088);async function a(e,t,r){if(e instanceof Uint8Array&&(e=o.decoder.decode(e)),"string"!=typeof e)throw new i.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:a,1:s,2:l,3:u,4:c,length:p}=e.split(".");if(5!==p)throw new i.JWEInvalid("Invalid Compact JWE");let d=await (0,n.flattenedDecrypt)({ciphertext:u,iv:l||void 0,protected:a,tag:c||void 0,encrypted_key:s||void 0},t,r),f={plaintext:d.plaintext,protectedHeader:d.protectedHeader};return"function"==typeof t?{...f,key:d.key}:f}t.compactDecrypt=a},87355:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactEncrypt=void 0;let n=r(30075);class i{_flattened;constructor(e){this._flattened=new n.FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}t.CompactEncrypt=i},86166:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenedDecrypt=void 0;let n=r(75906),i=r(25795),o=r(45099),a=r(66856),s=r(87144),l=r(44610),u=r(36088),c=r(74053),p=r(98550),d=r(79218);async function f(e,t,r){let f,h,y,m,v,g,b;if(!(0,s.default)(e))throw new o.JWEInvalid("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new o.JWEInvalid("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new o.JWEInvalid("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new o.JWEInvalid("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new o.JWEInvalid("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new o.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new o.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new o.JWEInvalid("JWE AAD incorrect type");if(void 0!==e.header&&!(0,s.default)(e.header))throw new o.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!(0,s.default)(e.unprotected))throw new o.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=(0,n.decode)(e.protected);f=JSON.parse(u.decoder.decode(t))}catch{throw new o.JWEInvalid("JWE Protected Header is invalid")}if(!(0,a.default)(f,e.header,e.unprotected))throw new o.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let _={...f,...e.header,...e.unprotected};if((0,p.default)(o.JWEInvalid,new Map,r?.crit,f,_),void 0!==_.zip)throw new o.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:T,enc:E}=_;if("string"!=typeof T||!T)throw new o.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof E||!E)throw new o.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let O=r&&(0,d.default)("keyManagementAlgorithms",r.keyManagementAlgorithms),S=r&&(0,d.default)("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(O&&!O.has(T)||!O&&T.startsWith("PBES2"))throw new o.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(S&&!S.has(E))throw new o.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{h=(0,n.decode)(e.encrypted_key)}catch{throw new o.JWEInvalid("Failed to base64url decode the encrypted_key")}let w=!1;"function"==typeof t&&(t=await t(f,e),w=!0);try{y=await (0,l.default)(T,t,h,_,r)}catch(e){if(e instanceof TypeError||e instanceof o.JWEInvalid||e instanceof o.JOSENotSupported)throw e;y=(0,c.default)(E)}if(void 0!==e.iv)try{m=(0,n.decode)(e.iv)}catch{throw new o.JWEInvalid("Failed to base64url decode the iv")}if(void 0!==e.tag)try{v=(0,n.decode)(e.tag)}catch{throw new o.JWEInvalid("Failed to base64url decode the tag")}let I=u.encoder.encode(e.protected??"");g=void 0!==e.aad?(0,u.concat)(I,u.encoder.encode("."),u.encoder.encode(e.aad)):I;try{b=(0,n.decode)(e.ciphertext)}catch{throw new o.JWEInvalid("Failed to base64url decode the ciphertext")}let N={plaintext:await (0,i.default)(E,y,b,m,v,g)};if(void 0!==e.protected&&(N.protectedHeader=f),void 0!==e.aad)try{N.additionalAuthenticatedData=(0,n.decode)(e.aad)}catch{throw new o.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(N.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(N.unprotectedHeader=e.header),w)?{...N,key:t}:N}t.flattenedDecrypt=f},30075:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlattenedEncrypt=void 0;let n=r(75906),i=r(80162),o=r(62519),a=r(60730),s=r(45099),l=r(66856),u=r(36088),c=r(98550);class p{_plaintext;_protectedHeader;_sharedUnprotectedHeader;_unprotectedHeader;_aad;_cek;_iv;_keyManagementParameters;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){let r,p,d,f,h;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new s.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,l.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new s.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let y={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,c.default)(s.JWEInvalid,new Map,t?.crit,this._protectedHeader,y),void 0!==y.zip)throw new s.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:m,enc:v}=y;if("string"!=typeof m||!m)throw new s.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof v||!v)throw new s.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this._cek&&("dir"===m||"ECDH-ES"===m))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${m}`);{let n;({cek:p,encryptedKey:r,parameters:n}=await (0,a.default)(m,v,e,this._cek,this._keyManagementParameters)),n&&(t&&i.unprotected in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...n}:this.setUnprotectedHeader(n):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...n}:this.setProtectedHeader(n))}f=this._protectedHeader?u.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):u.encoder.encode(""),this._aad?(h=(0,n.encode)(this._aad),d=(0,u.concat)(f,u.encoder.encode("."),u.encoder.encode(h))):d=f;let{ciphertext:g,tag:b,iv:_}=await (0,o.default)(v,this._plaintext,p,this._iv,d),T={ciphertext:(0,n.encode)(g)};return _&&(T.iv=(0,n.encode)(_)),b&&(T.tag=(0,n.encode)(b)),r&&(T.encrypted_key=(0,n.encode)(r)),h&&(T.aad=h),this._protectedHeader&&(T.protected=u.decoder.decode(f)),this._sharedUnprotectedHeader&&(T.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(T.header=this._unprotectedHeader),T}}t.FlattenedEncrypt=p},1103:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalDecrypt=void 0;let n=r(86166),i=r(45099),o=r(87144);async function a(e,t,r){if(!(0,o.default)(e))throw new i.JWEInvalid("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(o.default))throw new i.JWEInvalid("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new i.JWEInvalid("JWE Recipients has no members");for(let i of e.recipients)try{return await (0,n.flattenedDecrypt)({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:i.encrypted_key,header:i.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new i.JWEDecryptionFailed}t.generalDecrypt=a},38621:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralEncrypt=void 0;let n=r(30075),i=r(80162),o=r(45099),a=r(74053),s=r(66856),l=r(60730),u=r(75906),c=r(98550);class p{parent;unprotectedHeader;key;options;constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class d{_plaintext;_recipients=[];_protectedHeader;_unprotectedHeader;_aad;constructor(e){this._plaintext=e}addRecipient(e,t){let r=new p(this,e,{crit:t?.crit});return this._recipients.push(r),r}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(){let e;if(!this._recipients.length)throw new o.JWEInvalid("at least one recipient must be added");if(1===this._recipients.length){let[e]=this._recipients,t=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(e.unprotectedHeader).encrypt(e.key,{...e.options}),r={ciphertext:t.ciphertext,iv:t.iv,recipients:[{}],tag:t.tag};return t.aad&&(r.aad=t.aad),t.protected&&(r.protected=t.protected),t.unprotected&&(r.unprotected=t.unprotected),t.encrypted_key&&(r.recipients[0].encrypted_key=t.encrypted_key),t.header&&(r.recipients[0].header=t.header),r}for(let t=0;t<this._recipients.length;t++){let r=this._recipients[t];if(!(0,s.default)(this._protectedHeader,this._unprotectedHeader,r.unprotectedHeader))throw new o.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader,...r.unprotectedHeader},{alg:i}=n;if("string"!=typeof i||!i)throw new o.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===i||"ECDH-ES"===i)throw new o.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof n.enc||!n.enc)throw new o.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(e){if(e!==n.enc)throw new o.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else e=n.enc;if((0,c.default)(o.JWEInvalid,new Map,r.options.crit,this._protectedHeader,n),void 0!==n.zip)throw new o.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}let t=(0,a.default)(e),r={ciphertext:"",iv:"",recipients:[],tag:""};for(let o=0;o<this._recipients.length;o++){let a=this._recipients[o],s={};r.recipients.push(s);let c=({...this._protectedHeader,...this._unprotectedHeader,...a.unprotectedHeader}).alg.startsWith("PBES2")?2048+o:void 0;if(0===o){let e=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(t).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(a.unprotectedHeader).setKeyManagementParameters({p2c:c}).encrypt(a.key,{...a.options,[i.unprotected]:!0});r.ciphertext=e.ciphertext,r.iv=e.iv,r.tag=e.tag,e.aad&&(r.aad=e.aad),e.protected&&(r.protected=e.protected),e.unprotected&&(r.unprotected=e.unprotected),s.encrypted_key=e.encrypted_key,e.header&&(s.header=e.header);continue}let{encryptedKey:p,parameters:d}=await (0,l.default)(a.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,e,a.key,t,{p2c:c});s.encrypted_key=(0,u.encode)(p),(a.unprotectedHeader||d)&&(s.header={...a.unprotectedHeader,...d})}return r}}t.GeneralEncrypt=d},19883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedJWK=void 0;let n=r(37872),i=r(87144),o=r(45099);async function a(e,t){let r={...e,...t?.header};if(!(0,i.default)(r.jwk))throw new o.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let a=await (0,n.importJWK)({...r.jwk,ext:!0},r.alg);if(a instanceof Uint8Array||"public"!==a.type)throw new o.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return a}t.EmbeddedJWK=a},92608:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateJwkThumbprintUri=t.calculateJwkThumbprint=void 0;let n=r(53078),i=r(75906),o=r(45099),a=r(36088),s=r(87144),l=(e,t)=>{if("string"!=typeof e||!e)throw new o.JWKInvalid(`${t} missing or invalid`)};async function u(e,t){let r;if(!(0,s.default)(e))throw TypeError("JWK must be an object");if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(e.kty){case"EC":l(e.crv,'"crv" (Curve) Parameter'),l(e.x,'"x" (X Coordinate) Parameter'),l(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":l(e.crv,'"crv" (Subtype of Key Pair) Parameter'),l(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":l(e.e,'"e" (Exponent) Parameter'),l(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":l(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new o.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let u=a.encoder.encode(JSON.stringify(r));return(0,i.encode)(await (0,n.default)(t,u))}async function c(e,t){t??="sha256";let r=await u(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}t.calculateJwkThumbprint=u,t.calculateJwkThumbprintUri=c},47721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLocalJWKSet=void 0;let n=r(37872),i=r(45099),o=r(87144);function a(e){return(0,o.default)(e)}function s(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}class l{_jwks;_cached=new WeakMap;constructor(e){if(!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(a)}(e))throw new i.JWKSInvalid("JSON Web Key Set malformed");this._jwks=s(e)}async getKey(e,t){let{alg:r,kid:n}={...e,...t?.header},o=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new i.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(r),a=this._jwks.keys.filter(e=>{let t=o===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===r&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t}),{0:s,length:l}=a;if(0===l)throw new i.JWKSNoMatchingKey;if(1!==l){let e=new i.JWKSMultipleMatchingKeys,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of a)try{yield await u(t,e,r)}catch{}},e}return u(this._cached,s,r)}}async function u(e,t,r){let o=e.get(t)||e.set(t,{}).get(t);if(void 0===o[r]){let e=await (0,n.importJWK)({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new i.JWKSInvalid("JSON Web Key Set members must be public keys");o[r]=e}return o[r]}t.createLocalJWKSet=function(e){let t=new l(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>s(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r}},98869:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.experimental_jwksCache=t.createRemoteJWKSet=t.jwksCache=void 0;let i=r(65828),o=r(45099),a=r(47721),s=r(87144);"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(n="jose/v5.8.0"),t.jwksCache=Symbol();class l{_url;_timeoutDuration;_cooldownDuration;_cacheMaxAge;_jwksTimestamp;_pendingFetch;_options;_local;_cache;constructor(e,r){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:r?.agent,headers:r?.headers},this._timeoutDuration="number"==typeof r?.timeoutDuration?r?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof r?.cooldownDuration?r?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof r?.cacheMaxAge?r?.cacheMaxAge:6e5,r?.[t.jwksCache]!==void 0&&(this._cache=r?.[t.jwksCache],function(e,t){return!!(!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&(0,s.default)(e.jwks)&&Array.isArray(e.jwks.keys)&&Array.prototype.every.call(e.jwks.keys,s.default))}(r?.[t.jwksCache],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=(0,a.createLocalJWKSet)(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._local&&this.fresh()||await this.reload();try{return await this._local(e,t)}catch(r){if(r instanceof o.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),this._local(e,t);throw r}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);let e=new Headers(this._options.headers);n&&!e.has("User-Agent")&&(e.set("User-Agent",n),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||=(0,i.default)(this._url,this._timeoutDuration,this._options).then(e=>{this._local=(0,a.createLocalJWKSet)(e),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=e),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e}),await this._pendingFetch}}t.createRemoteJWKSet=function(e,t){let r=new l(e,t),n=async(e,t)=>r.getKey(e,t);return Object.defineProperties(n,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!r._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>r._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),n},t.experimental_jwksCache=t.jwksCache},77545:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactSign=void 0;let n=r(21533);class i{_flattened;constructor(e){this._flattened=new n.FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let r=await this._flattened.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}t.CompactSign=i},78274:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactVerify=void 0;let n=r(73586),i=r(45099),o=r(36088);async function a(e,t,r){if(e instanceof Uint8Array&&(e=o.decoder.decode(e)),"string"!=typeof e)throw new i.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:a,1:s,2:l,length:u}=e.split(".");if(3!==u)throw new i.JWSInvalid("Invalid Compact JWS");let c=await (0,n.flattenedVerify)({payload:s,protected:a,signature:l},t,r),p={payload:c.payload,protectedHeader:c.protectedHeader};return"function"==typeof t?{...p,key:c.key}:p}t.compactVerify=a},21533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlattenedSign=void 0;let n=r(75906),i=r(88752),o=r(66856),a=r(45099),s=r(36088),l=r(13410),u=r(98550);class c{_payload;_protectedHeader;_unprotectedHeader;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let r;if(!this._protectedHeader&&!this._unprotectedHeader)throw new a.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,o.default)(this._protectedHeader,this._unprotectedHeader))throw new a.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let c={...this._protectedHeader,...this._unprotectedHeader},p=(0,u.default)(a.JWSInvalid,new Map([["b64",!0]]),t?.crit,this._protectedHeader,c),d=!0;if(p.has("b64")&&"boolean"!=typeof(d=this._protectedHeader.b64))throw new a.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:f}=c;if("string"!=typeof f||!f)throw new a.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,l.default)(f,e,"sign");let h=this._payload;d&&(h=s.encoder.encode((0,n.encode)(h))),r=this._protectedHeader?s.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):s.encoder.encode("");let y=(0,s.concat)(r,s.encoder.encode("."),h),m=await (0,i.default)(f,e,y),v={signature:(0,n.encode)(m),payload:""};return d&&(v.payload=s.decoder.decode(h)),this._unprotectedHeader&&(v.header=this._unprotectedHeader),this._protectedHeader&&(v.protected=s.decoder.decode(r)),v}}t.FlattenedSign=c},73586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenedVerify=void 0;let n=r(75906),i=r(34545),o=r(45099),a=r(36088),s=r(66856),l=r(87144),u=r(13410),c=r(98550),p=r(79218);async function d(e,t,r){let d,f;if(!(0,l.default)(e))throw new o.JWSInvalid("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new o.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new o.JWSInvalid("JWS Protected Header incorrect type");if(void 0===e.payload)throw new o.JWSInvalid("JWS Payload missing");if("string"!=typeof e.signature)throw new o.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,l.default)(e.header))throw new o.JWSInvalid("JWS Unprotected Header incorrect type");let h={};if(e.protected)try{let t=(0,n.decode)(e.protected);h=JSON.parse(a.decoder.decode(t))}catch{throw new o.JWSInvalid("JWS Protected Header is invalid")}if(!(0,s.default)(h,e.header))throw new o.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let y={...h,...e.header},m=(0,c.default)(o.JWSInvalid,new Map([["b64",!0]]),r?.crit,h,y),v=!0;if(m.has("b64")&&"boolean"!=typeof(v=h.b64))throw new o.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:g}=y;if("string"!=typeof g||!g)throw new o.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let b=r&&(0,p.default)("algorithms",r.algorithms);if(b&&!b.has(g))throw new o.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(v){if("string"!=typeof e.payload)throw new o.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new o.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let _=!1;"function"==typeof t&&(t=await t(h,e),_=!0),(0,u.default)(g,t,"verify");let T=(0,a.concat)(a.encoder.encode(e.protected??""),a.encoder.encode("."),"string"==typeof e.payload?a.encoder.encode(e.payload):e.payload);try{d=(0,n.decode)(e.signature)}catch{throw new o.JWSInvalid("Failed to base64url decode the signature")}if(!await (0,i.default)(g,t,d,T))throw new o.JWSSignatureVerificationFailed;if(v)try{f=(0,n.decode)(e.payload)}catch{throw new o.JWSInvalid("Failed to base64url decode the payload")}else f="string"==typeof e.payload?a.encoder.encode(e.payload):e.payload;let E={payload:f};return(void 0!==e.protected&&(E.protectedHeader=h),void 0!==e.header&&(E.unprotectedHeader=e.header),_)?{...E,key:t}:E}t.flattenedVerify=d},80627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralSign=void 0;let n=r(21533),i=r(45099);class o{parent;protectedHeader;unprotectedHeader;options;key;constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setProtectedHeader(e){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class a{_payload;_signatures=[];constructor(e){this._payload=e}addSignature(e,t){let r=new o(this,e,t);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new i.JWSInvalid("at least one signature must be added");let e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){let r=this._signatures[t],o=new n.FlattenedSign(this._payload);o.setProtectedHeader(r.protectedHeader),o.setUnprotectedHeader(r.unprotectedHeader);let{payload:a,...s}=await o.sign(r.key,r.options);if(0===t)e.payload=a;else if(e.payload!==a)throw new i.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(s)}return e}}t.GeneralSign=a},52588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalVerify=void 0;let n=r(73586),i=r(45099),o=r(87144);async function a(e,t,r){if(!(0,o.default)(e))throw new i.JWSInvalid("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(o.default))throw new i.JWSInvalid("JWS Signatures missing or incorrect type");for(let i of e.signatures)try{return await (0,n.flattenedVerify)({header:i.header,payload:e.payload,protected:i.protected,signature:i.signature},t,r)}catch{}throw new i.JWSSignatureVerificationFailed}t.generalVerify=a},78225:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwtDecrypt=void 0;let n=r(82569),i=r(44545),o=r(45099);async function a(e,t,r){let a=await (0,n.compactDecrypt)(e,t,r),s=(0,i.default)(a.protectedHeader,a.plaintext,r),{protectedHeader:l}=a;if(void 0!==l.iss&&l.iss!==s.iss)throw new o.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',s,"iss","mismatch");if(void 0!==l.sub&&l.sub!==s.sub)throw new o.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',s,"sub","mismatch");if(void 0!==l.aud&&JSON.stringify(l.aud)!==JSON.stringify(s.aud))throw new o.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',s,"aud","mismatch");let u={payload:s,protectedHeader:l};return"function"==typeof t?{...u,key:a.key}:u}t.jwtDecrypt=a},95914:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptJWT=void 0;let n=r(87355),i=r(36088),o=r(92498);class a extends o.ProduceJWT{_cek;_iv;_keyManagementParameters;_protectedHeader;_replicateIssuerAsHeader;_replicateSubjectAsHeader;_replicateAudienceAsHeader;setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new n.CompactEncrypt(i.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}t.EncryptJWT=a},92498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProduceJWT=void 0;let n=r(68205),i=r(87144),o=r(55831);function a(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}class s{_payload;constructor(e={}){if(!(0,i.default)(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:a("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:a("setNotBefore",(0,n.default)(e))}:this._payload={...this._payload,nbf:(0,n.default)(new Date)+(0,o.default)(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:a("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:a("setExpirationTime",(0,n.default)(e))}:this._payload={...this._payload,exp:(0,n.default)(new Date)+(0,o.default)(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:(0,n.default)(new Date)}:e instanceof Date?this._payload={...this._payload,iat:a("setIssuedAt",(0,n.default)(e))}:"string"==typeof e?this._payload={...this._payload,iat:a("setIssuedAt",(0,n.default)(new Date)+(0,o.default)(e))}:this._payload={...this._payload,iat:a("setIssuedAt",e)},this}}t.ProduceJWT=s},11013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignJWT=void 0;let n=r(77545),i=r(45099),o=r(36088),a=r(92498);class s extends a.ProduceJWT{_protectedHeader;setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){let r=new n.CompactSign(o.encoder.encode(JSON.stringify(this._payload)));if(r.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new i.JWTInvalid("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}t.SignJWT=s},42498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsecuredJWT=void 0;let n=r(75906),i=r(36088),o=r(45099),a=r(44545),s=r(92498);class l extends s.ProduceJWT{encode(){let e=n.encode(JSON.stringify({alg:"none"})),t=n.encode(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){let r;if("string"!=typeof e)throw new o.JWTInvalid("Unsecured JWT must be a string");let{0:s,1:l,2:u,length:c}=e.split(".");if(3!==c||""!==u)throw new o.JWTInvalid("Invalid Unsecured JWT");try{if(r=JSON.parse(i.decoder.decode(n.decode(s))),"none"!==r.alg)throw Error()}catch{throw new o.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,a.default)(r,n.decode(l),t),header:r}}}t.UnsecuredJWT=l},28146:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwtVerify=void 0;let n=r(78274),i=r(44545),o=r(45099);async function a(e,t,r){let a=await (0,n.compactVerify)(e,t,r);if(a.protectedHeader.crit?.includes("b64")&&!1===a.protectedHeader.b64)throw new o.JWTInvalid("JWTs MUST NOT use unencoded payload");let s={payload:(0,i.default)(a.protectedHeader,a.payload,r),protectedHeader:a.protectedHeader};return"function"==typeof t?{...s,key:a.key}:s}t.jwtVerify=a},94315:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exportJWK=t.exportPKCS8=t.exportSPKI=void 0;let n=r(50502),i=r(50502),o=r(13465);async function a(e){return(0,n.toSPKI)(e)}async function s(e){return(0,i.toPKCS8)(e)}async function l(e){return(0,o.default)(e)}t.exportSPKI=a,t.exportPKCS8=s,t.exportJWK=l},68606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateKeyPair=void 0;let n=r(80138);async function i(e,t){return(0,n.generateKeyPair)(e,t)}t.generateKeyPair=i},86690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSecret=void 0;let n=r(80138);async function i(e,t){return(0,n.generateSecret)(e,t)}t.generateSecret=i},37872:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importJWK=t.importPKCS8=t.importX509=t.importSPKI=void 0;let n=r(75906),i=r(50502),o=r(57083),a=r(45099),s=r(87144);async function l(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,i.fromSPKI)(e,t,r)}async function u(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,i.fromX509)(e,t,r)}async function c(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,i.fromPKCS8)(e,t,r)}async function p(e,t){if(!(0,s.default)(e))throw TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,n.decode)(e.k);case"RSA":if(void 0!==e.oth)throw new a.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,o.default)({...e,alg:t});default:throw new a.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}t.importSPKI=l,t.importX509=u,t.importPKCS8=c,t.importJWK=p},66168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrap=t.wrap=void 0;let n=r(62519),i=r(25795),o=r(75906);async function a(e,t,r,i){let a=e.slice(0,7),s=await (0,n.default)(a,r,t,i,new Uint8Array(0));return{encryptedKey:s.ciphertext,iv:(0,o.encode)(s.iv),tag:(0,o.encode)(s.tag)}}async function s(e,t,r,n,o){let a=e.slice(0,7);return(0,i.default)(a,t,r,n,o,new Uint8Array(0))}t.wrap=a,t.unwrap=s},36088:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatKdf=t.lengthAndInput=t.uint32be=t.uint64be=t.p2s=t.concat=t.decoder=t.encoder=void 0;let n=r(53078);function i(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function o(e,t,r){if(t<0||t>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967296-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function a(e){let t=new Uint8Array(4);return o(t,e),t}async function s(e,t,r){let i=Math.ceil((t>>3)/32),o=new Uint8Array(32*i);for(let t=0;t<i;t++){let i=new Uint8Array(4+e.length+r.length);i.set(a(t+1)),i.set(e,4),i.set(r,4+e.length),o.set(await (0,n.default)("sha256",i),32*t)}return o.slice(0,t>>3)}t.encoder=new TextEncoder,t.decoder=new TextDecoder,t.concat=i,t.p2s=function(e,r){return i(t.encoder.encode(e),new Uint8Array([0]),r)},t.uint64be=function(e){let t=new Uint8Array(8);return o(t,Math.floor(e/4294967296),0),o(t,e%4294967296,4),t},t.uint32be=a,t.lengthAndInput=function(e){return i(a(e.length),e)},t.concatKdf=s},74053:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitLength=void 0;let n=r(45099),i=r(74344);function o(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}t.bitLength=o,t.default=e=>(0,i.default)(new Uint8Array(o(e)>>3))},31602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(45099),i=r(95426);t.default=(e,t)=>{if(t.length<<3!==(0,i.bitLength)(e))throw new n.JWEInvalid("Invalid Initialization Vector length")}},13410:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(32585),i=r(81943),o=e=>e?.[Symbol.toStringTag],a=(e,t)=>{if(!(t instanceof Uint8Array)){if(!(0,i.default)(t))throw TypeError((0,n.withAlg)(e,t,...i.types,"Uint8Array"));if("secret"!==t.type)throw TypeError(`${o(t)} instances for symmetric algorithms must be of type "secret"`)}},s=(e,t,r)=>{if(!(0,i.default)(t))throw TypeError((0,n.withAlg)(e,t,...i.types));if("secret"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm encryption must be of type "public"`)};t.default=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?a(e,t):s(e,t,r)}},15732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(45099);t.default=function(e){if(!(e instanceof Uint8Array)||e.length<8)throw new n.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}},49023:(e,t)=>{"use strict";function r(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function n(e,t){return e.name===t}function i(e){return parseInt(e.name.slice(4),10)}function o(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkEncCryptoKey=t.checkSigCryptoKey=void 0,t.checkSigCryptoKey=function(e,t,...a){switch(t){case"HS256":case"HS384":case"HS512":{if(!n(e.algorithm,"HMAC"))throw r("HMAC");let o=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!n(e.algorithm,"RSASSA-PKCS1-v1_5"))throw r("RSASSA-PKCS1-v1_5");let o=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!n(e.algorithm,"RSA-PSS"))throw r("RSA-PSS");let o=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw r("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!n(e.algorithm,"ECDSA"))throw r("ECDSA");let i=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==i)throw r(i,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}o(e,a)},t.checkEncCryptoKey=function(e,t,...a){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!n(e.algorithm,"AES-GCM"))throw r("AES-GCM");let i=parseInt(t.slice(1,4),10);if(e.algorithm.length!==i)throw r(i,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!n(e.algorithm,"AES-KW"))throw r("AES-KW");let i=parseInt(t.slice(1,4),10);if(e.algorithm.length!==i)throw r(i,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw r("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!n(e.algorithm,"PBKDF2"))throw r("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!n(e.algorithm,"RSA-OAEP"))throw r("RSA-OAEP");let o=parseInt(t.slice(9),10)||1;if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}o(e,a)}},44610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(91988),i=r(57734),o=r(96679),a=r(86332),s=r(75906),l=r(62903),u=r(45099),c=r(74053),p=r(37872),d=r(13410),f=r(87144),h=r(66168);async function y(e,t,r,y,m){switch((0,d.default)(e,t,"decrypt"),t=await l.default.normalizePrivateKey?.(t,e)||t,e){case"dir":if(void 0!==r)throw new u.JWEInvalid("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new u.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let o,a;if(!(0,f.default)(y.epk))throw new u.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!i.ecdhAllowed(t))throw new u.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let l=await (0,p.importJWK)(y.epk,e);if(void 0!==y.apu){if("string"!=typeof y.apu)throw new u.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=(0,s.decode)(y.apu)}catch{throw new u.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==y.apv){if("string"!=typeof y.apv)throw new u.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=(0,s.decode)(y.apv)}catch{throw new u.JWEInvalid("Failed to base64url decode the apv")}}let d=await i.deriveKey(l,t,"ECDH-ES"===e?y.enc:e,"ECDH-ES"===e?(0,c.bitLength)(y.enc):parseInt(e.slice(-5,-2),10),o,a);if("ECDH-ES"===e)return d;if(void 0===r)throw new u.JWEInvalid("JWE Encrypted Key missing");return(0,n.unwrap)(e.slice(-6),d,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new u.JWEInvalid("JWE Encrypted Key missing");return(0,a.decrypt)(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let n;if(void 0===r)throw new u.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof y.p2c)throw new u.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let i=m?.maxPBES2Count||1e4;if(y.p2c>i)throw new u.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof y.p2s)throw new u.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{n=(0,s.decode)(y.p2s)}catch{throw new u.JWEInvalid("Failed to base64url decode the p2s")}return(0,o.decrypt)(e,t,r,y.p2c,n)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new u.JWEInvalid("JWE Encrypted Key missing");return(0,n.unwrap)(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let n,i;if(void 0===r)throw new u.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof y.iv)throw new u.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof y.tag)throw new u.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{n=(0,s.decode)(y.iv)}catch{throw new u.JWEInvalid("Failed to base64url decode the iv")}try{i=(0,s.decode)(y.tag)}catch{throw new u.JWEInvalid("Failed to base64url decode the tag")}return(0,h.unwrap)(e,t,r,n,i)}default:throw new u.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}t.default=y},60730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(91988),i=r(57734),o=r(96679),a=r(86332),s=r(75906),l=r(62903),u=r(74053),c=r(45099),p=r(94315),d=r(13410),f=r(66168);async function h(e,t,r,h,y={}){let m,v,g;switch((0,d.default)(e,r,"encrypt"),r=await l.default.normalizePublicKey?.(r,e)||r,e){case"dir":g=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!i.ecdhAllowed(r))throw new c.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:o,apv:a}=y,{epk:l}=y;l||=(await i.generateEpk(r)).privateKey;let{x:d,y:f,crv:b,kty:_}=await (0,p.exportJWK)(l),T=await i.deriveKey(r,l,"ECDH-ES"===e?t:e,"ECDH-ES"===e?(0,u.bitLength)(t):parseInt(e.slice(-5,-2),10),o,a);if(v={epk:{x:d,crv:b,kty:_}},"EC"===_&&(v.epk.y=f),o&&(v.apu=(0,s.encode)(o)),a&&(v.apv=(0,s.encode)(a)),"ECDH-ES"===e){g=T;break}g=h||(0,u.default)(t);let E=e.slice(-6);m=await (0,n.wrap)(E,T,g);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":g=h||(0,u.default)(t),m=await (0,a.encrypt)(e,r,g);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{g=h||(0,u.default)(t);let{p2c:n,p2s:i}=y;({encryptedKey:m,...v}=await (0,o.encrypt)(e,r,g,n,i));break}case"A128KW":case"A192KW":case"A256KW":g=h||(0,u.default)(t),m=await (0,n.wrap)(e,r,g);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{g=h||(0,u.default)(t);let{iv:n}=y;({encryptedKey:m,...v}=await (0,f.wrap)(e,r,g,n));break}default:throw new c.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:g,encryptedKey:m,parameters:v}}t.default=h},68205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>Math.floor(e.getTime()/1e3)},32585:(e,t)=>{"use strict";function r(e,t,...n){if(n.length>2){let t=n.pop();e+=`one of type ${n.join(", ")}, or ${t}.`}else 2===n.length?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}Object.defineProperty(t,"__esModule",{value:!0}),t.withAlg=void 0,t.default=(e,...t)=>r("Key must be ",e,...t),t.withAlg=function(e,t,...n){return r(`Key for the ${e} algorithm must be `,t,...n)}},66856:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}},87144:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("object"==typeof e&&null!==e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},95426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitLength=void 0;let n=r(45099),i=r(74344);function o(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}t.bitLength=o,t.default=e=>(0,i.default)(new Uint8Array(o(e)>>3))},44545:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(45099),i=r(36088),o=r(68205),a=r(55831),s=r(87144),l=e=>e.toLowerCase().replace(/^application\//,""),u=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));t.default=(e,t,r={})=>{let c,p;try{c=JSON.parse(i.decoder.decode(t))}catch{}if(!(0,s.default)(c))throw new n.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{typ:d}=r;if(d&&("string"!=typeof e.typ||l(e.typ)!==l(d)))throw new n.JWTClaimValidationFailed('unexpected "typ" JWT header value',c,"typ","check_failed");let{requiredClaims:f=[],issuer:h,subject:y,audience:m,maxTokenAge:v}=r,g=[...f];for(let e of(void 0!==v&&g.push("iat"),void 0!==m&&g.push("aud"),void 0!==y&&g.push("sub"),void 0!==h&&g.push("iss"),new Set(g.reverse())))if(!(e in c))throw new n.JWTClaimValidationFailed(`missing required "${e}" claim`,c,e,"missing");if(h&&!(Array.isArray(h)?h:[h]).includes(c.iss))throw new n.JWTClaimValidationFailed('unexpected "iss" claim value',c,"iss","check_failed");if(y&&c.sub!==y)throw new n.JWTClaimValidationFailed('unexpected "sub" claim value',c,"sub","check_failed");if(m&&!u(c.aud,"string"==typeof m?[m]:m))throw new n.JWTClaimValidationFailed('unexpected "aud" claim value',c,"aud","check_failed");switch(typeof r.clockTolerance){case"string":p=(0,a.default)(r.clockTolerance);break;case"number":p=r.clockTolerance;break;case"undefined":p=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:b}=r,_=(0,o.default)(b||new Date);if((void 0!==c.iat||v)&&"number"!=typeof c.iat)throw new n.JWTClaimValidationFailed('"iat" claim must be a number',c,"iat","invalid");if(void 0!==c.nbf){if("number"!=typeof c.nbf)throw new n.JWTClaimValidationFailed('"nbf" claim must be a number',c,"nbf","invalid");if(c.nbf>_+p)throw new n.JWTClaimValidationFailed('"nbf" claim timestamp check failed',c,"nbf","check_failed")}if(void 0!==c.exp){if("number"!=typeof c.exp)throw new n.JWTClaimValidationFailed('"exp" claim must be a number',c,"exp","invalid");if(c.exp<=_-p)throw new n.JWTExpired('"exp" claim timestamp check failed',c,"exp","check_failed")}if(v){let e=_-c.iat;if(e-p>("number"==typeof v?v:(0,a.default)(v)))throw new n.JWTExpired('"iat" claim timestamp check failed (too far in the past)',c,"iat","check_failed");if(e<0-p)throw new n.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',c,"iat","check_failed")}return c}},80162:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unprotected=void 0,t.unprotected=Symbol()},55831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;t.default=e=>{let t;let n=r.exec(e);if(!n||n[4]&&n[1])throw TypeError("Invalid time period format");let i=parseFloat(n[2]);switch(n[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(i);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*i);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*i);break;case"day":case"days":case"d":t=Math.round(86400*i);break;case"week":case"weeks":case"w":t=Math.round(604800*i);break;default:t=Math.round(31557600*i)}return"-"===n[1]||"ago"===n[4]?-t:t}},79218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}},98550:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(45099);t.default=function(e,t,r,i,o){let a;if(void 0!==o.crit&&i?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,i.crit)){if(!a.has(s))throw new n.JOSENotSupported(`Extension Header Parameter "${s}" is not recognized`);if(void 0===o[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(a.get(s)&&void 0===i[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(i.crit)}},91988:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrap=t.wrap=void 0;let n=r(72254),i=r(6005),o=r(45099),a=r(36088),s=r(84426),l=r(49023),u=r(83312),c=r(32585),p=r(29239),d=r(81943);function f(e,t){if(e.symmetricKeySize<<3!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function h(e,t,r){if((0,u.default)(e))return e;if(e instanceof Uint8Array)return(0,i.createSecretKey)(e);if((0,s.isCryptoKey)(e))return(0,l.checkEncCryptoKey)(e,t,r),i.KeyObject.from(e);throw TypeError((0,c.default)(e,...d.types,"Uint8Array"))}t.wrap=(e,t,r)=>{let s=parseInt(e.slice(1,4),10),l=`aes${s}-wrap`;if(!(0,p.default)(l))throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let u=h(t,e,"wrapKey");f(u,e);let c=(0,i.createCipheriv)(l,u,n.Buffer.alloc(8,166));return(0,a.concat)(c.update(r),c.final())},t.unwrap=(e,t,r)=>{let s=parseInt(e.slice(1,4),10),l=`aes${s}-wrap`;if(!(0,p.default)(l))throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let u=h(t,e,"unwrapKey");f(u,e);let c=(0,i.createDecipheriv)(l,u,n.Buffer.alloc(8,166));return(0,a.concat)(c.update(r),c.final())}},50502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromX509=t.fromSPKI=t.fromPKCS8=t.toPKCS8=t.toSPKI=void 0;let n=r(6005),i=r(72254),o=r(84426),a=r(83312),s=r(32585),l=r(81943),u=(e,t,r)=>{let i;if((0,o.isCryptoKey)(r)){if(!r.extractable)throw TypeError("CryptoKey is not extractable");i=n.KeyObject.from(r)}else if((0,a.default)(r))i=r;else throw TypeError((0,s.default)(r,...l.types));if(i.type!==e)throw TypeError(`key is not a ${e} key`);return i.export({format:"pem",type:t})};t.toSPKI=e=>u("public","spki",e),t.toPKCS8=e=>u("private","pkcs8",e),t.fromPKCS8=e=>(0,n.createPrivateKey)({key:i.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),t.fromSPKI=e=>(0,n.createPublicKey)({key:i.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),t.fromX509=e=>(0,n.createPublicKey)({key:e,type:"spki",format:"pem"})},75906:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodeBase64=t.decodeBase64=void 0;let n=r(72254),i=r(36088);t.encode=e=>n.Buffer.from(e).toString("base64url"),t.decodeBase64=e=>new Uint8Array(n.Buffer.from(e,"base64")),t.encodeBase64=e=>n.Buffer.from(e).toString("base64"),t.decode=e=>new Uint8Array(n.Buffer.from(function(e){let t=e;return t instanceof Uint8Array&&(t=i.decoder.decode(t)),t}(e),"base64"))},71718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),i=r(36088);t.default=function(e,t,r,o,a,s){let l=(0,i.concat)(e,t,r,(0,i.uint64be)(e.length<<3)),u=(0,n.createHmac)(`sha${o}`,a);return u.update(l),u.digest().slice(0,s>>3)}},50300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(45099),i=r(83312);t.default=(e,t)=>{let r;switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new n.JOSENotSupported(`Content Encryption Algorithm ${e} is not supported either by JOSE or your javascript runtime`)}if(t instanceof Uint8Array){let e=t.byteLength<<3;if(e!==r)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}if((0,i.default)(t)&&"secret"===t.type){let e=t.symmetricKeySize<<3;if(e!==r)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},50102:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{let{modulusLength:r}=e.asymmetricKeyDetails;if("number"!=typeof r||r<2048)throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},29239:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6005);t.default=e=>(n||=new Set((0,i.getCiphers)())).has(e)},25795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),i=r(31602),o=r(50300),a=r(36088),s=r(45099),l=r(21203),u=r(71718),c=r(84426),p=r(49023),d=r(83312),f=r(32585),h=r(29239),y=r(81943);t.default=(e,t,r,m,v,g)=>{let b;if((0,c.isCryptoKey)(t))(0,p.checkEncCryptoKey)(t,e,"decrypt"),b=n.KeyObject.from(t);else if(t instanceof Uint8Array||(0,d.default)(t))b=t;else throw TypeError((0,f.default)(t,...y.types,"Uint8Array"));if(!m)throw new s.JWEInvalid("JWE Initialization Vector missing");if(!v)throw new s.JWEInvalid("JWE Authentication Tag missing");switch((0,o.default)(e,b),(0,i.default)(e,m),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,i,o,c){let p,f;let y=parseInt(e.slice(1,4),10);(0,d.default)(t)&&(t=t.export());let m=t.subarray(y>>3),v=t.subarray(0,y>>3),g=parseInt(e.slice(-3),10),b=`aes-${y}-cbc`;if(!(0,h.default)(b))throw new s.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let _=(0,u.default)(c,i,r,g,v,y);try{p=(0,l.default)(o,_)}catch{}if(!p)throw new s.JWEDecryptionFailed;try{let e=(0,n.createDecipheriv)(b,m,i);f=(0,a.concat)(e.update(r),e.final())}catch{}if(!f)throw new s.JWEDecryptionFailed;return f}(e,b,r,m,v,g);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,i,o,a){let l=parseInt(e.slice(1,4),10),u=`aes-${l}-gcm`;if(!(0,h.default)(u))throw new s.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);try{let e=(0,n.createDecipheriv)(u,t,i,{authTagLength:16});e.setAuthTag(o),a.byteLength&&e.setAAD(a,{plaintextLength:r.length});let s=e.update(r);return e.final(),s}catch{throw new s.JWEDecryptionFailed}}(e,b,r,m,v,g);default:throw new s.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},53078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005);t.default=(e,t)=>(0,n.createHash)(e).update(t).digest()},34967:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(45099);t.default=function(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},57734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ecdhAllowed=t.generateEpk=t.deriveKey=void 0;let n=r(6005),i=r(47261),o=r(64219),a=r(36088),s=r(45099),l=r(84426),u=r(49023),c=r(83312),p=r(32585),d=r(81943),f=(0,i.promisify)(n.generateKeyPair);async function h(e,t,r,i,o=new Uint8Array(0),s=new Uint8Array(0)){let f,h;if((0,l.isCryptoKey)(e))(0,u.checkEncCryptoKey)(e,"ECDH"),f=n.KeyObject.from(e);else if((0,c.default)(e))f=e;else throw TypeError((0,p.default)(e,...d.types));if((0,l.isCryptoKey)(t))(0,u.checkEncCryptoKey)(t,"ECDH","deriveBits"),h=n.KeyObject.from(t);else if((0,c.default)(t))h=t;else throw TypeError((0,p.default)(t,...d.types));let y=(0,a.concat)((0,a.lengthAndInput)(a.encoder.encode(r)),(0,a.lengthAndInput)(o),(0,a.lengthAndInput)(s),(0,a.uint32be)(i)),m=(0,n.diffieHellman)({privateKey:h,publicKey:f});return(0,a.concatKdf)(m,i,y)}async function y(e){let t;if((0,l.isCryptoKey)(e))t=n.KeyObject.from(e);else if((0,c.default)(e))t=e;else throw TypeError((0,p.default)(e,...d.types));switch(t.asymmetricKeyType){case"x25519":return f("x25519");case"x448":return f("x448");case"ec":return f("ec",{namedCurve:(0,o.default)(t)});default:throw new s.JOSENotSupported("Invalid or unsupported EPK")}}t.deriveKey=h,t.generateEpk=y,t.ecdhAllowed=e=>["P-256","P-384","P-521","X25519","X448"].includes((0,o.default)(e))},62519:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),i=r(31602),o=r(50300),a=r(36088),s=r(71718),l=r(84426),u=r(49023),c=r(83312),p=r(32585),d=r(95426),f=r(45099),h=r(29239),y=r(81943);t.default=(e,t,r,m,v)=>{let g;if((0,l.isCryptoKey)(r))(0,u.checkEncCryptoKey)(r,e,"encrypt"),g=n.KeyObject.from(r);else if(r instanceof Uint8Array||(0,c.default)(r))g=r;else throw TypeError((0,p.default)(r,...y.types,"Uint8Array"));switch((0,o.default)(e,g),m?(0,i.default)(e,m):m=(0,d.default)(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,i,o){let l=parseInt(e.slice(1,4),10);(0,c.default)(r)&&(r=r.export());let u=r.subarray(l>>3),p=r.subarray(0,l>>3),d=`aes-${l}-cbc`;if(!(0,h.default)(d))throw new f.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let y=(0,n.createCipheriv)(d,u,i),m=(0,a.concat)(y.update(t),y.final()),v=parseInt(e.slice(-3),10),g=(0,s.default)(o,i,m,v,p,l);return{ciphertext:m,tag:g,iv:i}}(e,t,g,m,v);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,i,o){let a=parseInt(e.slice(1,4),10),s=`aes-${a}-gcm`;if(!(0,h.default)(s))throw new f.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let l=(0,n.createCipheriv)(s,r,i,{authTagLength:16});o.byteLength&&l.setAAD(o,{plaintextLength:t.length});let u=l.update(t);return l.final(),{ciphertext:u,tag:l.getAuthTag(),iv:i}}(e,t,g,m,v);default:throw new f.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},65828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(88849),i=r(22286),o=r(15673),a=r(45099),s=r(36088),l=async(e,t,r)=>{let l;switch(e.protocol){case"https:":l=i.get;break;case"http:":l=n.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:u,headers:c}=r,p=l(e.href,{agent:u,timeout:t,headers:c}),[d]=await Promise.race([(0,o.once)(p,"response"),(0,o.once)(p,"timeout")]);if(!d)throw p.destroy(),new a.JWKSTimeout;if(200!==d.statusCode)throw new a.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let f=[];for await(let e of d)f.push(e);try{return JSON.parse(s.decoder.decode((0,s.concat)(...f)))}catch{throw new a.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};t.default=l},80138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateKeyPair=t.generateSecret=void 0;let n=r(6005),i=r(47261),o=r(74344),a=r(45099),s=(0,i.promisify)(n.generateKeyPair);async function l(e,t){let r;switch(e){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new a.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,n.createSecretKey)((0,o.default)(new Uint8Array(r>>3)))}async function u(e,t){switch(e){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let e=t?.modulusLength??2048;if("number"!=typeof e||e<2048)throw new a.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return await s("rsa",{modulusLength:e,publicExponent:65537})}case"ES256":return s("ec",{namedCurve:"P-256"});case"ES256K":return s("ec",{namedCurve:"secp256k1"});case"ES384":return s("ec",{namedCurve:"P-384"});case"ES512":return s("ec",{namedCurve:"P-521"});case"EdDSA":switch(t?.crv){case void 0:case"Ed25519":return s("ed25519");case"Ed448":return s("ed448");default:throw new a.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e=t?.crv??"P-256";switch(e){case void 0:case"P-256":case"P-384":case"P-521":return s("ec",{namedCurve:e});case"X25519":return s("x25519");case"X448":return s("x448");default:throw new a.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}}default:throw new a.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}t.generateSecret=l,t.generateKeyPair=u},64219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.weakMap=void 0;let n=r(6005),i=r(45099),o=r(84426),a=r(83312),s=r(32585),l=r(81943);t.weakMap=new WeakMap;let u=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new i.JOSENotSupported("Unsupported key curve for this operation")}};t.default=(e,t)=>{let r;if((0,o.isCryptoKey)(e))r=n.KeyObject.from(e);else if((0,a.default)(e))r=e;else throw TypeError((0,s.default)(e,...l.types));if("secret"===r.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(r.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${r.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${r.asymmetricKeyType.slice(1)}`;case"ec":{let e=r.asymmetricKeyDetails.namedCurve;if(t)return e;return u(e)}default:throw TypeError("Invalid asymmetric key type for this operation")}}},20474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),i=r(84426),o=r(49023),a=r(32585),s=r(81943);t.default=function(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError((0,a.default)(t,...s.types));return(0,n.createSecretKey)(t)}if(t instanceof n.KeyObject)return t;if((0,i.isCryptoKey)(t))return(0,o.checkSigCryptoKey)(t,e,r),n.KeyObject.from(t);throw TypeError((0,a.default)(t,...s.types,"Uint8Array"))}},49258:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(45099);t.default=function(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},81943:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;let n=r(84426),i=r(83312);t.default=e=>(0,i.default)(e)||(0,n.isCryptoKey)(e);let o=["KeyObject"];t.types=o,(globalThis.CryptoKey||n.default?.CryptoKey)&&o.push("CryptoKey")},83312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(47261);t.default=e=>n.types.isKeyObject(e)},57083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005);t.default=e=>(e.d?n.createPrivateKey:n.createPublicKey)({format:"jwk",key:e})},13465:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),i=r(75906),o=r(45099),a=r(84426),s=r(83312),l=r(32585),u=r(81943);t.default=e=>{let t;if((0,a.isCryptoKey)(e)){if(!e.extractable)throw TypeError("CryptoKey is not extractable");t=n.KeyObject.from(e)}else if((0,s.default)(e))t=e;else if(e instanceof Uint8Array)return{kty:"oct",k:(0,i.encode)(e)};else throw TypeError((0,l.default)(e,...u.types,"Uint8Array"));if("secret"!==t.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(t.asymmetricKeyType))throw new o.JOSENotSupported("Unsupported key asymmetricKeyType");return t.export({format:"jwk"})}},62132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),i=r(64219),o=r(45099),a=r(50102),s={padding:n.constants.RSA_PKCS1_PSS_PADDING,saltLength:n.constants.RSA_PSS_SALTLEN_DIGEST},l=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);t.default=function(e,t){switch(e){case"EdDSA":if(!["ed25519","ed448"].includes(t.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return t;case"RS256":case"RS384":case"RS512":if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,a.default)(t,e),t;case"PS256":case"PS384":case"PS512":if("rsa-pss"===t.asymmetricKeyType){let{hashAlgorithm:r,mgf1HashAlgorithm:n,saltLength:i}=t.asymmetricKeyDetails,o=parseInt(e.slice(-3),10);if(void 0!==r&&(r!==`sha${o}`||n!==r))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==i&&i>o>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,a.default)(t,e),{key:t,...s};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let r=(0,i.default)(t),n=l.get(e);if(r!==n)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${n}, got ${r}`);return{dsaEncoding:"ieee-p1363",key:t}}default:throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},62903:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},96679:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;let n=r(47261),i=r(6005),o=r(74344),a=r(36088),s=r(75906),l=r(91988),u=r(15732),c=r(84426),p=r(49023),d=r(83312),f=r(32585),h=r(81943),y=(0,n.promisify)(i.pbkdf2);function m(e,t){if((0,d.default)(e))return e.export();if(e instanceof Uint8Array)return e;if((0,c.isCryptoKey)(e))return(0,p.checkEncCryptoKey)(e,t,"deriveBits","deriveKey"),i.KeyObject.from(e).export();throw TypeError((0,f.default)(e,...h.types,"Uint8Array"))}let v=async(e,t,r,n=2048,i=(0,o.default)(new Uint8Array(16)))=>{(0,u.default)(i);let c=(0,a.p2s)(e,i),p=parseInt(e.slice(13,16),10)>>3,d=m(t,e),f=await y(d,c,n,p,`sha${e.slice(8,11)}`);return{encryptedKey:await (0,l.wrap)(e.slice(-6),f,r),p2c:n,p2s:(0,s.encode)(i)}};t.encrypt=v;let g=async(e,t,r,n,i)=>{(0,u.default)(i);let o=(0,a.p2s)(e,i),s=parseInt(e.slice(13,16),10)>>3,c=m(t,e),p=await y(c,o,n,s,`sha${e.slice(8,11)}`);return(0,l.unwrap)(e.slice(-6),p,r)};t.decrypt=g},74344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(6005);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.randomFillSync}})},86332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;let n=r(6005),i=r(47261),o=r(50102),a=r(84426),s=r(49023),l=r(83312),u=r(32585),c=r(81943),p=(e,t)=>{if("rsa"!==e.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,o.default)(e,t)},d=(0,i.deprecate)(()=>n.constants.RSA_PKCS1_PADDING,'The RSA1_5 "alg" (JWE Algorithm) is deprecated and will be removed in the next major revision.'),f=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return n.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return d();default:return}},h=e=>{switch(e){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function y(e,t,...r){if((0,l.default)(e))return e;if((0,a.isCryptoKey)(e))return(0,s.checkEncCryptoKey)(e,t,...r),n.KeyObject.from(e);throw TypeError((0,u.default)(e,...c.types))}t.encrypt=(e,t,r)=>{let i=f(e),o=h(e),a=y(t,e,"wrapKey","encrypt");return p(a,e),(0,n.publicEncrypt)({key:a,oaepHash:o,padding:i},r)},t.decrypt=(e,t,r)=>{let i=f(e),o=h(e),a=y(t,e,"unwrapKey","decrypt");return p(a,e),(0,n.privateDecrypt)({key:a,oaepHash:o,padding:i},r)}},55493:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="node:crypto"},88752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),i=r(47261),o=r(34967),a=r(49258),s=r(62132),l=r(20474),u=(0,i.promisify)(n.sign),c=async(e,t,r)=>{let i=(0,l.default)(e,t,"sign");if(e.startsWith("HS")){let t=n.createHmac((0,a.default)(e),i);return t.update(r),t.digest()}return u((0,o.default)(e),r,(0,s.default)(e,i))};t.default=c},21203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005).timingSafeEqual;t.default=n},34545:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6005),i=r(47261),o=r(34967),a=r(62132),s=r(88752),l=r(20474),u=(0,i.promisify)(n.verify),c=async(e,t,r,i)=>{let c=(0,l.default)(e,t,"verify");if(e.startsWith("HS")){let t=await (0,s.default)(e,c,i);try{return n.timingSafeEqual(r,t)}catch{return!1}}let p=(0,o.default)(e),d=(0,a.default)(e,c);try{return await u(p,i,d,r)}catch{return!1}};t.default=c},84426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCryptoKey=void 0;let n=r(6005),i=r(47261),o=n.webcrypto;t.default=o,t.isCryptoKey=e=>i.types.isCryptoKey(e)},74789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;let n=r(75906);t.encode=n.encode,t.decode=n.decode},34407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeJwt=void 0;let n=r(74789),i=r(36088),o=r(87144),a=r(45099);t.decodeJwt=function(e){let t,r;if("string"!=typeof e)throw new a.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:s,length:l}=e.split(".");if(5===l)throw new a.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==l)throw new a.JWTInvalid("Invalid JWT");if(!s)throw new a.JWTInvalid("JWTs must contain a payload");try{t=(0,n.decode)(s)}catch{throw new a.JWTInvalid("Failed to base64url decode the payload")}try{r=JSON.parse(i.decoder.decode(t))}catch{throw new a.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,o.default)(r))throw new a.JWTInvalid("Invalid JWT Claims Set");return r}},28679:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeProtectedHeader=void 0;let n=r(74789),i=r(36088),o=r(87144);t.decodeProtectedHeader=function(e){let t;if("string"==typeof e){let r=e.split(".");(3===r.length||5===r.length)&&([t]=r)}else if("object"==typeof e&&e){if("protected"in e)t=e.protected;else throw TypeError("Token does not contain a Protected Header")}try{if("string"!=typeof t||!t)throw Error();let e=JSON.parse(i.decoder.decode((0,n.decode)(t)));if(!(0,o.default)(e))throw Error();return e}catch{throw TypeError("Invalid Token or Protected Header formatting")}}},45099:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JWSSignatureVerificationFailed=t.JWKSTimeout=t.JWKSMultipleMatchingKeys=t.JWKSNoMatchingKey=t.JWKSInvalid=t.JWKInvalid=t.JWTInvalid=t.JWSInvalid=t.JWEInvalid=t.JWEDecryptionFailed=t.JOSENotSupported=t.JOSEAlgNotAllowed=t.JWTExpired=t.JWTClaimValidationFailed=t.JOSEError=void 0;class r extends Error{static get code(){return"ERR_JOSE_GENERIC"}code="ERR_JOSE_GENERIC";constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}t.JOSEError=r;class n extends r{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e),this.claim=r,this.reason=n,this.payload=t}}t.JWTClaimValidationFailed=n;class i extends r{static get code(){return"ERR_JWT_EXPIRED"}code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e),this.claim=r,this.reason=n,this.payload=t}}t.JWTExpired=i;class o extends r{static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}code="ERR_JOSE_ALG_NOT_ALLOWED"}t.JOSEAlgNotAllowed=o;class a extends r{static get code(){return"ERR_JOSE_NOT_SUPPORTED"}code="ERR_JOSE_NOT_SUPPORTED"}t.JOSENotSupported=a;class s extends r{static get code(){return"ERR_JWE_DECRYPTION_FAILED"}code="ERR_JWE_DECRYPTION_FAILED";message="decryption operation failed"}t.JWEDecryptionFailed=s;class l extends r{static get code(){return"ERR_JWE_INVALID"}code="ERR_JWE_INVALID"}t.JWEInvalid=l;class u extends r{static get code(){return"ERR_JWS_INVALID"}code="ERR_JWS_INVALID"}t.JWSInvalid=u;class c extends r{static get code(){return"ERR_JWT_INVALID"}code="ERR_JWT_INVALID"}t.JWTInvalid=c;class p extends r{static get code(){return"ERR_JWK_INVALID"}code="ERR_JWK_INVALID"}t.JWKInvalid=p;class d extends r{static get code(){return"ERR_JWKS_INVALID"}code="ERR_JWKS_INVALID"}t.JWKSInvalid=d;class f extends r{static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}code="ERR_JWKS_NO_MATCHING_KEY";message="no applicable key found in the JSON Web Key Set"}t.JWKSNoMatchingKey=f;class h extends r{[Symbol.asyncIterator];static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";message="multiple matching keys found in the JSON Web Key Set"}t.JWKSMultipleMatchingKeys=h;class y extends r{static get code(){return"ERR_JWKS_TIMEOUT"}code="ERR_JWKS_TIMEOUT";message="request timed out"}t.JWKSTimeout=y;class m extends r{static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";message="signature verification failed"}t.JWSSignatureVerificationFailed=m},75440:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(55493);t.default=n.default},31103:e=>{"use strict";e.exports=function(){function e(e,t,r,n,i){return e<t||r<t?e>r?r+1:e+1:n===i?t:t+1}return function(t,r){if(t===r)return 0;if(t.length>r.length){var n,i,o,a,s,l,u,c,p,d,f,h,y=t;t=r,r=y}for(var m=t.length,v=r.length;m>0&&t.charCodeAt(m-1)===r.charCodeAt(v-1);)m--,v--;for(var g=0;g<m&&t.charCodeAt(g)===r.charCodeAt(g);)g++;if(m-=g,v-=g,0===m||v<3)return v;var b=0,_=[];for(n=0;n<m;n++)_.push(n+1),_.push(t.charCodeAt(g+n));for(var T=_.length-1;b<v-3;)for(n=0,p=r.charCodeAt(g+(i=b)),d=r.charCodeAt(g+(o=b+1)),f=r.charCodeAt(g+(a=b+2)),h=r.charCodeAt(g+(s=b+3)),l=b+=4;n<T;n+=2)i=e(u=_[n],i,o,p,c=_[n+1]),o=e(i,o,a,d,c),a=e(o,a,s,f,c),l=e(a,s,l,h,c),_[n]=l,s=a,a=o,o=i,i=u;for(;b<v;)for(n=0,p=r.charCodeAt(g+(i=b)),l=++b;n<T;n+=2)u=_[n],_[n]=l=e(u,i,l,p,_[n+1]),i=u;return l}}()},41623:function(e,t,r){var n;e=r.nmd(e),(function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=1/0,u=0/0,c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],p="[object Arguments]",d="[object Array]",f="[object Boolean]",h="[object Date]",y="[object Error]",m="[object Function]",v="[object GeneratorFunction]",g="[object Map]",b="[object Number]",_="[object Object]",T="[object Promise]",E="[object RegExp]",O="[object Set]",S="[object String]",w="[object Symbol]",I="[object WeakMap]",N="[object ArrayBuffer]",A="[object DataView]",C="[object Float32Array]",P="[object Float64Array]",R="[object Int8Array]",D="[object Int16Array]",F="[object Int32Array]",j="[object Uint8Array]",L="[object Uint8ClampedArray]",x="[object Uint16Array]",M="[object Uint32Array]",k=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,U=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,q=RegExp(V.source),B=RegExp(G.source),W=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z=/^\w*$/,Y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J=/[\\^$.*+?()[\]{}|]/g,X=RegExp(J.source),Z=/^\s+/,ee=/\s/,et=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,er=/\{\n\/\* \[wrapped with (.+)\] \*/,en=/,? & /,ei=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eo=/[()=,{}\[\]\/\s]/,ea=/\\(\\)?/g,es=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,el=/\w*$/,eu=/^[-+]0x[0-9a-f]+$/i,ec=/^0b[01]+$/i,ep=/^\[object .+?Constructor\]$/,ed=/^0o[0-7]+$/i,ef=/^(?:0|[1-9]\d*)$/,eh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ey=/($^)/,em=/['\n\r\u2028\u2029\\]/g,ev="\ud800-\udfff",eg="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",eb="\\u2700-\\u27bf",e_="a-z\\xdf-\\xf6\\xf8-\\xff",eT="A-Z\\xc0-\\xd6\\xd8-\\xde",eE="\\ufe0e\\ufe0f",eO="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eS="[']",ew="["+eO+"]",eI="["+eg+"]",eN="["+e_+"]",eA="[^"+ev+eO+"\\d+"+eb+e_+eT+"]",eC="\ud83c[\udffb-\udfff]",eP="[^"+ev+"]",eR="(?:\ud83c[\udde6-\uddff]){2}",eD="[\ud800-\udbff][\udc00-\udfff]",eF="["+eT+"]",ej="\\u200d",eL="(?:"+eN+"|"+eA+")",ex="(?:"+eS+"(?:d|ll|m|re|s|t|ve))?",eM="(?:"+eS+"(?:D|LL|M|RE|S|T|VE))?",ek="(?:"+eI+"|"+eC+")?",e$="["+eE+"]?",eU="(?:"+ej+"(?:"+[eP,eR,eD].join("|")+")"+e$+ek+")*",eV=e$+ek+eU,eG="(?:"+["["+eb+"]",eR,eD].join("|")+")"+eV,eq="(?:"+[eP+eI+"?",eI,eR,eD,"["+ev+"]"].join("|")+")",eB=RegExp(eS,"g"),eW=RegExp(eI,"g"),eH=RegExp(eC+"(?="+eC+")|"+eq+eV,"g"),eQ=RegExp([eF+"?"+eN+"+"+ex+"(?="+[ew,eF,"$"].join("|")+")","(?:"+eF+"|"+eA+")+"+eM+"(?="+[ew,eF+eL,"$"].join("|")+")",eF+"?"+eL+"+"+ex,eF+"+"+eM,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",eG].join("|"),"g"),eK=RegExp("["+ej+ev+eg+eE+"]"),ez=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eY=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eJ=-1,eX={};eX[C]=eX[P]=eX[R]=eX[D]=eX[F]=eX[j]=eX[L]=eX[x]=eX[M]=!0,eX[p]=eX[d]=eX[N]=eX[f]=eX[A]=eX[h]=eX[y]=eX[m]=eX[g]=eX[b]=eX[_]=eX[E]=eX[O]=eX[S]=eX[I]=!1;var eZ={};eZ[p]=eZ[d]=eZ[N]=eZ[A]=eZ[f]=eZ[h]=eZ[C]=eZ[P]=eZ[R]=eZ[D]=eZ[F]=eZ[g]=eZ[b]=eZ[_]=eZ[E]=eZ[O]=eZ[S]=eZ[w]=eZ[j]=eZ[L]=eZ[x]=eZ[M]=!0,eZ[y]=eZ[m]=eZ[I]=!1;var e0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},e1=parseFloat,e2=parseInt,e4="object"==typeof global&&global&&global.Object===Object&&global,e3="object"==typeof self&&self&&self.Object===Object&&self,e5=e4||e3||Function("return this")(),e8=t&&!t.nodeType&&t,e6=e8&&e&&!e.nodeType&&e,e7=e6&&e6.exports===e8,e9=e7&&e4.process,te=function(){try{var e=e6&&e6.require&&e6.require("util").types;if(e)return e;return e9&&e9.binding&&e9.binding("util")}catch(e){}}(),tt=te&&te.isArrayBuffer,tr=te&&te.isDate,tn=te&&te.isMap,ti=te&&te.isRegExp,to=te&&te.isSet,ta=te&&te.isTypedArray;function ts(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function tl(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(n,a,r(a),e)}return n}function tu(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function tc(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function tp(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}function td(e,t){return!!(null==e?0:e.length)&&tE(e,t,0)>-1}function tf(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function th(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function ty(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function tm(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function tv(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function tg(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var tb=tI("length");function t_(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function tT(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return -1}function tE(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return -1}(e,t,r):tT(e,tS,r)}function tO(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return -1}function tS(e){return e!=e}function tw(e,t){var r=null==e?0:e.length;return r?tC(e,t)/r:u}function tI(e){return function(t){return null==t?i:t[e]}}function tN(e){return function(t){return null==e?i:e[t]}}function tA(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r}function tC(e,t){for(var r,n=-1,o=e.length;++n<o;){var a=t(e[n]);i!==a&&(r=i===r?a:r+a)}return r}function tP(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function tR(e){return e?e.slice(0,tQ(e)+1).replace(Z,""):e}function tD(e){return function(t){return e(t)}}function tF(e,t){return th(t,function(t){return e[t]})}function tj(e,t){return e.has(t)}function tL(e,t){for(var r=-1,n=e.length;++r<n&&tE(t,e[r],0)>-1;);return r}function tx(e,t){for(var r=e.length;r--&&tE(t,e[r],0)>-1;);return r}var tM=tN({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),tk=tN({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function t$(e){return"\\"+e0[e]}function tU(e){return eK.test(e)}function tV(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function tG(e,t){return function(r){return e(t(r))}}function tq(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r];(a===t||a===s)&&(e[r]=s,o[i++]=r)}return o}function tB(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function tW(e){return tU(e)?function(e){for(var t=eH.lastIndex=0;eH.test(e);)++t;return t}(e):tb(e)}function tH(e){return tU(e)?e.match(eH)||[]:e.split("")}function tQ(e){for(var t=e.length;t--&&ee.test(e.charAt(t)););return t}var tK=tN({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tz=function e(t){var r,n,ee,ev,eg=(t=null==t?e5:tz.defaults(e5.Object(),t,tz.pick(e5,eY))).Array,eb=t.Date,e_=t.Error,eT=t.Function,eE=t.Math,eO=t.Object,eS=t.RegExp,ew=t.String,eI=t.TypeError,eN=eg.prototype,eA=eT.prototype,eC=eO.prototype,eP=t["__core-js_shared__"],eR=eA.toString,eD=eC.hasOwnProperty,eF=0,ej=(r=/[^.]+$/.exec(eP&&eP.keys&&eP.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",eL=eC.toString,ex=eR.call(eO),eM=e5._,ek=eS("^"+eR.call(eD).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),e$=e7?t.Buffer:i,eU=t.Symbol,eV=t.Uint8Array,eG=e$?e$.allocUnsafe:i,eq=tG(eO.getPrototypeOf,eO),eH=eO.create,eK=eC.propertyIsEnumerable,e0=eN.splice,e4=eU?eU.isConcatSpreadable:i,e3=eU?eU.iterator:i,e8=eU?eU.toStringTag:i,e6=function(){try{var e=ih(eO,"defineProperty");return e({},"",{}),e}catch(e){}}(),e9=t.clearTimeout!==e5.clearTimeout&&t.clearTimeout,te=eb&&eb.now!==e5.Date.now&&eb.now,tb=t.setTimeout!==e5.setTimeout&&t.setTimeout,tN=eE.ceil,tY=eE.floor,tJ=eO.getOwnPropertySymbols,tX=e$?e$.isBuffer:i,tZ=t.isFinite,t0=eN.join,t1=tG(eO.keys,eO),t2=eE.max,t4=eE.min,t3=eb.now,t5=t.parseInt,t8=eE.random,t6=eN.reverse,t7=ih(t,"DataView"),t9=ih(t,"Map"),re=ih(t,"Promise"),rt=ih(t,"Set"),rr=ih(t,"WeakMap"),rn=ih(eO,"create"),ri=rr&&new rr,ro={},ra=i$(t7),rs=i$(t9),rl=i$(re),ru=i$(rt),rc=i$(rr),rp=eU?eU.prototype:i,rd=rp?rp.valueOf:i,rf=rp?rp.toString:i;function rh(e){if(oH(e)&&!oL(e)&&!(e instanceof rg)){if(e instanceof rv)return e;if(eD.call(e,"__wrapped__"))return iU(e)}return new rv(e)}var ry=function(){function e(){}return function(t){if(!oW(t))return{};if(eH)return eH(t);e.prototype=t;var r=new e;return e.prototype=i,r}}();function rm(){}function rv(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function rg(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function rb(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function r_(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function rT(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function rE(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new rT;++t<r;)this.add(e[t])}function rO(e){var t=this.__data__=new r_(e);this.size=t.size}function rS(e,t){var r=oL(e),n=!r&&oj(e),i=!r&&!n&&o$(e),o=!r&&!n&&!i&&o0(e),a=r||n||i||o,s=a?tP(e.length,ew):[],l=s.length;for(var u in e)(t||eD.call(e,u))&&!(a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||iT(u,l)))&&s.push(u);return s}function rw(e){var t=e.length;return t?e[nu(0,t-1)]:i}function rI(e,t,r){(i===r||oR(e[t],r))&&(i!==r||t in e)||rR(e,t,r)}function rN(e,t,r){var n=e[t];eD.call(e,t)&&oR(n,r)&&(i!==r||t in e)||rR(e,t,r)}function rA(e,t){for(var r=e.length;r--;)if(oR(e[r][0],t))return r;return -1}function rC(e,t,r,n){return rk(e,function(e,i,o){t(n,e,r(e),o)}),n}function rP(e,t){return e&&nV(t,ad(t),e)}function rR(e,t,r){"__proto__"==t&&e6?e6(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function rD(e,t){for(var r=-1,n=t.length,o=eg(n),a=null==e;++r<n;)o[r]=a?i:as(e,t[r]);return o}function rF(e,t,r){return e==e&&(i!==r&&(e=e<=r?e:r),i!==t&&(e=e>=t?e:t)),e}function rj(e,t,r,n,o,a){var s,l=1&t,u=2&t,c=4&t;if(r&&(s=o?r(e,n,o,a):r(e)),i!==s)return s;if(!oW(e))return e;var d=oL(e);if(d){if(y=e.length,T=new e.constructor(y),y&&"string"==typeof e[0]&&eD.call(e,"index")&&(T.index=e.index,T.input=e.input),s=T,!l)return nU(e,s)}else{var y,T,I,k,$,U=iv(e),V=U==m||U==v;if(o$(e))return nj(e,l);if(U==_||U==p||V&&!o){if(s=u||V?{}:ib(e),!l)return u?(I=($=s)&&nV(e,af(e),$),nV(e,im(e),I)):(k=rP(s,e),nV(e,iy(e),k))}else{if(!eZ[U])return o?e:{};s=function(e,t,r){var n,i,o=e.constructor;switch(t){case N:return nL(e);case f:case h:return new o(+e);case A:return n=r?nL(e.buffer):e.buffer,new e.constructor(n,e.byteOffset,e.byteLength);case C:case P:case R:case D:case F:case j:case L:case x:case M:return nx(e,r);case g:return new o;case b:case S:return new o(e);case E:return(i=new e.constructor(e.source,el.exec(e))).lastIndex=e.lastIndex,i;case O:return new o;case w:return rd?eO(rd.call(e)):{}}}(e,U,l)}}a||(a=new rO);var G=a.get(e);if(G)return G;a.set(e,s),oJ(e)?e.forEach(function(n){s.add(rj(n,t,r,n,e,a))}):oQ(e)&&e.forEach(function(n,i){s.set(i,rj(n,t,r,i,e,a))});var q=c?u?ia:io:u?af:ad,B=d?i:q(e);return tu(B||e,function(n,i){B&&(n=e[i=n]),rN(s,i,rj(n,t,r,i,e,a))}),s}function rL(e,t,r){var n=r.length;if(null==e)return!n;for(e=eO(e);n--;){var o=r[n],a=t[o],s=e[o];if(i===s&&!(o in e)||!a(s))return!1}return!0}function rx(e,t,r){if("function"!=typeof e)throw new eI(o);return iD(function(){e.apply(i,r)},t)}function rM(e,t,r,n){var i=-1,o=td,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;r&&(t=th(t,tD(r))),n?(o=tf,a=!1):t.length>=200&&(o=tj,a=!1,t=new rE(t));r:for(;++i<s;){var c=e[i],p=null==r?c:r(c);if(c=n||0!==c?c:0,a&&p==p){for(var d=u;d--;)if(t[d]===p)continue r;l.push(c)}else o(t,p,n)||l.push(c)}return l}rh.templateSettings={escape:W,evaluate:H,interpolate:Q,variable:"",imports:{_:rh}},rh.prototype=rm.prototype,rh.prototype.constructor=rh,rv.prototype=ry(rm.prototype),rv.prototype.constructor=rv,rg.prototype=ry(rm.prototype),rg.prototype.constructor=rg,rb.prototype.clear=function(){this.__data__=rn?rn(null):{},this.size=0},rb.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},rb.prototype.get=function(e){var t=this.__data__;if(rn){var r=t[e];return r===a?i:r}return eD.call(t,e)?t[e]:i},rb.prototype.has=function(e){var t=this.__data__;return rn?i!==t[e]:eD.call(t,e)},rb.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rn&&i===t?a:t,this},r_.prototype.clear=function(){this.__data__=[],this.size=0},r_.prototype.delete=function(e){var t=this.__data__,r=rA(t,e);return!(r<0)&&(r==t.length-1?t.pop():e0.call(t,r,1),--this.size,!0)},r_.prototype.get=function(e){var t=this.__data__,r=rA(t,e);return r<0?i:t[r][1]},r_.prototype.has=function(e){return rA(this.__data__,e)>-1},r_.prototype.set=function(e,t){var r=this.__data__,n=rA(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},rT.prototype.clear=function(){this.size=0,this.__data__={hash:new rb,map:new(t9||r_),string:new rb}},rT.prototype.delete=function(e){var t=ip(this,e).delete(e);return this.size-=t?1:0,t},rT.prototype.get=function(e){return ip(this,e).get(e)},rT.prototype.has=function(e){return ip(this,e).has(e)},rT.prototype.set=function(e,t){var r=ip(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},rE.prototype.add=rE.prototype.push=function(e){return this.__data__.set(e,a),this},rE.prototype.has=function(e){return this.__data__.has(e)},rO.prototype.clear=function(){this.__data__=new r_,this.size=0},rO.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},rO.prototype.get=function(e){return this.__data__.get(e)},rO.prototype.has=function(e){return this.__data__.has(e)},rO.prototype.set=function(e,t){var r=this.__data__;if(r instanceof r_){var n=r.__data__;if(!t9||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new rT(n)}return r.set(e,t),this.size=r.size,this};var rk=nB(rH),r$=nB(rQ,!0);function rU(e,t){var r=!0;return rk(e,function(e,n,i){return r=!!t(e,n,i)}),r}function rV(e,t,r){for(var n=-1,o=e.length;++n<o;){var a=e[n],s=t(a);if(null!=s&&(i===l?s==s&&!oZ(s):r(s,l)))var l=s,u=a}return u}function rG(e,t){var r=[];return rk(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function rq(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=i_),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?rq(s,t-1,r,n,i):ty(i,s):n||(i[i.length]=s)}return i}var rB=nW(),rW=nW(!0);function rH(e,t){return e&&rB(e,t,ad)}function rQ(e,t){return e&&rW(e,t,ad)}function rK(e,t){return tp(t,function(t){return oG(e[t])})}function rz(e,t){t=nR(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[ik(t[r++])];return r&&r==n?e:i}function rY(e,t,r){var n=t(e);return oL(e)?n:ty(n,r(e))}function rJ(e){return null==e?i===e?"[object Undefined]":"[object Null]":e8&&e8 in eO(e)?function(e){var t=eD.call(e,e8),r=e[e8];try{e[e8]=i;var n=!0}catch(e){}var o=eL.call(e);return n&&(t?e[e8]=r:delete e[e8]),o}(e):eL.call(e)}function rX(e,t){return e>t}function rZ(e,t){return null!=e&&eD.call(e,t)}function r0(e,t){return null!=e&&t in eO(e)}function r1(e,t,r){for(var n=r?tf:td,o=e[0].length,a=e.length,s=a,l=eg(a),u=1/0,c=[];s--;){var p=e[s];s&&t&&(p=th(p,tD(t))),u=t4(p.length,u),l[s]=!r&&(t||o>=120&&p.length>=120)?new rE(s&&p):i}p=e[0];var d=-1,f=l[0];r:for(;++d<o&&c.length<u;){var h=p[d],y=t?t(h):h;if(h=r||0!==h?h:0,!(f?tj(f,y):n(c,y,r))){for(s=a;--s;){var m=l[s];if(!(m?tj(m,y):n(e[s],y,r)))continue r}f&&f.push(y),c.push(h)}}return c}function r2(e,t,r){t=nR(t,e);var n=null==(e=iC(e,t))?e:e[ik(iJ(t))];return null==n?i:ts(n,e,r)}function r4(e){return oH(e)&&rJ(e)==p}function r3(e,t,r,n,o){return e===t||(null!=e&&null!=t&&(oH(e)||oH(t))?function(e,t,r,n,o,a){var s=oL(e),l=oL(t),u=s?d:iv(e),c=l?d:iv(t);u=u==p?_:u,c=c==p?_:c;var m=u==_,v=c==_,T=u==c;if(T&&o$(e)){if(!o$(t))return!1;s=!0,m=!1}if(T&&!m)return a||(a=new rO),s||o0(e)?ir(e,t,r,n,o,a):function(e,t,r,n,i,o,a){switch(r){case A:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case N:if(e.byteLength!=t.byteLength||!o(new eV(e),new eV(t)))break;return!0;case f:case h:case b:return oR(+e,+t);case y:return e.name==t.name&&e.message==t.message;case E:case S:return e==t+"";case g:var s=tV;case O:var l=1&n;if(s||(s=tB),e.size!=t.size&&!l)break;var u=a.get(e);if(u)return u==t;n|=2,a.set(e,t);var c=ir(s(e),s(t),n,i,o,a);return a.delete(e),c;case w:if(rd)return rd.call(e)==rd.call(t)}return!1}(e,t,u,r,n,o,a);if(!(1&r)){var I=m&&eD.call(e,"__wrapped__"),C=v&&eD.call(t,"__wrapped__");if(I||C){var P=I?e.value():e,R=C?t.value():t;return a||(a=new rO),o(P,R,r,n,a)}}return!!T&&(a||(a=new rO),function(e,t,r,n,o,a){var s=1&r,l=io(e),u=l.length;if(u!=io(t).length&&!s)return!1;for(var c=u;c--;){var p=l[c];if(!(s?p in t:eD.call(t,p)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var h=!0;a.set(e,t),a.set(t,e);for(var y=s;++c<u;){var m=e[p=l[c]],v=t[p];if(n)var g=s?n(v,m,p,t,e,a):n(m,v,p,e,t,a);if(!(i===g?m===v||o(m,v,r,n,a):g)){h=!1;break}y||(y="constructor"==p)}if(h&&!y){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(h=!1)}return a.delete(e),a.delete(t),h}(e,t,r,n,o,a))}(e,t,r,n,r3,o):e!=e&&t!=t)}function r5(e,t,r,n){var o=r.length,a=o,s=!n;if(null==e)return!a;for(e=eO(e);o--;){var l=r[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<a;){var u=(l=r[o])[0],c=e[u],p=l[1];if(s&&l[2]){if(i===c&&!(u in e))return!1}else{var d=new rO;if(n)var f=n(c,p,u,e,t,d);if(!(i===f?r3(p,c,3,n,d):f))return!1}}return!0}function r8(e){return!(!oW(e)||ej&&ej in e)&&(oG(e)?ek:ep).test(i$(e))}function r6(e){return"function"==typeof e?e:null==e?ak:"object"==typeof e?oL(e)?nr(e[0],e[1]):nt(e):aQ(e)}function r7(e){if(!iI(e))return t1(e);var t=[];for(var r in eO(e))eD.call(e,r)&&"constructor"!=r&&t.push(r);return t}function r9(e,t){return e<t}function ne(e,t){var r=-1,n=oM(e)?eg(e.length):[];return rk(e,function(e,i,o){n[++r]=t(e,i,o)}),n}function nt(e){var t=id(e);return 1==t.length&&t[0][2]?iN(t[0][0],t[0][1]):function(r){return r===e||r5(r,e,t)}}function nr(e,t){var r;return iO(e)&&(r=t)==r&&!oW(r)?iN(ik(e),t):function(r){var n=as(r,e);return i===n&&n===t?al(r,e):r3(t,n,3)}}function nn(e,t,r,n,o){e!==t&&rB(t,function(a,s){if(o||(o=new rO),oW(a))(function(e,t,r,n,o,a,s){var l=iP(e,r),u=iP(t,r),c=s.get(u);if(c){rI(e,r,c);return}var p=a?a(l,u,r+"",e,t,s):i,d=i===p;if(d){var f=oL(u),h=!f&&o$(u),y=!f&&!h&&o0(u);p=u,f||h||y?oL(l)?p=l:ok(l)?p=nU(l):h?(d=!1,p=nj(u,!0)):y?(d=!1,p=nx(u,!0)):p=[]:oz(u)||oj(u)?(p=l,oj(l)?p=o7(l):(!oW(l)||oG(l))&&(p=ib(u))):d=!1}d&&(s.set(u,p),o(p,u,n,a,s),s.delete(u)),rI(e,r,p)})(e,t,s,r,nn,n,o);else{var l=n?n(iP(e,s),a,s+"",e,t,o):i;i===l&&(l=a),rI(e,s,l)}},af)}function ni(e,t){var r=e.length;if(r)return iT(t+=t<0?r:0,r)?e[t]:i}function no(e,t,r){t=t.length?th(t,function(e){return oL(e)?function(t){return rz(t,1===e.length?e[0]:e)}:e}):[ak];var n=-1;return t=th(t,tD(ic())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(ne(e,function(e,r,i){return{criteria:th(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;++n<a;){var l=nM(i[n],o[n]);if(l){if(n>=s)return l;return l*("desc"==r[n]?-1:1)}}return e.index-t.index}(e,t,r)})}function na(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=rz(e,a);r(s,a)&&nd(o,nR(a,e),s)}return o}function ns(e,t,r,n){var i=n?tO:tE,o=-1,a=t.length,s=e;for(e===t&&(t=nU(t)),r&&(s=th(e,tD(r)));++o<a;)for(var l=0,u=t[o],c=r?r(u):u;(l=i(s,c,l,n))>-1;)s!==e&&e0.call(s,l,1),e0.call(e,l,1);return e}function nl(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;iT(i)?e0.call(e,i,1):nO(e,i)}}return e}function nu(e,t){return e+tY(t8()*(t-e+1))}function nc(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do t%2&&(r+=e),(t=tY(t/2))&&(e+=e);while(t);return r}function np(e,t){return iF(iA(e,t,ak),e+"")}function nd(e,t,r,n){if(!oW(e))return e;t=nR(t,e);for(var o=-1,a=t.length,s=a-1,l=e;null!=l&&++o<a;){var u=ik(t[o]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)break;if(o!=s){var p=l[u];c=n?n(p,u,l):i,i===c&&(c=oW(p)?p:iT(t[o+1])?[]:{})}rN(l,u,c),l=l[u]}return e}var nf=ri?function(e,t){return ri.set(e,t),e}:ak,nh=e6?function(e,t){return e6(e,"toString",{configurable:!0,enumerable:!1,value:aL(t),writable:!0})}:ak;function ny(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=eg(i);++n<i;)o[n]=e[n+t];return o}function nm(e,t){var r;return rk(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}function nv(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,a=e[o];null!==a&&!oZ(a)&&(r?a<=t:a<t)?n=o+1:i=o}return i}return ng(e,t,ak,r)}function ng(e,t,r,n){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=r(t))!=t,l=null===t,u=oZ(t),c=i===t;o<a;){var p=tY((o+a)/2),d=r(e[p]),f=i!==d,h=null===d,y=d==d,m=oZ(d);if(s)var v=n||y;else v=c?y&&(n||f):l?y&&f&&(n||!h):u?y&&f&&!h&&(n||!m):!h&&!m&&(n?d<=t:d<t);v?o=p+1:a=p}return t4(a,4294967294)}function nb(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r],s=t?t(a):a;if(!r||!oR(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function n_(e){return"number"==typeof e?e:oZ(e)?u:+e}function nT(e){if("string"==typeof e)return e;if(oL(e))return th(e,nT)+"";if(oZ(e))return rf?rf.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}function nE(e,t,r){var n=-1,i=td,o=e.length,a=!0,s=[],l=s;if(r)a=!1,i=tf;else if(o>=200){var u=t?null:n8(e);if(u)return tB(u);a=!1,i=tj,l=new rE}else l=t?[]:s;r:for(;++n<o;){var c=e[n],p=t?t(c):c;if(c=r||0!==c?c:0,a&&p==p){for(var d=l.length;d--;)if(l[d]===p)continue r;t&&l.push(p),s.push(c)}else i(l,p,r)||(l!==s&&l.push(p),s.push(c))}return s}function nO(e,t){return t=nR(t,e),null==(e=iC(e,t))||delete e[ik(iJ(t))]}function nS(e,t,r,n){return nd(e,t,r(rz(e,t)),n)}function nw(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?ny(e,n?0:o,n?o+1:i):ny(e,n?o+1:0,n?i:o)}function nI(e,t){var r=e;return r instanceof rg&&(r=r.value()),tm(t,function(e,t){return t.func.apply(t.thisArg,ty([e],t.args))},r)}function nN(e,t,r){var n=e.length;if(n<2)return n?nE(e[0]):[];for(var i=-1,o=eg(n);++i<n;)for(var a=e[i],s=-1;++s<n;)s!=i&&(o[i]=rM(o[i]||a,e[s],t,r));return nE(rq(o,1),t,r)}function nA(e,t,r){for(var n=-1,o=e.length,a=t.length,s={};++n<o;){var l=n<a?t[n]:i;r(s,e[n],l)}return s}function nC(e){return ok(e)?e:[]}function nP(e){return"function"==typeof e?e:ak}function nR(e,t){return oL(e)?e:iO(e,t)?[e]:iM(o9(e))}function nD(e,t,r){var n=e.length;return r=i===r?n:r,!t&&r>=n?e:ny(e,t,r)}var nF=e9||function(e){return e5.clearTimeout(e)};function nj(e,t){if(t)return e.slice();var r=e.length,n=eG?eG(r):new e.constructor(r);return e.copy(n),n}function nL(e){var t=new e.constructor(e.byteLength);return new eV(t).set(new eV(e)),t}function nx(e,t){var r=t?nL(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function nM(e,t){if(e!==t){var r=i!==e,n=null===e,o=e==e,a=oZ(e),s=i!==t,l=null===t,u=t==t,c=oZ(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||n&&s&&u||!r&&u||!o)return 1;if(!n&&!a&&!c&&e<t||c&&r&&o&&!n&&!a||l&&r&&o||!s&&o||!u)return -1}return 0}function nk(e,t,r,n){for(var i=-1,o=e.length,a=r.length,s=-1,l=t.length,u=t2(o-a,0),c=eg(l+u),p=!n;++s<l;)c[s]=t[s];for(;++i<a;)(p||i<o)&&(c[r[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}function n$(e,t,r,n){for(var i=-1,o=e.length,a=-1,s=r.length,l=-1,u=t.length,c=t2(o-s,0),p=eg(c+u),d=!n;++i<c;)p[i]=e[i];for(var f=i;++l<u;)p[f+l]=t[l];for(;++a<s;)(d||i<o)&&(p[f+r[a]]=e[i++]);return p}function nU(e,t){var r=-1,n=e.length;for(t||(t=eg(n));++r<n;)t[r]=e[r];return t}function nV(e,t,r,n){var o=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var l=t[a],u=n?n(r[l],e[l],l,r,e):i;i===u&&(u=e[l]),o?rR(r,l,u):rN(r,l,u)}return r}function nG(e,t){return function(r,n){var i=oL(r)?tl:rC,o=t?t():{};return i(r,e,ic(n,2),o)}}function nq(e){return np(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:i,s=o>2?r[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&iE(r[0],r[1],s)&&(a=o<3?i:a,o=1),t=eO(t);++n<o;){var l=r[n];l&&e(t,l,n,a)}return t})}function nB(e,t){return function(r,n){if(null==r)return r;if(!oM(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=eO(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}}function nW(e){return function(t,r,n){for(var i=-1,o=eO(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===r(o[l],l,o))break}return t}}function nH(e){return function(t){var r=tU(t=o9(t))?tH(t):i,n=r?r[0]:t.charAt(0),o=r?nD(r,1).join(""):t.slice(1);return n[e]()+o}}function nQ(e){return function(t){return tm(aD(aS(t).replace(eB,"")),e,"")}}function nK(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=ry(e.prototype),n=e.apply(r,t);return oW(n)?n:r}}function nz(e){return function(t,r,n){var o=eO(t);if(!oM(t)){var a=ic(r,3);t=ad(t),r=function(e){return a(o[e],e,o)}}var s=e(t,r,n);return s>-1?o[a?t[s]:s]:i}}function nY(e){return ii(function(t){var r=t.length,n=r,a=rv.prototype.thru;for(e&&t.reverse();n--;){var s=t[n];if("function"!=typeof s)throw new eI(o);if(a&&!l&&"wrapper"==il(s))var l=new rv([],!0)}for(n=l?n:r;++n<r;){var u=il(s=t[n]),c="wrapper"==u?is(s):i;l=c&&iS(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[il(c[0])].apply(l,c[3]):1==s.length&&iS(s)?l[u]():l.thru(s)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&oL(n))return l.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}})}function nJ(e,t,r,n,o,a,s,l,u,c){var p=128&t,d=1&t,f=2&t,h=24&t,y=512&t,m=f?i:nK(e);return function v(){for(var g=arguments.length,b=eg(g),_=g;_--;)b[_]=arguments[_];if(h)var T=iu(v),E=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(b,T);if(n&&(b=nk(b,n,o,h)),a&&(b=n$(b,a,s,h)),g-=E,h&&g<c){var O=tq(b,T);return n3(e,t,nJ,v.placeholder,r,b,O,l,u,c-g)}var S=d?r:this,w=f?S[e]:e;return g=b.length,l?b=function(e,t){for(var r=e.length,n=t4(t.length,r),o=nU(e);n--;){var a=t[n];e[n]=iT(a,r)?o[a]:i}return e}(b,l):y&&g>1&&b.reverse(),p&&u<g&&(b.length=u),this&&this!==e5&&this instanceof v&&(w=m||nK(w)),w.apply(S,b)}}function nX(e,t){return function(r,n){var i,o;return i=t(n),o={},rH(r,function(t,r,n){e(o,i(t),r,n)}),o}}function nZ(e,t){return function(r,n){var o;if(i===r&&i===n)return t;if(i!==r&&(o=r),i!==n){if(i===o)return n;"string"==typeof r||"string"==typeof n?(r=nT(r),n=nT(n)):(r=n_(r),n=n_(n)),o=e(r,n)}return o}}function n0(e){return ii(function(t){return t=th(t,tD(ic())),np(function(r){var n=this;return e(t,function(e){return ts(e,n,r)})})})}function n1(e,t){var r=(t=i===t?" ":nT(t)).length;if(r<2)return r?nc(t,e):t;var n=nc(t,tN(e/tW(t)));return tU(t)?nD(tH(n),0,e).join(""):n.slice(0,e)}function n2(e){return function(t,r,n){return n&&"number"!=typeof n&&iE(t,r,n)&&(r=n=i),t=o3(t),i===r?(r=t,t=0):r=o3(r),n=i===n?t<r?1:-1:o3(n),function(e,t,r,n){for(var i=-1,o=t2(tN((t-e)/(r||1)),0),a=eg(o);o--;)a[n?o:++i]=e,e+=r;return a}(t,r,n,e)}}function n4(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=o6(t),r=o6(r)),e(t,r)}}function n3(e,t,r,n,o,a,s,l,u,c){var p=8&t,d=p?s:i,f=p?i:s,h=p?a:i,y=p?i:a;t|=p?32:64,4&(t&=~(p?64:32))||(t&=-4);var m=[e,t,o,h,d,y,f,l,u,c],v=r.apply(i,m);return iS(e)&&iR(v,m),v.placeholder=n,ij(v,e,t)}function n5(e){var t=eE[e];return function(e,r){if(e=o6(e),(r=null==r?0:t4(o5(r),292))&&tZ(e)){var n=(o9(e)+"e").split("e");return+((n=(o9(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var n8=rt&&1/tB(new rt([,-0]))[1]==l?function(e){return new rt(e)}:aq;function n6(e){return function(t){var r,n,i=iv(t);return i==g?tV(t):i==O?(r=-1,n=Array(t.size),t.forEach(function(e){n[++r]=[e,e]}),n):th(e(t),function(e){return[e,t[e]]})}}function n7(e,t,r,n,a,l,u,c){var p=2&t;if(!p&&"function"!=typeof e)throw new eI(o);var d=n?n.length:0;if(d||(t&=-97,n=a=i),u=i===u?u:t2(o5(u),0),c=i===c?c:o5(c),d-=a?a.length:0,64&t){var f=n,h=a;n=a=i}var y=p?i:is(e),m=[e,t,r,n,a,f,h,l,u,c];if(y&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<131,a=128==n&&8==r||128==n&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(o||a){1&n&&(e[2]=t[2],i|=1&r?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?nk(u,l,t[4]):l,e[4]=u?tq(e[3],s):t[4]}(l=t[5])&&(u=e[5],e[5]=u?n$(u,l,t[6]):l,e[6]=u?tq(e[5],s):t[6]),(l=t[7])&&(e[7]=l),128&n&&(e[8]=null==e[8]?t[8]:t4(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}}(m,y),e=m[0],t=m[1],r=m[2],n=m[3],a=m[4],(c=m[9]=i===m[9]?p?0:e.length:t2(m[9]-d,0))||!(24&t)||(t&=-25),t&&1!=t)8==t||16==t?(v=e,g=t,b=c,_=nK(v),D=function e(){for(var t=arguments.length,r=eg(t),n=t,o=iu(e);n--;)r[n]=arguments[n];var a=t<3&&r[0]!==o&&r[t-1]!==o?[]:tq(r,o);return(t-=a.length)<b?n3(v,g,nJ,e.placeholder,i,r,a,i,i,b-t):ts(this&&this!==e5&&this instanceof e?_:v,this,r)}):32!=t&&33!=t||a.length?D=nJ.apply(i,m):(T=e,E=t,O=r,S=n,w=1&E,I=nK(T),D=function e(){for(var t=-1,r=arguments.length,n=-1,i=S.length,o=eg(i+r),a=this&&this!==e5&&this instanceof e?I:T;++n<i;)o[n]=S[n];for(;r--;)o[n++]=arguments[++t];return ts(a,w?O:this,o)});else var v,g,b,_,T,E,O,S,w,I,N,A,C,P,R,D=(N=e,A=t,C=r,P=1&A,R=nK(N),function e(){return(this&&this!==e5&&this instanceof e?R:N).apply(P?C:this,arguments)});return ij((y?nf:iR)(D,m),e,t)}function n9(e,t,r,n){return i===e||oR(e,eC[r])&&!eD.call(n,r)?t:e}function ie(e,t,r,n,o,a){return oW(e)&&oW(t)&&(a.set(t,e),nn(e,t,i,ie,a),a.delete(t)),e}function it(e){return oz(e)?i:e}function ir(e,t,r,n,o,a){var s=1&r,l=e.length,u=t.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(e),p=a.get(t);if(c&&p)return c==t&&p==e;var d=-1,f=!0,h=2&r?new rE:i;for(a.set(e,t),a.set(t,e);++d<l;){var y=e[d],m=t[d];if(n)var v=s?n(m,y,d,t,e,a):n(y,m,d,e,t,a);if(i!==v){if(v)continue;f=!1;break}if(h){if(!tg(t,function(e,t){if(!tj(h,t)&&(y===e||o(y,e,r,n,a)))return h.push(t)})){f=!1;break}}else if(!(y===m||o(y,m,r,n,a))){f=!1;break}}return a.delete(e),a.delete(t),f}function ii(e){return iF(iA(e,i,iH),e+"")}function io(e){return rY(e,ad,iy)}function ia(e){return rY(e,af,im)}var is=ri?function(e){return ri.get(e)}:aq;function il(e){for(var t=e.name+"",r=ro[t],n=eD.call(ro,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function iu(e){return(eD.call(rh,"placeholder")?rh:e).placeholder}function ic(){var e=rh.iteratee||a$;return e=e===a$?r6:e,arguments.length?e(arguments[0],arguments[1]):e}function ip(e,t){var r,n=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function id(e){for(var t=ad(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,i==i&&!oW(i)]}return t}function ih(e,t){var r=null==e?i:e[t];return r8(r)?r:i}var iy=tJ?function(e){return null==e?[]:tp(tJ(e=eO(e)),function(t){return eK.call(e,t)})}:aY,im=tJ?function(e){for(var t=[];e;)ty(t,iy(e)),e=eq(e);return t}:aY,iv=rJ;function ig(e,t,r){t=nR(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var a=ik(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&oB(i)&&iT(a,i)&&(oL(e)||oj(e))}function ib(e){return"function"!=typeof e.constructor||iI(e)?{}:ry(eq(e))}function i_(e){return oL(e)||oj(e)||!!(e4&&e&&e[e4])}function iT(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&ef.test(e))&&e>-1&&e%1==0&&e<t}function iE(e,t,r){if(!oW(r))return!1;var n=typeof t;return("number"==n?!!(oM(r)&&iT(t,r.length)):"string"==n&&t in r)&&oR(r[t],e)}function iO(e,t){if(oL(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||oZ(e))||z.test(e)||!K.test(e)||null!=t&&e in eO(t)}function iS(e){var t=il(e),r=rh[t];if("function"!=typeof r||!(t in rg.prototype))return!1;if(e===r)return!0;var n=is(r);return!!n&&e===n[0]}(t7&&iv(new t7(new ArrayBuffer(1)))!=A||t9&&iv(new t9)!=g||re&&iv(re.resolve())!=T||rt&&iv(new rt)!=O||rr&&iv(new rr)!=I)&&(iv=function(e){var t=rJ(e),r=t==_?e.constructor:i,n=r?i$(r):"";if(n)switch(n){case ra:return A;case rs:return g;case rl:return T;case ru:return O;case rc:return I}return t});var iw=eP?oG:aJ;function iI(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||eC)}function iN(e,t){return function(r){return null!=r&&r[e]===t&&(i!==t||e in eO(r))}}function iA(e,t,r){return t=t2(i===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=t2(n.length-t,0),a=eg(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=eg(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),ts(e,this,s)}}function iC(e,t){return t.length<2?e:rz(e,ny(t,0,-1))}function iP(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var iR=iL(nf),iD=tb||function(e,t){return e5.setTimeout(e,t)},iF=iL(nh);function ij(e,t,r){var n,i,o=t+"";return iF(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(et,"{\n/* [wrapped with "+t+"] */\n")}(o,(n=(i=o.match(er))?i[1].split(en):[],tu(c,function(e){var t="_."+e[0];r&e[1]&&!td(n,t)&&n.push(t)}),n.sort())))}function iL(e){var t=0,r=0;return function(){var n=t3(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function ix(e,t){var r=-1,n=e.length,o=n-1;for(t=i===t?n:t;++r<t;){var a=nu(r,o),s=e[a];e[a]=e[r],e[r]=s}return e.length=t,e}var iM=(ee=(n=ow(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Y,function(e,r,n,i){t.push(n?i.replace(ea,"$1"):r||e)}),t},function(e){return 500===ee.size&&ee.clear(),e})).cache,n);function ik(e){if("string"==typeof e||oZ(e))return e;var t=e+"";return"0"==t&&1/e==-l?"-0":t}function i$(e){if(null!=e){try{return eR.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function iU(e){if(e instanceof rg)return e.clone();var t=new rv(e.__wrapped__,e.__chain__);return t.__actions__=nU(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var iV=np(function(e,t){return ok(e)?rM(e,rq(t,1,ok,!0)):[]}),iG=np(function(e,t){var r=iJ(t);return ok(r)&&(r=i),ok(e)?rM(e,rq(t,1,ok,!0),ic(r,2)):[]}),iq=np(function(e,t){var r=iJ(t);return ok(r)&&(r=i),ok(e)?rM(e,rq(t,1,ok,!0),i,r):[]});function iB(e,t,r){var n=null==e?0:e.length;if(!n)return -1;var i=null==r?0:o5(r);return i<0&&(i=t2(n+i,0)),tT(e,ic(t,3),i)}function iW(e,t,r){var n=null==e?0:e.length;if(!n)return -1;var o=n-1;return i!==r&&(o=o5(r),o=r<0?t2(n+o,0):t4(o,n-1)),tT(e,ic(t,3),o,!0)}function iH(e){return(null==e?0:e.length)?rq(e,1):[]}function iQ(e){return e&&e.length?e[0]:i}var iK=np(function(e){var t=th(e,nC);return t.length&&t[0]===e[0]?r1(t):[]}),iz=np(function(e){var t=iJ(e),r=th(e,nC);return t===iJ(r)?t=i:r.pop(),r.length&&r[0]===e[0]?r1(r,ic(t,2)):[]}),iY=np(function(e){var t=iJ(e),r=th(e,nC);return(t="function"==typeof t?t:i)&&r.pop(),r.length&&r[0]===e[0]?r1(r,i,t):[]});function iJ(e){var t=null==e?0:e.length;return t?e[t-1]:i}var iX=np(iZ);function iZ(e,t){return e&&e.length&&t&&t.length?ns(e,t):e}var i0=ii(function(e,t){var r=null==e?0:e.length,n=rD(e,t);return nl(e,th(t,function(e){return iT(e,r)?+e:e}).sort(nM)),n});function i1(e){return null==e?e:t6.call(e)}var i2=np(function(e){return nE(rq(e,1,ok,!0))}),i4=np(function(e){var t=iJ(e);return ok(t)&&(t=i),nE(rq(e,1,ok,!0),ic(t,2))}),i3=np(function(e){var t=iJ(e);return t="function"==typeof t?t:i,nE(rq(e,1,ok,!0),i,t)});function i5(e){if(!(e&&e.length))return[];var t=0;return e=tp(e,function(e){if(ok(e))return t=t2(e.length,t),!0}),tP(t,function(t){return th(e,tI(t))})}function i8(e,t){if(!(e&&e.length))return[];var r=i5(e);return null==t?r:th(r,function(e){return ts(t,i,e)})}var i6=np(function(e,t){return ok(e)?rM(e,t):[]}),i7=np(function(e){return nN(tp(e,ok))}),i9=np(function(e){var t=iJ(e);return ok(t)&&(t=i),nN(tp(e,ok),ic(t,2))}),oe=np(function(e){var t=iJ(e);return t="function"==typeof t?t:i,nN(tp(e,ok),i,t)}),ot=np(i5),or=np(function(e){var t=e.length,r=t>1?e[t-1]:i;return r="function"==typeof r?(e.pop(),r):i,i8(e,r)});function on(e){var t=rh(e);return t.__chain__=!0,t}function oi(e,t){return t(e)}var oo=ii(function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,o=function(t){return rD(t,e)};return!(t>1)&&!this.__actions__.length&&n instanceof rg&&iT(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:oi,args:[o],thisArg:i}),new rv(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(o)}),oa=nG(function(e,t,r){eD.call(e,r)?++e[r]:rR(e,r,1)}),os=nz(iB),ol=nz(iW);function ou(e,t){return(oL(e)?tu:rk)(e,ic(t,3))}function oc(e,t){return(oL(e)?function(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}:r$)(e,ic(t,3))}var op=nG(function(e,t,r){eD.call(e,r)?e[r].push(t):rR(e,r,[t])}),od=np(function(e,t,r){var n=-1,i="function"==typeof t,o=oM(e)?eg(e.length):[];return rk(e,function(e){o[++n]=i?ts(t,e,r):r2(e,t,r)}),o}),of=nG(function(e,t,r){rR(e,r,t)});function oh(e,t){return(oL(e)?th:ne)(e,ic(t,3))}var oy=nG(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),om=np(function(e,t){if(null==e)return[];var r=t.length;return r>1&&iE(e,t[0],t[1])?t=[]:r>2&&iE(t[0],t[1],t[2])&&(t=[t[0]]),no(e,rq(t,1),[])}),ov=te||function(){return e5.Date.now()};function og(e,t,r){return t=r?i:t,t=e&&null==t?e.length:t,n7(e,128,i,i,i,i,t)}function ob(e,t){var r;if("function"!=typeof t)throw new eI(o);return e=o5(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=i),r}}var o_=np(function(e,t,r){var n=1;if(r.length){var i=tq(r,iu(o_));n|=32}return n7(e,n,t,r,i)}),oT=np(function(e,t,r){var n=3;if(r.length){var i=tq(r,iu(oT));n|=32}return n7(t,n,e,r,i)});function oE(e,t,r){var n,a,s,l,u,c,p=0,d=!1,f=!1,h=!0;if("function"!=typeof e)throw new eI(o);function y(t){var r=n,o=a;return n=a=i,p=t,l=e.apply(o,r)}function m(e){var r=e-c,n=e-p;return i===c||r>=t||r<0||f&&n>=s}function v(){var e,r,n,i=ov();if(m(i))return g(i);u=iD(v,(e=i-c,r=i-p,n=t-e,f?t4(n,s-r):n))}function g(e){return(u=i,h&&n)?y(e):(n=a=i,l)}function b(){var e,r=ov(),o=m(r);if(n=arguments,a=this,c=r,o){if(i===u)return p=e=c,u=iD(v,t),d?y(e):l;if(f)return nF(u),u=iD(v,t),y(c)}return i===u&&(u=iD(v,t)),l}return t=o6(t)||0,oW(r)&&(d=!!r.leading,s=(f="maxWait"in r)?t2(o6(r.maxWait)||0,t):s,h="trailing"in r?!!r.trailing:h),b.cancel=function(){i!==u&&nF(u),p=0,n=c=a=u=i},b.flush=function(){return i===u?l:g(ov())},b}var oO=np(function(e,t){return rx(e,1,t)}),oS=np(function(e,t,r){return rx(e,o6(t)||0,r)});function ow(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new eI(o);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(ow.Cache||rT),r}function oI(e){if("function"!=typeof e)throw new eI(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ow.Cache=rT;var oN=np(function(e,t){var r=(t=1==t.length&&oL(t[0])?th(t[0],tD(ic())):th(rq(t,1),tD(ic()))).length;return np(function(n){for(var i=-1,o=t4(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return ts(e,this,n)})}),oA=np(function(e,t){var r=tq(t,iu(oA));return n7(e,32,i,t,r)}),oC=np(function(e,t){var r=tq(t,iu(oC));return n7(e,64,i,t,r)}),oP=ii(function(e,t){return n7(e,256,i,i,i,t)});function oR(e,t){return e===t||e!=e&&t!=t}var oD=n4(rX),oF=n4(function(e,t){return e>=t}),oj=r4(function(){return arguments}())?r4:function(e){return oH(e)&&eD.call(e,"callee")&&!eK.call(e,"callee")},oL=eg.isArray,ox=tt?tD(tt):function(e){return oH(e)&&rJ(e)==N};function oM(e){return null!=e&&oB(e.length)&&!oG(e)}function ok(e){return oH(e)&&oM(e)}var o$=tX||aJ,oU=tr?tD(tr):function(e){return oH(e)&&rJ(e)==h};function oV(e){if(!oH(e))return!1;var t=rJ(e);return t==y||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!oz(e)}function oG(e){if(!oW(e))return!1;var t=rJ(e);return t==m||t==v||"[object AsyncFunction]"==t||"[object Proxy]"==t}function oq(e){return"number"==typeof e&&e==o5(e)}function oB(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function oW(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function oH(e){return null!=e&&"object"==typeof e}var oQ=tn?tD(tn):function(e){return oH(e)&&iv(e)==g};function oK(e){return"number"==typeof e||oH(e)&&rJ(e)==b}function oz(e){if(!oH(e)||rJ(e)!=_)return!1;var t=eq(e);if(null===t)return!0;var r=eD.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&eR.call(r)==ex}var oY=ti?tD(ti):function(e){return oH(e)&&rJ(e)==E},oJ=to?tD(to):function(e){return oH(e)&&iv(e)==O};function oX(e){return"string"==typeof e||!oL(e)&&oH(e)&&rJ(e)==S}function oZ(e){return"symbol"==typeof e||oH(e)&&rJ(e)==w}var o0=ta?tD(ta):function(e){return oH(e)&&oB(e.length)&&!!eX[rJ(e)]},o1=n4(r9),o2=n4(function(e,t){return e<=t});function o4(e){if(!e)return[];if(oM(e))return oX(e)?tH(e):nU(e);if(e3&&e[e3])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[e3]());var t=iv(e);return(t==g?tV:t==O?tB:aT)(e)}function o3(e){return e?(e=o6(e))===l||e===-l?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}function o5(e){var t=o3(e),r=t%1;return t==t?r?t-r:t:0}function o8(e){return e?rF(o5(e),0,4294967295):0}function o6(e){if("number"==typeof e)return e;if(oZ(e))return u;if(oW(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=oW(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=tR(e);var r=ec.test(e);return r||ed.test(e)?e2(e.slice(2),r?2:8):eu.test(e)?u:+e}function o7(e){return nV(e,af(e))}function o9(e){return null==e?"":nT(e)}var ae=nq(function(e,t){if(iI(t)||oM(t)){nV(t,ad(t),e);return}for(var r in t)eD.call(t,r)&&rN(e,r,t[r])}),at=nq(function(e,t){nV(t,af(t),e)}),ar=nq(function(e,t,r,n){nV(t,af(t),e,n)}),an=nq(function(e,t,r,n){nV(t,ad(t),e,n)}),ai=ii(rD),ao=np(function(e,t){e=eO(e);var r=-1,n=t.length,o=n>2?t[2]:i;for(o&&iE(t[0],t[1],o)&&(n=1);++r<n;)for(var a=t[r],s=af(a),l=-1,u=s.length;++l<u;){var c=s[l],p=e[c];(i===p||oR(p,eC[c])&&!eD.call(e,c))&&(e[c]=a[c])}return e}),aa=np(function(e){return e.push(i,ie),ts(ay,i,e)});function as(e,t,r){var n=null==e?i:rz(e,t);return i===n?r:n}function al(e,t){return null!=e&&ig(e,t,r0)}var au=nX(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eL.call(t)),e[t]=r},aL(ak)),ac=nX(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eL.call(t)),eD.call(e,t)?e[t].push(r):e[t]=[r]},ic),ap=np(r2);function ad(e){return oM(e)?rS(e):r7(e)}function af(e){return oM(e)?rS(e,!0):function(e){if(!oW(e))return function(e){var t=[];if(null!=e)for(var r in eO(e))t.push(r);return t}(e);var t=iI(e),r=[];for(var n in e)"constructor"==n&&(t||!eD.call(e,n))||r.push(n);return r}(e)}var ah=nq(function(e,t,r){nn(e,t,r)}),ay=nq(function(e,t,r,n){nn(e,t,r,n)}),am=ii(function(e,t){var r={};if(null==e)return r;var n=!1;t=th(t,function(t){return t=nR(t,e),n||(n=t.length>1),t}),nV(e,ia(e),r),n&&(r=rj(r,7,it));for(var i=t.length;i--;)nO(r,t[i]);return r}),av=ii(function(e,t){return null==e?{}:na(e,t,function(t,r){return al(e,r)})});function ag(e,t){if(null==e)return{};var r=th(ia(e),function(e){return[e]});return t=ic(t),na(e,r,function(e,r){return t(e,r[0])})}var ab=n6(ad),a_=n6(af);function aT(e){return null==e?[]:tF(e,ad(e))}var aE=nQ(function(e,t,r){return t=t.toLowerCase(),e+(r?aO(t):t)});function aO(e){return aR(o9(e).toLowerCase())}function aS(e){return(e=o9(e))&&e.replace(eh,tM).replace(eW,"")}var aw=nQ(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),aI=nQ(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),aN=nH("toLowerCase"),aA=nQ(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),aC=nQ(function(e,t,r){return e+(r?" ":"")+aR(t)}),aP=nQ(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),aR=nH("toUpperCase");function aD(e,t,r){if(e=o9(e),t=r?i:t,i===t){var n;return(n=e,ez.test(n))?e.match(eQ)||[]:e.match(ei)||[]}return e.match(t)||[]}var aF=np(function(e,t){try{return ts(e,i,t)}catch(e){return oV(e)?e:new e_(e)}}),aj=ii(function(e,t){return tu(t,function(t){rR(e,t=ik(t),o_(e[t],e))}),e});function aL(e){return function(){return e}}var ax=nY(),aM=nY(!0);function ak(e){return e}function a$(e){return r6("function"==typeof e?e:rj(e,1))}var aU=np(function(e,t){return function(r){return r2(r,e,t)}}),aV=np(function(e,t){return function(r){return r2(e,r,t)}});function aG(e,t,r){var n=ad(t),i=rK(t,n);null!=r||oW(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=rK(t,ad(t)));var o=!(oW(r)&&"chain"in r)||!!r.chain,a=oG(e);return tu(i,function(r){var n=t[r];e[r]=n,a&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=nU(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,ty([this.value()],arguments))})}),e}function aq(){}var aB=n0(th),aW=n0(tc),aH=n0(tg);function aQ(e){return iO(e)?tI(ik(e)):function(t){return rz(t,e)}}var aK=n2(),az=n2(!0);function aY(){return[]}function aJ(){return!1}var aX=nZ(function(e,t){return e+t},0),aZ=n5("ceil"),a0=nZ(function(e,t){return e/t},1),a1=n5("floor"),a2=nZ(function(e,t){return e*t},1),a4=n5("round"),a3=nZ(function(e,t){return e-t},0);return rh.after=function(e,t){if("function"!=typeof t)throw new eI(o);return e=o5(e),function(){if(--e<1)return t.apply(this,arguments)}},rh.ary=og,rh.assign=ae,rh.assignIn=at,rh.assignInWith=ar,rh.assignWith=an,rh.at=ai,rh.before=ob,rh.bind=o_,rh.bindAll=aj,rh.bindKey=oT,rh.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return oL(e)?e:[e]},rh.chain=on,rh.chunk=function(e,t,r){t=(r?iE(e,t,r):i===t)?1:t2(o5(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var o=0,a=0,s=eg(tN(n/t));o<n;)s[a++]=ny(e,o,o+=t);return s},rh.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},rh.concat=function(){var e=arguments.length;if(!e)return[];for(var t=eg(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return ty(oL(r)?nU(r):[r],rq(t,1))},rh.cond=function(e){var t=null==e?0:e.length,r=ic();return e=t?th(e,function(e){if("function"!=typeof e[1])throw new eI(o);return[r(e[0]),e[1]]}):[],np(function(r){for(var n=-1;++n<t;){var i=e[n];if(ts(i[0],this,r))return ts(i[1],this,r)}})},rh.conforms=function(e){var t,r;return r=ad(t=rj(e,1)),function(e){return rL(e,t,r)}},rh.constant=aL,rh.countBy=oa,rh.create=function(e,t){var r=ry(e);return null==t?r:rP(r,t)},rh.curry=function e(t,r,n){r=n?i:r;var o=n7(t,8,i,i,i,i,i,r);return o.placeholder=e.placeholder,o},rh.curryRight=function e(t,r,n){r=n?i:r;var o=n7(t,16,i,i,i,i,i,r);return o.placeholder=e.placeholder,o},rh.debounce=oE,rh.defaults=ao,rh.defaultsDeep=aa,rh.defer=oO,rh.delay=oS,rh.difference=iV,rh.differenceBy=iG,rh.differenceWith=iq,rh.drop=function(e,t,r){var n=null==e?0:e.length;return n?ny(e,(t=r||i===t?1:o5(t))<0?0:t,n):[]},rh.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?ny(e,0,(t=n-(t=r||i===t?1:o5(t)))<0?0:t):[]},rh.dropRightWhile=function(e,t){return e&&e.length?nw(e,ic(t,3),!0,!0):[]},rh.dropWhile=function(e,t){return e&&e.length?nw(e,ic(t,3),!0):[]},rh.fill=function(e,t,r,n){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&iE(e,t,r)&&(r=0,n=o),function(e,t,r,n){var o=e.length;for((r=o5(r))<0&&(r=-r>o?0:o+r),(n=i===n||n>o?o:o5(n))<0&&(n+=o),n=r>n?0:o8(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},rh.filter=function(e,t){return(oL(e)?tp:rG)(e,ic(t,3))},rh.flatMap=function(e,t){return rq(oh(e,t),1)},rh.flatMapDeep=function(e,t){return rq(oh(e,t),l)},rh.flatMapDepth=function(e,t,r){return r=i===r?1:o5(r),rq(oh(e,t),r)},rh.flatten=iH,rh.flattenDeep=function(e){return(null==e?0:e.length)?rq(e,l):[]},rh.flattenDepth=function(e,t){return(null==e?0:e.length)?rq(e,t=i===t?1:o5(t)):[]},rh.flip=function(e){return n7(e,512)},rh.flow=ax,rh.flowRight=aM,rh.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},rh.functions=function(e){return null==e?[]:rK(e,ad(e))},rh.functionsIn=function(e){return null==e?[]:rK(e,af(e))},rh.groupBy=op,rh.initial=function(e){return(null==e?0:e.length)?ny(e,0,-1):[]},rh.intersection=iK,rh.intersectionBy=iz,rh.intersectionWith=iY,rh.invert=au,rh.invertBy=ac,rh.invokeMap=od,rh.iteratee=a$,rh.keyBy=of,rh.keys=ad,rh.keysIn=af,rh.map=oh,rh.mapKeys=function(e,t){var r={};return t=ic(t,3),rH(e,function(e,n,i){rR(r,t(e,n,i),e)}),r},rh.mapValues=function(e,t){var r={};return t=ic(t,3),rH(e,function(e,n,i){rR(r,n,t(e,n,i))}),r},rh.matches=function(e){return nt(rj(e,1))},rh.matchesProperty=function(e,t){return nr(e,rj(t,1))},rh.memoize=ow,rh.merge=ah,rh.mergeWith=ay,rh.method=aU,rh.methodOf=aV,rh.mixin=aG,rh.negate=oI,rh.nthArg=function(e){return e=o5(e),np(function(t){return ni(t,e)})},rh.omit=am,rh.omitBy=function(e,t){return ag(e,oI(ic(t)))},rh.once=function(e){return ob(2,e)},rh.orderBy=function(e,t,r,n){return null==e?[]:(oL(t)||(t=null==t?[]:[t]),oL(r=n?i:r)||(r=null==r?[]:[r]),no(e,t,r))},rh.over=aB,rh.overArgs=oN,rh.overEvery=aW,rh.overSome=aH,rh.partial=oA,rh.partialRight=oC,rh.partition=oy,rh.pick=av,rh.pickBy=ag,rh.property=aQ,rh.propertyOf=function(e){return function(t){return null==e?i:rz(e,t)}},rh.pull=iX,rh.pullAll=iZ,rh.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?ns(e,t,ic(r,2)):e},rh.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?ns(e,t,i,r):e},rh.pullAt=i0,rh.range=aK,rh.rangeRight=az,rh.rearg=oP,rh.reject=function(e,t){return(oL(e)?tp:rG)(e,oI(ic(t,3)))},rh.remove=function(e,t){var r=[];if(!(e&&e.length))return r;var n=-1,i=[],o=e.length;for(t=ic(t,3);++n<o;){var a=e[n];t(a,n,e)&&(r.push(a),i.push(n))}return nl(e,i),r},rh.rest=function(e,t){if("function"!=typeof e)throw new eI(o);return np(e,t=i===t?t:o5(t))},rh.reverse=i1,rh.sampleSize=function(e,t,r){return t=(r?iE(e,t,r):i===t)?1:o5(t),(oL(e)?function(e,t){return ix(nU(e),rF(t,0,e.length))}:function(e,t){var r=aT(e);return ix(r,rF(t,0,r.length))})(e,t)},rh.set=function(e,t,r){return null==e?e:nd(e,t,r)},rh.setWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:nd(e,t,r,n)},rh.shuffle=function(e){return(oL(e)?function(e){return ix(nU(e))}:function(e){return ix(aT(e))})(e)},rh.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&iE(e,t,r)?(t=0,r=n):(t=null==t?0:o5(t),r=i===r?n:o5(r)),ny(e,t,r)):[]},rh.sortBy=om,rh.sortedUniq=function(e){return e&&e.length?nb(e):[]},rh.sortedUniqBy=function(e,t){return e&&e.length?nb(e,ic(t,2)):[]},rh.split=function(e,t,r){return(r&&"number"!=typeof r&&iE(e,t,r)&&(t=r=i),r=i===r?4294967295:r>>>0)?(e=o9(e))&&("string"==typeof t||null!=t&&!oY(t))&&!(t=nT(t))&&tU(e)?nD(tH(e),0,r):e.split(t,r):[]},rh.spread=function(e,t){if("function"!=typeof e)throw new eI(o);return t=null==t?0:t2(o5(t),0),np(function(r){var n=r[t],i=nD(r,0,t);return n&&ty(i,n),ts(e,this,i)})},rh.tail=function(e){var t=null==e?0:e.length;return t?ny(e,1,t):[]},rh.take=function(e,t,r){return e&&e.length?ny(e,0,(t=r||i===t?1:o5(t))<0?0:t):[]},rh.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?ny(e,(t=n-(t=r||i===t?1:o5(t)))<0?0:t,n):[]},rh.takeRightWhile=function(e,t){return e&&e.length?nw(e,ic(t,3),!1,!0):[]},rh.takeWhile=function(e,t){return e&&e.length?nw(e,ic(t,3)):[]},rh.tap=function(e,t){return t(e),e},rh.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new eI(o);return oW(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),oE(e,t,{leading:n,maxWait:t,trailing:i})},rh.thru=oi,rh.toArray=o4,rh.toPairs=ab,rh.toPairsIn=a_,rh.toPath=function(e){return oL(e)?th(e,ik):oZ(e)?[e]:nU(iM(o9(e)))},rh.toPlainObject=o7,rh.transform=function(e,t,r){var n=oL(e),i=n||o$(e)||o0(e);if(t=ic(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:oW(e)&&oG(o)?ry(eq(e)):{}}return(i?tu:rH)(e,function(e,n,i){return t(r,e,n,i)}),r},rh.unary=function(e){return og(e,1)},rh.union=i2,rh.unionBy=i4,rh.unionWith=i3,rh.uniq=function(e){return e&&e.length?nE(e):[]},rh.uniqBy=function(e,t){return e&&e.length?nE(e,ic(t,2)):[]},rh.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?nE(e,i,t):[]},rh.unset=function(e,t){return null==e||nO(e,t)},rh.unzip=i5,rh.unzipWith=i8,rh.update=function(e,t,r){return null==e?e:nS(e,t,nP(r))},rh.updateWith=function(e,t,r,n){return n="function"==typeof n?n:i,null==e?e:nS(e,t,nP(r),n)},rh.values=aT,rh.valuesIn=function(e){return null==e?[]:tF(e,af(e))},rh.without=i6,rh.words=aD,rh.wrap=function(e,t){return oA(nP(t),e)},rh.xor=i7,rh.xorBy=i9,rh.xorWith=oe,rh.zip=ot,rh.zipObject=function(e,t){return nA(e||[],t||[],rN)},rh.zipObjectDeep=function(e,t){return nA(e||[],t||[],nd)},rh.zipWith=or,rh.entries=ab,rh.entriesIn=a_,rh.extend=at,rh.extendWith=ar,aG(rh,rh),rh.add=aX,rh.attempt=aF,rh.camelCase=aE,rh.capitalize=aO,rh.ceil=aZ,rh.clamp=function(e,t,r){return i===r&&(r=t,t=i),i!==r&&(r=(r=o6(r))==r?r:0),i!==t&&(t=(t=o6(t))==t?t:0),rF(o6(e),t,r)},rh.clone=function(e){return rj(e,4)},rh.cloneDeep=function(e){return rj(e,5)},rh.cloneDeepWith=function(e,t){return rj(e,5,t="function"==typeof t?t:i)},rh.cloneWith=function(e,t){return rj(e,4,t="function"==typeof t?t:i)},rh.conformsTo=function(e,t){return null==t||rL(e,t,ad(t))},rh.deburr=aS,rh.defaultTo=function(e,t){return null==e||e!=e?t:e},rh.divide=a0,rh.endsWith=function(e,t,r){e=o9(e),t=nT(t);var n=e.length,o=r=i===r?n:rF(o5(r),0,n);return(r-=t.length)>=0&&e.slice(r,o)==t},rh.eq=oR,rh.escape=function(e){return(e=o9(e))&&B.test(e)?e.replace(G,tk):e},rh.escapeRegExp=function(e){return(e=o9(e))&&X.test(e)?e.replace(J,"\\$&"):e},rh.every=function(e,t,r){var n=oL(e)?tc:rU;return r&&iE(e,t,r)&&(t=i),n(e,ic(t,3))},rh.find=os,rh.findIndex=iB,rh.findKey=function(e,t){return t_(e,ic(t,3),rH)},rh.findLast=ol,rh.findLastIndex=iW,rh.findLastKey=function(e,t){return t_(e,ic(t,3),rQ)},rh.floor=a1,rh.forEach=ou,rh.forEachRight=oc,rh.forIn=function(e,t){return null==e?e:rB(e,ic(t,3),af)},rh.forInRight=function(e,t){return null==e?e:rW(e,ic(t,3),af)},rh.forOwn=function(e,t){return e&&rH(e,ic(t,3))},rh.forOwnRight=function(e,t){return e&&rQ(e,ic(t,3))},rh.get=as,rh.gt=oD,rh.gte=oF,rh.has=function(e,t){return null!=e&&ig(e,t,rZ)},rh.hasIn=al,rh.head=iQ,rh.identity=ak,rh.includes=function(e,t,r,n){e=oM(e)?e:aT(e),r=r&&!n?o5(r):0;var i=e.length;return r<0&&(r=t2(i+r,0)),oX(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&tE(e,t,r)>-1},rh.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return -1;var i=null==r?0:o5(r);return i<0&&(i=t2(n+i,0)),tE(e,t,i)},rh.inRange=function(e,t,r){var n,o,a;return t=o3(t),i===r?(r=t,t=0):r=o3(r),(n=e=o6(e))>=t4(o=t,a=r)&&n<t2(o,a)},rh.invoke=ap,rh.isArguments=oj,rh.isArray=oL,rh.isArrayBuffer=ox,rh.isArrayLike=oM,rh.isArrayLikeObject=ok,rh.isBoolean=function(e){return!0===e||!1===e||oH(e)&&rJ(e)==f},rh.isBuffer=o$,rh.isDate=oU,rh.isElement=function(e){return oH(e)&&1===e.nodeType&&!oz(e)},rh.isEmpty=function(e){if(null==e)return!0;if(oM(e)&&(oL(e)||"string"==typeof e||"function"==typeof e.splice||o$(e)||o0(e)||oj(e)))return!e.length;var t=iv(e);if(t==g||t==O)return!e.size;if(iI(e))return!r7(e).length;for(var r in e)if(eD.call(e,r))return!1;return!0},rh.isEqual=function(e,t){return r3(e,t)},rh.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:i)?r(e,t):i;return i===n?r3(e,t,i,r):!!n},rh.isError=oV,rh.isFinite=function(e){return"number"==typeof e&&tZ(e)},rh.isFunction=oG,rh.isInteger=oq,rh.isLength=oB,rh.isMap=oQ,rh.isMatch=function(e,t){return e===t||r5(e,t,id(t))},rh.isMatchWith=function(e,t,r){return r="function"==typeof r?r:i,r5(e,t,id(t),r)},rh.isNaN=function(e){return oK(e)&&e!=+e},rh.isNative=function(e){if(iw(e))throw new e_("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return r8(e)},rh.isNil=function(e){return null==e},rh.isNull=function(e){return null===e},rh.isNumber=oK,rh.isObject=oW,rh.isObjectLike=oH,rh.isPlainObject=oz,rh.isRegExp=oY,rh.isSafeInteger=function(e){return oq(e)&&e>=-9007199254740991&&e<=9007199254740991},rh.isSet=oJ,rh.isString=oX,rh.isSymbol=oZ,rh.isTypedArray=o0,rh.isUndefined=function(e){return i===e},rh.isWeakMap=function(e){return oH(e)&&iv(e)==I},rh.isWeakSet=function(e){return oH(e)&&"[object WeakSet]"==rJ(e)},rh.join=function(e,t){return null==e?"":t0.call(e,t)},rh.kebabCase=aw,rh.last=iJ,rh.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return -1;var o=n;return i!==r&&(o=(o=o5(r))<0?t2(n+o,0):t4(o,n-1)),t==t?function(e,t,r){for(var n=r+1;n--&&e[n]!==t;);return n}(e,t,o):tT(e,tS,o,!0)},rh.lowerCase=aI,rh.lowerFirst=aN,rh.lt=o1,rh.lte=o2,rh.max=function(e){return e&&e.length?rV(e,ak,rX):i},rh.maxBy=function(e,t){return e&&e.length?rV(e,ic(t,2),rX):i},rh.mean=function(e){return tw(e,ak)},rh.meanBy=function(e,t){return tw(e,ic(t,2))},rh.min=function(e){return e&&e.length?rV(e,ak,r9):i},rh.minBy=function(e,t){return e&&e.length?rV(e,ic(t,2),r9):i},rh.stubArray=aY,rh.stubFalse=aJ,rh.stubObject=function(){return{}},rh.stubString=function(){return""},rh.stubTrue=function(){return!0},rh.multiply=a2,rh.nth=function(e,t){return e&&e.length?ni(e,o5(t)):i},rh.noConflict=function(){return e5._===this&&(e5._=eM),this},rh.noop=aq,rh.now=ov,rh.pad=function(e,t,r){e=o9(e);var n=(t=o5(t))?tW(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return n1(tY(i),r)+e+n1(tN(i),r)},rh.padEnd=function(e,t,r){e=o9(e);var n=(t=o5(t))?tW(e):0;return t&&n<t?e+n1(t-n,r):e},rh.padStart=function(e,t,r){e=o9(e);var n=(t=o5(t))?tW(e):0;return t&&n<t?n1(t-n,r)+e:e},rh.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),t5(o9(e).replace(Z,""),t||0)},rh.random=function(e,t,r){if(r&&"boolean"!=typeof r&&iE(e,t,r)&&(t=r=i),i===r&&("boolean"==typeof t?(r=t,t=i):"boolean"==typeof e&&(r=e,e=i)),i===e&&i===t?(e=0,t=1):(e=o3(e),i===t?(t=e,e=0):t=o3(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var o=t8();return t4(e+o*(t-e+e1("1e-"+((o+"").length-1))),t)}return nu(e,t)},rh.reduce=function(e,t,r){var n=oL(e)?tm:tA,i=arguments.length<3;return n(e,ic(t,4),r,i,rk)},rh.reduceRight=function(e,t,r){var n=oL(e)?tv:tA,i=arguments.length<3;return n(e,ic(t,4),r,i,r$)},rh.repeat=function(e,t,r){return t=(r?iE(e,t,r):i===t)?1:o5(t),nc(o9(e),t)},rh.replace=function(){var e=arguments,t=o9(e[0]);return e.length<3?t:t.replace(e[1],e[2])},rh.result=function(e,t,r){t=nR(t,e);var n=-1,o=t.length;for(o||(o=1,e=i);++n<o;){var a=null==e?i:e[ik(t[n])];i===a&&(n=o,a=r),e=oG(a)?a.call(e):a}return e},rh.round=a4,rh.runInContext=e,rh.sample=function(e){return(oL(e)?rw:function(e){return rw(aT(e))})(e)},rh.size=function(e){if(null==e)return 0;if(oM(e))return oX(e)?tW(e):e.length;var t=iv(e);return t==g||t==O?e.size:r7(e).length},rh.snakeCase=aA,rh.some=function(e,t,r){var n=oL(e)?tg:nm;return r&&iE(e,t,r)&&(t=i),n(e,ic(t,3))},rh.sortedIndex=function(e,t){return nv(e,t)},rh.sortedIndexBy=function(e,t,r){return ng(e,t,ic(r,2))},rh.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=nv(e,t);if(n<r&&oR(e[n],t))return n}return -1},rh.sortedLastIndex=function(e,t){return nv(e,t,!0)},rh.sortedLastIndexBy=function(e,t,r){return ng(e,t,ic(r,2),!0)},rh.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=nv(e,t,!0)-1;if(oR(e[r],t))return r}return -1},rh.startCase=aC,rh.startsWith=function(e,t,r){return e=o9(e),r=null==r?0:rF(o5(r),0,e.length),t=nT(t),e.slice(r,r+t.length)==t},rh.subtract=a3,rh.sum=function(e){return e&&e.length?tC(e,ak):0},rh.sumBy=function(e,t){return e&&e.length?tC(e,ic(t,2)):0},rh.template=function(e,t,r){var n=rh.templateSettings;r&&iE(e,t,r)&&(t=i),e=o9(e),t=ar({},t,n,n9);var o,a,s=ar({},t.imports,n.imports,n9),l=ad(s),u=tF(s,l),c=0,p=t.interpolate||ey,d="__p += '",f=eS((t.escape||ey).source+"|"+p.source+"|"+(p===Q?es:ey).source+"|"+(t.evaluate||ey).source+"|$","g"),h="//# sourceURL="+(eD.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eJ+"]")+"\n";e.replace(f,function(t,r,n,i,s,l){return n||(n=i),d+=e.slice(c,l).replace(em,t$),r&&(o=!0,d+="' +\n__e("+r+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),d+="';\n";var y=eD.call(t,"variable")&&t.variable;if(y){if(eo.test(y))throw new e_("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(k,""):d).replace($,"$1").replace(U,"$1;"),d="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=aF(function(){return eT(l,h+"return "+d).apply(i,u)});if(m.source=d,oV(m))throw m;return m},rh.times=function(e,t){if((e=o5(e))<1||e>9007199254740991)return[];var r=4294967295,n=t4(e,4294967295);t=ic(t),e-=4294967295;for(var i=tP(n,t);++r<e;)t(r);return i},rh.toFinite=o3,rh.toInteger=o5,rh.toLength=o8,rh.toLower=function(e){return o9(e).toLowerCase()},rh.toNumber=o6,rh.toSafeInteger=function(e){return e?rF(o5(e),-9007199254740991,9007199254740991):0===e?e:0},rh.toString=o9,rh.toUpper=function(e){return o9(e).toUpperCase()},rh.trim=function(e,t,r){if((e=o9(e))&&(r||i===t))return tR(e);if(!e||!(t=nT(t)))return e;var n=tH(e),o=tH(t),a=tL(n,o),s=tx(n,o)+1;return nD(n,a,s).join("")},rh.trimEnd=function(e,t,r){if((e=o9(e))&&(r||i===t))return e.slice(0,tQ(e)+1);if(!e||!(t=nT(t)))return e;var n=tH(e),o=tx(n,tH(t))+1;return nD(n,0,o).join("")},rh.trimStart=function(e,t,r){if((e=o9(e))&&(r||i===t))return e.replace(Z,"");if(!e||!(t=nT(t)))return e;var n=tH(e),o=tL(n,tH(t));return nD(n,o).join("")},rh.truncate=function(e,t){var r=30,n="...";if(oW(t)){var o="separator"in t?t.separator:o;r="length"in t?o5(t.length):r,n="omission"in t?nT(t.omission):n}var a=(e=o9(e)).length;if(tU(e)){var s=tH(e);a=s.length}if(r>=a)return e;var l=r-tW(n);if(l<1)return n;var u=s?nD(s,0,l).join(""):e.slice(0,l);if(i===o)return u+n;if(s&&(l+=u.length-l),oY(o)){if(e.slice(l).search(o)){var c,p=u;for(o.global||(o=eS(o.source,o9(el.exec(o))+"g")),o.lastIndex=0;c=o.exec(p);)var d=c.index;u=u.slice(0,i===d?l:d)}}else if(e.indexOf(nT(o),l)!=l){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+n},rh.unescape=function(e){return(e=o9(e))&&q.test(e)?e.replace(V,tK):e},rh.uniqueId=function(e){var t=++eF;return o9(e)+t},rh.upperCase=aP,rh.upperFirst=aR,rh.each=ou,rh.eachRight=oc,rh.first=iQ,aG(rh,(ev={},rH(rh,function(e,t){eD.call(rh.prototype,t)||(ev[t]=e)}),ev),{chain:!1}),rh.VERSION="4.17.21",tu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){rh[e].placeholder=rh}),tu(["drop","take"],function(e,t){rg.prototype[e]=function(r){r=i===r?1:t2(o5(r),0);var n=this.__filtered__&&!t?new rg(this):this.clone();return n.__filtered__?n.__takeCount__=t4(r,n.__takeCount__):n.__views__.push({size:t4(r,4294967295),type:e+(n.__dir__<0?"Right":"")}),n},rg.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),tu(["filter","map","takeWhile"],function(e,t){var r=t+1,n=1==r||3==r;rg.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ic(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),tu(["head","last"],function(e,t){var r="take"+(t?"Right":"");rg.prototype[e]=function(){return this[r](1).value()[0]}}),tu(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");rg.prototype[e]=function(){return this.__filtered__?new rg(this):this[r](1)}}),rg.prototype.compact=function(){return this.filter(ak)},rg.prototype.find=function(e){return this.filter(e).head()},rg.prototype.findLast=function(e){return this.reverse().find(e)},rg.prototype.invokeMap=np(function(e,t){return"function"==typeof e?new rg(this):this.map(function(r){return r2(r,e,t)})}),rg.prototype.reject=function(e){return this.filter(oI(ic(e)))},rg.prototype.slice=function(e,t){e=o5(e);var r=this;return r.__filtered__&&(e>0||t<0)?new rg(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),i!==t&&(r=(t=o5(t))<0?r.dropRight(-t):r.take(t-e)),r)},rg.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},rg.prototype.toArray=function(){return this.take(4294967295)},rH(rg.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=rh[n?"take"+("last"==t?"Right":""):t],a=n||/^find/.test(t);o&&(rh.prototype[t]=function(){var t=this.__wrapped__,s=n?[1]:arguments,l=t instanceof rg,u=s[0],c=l||oL(t),p=function(e){var t=o.apply(rh,ty([e],s));return n&&d?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,h=a&&!d,y=l&&!f;if(!a&&c){t=y?t:new rg(this);var m=e.apply(t,s);return m.__actions__.push({func:oi,args:[p],thisArg:i}),new rv(m,d)}return h&&y?e.apply(this,s):(m=this.thru(p),h?n?m.value()[0]:m.value():m)})}),tu(["pop","push","shift","sort","splice","unshift"],function(e){var t=eN[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);rh.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(oL(i)?i:[],e)}return this[r](function(r){return t.apply(oL(r)?r:[],e)})}}),rH(rg.prototype,function(e,t){var r=rh[t];if(r){var n=r.name+"";eD.call(ro,n)||(ro[n]=[]),ro[n].push({name:t,func:r})}}),ro[nJ(i,2).name]=[{name:"wrapper",func:i}],rg.prototype.clone=function(){var e=new rg(this.__wrapped__);return e.__actions__=nU(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=nU(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=nU(this.__views__),e},rg.prototype.reverse=function(){if(this.__filtered__){var e=new rg(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},rg.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=oL(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=t4(t,e+a);break;case"takeRight":e=t2(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=n?s:a-1,c=this.__iteratees__,p=c.length,d=0,f=t4(l,this.__takeCount__);if(!r||!n&&i==l&&f==l)return nI(e,this.__actions__);var h=[];r:for(;l--&&d<f;){for(var y=-1,m=e[u+=t];++y<p;){var v=c[y],g=v.iteratee,b=v.type,_=g(m);if(2==b)m=_;else if(!_){if(1==b)continue r;break r}}h[d++]=m}return h},rh.prototype.at=oo,rh.prototype.chain=function(){return on(this)},rh.prototype.commit=function(){return new rv(this.value(),this.__chain__)},rh.prototype.next=function(){i===this.__values__&&(this.__values__=o4(this.value()));var e=this.__index__>=this.__values__.length,t=e?i:this.__values__[this.__index__++];return{done:e,value:t}},rh.prototype.plant=function(e){for(var t,r=this;r instanceof rm;){var n=iU(r);n.__index__=0,n.__values__=i,t?o.__wrapped__=n:t=n;var o=n;r=r.__wrapped__}return o.__wrapped__=e,t},rh.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof rg){var t=e;return this.__actions__.length&&(t=new rg(this)),(t=t.reverse()).__actions__.push({func:oi,args:[i1],thisArg:i}),new rv(t,this.__chain__)}return this.thru(i1)},rh.prototype.toJSON=rh.prototype.valueOf=rh.prototype.value=function(){return nI(this.__wrapped__,this.__actions__)},rh.prototype.first=rh.prototype.head,e3&&(rh.prototype[e3]=function(){return this}),rh}();e5._=tz,i!==(n=(function(){return tz}).call(t,r,t,e))&&(e.exports=n)}).call(this)},21242:(e,t,r)=>{"use strict";let n=r(73837),i=r(21035),o=r(24445),a=r(57108),s=e=>""===e||"./"===e,l=e=>{let t=e.indexOf("{");return t>-1&&e.indexOf("}",t)>-1},u=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,i=new Set,a=new Set,s=0,l=e=>{a.add(e.output),r&&r.onResult&&r.onResult(e)};for(let a=0;a<t.length;a++){let u=o(String(t[a]),{...r,onResult:l},!0),c=u.state.negated||u.state.negatedExtglob;for(let t of(c&&s++,e)){let e=u(t,!0);(c?!e.isMatch:e.isMatch)&&(c?n.add(e.output):(n.delete(e.output),i.add(e.output)))}}let u=(s===t.length?[...a]:[...i]).filter(e=>!n.has(e));if(r&&0===u.length){if(!0===r.failglob)throw Error(`No matches found for "${t.join(", ")}"`);if(!0===r.nonull||!0===r.nullglob)return r.unescape?t.map(e=>e.replace(/\\/g,"")):t}return u};u.match=u,u.matcher=(e,t)=>o(e,t),u.isMatch=(e,t,r)=>o(t,r)(e),u.any=u.isMatch,u.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,i=[],o=new Set(u(e,t,{...r,onResult:e=>{r.onResult&&r.onResult(e),i.push(e.output)}}));for(let e of i)o.has(e)||n.add(e);return[...n]},u.contains=(e,t,r)=>{if("string"!=typeof e)throw TypeError(`Expected a string: "${n.inspect(e)}"`);if(Array.isArray(t))return t.some(t=>u.contains(e,t,r));if("string"==typeof t){if(s(e)||s(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return u.isMatch(e,t,{...r,contains:!0})},u.matchKeys=(e,t,r)=>{if(!a.isObject(e))throw TypeError("Expected the first argument to be an object");let n=u(Object.keys(e),t,r),i={};for(let t of n)i[t]=e[t];return i},u.some=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=o(String(e),r);if(n.some(e=>t(e)))return!0}return!1},u.every=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=o(String(e),r);if(!n.every(e=>t(e)))return!1}return!0},u.all=(e,t,r)=>{if("string"!=typeof e)throw TypeError(`Expected a string: "${n.inspect(e)}"`);return[].concat(t).every(t=>o(t,r)(e))},u.capture=(e,t,r)=>{let n=a.isWindows(r),i=o.makeRe(String(e),{...r,capture:!0}).exec(n?a.toPosixSlashes(t):t);if(i)return i.slice(1).map(e=>void 0===e?"":e)},u.makeRe=(...e)=>o.makeRe(...e),u.scan=(...e)=>o.scan(...e),u.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let e of i(String(n),t))r.push(o.parse(e,t));return r},u.braces=(e,t)=>{if("string"!=typeof e)throw TypeError("Expected a string");return t&&!0===t.nobrace||!l(e)?[e]:i(e,t)},u.braceExpand=(e,t)=>{if("string"!=typeof e)throw TypeError("Expected a string");return u.braces(e,{...t,expand:!0})},u.hasBraces=l,e.exports=u},13974:e=>{function t(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var n,i,o=typeof e;if("string"===o&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===o&&isFinite(e))return r.long?(n=Math.abs(e))>=864e5?t(e,n,864e5,"day"):n>=36e5?t(e,n,36e5,"hour"):n>=6e4?t(e,n,6e4,"minute"):n>=1e3?t(e,n,1e3,"second"):e+" ms":(i=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":i>=36e5?Math.round(e/36e5)+"h":i>=6e4?Math.round(e/6e4)+"m":i>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},53918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertNotificationFilterIsEmpty=t.assertImpersonatedUserIsEmpty=t.assertTxConfigIsEmpty=t.assertDatabaseIsEmpty=void 0;var n=r(56889);r(70686),t.assertTxConfigIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e&&!e.isEmpty()){var i=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw t(i.message),r.onError(i),i}},t.assertDatabaseIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e){var i=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw t(i.message),r.onError(i),i}},t.assertImpersonatedUserIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e){var i=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."));throw t(i.message),r.onError(i),i}},t.assertNotificationFilterIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),void 0!==e){var i=(0,n.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(n.json.stringify(e),"."));throw t(i.message),r.onError(i),i}}},71763:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(53918);r(10104);var l=r(34092),u=o(r(46779)),c=r(70686),p=r(56889),d=a(r(84549)),f=a(r(5942)),h=p.internal.bookmarks.Bookmarks,y=p.internal.constants,m=y.ACCESS_MODE_WRITE,v=y.BOLT_PROTOCOL_V1,g=(p.internal.logger.Logger,p.internal.txConfig.TxConfig),b=function(){function e(e,t,r,n,i,o){var a=void 0===r?{}:r,s=a.disableLosslessIntegers,l=a.useBigInt;void 0===n&&(n=function(){return null}),this._server=e||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(s,l),this._responseHandler=n(this),this._log=i,this._onProtocolError=o,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:s,useBigInt:l}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new f.default(Object.values(d.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(e){return this._packer.packable(e,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(e){return this._unpacker.unpack(e,this.transformer.fromStructure)},e.prototype.transformMetadata=function(e){return e},e.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,i=(r.boltAgent,r.authToken),o=r.notificationFilter,a=r.onError,l=r.onComplete,p=new c.LoginObserver({onError:function(e){return t._onLoginError(e,a)},onCompleted:function(e){return t._onLoginCompleted(e,l)}});return(0,s.assertNotificationFilterIsEmpty)(o,this._onProtocolError,p),this.write(u.default.init(n,i),p,!0),p},e.prototype.logoff=function(e){var t=void 0===e?{}:e,r=t.onComplete,n=t.onError;t.flush;var i=new c.LogoffObserver({onCompleted:r,onError:n}),o=(0,p.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(o.message),i.onError(o),o},e.prototype.logon=function(e){var t=this,r=void 0===e?{}:e,n=r.authToken,i=r.onComplete,o=r.onError;r.flush;var a=new c.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},n,i)},onError:function(e){return t._onLoginError(e,o)}}),s=(0,p.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(s.message),a.onError(s),s},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmarks,n=t.txConfig,i=t.database,o=t.mode,a=t.impersonatedUser,s=t.notificationFilter,l=t.beforeError,u=t.afterError,c=t.beforeComplete,p=t.afterComplete;return this.run("BEGIN",r?r.asBeginTransactionParameters():{},{bookmarks:r,txConfig:n,database:i,mode:o,impersonatedUser:a,notificationFilter:s,beforeError:l,afterError:u,beforeComplete:c,afterComplete:p,flush:!1})},e.prototype.commitTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,i=t.beforeComplete,o=t.afterComplete;return this.run("COMMIT",{},{bookmarks:h.empty(),txConfig:g.empty(),mode:m,beforeError:r,afterError:n,beforeComplete:i,afterComplete:o})},e.prototype.rollbackTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,i=t.beforeComplete,o=t.afterComplete;return this.run("ROLLBACK",{},{bookmarks:h.empty(),txConfig:g.empty(),mode:m,beforeError:r,afterError:n,beforeComplete:i,afterComplete:o})},e.prototype.run=function(e,t,r){var n=void 0===r?{}:r,i=(n.bookmarks,n.txConfig),o=n.database,a=(n.mode,n.impersonatedUser),l=n.notificationFilter,p=n.beforeKeys,d=n.afterKeys,f=n.beforeError,h=n.afterError,y=n.beforeComplete,m=n.afterComplete,v=n.flush,g=n.highRecordWatermark,b=void 0===g?Number.MAX_VALUE:g,_=n.lowRecordWatermark,T=void 0===_?Number.MAX_VALUE:_,E=new c.ResultStreamObserver({server:this._server,beforeKeys:p,afterKeys:d,beforeError:f,afterError:h,beforeComplete:y,afterComplete:m,highRecordWatermark:b,lowRecordWatermark:T});return(0,s.assertTxConfigIsEmpty)(i,this._onProtocolError,E),(0,s.assertDatabaseIsEmpty)(o,this._onProtocolError,E),(0,s.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,E),(0,s.assertNotificationFilterIsEmpty)(l,this._onProtocolError,E),this.write(u.default.run(e,t),E,!1),this.write(u.default.pullAll(),E,void 0===v||v),E},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(e){var t=void 0===e?{}:e,r=t.onError,n=t.onComplete,i=new c.ResetObserver({onProtocolError:this._onProtocolError,onError:r,onComplete:n});return this.write(u.default.reset(),i,!0),i},e.prototype.telemetry=function(e,t){e.api;var r=void 0===t?{}:t,n=(r.onError,r.onCompleted),i=new c.CompletedObserver;return n&&n(),i},e.prototype._createPacker=function(e){return new l.v1.Packer(e)},e.prototype._createUnpacker=function(e,t){return new l.v1.Unpacker(e,t)},e.prototype.write=function(e,t,r){if(this.queueObserverIfProtocolIsNotBroken(t)){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(e)),this._lastMessageSignature=e.signature;var n=new l.structure.Structure(e.signature,e.fields);this.packable(n)(),this._chunker.messageBoundary(),r&&this._chunker.flush()}},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===u.SIGNATURES.HELLO||this._lastMessageSignature===u.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===u.SIGNATURES.RESET},e.prototype.notifyFatalError=function(e){return this._fatalError=e,this._responseHandler._notifyErrorToObservers(e)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(e){return this.isBroken()?(this.notifyFatalErrorToObserver(e),!1):this._responseHandler._queueObserver(e)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(e){e&&e.onError&&e.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(e,t,r){if(this._initialized=!0,this._authToken=t,e){var n=e.server;this._server.version||(this._server.version=n)}r&&r(e)},e.prototype._onLoginError=function(e,t){this._onProtocolError(e.message),t&&t(e)},e}();t.default=b},84549:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var i=r(56889),o=r(34092),a=r(5942),s=i.error.PROTOCOL_ERROR;t.default={createNodeTransformer:function(){return new a.TypeTransformer({signature:78,isTypeInstance:function(e){return e instanceof i.Node},toStructure:function(e){throw(0,i.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),s)},fromStructure:function(e){o.structure.verifyStructSize("Node",3,e.size);var t=n(e.fields,3),r=t[0],a=t[1],s=t[2];return new i.Node(r,a,s)}})},createRelationshipTransformer:function(){return new a.TypeTransformer({signature:82,isTypeInstance:function(e){return e instanceof i.Relationship},toStructure:function(e){throw(0,i.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),s)},fromStructure:function(e){o.structure.verifyStructSize("Relationship",5,e.size);var t=n(e.fields,5),r=t[0],a=t[1],s=t[2],l=t[3],u=t[4];return new i.Relationship(r,a,s,l,u)}})},createUnboundRelationshipTransformer:function(){return new a.TypeTransformer({signature:114,isTypeInstance:function(e){return e instanceof i.UnboundRelationship},toStructure:function(e){throw(0,i.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),s)},fromStructure:function(e){o.structure.verifyStructSize("UnboundRelationship",3,e.size);var t=n(e.fields,3),r=t[0],a=t[1],s=t[2];return new i.UnboundRelationship(r,a,s)}})},createPathTransformer:function(){return new a.TypeTransformer({signature:80,isTypeInstance:function(e){return e instanceof i.Path},toStructure:function(e){throw(0,i.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),s)},fromStructure:function(e){o.structure.verifyStructSize("Path",3,e.size);for(var t=n(e.fields,3),r=t[0],a=t[1],s=t[2],l=[],u=r[0],c=0;c<s.length;c+=2){var p=r[s[c+1]],d=(0,i.toNumber)(s[c]),f=void 0;d>0?(f=a[d-1])instanceof i.UnboundRelationship&&(a[d-1]=f=f.bindTo(u,p)):(f=a[-d-1])instanceof i.UnboundRelationship&&(a[-d-1]=f=f.bindTo(p,u)),l.push(new i.PathSegment(u,f,p)),u=p}return new i.Path(r[0],r[r.length-1],l)}})}}},7994:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(71763)),s=o(r(34092)),l=r(56889),u=o(r(62830)),c=o(r(5942)),p=l.internal.constants.BOLT_PROTOCOL_V2,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._createPacker=function(e){return new s.default.Packer(e)},t.prototype._createUnpacker=function(e,t){return new s.default.Unpacker(e,t)},Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new c.default(Object.values(u.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),t}(a.default);t.default=d},62830:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(56889),s=r(34092),l=r(5942),u=r(64644),c=o(r(84549)),p=a.internal.temporalUtil,d=p.dateToEpochDay,f=p.localDateTimeToEpochSecond,h=p.localTimeToNanoOfDay;function y(e,t,r){if(!t&&!r)return e;var n=Object.create(Object.getPrototypeOf(e));for(var i in e)if(!0===Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];n[i]=(0,a.isInt)(o)?r?o.toBigInt():o.toNumberOrInfinity():o}return Object.freeze(n),n}t.default=n(n({},c.default),{createPoint2DTransformer:function(){return new l.TypeTransformer({signature:88,isTypeInstance:function(e){return(0,a.isPoint)(e)&&(null===e.z||void 0===e.z)},toStructure:function(e){return new s.structure.Structure(88,[(0,a.int)(e.srid),e.x,e.y])},fromStructure:function(e){s.structure.verifyStructSize("Point2D",3,e.size);var t=i(e.fields,3),r=t[0],n=t[1],o=t[2];return new a.Point(r,n,o,void 0)}})},createPoint3DTransformer:function(){return new l.TypeTransformer({signature:89,isTypeInstance:function(e){return(0,a.isPoint)(e)&&null!==e.z&&void 0!==e.z},toStructure:function(e){return new s.structure.Structure(89,[(0,a.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){s.structure.verifyStructSize("Point3D",4,e.size);var t=i(e.fields,4),r=t[0],n=t[1],o=t[2],l=t[3];return new a.Point(r,n,o,l)}})},createDurationTransformer:function(){return new l.TypeTransformer({signature:69,isTypeInstance:a.isDuration,toStructure:function(e){var t=(0,a.int)(e.months),r=(0,a.int)(e.days),n=(0,a.int)(e.seconds),i=(0,a.int)(e.nanoseconds);return new s.structure.Structure(69,[t,r,n,i])},fromStructure:function(e){s.structure.verifyStructSize("Duration",4,e.size);var t=i(e.fields,4),r=t[0],n=t[1],o=t[2],l=t[3];return new a.Duration(r,n,o,l)}})},createLocalTimeTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new l.TypeTransformer({signature:116,isTypeInstance:a.isLocalTime,toStructure:function(e){var t=h(e.hour,e.minute,e.second,e.nanosecond);return new s.structure.Structure(116,[t])},fromStructure:function(e){s.structure.verifyStructSize("LocalTime",1,e.size);var n=i(e.fields,1)[0];return y((0,u.nanoOfDayToLocalTime)(n),t,r)}})},createTimeTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new l.TypeTransformer({signature:84,isTypeInstance:a.isTime,toStructure:function(e){var t=h(e.hour,e.minute,e.second,e.nanosecond),r=(0,a.int)(e.timeZoneOffsetSeconds);return new s.structure.Structure(84,[t,r])},fromStructure:function(e){s.structure.verifyStructSize("Time",2,e.size);var n=i(e.fields,2),o=n[0],l=n[1],c=(0,u.nanoOfDayToLocalTime)(o);return y(new a.Time(c.hour,c.minute,c.second,c.nanosecond,l),t,r)}})},createDateTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new l.TypeTransformer({signature:68,isTypeInstance:a.isDate,toStructure:function(e){var t=d(e.year,e.month,e.day);return new s.structure.Structure(68,[t])},fromStructure:function(e){s.structure.verifyStructSize("Date",1,e.size);var n=i(e.fields,1)[0];return y((0,u.epochDayToDate)(n),t,r)}})},createLocalDateTimeTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new l.TypeTransformer({signature:100,isTypeInstance:a.isLocalDateTime,toStructure:function(e){var t=f(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,a.int)(e.nanosecond);return new s.structure.Structure(100,[t,r])},fromStructure:function(e){s.structure.verifyStructSize("LocalDateTime",2,e.size);var n=i(e.fields,2),o=n[0],a=n[1];return y((0,u.epochSecondAndNanoToLocalDateTime)(o,a),t,r)}})},createDateTimeWithZoneIdTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new l.TypeTransformer({signature:102,isTypeInstance:function(e){return(0,a.isDateTime)(e)&&null!=e.timeZoneId},toStructure:function(e){var t=f(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,a.int)(e.nanosecond),n=e.timeZoneId;return new s.structure.Structure(102,[t,r,n])},fromStructure:function(e){s.structure.verifyStructSize("DateTimeWithZoneId",3,e.size);var n=i(e.fields,3),o=n[0],l=n[1],c=n[2],p=(0,u.epochSecondAndNanoToLocalDateTime)(o,l);return y(new a.DateTime(p.year,p.month,p.day,p.hour,p.minute,p.second,p.nanosecond,null,c),t,r)}})},createDateTimeWithOffsetTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new l.TypeTransformer({signature:70,isTypeInstance:function(e){return(0,a.isDateTime)(e)&&null==e.timeZoneId},toStructure:function(e){var t=f(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,a.int)(e.nanosecond),n=(0,a.int)(e.timeZoneOffsetSeconds);return new s.structure.Structure(70,[t,r,n])},fromStructure:function(e){s.structure.verifyStructSize("DateTimeWithZoneOffset",3,e.size);var n=i(e.fields,3),o=n[0],l=n[1],c=n[2],p=(0,u.epochSecondAndNanoToLocalDateTime)(o,l);return y(new a.DateTime(p.year,p.month,p.day,p.hour,p.minute,p.second,p.nanosecond,c,null),t,r)}})}})},5708:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(7994)),l=a(r(46779)),u=r(53918),c=r(70686),p=a(r(7565)),d=a(r(5942)),f=r(56889);f.internal.bookmarks.Bookmarks;var h=f.internal.constants.BOLT_PROTOCOL_V3,y=f.internal.txConfig.TxConfig,m="context",v="CALL dbms.cluster.routing.getRoutingTable($".concat(m,")"),g=new c.StreamObserver,b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new d.default(Object.values(p.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.transformMetadata=function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e},t.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,i=(r.boltAgent,r.authToken),o=r.notificationFilter,a=r.onError,s=r.onComplete,p=new c.LoginObserver({onError:function(e){return t._onLoginError(e,a)},onCompleted:function(e){return t._onLoginCompleted(e,i,s)}});return(0,u.assertNotificationFilterIsEmpty)(o,this._onProtocolError,p),this.write(l.default.hello(n,i),p,!0),p},t.prototype.prepareToClose=function(){this.write(l.default.goodbye(),g,!0)},t.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmarks,n=t.txConfig,i=t.database,o=t.impersonatedUser,a=t.notificationFilter,s=t.mode,p=t.beforeError,d=t.afterError,f=t.beforeComplete,h=t.afterComplete,y=new c.ResultStreamObserver({server:this._server,beforeError:p,afterError:d,beforeComplete:f,afterComplete:h});return y.prepareToHandleSingleResponse(),(0,u.assertDatabaseIsEmpty)(i,this._onProtocolError,y),(0,u.assertImpersonatedUserIsEmpty)(o,this._onProtocolError,y),(0,u.assertNotificationFilterIsEmpty)(a,this._onProtocolError,y),this.write(l.default.begin({bookmarks:r,txConfig:n,mode:s}),y,!0),y},t.prototype.commitTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,i=t.beforeComplete,o=t.afterComplete,a=new c.ResultStreamObserver({server:this._server,beforeError:r,afterError:n,beforeComplete:i,afterComplete:o});return a.prepareToHandleSingleResponse(),this.write(l.default.commit(),a,!0),a},t.prototype.rollbackTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,i=t.beforeComplete,o=t.afterComplete,a=new c.ResultStreamObserver({server:this._server,beforeError:r,afterError:n,beforeComplete:i,afterComplete:o});return a.prepareToHandleSingleResponse(),this.write(l.default.rollback(),a,!0),a},t.prototype.run=function(e,t,r){var n=void 0===r?{}:r,i=n.bookmarks,o=n.txConfig,a=n.database,s=n.impersonatedUser,p=n.notificationFilter,d=n.mode,f=n.beforeKeys,h=n.afterKeys,y=n.beforeError,m=n.afterError,v=n.beforeComplete,g=n.afterComplete,b=n.flush,_=n.highRecordWatermark,T=void 0===_?Number.MAX_VALUE:_,E=n.lowRecordWatermark,O=void 0===E?Number.MAX_VALUE:E,S=new c.ResultStreamObserver({server:this._server,beforeKeys:f,afterKeys:h,beforeError:y,afterError:m,beforeComplete:v,afterComplete:g,highRecordWatermark:T,lowRecordWatermark:O});return(0,u.assertDatabaseIsEmpty)(a,this._onProtocolError,S),(0,u.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,S),(0,u.assertNotificationFilterIsEmpty)(p,this._onProtocolError,S),this.write(l.default.runWithMetadata(e,t,{bookmarks:i,txConfig:o,mode:d}),S,!1),this.write(l.default.pullAll(),S,void 0===b||b),S},t.prototype.requestRoutingInformation=function(e){var t,r=e.routingContext,n=e.sessionContext,i=e.onError,a=e.onCompleted,s=this.run(v,((t={})[m]=void 0===r?{}:r,t),o(o({},void 0===n?{}:n),{txConfig:y.empty()}));return new c.ProcedureRouteObserver({resultObserver:s,onProtocolError:this._onProtocolError,onError:i,onCompleted:a})},t}(s.default);t.default=b},7565:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(62830));t.default=n({},o.default)},90355:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(5708)),l=a(r(46779)),u=r(53918),c=r(70686),p=a(r(93460)),d=a(r(5942)),f=r(56889);f.internal.bookmarks.Bookmarks;var h=f.internal.constants,y=h.BOLT_PROTOCOL_V4_0,m=h.FETCH_ALL,v=f.internal.txConfig.TxConfig,g="context",b="database",_="CALL dbms.routing.getRoutingTable($".concat(g,", $").concat(b,")"),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new d.default(Object.values(p.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmarks,n=t.txConfig,i=t.database,o=t.impersonatedUser,a=t.notificationFilter,s=t.mode,p=t.beforeError,d=t.afterError,f=t.beforeComplete,h=t.afterComplete,y=new c.ResultStreamObserver({server:this._server,beforeError:p,afterError:d,beforeComplete:f,afterComplete:h});return y.prepareToHandleSingleResponse(),(0,u.assertImpersonatedUserIsEmpty)(o,this._onProtocolError,y),(0,u.assertNotificationFilterIsEmpty)(a,this._onProtocolError,y),this.write(l.default.begin({bookmarks:r,txConfig:n,database:i,mode:s}),y,!0),y},t.prototype.run=function(e,t,r){var n=void 0===r?{}:r,i=n.bookmarks,o=n.txConfig,a=n.database,s=n.impersonatedUser,p=n.notificationFilter,d=n.mode,f=n.beforeKeys,h=n.afterKeys,y=n.beforeError,v=n.afterError,g=n.beforeComplete,b=n.afterComplete,_=n.flush,T=void 0===_||_,E=n.reactive,O=void 0!==E&&E,S=n.fetchSize,w=void 0===S?m:S,I=n.highRecordWatermark,N=void 0===I?Number.MAX_VALUE:I,A=n.lowRecordWatermark,C=void 0===A?Number.MAX_VALUE:A,P=new c.ResultStreamObserver({server:this._server,reactive:O,fetchSize:w,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:f,afterKeys:h,beforeError:y,afterError:v,beforeComplete:g,afterComplete:b,highRecordWatermark:N,lowRecordWatermark:C});return(0,u.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,P),(0,u.assertNotificationFilterIsEmpty)(p,this._onProtocolError,P),this.write(l.default.runWithMetadata(e,t,{bookmarks:i,txConfig:o,database:a,mode:d}),P,O&&T),O||this.write(l.default.pull({n:w}),P,T),P},t.prototype._requestMore=function(e,t,r){this.write(l.default.pull({stmtId:e,n:t}),r,!0)},t.prototype._requestDiscard=function(e,t){this.write(l.default.discard({stmtId:e}),t,!0)},t.prototype._noOp=function(){},t.prototype.requestRoutingInformation=function(e){var t,r=e.routingContext,n=e.databaseName,i=e.sessionContext,a=e.onError,s=e.onCompleted,l=this.run(_,((t={})[g]=void 0===r?{}:r,t[b]=void 0===n?null:n,t),o(o({},void 0===i?{}:i),{txConfig:v.empty()}));return new c.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:a,onCompleted:s})},t}(s.default);t.default=T},93460:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(7565));t.default=n({},o.default)},87761:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(90355)),s=o(r(46779)),l=r(70686),u=r(56889),c=r(53918),p=o(r(72218)),d=o(r(5942)),f=u.internal.constants.BOLT_PROTOCOL_V4_1,h=function(e){function t(t,r,n,i,o,a,s){void 0===i&&(i=function(){return null});var l=e.call(this,t,r,n,i,o,a)||this;return l._serversideRouting=s,l}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new d.default(Object.values(p.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,i=(r.boltAgent,r.authToken),o=r.notificationFilter,a=r.onError,u=r.onComplete,p=new l.LoginObserver({onError:function(e){return t._onLoginError(e,a)},onCompleted:function(e){return t._onLoginCompleted(e,i,u)}});return(0,c.assertNotificationFilterIsEmpty)(o,this._onProtocolError,p),this.write(s.default.hello(n,i,this._serversideRouting),p,!0),p},t}(a.default);t.default=h},72218:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(93460));t.default=n({},o.default)},57256:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(87761)),s=r(56889),l=o(r(23834)),u=o(r(5942)),c=s.internal.constants.BOLT_PROTOCOL_V4_2,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new u.default(Object.values(l.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t}(a.default);t.default=p},23834:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(72218));t.default=n({},o.default)},5105:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(57256)),l=a(r(46779)),u=r(70686),c=r(53918),p=a(r(40452)),d=a(r(10262)),f=a(r(5942)),h=r(56889),y=h.internal.bookmarks.Bookmarks,m=h.internal.constants.BOLT_PROTOCOL_V4_3,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return m},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new f.default(Object.values(p.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var t=e.routingContext,r=e.databaseName,n=e.sessionContext,i=e.onError,o=e.onCompleted,a=new u.RouteObserver({onProtocolError:this._onProtocolError,onError:i,onCompleted:o}),s=(void 0===n?{}:n).bookmarks||y.empty();return this.write(l.default.route(void 0===t?{}:t,s.values(),void 0===r?null:r),a,!0),a},t.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,i=(r.boltAgent,r.authToken),o=r.notificationFilter,a=r.onError,s=r.onComplete,p=new u.LoginObserver({onError:function(e){return t._onLoginError(e,a)},onCompleted:function(e){return void 0!==e.patch_bolt&&t._applyPatches(e.patch_bolt),t._onLoginCompleted(e,i,s)}});return(0,c.assertNotificationFilterIsEmpty)(o,this._onProtocolError,p),this.write(l.default.hello(n,i,this._serversideRouting,["utc"]),p,!0),p},t.prototype._applyPatches=function(e){e.includes("utc")&&this._applyUtcPatch()},t.prototype._applyUtcPatch=function(){var e=this;this._transformer=new f.default(Object.values(o(o({},p.default),d.default)).map(function(t){return t(e._config,e._log)}))},t}(s.default);t.default=v},40452:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(23834));t.default=n({},o.default)},34613:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(5105)),l=r(56889),u=a(r(46779)),c=r(70686),p=r(53918),d=a(r(40523)),f=a(r(10262)),h=a(r(5942)),y=l.internal.constants,m=y.BOLT_PROTOCOL_V4_4,v=y.FETCH_ALL,g=l.internal.bookmarks.Bookmarks,b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return m},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new h.default(Object.values(d.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var t=e.routingContext,r=e.databaseName,n=e.impersonatedUser,i=e.sessionContext,o=e.onError,a=e.onCompleted,s=new c.RouteObserver({onProtocolError:this._onProtocolError,onError:o,onCompleted:a}),l=(void 0===i?{}:i).bookmarks||g.empty();return this.write(u.default.routeV4x4(void 0===t?{}:t,l.values(),{databaseName:void 0===r?null:r,impersonatedUser:void 0===n?null:n}),s,!0),s},t.prototype.run=function(e,t,r){var n=void 0===r?{}:r,i=n.bookmarks,o=n.txConfig,a=n.database,s=n.mode,l=n.impersonatedUser,d=n.notificationFilter,f=n.beforeKeys,h=n.afterKeys,y=n.beforeError,m=n.afterError,g=n.beforeComplete,b=n.afterComplete,_=n.flush,T=void 0===_||_,E=n.reactive,O=void 0!==E&&E,S=n.fetchSize,w=void 0===S?v:S,I=n.highRecordWatermark,N=void 0===I?Number.MAX_VALUE:I,A=n.lowRecordWatermark,C=void 0===A?Number.MAX_VALUE:A,P=new c.ResultStreamObserver({server:this._server,reactive:O,fetchSize:w,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:f,afterKeys:h,beforeError:y,afterError:m,beforeComplete:g,afterComplete:b,highRecordWatermark:N,lowRecordWatermark:C});return(0,p.assertNotificationFilterIsEmpty)(d,this._onProtocolError,P),this.write(u.default.runWithMetadata(e,t,{bookmarks:i,txConfig:o,database:a,mode:s,impersonatedUser:l}),P,O&&T),O||this.write(u.default.pull({n:w}),P,T),P},t.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmarks,n=t.txConfig,i=t.database,o=t.mode,a=t.impersonatedUser,s=t.notificationFilter,l=t.beforeError,d=t.afterError,f=t.beforeComplete,h=t.afterComplete,y=new c.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:f,afterComplete:h});return y.prepareToHandleSingleResponse(),(0,p.assertNotificationFilterIsEmpty)(s,this._onProtocolError,y),this.write(u.default.begin({bookmarks:r,txConfig:n,database:i,mode:o,impersonatedUser:a}),y,!0),y},t.prototype._applyUtcPatch=function(){var e=this;this._transformer=new h.default(Object.values(o(o({},d.default),f.default)).map(function(t){return t(e._config,e._log)}))},t}(s.default);t.default=b},40523:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(40452));t.default=n({},o.default)},41069:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(34613)),s=r(53918),l=o(r(37531)),u=o(r(5942)),c=o(r(46779)),p=r(70686),d=r(56889).internal.constants.BOLT_PROTOCOL_V5_0,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new u.default(Object.values(l.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,i=(r.boltAgent,r.authToken),o=r.notificationFilter,a=r.onError,l=r.onComplete,u=new p.LoginObserver({onError:function(e){return t._onLoginError(e,a)},onCompleted:function(e){return t._onLoginCompleted(e,i,l)}});return(0,s.assertNotificationFilterIsEmpty)(o,this._onProtocolError,u),this.write(c.default.hello(n,i,this._serversideRouting),u,!0),u},t}(a.default);t.default=f},37531:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(34092),s=r(56889),l=o(r(40523)),u=o(r(10262));t.default=n(n(n({},l.default),u.default),{createNodeTransformer:function(e){return l.default.createNodeTransformer(e).extendsWith({fromStructure:function(e){a.structure.verifyStructSize("Node",4,e.size);var t=i(e.fields,4),r=t[0],n=t[1],o=t[2],l=t[3];return new s.Node(r,n,o,l)}})},createRelationshipTransformer:function(e){return l.default.createRelationshipTransformer(e).extendsWith({fromStructure:function(e){a.structure.verifyStructSize("Relationship",8,e.size);var t=i(e.fields,8),r=t[0],n=t[1],o=t[2],l=t[3],u=t[4],c=t[5],p=t[6],d=t[7];return new s.Relationship(r,n,o,l,u,c,p,d)}})},createUnboundRelationshipTransformer:function(e){return l.default.createUnboundRelationshipTransformer(e).extendsWith({fromStructure:function(e){a.structure.verifyStructSize("UnboundRelationship",4,e.size);var t=i(e.fields,4),r=t[0],n=t[1],o=t[2],l=t[3];return new s.UnboundRelationship(r,n,o,l)}})}})},10262:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(34092),a=r(56889),s=i(r(40523)),l=r(64644),u=r(17981),c=a.internal.temporalUtil.localDateTimeToEpochSecond,p=new Map;function d(e,t,r){var n=function(e){if(!p.has(e)){var t=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});p.set(e,t)}return p.get(e)}(e),i=(0,a.int)(t).multiply(1e3).add((0,a.int)(r).div(1e6)).toNumber(),o=n.formatToParts(i).reduce(function(e,t){return"era"===t.type?e.adjustEra="B"===t.value.toUpperCase()?function(e){return e.subtract(1).negate()}:u.identity:"hour"===t.type?e.hour=(0,a.int)(t.value).modulo(24):"literal"!==t.type&&(e[t.type]=(0,a.int)(t.value)),e},{});o.year=o.adjustEra(o.year);var s=c(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond);return o.timeZoneOffsetSeconds=s.subtract(t),o.hour=o.hour.modulo(24),o}function f(e,t,r){if(!t&&!r)return e;var n=Object.create(Object.getPrototypeOf(e));for(var i in e)if(!0===Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];n[i]=(0,a.isInt)(o)?r?o.toBigInt():o.toNumberOrInfinity():o}return Object.freeze(n),n}t.default={createDateTimeWithZoneIdTransformer:function(e,t){var r=e.disableLosslessIntegers,i=e.useBigInt;return s.default.createDateTimeWithZoneIdTransformer(e).extendsWith({signature:105,fromStructure:function(e){o.structure.verifyStructSize("DateTimeWithZoneId",3,e.size);var t=n(e.fields,3),s=t[0],l=t[1],u=t[2],c=d(u,s,l);return f(new a.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,(0,a.int)(l),c.timeZoneOffsetSeconds,u),r,i)},toStructure:function(e){var r,n,i,s,l,u,p=c(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),f=null!=e.timeZoneOffsetSeconds?e.timeZoneOffsetSeconds:(s=c((i=d(r=e.timeZoneId,p,n=e.nanosecond)).year,i.month,i.day,i.hour,i.minute,i.second,n).subtract(p),c((u=d(r,l=p.subtract(s),n)).year,u.month,u.day,u.hour,u.minute,u.second,n).subtract(l));null==e.timeZoneOffsetSeconds&&t.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var h=p.subtract(f),y=(0,a.int)(e.nanosecond),m=e.timeZoneId;return new o.structure.Structure(105,[h,y,m])}})},createDateTimeWithOffsetTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return s.default.createDateTimeWithOffsetTransformer(e).extendsWith({signature:73,toStructure:function(e){var t=c(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,a.int)(e.nanosecond),n=(0,a.int)(e.timeZoneOffsetSeconds),i=t.subtract(n);return new o.structure.Structure(73,[i,r,n])},fromStructure:function(e){o.structure.verifyStructSize("DateTimeWithZoneOffset",3,e.size);var i=n(e.fields,3),s=i[0],u=i[1],c=i[2],p=(0,a.int)(s).add(c),d=(0,l.epochSecondAndNanoToLocalDateTime)(p,u);return f(new a.DateTime(d.year,d.month,d.day,d.hour,d.minute,d.second,d.nanosecond,c,null),t,r)}})}}},2403:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(41069)),l=r(53918),u=a(r(33028)),c=a(r(5942)),p=a(r(46779)),d=r(70686),f=r(56889).internal.constants.BOLT_PROTOCOL_V5_1,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new c.default(Object.values(u.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,i=(r.boltAgent,r.authToken),a=r.notificationFilter,s=r.onError,u=r.onComplete,c={},f=new d.LoginObserver({onError:function(e){return t._onLoginError(e,s)},onCompleted:function(e){return c.metadata=e,t._onLoginCompleted(e)}});return(0,l.assertNotificationFilterIsEmpty)(a,this._onProtocolError,f),this.write(p.default.hello5x1(n,this._serversideRouting),f,!1),this.logon({authToken:i,onComplete:function(e){return u(o(o({},e),c.metadata))},onError:s,flush:!0})},t.prototype.logon=function(e){var t=this,r=void 0===e?{}:e,n=r.authToken,i=r.onComplete,o=r.onError,a=r.flush,s=new d.LoginObserver({onCompleted:function(){return t._onLoginCompleted(null,n,i)},onError:function(e){return t._onLoginError(e,o)}});return this.write(p.default.logon(n),s,a),s},t.prototype.logoff=function(e){var t=void 0===e?{}:e,r=t.onComplete,n=t.onError,i=t.flush,o=new d.LogoffObserver({onCompleted:r,onError:n});return this.write(p.default.logoff(),o,i),o},t}(s.default);t.default=h},33028:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(37531));t.default=n({},o.default)},53310:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(2403)),l=a(r(99107)),u=a(r(5942)),c=a(r(46779)),p=r(70686),d=r(56889).internal.constants,f=d.BOLT_PROTOCOL_V5_2,h=d.FETCH_ALL,y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new u.default(Object.values(l.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,i=(r.boltAgent,r.authToken),a=r.notificationFilter,s=r.onError,l=r.onComplete,u={},d=new p.LoginObserver({onError:function(e){return t._onLoginError(e,s)},onCompleted:function(e){return u.metadata=e,t._onLoginCompleted(e)}});return this.write(c.default.hello5x2(n,a,this._serversideRouting),d,!1),this.logon({authToken:i,onComplete:function(e){return l(o(o({},e),u.metadata))},onError:s,flush:!0})},t.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmarks,n=t.txConfig,i=t.database,o=t.mode,a=t.impersonatedUser,s=t.notificationFilter,l=t.beforeError,u=t.afterError,d=t.beforeComplete,f=t.afterComplete,h=new p.ResultStreamObserver({server:this._server,beforeError:l,afterError:u,beforeComplete:d,afterComplete:f});return h.prepareToHandleSingleResponse(),this.write(c.default.begin({bookmarks:r,txConfig:n,database:i,mode:o,impersonatedUser:a,notificationFilter:s}),h,!0),h},t.prototype.run=function(e,t,r){var n=void 0===r?{}:r,i=n.bookmarks,o=n.txConfig,a=n.database,s=n.mode,l=n.impersonatedUser,u=n.notificationFilter,d=n.beforeKeys,f=n.afterKeys,y=n.beforeError,m=n.afterError,v=n.beforeComplete,g=n.afterComplete,b=n.flush,_=void 0===b||b,T=n.reactive,E=void 0!==T&&T,O=n.fetchSize,S=void 0===O?h:O,w=n.highRecordWatermark,I=void 0===w?Number.MAX_VALUE:w,N=n.lowRecordWatermark,A=void 0===N?Number.MAX_VALUE:N,C=new p.ResultStreamObserver({server:this._server,reactive:E,fetchSize:S,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:d,afterKeys:f,beforeError:y,afterError:m,beforeComplete:v,afterComplete:g,highRecordWatermark:I,lowRecordWatermark:A});return this.write(c.default.runWithMetadata(e,t,{bookmarks:i,txConfig:o,database:a,mode:s,impersonatedUser:l,notificationFilter:u}),C,E&&_),E||this.write(c.default.pull({n:S}),C,_),C},t}(s.default);t.default=y},99107:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(33028));t.default=n({},o.default)},12981:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(53310)),l=a(r(57546)),u=a(r(5942)),c=a(r(46779)),p=r(70686),d=r(56889).internal.constants.BOLT_PROTOCOL_V5_3,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new u.default(Object.values(l.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,i=r.boltAgent,a=r.authToken,s=r.notificationFilter,l=r.onError,u=r.onComplete,d={},f=new p.LoginObserver({onError:function(e){return t._onLoginError(e,l)},onCompleted:function(e){return d.metadata=e,t._onLoginCompleted(e)}});return this.write(c.default.hello5x3(n,i,s,this._serversideRouting),f,!1),this.logon({authToken:a,onComplete:function(e){return u(o(o({},e),d.metadata))},onError:l,flush:!0})},t}(s.default);t.default=f},57546:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(99107));t.default=n({},o.default)},66378:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(12981)),s=o(r(38732)),l=o(r(46779)),u=r(70686),c=o(r(5942)),p=r(56889).internal.constants.BOLT_PROTOCOL_V5_4,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new c.default(Object.values(s.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.telemetry=function(e,t){var r=e.api,n=void 0===t?{}:t,i=n.onError,o=n.onCompleted,a=new u.TelemetryObserver({onCompleted:o,onError:i});return this.write(l.default.telemetry({api:r}),a,!1),a},t}(a.default);t.default=d},38732:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(57546));t.default=n({},o.default)},96457:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(66378)),l=a(r(38849)),u=a(r(5942)),c=a(r(46779)),p=r(70686),d=r(56889).internal.constants,f=d.BOLT_PROTOCOL_V5_5,h=d.FETCH_ALL,y=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new u.default(Object.values(l.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,i=r.boltAgent,a=r.authToken,s=r.notificationFilter,l=r.onError,u=r.onComplete,d={},f=new p.LoginObserver({onError:function(e){return t._onLoginError(e,l)},onCompleted:function(e){return d.metadata=e,t._onLoginCompleted(e)}});return this.write(c.default.hello5x5(n,i,s,this._serversideRouting),f,!1),this.logon({authToken:a,onComplete:function(e){return u(o(o({},e),d.metadata))},onError:l,flush:!0})},t.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmarks,n=t.txConfig,i=t.database,o=t.mode,a=t.impersonatedUser,s=t.notificationFilter,l=t.beforeError,u=t.afterError,d=t.beforeComplete,f=t.afterComplete,h=new p.ResultStreamObserver({server:this._server,beforeError:l,afterError:u,beforeComplete:d,afterComplete:f});return h.prepareToHandleSingleResponse(),this.write(c.default.begin5x5({bookmarks:r,txConfig:n,database:i,mode:o,impersonatedUser:a,notificationFilter:s}),h,!0),h},t.prototype.run=function(e,t,r){var n=void 0===r?{}:r,i=n.bookmarks,o=n.txConfig,a=n.database,s=n.mode,l=n.impersonatedUser,u=n.notificationFilter,d=n.beforeKeys,f=n.afterKeys,y=n.beforeError,m=n.afterError,v=n.beforeComplete,g=n.afterComplete,b=n.flush,_=void 0===b||b,T=n.reactive,E=void 0!==T&&T,O=n.fetchSize,S=void 0===O?h:O,w=n.highRecordWatermark,I=void 0===w?Number.MAX_VALUE:w,N=n.lowRecordWatermark,A=void 0===N?Number.MAX_VALUE:N,C=new p.ResultStreamObserver({server:this._server,reactive:E,fetchSize:S,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:d,afterKeys:f,beforeError:y,afterError:m,beforeComplete:v,afterComplete:g,highRecordWatermark:I,lowRecordWatermark:A,enrichMetadata:this._enrichMetadata});return this.write(c.default.runWithMetadata5x5(e,t,{bookmarks:i,txConfig:o,database:a,mode:s,impersonatedUser:l,notificationFilter:u}),C,E&&_),E||this.write(c.default.pull({n:S}),C,_),C},t.prototype._enrichMetadata=function(e){return Array.isArray(e.statuses)&&(e.statuses=e.statuses.map(function(e){return o(o({},e),{description:null!=e.neo4j_code?e.status_description:e.description,diagnostic_record:null!==e.diagnostic_record?o(o({},y),e.diagnostic_record):null})})),e},t}(s.default);t.default=m},38849:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(38732));t.default=n({},o.default)},41582:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(96457)),l=a(r(38849)),u=a(r(5942)),c=r(56889).internal.constants.BOLT_PROTOCOL_V5_6,p=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transformer",{get:function(){var e=this;return void 0===this._transformer&&(this._transformer=new u.default(Object.values(l.default).map(function(t){return t(e._config,e._log)}))),this._transformer},enumerable:!1,configurable:!0}),t.prototype._enrichMetadata=function(e){return Array.isArray(e.statuses)&&(e.statuses=e.statuses.map(function(e){return o(o({},e),{diagnostic_record:null!==e.diagnostic_record?o(o({},p),e.diagnostic_record):null})})),e},t}(s.default);t.default=d},44814:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(56889),o=n(r(71763)),a=n(r(7994)),s=n(r(5708)),l=n(r(90355)),u=n(r(87761)),c=n(r(57256)),p=n(r(5105)),d=n(r(34613)),f=n(r(41069)),h=n(r(2403)),y=n(r(53310)),m=n(r(12981)),v=n(r(66378)),g=n(r(96457)),b=n(r(41582));r(10104);var _=n(r(76055));t.default=function(e){var t=void 0===e?{}:e,r=t.version,n=t.chunker,T=t.dechunker,E=t.channel,O=t.disableLosslessIntegers,S=t.useBigInt,w=t.serversideRouting,I=t.server,N=t.log,A=t.observer;return function(e,t,r,n,_,T,E,O){switch(e){case 1:return new o.default(t,r,n,T,O,E);case 2:return new a.default(t,r,n,T,O,E);case 3:return new s.default(t,r,n,T,O,E);case 4:return new l.default(t,r,n,T,O,E);case 4.1:return new u.default(t,r,n,T,O,E,_);case 4.2:return new c.default(t,r,n,T,O,E,_);case 4.3:return new p.default(t,r,n,T,O,E,_);case 4.4:return new d.default(t,r,n,T,O,E,_);case 5:return new f.default(t,r,n,T,O,E,_);case 5.1:return new h.default(t,r,n,T,O,E,_);case 5.2:return new y.default(t,r,n,T,O,E,_);case 5.3:return new m.default(t,r,n,T,O,E,_);case 5.4:return new v.default(t,r,n,T,O,E,_);case 5.5:return new g.default(t,r,n,T,O,E,_);case 5.6:return new b.default(t,r,n,T,O,E,_);default:throw(0,i.newError)("Unknown Bolt protocol version: "+e)}}(r,I,n,{disableLosslessIntegers:O,useBigInt:S},w,function(e){var t=new _.default({transformMetadata:e.transformMetadata.bind(e),log:N,observer:A});return E.onerror=A.onError.bind(A),E.onmessage=function(e){return T.write(e)},T.onmessage=function(r){try{t.handleResponse(e.unpack(r))}catch(e){return A.onError(e)}},t},A.onProtocolError.bind(A),N)}},84661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10104),i=r(56889);function o(e,t){return{major:e,minor:t}}t.default=function(e,t){var r=this;return new Promise(function(a,s){var l=function(e){s(e)};e.onerror=l.bind(r),e._error&&l(e._error),e.onmessage=function(e){try{var r=function(e,t){var r=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(72===r[0]&&84===r[1]&&84===r[2]&&80===r[3])throw t.error("Handshake failed since server responded with HTTP."),(0,i.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(r[3]+"."+r[2])}(e,t);a({protocolVersion:r,consumeRemainingBuffer:function(t){e.hasRemaining()&&t(e.readSlice(e.remaining()))}})}catch(e){s(e)}},e.write(function(e){if(e.length>4)throw(0,i.newError)("It should not have more than 4 versions of the protocol");var t=(0,n.alloc)(20);return t.writeInt32(1616949271),e.forEach(function(e){if(e instanceof Array){var r=e[0],n=r.major,i=r.minor,o=i-e[1].minor;t.writeInt32(o<<16|i<<8|n)}else{var n=e.major,i=e.minor;t.writeInt32(i<<8|n)}}),t.reset(),t}([[o(5,6),o(5,0)],[o(4,4),o(4,2)],o(4,1),o(3,0)]))})}},8123:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RawRoutingTable=t.BoltProtocol=void 0;var a=o(r(84661)),s=o(r(44814)),l=o(r(5105)),u=o(r(7470));i(r(70686),t),t.BoltProtocol=l.default,t.RawRoutingTable=u.default,t.default={handshake:a.default,create:s.default}},46779:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIGNATURES=void 0;var n=r(56889),i=n.internal.constants,o=i.ACCESS_MODE_READ,a=i.FETCH_ALL,s=n.internal.util.assertString,l=Object.freeze({INIT:1,RESET:15,RUN:16,PULL_ALL:63,HELLO:1,GOODBYE:2,BEGIN:17,COMMIT:18,ROLLBACK:19,TELEMETRY:84,ROUTE:102,LOGON:106,LOGOFF:107,DISCARD:47,PULL:63});t.SIGNATURES=l;var u=function(){function e(e,t,r){this.signature=e,this.fields=t,this.toString=r}return e.init=function(t,r){return new e(1,[t,r],function(){return"INIT ".concat(t," {...}")})},e.run=function(t,r){return new e(16,[t,r],function(){return"RUN ".concat(t," ").concat(n.json.stringify(r))})},e.pullAll=function(){return h},e.reset=function(){return y},e.hello=function(t,r,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var o=Object.assign({user_agent:t},r);return n&&(o.routing=n),i&&(o.patch_bolt=i),new e(1,[o],function(){return"HELLO {user_agent: '".concat(t,"', ...}")})},e.hello5x1=function(t,r){void 0===r&&(r=null);var n={user_agent:t};return r&&(n.routing=r),new e(1,[n],function(){return"HELLO {user_agent: '".concat(t,"', ...}")})},e.hello5x2=function(t,r,i){void 0===r&&(r=null),void 0===i&&(i=null);var o={user_agent:t};return d(o,r),i&&(o.routing=i),new e(1,[o],function(){return"HELLO ".concat(n.json.stringify(o))})},e.hello5x3=function(t,r,i,o){void 0===i&&(i=null),void 0===o&&(o=null);var a={};return t&&(a.user_agent=t),r&&(a.bolt_agent={product:r.product,platform:r.platform,language:r.language,language_details:r.languageDetails}),d(a,i),o&&(a.routing=o),new e(1,[a],function(){return"HELLO ".concat(n.json.stringify(a))})},e.hello5x5=function(t,r,i,o){void 0===i&&(i=null),void 0===o&&(o=null);var a={};return t&&(a.user_agent=t),r&&(a.bolt_agent={product:r.product,platform:r.platform,language:r.language,language_details:r.languageDetails}),f(a,i),o&&(a.routing=o),new e(1,[a],function(){return"HELLO ".concat(n.json.stringify(a))})},e.logon=function(t){return new e(106,[t],function(){return"LOGON { ... }"})},e.logoff=function(){return new e(107,[],function(){return"LOGOFF"})},e.begin=function(t){var r=void 0===t?{}:t,i=c(r.bookmarks,r.txConfig,r.database,r.mode,r.impersonatedUser,r.notificationFilter);return new e(17,[i],function(){return"BEGIN ".concat(n.json.stringify(i))})},e.begin5x5=function(t){var r=void 0===t?{}:t,i=c(r.bookmarks,r.txConfig,r.database,r.mode,r.impersonatedUser,r.notificationFilter,{appendNotificationFilter:f});return new e(17,[i],function(){return"BEGIN ".concat(n.json.stringify(i))})},e.commit=function(){return m},e.rollback=function(){return v},e.runWithMetadata=function(t,r,i){var o=void 0===i?{}:i,a=c(o.bookmarks,o.txConfig,o.database,o.mode,o.impersonatedUser,o.notificationFilter);return new e(16,[t,r,a],function(){return"RUN ".concat(t," ").concat(n.json.stringify(r)," ").concat(n.json.stringify(a))})},e.runWithMetadata5x5=function(t,r,i){var o=void 0===i?{}:i,a=c(o.bookmarks,o.txConfig,o.database,o.mode,o.impersonatedUser,o.notificationFilter,{appendNotificationFilter:f});return new e(16,[t,r,a],function(){return"RUN ".concat(t," ").concat(n.json.stringify(r)," ").concat(n.json.stringify(a))})},e.goodbye=function(){return g},e.pull=function(t){var r=void 0===t?{}:t,i=r.stmtId,o=void 0===i?-1:i,s=r.n,l=p(null==o?-1:o,(void 0===s?a:s)||a);return new e(63,[l],function(){return"PULL ".concat(n.json.stringify(l))})},e.discard=function(t){var r=void 0===t?{}:t,i=r.stmtId,o=void 0===i?-1:i,s=r.n,l=p(null==o?-1:o,(void 0===s?a:s)||a);return new e(47,[l],function(){return"DISCARD ".concat(n.json.stringify(l))})},e.telemetry=function(t){var r=t.api,i=(0,n.int)(r);return new e(84,[i],function(){return"TELEMETRY ".concat(i.toString())})},e.route=function(t,r,i){return void 0===t&&(t={}),void 0===r&&(r=[]),void 0===i&&(i=null),new e(102,[t,r,i],function(){return"ROUTE ".concat(n.json.stringify(t)," ").concat(n.json.stringify(r)," ").concat(i)})},e.routeV4x4=function(t,r,i){void 0===t&&(t={}),void 0===r&&(r=[]),void 0===i&&(i={});var o={};return i.databaseName&&(o.db=i.databaseName),i.impersonatedUser&&(o.imp_user=i.impersonatedUser),new e(102,[t,r,o],function(){return"ROUTE ".concat(n.json.stringify(t)," ").concat(n.json.stringify(r)," ").concat(n.json.stringify(o))})},e}();function c(e,t,r,n,i,a,l){void 0===l&&(l={});var u,c={};return e.isEmpty()||(c.bookmarks=e.values()),null!==t.timeout&&(c.tx_timeout=t.timeout),t.metadata&&(c.tx_metadata=t.metadata),r&&(c.db=s(r,"database")),i&&(c.imp_user=s(i,"impersonatedUser")),n===o&&(c.mode="r"),(null!==(u=l.appendNotificationFilter)&&void 0!==u?u:d)(c,a),c}function p(e,t){var r={n:(0,n.int)(t)};return -1!==e&&(r.qid=(0,n.int)(e)),r}function d(e,t){t&&(t.minimumSeverityLevel&&(e.notifications_minimum_severity=t.minimumSeverityLevel),t.disabledCategories&&(e.notifications_disabled_categories=t.disabledCategories),t.disabledClassifications&&(e.notifications_disabled_categories=t.disabledClassifications))}function f(e,t){t&&(t.minimumSeverityLevel&&(e.notifications_minimum_severity=t.minimumSeverityLevel),t.disabledCategories&&(e.notifications_disabled_classifications=t.disabledCategories),t.disabledClassifications&&(e.notifications_disabled_classifications=t.disabledClassifications))}t.default=u;var h=new u(63,[],function(){return"PULL_ALL"}),y=new u(15,[],function(){return"RESET"}),m=new u(18,[],function(){return"COMMIT"}),v=new u(19,[],function(){return"ROLLBACK"}),g=new u(2,[],function(){return"GOODBYE"})},76055:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(56889);function i(){}function o(e){return e}var a={onNext:i,onCompleted:i,onError:i},s=function(){function e(e){var t=void 0===e?{}:e,r=t.transformMetadata,n=t.log,a=t.observer;this._pendingObservers=[],this._log=n,this._transformMetadata=r||o,this._observer=Object.assign({onObserversCountChange:i,onError:i,onFailure:i,onErrorApplyTransformation:o},a)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(e){var t=e.fields[0];switch(e.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(n.json.stringify(e))),this._currentObserver.onNext(t);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(n.json.stringify(e)));try{var r=this._transformMetadata(t);this._currentObserver.onCompleted(r)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(n.json.stringify(e)));try{var i,o=(i=t.code,"Neo.TransientError.Transaction.Terminated"===i?"Neo.ClientError.Transaction.Terminated":"Neo.TransientError.Transaction.LockClientStopped"===i?"Neo.ClientError.Transaction.LockClientStopped":i),a=(0,n.newError)(t.message,o);this._currentFailure=this._observer.onErrorApplyTransformation(a),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(n.json.stringify(e)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,n.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,n.newError)("Unknown Bolt protocol message: "+e))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return null==this._currentObserver?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(e){return(e=e||a).onCompleted=e.onCompleted||i,e.onError=e.onError||i,e.onNext=e.onNext||i,void 0===this._currentObserver?this._currentObserver=e:this._pendingObservers.push(e),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(e){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(e);this._pendingObservers.length>0;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(e)}},e.prototype.hasOngoingObservableRequests=function(){return null!=this._currentObserver||this._pendingObservers.length>0},e.prototype._resetFailure=function(){this._currentFailure=null},e}();t.default=s},7470:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),o(r(56889));var a=function(){function e(){}return e.ofRecord=function(t){return null===t?e.ofNull():new u(t)},e.ofMessageResponse=function(t){return null===t?e.ofNull():new s(t)},e.ofNull=function(){return new l},Object.defineProperty(e.prototype,"ttl",{get:function(){throw Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){throw Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){throw Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){throw Error("Not implemented")},enumerable:!1,configurable:!0}),e}();t.default=a;var s=function(e){function t(t){var r=e.call(this)||this;return r._response=t,r}return i(t,e),Object.defineProperty(t.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){return null===this._response},enumerable:!1,configurable:!0}),t}(a),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(a),u=function(e){function t(t){var r=e.call(this)||this;return r._record=t,r}return i(t,e),Object.defineProperty(t.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){return null===this._record},enumerable:!1,configurable:!0}),t}(a)},70686:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryObserver=t.ProcedureRouteObserver=t.RouteObserver=t.CompletedObserver=t.FailedObserver=t.ResetObserver=t.LogoffObserver=t.LoginObserver=t.ResultStreamObserver=t.StreamObserver=void 0;var a=r(56889),s=o(r(7470)),l=r(34752),u=a.internal.constants.FETCH_ALL,c=a.error.PROTOCOL_ERROR,p=function(){function e(){}return e.prototype.onNext=function(e){},e.prototype.onError=function(e){},e.prototype.onCompleted=function(e){},e}();t.StreamObserver=p;var d=function(e){function t(t){var r=void 0===t?{}:t,n=r.reactive,i=void 0!==n&&n,o=r.moreFunction,a=r.discardFunction,s=r.fetchSize,c=r.beforeError,p=r.afterError,d=r.beforeKeys,f=r.afterKeys,h=r.beforeComplete,y=r.afterComplete,m=r.server,v=r.highRecordWatermark,g=void 0===v?Number.MAX_VALUE:v,b=r.lowRecordWatermark,_=void 0===b?Number.MAX_VALUE:b,E=r.enrichMetadata,O=e.call(this)||this;return O._fieldKeys=null,O._fieldLookup=null,O._head=null,O._queuedRecords=[],O._tail=null,O._error=null,O._observers=[],O._meta={},O._server=m,O._beforeError=c,O._afterError=p,O._beforeKeys=d,O._afterKeys=f,O._beforeComplete=h,O._afterComplete=y,O._enrichMetadata=E||l.functional.identity,O._queryId=null,O._moreFunction=o,O._discardFunction=a,O._discard=!1,O._fetchSize=void 0===s?u:s,O._lowRecordWatermark=_,O._highRecordWatermark=g,O._setState(i?T.READY:T.READY_STREAMING),O._setupAutoPull(),O._paused=!1,O._pulled=!i,O._haveRecordStreamed=!1,O}return i(t,e),t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},t.prototype.onNext=function(e){this._haveRecordStreamed=!0;var t=new a.Record(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(e){return e.onNext})?this._observers.forEach(function(e){e.onNext&&e.onNext(t)}):(this._queuedRecords.push(t),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},t.prototype.onCompleted=function(e){this._state.onSuccess(this,e)},t.prototype.onError=function(e){this._state.onError(this,e)},t.prototype.cancel=function(){this._discard=!0},t.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(T.STREAMING)},t.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(T.SUCCEEDED)},t.prototype.subscribe=function(e){if(this._head&&e.onKeys&&e.onKeys(this._head),this._queuedRecords.length>0&&e.onNext)for(var t=0;t<this._queuedRecords.length;t++)e.onNext(this._queuedRecords[t]),this._queuedRecords.length-t-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===T.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._error&&e.onError(this._error),this._observers.push(e),this._state===T.READY&&this._handleStreaming()},t.prototype._handleHasMore=function(e){this._setState(T.READY),this._handleStreaming(),delete e.has_more},t.prototype._handlePullSuccess=function(e){var t=this,r=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},e));if(![void 0,null,"r","w","rw","s"].includes(r.type)){this.onError((0,a.newError)('Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got \''.concat(r.type,"'"),c));return}this._setState(T.SUCCEEDED);var n=null;this._beforeComplete&&(n=this._beforeComplete(r));var i=function(){t._tail=r,t._observers.some(function(e){return e.onCompleted})&&t._observers.forEach(function(e){e.onCompleted&&e.onCompleted(r)}),t._afterComplete&&t._afterComplete(r)};n?Promise.resolve(n).then(function(){return i()}):i()},t.prototype._handleRunSuccess=function(e,t){var r=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&e.fields.length>0){this._fieldKeys=e.fields;for(var n=0;n<e.fields.length;n++)this._fieldLookup[e.fields[n]]=n}null!=e.fields&&delete e.fields,null!==e.qid&&void 0!==e.qid&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);var i=null;this._beforeKeys&&(i=this._beforeKeys(this._fieldKeys));var o=function(){r._head=r._fieldKeys,r._observers.some(function(e){return e.onKeys})&&r._observers.forEach(function(e){e.onKeys&&e.onKeys(r._fieldKeys)}),r._afterKeys&&r._afterKeys(r._fieldKeys),t()};i?Promise.resolve(i).then(function(){return o()}):o()}},t.prototype._handleError=function(e){var t=this;this._setState(T.FAILED),this._error=e;var r=null;this._beforeError&&(r=this._beforeError(e));var n=function(){t._observers.some(function(e){return e.onError})&&t._observers.forEach(function(t){t.onError&&t.onError(e)}),t._afterError&&t._afterError(e)};r?Promise.resolve(r).then(function(){return n()}):n()},t.prototype._handleStreaming=function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},t.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(T.STREAMING)},t.prototype._storeMetadataForCompletion=function(e){for(var t=Object.keys(e),r=t.length,n="";r--;)n=t[r],this._meta[n]=e[n]},t.prototype._setState=function(e){this._state=e},t.prototype._setupAutoPull=function(){this._autoPull=!0},t}(p);t.ResultStreamObserver=d;var f=function(e){function t(t){var r=void 0===t?{}:t,n=r.onError,i=r.onCompleted,o=e.call(this)||this;return o._onError=n,o._onCompleted=i,o}return i(t,e),t.prototype.onNext=function(e){this.onError((0,a.newError)("Received RECORD when initializing "+a.json.stringify(e)))},t.prototype.onError=function(e){this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},t}(p);t.LoginObserver=f;var h=function(e){function t(t){var r=void 0===t?{}:t,n=r.onError,i=r.onCompleted,o=e.call(this)||this;return o._onError=n,o._onCompleted=i,o}return i(t,e),t.prototype.onNext=function(e){this.onError((0,a.newError)("Received RECORD when logging off "+a.json.stringify(e)))},t.prototype.onError=function(e){this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},t}(p);t.LogoffObserver=h;var y=function(e){function t(t){var r=void 0===t?{}:t,n=r.onProtocolError,i=r.onError,o=r.onComplete,a=e.call(this)||this;return a._onProtocolError=n,a._onError=i,a._onComplete=o,a}return i(t,e),t.prototype.onNext=function(e){this.onError((0,a.newError)("Received RECORD when resetting: received record is: "+a.json.stringify(e),c))},t.prototype.onError=function(e){e.code===c&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onComplete&&this._onComplete(e)},t}(p);t.ResetObserver=y;var m=function(e){function t(t){var r=void 0===t?{}:t,n=r.onError,i=r.onCompleted,o=e.call(this)||this;return o._onError=n,o._onCompleted=i,o}return i(t,e),t.prototype.onNext=function(e){this.onError((0,a.newError)("Received RECORD when sending telemetry "+a.json.stringify(e),c))},t.prototype.onError=function(e){this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},t}(d);t.TelemetryObserver=m;var v=function(e){function t(t){var r=t.error,n=t.onError,i=e.call(this,{beforeError:n})||this;return i.onError(r),i}return i(t,e),t}(d);t.FailedObserver=v;var g=function(e){function t(){var t=e.call(this)||this;return e.prototype.markCompleted.call(t),t}return i(t,e),t}(d);t.CompletedObserver=g;var b=function(e){function t(t){var r=t.resultObserver,n=t.onProtocolError,i=t.onError,o=t.onCompleted,a=e.call(this)||this;return a._resultObserver=r,a._onError=i,a._onCompleted=o,a._records=[],a._onProtocolError=n,r.subscribe(a),a}return i(t,e),t.prototype.onNext=function(e){this._records.push(e)},t.prototype.onError=function(e){e.code===c&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(){if(null!==this._records&&1!==this._records.length){this.onError((0,a.newError)("Illegal response from router. Received "+this._records.length+" records but expected only one.\n"+a.json.stringify(this._records),c));return}this._onCompleted&&this._onCompleted(s.default.ofRecord(this._records[0]))},t}(p);t.ProcedureRouteObserver=b;var _=function(e){function t(t){var r=void 0===t?{}:t,n=r.onProtocolError,i=r.onError,o=r.onCompleted,a=e.call(this)||this;return a._onProtocolError=n,a._onError=i,a._onCompleted=o,a}return i(t,e),t.prototype.onNext=function(e){this.onError((0,a.newError)("Received RECORD when resetting: received record is: "+a.json.stringify(e),c))},t.prototype.onError=function(e){e.code===c&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(s.default.ofMessageResponse(e))},t}(p);t.RouteObserver=_;var T={READY_STREAMING:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){e._setState(T.STREAMING)})},onError:function(e,t){e._handleError(t)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){return e._handleStreaming()})},onError:function(e,t){e._handleError(t)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,t){t.has_more?e._handleHasMore(t):e._handlePullSuccess(t)},onError:function(e,t){e._handleError(t)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}}},64644:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.epochSecondAndNanoToLocalDateTime=t.nanoOfDayToLocalTime=t.epochDayToDate=void 0;var n=r(56889),i=n.internal.temporalUtil,o=i.DAYS_0000_TO_1970,a=i.DAYS_PER_400_YEAR_CYCLE,s=i.NANOS_PER_HOUR,l=i.NANOS_PER_MINUTE,u=i.NANOS_PER_SECOND,c=i.SECONDS_PER_DAY,p=i.floorDiv,d=i.floorMod;function f(e){var t=(e=(0,n.int)(e)).add(o).subtract(60),r=(0,n.int)(0);if(t.lessThan(0)){var i=t.add(1).div(a).subtract(1);r=i.multiply(400),t=t.add(i.multiply(-a))}var s=t.multiply(400).add(591).div(a),l=t.subtract(s.multiply(365).add(s.div(4)).subtract(s.div(100)).add(s.div(400)));l.lessThan(0)&&(s=s.subtract(1),l=t.subtract(s.multiply(365).add(s.div(4)).subtract(s.div(100)).add(s.div(400)))),s=s.add(r);var u=l,c=u.multiply(5).add(2).div(153),p=c.add(2).modulo(12).add(1),d=u.subtract(c.multiply(306).add(5).div(10)).add(1);return s=s.add(c.div(10)),new n.Date(s,p,d)}function h(e){var t=(e=(0,n.int)(e)).div(s),r=(e=e.subtract(t.multiply(s))).div(l),i=(e=e.subtract(r.multiply(l))).div(u),o=e.subtract(i.multiply(u));return new n.LocalTime(t,r,i,o)}t.epochDayToDate=f,t.nanoOfDayToLocalTime=h,t.epochSecondAndNanoToLocalDateTime=function(e,t){var r=p(e,c),i=d(e,c).multiply(u).add(t),o=f(r),a=h(i);return new n.LocalDateTime(o.year,o.month,o.day,a.hour,a.minute,a.second,a.nanosecond)}},5942:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeTransformer=void 0;var n=r(34092),i=r(56889).internal.objectUtil,o=function(){function e(e){this._transformers=e,this._transformersPerSignature=new Map(e.map(function(e){return[e.signature,e]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(e){try{if(e instanceof n.structure.Structure&&this._transformersPerSignature.has(e.signature))return(0,this._transformersPerSignature.get(e.signature).fromStructure)(e);return e}catch(e){return i.createBrokenObject(e)}},e.prototype.toStructure=function(e){var t=this._transformers.find(function(t){return(0,t.isTypeInstance)(e)});return void 0!==t?t.toStructure(e):e},e}();t.default=o;var a=function(){function e(e){var t=e.signature,r=e.fromStructure,n=e.toStructure,i=e.isTypeInstance;this.signature=t,this.isTypeInstance=i,this.fromStructure=r,this.toStructure=n,Object.freeze(this)}return e.prototype.extendsWith=function(t){var r=t.signature,n=t.fromStructure,i=t.toStructure,o=t.isTypeInstance;return new e({signature:r||this.signature,fromStructure:n||this.fromStructure,toStructure:i||this.toStructure,isTypeInstance:o||this.isTypeInstance})},e}();t.TypeTransformer=a},17007:function(e,t){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.position=0,this.length=e}return e.prototype.getUInt8=function(e){throw Error("Not implemented")},e.prototype.getInt8=function(e){throw Error("Not implemented")},e.prototype.getFloat64=function(e){throw Error("Not implemented")},e.prototype.putUInt8=function(e,t){throw Error("Not implemented")},e.prototype.putInt8=function(e,t){throw Error("Not implemented")},e.prototype.putFloat64=function(e,t){throw Error("Not implemented")},e.prototype.getInt16=function(e){return this.getInt8(e)<<8|this.getUInt8(e+1)},e.prototype.getUInt16=function(e){return this.getUInt8(e)<<8|this.getUInt8(e+1)},e.prototype.getInt32=function(e){return this.getInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},e.prototype.getUInt32=function(e){return this.getUInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},e.prototype.getInt64=function(e){return this.getInt8(e)<<56|this.getUInt8(e+1)<<48|this.getUInt8(e+2)<<40|this.getUInt8(e+3)<<32|this.getUInt8(e+4)<<24|this.getUInt8(e+5)<<16|this.getUInt8(e+6)<<8|this.getUInt8(e+7)},e.prototype.getSlice=function(e,t){return new o(e,t,this)},e.prototype.putInt16=function(e,t){this.putInt8(e,t>>8),this.putUInt8(e+1,255&t)},e.prototype.putUInt16=function(e,t){this.putUInt8(e,t>>8&255),this.putUInt8(e+1,255&t)},e.prototype.putInt32=function(e,t){this.putInt8(e,t>>24),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},e.prototype.putUInt32=function(e,t){this.putUInt8(e,t>>24&255),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},e.prototype.putInt64=function(e,t){this.putInt8(e,t>>48),this.putUInt8(e+1,t>>42&255),this.putUInt8(e+2,t>>36&255),this.putUInt8(e+3,t>>30&255),this.putUInt8(e+4,t>>24&255),this.putUInt8(e+5,t>>16&255),this.putUInt8(e+6,t>>8&255),this.putUInt8(e+7,255&t)},e.prototype.putBytes=function(e,t){for(var r=0,n=t.remaining();r<n;r++)this.putUInt8(e+r,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.writeUInt8=function(e){this.putUInt8(this._updatePos(1),e)},e.prototype.writeInt8=function(e){this.putInt8(this._updatePos(1),e)},e.prototype.writeInt16=function(e){this.putInt16(this._updatePos(2),e)},e.prototype.writeInt32=function(e){this.putInt32(this._updatePos(4),e)},e.prototype.writeUInt32=function(e){this.putUInt32(this._updatePos(4),e)},e.prototype.writeInt64=function(e){this.putInt64(this._updatePos(8),e)},e.prototype.writeFloat64=function(e){this.putFloat64(this._updatePos(8),e)},e.prototype.writeBytes=function(e){this.putBytes(this._updatePos(e.remaining()),e)},e.prototype.readSlice=function(e){return this.getSlice(this._updatePos(e),e)},e.prototype._updatePos=function(e){var t=this.position;return this.position+=e,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return this.remaining()>0},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()},e.prototype.toHex=function(){for(var e="",t=0;t<this.length;t++){var r=this.getUInt8(t).toString(16);1===r.length&&(r="0"+r),e+=r,t!==this.length-1&&(e+=" ")}return e},e}();t.default=i;var o=function(e){function t(t,r,n){var i=e.call(this,r)||this;return i._start=t,i._inner=n,i}return n(t,e),t.prototype.putUInt8=function(e,t){this._inner.putUInt8(this._start+e,t)},t.prototype.getUInt8=function(e){return this._inner.getUInt8(this._start+e)},t.prototype.putInt8=function(e,t){this._inner.putInt8(this._start+e,t)},t.prototype.putFloat64=function(e,t){this._inner.putFloat64(this._start+e,t)},t.prototype.getInt8=function(e){return this._inner.getInt8(this._start+e)},t.prototype.getFloat64=function(e){return this._inner.getFloat64(this._start+e)},t}(i)},44925:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseBuffer=void 0;var i=n(r(17007));t.BaseBuffer=i.default,t.default=i.default},76060:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.alloc=void 0;var a=o(r(14300)),s=function(e){function t(t){var r=this,n=t instanceof a.default.Buffer?t:"number"==typeof t&&"function"==typeof a.default.Buffer.alloc?a.default.Buffer.alloc(t):new a.default.Buffer(t);return(r=e.call(this,n.length)||this)._buffer=n,r}return i(t,e),t.prototype.getUInt8=function(e){return this._buffer.readUInt8(e)},t.prototype.getInt8=function(e){return this._buffer.readInt8(e)},t.prototype.getFloat64=function(e){return this._buffer.readDoubleBE(e)},t.prototype.putUInt8=function(e,t){this._buffer.writeUInt8(t,e)},t.prototype.putInt8=function(e,t){this._buffer.writeInt8(t,e)},t.prototype.putFloat64=function(e,t){this._buffer.writeDoubleBE(t,e)},t.prototype.putBytes=function(r,n){if(n instanceof t){var i=Math.min(n.length-n.position,this.length-r);n._buffer.copy(this._buffer,r,n.position,n.position+i),n.position+=i}else e.prototype.putBytes.call(this,r,n)},t.prototype.getSlice=function(e,r){return new t(this._buffer.slice(e,e+r))},t}(o(r(44925)).default);t.default=s,t.alloc=function(e){return new s(e)}},53108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(56889),i=n.internal.util,o=i.ENCRYPTION_OFF,a=i.ENCRYPTION_ON,s=n.error.SERVICE_UNAVAILABLE,l=[null,void 0,!0,!1,a,o],u=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];t.default=function(e,t,r,i){this.address=e,this.encrypted=function(e){var t=e.encrypted;if(-1===l.indexOf(t))throw(0,n.newError)("Illegal value of the encrypted setting ".concat(t,". Expected one of ").concat(l));return t}(t),this.trust=function(e){var t=e.trust;if(-1===u.indexOf(t))throw(0,n.newError)("Illegal value of the trust setting ".concat(t,". Expected one of ").concat(u));return t}(t),this.trustedCertificates=t.trustedCertificates||[],this.knownHostsPath=t.knownHosts||null,this.connectionErrorCode=r||s,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=i}},9856:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Dechunker=t.Chunker=void 0;var a=o(r(17007)),s=r(76060),l=o(r(42374)),u=function(e){function t(t,r){var n=e.call(this,0)||this;return n._bufferSize=r||1400,n._ch=t,n._buffer=(0,s.alloc)(n._bufferSize),n._currentChunkStart=0,n._chunkOpen=!1,n}return i(t,e),t.prototype.putUInt8=function(e,t){this._ensure(1),this._buffer.writeUInt8(t)},t.prototype.putInt8=function(e,t){this._ensure(1),this._buffer.writeInt8(t)},t.prototype.putFloat64=function(e,t){this._ensure(8),this._buffer.writeFloat64(t)},t.prototype.putBytes=function(e,t){for(;t.remaining()>0;)this._ensure(1),this._buffer.remaining()>t.remaining()?this._buffer.writeBytes(t):this._buffer.writeBytes(t.readSlice(this._buffer.remaining()));return this},t.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var e=this._buffer;this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=(0,s.alloc)(this._bufferSize),this._chunkOpen=!1}return this},t.prototype.messageBoundary=function(){this._closeChunkIfOpen(),2>this._buffer.remaining()&&this.flush(),this._buffer.writeInt16(0)},t.prototype._ensure=function(e){var t=this._chunkOpen?e:e+2;this._buffer.remaining()<t&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},t.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var e=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1}},t}(a.default);t.Chunker=u;var c=function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(e){return e.remaining()>=2?this._onHeader(e.readUInt16()):(this._partialChunkHeader=e.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(e){return this._onHeader((this._partialChunkHeader|e.readUInt8())&65535)},e.prototype.IN_CHUNK=function(e){return this._chunkSize<=e.remaining()?(this._currentMessage.push(e.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=e.remaining(),this._currentMessage.push(e.readSlice(e.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(e){},e.prototype._onHeader=function(e){if(0!==e)return this._chunkSize=e,this.IN_CHUNK;var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new l.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK},e.prototype.write=function(e){for(;e.hasRemaining();)this._state=this._state(e)},e}();t.Dechunker=c},42374:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(44925),a=r(76060),s=function(e){function t(t){for(var r=this,n=0,i=0;i<t.length;i++)n+=t[i].length;return(r=e.call(this,n)||this)._buffers=t,r}return i(t,e),t.prototype.getUInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getUInt8(e);e-=r.length}},t.prototype.getInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getInt8(e);e-=r.length}},t.prototype.getFloat64=function(e){for(var t=(0,a.alloc)(8),r=0;r<8;r++)t.putUInt8(r,this.getUInt8(e+r));return t.getFloat64(0)},t}(o.BaseBuffer);t.default=s},10104:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.utf8=t.alloc=t.ChannelConfig=void 0,i(r(80365),t),i(r(9856),t);var a=r(53108);Object.defineProperty(t,"ChannelConfig",{enumerable:!0,get:function(){return o(a).default}});var s=r(76060);Object.defineProperty(t,"alloc",{enumerable:!0,get:function(){return s.alloc}});var l=r(28799);Object.defineProperty(t,"utf8",{enumerable:!0,get:function(){return o(l).default}})},80365:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCertificatesLoader=t.HostNameResolver=t.Channel=void 0;var i=n(r(68941)),o=n(r(99191)),a=n(r(22695));t.Channel=i.default,t.HostNameResolver=o.default,t.ClientCertificatesLoader=a.default},68941:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(r(41808)),a=i(r(24404)),s=i(r(57147)),l=i(r(76060)),u=r(56889),c=u.internal.util,p=c.ENCRYPTION_OFF,d=c.ENCRYPTION_ON,f=c.isEmptyObjectOrNull,h=0,y={TRUST_CUSTOM_CA_SIGNED_CERTIFICATES:function(e,t,r){if(!e.trustedCertificates||0===e.trustedCertificates.length){r((0,u.newError)('You are using TRUST_CUSTOM_CA_SIGNED_CERTIFICATES as the method to verify trust for encrypted  connections, but have not configured any trustedCertificates. You  must specify the path to at least one trusted X.509 certificate for this to work. Two other alternatives is to use TRUST_ALL_CERTIFICATES or to disable encryption by setting encrypted="'+p+'"in your driver configuration.'));return}var n=v(e.address.host(),e.trustedCertificates.map(function(e){return s.default.readFileSync(e)}),e.clientCertificate),i=a.default.connect(e.address.port(),e.address.resolvedHost(),n,function(){i.authorized?t():r((0,u.newError)("Server certificate is not trusted. If you trust the database you are connecting to, add the signing certificate, or the server certificate, to the list of certificates trusted by this driver using `neo4j.driver(.., { trustedCertificates:['path/to/certificate.crt']}). This  is a security measure to protect against man-in-the-middle attacks. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted=\""+p+'"` in the driver options. Socket responded with: '+i.authorizationError))});return i.on("error",r),g(i)},TRUST_SYSTEM_CA_SIGNED_CERTIFICATES:function(e,t,r){var n=v(e.address.host(),void 0,e.clientCertificate),i=a.default.connect(e.address.port(),e.address.resolvedHost(),n,function(){i.authorized?t():r((0,u.newError)("Server certificate is not trusted. If you trust the database you are connecting to, use TRUST_CUSTOM_CA_SIGNED_CERTIFICATES and add the signing certificate, or the server certificate, to the list of certificates trusted by this driver using `neo4j.driver(.., { trustedCertificates:['path/to/certificate.crt']}). This  is a security measure to protect against man-in-the-middle attacks. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted=\""+p+'"` in the driver options. Socket responded with: '+i.authorizationError))});return i.on("error",r),g(i)},TRUST_ALL_CERTIFICATES:function(e,t,r){var n=v(e.address.host(),void 0,e.clientCertificate),i=a.default.connect(e.address.port(),e.address.resolvedHost(),n,function(){f(i.getPeerCertificate())?r((0,u.newError)('Secure connection was successful but server did not return any valid certificates. Such connection can not be trusted. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted="'+p+'"` in the driver options. Socket responded with: '+i.authorizationError)):t()});return i.on("error",r),g(i)}};function m(e,t,r){void 0===r&&(r=function(){return null});var n=e.trust?e.trust:"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";if(null!=e.encrypted&&void 0!==e.encrypted&&(!0===e.encrypted||e.encrypted===d)){if(y[n])return y[n](e,t,r);r((0,u.newError)("Unknown trust strategy: "+e.trust+". Please use either trust:'TRUST_CUSTOM_CA_SIGNED_CERTIFICATES' or trust:'TRUST_ALL_CERTIFICATES' in your driver configuration. Alternatively, you can disable encryption by setting `encrypted:\""+p+'"`. There is no mechanism to use encryption without trust verification, because this incurs the overhead of encryption without improving security. If the driver does not verify that the peer it is connected to is really Neo4j, it is very easy for an attacker to bypass the encryption by pretending to be Neo4j.'))}else{var i=o.default.connect(e.address.port(),e.address.resolvedHost(),t);return i.on("error",r),g(i)}}function v(e,t,r){return void 0===t&&(t=void 0),void 0===r&&(r=void 0),n({rejectUnauthorized:!1,servername:e,ca:t},r)}function g(e){return e.setKeepAlive(!0),e}var b=function(){function e(e,t){void 0===t&&(t=m);var r=this;this.id=h++,this._pending=[],this._open=!0,this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._handleConnectionTerminated=this._handleConnectionTerminated.bind(this),this._connectionErrorCode=e.connectionErrorCode,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._conn=t(e,function(){if(r._open){r._conn.on("data",function(e){r.onmessage&&r.onmessage(new l.default(e))}),r._conn.on("error",r._handleConnectionError),r._conn.on("end",r._handleConnectionTerminated);var e=r._pending;r._pending=null;for(var t=0;t<e.length;t++)r.write(e[t])}},this._handleConnectionError),this._setupConnectionTimeout(e,this._conn)}return e.prototype._handleConnectionError=function(e){var t="Failed to connect to server. Please ensure that your database is listening on the correct host and port and that you have compatible encryption settings both on Neo4j server and driver. Note that the default encryption setting has changed in Neo4j 4.0.";e.message&&(t+=" Caused by: "+e.message),this._error=(0,u.newError)(t,this._connectionErrorCode),this.onerror&&this.onerror(this._error)},e.prototype._handleConnectionTerminated=function(){this._open=!1,this._error=(0,u.newError)("Connection was closed by server",this._connectionErrorCode),this.onerror&&this.onerror(this._error)},e.prototype._setupConnectionTimeout=function(e,t){var r=this,n=e.connectionTimeout;if(n){var i=function(){t.setTimeout(0)},o=function(){t.setTimeout(0),t.destroy((0,u.newError)("Failed to establish connection in ".concat(n,"ms"),e.connectionErrorCode))};t.on("connect",i),t.on("timeout",o),this._removeConnectionTimeoutListeners=function(){r._conn.off("connect",i),r._conn.off("timeout",o)},t.setTimeout(n)}},e.prototype.setupReceiveTimeout=function(e){var t=this;this._removeConnectionTimeoutListeners&&this._removeConnectionTimeoutListeners(),this._conn.on("timeout",function(){t._conn.destroy((0,u.newError)("Connection lost. Server didn't respond in ".concat(e,"ms"),t._connectionErrorCode))}),this._receiveTimeout=e},e.prototype.stopReceiveTimeout=function(){null!==this._receiveTimeout&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._conn.setTimeout(0))},e.prototype.startReceiveTimeout=function(){null===this._receiveTimeout||this._receiveTimeoutStarted||(this._receiveTimeoutStarted=!0,this._conn.setTimeout(this._receiveTimeout))},e.prototype.write=function(e){if(null!==this._pending)this._pending.push(e);else if(e instanceof l.default)this._conn.write(e._buffer);else throw(0,u.newError)("Don't know how to write: "+e)},e.prototype.close=function(){var e=this;return new Promise(function(t,r){var n=function(){e._conn.destroyed||e._conn.destroy(),t()};e._open?(e._open=!1,e._conn.removeListener("end",e._handleConnectionTerminated),e._conn.on("end",function(){return n()}),e._conn.on("close",function(){return n()}),e._conn.end(),e._conn.destroy()):n()})},e}();t.default=b},22695:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(57147));function l(e){return new Promise(function(t,r){return s.default.readFile(e,function(e,n){return e?r(e):t(n)})})}t.default={load:function(e){return n(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return[4,Promise.all([function e(t){return Array.isArray(t)?Promise.all(t.map(e)):l(t)}(e.certfile),function e(t){return Array.isArray(t)?Promise.all(t.map(e)):"string"==typeof t?l(t):l(t.path).then(function(e){return{pem:e,passphrase:t.password}})}(e.keyfile)])];case 1:return[2,{cert:(t=o.apply(void 0,[r.sent(),2]))[0],key:t[1],passphrase:e.password}]}})})}}},99191:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(9523)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.resolve=function(e){return new Promise(function(t){a.default.lookup(e.host(),{all:!0},function(r,n){r?t([e]):t(n.map(function(t){return e.resolveWith(t.address)}))})})},t}(r(56889).internal.resolver.BaseHostNameResolver);t.default=s},28799:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(76060)),o=r(56889),a=n(r(14300)),s=new(r(71576)).StringDecoder("utf8");t.default={encode:function(e){return new i.default("function"==typeof a.default.Buffer.from?a.default.Buffer.from(e,"utf8"):new a.default.Buffer(e,"utf8"))},decode:function(e,t){var r,n,i,a,l,u;if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return n=(r=e.position)+t,e.position=Math.min(n,e.length),e._buffer.toString("utf8",r,n);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return i=function(e){return s.write(e._buffer)},a=function(){return s.end()},l=t,u=e.position,e._updatePos(Math.min(t,e.length-u)),e._buffers.reduce(function(e,t){if(l<=0)return e;if(u>=t.length)return u-=t.length,"";t._updatePos(u-t.position);var r=Math.min(t.length-u,l),n=t.readSlice(r);return t._updatePos(r),l=Math.max(l-n.length,0),u=0,e+i(n)},"")+a();throw(0,o.newError)("Don't know how to decode strings from '".concat(e,"'"))}}},88084:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(56889),a=r(34752),s=function(){function e(e){var t=e.authTokenManager,r=e.userAgent,n=e.boltAgent;this._authTokenManager=t||(0,o.staticAuthTokenManager)({}),this._userAgent=r,this._boltAgent=n}return e.prototype.authenticate=function(e){var t=e.connection,r=e.auth,o=e.skipReAuth,s=e.waitReAuth,l=e.forceReAuth;return n(this,void 0,void 0,function(){var e,n;return i(this,function(i){switch(i.label){case 0:if(!(null!=r))return[3,3];if(e=!0===t.supportsReAuth&&(!a.object.equals(t.authToken,r)&&!0!==o||!0===l),!(null==t.authToken||e))return[3,2];return[4,t.connect(this._userAgent,this._boltAgent,r,s||!1)];case 1:case 5:return[2,i.sent()];case 2:case 6:return[2,t];case 3:return[4,this._authTokenManager.getToken()];case 4:if(n=i.sent(),a.object.equals(n,t.authToken))return[3,6];return[4,t.connect(this._userAgent,this._boltAgent,n,!1)]}})})},e.prototype.handleError=function(e){var t=e.connection,r=e.code;return!!(t&&r.startsWith("Neo.ClientError.Security."))&&this._authTokenManager.handleSecurityException(t.authToken,r)},e}();t.default=s},2402:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(10104),a=function(){function e(e){var t=e.clientCertificateProvider,r=e.loader;this._clientCertificateProvider=t,this._loader=r||o.ClientCertificatesLoader,this._clientCertificate=null}return e.prototype.getClientCertificate=function(){return n(this,void 0,void 0,function(){var e,t,r=this;return i(this,function(n){switch(n.label){case 0:if(!(e=null!=this._clientCertificateProvider))return[3,3];if(t=null==this._clientCertificate)return[3,2];return[4,this._clientCertificateProvider.hasUpdate()];case 1:t=n.sent(),n.label=2;case 2:e=t,n.label=3;case 3:return e&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(e){return r._clientCertificate=e,r._clientCertificate}).catch(function(e){throw r._clientCertificate=null,e})),[2,this._clientCertificate]}})})},e}();t.default=a},17807:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=s(r(947)),u=r(14624),c=r(56889),p=c.internal.constants,d=p.BOLT_PROTOCOL_V3,f=p.BOLT_PROTOCOL_V4_0,h=p.BOLT_PROTOCOL_V4_4,y=p.BOLT_PROTOCOL_V5_1,m=c.error.SERVICE_UNAVAILABLE,v=function(e){function t(t){var r=t.id,n=t.config,i=t.log,o=t.address,a=t.userAgent,s=t.boltAgent,l=t.authTokenManager,u=t.newPool,c=e.call(this,{id:r,config:n,log:i,userAgent:a,boltAgent:s,authTokenManager:l,newPool:u})||this;return c._address=o,c}return i(t,e),t.prototype.acquireConnection=function(e){var t=void 0===e?{}:e,r=(t.accessMode,t.database),n=(t.bookmarks,t.auth),i=t.forceReAuth;return o(this,void 0,void 0,function(){var e,t,o=this;return a(this,function(a){switch(a.label){case 0:return e=u.ConnectionErrorHandler.create({errorCode:m,handleSecurityError:function(e,t,n){return o._handleSecurityError(e,t,n,r)}}),[4,this._connectionPool.acquire({auth:n,forceReAuth:i},this._address)];case 1:if(t=a.sent(),!n)return[3,3];return[4,this._verifyStickyConnection({auth:n,connection:t,address:this._address})];case 2:return a.sent(),[2,t];case 3:return[2,new u.DelegateConnection(t,e)]}})})},t.prototype._handleSecurityError=function(t,r,n,i){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(r," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,r,n)},t.prototype._hasProtocolVersion=function(e){return o(this,void 0,void 0,function(){var t,r;return a(this,function(n){switch(n.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return r=(t=n.sent()).protocol()?t.protocol().version:null,[4,t.close()];case 2:if(n.sent(),r)return[2,e(r)];return[2,!1]}})})},t.prototype.supportsMultiDb=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e>=f})];case 1:return[2,e.sent()]}})})},t.prototype.getNegotiatedProtocolVersion=function(){var e=this;return new Promise(function(t,r){e._hasProtocolVersion(t).catch(r)})},t.prototype.supportsTransactionConfig=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e>=d})];case 1:return[2,e.sent()]}})})},t.prototype.supportsUserImpersonation=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e>=h})];case 1:return[2,e.sent()]}})})},t.prototype.supportsSessionAuth=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e>=y})];case 1:return[2,e.sent()]}})})},t.prototype.verifyAuthentication=function(e){var t=e.auth;return o(this,void 0,void 0,function(){var e=this;return a(this,function(r){return[2,this._verifyAuthentication({auth:t,getAddress:function(){return e._address}})]})})},t.prototype.verifyConnectivityAndGetServerInfo=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,e.sent()]}})})},t}(l.default);t.default=v},947:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},l=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=r(14624),p=r(56889),d=u(r(88084)),f=r(34752),h=u(r(68058)),y=u(r(2402)),m=p.error.SERVICE_UNAVAILABLE,v=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],g=p.internal.pool,b=g.Pool,_=g.PoolConfig,T=function(e){function t(r,n){var i=r.id,u=r.config,p=r.log,f=r.userAgent,m=r.boltAgent,v=r.authTokenManager,g=r.newPool,T=void 0===g?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(b.bind.apply(b,l([void 0],s(e),!1)))}:g;void 0===n&&(n=null);var E=e.call(this)||this;return E._id=i,E._config=u,E._log=p,E._clientCertificateHolder=new y.default({clientCertificateProvider:E._config.clientCertificate}),E._authenticationProvider=new d.default({authTokenManager:v,userAgent:f,boltAgent:m}),E._livenessCheckProvider=new h.default({connectionLivenessCheckTimeout:u.connectionLivenessCheckTimeout}),E._userAgent=f,E._boltAgent=m,E._createChannelConnection=n||function(e){return o(E,void 0,void 0,function(){var t,r;return a(this,function(n){switch(n.label){case 0:return t=c.createChannelConnection,r=[e,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,t.apply(void 0,r.concat([n.sent()]))]}})})},E._connectionPool=T({create:E._createConnection.bind(E),destroy:E._destroyConnection.bind(E),validateOnAcquire:E._validateConnectionOnAcquire.bind(E),validateOnRelease:E._validateConnectionOnRelease.bind(E),installIdleObserver:t._installIdleObserverOnConnection.bind(E),removeIdleObserver:t._removeIdleObserverOnConnection.bind(E),config:_.fromDriverConfig(u),log:E._log}),E._openConnections={},E}return i(t,e),t.prototype._createConnectionErrorHandler=function(){return new c.ConnectionErrorHandler(m)},t.prototype._getClientCertificate=function(){return o(this,void 0,void 0,function(){return a(this,function(e){return[2,this._config.clientCertificate.getClientCertificate()]})})},t.prototype._createConnection=function(e,t,r){var n=this,i=e.auth;return this._createChannelConnection(t).then(function(e){return e.release=function(){return e.idleTimestamp=Date.now(),r(t,e)},n._openConnections[e.id]=e,n._authenticationProvider.authenticate({connection:e,auth:i}).catch(function(t){throw n._destroyConnection(e),t})})},t.prototype._validateConnectionOnAcquire=function(e,t){var r=e.auth,n=e.skipReAuth;return o(this,void 0,void 0,function(){var e,i;return a(this,function(o){switch(o.label){case 0:if(!this._validateConnection(t))return[2,!1];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(t)];case 2:return o.sent(),[3,4];case 3:return e=o.sent(),this._log.debug("The connection ".concat(t.id," is not alive because of an error ").concat(e.code," '").concat(e.message,"'")),[2,!1];case 4:return o.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:t,auth:r,skipReAuth:n})];case 5:return o.sent(),[2,!0];case 6:return i=o.sent(),this._log.debug("The connection ".concat(t.id," is not valid because of an error ").concat(i.code," '").concat(i.message,"'")),[2,!1];case 7:return[2]}})})},t.prototype._validateConnectionOnRelease=function(e){return!0!==e._sticky&&this._validateConnection(e)},t.prototype._validateConnection=function(e){if(!e.isOpen())return!1;var t=this._config.maxConnectionLifetime;return!(Date.now()-e.creationTimestamp>t)},t.prototype._destroyConnection=function(e){return delete this._openConnections[e.id],e.close()},t.prototype._verifyConnectivityAndGetServerVersion=function(e){var t=e.address;return o(this,void 0,void 0,function(){var e,r;return a(this,function(n){switch(n.label){case 0:return[4,this._connectionPool.acquire({},t)];case 1:e=n.sent(),r=new p.ServerInfo(e.server,e.protocol().version),n.label=2;case 2:if(n.trys.push([2,,5,7]),e.protocol().isLastMessageLogon())return[3,4];return[4,e.resetAndFlush()];case 3:n.sent(),n.label=4;case 4:return[3,7];case 5:return[4,e.release()];case 6:return n.sent(),[7];case 7:return[2,r]}})})},t.prototype._verifyAuthentication=function(e){var t=e.getAddress,r=e.auth;return o(this,void 0,void 0,function(){var e,n,i,o,s,l;return a(this,function(a){switch(a.label){case 0:e=[],a.label=1;case 1:return a.trys.push([1,8,9,11]),[4,t()];case 2:return n=a.sent(),[4,this._connectionPool.acquire({auth:r,skipReAuth:!0},n)];case 3:if(i=a.sent(),e.push(i),o=!i.protocol().isLastMessageLogon(),!i.supportsReAuth)throw(0,p.newError)("Driver is connected to a database that does not support user switch.");if(!(o&&i.supportsReAuth))return[3,5];return[4,this._authenticationProvider.authenticate({connection:i,auth:r,waitReAuth:!0,forceReAuth:!0})];case 4:return a.sent(),[3,7];case 5:if(!(o&&!i.supportsReAuth))return[3,7];return[4,this._connectionPool.acquire({auth:r},n,{requireNew:!0})];case 6:(s=a.sent())._sticky=!0,e.push(s),a.label=7;case 7:return[2,!0];case 8:if(l=a.sent(),v.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(e.map(function(e){return e.release()}))];case 10:return a.sent(),[7];case 11:return[2]}})})},t.prototype._verifyStickyConnection=function(e){var t=e.auth,r=e.connection;return e.address,o(this,void 0,void 0,function(){var e,n;return a(this,function(i){switch(i.label){case 0:if(n=!(e=f.object.equals(t,r.authToken)),r._sticky=e&&!r.supportsReAuth,!(n||r._sticky))return[3,2];return[4,r.release()];case 1:throw i.sent(),(0,p.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},t.prototype.close=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.close()];case 1:return e.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(e){return e.close()}))];case 2:return e.sent(),[2]}})})},t._installIdleObserverOnConnection=function(e,t){e._setIdle(t)},t._removeIdleObserverOnConnection=function(e){e._unsetIdle()},t.prototype._handleSecurityError=function(e,t,r){return this._authenticationProvider.handleError({connection:r,code:e.code})&&(e.retriable=!0),"Neo.ClientError.Security.AuthorizationExpired"===e.code&&this._connectionPool.apply(t,function(e){e.authToken=null}),r&&r.close().catch(function(){}),e},t}(p.ConnectionProvider);t.default=T},43634:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return s(t,e),t},u=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},p=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var h=r(56889),y=l(r(47610)),m=r(10104),v=f(r(91219)),g=f(r(947)),b=r(16344),_=r(14624),T=r(34752),E=h.error.SERVICE_UNAVAILABLE,O=h.error.SESSION_EXPIRED,S=h.internal.bookmarks.Bookmarks,w=h.internal.constants,I=w.ACCESS_MODE_READ,N=w.ACCESS_MODE_WRITE,A=w.BOLT_PROTOCOL_V3,C=w.BOLT_PROTOCOL_V4_0,P=w.BOLT_PROTOCOL_V4_4,R=w.BOLT_PROTOCOL_V5_1,D=(0,h.int)(3e4),F=function(e){function t(t){var r=t.id,n=t.address,i=t.routingContext,a=t.hostNameResolver,s=t.config,l=t.log,p=t.userAgent,d=t.boltAgent,f=t.authTokenManager,v=t.routingTablePurgeDelay,g=t.newPool,E=e.call(this,{id:r,config:s,log:l,userAgent:p,boltAgent:d,authTokenManager:f,newPool:g},function(e){return u(E,void 0,void 0,function(){var t,r;return c(this,function(n){switch(n.label){case 0:return t=_.createChannelConnection,r=[e,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,t.apply(void 0,r.concat([n.sent(),this._routingContext]))]}})})})||this;return E._routingContext=o(o({},i),{address:n.toString()}),E._seedRouter=n,E._rediscovery=new y.default(E._routingContext),E._loadBalancingStrategy=new b.LeastConnectedLoadBalancingStrategy(E._connectionPool),E._hostNameResolver=a,E._dnsResolver=new m.HostNameResolver,E._log=l,E._useSeedRouter=!0,E._routingTableRegistry=new j(v?(0,h.int)(v):D),E._refreshRoutingTable=T.functional.reuseOngoingRequest(E._refreshRoutingTable,E),E}return i(t,e),t.prototype._createConnectionErrorHandler=function(){return new _.ConnectionErrorHandler(O)},t.prototype._handleUnavailability=function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this.forget(t,r||null),e},t.prototype._handleSecurityError=function(t,r,n,i){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(r," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,r,n,i)},t.prototype._handleWriteFailure=function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this.forgetWriter(t,r||null),(0,h.newError)("No longer possible to write to server at "+t,O,e)},t.prototype.acquireConnection=function(e){var t=void 0===e?{}:e,r=t.accessMode,n=t.database,i=t.bookmarks,o=t.impersonatedUser,a=t.onDatabaseNameResolved,s=t.auth;return u(this,void 0,void 0,function(){var e,t,l,u,p,d,f,y=this;return c(this,function(c){switch(c.label){case 0:return l={database:n||null},u=new _.ConnectionErrorHandler(O,function(e,t){return y._handleUnavailability(e,t,l.database)},function(e,t){return y._handleWriteFailure(e,t,l.database)},function(e,t,r){return y._handleSecurityError(e,t,r,l.database)}),[4,this._freshRoutingTable({accessMode:r,database:l.database,bookmarks:i,impersonatedUser:o,auth:s,onDatabaseNameResolved:function(e){l.database=l.database||e,a&&a(e)}})];case 1:if(p=c.sent(),r===I)t=this._loadBalancingStrategy.selectReader(p.readers),e="read";else if(r===N)t=this._loadBalancingStrategy.selectWriter(p.writers),e="write";else throw(0,h.newError)("Illegal mode "+r);if(!t)throw(0,h.newError)("Failed to obtain connection towards ".concat(e," server. Known routing table is: ").concat(p),O);c.label=2;case 2:return c.trys.push([2,6,,7]),[4,this._connectionPool.acquire({auth:s},t)];case 3:if(d=c.sent(),!s)return[3,5];return[4,this._verifyStickyConnection({auth:s,connection:d,address:t})];case 4:return c.sent(),[2,d];case 5:return[2,new _.DelegateConnection(d,u)];case 6:throw f=c.sent(),u.handleAndTransformError(f,t);case 7:return[2]}})})},t.prototype._hasProtocolVersion=function(e){return u(this,void 0,void 0,function(){var t,r,n,i,o;return c(this,function(a){switch(a.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:t=a.sent(),n=0,a.label=2;case 2:if(!(n<t.length))return[3,8];a.label=3;case 3:return a.trys.push([3,6,,7]),[4,this._createChannelConnection(t[n])];case 4:return o=(i=a.sent()).protocol()?i.protocol().version:null,[4,i.close()];case 5:if(a.sent(),o)return[2,e(o)];return[2,!1];case 6:return r=a.sent(),[3,7];case 7:return n++,[3,2];case 8:if(r)throw r;return[2,!1]}})})},t.prototype.supportsMultiDb=function(){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e>=C})];case 1:return[2,e.sent()]}})})},t.prototype.supportsTransactionConfig=function(){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e>=A})];case 1:return[2,e.sent()]}})})},t.prototype.supportsUserImpersonation=function(){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e>=P})];case 1:return[2,e.sent()]}})})},t.prototype.supportsSessionAuth=function(){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return e>=R})];case 1:return[2,e.sent()]}})})},t.prototype.getNegotiatedProtocolVersion=function(){var e=this;return new Promise(function(t,r){e._hasProtocolVersion(t).catch(r)})},t.prototype.verifyAuthentication=function(e){var t=e.database,r=e.accessMode,n=e.auth;return u(this,void 0,void 0,function(){var e=this;return c(this,function(i){return[2,this._verifyAuthentication({auth:n,getAddress:function(){return u(e,void 0,void 0,function(){var e,i,o;return c(this,function(a){switch(a.label){case 0:return e={database:t||null},[4,this._freshRoutingTable({accessMode:r,database:e.database,auth:n,onDatabaseNameResolved:function(t){e.database=e.database||t}})];case 1:if(i=a.sent(),0===(o=r===N?i.writers:i.readers).length)throw(0,h.newError)("No servers available for database '".concat(e.database,"' with access mode '").concat(r,"'"),E);return[2,o[0]]}})})}})]})})},t.prototype.verifyConnectivityAndGetServerInfo=function(e){var t=e.database,r=e.accessMode;return u(this,void 0,void 0,function(){var e,n,i,o,a,s,l,u,d;return c(this,function(c){switch(c.label){case 0:return e={database:t||null},[4,this._freshRoutingTable({accessMode:r,database:e.database,onDatabaseNameResolved:function(t){e.database=e.database||t}})];case 1:n=c.sent(),i=r===N?n.writers:n.readers,o=(0,h.newError)("No servers available for database '".concat(e.database,"' with access mode '").concat(r,"'"),E),c.label=2;case 2:c.trys.push([2,9,10,11]),s=(a=p(i)).next(),c.label=3;case 3:if(s.done)return[3,8];l=s.value,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:l})];case 5:return[2,c.sent()];case 6:return o=c.sent(),[3,7];case 7:return s=a.next(),[3,3];case 8:return[3,11];case 9:return u={error:c.sent()},[3,11];case 10:try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(u)throw u.error}return[7];case 11:throw o}})})},t.prototype.forget=function(e,t){this._routingTableRegistry.apply(t,{applyWhenExists:function(t){return t.forget(e)}}),this._connectionPool.purge(e).catch(function(){})},t.prototype.forgetWriter=function(e,t){this._routingTableRegistry.apply(t,{applyWhenExists:function(t){return t.forgetWriter(e)}})},t.prototype._freshRoutingTable=function(e){var t=void 0===e?{}:e,r=t.accessMode,n=t.database,i=t.bookmarks,o=t.impersonatedUser,a=t.onDatabaseNameResolved,s=t.auth,l=this._routingTableRegistry.get(n,function(){return new y.RoutingTable({database:n})});return l.isStaleFor(r)?(this._log.info('Routing table is stale for database: "'.concat(n,'" and access mode: "').concat(r,'": ').concat(l)),this._refreshRoutingTable(l,i,o,s).then(function(e){return a(e.database),e})):l},t.prototype._refreshRoutingTable=function(e,t,r,n){var i=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(i,e,t,r,n):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(i,e,t,r,n)},t.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(e,t,r,n,i){return u(this,void 0,void 0,function(){var o,a,s,l,u,p,f;return c(this,function(c){switch(c.label){case 0:return o=[],[4,this._fetchRoutingTableUsingSeedRouter(o,this._seedRouter,t,r,n,i)];case 1:if(s=(a=d.apply(void 0,[c.sent(),2]))[0],l=a[1],!s)return[3,2];return this._useSeedRouter=!1,[3,4];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(e,t,r,n,i)];case 3:p=(u=d.apply(void 0,[c.sent(),2]))[0],f=u[1],s=p,l=f||l,c.label=4;case 4:return[4,this._applyRoutingTableIfPossible(t,s,l)];case 5:return[2,c.sent()]}})})},t.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(e,t,r,n,i){return u(this,void 0,void 0,function(){var o,a,s,l;return c(this,function(u){switch(u.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(e,t,r,n,i)];case 1:if(a=(o=d.apply(void 0,[u.sent(),2]))[0],s=o[1],a)return[3,3];return[4,this._fetchRoutingTableUsingSeedRouter(e,this._seedRouter,t,r,n,i)];case 2:a=(l=d.apply(void 0,[u.sent(),2]))[0],s=l[1],u.label=3;case 3:return[4,this._applyRoutingTableIfPossible(t,a,s)];case 4:return[2,u.sent()]}})})},t.prototype._fetchRoutingTableUsingKnownRouters=function(e,r,n,i,o){return u(this,void 0,void 0,function(){var a,s,l,u;return c(this,function(c){switch(c.label){case 0:return[4,this._fetchRoutingTable(e,r,n,i,o)];case 1:if(s=(a=d.apply(void 0,[c.sent(),2]))[0],l=a[1],s)return[2,[s,null]];return u=e.length-1,t._forgetRouter(r,e,u),[2,[null,l]]}})})},t.prototype._fetchRoutingTableUsingSeedRouter=function(e,t,r,n,i,o){return u(this,void 0,void 0,function(){var a;return c(this,function(s){switch(s.label){case 0:return[4,this._resolveSeedRouter(t)];case 1:return a=s.sent().filter(function(t){return 0>e.indexOf(t)}),[4,this._fetchRoutingTable(a,r,n,i,o)];case 2:return[2,s.sent()]}})})},t.prototype._resolveSeedRouter=function(e){return u(this,void 0,void 0,function(){var t,r=this;return c(this,function(n){switch(n.label){case 0:return[4,this._hostNameResolver.resolve(e)];case 1:return[4,Promise.all(n.sent().map(function(e){return r._dnsResolver.resolve(e)}))];case 2:return t=n.sent(),[2,[].concat.apply([],t)]}})})},t.prototype._fetchRoutingTable=function(e,r,n,i,o){return u(this,void 0,void 0,function(){var a=this;return c(this,function(s){return[2,e.reduce(function(s,l,p){return u(a,void 0,void 0,function(){var a,u,f,h,y,m;return c(this,function(c){switch(c.label){case 0:return[4,s];case 1:if(a=d.apply(void 0,[c.sent(),1])[0])return[2,[a,null]];return u=p-1,t._forgetRouter(r,e,u),[4,this._createSessionForRediscovery(l,n,i,o)];case 2:if(h=(f=d.apply(void 0,[c.sent(),2]))[0],y=f[1],!h)return[3,8];c.label=3;case 3:return c.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(h,r.database,l,i)];case 4:return[2,[c.sent(),null]];case 5:return m=c.sent(),[2,this._handleRediscoveryError(m,l)];case 6:return h.close(),[7];case 7:return[3,9];case 8:return[2,[null,y]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},t.prototype._createSessionForRediscovery=function(e,t,r,n){return u(this,void 0,void 0,function(){var i,o,a,s,l,u=this;return c(this,function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:n},e)];case 1:if(i=c.sent(),!n)return[3,3];return[4,this._verifyStickyConnection({auth:n,connection:i,address:e})];case 2:c.sent(),c.label=3;case 3:if(o=_.ConnectionErrorHandler.create({errorCode:O,handleSecurityError:function(e,t,r){return u._handleSecurityError(e,t,r)}}),a=i._sticky?new _.DelegateConnection(i):new _.DelegateConnection(i,o),s=new v.default(a),i.protocol().version<4)return[2,[new h.Session({mode:N,bookmarks:S.empty(),connectionProvider:s}),null]];return[2,[new h.Session({mode:I,database:"system",bookmarks:t,connectionProvider:s,impersonatedUser:r}),null]];case 4:return l=c.sent(),[2,this._handleRediscoveryError(l,e)];case 5:return[2]}})})},t.prototype._handleRediscoveryError=function(e,t){if(["Neo.ClientError.Database.DatabaseNotFound","Neo.ClientError.Transaction.InvalidBookmark","Neo.ClientError.Transaction.InvalidBookmarkMixture","Neo.ClientError.Statement.ArgumentError","Neo.ClientError.Request.Invalid","Neo.ClientError.Statement.TypeError","N/A"].includes(e.code)||e.code.startsWith("Neo.ClientError.Security.")&&!["Neo.ClientError.Security.AuthorizationExpired"].includes(e.code))throw e;if("Neo.ClientError.Procedure.ProcedureNotFound"===e.code)throw(0,h.newError)("Server at ".concat(t.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),E,e);return this._log.warn("unable to fetch routing table because of an error ".concat(e)),[null,e]},t.prototype._applyRoutingTableIfPossible=function(e,t,r){return u(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:if(!t)throw(0,h.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(e),E,r);return 0===t.writers.length&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(t)];case 1:return n.sent(),[2,t]}})})},t.prototype._updateRoutingTable=function(e){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.keepAll(e.allServers())];case 1:return t.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(e),this._log.info("Updated routing table ".concat(e)),[2]}})})},t._forgetRouter=function(e,t,r){var n=t[r];e&&n&&e.forgetRouter(n)},t}(g.default);t.default=F;var j=function(){function e(e){this._tables=new Map,this._routingTablePurgeDelay=e}return e.prototype.register=function(e){return this._tables.set(e.database,e),this},e.prototype.apply=function(e,t){var r=void 0===t?{}:t,n=r.applyWhenExists,i=r.applyWhenDontExists;return this._tables.has(e)?n(this._tables.get(e)):"string"==typeof e||null===e?(void 0===i?function(){}:i)():this._forEach(n),this},e.prototype.get=function(e,t){return this._tables.has(e)?this._tables.get(e):"function"==typeof t?t():t},e.prototype.removeExpired=function(){var e=this;return this._removeIf(function(t){return t.isExpiredFor(e._routingTablePurgeDelay)})},e.prototype._forEach=function(e){var t,r;try{for(var n=p(this._tables),i=n.next();!i.done;i=n.next()){var o=d(i.value,2)[1];e(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(e){return this._tables.delete(e),this},e.prototype._removeIf=function(e){var t,r;try{for(var n=p(this._tables),i=n.next();!i.done;i=n.next()){var o=d(i.value,2),a=o[0],s=o[1];e(s)&&this._remove(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},e}()},91219:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var r=e.call(this)||this;return r._connection=t,r}return i(t,e),t.prototype.acquireConnection=function(e){var t=void 0===e?{}:e;t.accessMode,t.database,t.bookmarks;var r=this._connection;return this._connection=null,Promise.resolve(r)},t}(r(56889).ConnectionProvider);t.default=o},59473:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RoutingConnectionProvider=t.DirectConnectionProvider=t.PooledConnectionProvider=t.SingleConnectionProvider=void 0;var i=r(91219);Object.defineProperty(t,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(i).default}});var o=r(947);Object.defineProperty(t,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(o).default}});var a=r(17807);Object.defineProperty(t,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(a).default}});var s=r(43634);Object.defineProperty(t,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(s).default}})},68058:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=e.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=t}return e.prototype.check=function(e){return r(this,void 0,void 0,function(){var t;return n(this,function(r){switch(r.label){case 0:if(this._isCheckDisabled||this._isNewlyCreatedConnection(e))return[2,!0];if(t=Date.now()-e.idleTimestamp,!(0===this._connectionLivenessCheckTimeout||t>this._connectionLivenessCheckTimeout))return[3,2];return[4,e.resetAndFlush().then(function(){return!0})];case 1:return[2,r.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return null==this._connectionLivenessCheckTimeout||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(e){return null==e.authToken},e}();t.default=i},51619:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createChannelConnection=void 0;var l=r(10104),u=r(56889),c=s(r(63151)),p=s(r(8123)),d=u.error.PROTOCOL_ERROR,f=u.internal.logger.Logger,h=0;t.createChannelConnection=function(e,t,r,n,i,o,a){void 0===o&&(o=null),void 0===a&&(a=function(e){return new l.Channel(e)});var s=a(new l.ChannelConfig(e,t,r.errorCode(),i));return p.default.handshake(s,n).then(function(i){var a=i.protocolVersion,u=i.consumeRemainingBuffer,c=new l.Chunker(s),d=new l.Dechunker,f=new y(s,r,e,n,t.disableLosslessIntegers,o,c,t.notificationFilter,function(e){return p.default.create({version:a,channel:s,chunker:c,dechunker:d,disableLosslessIntegers:t.disableLosslessIntegers,useBigInt:t.useBigInt,serversideRouting:o,server:e.server,log:e.logger,observer:{onObserversCountChange:e._handleOngoingRequestsNumberChange.bind(e),onError:e._handleFatalError.bind(e),onFailure:e._resetOnFailure.bind(e),onProtocolError:e._handleProtocolError.bind(e),onErrorApplyTransformation:function(t){return e.handleAndTransformError(t,e._address)}}})},t.telemetryDisabled);return u(function(e){return d.write(e)}),f}).catch(function(e){return s.close().then(function(){throw e})})};var y=function(e){function t(t,r,n,i,o,a,s,l,u,c){void 0===o&&(o=!1),void 0===a&&(a=null);var p=e.call(this,r)||this;return p._authToken=null,p._idle=!1,p._reseting=!1,p._resetObservers=[],p._id=h++,p._address=n,p._server={address:n.asHostPort()},p._creationTimestamp=Date.now(),p._disableLosslessIntegers=o,p._ch=t,p._chunker=s,p._log=new f(i._level,function(e,t){return i._loggerFunction(e,"".concat(p," ").concat(t))}),p._serversideRouting=a,p._notificationFilter=l,p._telemetryDisabledDriverConfig=!0===c,p._telemetryDisabledConnection=!0,p._dbConnectionId=null,p._protocol=u(p),p._isBroken=!1,p._log.isDebugEnabled()&&p._log.debug("created towards ".concat(n)),p}return i(t,e),t.prototype.beginTransaction=function(e){return this._sendTelemetryIfEnabled(e),this._protocol.beginTransaction(e)},t.prototype.run=function(e,t,r){return this._sendTelemetryIfEnabled(r),this._protocol.run(e,t,r)},t.prototype._sendTelemetryIfEnabled=function(e){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||null==e||null==e.apiTelemetryConfig||this._protocol.telemetry({api:e.apiTelemetryConfig.api},{onCompleted:e.apiTelemetryConfig.onTelemetrySuccess,onError:e.beforeError})},t.prototype.commitTransaction=function(e){return this._protocol.commitTransaction(e)},t.prototype.rollbackTransaction=function(e){return this._protocol.rollbackTransaction(e)},t.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(t.prototype,"authToken",{get:function(){return this._authToken},set:function(e){this._authToken=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(e){this._idleTimestamp=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),t.prototype.connect=function(e,t,r,n){return o(this,void 0,void 0,function(){var i=this;return a(this,function(o){switch(o.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,u.newError)("Connection does not support re-auth");if(this._authToken=r,this._protocol.initialized)return[3,2];return[4,this._initialize(e,t,r)];case 1:case 3:return[2,o.sent()];case 2:if(!n)return[3,4];return[4,new Promise(function(e,t){i._protocol.logoff({onError:t}),i._protocol.logon({authToken:r,onError:t,onComplete:function(){return e(i)},flush:!0})})];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:r,flush:!0}),[2,this]}})})},t.prototype._initialize=function(e,t,r){var n=this,i=this;return new Promise(function(o,a){n._protocol.initialize({userAgent:e,boltAgent:t,authToken:r,notificationFilter:n._notificationFilter,onError:function(e){return a(e)},onComplete:function(e){if(e){var t=e.server;(!n.version||t)&&(n.version=t);var r=e.connection_id;if(n.databaseId||(n.databaseId=r),e.hints){var a=e.hints["connection.recv_timeout_seconds"];if(null!=a){var s=(0,u.toNumber)(a);Number.isInteger(s)&&s>0?n._ch.setupReceiveTimeout(1e3*s):n._log.info("Server located at ".concat(n._address," supplied an invalid connection receive timeout value (").concat(s,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}!0===e.hints["telemetry.enabled"]&&(n._telemetryDisabledConnection=!1)}}o(i)}})})},t.prototype.protocol=function(){return this._protocol},Object.defineProperty(t.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._server.version},set:function(e){this._server.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),t.prototype._handleFatalError=function(e){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||e,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(u.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},t.prototype._setIdle=function(e){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(e)},t.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},t.prototype._queueObserver=function(e){return this._protocol.queueObserverIfProtocolIsNotBroken(e)},t.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},t.prototype.resetAndFlush=function(){var e=this;return new Promise(function(t,r){e._reset({onError:function(t){e._isBroken?r(t):r(e._handleProtocolError("Received FAILURE as a response for RESET: "+t))},onComplete:function(){t()}})})},t.prototype._resetOnFailure=function(){var e=this;this.isOpen()&&this._reset({onError:function(){e._protocol.resetFailure()},onComplete:function(){e._protocol.resetFailure()}})},t.prototype._reset=function(e){var t=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(e):this._protocol.reset({onError:function(t){e.onError(t)},onComplete:function(){e.onComplete()}});return}this._resetObservers.push(e),this._reseting=!0;var r=function(e){t._reseting=!1;var r=t._resetObservers;t._resetObservers=[],r.forEach(e)};this._protocol.reset({onError:function(e){r(function(t){return t.onError(e)})},onComplete:function(){r(function(e){return e.onComplete()})}})},t.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},t.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},t.prototype._handleOngoingRequestsNumberChange=function(e){this._idle||(0===e?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},t.prototype.close=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return e.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},t.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},t.prototype._handleProtocolError=function(e){this._protocol.resetFailure(),this._updateCurrentObserver();var t=(0,u.newError)(e,d);return this._handleFatalError(t),t},t}(c.default);t.default=y},88700:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,r){var n=e.call(this,r)||this;return r&&(n._originalErrorHandler=t._errorHandler,t._errorHandler=n._errorHandler),n._delegate=t,n}return i(t,e),t.prototype.beginTransaction=function(e){return this._delegate.beginTransaction(e)},t.prototype.run=function(e,t,r){return this._delegate.run(e,t,r)},t.prototype.commitTransaction=function(e){return this._delegate.commitTransaction(e)},t.prototype.rollbackTransaction=function(e){return this._delegate.rollbackTransaction(e)},t.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(e){this._delegate.authToken=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._delegate.version},set:function(e){this._delegate.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(e){this._delegate.idleTimestamp=e},enumerable:!1,configurable:!0}),t.prototype.isOpen=function(){return this._delegate.isOpen()},t.prototype.protocol=function(){return this._delegate.protocol()},t.prototype.connect=function(e,t,r,n){return this._delegate.connect(e,t,r,n)},t.prototype.write=function(e,t,r){return this._delegate.write(e,t,r)},t.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},t.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},t.prototype.close=function(){return this._delegate.close()},t.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},t}(o(r(63151)).default);t.default=a},72574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(56889),i=n.error.SERVICE_UNAVAILABLE,o=n.error.SESSION_EXPIRED,a=function(){function e(e,t,r,n){this._errorCode=e,this._handleUnavailability=t||s,this._handleWriteFailure=r||s,this._handleSecurityError=n||s}return e.create=function(t){return new e(t.errorCode,t.handleUnavailability,t.handleWriteFailure,t.handleSecurityError)},e.prototype.errorCode=function(){return this._errorCode},e.prototype.handleAndTransformError=function(e,t,r){return null!=e&&null!=e.code&&e.code.startsWith("Neo.ClientError.Security.")?this._handleSecurityError(e,t,r):e&&(e.code===o||e.code===i||"Neo.TransientError.General.DatabaseUnavailable"===e.code)?this._handleUnavailability(e,t,r):e&&("Neo.ClientError.Cluster.NotALeader"===e.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===e.code)?this._handleWriteFailure(e,t,r):e},e}();function s(e){return e}t.default=a},63151:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),r(8123);var o=function(e){function t(t){var r=e.call(this)||this;return r._errorHandler=t,r}return i(t,e),Object.defineProperty(t.prototype,"id",{get:function(){throw Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){throw Error("not implemented")},set:function(e){throw Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authToken",{get:function(){throw Error("not implemented")},set:function(e){throw Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsReAuth",{get:function(){throw Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"creationTimestamp",{get:function(){throw Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"idleTimestamp",{get:function(){throw Error("not implemented")},set:function(e){throw Error("not implemented")},enumerable:!1,configurable:!0}),t.prototype.protocol=function(){throw Error("not implemented")},Object.defineProperty(t.prototype,"address",{get:function(){throw Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){throw Error("not implemented")},set:function(e){throw Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){throw Error("not implemented")},enumerable:!1,configurable:!0}),t.prototype.connect=function(e,t,r,n){throw Error("not implemented")},t.prototype.write=function(e,t,r){throw Error("not implemented")},t.prototype.close=function(){throw Error("not implemented")},t.prototype.handleAndTransformError=function(e,t){return this._errorHandler?this._errorHandler.handleAndTransformError(e,t,this):e},t}(r(56889).Connection);t.default=o},14624:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createChannelConnection=t.ConnectionErrorHandler=t.DelegateConnection=t.ChannelConnection=t.Connection=void 0;var s=a(r(63151));t.Connection=s.default;var l=o(r(51619));t.ChannelConnection=l.default,Object.defineProperty(t,"createChannelConnection",{enumerable:!0,get:function(){return l.createChannelConnection}});var u=a(r(88700));t.DelegateConnection=u.default;var c=a(r(72574));t.ConnectionErrorHandler=c.default,t.default=s.default},84386:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.packstream=t.channel=t.buf=t.bolt=t.loadBalancing=void 0,t.loadBalancing=o(r(16344)),t.bolt=o(r(8123)),t.buf=o(r(44925)),t.channel=o(r(10104)),t.packstream=o(r(34092)),a(r(59473),t)},17981:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reuseOngoingRequest=t.identity=void 0;var n=r(56889);t.identity=function(e){return e},t.reuseOngoingRequest=function(e,t){void 0===t&&(t=null);var r=new Map;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=n.json.stringify(i);if(r.has(a))return r.get(a);var s=e.apply(t,i);return r.set(a,s),s.finally(function(){r.delete(a)})}}},34752:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.object=t.functional=void 0,t.functional=o(r(17981)),t.object=o(r(34933))},34933:function(e,t){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.equals=void 0,t.equals=function(e,t){var n,i;if(e===t)return!0;if(null===e||null===t)return!1;if("object"==typeof e&&"object"==typeof t){var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;try{for(var s=r(o),l=s.next();!l.done;l=s.next()){var u=l.value;if(e[u]!==t[u])return!1}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return!0}return!1}},16344:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LeastConnectedLoadBalancingStrategy=t.LoadBalancingStrategy=void 0;var i=n(r(37663));t.LoadBalancingStrategy=i.default;var o=n(r(94392));t.LeastConnectedLoadBalancingStrategy=o.default,t.default=o.default},94392:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(33305)),s=function(e){function t(t){var r=e.call(this)||this;return r._readersIndex=new a.default,r._writersIndex=new a.default,r._connectionPool=t,r}return i(t,e),t.prototype.selectReader=function(e){return this._select(e,this._readersIndex)},t.prototype.selectWriter=function(e){return this._select(e,this._writersIndex)},t.prototype._select=function(e,t){var r=e.length;if(0===r)return null;var n=t.next(r),i=n,o=null,a=Number.MAX_SAFE_INTEGER;do{var s=e[i],l=this._connectionPool.activeResourceCount(s);l<a&&(o=s,a=l),i===r-1?i=0:i++}while(i!==n);return o},t}(o(r(37663)).default);t.default=s},37663:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.selectReader=function(e){throw Error("Abstract function")},e.prototype.selectWriter=function(e){throw Error("Abstract function")},e}();t.default=r},33305:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._offset=e||0}return e.prototype.next=function(e){if(0===e)return -1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%e},e}();t.default=r},34092:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.structure=t.v2=t.v1=void 0;var a=o(r(32842));t.v1=a;var s=o(r(55207));t.v2=s;var l=o(r(84875));t.structure=l,t.default=s},32842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Unpacker=t.Packer=void 0;var n=r(10104),i=r(34752),o=r(84875),a=r(56889),s=a.error.PROTOCOL_ERROR,l=function(){function e(e){this._ch=e,this._byteArraysSupported=!0}return e.prototype.packable=function(e,t){var r,n=this;void 0===t&&(t=i.functional.identity);try{e=t(e)}catch(e){return function(){throw e}}if(null===e)return function(){return n._ch.writeUInt8(192)};if(!0===e)return function(){return n._ch.writeUInt8(195)};if(!1===e)return function(){return n._ch.writeUInt8(194)};if("number"==typeof e)return function(){return n.packFloat(e)};if("string"==typeof e)return function(){return n.packString(e)};if("bigint"==typeof e)return function(){return n.packInteger((0,a.int)(e))};if((0,a.isInt)(e))return function(){return n.packInteger(e)};if(e instanceof Int8Array)return function(){return n.packBytes(e)};if(e instanceof Array)return function(){n.packListHeader(e.length);for(var r=0;r<e.length;r++)n.packable(void 0===e[r]?null:e[r],t)()};if(null!=(r=e)&&"function"==typeof r[Symbol.iterator])return this.packableIterable(e,t);if(e instanceof o.Structure){for(var s=[],l=0;l<e.fields.length;l++)s[l]=this.packable(e.fields[l],t);return function(){return n.packStruct(e.signature,s)}}else if("object"==typeof e)return function(){for(var r=Object.keys(e),i=0,o=0;o<r.length;o++)void 0!==e[r[o]]&&i++;n.packMapHeader(i);for(var o=0;o<r.length;o++){var a=r[o];void 0!==e[a]&&(n.packString(a),n.packable(e[a],t)())}};else return this._nonPackableValue("Unable to pack the given value: ".concat(e))},e.prototype.packableIterable=function(e,t){try{var r=Array.from(e);return this.packable(r,t)}catch(t){throw(0,a.newError)("Cannot pack given iterable, ".concat(t.message,": ").concat(e))}},e.prototype.packStruct=function(e,t){t=t||[],this.packStructHeader(t.length,e);for(var r=0;r<t.length;r++)t[r]()},e.prototype.packInteger=function(e){var t=e.high,r=e.low;e.greaterThanOrEqual(-16)&&e.lessThan(128)?this._ch.writeInt8(r):e.greaterThanOrEqual(-128)&&e.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(r)):e.greaterThanOrEqual(-32768)&&e.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(r)):(e.greaterThanOrEqual(-2147483648)&&e.lessThan(2147483648)?this._ch.writeUInt8(202):(this._ch.writeUInt8(203),this._ch.writeInt32(t)),this._ch.writeInt32(r))},e.prototype.packFloat=function(e){this._ch.writeUInt8(193),this._ch.writeFloat64(e)},e.prototype.packString=function(e){var t=n.utf8.encode(e),r=t.length;if(r<16)this._ch.writeUInt8(128|r),this._ch.writeBytes(t);else if(r<256)this._ch.writeUInt8(208),this._ch.writeUInt8(r),this._ch.writeBytes(t);else if(r<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256),this._ch.writeBytes(t);else if(r<4294967296)this._ch.writeUInt8(210),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256),this._ch.writeBytes(t);else throw(0,a.newError)("UTF-8 strings of size "+r+" are not supported")},e.prototype.packListHeader=function(e){if(e<16)this._ch.writeUInt8(144|e);else if(e<256)this._ch.writeUInt8(212),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else if(e<4294967296)this._ch.writeUInt8(214),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else throw(0,a.newError)("Lists of size "+e+" are not supported")},e.prototype.packBytes=function(e){if(this._byteArraysSupported){this.packBytesHeader(e.length);for(var t=0;t<e.length;t++)this._ch.writeInt8(e[t])}else throw(0,a.newError)("Byte arrays are not supported by the database this driver is connected to")},e.prototype.packBytesHeader=function(e){if(e<256)this._ch.writeUInt8(204),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else if(e<4294967296)this._ch.writeUInt8(206),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else throw(0,a.newError)("Byte arrays of size "+e+" are not supported")},e.prototype.packMapHeader=function(e){if(e<16)this._ch.writeUInt8(160|e);else if(e<256)this._ch.writeUInt8(216),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256);else if(e<4294967296)this._ch.writeUInt8(218),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else throw(0,a.newError)("Maps of size "+e+" are not supported")},e.prototype.packStructHeader=function(e,t){if(e<16)this._ch.writeUInt8(176|e),this._ch.writeUInt8(t);else if(e<256)this._ch.writeUInt8(220),this._ch.writeUInt8(e),this._ch.writeUInt8(t);else if(e<65536)this._ch.writeUInt8(221),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256);else throw(0,a.newError)("Structures of size "+e+" are not supported")},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(e){return function(){throw(0,a.newError)(e,s)}},e}();t.Packer=l;var u=function(){function e(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this._disableLosslessIntegers=e,this._useBigInt=t}return e.prototype.unpack=function(e,t){void 0===t&&(t=i.functional.identity);var r=e.readUInt8(),n=240&r,o=15&r;if(192===r)return null;var s=this._unpackBoolean(r);if(null!==s)return s;var l=this._unpackNumberOrInteger(r,e);if(null!==l){if((0,a.isInt)(l)){if(this._useBigInt)return l.toBigInt();if(this._disableLosslessIntegers)return l.toNumberOrInfinity()}return l}var u=this._unpackString(r,n,o,e);if(null!==u)return u;var c=this._unpackList(r,n,o,e,t);if(null!==c)return c;var p=this._unpackByteArray(r,e);if(null!==p)return p;var d=this._unpackMap(r,n,o,e,t);if(null!==d)return d;var f=this._unpackStruct(r,n,o,e,t);if(null!==f)return f;throw(0,a.newError)("Unknown packed value with marker "+r.toString(16))},e.prototype.unpackInteger=function(e){var t=e.readUInt8(),r=this._unpackInteger(t,e);if(null==r)throw(0,a.newError)("Unable to unpack integer value with marker "+t.toString(16));return r},e.prototype._unpackBoolean=function(e){return 195===e||194!==e&&null},e.prototype._unpackNumberOrInteger=function(e,t){return 193===e?t.readFloat64():this._unpackInteger(e,t)},e.prototype._unpackInteger=function(e,t){if(e>=0&&e<128)return(0,a.int)(e);if(e>=240&&e<256)return(0,a.int)(e-256);if(200===e)return(0,a.int)(t.readInt8());if(201===e)return(0,a.int)(t.readInt16());if(202===e){var r=t.readInt32();return(0,a.int)(r)}if(203!==e)return null;var n=t.readInt32(),i=t.readInt32();return new a.Integer(i,n)},e.prototype._unpackString=function(e,t,r,i){return 128===t?n.utf8.decode(i,r):208===e?n.utf8.decode(i,i.readUInt8()):209===e?n.utf8.decode(i,i.readUInt16()):210===e?n.utf8.decode(i,i.readUInt32()):null},e.prototype._unpackList=function(e,t,r,n,i){return 144===t?this._unpackListWithSize(r,n,i):212===e?this._unpackListWithSize(n.readUInt8(),n,i):213===e?this._unpackListWithSize(n.readUInt16(),n,i):214===e?this._unpackListWithSize(n.readUInt32(),n,i):null},e.prototype._unpackListWithSize=function(e,t,r){for(var n=[],i=0;i<e;i++)n.push(this.unpack(t,r));return n},e.prototype._unpackByteArray=function(e,t){return 204===e?this._unpackByteArrayWithSize(t.readUInt8(),t):205===e?this._unpackByteArrayWithSize(t.readUInt16(),t):206===e?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(e,t){for(var r=new Int8Array(e),n=0;n<e;n++)r[n]=t.readInt8();return r},e.prototype._unpackMap=function(e,t,r,n,i){return 160===t?this._unpackMapWithSize(r,n,i):216===e?this._unpackMapWithSize(n.readUInt8(),n,i):217===e?this._unpackMapWithSize(n.readUInt16(),n,i):218===e?this._unpackMapWithSize(n.readUInt32(),n,i):null},e.prototype._unpackMapWithSize=function(e,t,r){for(var n={},i=0;i<e;i++)n[this.unpack(t,r)]=this.unpack(t,r);return n},e.prototype._unpackStruct=function(e,t,r,n,i){return 176===t?this._unpackStructWithSize(r,n,i):220===e?this._unpackStructWithSize(n.readUInt8(),n,i):221===e?this._unpackStructWithSize(n.readUInt16(),n,i):null},e.prototype._unpackStructWithSize=function(e,t,r){for(var n=t.readUInt8(),i=new o.Structure(n,[]),a=0;a<e;a++)i.fields.push(this.unpack(t,r));return r(i)},e}();t.Unpacker=u},55207:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Unpacker=t.Packer=void 0;var l=s(r(32842)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.disableByteArrays=function(){throw Error("Bolt V2 should always support byte arrays")},t}(l.Packer);t.Packer=u;var c=function(e){function t(t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),e.call(this,t,r)||this}return i(t,e),t}(l.Unpacker);t.Unpacker=c},84875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyStructSize=t.Structure=void 0;var n=r(56889),i=n.error.PROTOCOL_ERROR,o=function(){function e(e,t){this.signature=e,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var e="",t=0;t<this.fields.length;t++)t>0&&(e+=", "),e+=this.fields[t];return"Structure("+this.signature+", ["+e+"])"},e}();t.Structure=o,t.verifyStructSize=function(e,t,r){if(t!==r)throw(0,n.newError)("Wrong struct size for ".concat(e,", expected ").concat(t," but was ").concat(r),i)},t.default=o},47610:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RoutingTable=t.Rediscovery=void 0;var i=n(r(55875));t.Rediscovery=i.default;var o=n(r(68550));t.RoutingTable=o.default,t.default=i.default},55875:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(68550));r(56889);var o=function(){function e(e){this._routingContext=e}return e.prototype.lookupRoutingTableOnRouter=function(e,t,r,n){var o=this;return e._acquireConnection(function(a){return o._requestRawRoutingTable(a,e,t,r,n).then(function(e){return e.isNull?null:i.default.fromRawRoutingTable(t,r,e)})})},e.prototype._requestRawRoutingTable=function(e,t,r,n,i){var o=this;return new Promise(function(n,a){e.protocol().requestRoutingInformation({routingContext:o._routingContext,databaseName:r,impersonatedUser:i,sessionContext:{bookmarks:t._lastBookmarks,mode:t._mode,database:t._database,afterComplete:t._onComplete},onCompleted:n,onError:a})})},e}();t.default=o},68550:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createValidRoutingTable=void 0;var o=r(56889),a=o.internal.constants,s=a.ACCESS_MODE_WRITE,l=a.ACCESS_MODE_READ,u=o.internal.serverAddress.ServerAddress,c=o.error.PROTOCOL_ERROR,p=function(){function e(e){var t=void 0===e?{}:e,r=t.database,n=t.routers,i=t.readers,a=t.writers,s=t.expirationTime,l=t.ttl;this.database=r||null,this.databaseName=r||"default database",this.routers=n||[],this.readers=i||[],this.writers=a||[],this.expirationTime=s||(0,o.int)(0),this.ttl=l}return e.fromRawRoutingTable=function(e,t,r){return f(e,t,r)},e.prototype.forget=function(e){this.readers=d(this.readers,e),this.writers=d(this.writers,e)},e.prototype.forgetRouter=function(e){this.routers=d(this.routers,e)},e.prototype.forgetWriter=function(e){this.writers=d(this.writers,e)},e.prototype.isStaleFor=function(e){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||e===l&&0===this.readers.length||e===s&&0===this.writers.length},e.prototype.isExpiredFor=function(e){return this.expirationTime.add(e).lessThan(Date.now())},e.prototype.allServers=function(){return i(i(i([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();function d(e,t){return e.filter(function(e){return e.asKey()!==t.asKey()})}function f(e,t,r){var n=r.ttl,i=function(e,t){try{var r=(0,o.int)(Date.now()),n=(0,o.int)(e.ttl).multiply(1e3).add(r);if(n.lessThan(r))return o.Integer.MAX_VALUE;return n}catch(r){throw(0,o.newError)("Unable to parse TTL entry from router ".concat(t," from raw routing table:\n").concat(o.json.stringify(e),"\nError message: ").concat(r.message),c)}}(r,t),a=function(e,t){try{var r=[],n=[],i=[];return e.servers.forEach(function(e){var t=e.role,o=e.addresses;"ROUTE"===t?r=y(o).map(function(e){return u.fromUrl(e)}):"WRITE"===t?i=y(o).map(function(e){return u.fromUrl(e)}):"READ"===t&&(n=y(o).map(function(e){return u.fromUrl(e)}))}),{routers:r,readers:n,writers:i}}catch(r){throw(0,o.newError)("Unable to parse servers entry from router ".concat(t," from addresses:\n").concat(o.json.stringify(e.servers),"\nError message: ").concat(r.message),c)}}(r,t),s=a.routers,l=a.readers,d=a.writers;return h(s,"routers",t),h(l,"readers",t),new p({database:e||r.db,routers:s,readers:l,writers:d,expirationTime:i,ttl:n})}function h(e,t,r){if(0===e.length)throw(0,o.newError)("Received no "+t+" from router "+r,c)}function y(e){if(!Array.isArray(e))throw TypeError("Array expected but got: "+e);return Array.from(e)}t.default=p,t.createValidRoutingTable=f},62716:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.staticAuthTokenManager=t.authTokenManagers=t.AuthTokenAndExpiration=void 0;var a=o(r(52480)),s=r(48912),l=function(){function e(){}return e.prototype.getToken=function(){throw Error("Not Implemented")},e.prototype.handleSecurityException=function(e,t){throw Error("Not implemented")},e}();t.default=l,t.AuthTokenAndExpiration=function(){this.token=a.default.none(),this.expiration=void 0};var u=new(function(){function e(){}return e.prototype.bearer=function(e){var t=e.tokenProvider;if("function"!=typeof t)throw TypeError("tokenProvider should be function, but got: ".concat(typeof t));return new p(t,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(e){var t=this,r=e.tokenProvider;if("function"!=typeof r)throw TypeError("tokenProvider should be function, but got: ".concat(typeof r));return new p(function(){return n(t,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return e={},[4,r()];case 1:return[2,(e.token=t.sent(),e)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}());t.authTokenManagers=u,Object.freeze(u),t.staticAuthTokenManager=function(e){return new d(e.authToken)};var c=function(){function e(e){void 0===e&&(e=[]),this._subscribers=e}return e.prototype.subscribe=function(e){this._subscribers.push(e)},e.prototype.onCompleted=function(e){this._subscribers.forEach(function(t){return t.onCompleted(e)})},e.prototype.onError=function(e){this._subscribers.forEach(function(t){return t.onError(e)})},e}(),p=function(){function e(e,t,r,n){this._tokenProvider=e,this._handledSecurityCodes=t,this._currentAuthData=r,this._refreshObservable=n}return e.prototype.getToken=function(){var e;return n(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:if(!(void 0===this._currentAuthData||void 0!==this._currentAuthData.expiration&&this._currentAuthData.expiration<new Date))return[3,2];return[4,this._refreshAuthToken()];case 1:t.sent(),t.label=2;case 2:return[2,null===(e=this._currentAuthData)||void 0===e?void 0:e.token]}})})},e.prototype.handleSecurityException=function(e,t){var r;return!!this._handledSecurityCodes.includes(t)&&(s.util.equals(e,null===(r=this._currentAuthData)||void 0===r?void 0:r.token)&&this._scheduleRefreshAuthToken(),!0)},e.prototype._scheduleRefreshAuthToken=function(e){var t=this;void 0===this._refreshObservable&&(this._currentAuthData=void 0,this._refreshObservable=new c,Promise.resolve(this._tokenProvider()).then(function(e){var r;t._currentAuthData=e,null===(r=t._refreshObservable)||void 0===r||r.onCompleted(e)}).catch(function(e){var r;null===(r=t._refreshObservable)||void 0===r||r.onError(e)}).finally(function(){t._refreshObservable=void 0})),void 0!==e&&this._refreshObservable.subscribe(e)},e.prototype._refreshAuthToken=function(){return n(this,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,r){e._scheduleRefreshAuthToken({onCompleted:t,onError:r})})];case 1:return[2,t.sent()]}})})},e}(),d=function(){function e(e){this._authToken=e}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(e,t){return!1},e}()},52480:(e,t)=>{"use strict";function r(e){return!(null==e||""===e||Object.getPrototypeOf(e)===Object.prototype&&0===Object.keys(e).length)}Object.defineProperty(t,"__esModule",{value:!0}),t.default={basic:function(e,t,r){return null!=r?{scheme:"basic",principal:e,credentials:t,realm:r}:{scheme:"basic",principal:e,credentials:t}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,t,n,i,o){var a={scheme:i,principal:e};return r(t)&&(a.credentials=t),r(n)&&(a.realm=n),r(o)&&(a.parameters=o),a}}},82056:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.bookmarkManager=void 0;var s=function(){function e(){throw Error("Not implemented")}return e.prototype.updateBookmarks=function(e,t){return r(this,void 0,void 0,function(){return n(this,function(e){throw Error("Not implemented")})})},e.prototype.getBookmarks=function(){return r(this,void 0,void 0,function(){return n(this,function(e){throw Error("Not implemented")})})},e}();t.default=s,t.bookmarkManager=function(e){return void 0===e&&(e={}),new l(new Set(e.initialBookmarks),e.bookmarksSupplier,e.bookmarksConsumer)};var l=function(){function e(e,t,r){this._bookmarks=e,this._bookmarksSupplier=t,this._bookmarksConsumer=r}return e.prototype.updateBookmarks=function(e,t){return r(this,void 0,void 0,function(){var r,s,l,u,c,p,d,f,h,y;return n(this,function(n){switch(n.label){case 0:r=this._bookmarks;try{for(l=(s=i(e)).next();!l.done;l=s.next())u=l.value,r.delete(u)}catch(e){d={error:e}}finally{try{l&&!l.done&&(f=s.return)&&f.call(s)}finally{if(d)throw d.error}}try{for(p=(c=i(t)).next();!p.done;p=c.next())u=p.value,r.add(u)}catch(e){h={error:e}}finally{try{p&&!p.done&&(y=c.return)&&y.call(c)}finally{if(h)throw h.error}}if("function"!=typeof this._bookmarksConsumer)return[3,2];return[4,this._bookmarksConsumer(a([],o(r),!1))];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var e;return r(this,void 0,void 0,function(){var t,r,s,l,u,c,p;return n(this,function(n){switch(n.label){case 0:if(t=new Set(this._bookmarks),"function"!=typeof this._bookmarksSupplier)return[3,2];return[4,this._bookmarksSupplier()];case 1:r=null!==(e=n.sent())&&void 0!==e?e:[];try{for(l=(s=i(r)).next();!l.done;l=s.next())u=l.value,t.add(u)}catch(e){c={error:e}}finally{try{l&&!l.done&&(p=s.return)&&p.call(s)}finally{if(c)throw c.error}}n.label=2;case 2:return[2,a([],o(t),!1)]}})})},e}()},32517:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveCertificateProvider=t.clientCertificateProviders=t.RotatingClientCertificateProvider=t.ClientCertificateProvider=void 0;var u=l(r(72362));t.default=function(){this.certfile="",this.keyfile="",this.password=void 0};var c=function(){function e(){}return e.prototype.hasUpdate=function(){throw Error("Not Implemented")},e.prototype.getClientCertificate=function(){throw Error("Not Implemented")},e}();t.ClientCertificateProvider=c;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.updateCertificate=function(e){throw Error("Not implemented")},t}(c);t.RotatingClientCertificateProvider=p;var d=new(function(){function e(){}return e.prototype.rotating=function(e){var t=e.initialCertificate;if(null==t||!f(t))throw TypeError("initialCertificate should be ClientCertificate, but got ".concat(u.stringify(t)));return new v(o({},t))},e}());function f(e){var t;return null!=e&&"object"==typeof e&&"certfile"in e&&(h(t=e.certfile)||y(t,h))&&"keyfile"in e&&function(e){function t(e){return"string"==typeof e||null!=e&&"object"==typeof e&&"path"in e&&"string"==typeof e.path&&m("password",e)}return t(e)||y(e,t)}(e.keyfile)&&m("password",e)}function h(e){return"string"==typeof e}function y(e,t,r){return void 0===r&&(r=!1),Array.isArray(e)&&(r||e.length>0)&&e.filter(t).length===e.length}function m(e,t){return!(e in t)||null==t[e]||"string"==typeof t[e]}t.clientCertificateProviders=d,Object.freeze(d),t.resolveCertificateProvider=function(e){if(null!=e){if("object"==typeof e&&"hasUpdate"in e&&"getClientCertificate"in e&&"function"==typeof e.getClientCertificate&&"function"==typeof e.hasUpdate)return e;if(f(e)){var t=o({},e);return{getClientCertificate:function(){return t},hasUpdate:function(){return!1}}}throw TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(u.stringify(e)))}};var v=function(){function e(e,t){void 0===t&&(t=!1),this._certificate=e,this._updated=t}return e.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},e.prototype.getClientCertificate=function(){return this._certificate},e.prototype.updateCertificate=function(e){if(!f(e))throw TypeError("certificate should be ClientCertificate, but got ".concat(u.stringify(e)));this._certificate=o({},e),this._updated=!0},e}()},59209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Releasable=void 0;var r=function(){function e(){}return e.prototype.release=function(){throw Error("Not implemented")},e}();t.Releasable=r;var n=function(){function e(){}return e.prototype.acquireConnection=function(e){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.verifyConnectivityAndGetServerInfo=function(e){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(e){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();t.default=n},76757:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.beginTransaction=function(e){throw Error("Not implemented")},e.prototype.run=function(e,t,r){throw Error("Not implemented")},e.prototype.commitTransaction=function(e){throw Error("Not implemented")},e.prototype.rollbackTransaction=function(e){throw Error("Not implemented")},e.prototype.resetAndFlush=function(){throw Error("Not implemented")},e.prototype.isOpen=function(){throw Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw Error("Not implemented")},e}();t.default=r},92438:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryConfig=t.SessionConfig=t.routing=t.WRITE=t.READ=t.Driver=void 0;var a=r(78737),s=o(r(71959)),l=r(57989),u=r(81734),c=o(r(82044)),p=r(57113),d=r(82056),f=o(r(60688)),h=o(r(75687)),y=r(49348),m=l.ACCESS_MODE_READ;t.READ=m;var v=l.ACCESS_MODE_WRITE;t.WRITE=v;var g=0;t.SessionConfig=function(){this.defaultAccessMode=v,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0};var b={WRITE:"WRITE",READ:"READ"};t.routing=b,Object.freeze(b),t.QueryConfig=function(){this.routing=b.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0};var _=function(){function e(e,t,r,n,i){void 0===t&&(t={}),void 0===n&&(n=function(e){return new c.default(e)}),void 0===i&&(i=function(e){return new h.default(e)}),(o=t).maxConnectionLifetime=T(o.maxConnectionLifetime,36e5),o.maxConnectionPoolSize=T(o.maxConnectionPoolSize,l.DEFAULT_POOL_MAX_SIZE),o.connectionAcquisitionTimeout=T(o.connectionAcquisitionTimeout,l.DEFAULT_POOL_ACQUISITION_TIMEOUT),o.fetchSize=E(o.fetchSize,1e3),o.connectionTimeout=0===(a=parseInt(o.connectionTimeout,10))||!isNaN(a)&&a<0?null:isNaN(a)?l.DEFAULT_CONNECTION_TIMEOUT_MILLIS:a,o.connectionLivenessCheckTimeout=function(e){if(null!=e){var t=parseInt(e,10);if(t<0||Number.isNaN(t))throw Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(t));return t}}(o.connectionLivenessCheckTimeout);var o,a,s=u.Logger.create(t);(function(e,t){var r,n,i=e.resolver;if(null!=i&&"function"!=typeof i)throw TypeError("Configured resolver should be a function. Got: ".concat(typeof i));if(e.connectionAcquisitionTimeout<e.connectionTimeout&&t.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),(null===(r=e.notificationFilter)||void 0===r?void 0:r.disabledCategories)!=null&&(null===(n=e.notificationFilter)||void 0===n?void 0:n.disabledClassifications)!=null)throw Error('The notificationFilter can\'t have both "disabledCategories" and  "disabledClassifications" configured at the same time.')})(t,s),this._id=g++,this._meta=e,this._config=t,this._log=s,this._createConnectionProvider=r,this._createSession=n,this._defaultExecuteQueryBookmarkManager=(0,d.bookmarkManager)(),this._queryExecutor=i(this.session.bind(this)),this._connectionProvider=null,this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(e,t,r){var o,a,s;return void 0===r&&(r={}),n(this,void 0,void 0,function(){var n,l,u;return i(this,function(i){switch(i.label){case 0:if(n=null===r.bookmarkManager?void 0:null!==(o=r.bookmarkManager)&&void 0!==o?o:this.executeQueryBookmarkManager,l=null!==(a=r.resultTransformer)&&void 0!==a?a:f.default.eagerResultTransformer(),(u=null!==(s=r.routing)&&void 0!==s?s:b.WRITE)!==b.READ&&u!==b.WRITE)throw(0,y.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:l,bookmarkManager:n,routing:u,database:r.database,impersonatedUser:r.impersonatedUser,transactionConfig:r.transactionConfig,auth:r.auth,signal:r.signal},e,t)];case 1:return[2,i.sent()]}})})},e.prototype.verifyConnectivity=function(e){var t=(void 0===e?{}:e).database;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:void 0===t?"":t,accessMode:m})},e.prototype.verifyAuthentication=function(e){var t=void 0===e?{}:e,r=t.database,o=t.auth;return n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this._getOrCreateConnectionProvider().verifyAuthentication({database:null!=r?r:"system",auth:o,accessMode:m})];case 1:return[2,e.sent()]}})})},e.prototype.getServerInfo=function(e){var t=(void 0===e?{}:e).database;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:void 0===t?"":t,accessMode:m})},e.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){return this._getOrCreateConnectionProvider().supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===p.ENCRYPTION_ON||!0===this._config.encrypted},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(e){var t=void 0===e?{}:e,r=t.defaultAccessMode,n=void 0===r?v:r,i=t.bookmarks,o=t.database,a=t.impersonatedUser,s=t.fetchSize,l=t.bookmarkManager,u=t.notificationFilter,c=t.auth;return this._newSession({defaultAccessMode:n,bookmarkOrBookmarks:i,database:void 0===o?"":o,reactive:!1,impersonatedUser:a,fetchSize:E(s,this._config.fetchSize),bookmarkManager:l,notificationFilter:u,auth:c})},e.prototype.close=function(){return(this._log.info("Driver ".concat(this._id," closing")),null!=this._connectionProvider)?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._newSession=function(e){var t=e.defaultAccessMode,r=e.bookmarkOrBookmarks,n=e.database,i=e.reactive,o=e.impersonatedUser,s=e.fetchSize,l=e.bookmarkManager,u=e.notificationFilter,p=e.auth,d=c.default._validateSessionMode(t),f=this._getOrCreateConnectionProvider(),h=null!=r?new a.Bookmarks(r):a.Bookmarks.empty();return this._createSession({mode:d,database:null!=n?n:"",connectionProvider:f,bookmarks:h,config:this._config,reactive:i,impersonatedUser:o,fetchSize:s,bookmarkManager:l,notificationFilter:u,auth:p,log:this._log})},e.prototype._getOrCreateConnectionProvider=function(){var e;return null==this._connectionProvider&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(e=this._config,new s.default(e.resolver)))),this._connectionProvider},e}();function T(e,t){var r=parseInt(e,10);return r>0||0===r?r:r<0?Number.MAX_SAFE_INTEGER:t}function E(e,t){var r=parseInt(e,10);if(r>0||r===l.FETCH_ALL)return r;if(0!==r&&!(r<0))return t;throw Error("The fetch size can only be a positive value or ".concat(l.FETCH_ALL," for ALL. However fetchSize = ").concat(r))}t.Driver=_,t.default=_},49348:function(e,t){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PROTOCOL_ERROR=t.SESSION_EXPIRED=t.SERVICE_UNAVAILABLE=t.Neo4jError=t.isRetriableError=t.newError=void 0;var i="ServiceUnavailable";t.SERVICE_UNAVAILABLE=i;var o="SessionExpired";t.SESSION_EXPIRED=o,t.PROTOCOL_ERROR="ProtocolError";var a=function(e){function t(r,n,a){var s=e.call(this,r,null!=a?{cause:a}:void 0)||this;return s.constructor=t,s.__proto__=t.prototype,s.code=n,s.name="Neo4jError",s.retriable=n===i||n===o||"Neo.ClientError.Security.AuthorizationExpired"===n||(null==n?void 0:n.includes("TransientError"))===!0,s}return n(t,e),t.isRetriable=function(e){return null!=e&&e instanceof t&&e.retriable},t}(Error);t.Neo4jError=a,t.newError=function(e,t,r){return new a(e,null!=t?t:"N/A",r)};var s=a.isRetriable;t.isRetriableError=s},75021:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPathSegment=t.PathSegment=t.isPath=t.Path=t.isUnboundRelationship=t.UnboundRelationship=t.isRelationship=t.Relationship=t.isNode=t.Node=void 0;var n=r(72362),i={value:!0,enumerable:!1,configurable:!1,writable:!1},o="__isNode__",a="__isRelationship__",s="__isUnboundRelationship__",l="__isPath__",u="__isPathSegment__";function c(e,t){return null!=e&&!0===e[t]}var p=function(){function e(e,t,r,n){this.identity=e,this.labels=t,this.properties=r,this.elementId=m(n,function(){return e.toString()})}return e.prototype.toString=function(){for(var e="("+this.elementId,t=0;t<this.labels.length;t++)e+=":"+this.labels[t];var r=Object.keys(this.properties);if(r.length>0){e+=" {";for(var t=0;t<r.length;t++)t>0&&(e+=","),e+=r[t]+":"+(0,n.stringify)(this.properties[r[t]]);e+="}"}return e+")"},e}();t.Node=p,Object.defineProperty(p.prototype,o,i),t.isNode=function(e){return c(e,o)};var d=function(){function e(e,t,r,n,i,o,a,s){this.identity=e,this.start=t,this.end=r,this.type=n,this.properties=i,this.elementId=m(o,function(){return e.toString()}),this.startNodeElementId=m(a,function(){return t.toString()}),this.endNodeElementId=m(s,function(){return r.toString()})}return e.prototype.toString=function(){var e="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){e+=" {";for(var r=0;r<t.length;r++)r>0&&(e+=","),e+=t[r]+":"+(0,n.stringify)(this.properties[t[r]]);e+="}"}return e+("]->("+this.endNodeElementId)+")"},e}();t.Relationship=d,Object.defineProperty(d.prototype,a,i),t.isRelationship=function(e){return c(e,a)};var f=function(){function e(e,t,r,n){this.identity=e,this.type=t,this.properties=r,this.elementId=m(n,function(){return e.toString()})}return e.prototype.bind=function(e,t){return new d(this.identity,e,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(e,t){return new d(this.identity,e.identity,t.identity,this.type,this.properties,this.elementId,e.elementId,t.elementId)},e.prototype.toString=function(){var e="-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){e+=" {";for(var r=0;r<t.length;r++)r>0&&(e+=","),e+=t[r]+":"+(0,n.stringify)(this.properties[t[r]]);e+="}"}return e+"]->"},e}();t.UnboundRelationship=f,Object.defineProperty(f.prototype,s,i),t.isUnboundRelationship=function(e){return c(e,s)};var h=function(e,t,r){this.start=e,this.relationship=t,this.end=r};t.PathSegment=h,Object.defineProperty(h.prototype,u,i),t.isPathSegment=function(e){return c(e,u)};var y=function(e,t,r){this.start=e,this.end=t,this.segments=r,this.length=r.length};function m(e,t){return null==e?t():e}t.Path=y,Object.defineProperty(y.prototype,l,i),t.isPath=function(e){return c(e,l)}},56889:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Releasable=t.ConnectionProvider=t.EagerResult=t.Result=t.Stats=t.QueryStatistics=t.ProfiledPlan=t.Plan=t.GqlStatusObject=t.Notification=t.ServerInfo=t.queryType=t.ResultSummary=t.Record=t.isPathSegment=t.PathSegment=t.isPath=t.Path=t.isUnboundRelationship=t.UnboundRelationship=t.isRelationship=t.Relationship=t.isNode=t.Node=t.Time=t.LocalTime=t.LocalDateTime=t.isTime=t.isLocalTime=t.isLocalDateTime=t.isDuration=t.isDateTime=t.isDate=t.Duration=t.DateTime=t.Date=t.Point=t.isPoint=t.internal=t.toString=t.toNumber=t.inSafeRange=t.isInt=t.int=t.Integer=t.error=t.isRetriableError=t.Neo4jError=t.newError=t.authTokenManagers=void 0,t.resolveCertificateProvider=t.clientCertificateProviders=t.notificationFilterMinimumSeverityLevel=t.notificationFilterDisabledClassification=t.notificationFilterDisabledCategory=t.notificationSeverityLevel=t.notificationClassification=t.notificationCategory=t.resultTransformers=t.routing=t.staticAuthTokenManager=t.bookmarkManager=t.auth=t.json=t.driver=t.types=t.Driver=t.Session=t.TransactionPromise=t.ManagedTransaction=t.Transaction=t.Connection=void 0;var s=r(49348);Object.defineProperty(t,"newError",{enumerable:!0,get:function(){return s.newError}}),Object.defineProperty(t,"Neo4jError",{enumerable:!0,get:function(){return s.Neo4jError}}),Object.defineProperty(t,"isRetriableError",{enumerable:!0,get:function(){return s.isRetriableError}});var l=o(r(88563));t.Integer=l.default,Object.defineProperty(t,"int",{enumerable:!0,get:function(){return l.int}}),Object.defineProperty(t,"isInt",{enumerable:!0,get:function(){return l.isInt}}),Object.defineProperty(t,"inSafeRange",{enumerable:!0,get:function(){return l.inSafeRange}}),Object.defineProperty(t,"toNumber",{enumerable:!0,get:function(){return l.toNumber}}),Object.defineProperty(t,"toString",{enumerable:!0,get:function(){return l.toString}});var u=r(28613);Object.defineProperty(t,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(t,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(t,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(t,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(t,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(t,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(t,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(t,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(t,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(t,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(t,"Time",{enumerable:!0,get:function(){return u.Time}});var c=r(75021);Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(t,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(t,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(t,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(t,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(t,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(t,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(t,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(t,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var p=a(r(83358));t.Record=p.default;var d=r(59378);Object.defineProperty(t,"isPoint",{enumerable:!0,get:function(){return d.isPoint}}),Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return d.Point}});var f=o(r(52455));t.ResultSummary=f.default,Object.defineProperty(t,"queryType",{enumerable:!0,get:function(){return f.queryType}}),Object.defineProperty(t,"ServerInfo",{enumerable:!0,get:function(){return f.ServerInfo}}),Object.defineProperty(t,"Plan",{enumerable:!0,get:function(){return f.Plan}}),Object.defineProperty(t,"ProfiledPlan",{enumerable:!0,get:function(){return f.ProfiledPlan}}),Object.defineProperty(t,"QueryStatistics",{enumerable:!0,get:function(){return f.QueryStatistics}}),Object.defineProperty(t,"Stats",{enumerable:!0,get:function(){return f.Stats}});var h=o(r(21708));t.Notification=h.default,Object.defineProperty(t,"GqlStatusObject",{enumerable:!0,get:function(){return h.GqlStatusObject}}),Object.defineProperty(t,"notificationCategory",{enumerable:!0,get:function(){return h.notificationCategory}}),Object.defineProperty(t,"notificationClassification",{enumerable:!0,get:function(){return h.notificationClassification}}),Object.defineProperty(t,"notificationSeverityLevel",{enumerable:!0,get:function(){return h.notificationSeverityLevel}});var y=r(56582);Object.defineProperty(t,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return y.notificationFilterDisabledCategory}}),Object.defineProperty(t,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return y.notificationFilterDisabledClassification}}),Object.defineProperty(t,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return y.notificationFilterMinimumSeverityLevel}});var m=a(r(83391));t.Result=m.default;var v=a(r(33695));t.EagerResult=v.default;var g=o(r(59209));t.ConnectionProvider=g.default,Object.defineProperty(t,"Releasable",{enumerable:!0,get:function(){return g.Releasable}});var b=a(r(76757));t.Connection=b.default;var _=a(r(84487));t.Transaction=_.default;var T=a(r(8905));t.ManagedTransaction=T.default;var E=a(r(5953));t.TransactionPromise=E.default;var O=a(r(82044));t.Session=O.default;var S=o(r(92438));t.Driver=S.default,t.driver=S;var w=a(r(52480));t.auth=w.default;var I=r(82056);Object.defineProperty(t,"bookmarkManager",{enumerable:!0,get:function(){return I.bookmarkManager}});var N=r(62716);Object.defineProperty(t,"authTokenManagers",{enumerable:!0,get:function(){return N.authTokenManagers}}),Object.defineProperty(t,"staticAuthTokenManager",{enumerable:!0,get:function(){return N.staticAuthTokenManager}});var A=r(92438);Object.defineProperty(t,"routing",{enumerable:!0,get:function(){return A.routing}});var C=o(r(64558));t.types=C;var P=o(r(72362));t.json=P;var R=a(r(60688));t.resultTransformers=R.default;var D=r(32517);Object.defineProperty(t,"clientCertificateProviders",{enumerable:!0,get:function(){return D.clientCertificateProviders}}),Object.defineProperty(t,"resolveCertificateProvider",{enumerable:!0,get:function(){return D.resolveCertificateProvider}});var F=o(r(48912));t.internal=F;var j={SERVICE_UNAVAILABLE:s.SERVICE_UNAVAILABLE,SESSION_EXPIRED:s.SESSION_EXPIRED,PROTOCOL_ERROR:s.PROTOCOL_ERROR};t.error=j;var L={authTokenManagers:N.authTokenManagers,newError:s.newError,Neo4jError:s.Neo4jError,isRetriableError:s.isRetriableError,error:j,Integer:l.default,int:l.int,isInt:l.isInt,inSafeRange:l.inSafeRange,toNumber:l.toNumber,toString:l.toString,internal:F,isPoint:d.isPoint,Point:d.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,isDate:u.isDate,isDateTime:u.isDateTime,isDuration:u.isDuration,isLocalDateTime:u.isLocalDateTime,isLocalTime:u.isLocalTime,isTime:u.isTime,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:p.default,ResultSummary:f.default,queryType:f.queryType,ServerInfo:f.ServerInfo,Notification:h.default,GqlStatusObject:h.GqlStatusObject,Plan:f.Plan,ProfiledPlan:f.ProfiledPlan,QueryStatistics:f.QueryStatistics,Stats:f.Stats,Result:m.default,EagerResult:v.default,Transaction:_.default,ManagedTransaction:T.default,TransactionPromise:E.default,Session:O.default,Driver:S.default,Connection:b.default,Releasable:g.Releasable,types:C,driver:S,json:P,auth:w.default,bookmarkManager:I.bookmarkManager,routing:A.routing,resultTransformers:R.default,notificationCategory:h.notificationCategory,notificationClassification:h.notificationClassification,notificationSeverityLevel:h.notificationSeverityLevel,notificationFilterDisabledCategory:y.notificationFilterDisabledCategory,notificationFilterDisabledClassification:y.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:y.notificationFilterMinimumSeverityLevel,clientCertificateProviders:D.clientCertificateProviders,resolveCertificateProvider:D.resolveCertificateProvider};t.default=L},88563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toString=t.toNumber=t.inSafeRange=t.isInt=t.int=void 0;var n=r(49348),i=new Map,o=function(){function e(e,t){this.low=null!=e?e:0,this.high=null!=t?t:0}return e.prototype.inSafeRange=function(){return this.greaterThanOrEqual(e.MIN_SAFE_VALUE)&&this.lessThanOrEqual(e.MAX_SAFE_VALUE)},e.prototype.toInt=function(){return this.low},e.prototype.toNumber=function(){return this.high*a+(this.low>>>0)},e.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(a)+BigInt(this.low>>>0);var e=this.negate();return BigInt(-1)*(BigInt(e.high>>>0)*BigInt(a)+BigInt(e.low>>>0))},e.prototype.toNumberOrInfinity=function(){return this.lessThan(e.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(e.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},e.prototype.toString=function(t){if((t=null!=t?t:10)<2||t>36)throw RangeError("radix out of range: "+t.toString());if(this.isZero())return"0";if(this.isNegative()){if(!this.equals(e.MIN_VALUE))return"-"+this.negate().toString(t);var r,n=e.fromNumber(t),i=this.div(n);return r=i.multiply(n).subtract(this),i.toString(t)+r.toInt().toString(t)}var o=e.fromNumber(Math.pow(t,6));r=this;for(var a="";;){var s=r.div(o),l=(r.subtract(s.multiply(o)).toInt()>>>0).toString(t);if((r=s).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},e.prototype.valueOf=function(){return this.toBigInt()},e.prototype.getHighBits=function(){return this.high},e.prototype.getLowBits=function(){return this.low},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();var t=0!==this.high?this.high:this.low,r=0;for(r=31;r>0&&(t&1<<r)==0;r--);return 0!==this.high?r+33:r+1},e.prototype.isZero=function(){return 0===this.high&&0===this.low},e.prototype.isNegative=function(){return this.high<0},e.prototype.isPositive=function(){return this.high>=0},e.prototype.isOdd=function(){return(1&this.low)==1},e.prototype.isEven=function(){return(1&this.low)==0},e.prototype.equals=function(t){var r=e.fromValue(t);return this.high===r.high&&this.low===r.low},e.prototype.notEquals=function(e){return!this.equals(e)},e.prototype.lessThan=function(e){return 0>this.compare(e)},e.prototype.lessThanOrEqual=function(e){return 0>=this.compare(e)},e.prototype.greaterThan=function(e){return this.compare(e)>0},e.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},e.prototype.compare=function(t){var r=e.fromValue(t);if(this.equals(r))return 0;var n=this.isNegative(),i=r.isNegative();return n&&!i?-1:!n&&i?1:this.subtract(r).isNegative()?-1:1},e.prototype.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.add=function(t){var r,n,i=e.fromValue(t),o=this.high>>>16,a=65535&this.high,s=this.low>>>16,l=65535&this.low,u=i.high>>>16,c=65535&i.high,p=i.low>>>16,d=65535&i.low,f=0,h=0;return r=0+((n=0+(l+d))>>>16),n&=65535,r+=s+p,h+=r>>>16,r&=65535,h+=a+c,f+=h>>>16,h&=65535,f+=o+u,f&=65535,e.fromBits(r<<16|n,f<<16|h)},e.prototype.subtract=function(t){var r=e.fromValue(t);return this.add(r.negate())},e.prototype.multiply=function(t){if(this.isZero())return e.ZERO;var r,n,i=e.fromValue(t);if(i.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return i.isOdd()?e.MIN_VALUE:e.ZERO;if(i.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return i.isNegative()?this.negate().multiply(i.negate()):this.negate().multiply(i).negate();if(i.isNegative())return this.multiply(i.negate()).negate();if(this.lessThan(l)&&i.lessThan(l))return e.fromNumber(this.toNumber()*i.toNumber());var o=this.high>>>16,a=65535&this.high,s=this.low>>>16,u=65535&this.low,c=i.high>>>16,p=65535&i.high,d=i.low>>>16,f=65535&i.low,h=0,y=0;return r=0+((n=0+u*f)>>>16),n&=65535,r+=s*f,y+=r>>>16,r&=65535,r+=u*d,y+=r>>>16,r&=65535,y+=a*f,h+=y>>>16,y&=65535,y+=s*d,h+=y>>>16,y&=65535,y+=u*p,h+=y>>>16,y&=65535,h+=o*f+a*d+s*p+u*c,h&=65535,e.fromBits(r<<16|n,h<<16|y)},e.prototype.div=function(t){var r,i,o,a=e.fromValue(t);if(a.isZero())throw(0,n.newError)("division by zero");if(this.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return a.equals(e.ONE)||a.equals(e.NEG_ONE)?e.MIN_VALUE:a.equals(e.MIN_VALUE)?e.ONE:(r=this.shiftRight(1).div(a).shiftLeft(1)).equals(e.ZERO)?a.isNegative()?e.ONE:e.NEG_ONE:(i=this.subtract(a.multiply(r)),o=r.add(i.div(a)));if(a.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return a.isNegative()?this.negate().div(a.negate()):this.negate().div(a).negate();if(a.isNegative())return this.div(a.negate()).negate();for(o=e.ZERO,i=this;i.greaterThanOrEqual(a);){for(var s=Math.ceil(Math.log(r=Math.max(1,Math.floor(i.toNumber()/a.toNumber())))/Math.LN2),l=s<=48?1:Math.pow(2,s-48),u=e.fromNumber(r),c=u.multiply(a);c.isNegative()||c.greaterThan(i);)r-=l,c=(u=e.fromNumber(r)).multiply(a);u.isZero()&&(u=e.ONE),o=o.add(u),i=i.subtract(c)}return o},e.prototype.modulo=function(t){var r=e.fromValue(t);return this.subtract(this.div(r).multiply(r))},e.prototype.not=function(){return e.fromBits(~this.low,~this.high)},e.prototype.and=function(t){var r=e.fromValue(t);return e.fromBits(this.low&r.low,this.high&r.high)},e.prototype.or=function(t){var r=e.fromValue(t);return e.fromBits(this.low|r.low,this.high|r.high)},e.prototype.xor=function(t){var r=e.fromValue(t);return e.fromBits(this.low^r.low,this.high^r.high)},e.prototype.shiftLeft=function(t){var r=e.toNumber(t);return 0==(r&=63)?e.ZERO:r<32?e.fromBits(this.low<<r,this.high<<r|this.low>>>32-r):e.fromBits(0,this.low<<r-32)},e.prototype.shiftRight=function(t){var r=e.toNumber(t),n=e.toNumber(t);return 0==(r&=63)?e.ZERO:n<32?e.fromBits(this.low>>>r|this.high<<32-r,this.high>>r):e.fromBits(this.high>>r-32,this.high>=0?0:-1)},e.isInteger=function(e){return(null==e?void 0:e.__isInteger__)===!0},e.fromInt=function(t){if((t|=0)>=-128&&t<128&&null!=(r=i.get(t)))return r;var r,n=new e(t,t<0?-1:0);return t>=-128&&t<128&&i.set(t,n),n},e.fromBits=function(t,r){return new e(t,r)},e.fromNumber=function(t){return isNaN(t)||!isFinite(t)?e.ZERO:t<=-s?e.MIN_VALUE:t+1>=s?e.MAX_VALUE:t<0?e.fromNumber(-t).negate():new e(t%a|0,t/a|0)},e.fromString=function(t,r,i){var o,a=(void 0===i?{}:i).strictStringValidation;if(0===t.length)throw(0,n.newError)("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if((r=null!=r?r:10)<2||r>36)throw(0,n.newError)("radix out of range: "+r.toString());if((o=t.indexOf("-"))>0)throw(0,n.newError)('number format error: interior "-" character: '+t);if(0===o)return e.fromString(t.substring(1),r).negate();for(var s=e.fromNumber(Math.pow(r,8)),l=e.ZERO,u=0;u<t.length;u+=8){var c=Math.min(8,t.length-u),p=t.substring(u,u+c),d=parseInt(p,r);if(!0===a&&!function(e,t,r){var n,i,o;return!Number.isNaN(e)&&!Number.isNaN(t)&&(i=Math.max(e.length-(n=t.toString(r)).length,0),o="0".repeat(i),"".concat(o).concat(n)===e.toLowerCase())}(p,d,r))throw(0,n.newError)('number format error: "'.concat(p,'" is NaN in radix ').concat(r,": ").concat(t));if(c<8){var f=e.fromNumber(Math.pow(r,c));l=l.multiply(f).add(e.fromNumber(d))}else l=(l=l.multiply(s)).add(e.fromNumber(d))}return l},e.fromValue=function(t,r){return(void 0===r&&(r={}),t instanceof e)?t:"number"==typeof t?(!0===r.ceilFloat&&(t=Math.ceil(t)),e.fromNumber(t)):"string"==typeof t?e.fromString(t,void 0,r):"bigint"==typeof t?e.fromString(t.toString()):new e(t.low,t.high)},e.toNumber=function(t){switch(typeof t){case"number":return t;case"bigint":return Number(t);default:return e.fromValue(t).toNumber()}},e.toString=function(t,r){return e.fromValue(t).toString(r)},e.inSafeRange=function(t){return e.fromValue(t).inSafeRange()},e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.MIN_SAFE_VALUE=e.fromBits(1,-2097152),e.MAX_SAFE_VALUE=e.fromBits(-1,2097151),e.__isInteger__=!0,e}();Object.defineProperty(o.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var a=4294967296,s=0x7fffffffffffffff,l=o.fromInt(16777216),u=o.fromValue;t.int=u;var c=o.isInteger;t.isInt=c;var p=o.inSafeRange;t.inSafeRange=p;var d=o.toNumber;t.toNumber=d;var f=o.toString;t.toString=f,t.default=o},90706:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(5383),t)},7159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromVersion=void 0;var n=r(22037);t.fromVersion=function(e,t){void 0===t&&(t=function(){return{hostArch:process.config.variables.host_arch,nodeVersion:process.versions.node,v8Version:process.versions.v8,get platform(){return(0,n.platform)()},get release(){return(0,n.release)()}}});var r=t(),i=r.hostArch,o="Node/"+r.nodeVersion,a=r.v8Version,s="".concat(r.platform," ").concat(r.release);return{product:"neo4j-javascript/".concat(e),platform:"".concat(s,"; ").concat(i),languageDetails:"".concat(o," (v8 ").concat(a,")")}}},5383:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(7159),t)},78737:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},s=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Bookmarks=void 0;var l=o(r(57113)),u=function(){function e(e){this._values=function(e){if(null==e||""===e)return[];if(l.isString(e))return[e];if(Array.isArray(e)){for(var t=new Set,r=function e(t){return t.reduce(function(t,r){return Array.isArray(r)?t.concat(e(r)):t.concat(r)},[])}(e),n=0;n<r.length;n++){var i=r[n];if(null!=i){if(!l.isString(i))throw TypeError("Bookmark value should be a string, given: '".concat(i,"'"));t.add(i)}}return s([],a(t),!1)}throw TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}(e)}return e.empty=function(){return c},e.prototype.isEmpty=function(){return 0===this._values.length},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var e;return this.isEmpty()?{}:((e={}).bookmarks=this._values,e)},e}();t.Bookmarks=u;var c=new u(null)},59069:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_CONNECTION_HOLDER=t.ReadOnlyConnectionHolder=t.ConnectionHolder=void 0;var s=r(49348),l=r(57113),u=r(57989),c=r(78737),p=r(81734),d=function(){function e(e){var t=e.mode,r=e.database,n=void 0===r?"":r,i=e.bookmarks,o=e.connectionProvider,a=e.impersonatedUser,s=e.onDatabaseNameResolved,p=e.getConnectionAcquistionBookmarks,d=e.auth,f=e.log;this._mode=null!=t?t:u.ACCESS_MODE_WRITE,this._closed=!1,this._database=null!=n?(0,l.assertString)(n,"database"):"",this._bookmarks=null!=i?i:c.Bookmarks.empty(),this._connectionProvider=o,this._impersonatedUser=a,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=s,this._auth=d,this._log=f,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=null!=p?p:function(){return Promise.resolve(c.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(e){this._database=e},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(){return 0!==this._referenceCount||null==this._connectionProvider?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider),this._referenceCount++,!0)},e.prototype._createConnectionPromise=function(e){return o(this,void 0,void 0,function(){var t,r,n;return a(this,function(i){switch(i.label){case 0:return r=(t=e).acquireConnection,n={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,r.apply(t,[(n.bookmarks=i.sent(),n.impersonatedUser=this._impersonatedUser,n.onDatabaseNameResolved=this._onDatabaseNameResolved,n.auth=this._auth,n)])];case 2:return[2,i.sent()]}})})},e.prototype._getBookmarks=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,e.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount)?this._releaseConnection():this._connectionPromise},e.prototype.close=function(e){return(this._closed=!0,0===this._referenceCount)?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(e))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(e){return this._connectionPromise=this._connectionPromise.then(function(t){return null==t?Promise.resolve(null):t.isOpen()&&(t.hasOngoingObservableRequests()||!0===e)?t.resetAndFlush().catch(y).then(function(){return t.release().then(function(){return null})}):t.release().then(function(){return null})}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(e){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(e,". Stacktrace: ").concat(e.stack)),null},e}();t.ConnectionHolder=d;var f=function(e){function t(t){var r=e.call(this,{mode:t.mode(),database:t.database(),bookmarks:t.bookmarks(),getConnectionAcquistionBookmarks:t._getConnectionAcquistionBookmarks,connectionProvider:t.connectionProvider(),log:t.log()})||this;return r._connectionHolder=t,r}return i(t,e),t.prototype.initializeConnection=function(){return 0!==this._connectionHolder.referenceCount()},t.prototype.getConnection=function(){return this._connectionHolder.getConnection()},t.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},t.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},t}(d);t.ReadOnlyConnectionHolder=f,t.default=f;var h=new(function(e){function t(){return e.call(this,{log:p.Logger.create({})})||this}return i(t,e),t.prototype.mode=function(){},t.prototype.database=function(){},t.prototype.initializeConnection=function(){return!0},t.prototype.getConnection=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,Promise.reject((0,s.newError)("This connection holder does not serve connections"))];case 1:return[2,e.sent()]}})})},t.prototype.releaseConnection=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,e.sent()]}})})},t.prototype.close=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,e.sent()]}})})},t}(d));function y(e){return null}t.EMPTY_CONNECTION_HOLDER=h},57989:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TELEMETRY_APIS=t.BOLT_PROTOCOL_V5_6=t.BOLT_PROTOCOL_V5_5=t.BOLT_PROTOCOL_V5_4=t.BOLT_PROTOCOL_V5_3=t.BOLT_PROTOCOL_V5_2=t.BOLT_PROTOCOL_V5_1=t.BOLT_PROTOCOL_V5_0=t.BOLT_PROTOCOL_V4_4=t.BOLT_PROTOCOL_V4_3=t.BOLT_PROTOCOL_V4_2=t.BOLT_PROTOCOL_V4_1=t.BOLT_PROTOCOL_V4_0=t.BOLT_PROTOCOL_V3=t.BOLT_PROTOCOL_V2=t.BOLT_PROTOCOL_V1=t.DEFAULT_POOL_MAX_SIZE=t.DEFAULT_POOL_ACQUISITION_TIMEOUT=t.DEFAULT_CONNECTION_TIMEOUT_MILLIS=t.ACCESS_MODE_WRITE=t.ACCESS_MODE_READ=t.FETCH_ALL=void 0,t.FETCH_ALL=-1,t.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4,t.DEFAULT_POOL_MAX_SIZE=100,t.DEFAULT_CONNECTION_TIMEOUT_MILLIS=3e4,t.ACCESS_MODE_READ="READ",t.ACCESS_MODE_WRITE="WRITE",t.BOLT_PROTOCOL_V1=1,t.BOLT_PROTOCOL_V2=2,t.BOLT_PROTOCOL_V3=3,t.BOLT_PROTOCOL_V4_0=4,t.BOLT_PROTOCOL_V4_1=4.1,t.BOLT_PROTOCOL_V4_2=4.2,t.BOLT_PROTOCOL_V4_3=4.3,t.BOLT_PROTOCOL_V4_4=4.4,t.BOLT_PROTOCOL_V5_0=5,t.BOLT_PROTOCOL_V5_1=5.1,t.BOLT_PROTOCOL_V5_2=5.2,t.BOLT_PROTOCOL_V5_3=5.3,t.BOLT_PROTOCOL_V5_4=5.4,t.BOLT_PROTOCOL_V5_5=5.5,t.BOLT_PROTOCOL_V5_6=5.6,t.TELEMETRY_APIS={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3}},48912:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.pool=t.boltAgent=t.objectUtil=t.resolver=t.serverAddress=t.urlUtil=t.logger=t.transactionExecutor=t.txConfig=t.connectionHolder=t.constants=t.bookmarks=t.observer=t.temporalUtil=t.util=void 0;var a=o(r(57113));t.util=a;var s=o(r(55670));t.temporalUtil=s;var l=o(r(35671));t.observer=l;var u=o(r(78737));t.bookmarks=u;var c=o(r(57989));t.constants=c;var p=o(r(59069));t.connectionHolder=p;var d=o(r(36980));t.txConfig=d;var f=o(r(82198));t.transactionExecutor=f;var h=o(r(81734));t.logger=h;var y=o(r(37124));t.urlUtil=y;var m=o(r(50314));t.serverAddress=m;var v=o(r(79499));t.resolver=v;var g=o(r(97406));t.objectUtil=g;var b=o(r(90706));t.boltAgent=b;var _=o(r(98173));t.pool=_},81734:function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var a=r(49348),s="error",l="warn",u="info",c="debug",p=((i={})[s]=0,i[l]=1,i[u]=2,i[c]=3,i),d=function(){function e(e,t){this._level=e,this._loggerFunction=t}return e.create=function(t){if((null==t?void 0:t.logging)!=null){var r=t.logging;return new e(function(e){if((null==e?void 0:e.level)!=null){var t=e.level,r=p[t];if(null==r&&0!==r)throw(0,a.newError)("Illegal logging level: ".concat(t,". Supported levels are: ").concat(Object.keys(p).toString()));return t}return u}(r),function(e){var t,r;if((null==e?void 0:e.logger)!=null){var n=e.logger;if(null!=n&&"function"==typeof n)return n}throw(0,a.newError)("Illegal logger function: ".concat(null!==(r=null===(t=null==e?void 0:e.logger)||void 0===t?void 0:t.toString())&&void 0!==r?r:"undefined"))}(r))}return this.noOp()},e.noOp=function(){return f},e.prototype.isErrorEnabled=function(){return h(this._level,s)},e.prototype.error=function(e){this.isErrorEnabled()&&this._loggerFunction(s,e)},e.prototype.isWarnEnabled=function(){return h(this._level,l)},e.prototype.warn=function(e){this.isWarnEnabled()&&this._loggerFunction(l,e)},e.prototype.isInfoEnabled=function(){return h(this._level,u)},e.prototype.info=function(e){this.isInfoEnabled()&&this._loggerFunction(u,e)},e.prototype.isDebugEnabled=function(){return h(this._level,c)},e.prototype.debug=function(e){this.isDebugEnabled()&&this._loggerFunction(c,e)},e}();t.Logger=d;var f=new(function(e){function t(){return e.call(this,u,function(e,t){})||this}return o(t,e),t.prototype.isErrorEnabled=function(){return!1},t.prototype.error=function(e){},t.prototype.isWarnEnabled=function(){return!1},t.prototype.warn=function(e){},t.prototype.isInfoEnabled=function(){return!1},t.prototype.info=function(e){},t.prototype.isDebugEnabled=function(){return!1},t.prototype.debug=function(e){},t}(d));function h(e,t){return p[e]>=p[t]}},97406:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBrokenObjectReason=t.isBrokenObject=t.createBrokenObject=void 0;var r="__isBrokenObject__",n="__reason__";t.createBrokenObject=function(e,t){void 0===t&&(t={});var i=function(){throw e};return new Proxy(t,{get:function(t,o){return o===r||(o===n?e:void("toJSON"!==o&&i()))},set:i,apply:i,construct:i,defineProperty:i,deleteProperty:i,getOwnPropertyDescriptor:i,getPrototypeOf:i,has:i,isExtensible:i,ownKeys:i,preventExtensions:i,setPrototypeOf:i})},t.isBrokenObject=function(e){return null!==e&&"object"==typeof e&&!0===e[r]},t.getBrokenObjectReason=function(e){return e[n]}},35671:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FailedObserver=t.CompletedObserver=void 0;var r=function(){function e(){}return e.prototype.subscribe=function(e){i(e,e.onKeys,[]),i(e,e.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(e){throw Error("CompletedObserver not supposed to call onError",{cause:e})},e}();t.CompletedObserver=r;var n=function(){function e(e){var t=e.error,r=e.onError;this._error=t,this._beforeError=r,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(e){i(e,e.onError,this._error),this._observers.push(e)},e.prototype.onError=function(e){i(this,this._beforeError,e),this._observers.forEach(function(t){return i(t,t.onError,e)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}();function i(e,t,r){null!=t&&t.bind(e)(r)}t.FailedObserver=n},98173:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_SIZE=t.DEFAULT_ACQUISITION_TIMEOUT=t.PoolConfig=t.Pool=void 0;var s=o(r(72639));t.PoolConfig=s.default,Object.defineProperty(t,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return s.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(t,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return s.DEFAULT_MAX_SIZE}});var l=a(r(73693));t.Pool=l.default,t.default=l.default},72639:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ACQUISITION_TIMEOUT=t.DEFAULT_MAX_SIZE=void 0,t.DEFAULT_MAX_SIZE=100,t.DEFAULT_ACQUISITION_TIMEOUT=6e4;var r=function(){function e(e,t){this.maxSize=n(e)?e:100,this.acquisitionTimeout=n(t)?t:6e4}return e.defaultConfig=function(){return new e(100,6e4)},e.fromDriverConfig=function(t){return new e(n(t.maxConnectionPoolSize)?t.maxConnectionPoolSize:100,n(t.connectionAcquisitionTimeout)?t.connectionAcquisitionTimeout:6e4)},e}();function n(e){return 0===e||null!=e}t.default=r},73693:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(72639)),s=r(49348),l=r(81734),u=function(){function e(e){var t=e.create,r=void 0===t?function(e,t,r){return n(v,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,Promise.reject(Error("Not implemented"))];case 1:return[2,e.sent()]}})})}:t,o=e.destroy,s=void 0===o?function(e){return n(v,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,Promise.resolve()];case 1:return[2,e.sent()]}})})}:o,u=e.validateOnAcquire,c=e.validateOnRelease,p=e.installIdleObserver,d=e.removeIdleObserver,f=e.config,h=void 0===f?a.default.defaultConfig():f,y=e.log,m=void 0===y?l.Logger.noOp():y,v=this;this._create=r,this._destroy=s,this._validateOnAcquire=void 0===u?function(e,t){return!0}:u,this._validateOnRelease=void 0===c?function(e){return!0}:c,this._installIdleObserver=void 0===p?function(e,t){}:p,this._removeIdleObserver=void 0===d?function(e){}:d,this._maxSize=h.maxSize,this._acquisitionTimeout=h.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=m,this._closed=!1}return e.prototype.acquire=function(e,t,r){return n(this,void 0,void 0,function(){var n,o,a=this;return i(this,function(i){switch(i.label){case 0:return n=t.asKey(),null==(o=this._acquireRequests)[n]&&(o[n]=[]),[4,new Promise(function(i,l){var u=setTimeout(function(){var e=o[n];if(null!=e&&(o[n]=e.filter(function(e){return e!==c})),c.isCompleted());else{var r=a.activeResourceCount(t),i=a.has(t)?a._pools[n].length:0;c.reject((0,s.newError)("Connection acquisition timed out in ".concat(a._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(r,", Idle conn count = ").concat(i,".")))}},a._acquisitionTimeout);"object"==typeof u&&u.unref();var c=new p(n,e,r,i,l,u,a._log);o[n].push(c),a._processPendingAcquireRequests(t)})];case 1:return[2,i.sent()]}})})},e.prototype.purge=function(e){return n(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this._purgeKey(e.asKey())];case 1:return[2,t.sent()]}})})},e.prototype.apply=function(e,t){var r=e.asKey();r in this._pools&&this._pools[r].apply(t)},e.prototype.close=function(){return n(this,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(t){return n(e,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this._purgeKey(t)];case 1:return[2,e.sent()]}})})})).then()];case 1:return[2,t.sent()]}})})},e.prototype.keepAll=function(e){return n(this,void 0,void 0,function(){var t,r=this;return i(this,function(o){switch(o.label){case 0:return t=e.map(function(e){return e.asKey()}),[4,Promise.all(Object.keys(this._pools).filter(function(e){return!t.includes(e)}).map(function(e){return n(r,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this._purgeKey(e)];case 1:return[2,t.sent()]}})})})).then()];case 1:return[2,o.sent()]}})})},e.prototype.has=function(e){return e.asKey() in this._pools},e.prototype.activeResourceCount=function(e){var t;return null!==(t=this._activeResourceCounts[e.asKey()])&&void 0!==t?t:0},e.prototype._getOrInitializePoolFor=function(e){var t=this._pools[e];return null==t&&(t=new d,this._pools[e]=t,this._pendingCreates[e]=0),t},e.prototype._acquire=function(e,t,r){return n(this,void 0,void 0,function(){var o,a,l,u,p,d=this;return i(this,function(f){switch(f.label){case 0:if(this._closed)throw(0,s.newError)("Pool is closed, it is no more able to serve requests.");if(o=t.asKey(),a=this._getOrInitializePoolFor(o),r)return[3,6];f.label=1;case 1:if(!(a.length>0))return[3,6];if(null==(l=a.pop()))return[3,1];return null!=this._removeIdleObserver&&this._removeIdleObserver(l),[4,this._validateOnAcquire(e,l)];case 2:if(!f.sent())return[3,3];return c(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(l," acquired from the pool ").concat(o)),[2,{resource:l,pool:a}];case 3:return a.removeInUse(l),[4,this._destroy(l)];case 4:f.sent(),f.label=5;case 5:return[3,1];case 6:if(this._maxSize>0&&this.activeResourceCount(t)+this._pendingCreates[o]>=this._maxSize)return[2,{resource:null,pool:a}];this._pendingCreates[o]=this._pendingCreates[o]+1,f.label=7;case 7:if(f.trys.push([7,,11,12]),!(this.activeResourceCount(t)+a.length>=this._maxSize&&r)||!(null!=(p=a.pop())))return[3,9];return null!=this._removeIdleObserver&&this._removeIdleObserver(p),a.removeInUse(p),[4,this._destroy(p)];case 8:f.sent(),f.label=9;case 9:return[4,this._create(e,t,function(e,t){return n(d,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return[4,this._release(e,t,a)];case 1:return[2,r.sent()]}})})})];case 10:return u=f.sent(),a.pushInUse(u),c(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(u," created for the pool ").concat(o)),[3,12];case 11:return this._pendingCreates[o]=this._pendingCreates[o]-1,[7];case 12:return[2,{resource:u,pool:a}]}})})},e.prototype._release=function(e,t,r){return n(this,void 0,void 0,function(){var n,o=this;return i(this,function(i){switch(i.label){case 0:n=e.asKey(),i.label=1;case 1:if(i.trys.push([1,,9,10]),!r.isActive())return[3,6];return[4,this._validateOnRelease(t)];case 2:if(i.sent())return[3,4];return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(n," because it is not functional")),r.removeInUse(t),[4,this._destroy(t)];case 3:return i.sent(),[3,5];case 4:null!=this._installIdleObserver&&this._installIdleObserver(t,{onError:function(e){o._log.debug("Idle connection ".concat(t," destroyed because of error: ").concat(e));var r=o._pools[n];null!=r&&(o._pools[n]=r.filter(function(e){return e!==t}),r.removeInUse(t)),o._destroy(t).catch(function(){})}}),r.push(t),this._log.isDebugEnabled()&&this._log.debug("".concat(t," released to the pool ").concat(n)),i.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(n," because pool has been purged")),r.removeInUse(t),[4,this._destroy(t)];case 7:i.sent(),i.label=8;case 8:return[3,10];case 9:var a,s,l,u;return a=n,(u=(null!==(l=(s=this._activeResourceCounts)[a])&&void 0!==l?l:0)-1)>0?s[a]=u:delete s[a],this._processPendingAcquireRequests(e),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(e){return n(this,void 0,void 0,function(){var t,r,n;return i(this,function(i){switch(i.label){case 0:if(t=this._pools[e],r=[],!(null!=t))return[3,2];for(;t.length>0;)null!=(n=t.pop())&&(null!=this._removeIdleObserver&&this._removeIdleObserver(n),r.push(this._destroy(n)));return t.close(),delete this._pools[e],[4,Promise.all(r)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(e){var t=this,r=e.asKey(),n=this._acquireRequests[r];if(null!=n){var i=n.shift();null!=i?this._acquire(i.context,e,i.requireNew).catch(function(e){return i.reject(e),{resource:null,pool:null}}).then(function(n){var o=n.resource,a=n.pool;null!=o&&null!=a?i.isCompleted()?t._release(e,o,a).catch(function(e){t._log.isDebugEnabled()&&t._log.debug("".concat(o," could not be release back to the pool. Cause: ").concat(e))}):i.resolve(o):i.isCompleted()||(null==t._acquireRequests[r]&&(t._acquireRequests[r]=[]),t._acquireRequests[r].unshift(i))}).catch(function(e){return i.reject(e)}):delete this._acquireRequests[r]}},e}();function c(e,t){var r,n=null!==(r=t[e])&&void 0!==r?r:0;t[e]=n+1}var p=function(){function e(e,t,r,n,i,o,a){this._key=e,this._context=t,this._resolve=n,this._reject=i,this._timeoutId=o,this._log=a,this._completed=!1,this._config=null!=r?r:{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){var e;return null!==(e=this._config.requireNew)&&void 0!==e&&e},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(e," acquired from the pool ").concat(this._key)),this._resolve(e))},e.prototype.reject=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(e))},e}(),d=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(e){return this._elements=this._elements.filter(e),this},e.prototype.apply=function(e){this._elements.forEach(e),this._elementsInUse.forEach(e)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var e=this._elements.pop();return null!=e&&this._elementsInUse.add(e),e},e.prototype.push=function(e){return this._elementsInUse.delete(e),this._elements.push(e)},e.prototype.pushInUse=function(e){this._elementsInUse.add(e)},e.prototype.removeInUse=function(e){this._elementsInUse.delete(e)},e}();t.default=u},75687:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(57989),a=function(){function e(e){this._createSession=e}return e.prototype.execute=function(e,t,r){return n(this,void 0,void 0,function(){var a,s,l=this;return i(this,function(u){switch(u.label){case 0:var c,p,d;a=this._createSession({database:e.database,bookmarkManager:e.bookmarkManager,impersonatedUser:e.impersonatedUser,auth:e.auth}),c=e.signal,p="abort",d=function(){return n(l,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,a.close()];case 1:return[2,e.sent()]}})})},"function"==typeof(null==c?void 0:c.addEventListener)&&c.addEventListener(p,d),s={uninstall:function(){"function"==typeof(null==c?void 0:c.removeEventListener)&&c.removeEventListener(p,d)}},a._configureTransactionExecutor(!0,o.TELEMETRY_APIS.EXECUTE_QUERY),u.label=1;case 1:return u.trys.push([1,,3,5]),[4,("READ"===e.routing?a.executeRead.bind(a):a.executeWrite.bind(a))(function(o){return n(l,void 0,void 0,function(){var n;return i(this,function(i){switch(i.label){case 0:return n=o.run(t,r),[4,e.resultTransformer(n)];case 1:return[2,i.sent()]}})})},e.transactionConfig)];case 2:return[2,u.sent()];case 3:return s.uninstall(),[4,a.close()];case 4:return u.sent(),[7];case 5:return[2]}})})},e}();t.default=a},54440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.resolve=function(){throw Error("Abstract function")},e.prototype._resolveToItself=function(e){return Promise.resolve([e])},e}();t.default=r},71959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(50314);function i(e){return Promise.resolve([e])}var o=function(){function e(e){this._resolverFunction=null!=e?e:i}return e.prototype.resolve=function(e){var t=this;return new Promise(function(r){return r(t._resolverFunction(e.asHostPort()))}).then(function(e){if(!Array.isArray(e))throw TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(e));return e.map(function(e){return n.ServerAddress.fromUrl(e)})})},e}();t.default=o},79499:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfiguredCustomResolver=t.BaseHostNameResolver=void 0;var i=n(r(54440));t.BaseHostNameResolver=i.default;var o=n(r(71959));t.ConfiguredCustomResolver=o.default},50314:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ServerAddress=void 0;var a=r(57113),s=o(r(37124)),l=function(){function e(e,t,r,n){this._host=(0,a.assertString)(e,"host"),this._resolved=null!=t?(0,a.assertString)(t,"resolved"):null,this._port=(0,a.assertNumber)(r,"port"),this._hostPort=n,this._stringValue=null!=t?"".concat(n,"(").concat(t,")"):"".concat(n)}return e.prototype.host=function(){return this._host},e.prototype.resolvedHost=function(){return null!=this._resolved?this._resolved:this._host},e.prototype.port=function(){return this._port},e.prototype.resolveWith=function(t){return new e(this._host,t,this._port,this._hostPort)},e.prototype.asHostPort=function(){return this._hostPort},e.prototype.asKey=function(){return this._hostPort},e.prototype.toString=function(){return this._stringValue},e.fromUrl=function(t){var r=s.parseDatabaseUrl(t);return new e(r.host,null,r.port,r.hostAndPort)},e}();t.ServerAddress=l},55670:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.floorMod=t.floorDiv=t.assertValidZoneId=t.assertValidNanosecond=t.assertValidSecond=t.assertValidMinute=t.assertValidHour=t.assertValidDay=t.assertValidMonth=t.assertValidYear=t.timeZoneOffsetInSeconds=t.totalNanoseconds=t.newDate=t.toStandardDate=t.isoStringToStandardDate=t.dateToIsoString=t.timeZoneOffsetToIsoString=t.timeToIsoString=t.durationToIsoString=t.dateToEpochDay=t.localDateTimeToEpochSecond=t.localTimeToNanoOfDay=t.normalizeNanosecondsForDuration=t.normalizeSecondsForDuration=t.SECONDS_PER_DAY=t.DAYS_PER_400_YEAR_CYCLE=t.DAYS_0000_TO_1970=t.NANOS_PER_HOUR=t.NANOS_PER_MINUTE=t.NANOS_PER_MILLISECOND=t.NANOS_PER_SECOND=t.SECONDS_PER_HOUR=t.SECONDS_PER_MINUTE=t.MINUTES_PER_HOUR=t.NANOSECOND_OF_SECOND_RANGE=t.SECOND_OF_MINUTE_RANGE=t.MINUTE_OF_HOUR_RANGE=t.HOUR_OF_DAY_RANGE=t.DAY_OF_MONTH_RANGE=t.MONTH_OF_YEAR_RANGE=t.YEAR_RANGE=void 0;var a=o(r(88563)),s=r(49348),l=r(57113),u=function(){function e(e,t){this._minNumber=e,this._maxNumber=t,this._minInteger=(0,a.int)(e),this._maxInteger=(0,a.int)(t)}return e.prototype.contains=function(e){if((0,a.isInt)(e)&&e instanceof a.default)return e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger);if("bigint"!=typeof e)return e>=this._minNumber&&e<=this._maxNumber;var t=(0,a.int)(e);return t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger)},e.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},e}();function c(e,r,n){e=(0,a.int)(e),r=(0,a.int)(r),n=(0,a.int)(n);var i,o=e.multiply(365);return o=(o=(o=e.greaterThanOrEqual(0)?o.add(e.add(3).div(4).subtract(e.add(99).div(100)).add(e.add(399).div(400))):o.subtract(e.div(-4).subtract(e.div(-100)).add(e.div(-400)))).add(r.multiply(367).subtract(362).div(12))).add(n.subtract(1)),r.greaterThan(2)&&(o=o.subtract(1),i=e,(i=(0,a.int)(i)).modulo(4).equals(0)&&(!i.modulo(100).equals(0)||i.modulo(400).equals(0))||(o=o.subtract(1))),o.subtract(t.DAYS_0000_TO_1970)}t.YEAR_RANGE=new u(-999999999,999999999),t.MONTH_OF_YEAR_RANGE=new u(1,12),t.DAY_OF_MONTH_RANGE=new u(1,31),t.HOUR_OF_DAY_RANGE=new u(0,23),t.MINUTE_OF_HOUR_RANGE=new u(0,59),t.SECOND_OF_MINUTE_RANGE=new u(0,59),t.NANOSECOND_OF_SECOND_RANGE=new u(0,999999999),t.MINUTES_PER_HOUR=60,t.SECONDS_PER_MINUTE=60,t.SECONDS_PER_HOUR=t.SECONDS_PER_MINUTE*t.MINUTES_PER_HOUR,t.NANOS_PER_SECOND=1e9,t.NANOS_PER_MILLISECOND=1e6,t.NANOS_PER_MINUTE=t.NANOS_PER_SECOND*t.SECONDS_PER_MINUTE,t.NANOS_PER_HOUR=t.NANOS_PER_MINUTE*t.MINUTES_PER_HOUR,t.DAYS_0000_TO_1970=719528,t.DAYS_PER_400_YEAR_CYCLE=146097,t.SECONDS_PER_DAY=86400,t.normalizeSecondsForDuration=function(e,r){return(0,a.int)(e).add(h(r,t.NANOS_PER_SECOND))},t.normalizeNanosecondsForDuration=function(e){return y(e,t.NANOS_PER_SECOND)},t.localTimeToNanoOfDay=function(e,r,n,i){e=(0,a.int)(e),r=(0,a.int)(r),n=(0,a.int)(n),i=(0,a.int)(i);var o=e.multiply(t.NANOS_PER_HOUR);return(o=(o=o.add(r.multiply(t.NANOS_PER_MINUTE))).add(n.multiply(t.NANOS_PER_SECOND))).add(i)},t.localDateTimeToEpochSecond=function(e,r,n,i,o,s,l){var u,p,d,f,h=c(e,r,n),y=(u=i,p=o,d=s,u=(0,a.int)(u),p=(0,a.int)(p),d=(0,a.int)(d),u.multiply(t.SECONDS_PER_HOUR).add(p.multiply(t.SECONDS_PER_MINUTE)).add(d));return h.multiply(t.SECONDS_PER_DAY).add(y)},t.dateToEpochDay=c,t.durationToIsoString=function(e,r,n,i){var o,s,l,u,c,p,d=v(e),f=v(r),h=(o=n,s=i,o=(0,a.int)(o),s=(0,a.int)(s),c=o.isNegative(),p=s.greaterThan(0),l=c&&p?o.equals(-1)?"-0":o.add(1).toString():o.toString(),p&&(u=c?m(s.negate().add(2*t.NANOS_PER_SECOND).modulo(t.NANOS_PER_SECOND)):m(s.add(t.NANOS_PER_SECOND).modulo(t.NANOS_PER_SECOND))),null!=u?l+u:l);return"P".concat(d,"M").concat(f,"DT").concat(h,"S")},t.timeToIsoString=function(e,t,r,n){var i=v(e,2),o=v(t,2),a=v(r,2),s=m(n);return"".concat(i,":").concat(o,":").concat(a).concat(s)},t.timeZoneOffsetToIsoString=function(e){if((e=(0,a.int)(e)).equals(0))return"Z";var r=e.isNegative();r&&(e=e.multiply(-1));var n=r?"-":"+",i=v(e.div(t.SECONDS_PER_HOUR),2),o=v(e.div(t.SECONDS_PER_MINUTE).modulo(t.MINUTES_PER_HOUR),2),s=e.modulo(t.SECONDS_PER_MINUTE),l=s.equals(0)?null:v(s,2);return null!=l?"".concat(n).concat(i,":").concat(o,":").concat(l):"".concat(n).concat(i,":").concat(o)},t.dateToIsoString=function(e,t,r){var n,i=(n=(0,a.int)(e)).isNegative()||n.greaterThan(9999)?v(n,6,{usePositiveSign:!0}):v(n,4),o=v(t,2),s=v(r,2);return"".concat(i,"-").concat(o,"-").concat(s)},t.isoStringToStandardDate=function(e){return new Date(e)},t.toStandardDate=function(e){return new Date(e)},t.newDate=function(e){return new Date(e)},t.totalNanoseconds=function(e,r){var n,i;return n=r=null!=r?r:0,i=e.getMilliseconds()*t.NANOS_PER_MILLISECOND,n instanceof a.default?n.add(i):"bigint"==typeof n?n+BigInt(i):n+i},t.timeZoneOffsetInSeconds=function(e){var r=e.getSeconds()>=e.getUTCSeconds()?e.getSeconds()-e.getUTCSeconds():e.getSeconds()-e.getUTCSeconds()+60,n=e.getTimezoneOffset();return 0===n?0+r:-1*n*t.SECONDS_PER_MINUTE+r},t.assertValidYear=function(e){return f(e,t.YEAR_RANGE,"Year")},t.assertValidMonth=function(e){return f(e,t.MONTH_OF_YEAR_RANGE,"Month")},t.assertValidDay=function(e){return f(e,t.DAY_OF_MONTH_RANGE,"Day")},t.assertValidHour=function(e){return f(e,t.HOUR_OF_DAY_RANGE,"Hour")},t.assertValidMinute=function(e){return f(e,t.MINUTE_OF_HOUR_RANGE,"Minute")},t.assertValidSecond=function(e){return f(e,t.SECOND_OF_MINUTE_RANGE,"Second")},t.assertValidNanosecond=function(e){return f(e,t.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")};var p=new Map,d=function(e,t){return(0,s.newError)("".concat(t,' is expected to be a valid ZoneId but was: "').concat(e,'"'))};function f(e,t,r){if((0,l.assertNumberOrInteger)(e,r),!t.contains(e))throw(0,s.newError)("".concat(r," is expected to be in range ").concat(t.toString()," but was: ").concat(e.toString()));return e}function h(e,t){e=(0,a.int)(e),t=(0,a.int)(t);var r=e.div(t);return e.isPositive()!==t.isPositive()&&r.multiply(t).notEquals(e)&&(r=r.subtract(1)),r}function y(e,t){return e=(0,a.int)(e),t=(0,a.int)(t),e.subtract(h(e,t).multiply(t))}function m(e){return(e=(0,a.int)(e)).equals(0)?"":"."+v(e,9)}function v(e,t,r){var n=(e=(0,a.int)(e)).isNegative();n&&(e=e.negate());var i=e.toString();if(null!=t)for(;i.length<t;)i="0"+i;return n?"-"+i:(null==r?void 0:r.usePositiveSign)===!0?"+"+i:i}t.assertValidZoneId=function(e,t){var r=p.get(t);if(!0!==r){if(!1===r)throw d(t,e);try{Intl.DateTimeFormat(void 0,{timeZone:t}),p.set(t,!0)}catch(r){throw p.set(t,!1),d(t,e)}}},t.floorDiv=h,t.floorMod=y},82198:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},s=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionExecutor=void 0;var l=r(49348),u=r(57989);function c(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,s([e,t],a(r),!1))}function p(e){return clearTimeout(e)}var d=function(){function e(e,t,r,n,i){void 0===i&&(i={setTimeout:c,clearTimeout:p}),this._maxRetryTimeMs=f(e,3e4),this._initialRetryDelayMs=f(t,1e3),this._multiplier=f(r,2),this._jitterFactor=f(n,.2),this._setTimeout=i.setTimeout,this._clearTimeout=i.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=u.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(e,t,r){var n=this,i={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){i.apiTransactionConfig=void 0}}};return new Promise(function(o,a){n._executeTransactionInsidePromise(e,t,o,a,r,i).catch(a)}).catch(function(o){var a=Date.now(),s=n._initialRetryDelayMs;return n._retryTransactionPromise(e,t,o,a,s,r,i)})},e.prototype.close=function(){var e=this;this._inFlightTimeoutIds.forEach(function(t){return e._clearTimeout(t)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(e,t,r,n,i,o,a){var s=this;return Date.now()-n>this._maxRetryTimeMs||!(0,l.isRetriableError)(r)?Promise.reject(r):new Promise(function(r,n){var l=s._computeDelayWithJitter(i),u=s._setTimeout(function(){s._inFlightTimeoutIds=s._inFlightTimeoutIds.filter(function(e){return e!==u}),s._executeTransactionInsidePromise(e,t,r,n,o,a).catch(n)},l);s._inFlightTimeoutIds.push(u)}).catch(function(r){var l=i*s._multiplier;return s._retryTransactionPromise(e,t,r,n,l,o,a)})},e.prototype._executeTransactionInsidePromise=function(e,t,r,a,s,l){return i(this,void 0,void 0,function(){var i,u,c,p,d=this;return o(this,function(o){switch(o.label){case 0:if(o.trys.push([0,4,,5]),u=e((null==l?void 0:l.apiTransactionConfig)!=null?n({},null==l?void 0:l.apiTransactionConfig):void 0),!this.pipelineBegin)return[3,1];return c=u,[3,3];case 1:return[4,u];case 2:c=o.sent(),o.label=3;case 3:return i=c,[3,5];case 4:return a(o.sent()),[2];case 5:return p=(null!=s?s:function(e){return e})(i),this._safeExecuteTransactionWork(p,t).then(function(e){return d._handleTransactionWorkSuccess(e,i,r,a)}).catch(function(e){return d._handleTransactionWorkFailure(e,i,a)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(e,t){try{var r=t(e);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},e.prototype._handleTransactionWorkSuccess=function(e,t,r,n){t.isOpen()?t.commit().then(function(){r(e)}).catch(function(e){n(e)}):r(e)},e.prototype._handleTransactionWorkFailure=function(e,t,r){t.isOpen()?t.rollback().catch(function(e){}).then(function(){return r(e)}).catch(r):r(e)},e.prototype._computeDelayWithJitter=function(e){var t=e*this._jitterFactor,r=e-t;return Math.random()*(e+t-r)+r},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,l.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,l.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,l.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,l.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();function f(e,t){return null!=e?e:t}t.TransactionExecutor=d},36980:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TxConfig=void 0;var a=o(r(57113)),s=r(49348),l=r(88563),u=function(){function e(e,t){null!=e&&a.assertObject(e,"Transaction config"),this.timeout=function(e,t){if(a.isObject(e)&&null!=e.timeout){a.assertNumberOrInteger(e.timeout,"Transaction timeout"),"number"!=typeof e.timeout||Number.isInteger(e.timeout)||(null==t?void 0:t.isInfoEnabled())!==!0||null==t||t.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up."));var r=(0,l.int)(e.timeout,{ceilFloat:!0});if(r.isNegative())throw(0,s.newError)("Transaction timeout should not be negative");return r}return null}(e,t),this.metadata=function(e){if(a.isObject(e)&&null!=e.metadata){var t=e.metadata;if(a.assertObject(t,"config.metadata"),0!==Object.keys(t).length)return t}return null}(e)}return e.empty=function(){return c},e.prototype.isEmpty=function(){return Object.values(this).every(function(e){return null==e})},e}();t.TxConfig=u;var c=new u({})},37124:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.Url=t.formatIPv6Address=t.formatIPv4Address=t.defaultPortForScheme=t.parseDatabaseUrl=void 0;var o=r(57113),a=function(e,t,r,n,i){this.scheme=e,this.host=t,this.port=r,this.hostAndPort=n,this.query=i};function s(e,t,r){if(""===(e=(null!=e?e:"").trim()))throw Error("Illegal empty ".concat(t," in URL query '").concat(r,"'"));return e}function l(e){var t="["===e.charAt(0),r="]"===e.charAt(e.length-1);if(!t&&!r)return"[".concat(e,"]");if(t&&r)return e;throw Error("Illegal IPv6 address ".concat(e))}function u(e){return"http"===e?7474:"https"===e?7473:7687}t.Url=a,t.parseDatabaseUrl=function(e){(0,o.assertString)(e,"URL");var t,r,c,p,d,f,h,y,m,v,g=(f=(f=e).trim()).includes("://")?{schemeMissing:!1,url:f}:{schemeMissing:!0,url:"none://".concat(f)},b=function(e){function t(e,t){var r=e.indexOf(t);return r>=0?[e.substring(0,r),e[r],e.substring(r+1)]:[e,"",""]}var r,o,a,s,l,u,c,p,d,f,h,y={};return(":"===(h=t(e,":"))[1]&&(y.scheme=decodeURIComponent(h[0]),e=h[2]),"#"===(h=t(e,"#"))[1]&&(y.fragment=decodeURIComponent(h[2]),e=h[0]),"?"===(h=t(e,"?"))[1]&&(y.query=h[2],e=h[0]),e.startsWith("//"))?(h=t(e.substr(2),"/"),(y=n(n({},y),(r=h[0],a={},"@"===(o=(l=(s=r).lastIndexOf("@"))>=0?[s.substring(0,l),s[l],s.substring(l+1)]:["","",s])[1]&&(a.userInfo=decodeURIComponent(o[0]),r=o[2]),d=(p=i((u=t(r,"["),[(c=t(u[2],"]"))[0],c[2]]),2))[0],f=p[1],""!==d?(a.host=d,o=t(f,":")):(o=t(r,":"),a.host=o[0]),":"===o[1]&&(a.port=o[2]),a))).path=h[1]+h[2]):y.path=e,y}(g.url),_=g.schemeMissing?null:null!=(h=b.scheme)?(":"===(h=h.trim()).charAt(h.length-1)&&(h=h.substring(0,h.length-1)),h):null,T=function(e,t){if(null==e)throw Error("Unable to extract host from null or undefined URL");return e.trim()}(b.host),E=function(e){if(""===e||null==e)throw Error("Illegal host ".concat(e));return e.includes(":")?l(e):e}(T),O=null==(m="string"==typeof(y=b.port)?parseInt(y,10):y)||isNaN(m)?u(_):m,S="".concat(E,":").concat(O);return new a(_,T,O,S,(p=null!=(r=null!==(v=b.query)&&void 0!==v?v:"string"!=typeof(t=b.resourceName)?null:i(t.split("?"),2)[1])?((null==(c=(null!=(c=r)?c:"").trim())?void 0:c.charAt(0))==="?"&&(c=c.substring(1,c.length)),c):null,d={},null!=p&&p.split("&").forEach(function(t){var r=t.split("=");if(2!==r.length)throw Error("Invalid parameters: '".concat(r.toString(),"' in URL '").concat(e,"'."));var n=s(r[0],"key",e),i=s(r[1],"value",e);if(void 0!==d[n])throw Error("Duplicated query parameters with key '".concat(n,"' in URL '").concat(e,"'"));d[n]=i}),d))},t.formatIPv4Address=function(e,t){return"".concat(e,":").concat(t)},t.formatIPv6Address=function(e,t){var r=l(e);return"".concat(r,":").concat(t)},t.defaultPortForScheme=u},57113:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.ENCRYPTION_OFF=t.ENCRYPTION_ON=t.equals=t.validateQueryAndParameters=t.toNumber=t.assertValidDate=t.assertNumberOrInteger=t.assertNumber=t.assertString=t.assertObject=t.isString=t.isObject=t.isEmptyObjectOrNull=void 0;var s=o(r(88563)),l=r(72362);function u(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function c(e,t){if(!p(e))throw TypeError((0,l.stringify)(t)+" expected to be string but was: "+(0,l.stringify)(e));return e}function p(e){return"[object String]"===Object.prototype.toString.call(e)}t.ENCRYPTION_ON="ENCRYPTION_ON",t.ENCRYPTION_OFF="ENCRYPTION_OFF",t.isEmptyObjectOrNull=function(e){if(null===e)return!0;if(!u(e))return!1;for(var t in e)if(void 0!==e[t])return!1;return!0},t.isObject=u,t.validateQueryAndParameters=function(e,t,r){var n,i,o="",a=null!=t?t:{},s=null!==(n=null==r?void 0:r.skipAsserts)&&void 0!==n&&n;return"string"==typeof e?o=e:e instanceof String?o=e.toString():"object"==typeof e&&null!=e.text&&(o=e.text,a=null!==(i=e.parameters)&&void 0!==i?i:{}),s||(function(e){if(c(e,"Cypher query"),0===e.trim().length)throw TypeError("Cypher query is expected to be a non-empty string.")}(o),function(e){if(!u(e)){var t=null!=e.constructor?" "+e.constructor.name:"";throw TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(t," ").concat(JSON.stringify(e)))}}(a)),{validatedQuery:o,params:a}},t.assertObject=function(e,t){if(!u(e))throw TypeError(t+" expected to be an object but was: "+(0,l.stringify)(e));return e},t.assertString=c,t.assertNumber=function(e,t){if("number"!=typeof e)throw TypeError(t+" expected to be a number but was: "+(0,l.stringify)(e));return e},t.assertNumberOrInteger=function(e,t){if("number"!=typeof e&&"bigint"!=typeof e&&!(0,s.isInt)(e))throw TypeError(t+" expected to be either a number or an Integer object but was: "+(0,l.stringify)(e));return e},t.assertValidDate=function(e,t){if("[object Date]"!==Object.prototype.toString.call(e))throw TypeError(t+" expected to be a standard JavaScript Date but was: "+(0,l.stringify)(e));if(Number.isNaN(e.getTime()))throw TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+(0,l.stringify)(e));return e},t.isString=p,t.equals=function e(t,r){var n,i;if(t===r)return!0;if(null===t||null===r)return!1;if("object"==typeof t&&"object"==typeof r){var o=Object.keys(t),s=Object.keys(r);if(o.length!==s.length)return!1;try{for(var l=a(o),u=l.next();!u.done;u=l.next()){var c=u.value;if(!e(t[c],r[c]))return!1}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return!0}return!1},t.toNumber=function(e){return e instanceof s.default?e.toNumber():"bigint"==typeof e?(0,s.int)(e).toNumber():e}},72362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=void 0;var n=r(97406);t.stringify=function(e,t){return JSON.stringify(e,function(e,r){return(0,n.isBrokenObject)(r)?{__isBrokenObject__:!0,__reason__:(0,n.getBrokenObjectReason)(r)}:"bigint"==typeof r?"".concat(r,"n"):(null==t?void 0:t.useCustomToString)!==!0||"object"!=typeof r||Array.isArray(r)||"function"!=typeof r.toString||r.toString===Object.prototype.toString?r:null==r?void 0:r.toString()})}},56582:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notificationFilterDisabledClassification=t.notificationFilterDisabledCategory=t.notificationFilterMinimumSeverityLevel=void 0;var r={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};t.notificationFilterMinimumSeverityLevel=r,Object.freeze(r);var n={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};t.notificationFilterDisabledCategory=n,Object.freeze(n),t.notificationFilterDisabledClassification=n,t.default=function(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,Error("Not implemented")}},21708:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},l=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.buildNotificationsFromMetadata=t.buildGqlStatusObjectFromMetadata=t.polyfillNotification=t.polyfillGqlStatusObject=t.GqlStatusObject=t.Notification=t.notificationClassification=t.notificationCategory=t.notificationSeverityLevel=void 0;var u=a(r(72362)),c=r(48912),p={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},d={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};t.notificationSeverityLevel=d,Object.freeze(d);var f=Object.values(d),h={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};t.notificationCategory=h,Object.freeze(h);var y=Object.values(h);t.notificationClassification=h;var m=function(e){this.code=e.code,this.title=e.title,this.description=e.description,this.severity=e.severity,this.position=S(e.position),this.severityLevel=w(e.severity),this.rawSeverityLevel=e.severity,this.category=I(e.category),this.rawCategory=e.category};t.Notification=m;var v=function(){function e(e){var t;this.gqlStatus=e.gql_status,this.statusDescription=e.status_description,this.diagnosticRecord=null!==(t=e.diagnostic_record)&&void 0!==t?t:{},this.position=null!=this.diagnosticRecord._position?S(this.diagnosticRecord._position):void 0,this.severity=w(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=I(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=null!=e.neo4j_code,Object.freeze(this)}return Object.defineProperty(e.prototype,"diagnosticRecordAsJsonString",{get:function(){return u.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),e}();function g(e){var t,r,n;if(null!=e.neo4j_code)return new m({code:e.neo4j_code,title:e.title,description:e.description,severity:null===(t=e.diagnostic_record)||void 0===t?void 0:t._severity,category:null===(r=e.diagnostic_record)||void 0===r?void 0:r._classification,position:null===(n=e.diagnostic_record)||void 0===n?void 0:n._position})}function b(e){var t,r=e.severity===d.WARNING?p.WARNING:p.INFORMATION,i={gql_status:r.gql_status,status_description:null!==(t=e.description)&&void 0!==t?t:r.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:n({},_)};return null!=e.severity&&(i.diagnostic_record._severity=e.severity),null!=e.category&&(i.diagnostic_record._classification=e.category),null!=e.position&&(i.diagnostic_record._position=e.position),new v(i)}t.GqlStatusObject=v,t.polyfillNotification=g,t.polyfillGqlStatusObject=b;var _={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"};Object.freeze(_);var T={SUCCESS:new v({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:_}),NO_DATA:new v({gql_status:"02000",status_description:"note: no data",diagnostic_record:_}),NO_DATA_UNKNOWN_SUBCONDITION:new v(n(n({},p.NO_DATA),{diagnostic_record:_})),OMITTED_RESULT:new v({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:_})};Object.freeze(T),t.buildGqlStatusObjectFromMetadata=function(e){var t,r,n;return null!=e.statuses?e.statuses.map(function(e){return new v(e)}):l([(null==(t=e.stream_summary)?void 0:t.have_records_streamed)===!0?T.SUCCESS:(null==t?void 0:t.has_keys)===!1?T.OMITTED_RESULT:(null==t?void 0:t.pulled)===!0?T.NO_DATA:T.NO_DATA_UNKNOWN_SUBCONDITION],s(null!==(n=null===(r=e.notifications)||void 0===r?void 0:r.map(b))&&void 0!==n?n:[]),!1).sort(function(e,t){return O(e)-O(t)})};var E=Object.freeze({"02":0,"01":1,"00":2});function O(e){var t,r;return null!==(r=E[null===(t=e.gqlStatus)||void 0===t?void 0:t.slice(0,2)])&&void 0!==r?r:9999}function S(e){return null==e?{}:{offset:c.util.toNumber(e.offset),line:c.util.toNumber(e.line),column:c.util.toNumber(e.column)}}function w(e){return f.includes(e)?e:d.UNKNOWN}function I(e){return y.includes(e)?e:h.UNKNOWN}t.buildNotificationsFromMetadata=function(e){return null!=e.notifications?e.notifications.map(function(e){return new m(e)}):null!=e.statuses?e.statuses.map(g).filter(function(e){return null!=e}):[]},t.default=m},83358:function(e,t,r){"use strict";var n=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var a=r(49348),s=function(){function e(e,t,r){var n;this.keys=e,this.length=e.length,this._fields=t,this._fieldLookup=null!=r?r:(n={},e.forEach(function(e,t){n[e]=t}),n)}return e.prototype.forEach=function(e){var t,r;try{for(var n=i(this.entries()),a=n.next();!a.done;a=n.next()){var s=o(a.value,2),l=s[0],u=s[1];e(u,l,this)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.map=function(e){var t,r,n=[];try{for(var a=i(this.entries()),s=a.next();!s.done;s=a.next()){var l=o(s.value,2),u=l[0],c=l[1];n.push(e(c,u,this))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n},e.prototype.entries=function(){var e;return n(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:if(!(e<this.keys.length))return[3,4];return[4,[this.keys[e],this._fields[e]]];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var e;return n(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:if(!(e<this.keys.length))return[3,4];return[4,this._fields[e]];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var e;return n(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:if(!(e<this.keys.length))return[3,4];return[4,this._fields[e]];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var e,t,r={};try{for(var n=i(this.entries()),a=n.next();!a.done;a=n.next()){var s=o(a.value,2),l=s[0],u=s[1];r[l]=u}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},e.prototype.get=function(e){var t;if("number"!=typeof e){if(void 0===(t=this._fieldLookup[e]))throw(0,a.newError)("This record has no field with key '".concat(e.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=e;if(t>this._fields.length-1||t<0)throw(0,a.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(e){return"number"==typeof e?e>=0&&e<this._fields.length:void 0!==this._fieldLookup[e]},e}();t.default=s},33695:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){this.keys=e,this.records=t,this.summary=r}},52455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stats=t.QueryStatistics=t.ProfiledPlan=t.Plan=t.ServerInfo=t.queryType=void 0;var n=r(48912),i=r(21708),o=function(){function e(e,t,r,n){var o,c,p;this.query={text:e,parameters:t},this.queryType=r.type,this.counters=new l(null!==(o=r.stats)&&void 0!==o?o:{}),this.updateStatistics=this.counters,this.plan=(null!=r.plan||null!=r.profile)&&new a(null!==(c=r.plan)&&void 0!==c?c:r.profile),this.profile=null!=r.profile&&new s(r.profile),this.notifications=(0,i.buildNotificationsFromMetadata)(r),this.gqlStatusObjects=(0,i.buildGqlStatusObjectFromMetadata)(r),this.server=new u(r.server,n),this.resultConsumedAfter=r.result_consumed_after,this.resultAvailableAfter=r.result_available_after,this.database={name:null!==(p=r.db)&&void 0!==p?p:null}}return e.prototype.hasPlan=function(){return this.plan instanceof a},e.prototype.hasProfile=function(){return this.profile instanceof s},e}(),a=function e(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.children=null!=t.children?t.children.map(function(t){return new e(t)}):[]};t.Plan=a;var s=function(){function e(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.dbHits=c("dbHits",t),this.rows=c("rows",t),this.pageCacheMisses=c("pageCacheMisses",t),this.pageCacheHits=c("pageCacheHits",t),this.pageCacheHitRatio=c("pageCacheHitRatio",t),this.time=c("time",t),this.children=null!=t.children?t.children.map(function(t){return new e(t)}):[]}return e.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},e}();t.ProfiledPlan=s,t.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};var l=function(){function e(e){var t=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(e).forEach(function(r){var i=r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()});i in t._stats?t._stats[i]=n.util.toNumber(e[r]):"systemUpdates"===i?t._systemUpdates=n.util.toNumber(e[r]):"containsSystemUpdates"===i?t._containsSystemUpdates=e[r]:"containsUpdates"===i&&(t._containsUpdates=e[r])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var e=this;return void 0!==this._containsUpdates?this._containsUpdates:Object.keys(this._stats).reduce(function(t,r){return t+e._stats[r]},0)>0},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return void 0!==this._containsSystemUpdates?this._containsSystemUpdates:this._systemUpdates>0},e.prototype.systemUpdates=function(){return this._systemUpdates},e}();t.QueryStatistics=l;var u=function(e,t){null!=e&&(this.address=e.address,this.agent=e.version),this.protocolVersion=t};function c(e,t,r){if(void 0===r&&(r=0),!1===t||!(e in t))return r;var i=t[e];return n.util.toNumber(i)}t.ServerInfo=u,t.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},t.default=o},60688:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(33695)),s=r(49348),l=new(function(){function e(){}return e.prototype.eagerResultTransformer=function(){return u},e.prototype.eager=function(){return u},e.prototype.mappedResultTransformer=function(e){return c(e)},e.prototype.mapped=function(e){return c(e)},e.prototype.first=function(){return p},e.prototype.summary=function(){return d},e}());function u(e){return n(this,void 0,void 0,function(){var t,r,n,o;return i(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=(t=i.sent()).summary,n=t.records,[4,e.keys()];case 2:return o=i.sent(),[2,new a.default(o,n,r)]}})})}function c(e){var t=this;if(null==e||null==e.collect&&null==e.map)throw(0,s.newError)("Requires a map or/and a collect functions.");return function(r){return n(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,n){var i={records:[],keys:[]};r.subscribe({onKeys:function(e){i.keys=e},onNext:function(t){if(null!=e.map){var r=e.map(t);void 0!==r&&i.records.push(r)}else i.records.push(t)},onCompleted:function(r){null!=e.collect?t(e.collect(i.records,r,i.keys)):t({records:i.records,summary:r,keys:i.keys})},onError:function(e){n(e)}})})];case 1:return[2,t.sent()]}})})}}function p(e){return n(this,void 0,void 0,function(){var t,r,n,o;return i(this,function(i){switch(i.label){case 0:return[4,(t=e[Symbol.asyncIterator]()).next()];case 1:n=(r=i.sent()).value,o=r.done,i.label=2;case 2:if(i.trys.push([2,,3,6]),!0===o)return[2,void 0];return[2,n];case 3:if(!(null!=t.return))return[3,5];return[4,t.return()];case 4:i.sent(),i.label=5;case 5:return[7];case 6:return[2]}})})}function d(e){return n(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,e.summary()];case 1:return[2,t.sent()]}})})}Object.freeze(l),t.default=l},83391:function(e,t,r){"use strict";var n,i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(52455)),l=r(48912),u=r(49348),c=l.connectionHolder.EMPTY_CONNECTION_HOLDER,p=function(e){console.log("Uncaught error when processing result: "+e)},d=function(e){},f=function(e){},h=function(){function e(e,t,r,i,o){var a;void 0===o&&(o={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[n]="Result",this._stack=null!=(a=Error("")).stack?a.stack.replace(/^Error(\n\r)*/,""):null,this._streamObserverPromise=e,this._p=null,this._query=t,this._parameters=null!=r?r:{},this._connectionHolder=null!=i?i:c,this._keys=null,this._summary=null,this._error=null,this._watermarks=o}return e.prototype.keys=function(){var e=this;return null!==this._keys?Promise.resolve(this._keys):null!==this._error?Promise.reject(this._error):new Promise(function(t,r){e._streamObserverPromise.then(function(n){return n.subscribe(e._decorateObserver({onKeys:function(e){return t(e)},onError:function(e){return r(e)}}))}).catch(r)})},e.prototype.summary=function(){var e=this;return null!==this._summary?Promise.resolve(this._summary):null!==this._error?Promise.reject(this._error):new Promise(function(t,r){e._streamObserverPromise.then(function(n){n.cancel(),n.subscribe(e._decorateObserver({onCompleted:function(e){return t(e)},onError:function(e){return r(e)}}))}).catch(r)})},e.prototype._getOrCreatePromise=function(){var e=this;return null==this._p&&(this._p=new Promise(function(t,r){var n=[];e.subscribe({onNext:function(e){n.push(e)},onCompleted:function(e){t({records:n,summary:e})},onError:function(e){r(e)}})})),this._p},e.prototype[Symbol.asyncIterator]=function(){var e=this;if(!this.isOpen()){var t=(0,u.newError)("Result is already consumed");return{next:function(){return Promise.reject(t)},peek:function(){return Promise.reject(t)}}}var r={paused:!0,firstRun:!0,finished:!1},n=function(){if(null!=r.streaming){var t,n,i=null!==(n=null===(t=r.queuedObserver)||void 0===t?void 0:t.size)&&void 0!==n?n:0,o=i>=e._watermarks.high,a=i<=e._watermarks.low;o&&!r.paused?(r.paused=!0,r.streaming.pause()):(a&&r.paused||r.firstRun&&!o)&&(r.firstRun=!1,r.paused=!1,r.streaming.resume())}},a=function(){return i(e,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:if(void 0!==r.queuedObserver)return[3,2];return r.queuedObserver=this._createQueuedResultObserver(n),e=r,[4,this._subscribe(r.queuedObserver,!0).catch(function(){})];case 1:e.streaming=t.sent(),n(),t.label=2;case 2:return[2,r.queuedObserver]}})})},s=function(e){if(void 0===e)throw(0,u.newError)("InvalidState: Result stream finished without Summary",u.PROTOCOL_ERROR);return!0};return{next:function(){return i(e,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:if(r.finished&&s(r.summary))return[2,{done:!0,value:r.summary}];return[4,a()];case 1:return[4,t.sent().dequeue()];case 2:return!0===(e=t.sent()).done&&(r.finished=e.done,r.summary=e.value),[2,e]}})})},return:function(t){return i(e,void 0,void 0,function(){var e,n;return o(this,function(i){switch(i.label){case 0:if(r.finished&&s(r.summary))return[2,{done:!0,value:null!=t?t:r.summary}];return null===(n=r.streaming)||void 0===n||n.cancel(),[4,a()];case 1:return[4,i.sent().dequeueUntilDone()];case 2:return e=i.sent(),r.finished=!0,e.value=null!=t?t:e.value,r.summary=e.value,[2,e]}})})},peek:function(){return i(e,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:if(r.finished&&s(r.summary))return[2,{done:!0,value:r.summary}];return[4,a()];case 1:return[4,e.sent().head()];case 2:return[2,e.sent()]}})})}}},e.prototype.then=function(e,t){return this._getOrCreatePromise().then(e,t)},e.prototype.catch=function(e){return this._getOrCreatePromise().catch(e)},e.prototype.finally=function(e){return this._getOrCreatePromise().finally(e)},e.prototype.subscribe=function(e){this._subscribe(e).catch(function(){})},e.prototype.isOpen=function(){return null===this._summary&&null===this._error},e.prototype._subscribe=function(e,t){void 0===t&&(t=!1);var r=this._decorateObserver(e);return this._streamObserverPromise.then(function(e){return t&&e.pause(),e.subscribe(r),e}).catch(function(e){return null!=r.onError&&r.onError(e),Promise.reject(e)})},e.prototype._decorateObserver=function(e){var t,r,n,i=this,o=null!==(t=e.onCompleted)&&void 0!==t?t:d,a=null!==(r=e.onError)&&void 0!==r?r:p,s=null!==(n=e.onKeys)&&void 0!==n?n:f;return{onNext:null!=e.onNext?e.onNext.bind(e):void 0,onKeys:function(t){return i._keys=t,s.call(e,t)},onCompleted:function(t){i._releaseConnectionAndGetSummary(t).then(function(t){return null!==i._summary?o.call(e,i._summary):(i._summary=t,o.call(e,t))}).catch(a)},onError:function(t){i._connectionHolder.releaseConnection().then(function(){var r;null!=(r=i._stack)&&(t.stack=t.toString()+"\n"+r),i._error=t,a.call(e,t)}).catch(a)}}},e.prototype._cancel=function(){null===this._summary&&null===this._error&&this._streamObserverPromise.then(function(e){return e.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(e){var t=l.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),r=t.validatedQuery,n=t.params,i=this._connectionHolder;return i.getConnection().then(function(e){return i.releaseConnection().then(function(){return null==e?void 0:e.getProtocolVersion()})},function(e){}).then(function(t){return new s.default(r,n,e,t)})},e.prototype._createQueuedResultObserver=function(e){var t=this;function r(){var e={};return e.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),e}function n(e){return e instanceof Error}function a(){var t;return i(this,void 0,void 0,function(){var i;return o(this,function(o){switch(o.label){case 0:if(s.length>0){if(i=null!==(t=s.shift())&&void 0!==t?t:(0,u.newError)("Unexpected empty buffer",u.PROTOCOL_ERROR),e(),n(i))throw i;return[2,i]}return l.resolvable=r(),[4,l.resolvable.promise];case 1:return[2,o.sent()]}})})}var s=[],l={resolvable:null},c={onNext:function(e){c._push({done:!1,value:e})},onCompleted:function(e){c._push({done:!0,value:e})},onError:function(e){c._push(e)},_push:function(t){if(null!==l.resolvable){var r=l.resolvable;l.resolvable=null,n(t)?r.reject(t):r.resolve(t)}else s.push(t),e()},dequeue:a,dequeueUntilDone:function(){return i(t,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,a()];case 1:if(!0===(e=t.sent()).done)return[2,e];return[3,0];case 2:return[2]}})})},head:function(){return i(t,void 0,void 0,function(){var t,i;return o(this,function(o){switch(o.label){case 0:if(s.length>0){if(n(t=s[0]))throw t;return[2,t]}l.resolvable=r(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,l.resolvable.promise];case 2:return t=o.sent(),s.unshift(t),[2,t];case 3:throw i=o.sent(),s.unshift(i),i;case 4:return e(),[7];case 5:return[2]}})})},get size(){return s.length}};return c},e}();n=Symbol.toStringTag,t.default=h},82044:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=r(35671),u=r(57113),c=r(57989),p=r(49348),d=s(r(83391)),f=r(59069),h=r(82198),y=r(78737),m=r(36980),v=s(r(5953)),g=s(r(8905)),b=function(){function e(e){var t,r,n=e.mode,i=e.connectionProvider,o=e.bookmarks,a=e.database,s=e.config,l=e.reactive,u=e.fetchSize,p=e.impersonatedUser,d=e.bookmarkManager,m=e.notificationFilter,v=e.auth,g=e.log;this._mode=n,this._database=a,this._reactive=l,this._fetchSize=u,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new f.ConnectionHolder({mode:c.ACCESS_MODE_READ,auth:v,database:a,bookmarks:o,connectionProvider:i,impersonatedUser:p,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:g}),this._writeConnectionHolder=new f.ConnectionHolder({mode:c.ACCESS_MODE_WRITE,auth:v,database:a,bookmarks:o,connectionProvider:i,impersonatedUser:p,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:g}),this._open=!0,this._hasTx=!1,this._impersonatedUser=p,this._lastBookmarks=null!=o?o:y.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=(r=null!==(t=null==s?void 0:s.maxTransactionRetryTime)&&void 0!==t?t:null,new h.TransactionExecutor(r)),this._databaseNameResolved=""!==this._database;var b=this._calculateWatermaks();this._lowRecordWatermark=b.low,this._highRecordWatermark=b.high,this._results=[],this._bookmarkManager=d,this._notificationFilter=m,this._log=g}return e.prototype.run=function(e,t,r){var o=this,a=(0,u.validateQueryAndParameters)(e,t),s=a.validatedQuery,l=a.params,p=null!=r?new m.TxConfig(r,this._log):m.TxConfig.empty(),d=this._run(s,l,function(e){return n(o,void 0,void 0,function(){var t,r=this;return i(this,function(n){switch(n.label){case 0:return[4,this._bookmarks()];case 1:return t=n.sent(),this._assertSessionIsOpen(),[2,e.run(s,l,{bookmarks:t,txConfig:p,mode:this._mode,database:this._database,apiTelemetryConfig:{api:c.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(e){return r._onCompleteCallback(e,t)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter})]}})})});return this._results.push(d),d},e.prototype._run=function(e,t,r){var n=this._acquireAndConsumeConnection(r),i=n.connectionHolder,o=n.resultPromise.catch(function(e){return Promise.resolve(new l.FailedObserver({error:e}))}),a={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new d.default(o,e,t,i,a)},e.prototype._acquireConnection=function(e){var t=this,r=this._acquireAndConsumeConnection(e),o=r.connectionHolder;return r.resultPromise.then(function(e){return n(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,o.releaseConnection()];case 1:return t.sent(),[2,e]}})})})},e.prototype._acquireAndConsumeConnection=function(e){var t,r=this._connectionHolderWithMode(this._mode);return t=this._open?!this._hasTx&&r.initializeConnection()?r.getConnection().then(function(t){return e(t)}):Promise.reject((0,p.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,p.newError)("Cannot run query in a closed session.")),{connectionHolder:r,resultPromise:t}},e.prototype.beginTransaction=function(e){var t=m.TxConfig.empty();return null!=e&&(t=new m.TxConfig(e,this._log)),this._beginTransaction(this._mode,t,{api:c.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype._beginTransaction=function(t,r,n){var i=this;if(!this._open)throw(0,p.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,p.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var o=e._validateSessionMode(t),a=this._connectionHolderWithMode(o);a.initializeConnection(),this._hasTx=!0;var s=new v.default({connectionHolder:a,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(e,t,r){return i._updateBookmarks(e,t,r)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:n});return s._begin(function(){return i._bookmarks()},r),s},e.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,p.newError)("You cannot run more transactions on a closed session.")},e.prototype._transactionClosed=function(){this._hasTx=!1},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},e.prototype._bookmarks=function(){var e;return n(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return[4,null===(e=this._bookmarkManager)||void 0===e?void 0:e.getBookmarks()];case 1:if(void 0===(t=r.sent()))return[2,this._lastBookmarks];return[2,new y.Bookmarks(a(a([],o(t),!1),o(this._configuredBookmarks),!1))]}})})},e.prototype.readTransaction=function(e,t){var r=new m.TxConfig(t,this._log);return this._runTransaction(c.ACCESS_MODE_READ,r,e)},e.prototype.writeTransaction=function(e,t){var r=new m.TxConfig(t,this._log);return this._runTransaction(c.ACCESS_MODE_WRITE,r,e)},e.prototype._runTransaction=function(e,t,r){var n=this;return this._transactionExecutor.execute(function(r){return n._beginTransaction(e,t,r)},r)},e.prototype.executeRead=function(e,t){var r=new m.TxConfig(t,this._log);return this._executeInTransaction(c.ACCESS_MODE_READ,r,e)},e.prototype.executeWrite=function(e,t){var r=new m.TxConfig(t,this._log);return this._executeInTransaction(c.ACCESS_MODE_WRITE,r,e)},e.prototype._executeInTransaction=function(e,t,r){var n=this;return this._transactionExecutor.execute(function(r){return n._beginTransaction(e,t,r)},r,g.default.fromTransaction)},e.prototype._onDatabaseNameResolved=function(e){if(!this._databaseNameResolved){var t=null!=e?e:"";this._database=t,this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0}},e.prototype._getConnectionAcquistionBookmarks=function(){var e;return n(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return[4,null===(e=this._bookmarkManager)||void 0===e?void 0:e.getBookmarks()];case 1:if(void 0===(t=r.sent()))return[2,this._lastBookmarks];return[2,new y.Bookmarks(a(a([],o(this._configuredBookmarks),!1),o(t),!1))]}})})},e.prototype._updateBookmarks=function(e,t,r){var n,i,o;null==e||e.isEmpty()||(null===(n=this._bookmarkManager)||void 0===n||n.updateBookmarks(null!==(i=null==t?void 0:t.values())&&void 0!==i?i:[],null!==(o=null==e?void 0:e.values())&&void 0!==o?o:[]).catch(function(){}),this._lastBookmarks=e,this._configuredBookmarks=y.Bookmarks.empty())},e.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:if(!this._open)return[3,3];return this._open=!1,this._results.forEach(function(e){return e._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)];case 1:return e.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._connectionHolderWithMode=function(e){if(e===c.ACCESS_MODE_READ)return this._readConnectionHolder;if(e===c.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,p.newError)("Unknown access mode: "+e)},e.prototype._onCompleteCallback=function(e,t){this._updateBookmarks(new y.Bookmarks(e.bookmark),t,e.db)},e.prototype._calculateWatermaks=function(){return this._fetchSize===c.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},e.prototype._configureTransactionExecutor=function(e,t){this._transactionExecutor.pipelineBegin=e,this._transactionExecutor.telemetryApi=t},e._validateSessionMode=function(e){var t=null!=e?e:c.ACCESS_MODE_WRITE;if(t!==c.ACCESS_MODE_READ&&t!==c.ACCESS_MODE_WRITE)throw(0,p.newError)("Illegal session mode "+t);return t},e}();t.default=b},59378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPoint=t.Point=void 0;var n=r(57113),i="__isPoint__",o=function(){function e(e,t,r,i){this.srid=(0,n.assertNumberOrInteger)(e,"SRID"),this.x=(0,n.assertNumber)(t,"X coordinate"),this.y=(0,n.assertNumber)(r,"Y coordinate"),this.z=null==i?i:(0,n.assertNumber)(i,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return null==this.z||isNaN(this.z)?"Point{srid=".concat(a(this.srid),", x=").concat(a(this.x),", y=").concat(a(this.y),"}"):"Point{srid=".concat(a(this.srid),", x=").concat(a(this.x),", y=").concat(a(this.y),", z=").concat(a(this.z),"}")},e}();function a(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}t.Point=o,Object.defineProperty(o.prototype,i,{value:!0,enumerable:!1,configurable:!1,writable:!1}),t.isPoint=function(e){return null!=e&&!0===e[i]}},28613:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.isDateTime=t.DateTime=t.isLocalDateTime=t.LocalDateTime=t.isDate=t.Date=t.isTime=t.Time=t.isLocalTime=t.LocalTime=t.isDuration=t.Duration=void 0;var s=o(r(55670)),l=r(57113),u=r(49348),c=o(r(88563)),p={value:!0,enumerable:!1,configurable:!1,writable:!1},d="__isDuration__",f="__isLocalTime__",h="__isTime__",y="__isDate__",m="__isLocalDateTime__",v="__isDateTime__",g=function(){function e(e,t,r,n){this.months=(0,l.assertNumberOrInteger)(e,"Months"),this.days=(0,l.assertNumberOrInteger)(t,"Days"),(0,l.assertNumberOrInteger)(r,"Seconds"),(0,l.assertNumberOrInteger)(n,"Nanoseconds"),this.seconds=s.normalizeSecondsForDuration(r,n),this.nanoseconds=s.normalizeNanosecondsForDuration(n),Object.freeze(this)}return e.prototype.toString=function(){return s.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();t.Duration=g,Object.defineProperty(g.prototype,d,p),t.isDuration=function(e){return S(e,d)};var b=function(){function e(e,t,r,n){this.hour=s.assertValidHour(e),this.minute=s.assertValidMinute(t),this.second=s.assertValidSecond(r),this.nanosecond=s.assertValidNanosecond(n),Object.freeze(this)}return e.fromStandardDate=function(t,r){I(t,r);var n=s.totalNanoseconds(t,r);return new e(t.getHours(),t.getMinutes(),t.getSeconds(),n instanceof c.default?n.toInt():"bigint"==typeof n?(0,c.int)(n).toInt():n)},e.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e}();t.LocalTime=b,Object.defineProperty(b.prototype,f,p),t.isLocalTime=function(e){return S(e,f)};var _=function(){function e(e,t,r,n,i){this.hour=s.assertValidHour(e),this.minute=s.assertValidMinute(t),this.second=s.assertValidSecond(r),this.nanosecond=s.assertValidNanosecond(n),this.timeZoneOffsetSeconds=(0,l.assertNumberOrInteger)(i,"Time zone offset in seconds"),Object.freeze(this)}return e.fromStandardDate=function(t,r){return I(t,r),new e(t.getHours(),t.getMinutes(),t.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(t,r)),s.timeZoneOffsetInSeconds(t))},e.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+s.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e}();t.Time=_,Object.defineProperty(_.prototype,h,p),t.isTime=function(e){return S(e,h)};var T=function(){function e(e,t,r){this.year=s.assertValidYear(e),this.month=s.assertValidMonth(t),this.day=s.assertValidDay(r),Object.freeze(this)}return e.fromStandardDate=function(t){return I(t),new e(t.getFullYear(),t.getMonth()+1,t.getDate())},e.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return s.dateToIsoString(this.year,this.month,this.day)},e}();t.Date=T,Object.defineProperty(T.prototype,y,p),t.isDate=function(e){return S(e,y)};var E=function(){function e(e,t,r,n,i,o,a){this.year=s.assertValidYear(e),this.month=s.assertValidMonth(t),this.day=s.assertValidDay(r),this.hour=s.assertValidHour(n),this.minute=s.assertValidMinute(i),this.second=s.assertValidSecond(o),this.nanosecond=s.assertValidNanosecond(a),Object.freeze(this)}return e.fromStandardDate=function(t,r){return I(t,r),new e(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(t,r)))},e.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return w(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e}();t.LocalDateTime=E,Object.defineProperty(E.prototype,m,p),t.isLocalDateTime=function(e){return S(e,m)};var O=function(){function e(e,t,r,n,i,o,c,p,d){this.year=s.assertValidYear(e),this.month=s.assertValidMonth(t),this.day=s.assertValidDay(r),this.hour=s.assertValidHour(n),this.minute=s.assertValidMinute(i),this.second=s.assertValidSecond(o),this.nanosecond=s.assertValidNanosecond(c);var f=a(function(e,t){var r=null!=e,n=null!=t&&""!==t;if(!r&&!n)throw(0,u.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(t));var i=[void 0,void 0];return r&&((0,l.assertNumberOrInteger)(e,"Time zone offset in seconds"),i[0]=e),n&&((0,l.assertString)(t,"Time zone ID"),s.assertValidZoneId("Time zone ID",t),i[1]=t),i}(p,d),2),h=f[0],y=f[1];this.timeZoneOffsetSeconds=h,this.timeZoneId=null!=y?y:void 0,Object.freeze(this)}return e.fromStandardDate=function(t,r){return I(t,r),new e(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(t,r)),s.timeZoneOffsetInSeconds(t),null)},e.prototype.toStandardDate=function(){return s.toStandardDate(this._toUTC())},e.prototype.toString=function(){var e;return w(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(null!=this.timeZoneOffsetSeconds?s.timeZoneOffsetToIsoString(null!==(e=this.timeZoneOffsetSeconds)&&void 0!==e?e:0):"")+(null!=this.timeZoneId?"[".concat(this.timeZoneId,"]"):"")},e.prototype._toUTC=function(){if(void 0===this.timeZoneOffsetSeconds)throw Error("Requires DateTime created with time zone offset");var e,t=s.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract(null!==(e=this.timeZoneOffsetSeconds)&&void 0!==e?e:0);return(0,c.int)(t).multiply(1e3).add((0,c.int)(this.nanosecond).div(1e6)).toNumber()},e}();function S(e,t){return null!=e&&!0===e[t]}function w(e,t,r,n,i,o,a){return s.dateToIsoString(e,t,r)+"T"+s.timeToIsoString(n,i,o,a)}function I(e,t){(0,l.assertValidDate)(e,"Standard date"),null!=t&&(0,l.assertNumberOrInteger)(t,"Nanosecond")}t.DateTime=O,Object.defineProperty(O.prototype,v,p),t.isDateTime=function(e){return S(e,v)}},8905:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){var t=e.run;this._run=t}return e.fromTransaction=function(t){return new e({run:t.run.bind(t)})},e.prototype.run=function(e,t){return this._run(e,t)},e}();t.default=r},5953:function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(t){var r=t.connectionHolder,n=t.onClose,o=t.onBookmarks,a=t.onConnection,s=t.reactive,l=t.fetchSize,u=t.impersonatedUser,c=t.highRecordWatermark,p=t.lowRecordWatermark,d=t.notificationFilter,f=t.apiTelemetryConfig,h=e.call(this,{connectionHolder:r,onClose:n,onBookmarks:o,onConnection:a,reactive:s,fetchSize:l,impersonatedUser:u,highRecordWatermark:c,lowRecordWatermark:p,notificationFilter:d,apiTelemetryConfig:f})||this;return h[i]="TransactionPromise",h}return o(t,e),t.prototype.then=function(e,t){return this._getOrCreateBeginPromise().then(e,t)},t.prototype.catch=function(e){return this._getOrCreateBeginPromise().catch(e)},t.prototype.finally=function(e){return this._getOrCreateBeginPromise().finally(e)},t.prototype._getOrCreateBeginPromise=function(){var e=this;return null==this._beginPromise&&(this._beginPromise=new Promise(function(t,r){e._resolve=t,e._reject=r,null!=e._beginError&&r(e._beginError),null!=e._beginMetadata&&t(e._toTransaction())})),this._beginPromise},t.prototype._toTransaction=function(){return a(a({},this),{run:e.prototype.run.bind(this),commit:e.prototype.commit.bind(this),rollback:e.prototype.rollback.bind(this),close:e.prototype.close.bind(this),isOpen:e.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},t.prototype._begin=function(t,r){return e.prototype._begin.call(this,t,r,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this)})},t.prototype._onBeginError=function(e){this._beginError=e,null!=this._reject&&this._reject(e)},t.prototype._onBeginMetadata=function(e){this._beginMetadata=null!=e?e:{},null!=this._resolve&&this._resolve(this._toTransaction())},t}(s(r(84487)).default);i=Symbol.toStringTag,t.default=l},84487:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(57113),s=r(59069),l=r(78737),u=r(36980),c=r(35671),p=r(49348),d=o(r(83391)),f=function(){function e(e){var t=e.connectionHolder,r=e.onClose,n=e.onBookmarks,i=e.onConnection,o=e.reactive,a=e.fetchSize,s=e.impersonatedUser,u=e.highRecordWatermark,c=e.lowRecordWatermark,p=e.notificationFilter,d=e.apiTelemetryConfig,f=this;this._connectionHolder=t,this._reactive=o,this._state=h.ACTIVE,this._onClose=r,this._onBookmarks=n,this._onConnection=i,this._onError=this._onErrorCallback.bind(this),this._fetchSize=a,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=s,this._lowRecordWatermak=c,this._highRecordWatermark=u,this._bookmarks=l.Bookmarks.empty(),this._notificationFilter=p,this._apiTelemetryConfig=d,this._acceptActive=function(){},this._activePromise=new Promise(function(e,t){f._acceptActive=e})}return e.prototype._begin=function(e,t,r){var o=this;this._connectionHolder.getConnection().then(function(a){return n(o,void 0,void 0,function(){var n,o=this;return i(this,function(i){switch(i.label){case 0:if(this._onConnection(),!(null!=a))return[3,2];return n=this,[4,e()];case 1:return n._bookmarks=i.sent(),[2,a.beginTransaction({bookmarks:this._bookmarks,txConfig:t,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(e){null!=r&&r.onError(e),o._onError(e).catch(function(){})},afterComplete:function(e){null!=r&&r.onComplete(e),o._onComplete(e)}})];case 2:throw(0,p.newError)("No connection available")}})})}).catch(function(e){null!=r&&r.onError(e),o._onError(e).catch(function(){})}).finally(function(){return o._acceptActive()})},e.prototype.run=function(e,t){var r=(0,a.validateQueryAndParameters)(e,t),n=r.validatedQuery,i=r.params,o=this._state.run(n,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(o),o},e.prototype.commit=function(){var e=this,t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(t){return e._onCompleteCallback(t,e._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise(function(e,r){t.result.subscribe({onCompleted:function(){return e()},onError:function(e){return r(e)}})})},e.prototype.rollback=function(){var e=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=e.state,this._onClose(),new Promise(function(t,r){e.result.subscribe({onCompleted:function(){return t()},onError:function(e){return r(e)}})})},e.prototype.isOpen=function(){return this._state===h.ACTIVE},e.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:if(!this.isOpen())return[3,2];return[4,this.rollback()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(e){return this._state===h.FAILED?Promise.resolve(null):(this._state=h.FAILED,this._onClose(),this._results.forEach(function(t){t.isOpen()&&t._streamObserverPromise.then(function(t){return t.onError(e)}).catch(function(e){})}),this._connectionHolder.releaseConnection())},e.prototype._onCompleteCallback=function(e,t){this._onBookmarks(new l.Bookmarks(null==e?void 0:e.bookmark),null!=t?t:l.Bookmarks.empty(),null==e?void 0:e.db)},e}(),h={ACTIVE:{commit:function(e){return{result:y(!0,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults,e.preparationJob),state:h.SUCCEEDED}},rollback:function(e){return{result:y(!1,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults,e.preparationJob),state:h.ROLLED_BACK}},run:function(e,t,r){var n=r.connectionHolder,i=r.onError,o=r.onComplete,a=r.onConnection,s=r.reactive,d=r.fetchSize,f=r.highRecordWatermark,h=r.lowRecordWatermark,y=r.preparationJob,v=null!=y?y:Promise.resolve();return m(n.getConnection().then(function(e){return v.then(function(){return e})}).then(function(r){if(a(),null!=r)return r.run(e,t,{bookmarks:l.Bookmarks.empty(),txConfig:u.TxConfig.empty(),beforeError:i,afterComplete:o,reactive:s,fetchSize:d,highRecordWatermark:f,lowRecordWatermark:h});throw(0,p.newError)("No connection available")}).catch(function(e){return new c.FailedObserver({error:e,onError:i})}),e,t,n,f,h)}},FAILED:{commit:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:m(new c.FailedObserver({error:(0,p.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:r}),"COMMIT",{},t,0,0),state:h.FAILED}},rollback:function(e){var t=e.connectionHolder;return e.onError,e.onComplete,{result:m(new c.CompletedObserver,"ROLLBACK",{},t,0,0),state:h.FAILED}},run:function(e,t,r){var n=r.connectionHolder,i=r.onError;return r.onComplete,m(new c.FailedObserver({error:(0,p.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:i}),e,t,n,0,0)}},SUCCEEDED:{commit:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:m(new c.FailedObserver({error:(0,p.newError)("Cannot commit this transaction, because it has already been committed."),onError:r}),"COMMIT",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:h.SUCCEEDED,connectionHolder:t}},rollback:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:m(new c.FailedObserver({error:(0,p.newError)("Cannot rollback this transaction, because it has already been committed."),onError:r}),"ROLLBACK",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:h.SUCCEEDED,connectionHolder:t}},run:function(e,t,r){var n=r.connectionHolder,i=r.onError;return r.onComplete,m(new c.FailedObserver({error:(0,p.newError)("Cannot run query in this transaction, because it has already been committed."),onError:i}),e,t,n,0,0)}},ROLLED_BACK:{commit:function(e){var t=e.connectionHolder,r=e.onError;return e.onComplete,{result:m(new c.FailedObserver({error:(0,p.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:r}),"COMMIT",{},t,0,0),state:h.ROLLED_BACK}},rollback:function(e){var t=e.connectionHolder;return e.onError,e.onComplete,{result:m(new c.FailedObserver({error:(0,p.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t,0,0),state:h.ROLLED_BACK}},run:function(e,t,r){var n=r.connectionHolder,i=r.onError;return r.onComplete,m(new c.FailedObserver({error:(0,p.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:i}),e,t,n,0,0)}}};function y(e,t,r,n,i,o,a){var s=null!=a?a:Promise.resolve(),l=t.getConnection().then(function(e){return s.then(function(){return e})}).then(function(t){return i(),o.forEach(function(e){return e._cancel()}),Promise.all(o.map(function(e){return e.summary()})).then(function(i){if(null!=t)return e?t.commitTransaction({beforeError:r,afterComplete:n}):t.rollbackTransaction({beforeError:r,afterComplete:n});throw(0,p.newError)("No connection available")})}).catch(function(e){return new c.FailedObserver({error:e,onError:r})});return new d.default(l,e?"COMMIT":"ROLLBACK",{},t,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function m(e,t,r,n,i,o){return void 0===n&&(n=s.EMPTY_CONNECTION_HOLDER),new d.default(Promise.resolve(e),t,r,new s.ReadOnlyConnectionHolder(null!=n?n:s.EMPTY_CONNECTION_HOLDER),{low:o,high:i})}t.default=f},64558:function(e,t){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.InternalConfig=t.Config=void 0;var i=function(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=36e5,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0};t.Config=i;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i);t.InternalConfig=o},98585:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WRITE=t.READ=t.Driver=void 0;var a=r(56889),s=o(r(29305)),l=a.internal.constants.FETCH_ALL,u=a.driver.READ,c=a.driver.WRITE;t.READ=u,t.WRITE=c;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.rxSession=function(e){var t=void 0===e?{}:e,r=t.defaultAccessMode,n=void 0===r?c:r,i=t.bookmarks,o=t.database,a=t.fetchSize,u=t.impersonatedUser,p=t.bookmarkManager,d=t.notificationFilter,f=t.auth;return new s.default({session:this._newSession({defaultAccessMode:n,bookmarkOrBookmarks:i,database:void 0===o?"":o,impersonatedUser:u,auth:f,reactive:!1,fetchSize:function(e,t){var r=parseInt(e,10);if(r>0||r===l)return r;if(0!==r&&!(r<0))return t;throw Error("The fetch size can only be a positive value or ".concat(l," for ALL. However fetchSize = ").concat(r))}(a,this._config.fetchSize),bookmarkManager:p,notificationFilter:d,log:this._log}),config:this._config,log:this._log})},t}(a.Driver);t.Driver=p,t.default=p},66007:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnboundRelationship=t.Relationship=t.Node=t.Record=t.ServerInfo=t.GqlStatusObject=t.Notification=t.QueryStatistics=t.ProfiledPlan=t.Plan=t.ResultSummary=t.RxResult=t.RxManagedTransaction=t.RxTransaction=t.RxSession=t.EagerResult=t.Result=t.ManagedTransaction=t.Transaction=t.Session=t.Driver=t.temporal=t.spatial=t.graph=t.error=t.routing=t.session=t.types=t.logging=t.auth=t.isRetryableError=t.Neo4jError=t.integer=t.isUnboundRelationship=t.isRelationship=t.isPathSegment=t.isPath=t.isNode=t.isDateTime=t.isLocalDateTime=t.isDate=t.isTime=t.isLocalTime=t.isDuration=t.isPoint=t.isInt=t.int=t.hasReachableServer=t.driver=t.authTokenManagers=void 0,t.clientCertificateProviders=t.notificationFilterMinimumSeverityLevel=t.notificationFilterDisabledClassification=t.notificationFilterDisabledCategory=t.notificationSeverityLevel=t.notificationClassification=t.notificationCategory=t.resultTransformers=t.bookmarkManager=t.DateTime=t.LocalDateTime=t.Date=t.Time=t.LocalTime=t.Duration=t.Integer=t.Point=t.PathSegment=t.Path=void 0;var a=r(98585);Object.defineProperty(t,"Driver",{enumerable:!0,get:function(){return a.Driver}});var s=o(r(70750)),l=r(56889);Object.defineProperty(t,"authTokenManagers",{enumerable:!0,get:function(){return l.authTokenManagers}}),Object.defineProperty(t,"Neo4jError",{enumerable:!0,get:function(){return l.Neo4jError}}),Object.defineProperty(t,"isRetryableError",{enumerable:!0,get:function(){return l.isRetryableError}}),Object.defineProperty(t,"error",{enumerable:!0,get:function(){return l.error}}),Object.defineProperty(t,"Integer",{enumerable:!0,get:function(){return l.Integer}}),Object.defineProperty(t,"int",{enumerable:!0,get:function(){return l.int}}),Object.defineProperty(t,"isInt",{enumerable:!0,get:function(){return l.isInt}}),Object.defineProperty(t,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return l.Point}}),Object.defineProperty(t,"Date",{enumerable:!0,get:function(){return l.Date}}),Object.defineProperty(t,"DateTime",{enumerable:!0,get:function(){return l.DateTime}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return l.Duration}}),Object.defineProperty(t,"isDate",{enumerable:!0,get:function(){return l.isDate}}),Object.defineProperty(t,"isDateTime",{enumerable:!0,get:function(){return l.isDateTime}}),Object.defineProperty(t,"isDuration",{enumerable:!0,get:function(){return l.isDuration}}),Object.defineProperty(t,"isLocalDateTime",{enumerable:!0,get:function(){return l.isLocalDateTime}}),Object.defineProperty(t,"isLocalTime",{enumerable:!0,get:function(){return l.isLocalTime}}),Object.defineProperty(t,"isNode",{enumerable:!0,get:function(){return l.isNode}}),Object.defineProperty(t,"isPath",{enumerable:!0,get:function(){return l.isPath}}),Object.defineProperty(t,"isPathSegment",{enumerable:!0,get:function(){return l.isPathSegment}}),Object.defineProperty(t,"isRelationship",{enumerable:!0,get:function(){return l.isRelationship}}),Object.defineProperty(t,"isTime",{enumerable:!0,get:function(){return l.isTime}}),Object.defineProperty(t,"isUnboundRelationship",{enumerable:!0,get:function(){return l.isUnboundRelationship}}),Object.defineProperty(t,"LocalDateTime",{enumerable:!0,get:function(){return l.LocalDateTime}}),Object.defineProperty(t,"LocalTime",{enumerable:!0,get:function(){return l.LocalTime}}),Object.defineProperty(t,"Time",{enumerable:!0,get:function(){return l.Time}}),Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return l.Node}}),Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return l.Path}}),Object.defineProperty(t,"PathSegment",{enumerable:!0,get:function(){return l.PathSegment}}),Object.defineProperty(t,"Relationship",{enumerable:!0,get:function(){return l.Relationship}}),Object.defineProperty(t,"UnboundRelationship",{enumerable:!0,get:function(){return l.UnboundRelationship}}),Object.defineProperty(t,"Record",{enumerable:!0,get:function(){return l.Record}}),Object.defineProperty(t,"ResultSummary",{enumerable:!0,get:function(){return l.ResultSummary}}),Object.defineProperty(t,"Plan",{enumerable:!0,get:function(){return l.Plan}}),Object.defineProperty(t,"ProfiledPlan",{enumerable:!0,get:function(){return l.ProfiledPlan}}),Object.defineProperty(t,"QueryStatistics",{enumerable:!0,get:function(){return l.QueryStatistics}}),Object.defineProperty(t,"Notification",{enumerable:!0,get:function(){return l.Notification}}),Object.defineProperty(t,"GqlStatusObject",{enumerable:!0,get:function(){return l.GqlStatusObject}}),Object.defineProperty(t,"ServerInfo",{enumerable:!0,get:function(){return l.ServerInfo}}),Object.defineProperty(t,"Result",{enumerable:!0,get:function(){return l.Result}}),Object.defineProperty(t,"EagerResult",{enumerable:!0,get:function(){return l.EagerResult}}),Object.defineProperty(t,"auth",{enumerable:!0,get:function(){return l.auth}}),Object.defineProperty(t,"Session",{enumerable:!0,get:function(){return l.Session}}),Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return l.Transaction}}),Object.defineProperty(t,"ManagedTransaction",{enumerable:!0,get:function(){return l.ManagedTransaction}}),Object.defineProperty(t,"bookmarkManager",{enumerable:!0,get:function(){return l.bookmarkManager}}),Object.defineProperty(t,"routing",{enumerable:!0,get:function(){return l.routing}}),Object.defineProperty(t,"resultTransformers",{enumerable:!0,get:function(){return l.resultTransformers}}),Object.defineProperty(t,"notificationCategory",{enumerable:!0,get:function(){return l.notificationCategory}}),Object.defineProperty(t,"notificationClassification",{enumerable:!0,get:function(){return l.notificationClassification}}),Object.defineProperty(t,"notificationSeverityLevel",{enumerable:!0,get:function(){return l.notificationSeverityLevel}}),Object.defineProperty(t,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return l.notificationFilterDisabledCategory}}),Object.defineProperty(t,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return l.notificationFilterDisabledClassification}}),Object.defineProperty(t,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return l.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(t,"clientCertificateProviders",{enumerable:!0,get:function(){return l.clientCertificateProviders}});var u=r(84386),c=o(r(29305));t.RxSession=c.default;var p=o(r(11783));t.RxTransaction=p.default;var d=o(r(57987));t.RxManagedTransaction=d.default;var f=o(r(7615));t.RxResult=f.default;var h=l.internal.util,y=h.ENCRYPTION_ON,m=h.assertString,v=h.isEmptyObjectOrNull,g=l.internal.serverAddress.ServerAddress,b=l.internal.urlUtil,_="neo4j-javascript/"+s.default;function T(e,t,r){void 0===r&&(r={}),m(e,"Bolt URL");var n,i=b.parseDatabaseUrl(e),o=!1,c=!1;switch(i.scheme){case"bolt":break;case"bolt+s":c=!0,n="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":c=!0,n="TRUST_ALL_CERTIFICATES";break;case"neo4j":o=!0;break;case"neo4j+s":c=!0,n="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",o=!0;break;case"neo4j+ssc":c=!0,n="TRUST_ALL_CERTIFICATES",o=!0;break;default:throw Error("Unknown scheme: ".concat(i.scheme))}if(c){if("encrypted"in r||"trust"in r)throw Error("Encryption/trust can only be configured either through URL or config, not both");r.encrypted=y,r.trust=n,r.clientCertificate=(0,l.resolveCertificateProvider)(r.clientCertificate)}var p=function(e){if("object"==typeof e&&null!=e&&"getToken"in e&&"handleSecurityException"in e&&"function"==typeof e.getToken&&"function"==typeof e.handleSecurityException)return e;var t=e;return(t=t||{}).scheme=t.scheme||"none",(0,l.staticAuthTokenManager)({authToken:t})}(t);r.userAgent=r.userAgent||_,r.boltAgent=l.internal.boltAgent.fromVersion(s.default);var d=g.fromUrl(i.hostAndPort),f={address:d,typename:o?"Routing":"Direct",routing:o};return new a.Driver(f,r,function(){if(o)return function(e,t,r,n){return new u.RoutingConnectionProvider({id:e,config:t,log:r,hostNameResolver:n,authTokenManager:p,address:d,userAgent:t.userAgent,boltAgent:t.boltAgent,routingContext:i.query})};if(!v(i.query))throw Error("Parameters are not supported with none routed scheme. Given URL: '".concat(e,"'"));return function(e,t,r){return new u.DirectConnectionProvider({id:e,config:t,log:r,authTokenManager:p,address:d,userAgent:t.userAgent,boltAgent:t.boltAgent})}}())}function E(e,t){return n(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:r=T(e,{scheme:"none",principal:"",credentials:""},t),n.label=1;case 1:return n.trys.push([1,,3,5]),[4,r.getNegotiatedProtocolVersion()];case 2:return n.sent(),[2,!0];case 3:return[4,r.close()];case 4:return n.sent(),[7];case 5:return[2]}})})}t.driver=T,t.hasReachableServer=E;var O={console:function(e){return{level:e,logger:function(e,t){return console.log("".concat(global.Date.now()," ").concat(e.toUpperCase()," ").concat(t))}}}};t.logging=O;var S={Node:l.Node,Relationship:l.Relationship,UnboundRelationship:l.UnboundRelationship,PathSegment:l.PathSegment,Path:l.Path,Result:l.Result,EagerResult:l.EagerResult,ResultSummary:l.ResultSummary,Record:l.Record,Point:l.Point,Date:l.Date,DateTime:l.DateTime,Duration:l.Duration,LocalDateTime:l.LocalDateTime,LocalTime:l.LocalTime,Time:l.Time,Integer:l.Integer};t.types=S;var w={READ:a.READ,WRITE:a.WRITE};t.session=w;var I={toNumber:l.toNumber,toString:l.toString,inSafeRange:l.inSafeRange};t.integer=I;var N={isPoint:l.isPoint};t.spatial=N;var A={isDuration:l.isDuration,isLocalTime:l.isLocalTime,isTime:l.isTime,isDate:l.isDate,isLocalDateTime:l.isLocalDateTime,isDateTime:l.isDateTime};t.temporal=A;var C={isNode:l.isNode,isPath:l.isPath,isPathSegment:l.isPathSegment,isRelationship:l.isRelationship,isUnboundRelationship:l.isUnboundRelationship};t.graph=C;var P={authTokenManagers:l.authTokenManagers,driver:T,hasReachableServer:E,int:l.int,isInt:l.isInt,isPoint:l.isPoint,isDuration:l.isDuration,isLocalTime:l.isLocalTime,isTime:l.isTime,isDate:l.isDate,isLocalDateTime:l.isLocalDateTime,isDateTime:l.isDateTime,isNode:l.isNode,isPath:l.isPath,isPathSegment:l.isPathSegment,isRelationship:l.isRelationship,isUnboundRelationship:l.isUnboundRelationship,integer:I,Neo4jError:l.Neo4jError,isRetryableError:l.isRetryableError,auth:l.auth,logging:O,types:S,session:w,routing:l.routing,error:l.error,graph:C,spatial:N,temporal:A,Driver:a.Driver,Session:l.Session,Transaction:l.Transaction,ManagedTransaction:l.ManagedTransaction,Result:l.Result,EagerResult:l.EagerResult,RxSession:c.default,RxTransaction:p.default,RxManagedTransaction:d.default,RxResult:f.default,ResultSummary:l.ResultSummary,Plan:l.Plan,ProfiledPlan:l.ProfiledPlan,QueryStatistics:l.QueryStatistics,Notification:l.Notification,GqlStatusObject:l.GqlStatusObject,ServerInfo:l.ServerInfo,Record:l.Record,Node:l.Node,Relationship:l.Relationship,UnboundRelationship:l.UnboundRelationship,Path:l.Path,PathSegment:l.PathSegment,Point:l.Point,Integer:l.Integer,Duration:l.Duration,LocalTime:l.LocalTime,Time:l.Time,Date:l.Date,LocalDateTime:l.LocalDateTime,DateTime:l.DateTime,bookmarkManager:l.bookmarkManager,resultTransformers:l.resultTransformers,notificationCategory:l.notificationCategory,notificationSeverityLevel:l.notificationSeverityLevel,notificationFilterDisabledCategory:l.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:l.notificationFilterMinimumSeverityLevel,clientCertificateProviders:l.clientCertificateProviders};t.default=P},77835:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(56889),i=r(93156),o=r(3105);n.internal.logger.Logger;var a=n.error.SERVICE_UNAVAILABLE,s=function(){function e(e){var t=void 0===e?{}:e,r=t.maxRetryTimeout,n=t.initialDelay,i=t.delayMultiplier,o=t.delayJitter,a=t.logger;this._maxRetryTimeout=l(void 0===r?3e4:r,3e4),this._initialDelay=l(void 0===n?1e3:n,1e3),this._delayMultiplier=l(void 0===i?2:i,2),this._delayJitter=l(void 0===o?.2:o,.2),this._logger=void 0===a?null:a}return e.prototype.retry=function(e){var t=this;return e.pipe((0,o.retryWhen)(function(e){var r=[],s=Date.now(),l=1,u=t._initialDelay;return e.pipe((0,o.mergeMap)(function(e){if(!(0,n.isRetriableError)(e))return(0,i.throwError)(function(){return e});if(r.push(e),l>=2&&Date.now()-s>=t._maxRetryTimeout){var c=(0,n.newError)("Failed after retried for ".concat(l," times in ").concat(t._maxRetryTimeout," ms. Make sure that your database is online and retry again."),a);return c.seenErrors=r,(0,i.throwError)(function(){return c})}var p=t._computeNextDelay(u);return u*=t._delayMultiplier,l++,t._logger&&t._logger.warn("Transaction failed and will be retried in ".concat(p)),(0,i.of)(1).pipe((0,o.delay)(p))}))}))},e.prototype._computeNextDelay=function(e){var t=e*this._delayJitter;return e-t+2*t*Math.random()},e}();function l(e,t){return e||0===e?e:t}t.default=s},7615:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(56889),a=r(93156),s=r(3105),l={READY:0,STREAMING:1,COMPLETED:2},u=function(){function e(e,t){var r=e.pipe((0,s.publishReplay)(1),(0,s.refCount)());this._result=r,this._keys=r.pipe((0,s.mergeMap)(function(e){return(0,a.from)(e.keys())}),(0,s.publishReplay)(1),(0,s.refCount)()),this._records=void 0,this._controls=new c,this._summary=new a.ReplaySubject,this._state=t||l.READY}return e.prototype.keys=function(){return this._keys},e.prototype.records=function(){var e=this,t=this._result.pipe((0,s.mergeMap)(function(t){return new a.Observable(function(r){return e._startStreaming({result:t,recordsObserver:r})})}));return t.push=function(){return e._push()},t},e.prototype.consume=function(){var e=this;return this._result.pipe((0,s.mergeMap)(function(t){return new a.Observable(function(r){return e._startStreaming({result:t,summaryObserver:r})})}))},e.prototype.pause=function(){this._controls.pause()},e.prototype.resume=function(){return this._controls.resume()},e.prototype.push=function(){return this._controls.push()},e.prototype._startStreaming=function(e){var t=void 0===e?{}:e,r=t.result,n=t.recordsObserver,i=void 0===n?null:n,a=t.summaryObserver,s=void 0===a?null:a,u=[];return s&&u.push(this._summary.subscribe(s)),this._state<l.STREAMING?(this._state=l.STREAMING,this._setupRecordsStream(r),i?u.push(this._records.subscribe(i)):r._cancel(),u.push({unsubscribe:function(){r._cancel&&r._cancel()}})):i&&i.error((0,o.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){u.forEach(function(e){return e.unsubscribe()})}},e.prototype._toObservable=function(){var t=this;return new a.Observable(function(r){t._result.subscribe({complete:function(){return r.complete()},next:function(n){return r.next(new e(new a.Observable(function(e){e.next(n),e.complete()})),t._state)},error:function(e){return r.error(e)}})})},e.prototype._setupRecordsStream=function(e){var t=this;return this._records||(this._records=function(e,t,r){var o=this;void 0===r&&(r=new c);var s=new a.Subject,l=function(a){return n(o,void 0,void 0,function(){var n,o,u,c;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),r.pushing=!0,[4,a];case 1:return o=(n=i.sent()).done,u=n.value,o?(s.complete(),t.complete()):(s.next(u),r.paused||l(e.next()).catch(function(){})),[3,4];case 2:return c=i.sent(),s.error(c),t.error(c),[3,4];case 3:return r.pushing=!1,[7];case 4:return[2]}})})};function u(t){return n(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return[4,l(e.next(t))];case 1:return r.sent(),[2]}})})}return r.pusher=u,u(),s}(e[Symbol.asyncIterator](),{complete:function(){return n(t,void 0,void 0,function(){var t,r;return i(this,function(n){switch(n.label){case 0:return this._state=l.COMPLETED,r=(t=this._summary).next,[4,e.summary()];case 1:return r.apply(t,[n.sent()]),this._summary.complete(),[2]}})})},error:function(e){t._state=l.COMPLETED,t._summary.error(e)}},this._controls)),this._records},e}();t.default=u;var c=function(){function e(e){void 0===e&&(e=function(){return n(t,void 0,void 0,function(){return i(this,function(e){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=e}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(e){this._pushing=e},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return n(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:if(e=this._paused,this._paused=!1,!(e&&!this._pushing))return[3,2];return[4,this._push()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.push=function(){return n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,e.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(e){this._push=e},enumerable:!1,configurable:!0}),e}()},29305:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(93156),o=r(3105),a=n(r(7615)),s=r(56889),l=n(r(11783)),u=n(r(57987)),c=n(r(77835)),p=s.internal.constants,d=p.ACCESS_MODE_READ,f=p.ACCESS_MODE_WRITE,h=p.TELEMETRY_APIS,y=s.internal.txConfig.TxConfig,m=function(){function e(e){var t,r=void 0===e?{}:e,n=r.session,i=r.config,o=r.log;this._session=n,this._retryLogic=(t=i&&i.maxTransactionRetryTime?i.maxTransactionRetryTime:null,new c.default({maxRetryTimeout:t})),this._log=o}return e.prototype.run=function(e,t,r){var n=this;return new a.default(new i.Observable(function(i){try{i.next(n._session.run(e,t,r)),i.complete()}catch(e){i.error(e)}return function(){}}))},e.prototype.beginTransaction=function(e){return this._beginTransaction(this._session._mode,e,{api:h.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(e,t){return this._runTransaction(d,e,t)},e.prototype.writeTransaction=function(e,t){return this._runTransaction(f,e,t)},e.prototype.executeRead=function(e,t){return this._executeInTransaction(d,e,t)},e.prototype.executeWrite=function(e,t){return this._executeInTransaction(f,e,t)},e.prototype._executeInTransaction=function(e,t,r){return this._runTransaction(e,t,r,function(e){return new u.default({run:e.run.bind(e)})})},e.prototype.close=function(){var e=this;return new i.Observable(function(t){e._session.close().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(e,t,r){var n=this,o=y.empty();return t&&(o=new y(t,this._log)),new i.Observable(function(t){try{n._session._beginTransaction(e,o,r).then(function(e){t.next(new l.default(e)),t.complete()}).catch(function(e){return t.error(e)})}catch(e){t.error(e)}return function(){}})},e.prototype._runTransaction=function(e,t,r,n){var a=this;void 0===n&&(n=function(e){return e});var s=y.empty();r&&(s=new y(r));var l={apiTelemetryConfig:{api:h.MANAGED_TRANSACTION,onTelemetrySuccess:function(){l.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,i.of)(1).pipe((0,o.mergeMap)(function(){return a._beginTransaction(e,s,l.apiTelemetryConfig)}),(0,o.mergeMap)(function(e){return(0,i.defer)(function(){try{return t(n(e))}catch(e){return(0,i.throwError)(function(){return e})}}).pipe((0,o.catchError)(function(t){return e.rollback().pipe((0,o.concatWith)((0,i.throwError)(function(){return t})))}),(0,o.concatWith)(e.commit()))})))},e}();t.default=m},57987:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(r(7615)),n(r(11783));var i=function(){function e(e){var t=e.run;this._run=t}return e.fromTransaction=function(t){return new e({run:t.run.bind(t)})},e.prototype.run=function(e,t){return this._run(e,t)},e}();t.default=i},11783:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(93156),o=n(r(7615));n(r(56889));var a=function(){function e(e){this._txc=e}return e.prototype.run=function(e,t){var r=this;return new o.default(new i.Observable(function(n){try{n.next(r._txc.run(e,t)),n.complete()}catch(e){n.error(e)}return function(){}}))},e.prototype.commit=function(){var e=this;return new i.Observable(function(t){e._txc.commit().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},e.prototype.rollback=function(){var e=this;return new i.Observable(function(t){e._txc.rollback().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var e=this;return new i.Observable(function(t){e._txc.close().then(function(){t.complete()}).catch(function(e){return t.error(e)})})},e}();t.default=a},70750:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="5.24.0"},49303:(e,t,r)=>{"use strict";e.exports=r(30517)},24445:(e,t,r)=>{"use strict";e.exports=r(56851)},39240:(e,t,r)=>{"use strict";let n=r(71017),i="[^\\\\/]",o="[^/]",a="(?:\\/|$)",s="(?:^|\\/)",l=`\\.{1,2}${a}`,u=`(?!${s}${l})`,c=`(?!\\.{0,1}${a})`,p=`(?!${l})`,d=`${o}*?`,f={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:o,END_ANCHOR:a,DOTS_SLASH:l,NO_DOT:"(?!\\.)",NO_DOTS:u,NO_DOT_SLASH:c,NO_DOTS_SLASH:p,QMARK_NO_DOT:"[^.\\/]",STAR:d,START_ANCHOR:s},h={...f,SLASH_LITERAL:"[\\\\/]",QMARK:i,STAR:`${i}*?`,DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:n.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?h:f}},93217:(e,t,r)=>{"use strict";let n=r(39240),i=r(57108),{MAX_LENGTH:o,POSIX_REGEX_SOURCE:a,REGEX_NON_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_BACKREF:l,REPLACEMENTS:u}=n,c=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch(t){return e.map(e=>i.escapeRegex(e)).join("..")}return r},p=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,d=(e,t)=>{let r;if("string"!=typeof e)throw TypeError("Expected a string");e=u[e]||e;let f={...t},h="number"==typeof f.maxLength?Math.min(o,f.maxLength):o,y=e.length;if(y>h)throw SyntaxError(`Input length: ${y}, exceeds maximum allowed length: ${h}`);let m={type:"bos",value:"",output:f.prepend||""},v=[m],g=f.capture?"":"?:",b=i.isWindows(t),_=n.globChars(b),T=n.extglobChars(_),{DOT_LITERAL:E,PLUS_LITERAL:O,SLASH_LITERAL:S,ONE_CHAR:w,DOTS_SLASH:I,NO_DOT:N,NO_DOT_SLASH:A,NO_DOTS_SLASH:C,QMARK:P,QMARK_NO_DOT:R,STAR:D,START_ANCHOR:F}=_,j=e=>`(${g}(?:(?!${F}${e.dot?I:E}).)*?)`,L=f.dot?"":N,x=f.dot?P:R,M=!0===f.bash?j(f):D;f.capture&&(M=`(${M})`),"boolean"==typeof f.noext&&(f.noextglob=f.noext);let k={input:e,index:-1,start:0,dot:!0===f.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:v};y=(e=i.removePrefix(e,k)).length;let $=[],U=[],V=[],G=m,q=()=>k.index===y-1,B=k.peek=(t=1)=>e[k.index+t],W=k.advance=()=>e[++k.index]||"",H=()=>e.slice(k.index+1),Q=(e="",t=0)=>{k.consumed+=e,k.index+=t},K=e=>{k.output+=null!=e.output?e.output:e.value,Q(e.value)},z=()=>{let e=1;for(;"!"===B()&&("("!==B(2)||"?"===B(3));)W(),k.start++,e++;return e%2!=0&&(k.negated=!0,k.start++,!0)},Y=e=>{k[e]++,V.push(e)},J=e=>{k[e]--,V.pop()},X=e=>{if("globstar"===G.type){let t=k.braces>0&&("comma"===e.type||"brace"===e.type),r=!0===e.extglob||$.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||r||(k.output=k.output.slice(0,-G.output.length),G.type="star",G.value="*",G.output=M,k.output+=G.output)}if($.length&&"paren"!==e.type&&($[$.length-1].inner+=e.value),(e.value||e.output)&&K(e),G&&"text"===G.type&&"text"===e.type){G.value+=e.value,G.output=(G.output||"")+e.value;return}e.prev=G,v.push(e),G=e},Z=(e,t)=>{let r={...T[t],conditions:1,inner:""};r.prev=G,r.parens=k.parens,r.output=k.output;let n=(f.capture?"(":"")+r.open;Y("parens"),X({type:e,value:t,output:k.output?"":w}),X({type:"paren",extglob:!0,value:W(),output:n}),$.push(r)},ee=e=>{let n,i=e.close+(f.capture?")":"");if("negate"===e.type){let r=M;if(e.inner&&e.inner.length>1&&e.inner.includes("/")&&(r=j(f)),(r!==M||q()||/^\)+$/.test(H()))&&(i=e.close=`)$))${r}`),e.inner.includes("*")&&(n=H())&&/^\.[^\\/.]+$/.test(n)){let o=d(n,{...t,fastpaths:!1}).output;i=e.close=`)${o})${r})`}"bos"===e.prev.type&&(k.negatedExtglob=!0)}X({type:"paren",extglob:!0,value:r,output:i}),J("parens")};if(!1!==f.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let r=!1,n=e.replace(l,(e,t,n,i,o,a)=>"\\"===i?(r=!0,e):"?"===i?t?t+i+(o?P.repeat(o.length):""):0===a?x+(o?P.repeat(o.length):""):P.repeat(n.length):"."===i?E.repeat(n.length):"*"===i?t?t+i+(o?M:""):M:t?e:`\\${e}`);return(!0===r&&(n=!0===f.unescape?n.replace(/\\/g,""):n.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),n===e&&!0===f.contains)?k.output=e:k.output=i.wrapOutput(n,k,t),k}for(;!q();){if("\0"===(r=W()))continue;if("\\"===r){let e=B();if("/"===e&&!0!==f.bash||"."===e||";"===e)continue;if(!e){X({type:"text",value:r+="\\"});continue}let t=/^\\+/.exec(H()),n=0;if(t&&t[0].length>2&&(n=t[0].length,k.index+=n,n%2!=0&&(r+="\\")),!0===f.unescape?r=W():r+=W(),0===k.brackets){X({type:"text",value:r});continue}}if(k.brackets>0&&("]"!==r||"["===G.value||"[^"===G.value)){if(!1!==f.posix&&":"===r){let e=G.value.slice(1);if(e.includes("[")&&(G.posix=!0,e.includes(":"))){let e=G.value.lastIndexOf("["),t=G.value.slice(0,e),r=a[G.value.slice(e+2)];if(r){G.value=t+r,k.backtrack=!0,W(),m.output||1!==v.indexOf(G)||(m.output=w);continue}}}("["===r&&":"!==B()||"-"===r&&"]"===B())&&(r=`\\${r}`),"]"===r&&("["===G.value||"[^"===G.value)&&(r=`\\${r}`),!0===f.posix&&"!"===r&&"["===G.value&&(r="^"),G.value+=r,K({value:r});continue}if(1===k.quotes&&'"'!==r){r=i.escapeRegex(r),G.value+=r,K({value:r});continue}if('"'===r){k.quotes=1===k.quotes?0:1,!0===f.keepQuotes&&X({type:"text",value:r});continue}if("("===r){Y("parens"),X({type:"paren",value:r});continue}if(")"===r){if(0===k.parens&&!0===f.strictBrackets)throw SyntaxError(p("opening","("));let e=$[$.length-1];if(e&&k.parens===e.parens+1){ee($.pop());continue}X({type:"paren",value:r,output:k.parens?")":"\\)"}),J("parens");continue}if("["===r){if(!0!==f.nobracket&&H().includes("]"))Y("brackets");else{if(!0!==f.nobracket&&!0===f.strictBrackets)throw SyntaxError(p("closing","]"));r=`\\${r}`}X({type:"bracket",value:r});continue}if("]"===r){if(!0===f.nobracket||G&&"bracket"===G.type&&1===G.value.length){X({type:"text",value:r,output:`\\${r}`});continue}if(0===k.brackets){if(!0===f.strictBrackets)throw SyntaxError(p("opening","["));X({type:"text",value:r,output:`\\${r}`});continue}J("brackets");let e=G.value.slice(1);if(!0===G.posix||"^"!==e[0]||e.includes("/")||(r=`/${r}`),G.value+=r,K({value:r}),!1===f.literalBrackets||i.hasRegexChars(e))continue;let t=i.escapeRegex(G.value);if(k.output=k.output.slice(0,-G.value.length),!0===f.literalBrackets){k.output+=t,G.value=t;continue}G.value=`(${g}${t}|${G.value})`,k.output+=G.value;continue}if("{"===r&&!0!==f.nobrace){Y("braces");let e={type:"brace",value:r,output:"(",outputIndex:k.output.length,tokensIndex:k.tokens.length};U.push(e),X(e);continue}if("}"===r){let e=U[U.length-1];if(!0===f.nobrace||!e){X({type:"text",value:r,output:r});continue}let t=")";if(!0===e.dots){let e=v.slice(),r=[];for(let t=e.length-1;t>=0&&(v.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&r.unshift(e[t].value);t=c(r,f),k.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){let n=k.output.slice(0,e.outputIndex),i=k.tokens.slice(e.tokensIndex);for(let o of(e.value=e.output="\\{",r=t="\\}",k.output=n,i))k.output+=o.output||o.value}X({type:"brace",value:r,output:t}),J("braces"),U.pop();continue}if("|"===r){$.length>0&&$[$.length-1].conditions++,X({type:"text",value:r});continue}if(","===r){let e=r,t=U[U.length-1];t&&"braces"===V[V.length-1]&&(t.comma=!0,e="|"),X({type:"comma",value:r,output:e});continue}if("/"===r){if("dot"===G.type&&k.index===k.start+1){k.start=k.index+1,k.consumed="",k.output="",v.pop(),G=m;continue}X({type:"slash",value:r,output:S});continue}if("."===r){if(k.braces>0&&"dot"===G.type){"."===G.value&&(G.output=E);let e=U[U.length-1];G.type="dots",G.output+=r,G.value+=r,e.dots=!0;continue}if(k.braces+k.parens===0&&"bos"!==G.type&&"slash"!==G.type){X({type:"text",value:r,output:E});continue}X({type:"dot",value:r,output:E});continue}if("?"===r){if(!(G&&"("===G.value)&&!0!==f.noextglob&&"("===B()&&"?"!==B(2)){Z("qmark",r);continue}if(G&&"paren"===G.type){let e=B(),t=r;if("<"===e&&!i.supportsLookbehinds())throw Error("Node.js v10 or higher is required for regex lookbehinds");("("!==G.value||/[!=<:]/.test(e))&&("<"!==e||/<([!=]|\w+>)/.test(H()))||(t=`\\${r}`),X({type:"text",value:r,output:t});continue}if(!0!==f.dot&&("slash"===G.type||"bos"===G.type)){X({type:"qmark",value:r,output:R});continue}X({type:"qmark",value:r,output:P});continue}if("!"===r){if(!0!==f.noextglob&&"("===B()&&("?"!==B(2)||!/[!=<:]/.test(B(3)))){Z("negate",r);continue}if(!0!==f.nonegate&&0===k.index){z();continue}}if("+"===r){if(!0!==f.noextglob&&"("===B()&&"?"!==B(2)){Z("plus",r);continue}if(G&&"("===G.value||!1===f.regex){X({type:"plus",value:r,output:O});continue}if(G&&("bracket"===G.type||"paren"===G.type||"brace"===G.type)||k.parens>0){X({type:"plus",value:r});continue}X({type:"plus",value:O});continue}if("@"===r){if(!0!==f.noextglob&&"("===B()&&"?"!==B(2)){X({type:"at",extglob:!0,value:r,output:""});continue}X({type:"text",value:r});continue}if("*"!==r){("$"===r||"^"===r)&&(r=`\\${r}`);let e=s.exec(H());e&&(r+=e[0],k.index+=e[0].length),X({type:"text",value:r});continue}if(G&&("globstar"===G.type||!0===G.star)){G.type="star",G.star=!0,G.value+=r,G.output=M,k.backtrack=!0,k.globstar=!0,Q(r);continue}let t=H();if(!0!==f.noextglob&&/^\([^?]/.test(t)){Z("star",r);continue}if("star"===G.type){if(!0===f.noglobstar){Q(r);continue}let n=G.prev,i=n.prev,o="slash"===n.type||"bos"===n.type,a=i&&("star"===i.type||"globstar"===i.type);if(!0===f.bash&&(!o||t[0]&&"/"!==t[0])){X({type:"star",value:r,output:""});continue}let s=k.braces>0&&("comma"===n.type||"brace"===n.type),l=$.length&&("pipe"===n.type||"paren"===n.type);if(!o&&"paren"!==n.type&&!s&&!l){X({type:"star",value:r,output:""});continue}for(;"/**"===t.slice(0,3);){let r=e[k.index+4];if(r&&"/"!==r)break;t=t.slice(3),Q("/**",3)}if("bos"===n.type&&q()){G.type="globstar",G.value+=r,G.output=j(f),k.output=G.output,k.globstar=!0,Q(r);continue}if("slash"===n.type&&"bos"!==n.prev.type&&!a&&q()){k.output=k.output.slice(0,-(n.output+G.output).length),n.output=`(?:${n.output}`,G.type="globstar",G.output=j(f)+(f.strictSlashes?")":"|$)"),G.value+=r,k.globstar=!0,k.output+=n.output+G.output,Q(r);continue}if("slash"===n.type&&"bos"!==n.prev.type&&"/"===t[0]){let e=void 0!==t[1]?"|$":"";k.output=k.output.slice(0,-(n.output+G.output).length),n.output=`(?:${n.output}`,G.type="globstar",G.output=`${j(f)}${S}|${S}${e})`,G.value+=r,k.output+=n.output+G.output,k.globstar=!0,Q(r+W()),X({type:"slash",value:"/",output:""});continue}if("bos"===n.type&&"/"===t[0]){G.type="globstar",G.value+=r,G.output=`(?:^|${S}|${j(f)}${S})`,k.output=G.output,k.globstar=!0,Q(r+W()),X({type:"slash",value:"/",output:""});continue}k.output=k.output.slice(0,-G.output.length),G.type="globstar",G.output=j(f),G.value+=r,k.output+=G.output,k.globstar=!0,Q(r);continue}let n={type:"star",value:r,output:M};if(!0===f.bash){n.output=".*?",("bos"===G.type||"slash"===G.type)&&(n.output=L+n.output),X(n);continue}if(G&&("bracket"===G.type||"paren"===G.type)&&!0===f.regex){n.output=r,X(n);continue}(k.index===k.start||"slash"===G.type||"dot"===G.type)&&("dot"===G.type?(k.output+=A,G.output+=A):!0===f.dot?(k.output+=C,G.output+=C):(k.output+=L,G.output+=L),"*"!==B()&&(k.output+=w,G.output+=w)),X(n)}for(;k.brackets>0;){if(!0===f.strictBrackets)throw SyntaxError(p("closing","]"));k.output=i.escapeLast(k.output,"["),J("brackets")}for(;k.parens>0;){if(!0===f.strictBrackets)throw SyntaxError(p("closing",")"));k.output=i.escapeLast(k.output,"("),J("parens")}for(;k.braces>0;){if(!0===f.strictBrackets)throw SyntaxError(p("closing","}"));k.output=i.escapeLast(k.output,"{"),J("braces")}if(!0!==f.strictSlashes&&("star"===G.type||"bracket"===G.type)&&X({type:"maybe_slash",value:"",output:`${S}?`}),!0===k.backtrack)for(let e of(k.output="",k.tokens))k.output+=null!=e.output?e.output:e.value,e.suffix&&(k.output+=e.suffix);return k};d.fastpaths=(e,t)=>{let r={...t},a="number"==typeof r.maxLength?Math.min(o,r.maxLength):o,s=e.length;if(s>a)throw SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${a}`);e=u[e]||e;let l=i.isWindows(t),{DOT_LITERAL:c,SLASH_LITERAL:p,ONE_CHAR:d,DOTS_SLASH:f,NO_DOT:h,NO_DOTS:y,NO_DOTS_SLASH:m,STAR:v,START_ANCHOR:g}=n.globChars(l),b=r.dot?y:h,_=r.dot?m:h,T=r.capture?"":"?:",E=!0===r.bash?".*?":v;r.capture&&(E=`(${E})`);let O=e=>!0===e.noglobstar?E:`(${T}(?:(?!${g}${e.dot?f:c}).)*?)`,S=e=>{switch(e){case"*":return`${b}${d}${E}`;case".*":return`${c}${d}${E}`;case"*.*":return`${b}${E}${c}${d}${E}`;case"*/*":return`${b}${E}${p}${d}${_}${E}`;case"**":return b+O(r);case"**/*":return`(?:${b}${O(r)}${p})?${_}${d}${E}`;case"**/*.*":return`(?:${b}${O(r)}${p})?${_}${E}${c}${d}${E}`;case"**/.*":return`(?:${b}${O(r)}${p})?${c}${d}${E}`;default:{let t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;let r=S(t[1]);if(!r)return;return r+c+t[2]}}},w=S(i.removePrefix(e,{negated:!1,prefix:""}));return w&&!0!==r.strictSlashes&&(w+=`${p}?`),w},e.exports=d},56851:(e,t,r)=>{"use strict";let n=r(71017),i=r(8054),o=r(93217),a=r(57108),s=r(39240),l=e=>e&&"object"==typeof e&&!Array.isArray(e),u=(e,t,r=!1)=>{if(Array.isArray(e)){let n=e.map(e=>u(e,t,r));return e=>{for(let t of n){let r=t(e);if(r)return r}return!1}}let n=l(e)&&e.tokens&&e.input;if(""===e||"string"!=typeof e&&!n)throw TypeError("Expected pattern to be a non-empty string");let i=t||{},o=a.isWindows(t),s=n?u.compileRe(e,t):u.makeRe(e,t,!1,!0),c=s.state;delete s.state;let p=()=>!1;if(i.ignore){let e={...t,ignore:null,onMatch:null,onResult:null};p=u(i.ignore,e,r)}let d=(r,n=!1)=>{let{isMatch:a,match:l,output:d}=u.test(r,s,t,{glob:e,posix:o}),f={glob:e,state:c,regex:s,posix:o,input:r,output:d,match:l,isMatch:a};return("function"==typeof i.onResult&&i.onResult(f),!1===a)?(f.isMatch=!1,!!n&&f):p(r)?("function"==typeof i.onIgnore&&i.onIgnore(f),f.isMatch=!1,!!n&&f):("function"==typeof i.onMatch&&i.onMatch(f),!n||f)};return r&&(d.state=c),d};u.test=(e,t,r,{glob:n,posix:i}={})=>{if("string"!=typeof e)throw TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};let o=r||{},s=o.format||(i?a.toPosixSlashes:null),l=e===n,c=l&&s?s(e):e;return!1===l&&(l=(c=s?s(e):e)===n),(!1===l||!0===o.capture)&&(l=!0===o.matchBase||!0===o.basename?u.matchBase(e,t,r,i):t.exec(c)),{isMatch:!!l,match:l,output:c}},u.matchBase=(e,t,r,i=a.isWindows(r))=>(t instanceof RegExp?t:u.makeRe(t,r)).test(n.basename(e)),u.isMatch=(e,t,r)=>u(t,r)(e),u.parse=(e,t)=>Array.isArray(e)?e.map(e=>u.parse(e,t)):o(e,{...t,fastpaths:!1}),u.scan=(e,t)=>i(e,t),u.compileRe=(e,t,r=!1,n=!1)=>{if(!0===r)return e.output;let i=t||{},o=i.contains?"":"^",a=i.contains?"":"$",s=`${o}(?:${e.output})${a}`;e&&!0===e.negated&&(s=`^(?!${s}).*$`);let l=u.toRegex(s,t);return!0===n&&(l.state=e),l},u.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||"string"!=typeof e)throw TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return!1!==t.fastpaths&&("."===e[0]||"*"===e[0])&&(i.output=o.fastpaths(e,t)),i.output||(i=o(e,t)),u.compileRe(i,t,r,n)},u.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},u.constants=s,e.exports=u},8054:(e,t,r)=>{"use strict";let n=r(57108),{CHAR_ASTERISK:i,CHAR_AT:o,CHAR_BACKWARD_SLASH:a,CHAR_COMMA:s,CHAR_DOT:l,CHAR_EXCLAMATION_MARK:u,CHAR_FORWARD_SLASH:c,CHAR_LEFT_CURLY_BRACE:p,CHAR_LEFT_PARENTHESES:d,CHAR_LEFT_SQUARE_BRACKET:f,CHAR_PLUS:h,CHAR_QUESTION_MARK:y,CHAR_RIGHT_CURLY_BRACE:m,CHAR_RIGHT_PARENTHESES:v,CHAR_RIGHT_SQUARE_BRACKET:g}=r(39240),b=e=>e===c||e===a,_=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{let r,T;let E=t||{},O=e.length-1,S=!0===E.parts||!0===E.scanToEnd,w=[],I=[],N=[],A=e,C=-1,P=0,R=0,D=!1,F=!1,j=!1,L=!1,x=!1,M=!1,k=!1,$=!1,U=!1,V=!1,G=0,q={value:"",depth:0,isGlob:!1},B=()=>C>=O,W=()=>A.charCodeAt(C+1),H=()=>(r=T,A.charCodeAt(++C));for(;C<O;){let e;if((T=H())===a){k=q.backslashes=!0,(T=H())===p&&(M=!0);continue}if(!0===M||T===p){for(G++;!0!==B()&&(T=H());){if(T===a){k=q.backslashes=!0,H();continue}if(T===p){G++;continue}if(!0!==M&&T===l&&(T=H())===l||!0!==M&&T===s){if(D=q.isBrace=!0,j=q.isGlob=!0,V=!0,!0===S)continue;break}if(T===m&&0==--G){M=!1,D=q.isBrace=!0,V=!0;break}}if(!0===S)continue;break}if(T===c){if(w.push(C),I.push(q),q={value:"",depth:0,isGlob:!1},!0===V)continue;if(r===l&&C===P+1){P+=2;continue}R=C+1;continue}if(!0!==E.noext&&!0==(T===h||T===o||T===i||T===y||T===u)&&W()===d){if(j=q.isGlob=!0,L=q.isExtglob=!0,V=!0,T===u&&C===P&&(U=!0),!0===S){for(;!0!==B()&&(T=H());){if(T===a){k=q.backslashes=!0,T=H();continue}if(T===v){j=q.isGlob=!0,V=!0;break}}continue}break}if(T===i){if(r===i&&(x=q.isGlobstar=!0),j=q.isGlob=!0,V=!0,!0===S)continue;break}if(T===y){if(j=q.isGlob=!0,V=!0,!0===S)continue;break}if(T===f){for(;!0!==B()&&(e=H());){if(e===a){k=q.backslashes=!0,H();continue}if(e===g){F=q.isBracket=!0,j=q.isGlob=!0,V=!0;break}}if(!0===S)continue;break}if(!0!==E.nonegate&&T===u&&C===P){$=q.negated=!0,P++;continue}if(!0!==E.noparen&&T===d){if(j=q.isGlob=!0,!0===S){for(;!0!==B()&&(T=H());){if(T===d){k=q.backslashes=!0,T=H();continue}if(T===v){V=!0;break}}continue}break}if(!0===j){if(V=!0,!0===S)continue;break}}!0===E.noext&&(L=!1,j=!1);let Q=A,K="",z="";P>0&&(K=A.slice(0,P),A=A.slice(P),R-=P),Q&&!0===j&&R>0?(Q=A.slice(0,R),z=A.slice(R)):!0===j?(Q="",z=A):Q=A,Q&&""!==Q&&"/"!==Q&&Q!==A&&b(Q.charCodeAt(Q.length-1))&&(Q=Q.slice(0,-1)),!0===E.unescape&&(z&&(z=n.removeBackslashes(z)),Q&&!0===k&&(Q=n.removeBackslashes(Q)));let Y={prefix:K,input:e,start:P,base:Q,glob:z,isBrace:D,isBracket:F,isGlob:j,isExtglob:L,isGlobstar:x,negated:$,negatedExtglob:U};if(!0===E.tokens&&(Y.maxDepth=0,b(T)||I.push(q),Y.tokens=I),!0===E.parts||!0===E.tokens){let t;for(let r=0;r<w.length;r++){let n=t?t+1:P,i=w[r],o=e.slice(n,i);E.tokens&&(0===r&&0!==P?(I[r].isPrefix=!0,I[r].value=K):I[r].value=o,_(I[r]),Y.maxDepth+=I[r].depth),(0!==r||""!==o)&&N.push(o),t=i}if(t&&t+1<e.length){let r=e.slice(t+1);N.push(r),E.tokens&&(I[I.length-1].value=r,_(I[I.length-1]),Y.maxDepth+=I[I.length-1].depth)}Y.slashes=w,Y.parts=N}return Y}},57108:(e,t,r)=>{"use strict";let n=r(71017),i="win32"===process.platform,{REGEX_BACKSLASH:o,REGEX_REMOVE_BACKSLASH:a,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:l}=r(39240);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>s.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(l,"\\$1"),t.toPosixSlashes=e=>e.replace(o,"/"),t.removeBackslashes=e=>e.replace(a,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===i||"\\"===n.sep,t.escapeLast=(e,r,n)=>{let i=e.lastIndexOf(r,n);return -1===i?e:"\\"===e[i-1]?t.escapeLast(e,r,i-1):`${e.slice(0,i)}\\${e.slice(i)}`},t.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r},t.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",o=`${n}(?:${e})${i}`;return!0===t.negated&&(o=`(?:^(?!${o}).*$)`),o}},87180:function(e){var t;t=function(){var e=[],t=[],r={},n={},i={};function o(e){return"string"==typeof e?RegExp("^"+e+"$","i"):e}function a(e,t){return e===t?t:e===e.toLowerCase()?t.toLowerCase():e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function s(e,t,n){if(!e.length||r.hasOwnProperty(e))return t;for(var i=n.length;i--;){var o=n[i];if(o[0].test(t))return function(e,t){return e.replace(t[0],function(r,n){var i,o,s=(i=t[1],o=arguments,i.replace(/\$(\d{1,2})/g,function(e,t){return o[t]||""}));return""===r?a(e[n-1],s):a(r,s)})}(t,o)}return t}function l(e,t,r){return function(n){var i=n.toLowerCase();return t.hasOwnProperty(i)?a(n,i):e.hasOwnProperty(i)?a(n,e[i]):s(i,n,r)}}function u(e,t,r,n){return function(n){var i=n.toLowerCase();return!!t.hasOwnProperty(i)||!e.hasOwnProperty(i)&&s(i,i,r)===i}}function c(e,t,r){var n=1===t?c.singular(e):c.plural(e);return(r?t+" ":"")+n}return c.plural=l(i,n,e),c.isPlural=u(i,n,e),c.singular=l(n,i,t),c.isSingular=u(n,i,t),c.addPluralRule=function(t,r){e.push([o(t),r])},c.addSingularRule=function(e,r){t.push([o(e),r])},c.addUncountableRule=function(e){if("string"==typeof e){r[e.toLowerCase()]=!0;return}c.addPluralRule(e,"$0"),c.addSingularRule(e,"$0")},c.addIrregularRule=function(e,t){t=t.toLowerCase(),i[e=e.toLowerCase()]=t,n[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(e){return c.addIrregularRule(e[0],e[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(e){return c.addPluralRule(e[0],e[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(e){return c.addSingularRule(e[0],e[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(c.addUncountableRule),c},e.exports=t()},79809:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncSubject=void 0;var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return n(t,e),t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this._hasValue,n=this._value,i=this.thrownError,o=this.isStopped,a=this._isComplete;t?e.error(i):(o||a)&&(r&&e.next(n),e.complete())},t.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},t.prototype.complete=function(){var t=this._hasValue,r=this._value;this._isComplete||(this._isComplete=!0,t&&e.prototype.next.call(this,r),e.prototype.complete.call(this))},t}(r(25149).Subject);t.AsyncSubject=i},11755:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.BehaviorSubject=void 0;var i=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r.closed||t.next(this._value),r},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(r(25149).Subject);t.BehaviorSubject=i},60874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeNotification=t.Notification=t.NotificationKind=void 0;var n=r(54469),i=r(51219),o=r(21730),a=r(86653);!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(t.NotificationKind||(t.NotificationKind={}));var s=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){return l(this,e)},e.prototype.do=function(e,t,r){var n=this.kind,i=this.value,o=this.error;return"N"===n?null==e?void 0:e(i):"E"===n?null==t?void 0:t(o):null==r?void 0:r()},e.prototype.accept=function(e,t,r){return a.isFunction(null==e?void 0:e.next)?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){var e=this.kind,t=this.value,r=this.error,a="N"===e?i.of(t):"E"===e?o.throwError(function(){return r}):"C"===e?n.EMPTY:0;if(!a)throw TypeError("Unexpected notification kind "+e);return a},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function l(e,t){var r,n,i,o=e.kind,a=e.value,s=e.error;if("string"!=typeof o)throw TypeError('Invalid notification, missing "kind"');"N"===o?null===(r=t.next)||void 0===r||r.call(t,a):"E"===o?null===(n=t.error)||void 0===n||n.call(t,s):null===(i=t.complete)||void 0===i||i.call(t)}t.Notification=s,t.observeNotification=l},1442:(e,t)=>{"use strict";function r(e,t,r){return{kind:e,value:t,error:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.createNotification=t.nextNotification=t.errorNotification=t.COMPLETE_NOTIFICATION=void 0,t.COMPLETE_NOTIFICATION=r("C",void 0,void 0),t.errorNotification=function(e){return r("E",void 0,e)},t.nextNotification=function(e){return r("N",e,void 0)},t.createNotification=r},19505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var n=r(64901),i=r(8122),o=r(97199),a=r(81698),s=r(76830),l=r(86653),u=r(3078),c=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var o,a=this,s=(o=e)&&o instanceof n.Subscriber||o&&l.isFunction(o.next)&&l.isFunction(o.error)&&l.isFunction(o.complete)&&i.isSubscription(o)?e:new n.SafeSubscriber(e,t,r);return u.errorContext(function(){var e=a.operator,t=a.source;s.add(e?e.call(s,t):t?a._subscribe(s):a._trySubscribe(s))}),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=p(t))(function(t,i){var o=new n.SafeSubscriber({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});r.subscribe(o)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=p(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function p(e){var t;return null!==(t=null!=e?e:s.config.Promise)&&void 0!==t?t:Promise}t.Observable=c},5729:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ReplaySubject=void 0;var i=r(25149),o=r(38592),a=function(e){function t(t,r,n){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===n&&(n=o.dateTimestampProvider);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=r,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=r===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,r),i}return n(t,e),t.prototype.next=function(t){var r=this.isStopped,n=this._buffer,i=this._infiniteTimeWindow,o=this._timestampProvider,a=this._windowTime;!r&&(n.push(t),i||n.push(o.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),i=0;i<n.length&&!e.closed;i+=r?1:2)e.next(n[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,r=this._buffer,n=this._infiniteTimeWindow,i=(n?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!n){for(var o=t.now(),a=0,s=1;s<r.length&&r[s]<=o;s+=2)a=s;a&&r.splice(0,a+1)}},t}(i.Subject);t.ReplaySubject=a},96976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scheduler=void 0;var n=r(38592),i=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=n.dateTimestampProvider.now,e}();t.Scheduler=i},25149:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.AnonymousSubject=t.Subject=void 0;var o=r(19505),a=r(8122),s=r(40747),l=r(8500),u=r(3078),c=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n(t,e),t.prototype.lift=function(e){var t=new p(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new s.ObjectUnsubscribedError},t.prototype.next=function(e){var t=this;u.errorContext(function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=i(t.currentObservers),a=o.next();!a.done;a=o.next())a.value.next(e)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}})},t.prototype.error=function(e){var t=this;u.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}})},t.prototype.complete=function(){var e=this;u.errorContext(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,i=this.observers;return r||n?a.EMPTY_SUBSCRIPTION:(this.currentObservers=null,i.push(e),new a.Subscription(function(){t.currentObservers=null,l.arrRemove(i,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},t.prototype.asObservable=function(){var e=new o.Observable;return e.source=this,e},t.create=function(e,t){return new p(e,t)},t}(o.Observable);t.Subject=c;var p=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return n(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:a.EMPTY_SUBSCRIPTION},t}(c);t.AnonymousSubject=p},64901:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_OBSERVER=t.SafeSubscriber=t.Subscriber=void 0;var i=r(86653),o=r(8122),a=r(76830),s=r(56066),l=r(60917),u=r(1442),c=r(14138),p=r(3078),d=function(e){function r(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,o.isSubscription(r)&&r.add(n)):n.destination=t.EMPTY_OBSERVER,n}return n(r,e),r.create=function(e,t,r){return new m(e,t,r)},r.prototype.next=function(e){this.isStopped?g(u.nextNotification(e),this):this._next(e)},r.prototype.error=function(e){this.isStopped?g(u.errorNotification(e),this):(this.isStopped=!0,this._error(e))},r.prototype.complete=function(){this.isStopped?g(u.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(e){this.destination.next(e)},r.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(o.Subscription);t.Subscriber=d;var f=Function.prototype.bind;function h(e,t){return f.call(e,t)}var y=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){v(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){v(e)}else v(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){v(e)}},e}(),m=function(e){function t(t,r,n){var o,s,l=e.call(this)||this;return i.isFunction(t)||!t?o={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:l&&a.config.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return l.unsubscribe()},o={next:t.next&&h(t.next,s),error:t.error&&h(t.error,s),complete:t.complete&&h(t.complete,s)}):o=t,l.destination=new y(o),l}return n(t,e),t}(d);function v(e){a.config.useDeprecatedSynchronousErrorHandling?p.captureError(e):s.reportUnhandledError(e)}function g(e,t){var r=a.config.onStoppedNotification;r&&c.timeoutProvider.setTimeout(function(){return r(e,t)})}t.SafeSubscriber=m,t.EMPTY_OBSERVER={closed:!0,next:l.noop,error:function(e){throw e},complete:l.noop}},8122:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},o=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.isSubscription=t.EMPTY_SUBSCRIPTION=t.Subscription=void 0;var a=r(86653),s=r(23376),l=r(8500),u=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,r,l,u,p=this._parentage;if(p){if(this._parentage=null,Array.isArray(p))try{for(var d=n(p),f=d.next();!f.done;f=d.next())f.value.remove(this)}catch(t){e={error:t}}finally{try{f&&!f.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}else p.remove(this)}var h=this.initialTeardown;if(a.isFunction(h))try{h()}catch(e){u=e instanceof s.UnsubscriptionError?e.errors:[e]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var m=n(y),v=m.next();!v.done;v=m.next()){var g=v.value;try{c(g)}catch(e){u=null!=u?u:[],e instanceof s.UnsubscriptionError?u=o(o([],i(u)),i(e.errors)):u.push(e)}}}catch(e){r={error:e}}finally{try{v&&!v.done&&(l=m.return)&&l.call(m)}finally{if(r)throw r.error}}}if(u)throw new s.UnsubscriptionError(u)}},t.prototype.add=function(e){var r;if(e&&e!==this){if(this.closed)c(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&l.arrRemove(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&l.arrRemove(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function c(e){a.isFunction(e)?e():e.unsubscribe()}t.Subscription=u,t.EMPTY_SUBSCRIPTION=u.EMPTY,t.isSubscription=function(e){return e instanceof u||e&&"closed"in e&&a.isFunction(e.remove)&&a.isFunction(e.add)&&a.isFunction(e.unsubscribe)}},76830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},31756:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectableObservable=void 0;var i=r(19505),o=r(8122),a=r(92140),s=r(81188),l=r(40141),u=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._subject=null,n._refCount=0,n._connection=null,l.hasLift(t)&&(n.lift=t.lift),n}return n(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new o.Subscription;var r=this.getSubject();t.add(this.source.subscribe(s.createOperatorSubscriber(r,void 0,function(){e._teardown(),r.complete()},function(t){e._teardown(),r.error(t)},function(){return e._teardown()}))),t.closed&&(this._connection=null,t=o.Subscription.EMPTY)}return t},t.prototype.refCount=function(){return a.refCount()(this)},t}(i.Observable);t.ConnectableObservable=u},56138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestInit=t.combineLatest=void 0;var n=r(19505),i=r(8359),o=r(45734),a=r(95121),s=r(36383),l=r(82544),u=r(57448),c=r(81188),p=r(29870);function d(e,t,r){return void 0===r&&(r=a.identity),function(n){f(t,function(){for(var i=e.length,a=Array(i),s=i,l=i,u=function(i){f(t,function(){var u=o.from(e[i],t),p=!1;u.subscribe(c.createOperatorSubscriber(n,function(e){a[i]=e,!p&&(p=!0,l--),l||n.next(r(a.slice()))},function(){--s||n.complete()}))},n)},p=0;p<i;p++)u(p)},n)}}function f(e,t,r){e?p.executeSchedule(r,e,t):t()}t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=l.popScheduler(e),c=l.popResultSelector(e),p=i.argsArgArrayOrObject(e),f=p.args,h=p.keys;if(0===f.length)return o.from([],r);var y=new n.Observable(d(f,r,h?function(e){return u.createObject(h,e)}:a.identity));return c?y.pipe(s.mapOneOrManyArgs(c)):y},t.combineLatestInit=d},5672:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concat=void 0;var n=r(74788),i=r(82544),o=r(45734);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.concatAll()(o.from(e,i.popScheduler(e)))}},54469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.empty=t.EMPTY=void 0;var n=r(19505);t.EMPTY=new n.Observable(function(e){return e.complete()}),t.empty=function(e){return e?new n.Observable(function(t){return e.schedule(function(){return t.complete()})}):t.EMPTY}},45734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.from=void 0;var n=r(20633),i=r(55684);t.from=function(e,t){return t?n.scheduled(e,t):i.innerFrom(e)}},80380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromSubscribable=void 0;var n=r(19505);t.fromSubscribable=function(e){return new n.Observable(function(t){return e.subscribe(t)})}},55684:(e,t,r)=>{"use strict";var n=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof o?o(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,i,(t=e[r](t)).done,t.value)})}}},o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.fromReadableStreamLike=t.fromAsyncIterable=t.fromIterable=t.fromPromise=t.fromArrayLike=t.fromInteropObservable=t.innerFrom=void 0;var a=r(92895),s=r(1583),l=r(19505),u=r(87472),c=r(75380),p=r(27132),d=r(89926),f=r(11012),h=r(86653),y=r(56066),m=r(97199);function v(e){return new l.Observable(function(t){var r=e[m.observable]();if(h.isFunction(r.subscribe))return r.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")})}function g(e){return new l.Observable(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function b(e){return new l.Observable(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,y.reportUnhandledError)})}function _(e){return new l.Observable(function(t){var r,n;try{for(var i=o(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(t.next(s),t.closed)return}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()})}function T(e){return new l.Observable(function(t){(function(e,t){var r,o,a,s,l,u,c,p;return l=this,u=void 0,c=void 0,p=function(){var l;return n(this,function(n){switch(n.label){case 0:n.trys.push([0,5,6,11]),r=i(e),n.label=1;case 1:return[4,r.next()];case 2:if((o=n.sent()).done)return[3,4];if(l=o.value,t.next(l),t.closed)return[2];n.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a={error:n.sent()},[3,11];case 6:if(n.trys.push([6,,9,10]),!(o&&!o.done&&(s=r.return)))return[3,8];return[4,s.call(r)];case 7:n.sent(),n.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(c||(c=Promise))(function(e,t){function r(e){try{i(p.next(e))}catch(e){t(e)}}function n(e){try{i(p.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof c?i:new c(function(e){e(i)})).then(r,n)}i((p=p.apply(l,u||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function E(e){return T(f.readableStreamLikeToAsyncGenerator(e))}t.innerFrom=function(e){if(e instanceof l.Observable)return e;if(null!=e){if(u.isInteropObservable(e))return v(e);if(a.isArrayLike(e))return g(e);if(s.isPromise(e))return b(e);if(c.isAsyncIterable(e))return T(e);if(d.isIterable(e))return _(e);if(f.isReadableStreamLike(e))return E(e)}throw p.createInvalidObservableTypeError(e)},t.fromInteropObservable=v,t.fromArrayLike=g,t.fromPromise=b,t.fromIterable=_,t.fromAsyncIterable=T,t.fromReadableStreamLike=E},19403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.interval=void 0;var n=r(54163),i=r(66474);t.interval=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=n.asyncScheduler),e<0&&(e=0),i.timer(e,e,t)}},51219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.of=void 0;var n=r(82544),i=r(45734);t.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.popScheduler(e);return i.from(e,r)}},44692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onErrorResumeNext=void 0;var n=r(19505),i=r(87603),o=r(81188),a=r(60917),s=r(55684);t.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.argsOrArgArray(e);return new n.Observable(function(e){var t=0,n=function(){if(t<r.length){var i=void 0;try{i=s.innerFrom(r[t++])}catch(e){n();return}var l=new o.OperatorSubscriber(e,void 0,a.noop,a.noop);i.subscribe(l),l.add(n)}else e.complete()};n()})}},3469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raceInit=t.race=void 0;var n=r(19505),i=r(55684),o=r(87603),a=r(81188);function s(e){return function(t){for(var r=[],n=function(n){r.push(i.innerFrom(e[n]).subscribe(a.createOperatorSubscriber(t,function(e){if(r){for(var i=0;i<r.length;i++)i!==n&&r[i].unsubscribe();r=null}t.next(e)})))},o=0;r&&!t.closed&&o<e.length;o++)n(o)}}t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=o.argsOrArgArray(e)).length?i.innerFrom(e[0]):new n.Observable(s(e))},t.raceInit=s},21730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwError=void 0;var n=r(19505),i=r(86653);t.throwError=function(e,t){var r=i.isFunction(e)?e:function(){return e},o=function(e){return e.error(r())};return new n.Observable(t?function(e){return t.schedule(o,0,e)}:o)}},66474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timer=void 0;var n=r(19505),i=r(54163),o=r(26941),a=r(89808);t.timer=function(e,t,r){void 0===e&&(e=0),void 0===r&&(r=i.async);var s=-1;return null!=t&&(o.isScheduler(t)?r=t:s=t),new n.Observable(function(t){var n=a.isValidDate(e)?+e-r.now():e;n<0&&(n=0);var i=0;return r.schedule(function(){t.closed||(t.next(i++),0<=s?this.schedule(void 0,s):t.complete())},n)})}},41452:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zip=void 0;var o=r(19505),a=r(55684),s=r(87603),l=r(54469),u=r(81188),c=r(82544);t.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=c.popResultSelector(e),p=s.argsOrArgArray(e);return p.length?new o.Observable(function(e){var t=p.map(function(){return[]}),o=p.map(function(){return!1});e.add(function(){t=o=null});for(var s=function(s){a.innerFrom(p[s]).subscribe(u.createOperatorSubscriber(e,function(a){if(t[s].push(a),t.every(function(e){return e.length})){var l=t.map(function(e){return e.shift()});e.next(r?r.apply(void 0,i([],n(l))):l),t.some(function(e,t){return!e.length&&o[t]})&&e.complete()}},function(){o[s]=!0,t[s].length||e.complete()}))},l=0;!e.closed&&l<p.length;l++)s(l);return function(){t=o=null}}):l.EMPTY}},81188:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorSubscriber=t.createOperatorSubscriber=void 0;var i=r(64901);t.createOperatorSubscriber=function(e,t,r,n,i){return new o(e,t,r,n,i)};var o=function(e){function t(t,r,n,i,o,a){var s=e.call(this,t)||this;return s.onFinalize=o,s.shouldUnsubscribe=a,s._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return n(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(i.Subscriber);t.OperatorSubscriber=o},93979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.audit=void 0;var n=r(40141),i=r(55684),o=r(81188);t.audit=function(e){return n.operate(function(t,r){var n=!1,a=null,s=null,l=!1,u=function(){if(null==s||s.unsubscribe(),s=null,n){n=!1;var e=a;a=null,r.next(e)}l&&r.complete()},c=function(){s=null,l&&r.complete()};t.subscribe(o.createOperatorSubscriber(r,function(t){n=!0,a=t,s||i.innerFrom(e(t)).subscribe(s=o.createOperatorSubscriber(r,u,c))},function(){l=!0,n&&s&&!s.closed||r.complete()}))})}},37723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.auditTime=void 0;var n=r(54163),i=r(93979),o=r(66474);t.auditTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.audit(function(){return o.timer(e,t)})}},58921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buffer=void 0;var n=r(40141),i=r(60917),o=r(81188),a=r(55684);t.buffer=function(e){return n.operate(function(t,r){var n=[];return t.subscribe(o.createOperatorSubscriber(r,function(e){return n.push(e)},function(){r.next(n),r.complete()})),a.innerFrom(e).subscribe(o.createOperatorSubscriber(r,function(){var e=n;n=[],r.next(e)},i.noop)),function(){n=null}})}},25176:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferCount=void 0;var i=r(40141),o=r(81188),a=r(8500);t.bufferCount=function(e,t){return void 0===t&&(t=null),t=null!=t?t:e,i.operate(function(r,i){var s=[],l=0;r.subscribe(o.createOperatorSubscriber(i,function(r){var o,u,c,p,d=null;l++%t==0&&s.push([]);try{for(var f=n(s),h=f.next();!h.done;h=f.next()){var y=h.value;y.push(r),e<=y.length&&(d=null!=d?d:[]).push(y)}}catch(e){o={error:e}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(o)throw o.error}}if(d)try{for(var m=n(d),v=m.next();!v.done;v=m.next()){var y=v.value;a.arrRemove(s,y),i.next(y)}}catch(e){c={error:e}}finally{try{v&&!v.done&&(p=m.return)&&p.call(m)}finally{if(c)throw c.error}}},function(){var e,t;try{for(var r=n(s),o=r.next();!o.done;o=r.next()){var a=o.value;i.next(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}i.complete()},void 0,function(){s=null}))})}},86822:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferTime=void 0;var i=r(8122),o=r(40141),a=r(81188),s=r(8500),l=r(54163),u=r(82544),c=r(29870);t.bufferTime=function(e){for(var t,r,p=[],d=1;d<arguments.length;d++)p[d-1]=arguments[d];var f=null!==(t=u.popScheduler(p))&&void 0!==t?t:l.asyncScheduler,h=null!==(r=p[0])&&void 0!==r?r:null,y=p[1]||1/0;return o.operate(function(t,r){var o=[],l=!1,u=function(e){var t=e.buffer;e.subs.unsubscribe(),s.arrRemove(o,e),r.next(t),l&&p()},p=function(){if(o){var t=new i.Subscription;r.add(t);var n={buffer:[],subs:t};o.push(n),c.executeSchedule(t,f,function(){return u(n)},e)}};null!==h&&h>=0?c.executeSchedule(r,f,p,h,!0):l=!0,p();var d=a.createOperatorSubscriber(r,function(e){var t,r,i=o.slice();try{for(var a=n(i),s=a.next();!s.done;s=a.next()){var l=s.value,c=l.buffer;c.push(e),y<=c.length&&u(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}},function(){for(;null==o?void 0:o.length;)r.next(o.shift().buffer);null==d||d.unsubscribe(),r.complete(),r.unsubscribe()},void 0,function(){return o=null});t.subscribe(d)})}},13291:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToggle=void 0;var i=r(8122),o=r(40141),a=r(55684),s=r(81188),l=r(60917),u=r(8500);t.bufferToggle=function(e,t){return o.operate(function(r,o){var c=[];a.innerFrom(e).subscribe(s.createOperatorSubscriber(o,function(e){var r=[];c.push(r);var n=new i.Subscription;n.add(a.innerFrom(t(e)).subscribe(s.createOperatorSubscriber(o,function(){u.arrRemove(c,r),o.next(r),n.unsubscribe()},l.noop)))},l.noop)),r.subscribe(s.createOperatorSubscriber(o,function(e){var t,r;try{for(var i=n(c),o=i.next();!o.done;o=i.next())o.value.push(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},function(){for(;c.length>0;)o.next(c.shift());o.complete()}))})}},61514:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferWhen=void 0;var n=r(40141),i=r(60917),o=r(81188),a=r(55684);t.bufferWhen=function(e){return n.operate(function(t,r){var n=null,s=null,l=function(){null==s||s.unsubscribe();var t=n;n=[],t&&r.next(t),a.innerFrom(e()).subscribe(s=o.createOperatorSubscriber(r,l,i.noop))};l(),t.subscribe(o.createOperatorSubscriber(r,function(e){return null==n?void 0:n.push(e)},function(){n&&r.next(n),r.complete()},void 0,function(){return n=s=null}))})}},53850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.catchError=void 0;var n=r(55684),i=r(81188),o=r(40141);t.catchError=function e(t){return o.operate(function(r,o){var a,s=null,l=!1;s=r.subscribe(i.createOperatorSubscriber(o,void 0,void 0,function(i){a=n.innerFrom(t(i,e(t)(r))),s?(s.unsubscribe(),s=null,a.subscribe(o)):l=!0})),l&&(s.unsubscribe(),s=null,a.subscribe(o))})}},9805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineAll=void 0;var n=r(69102);t.combineAll=n.combineLatestAll},40510:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatest=void 0;var o=r(56138),a=r(40141),s=r(87603),l=r(36383),u=r(81698),c=r(82544);t.combineLatest=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var p=c.popResultSelector(t);return p?u.pipe(e.apply(void 0,i([],n(t))),l.mapOneOrManyArgs(p)):a.operate(function(e,r){o.combineLatestInit(i([e],n(s.argsOrArgArray(t))))(r)})}},69102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestAll=void 0;var n=r(56138),i=r(45471);t.combineLatestAll=function(e){return i.joinAllInternals(n.combineLatest,e)}},20317:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestWith=void 0;var o=r(40510);t.combineLatestWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.combineLatest.apply(void 0,i([],n(e)))}},18132:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.concat=void 0;var o=r(40141),a=r(74788),s=r(82544),l=r(45734);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=s.popScheduler(e);return o.operate(function(t,o){a.concatAll()(l.from(i([t],n(e)),r)).subscribe(o)})}},74788:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatAll=void 0;var n=r(30375);t.concatAll=function(){return n.mergeAll(1)}},63875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatMap=void 0;var n=r(66271),i=r(86653);t.concatMap=function(e,t){return i.isFunction(t)?n.mergeMap(e,t,1):n.mergeMap(e,1)}},60286:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatMapTo=void 0;var n=r(63875),i=r(86653);t.concatMapTo=function(e,t){return i.isFunction(t)?n.concatMap(function(){return e},t):n.concatMap(function(){return e})}},15678:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.concatWith=void 0;var o=r(18132);t.concatWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.concat.apply(void 0,i([],n(e)))}},80369:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;var n=r(25149),i=r(55684),o=r(40141),a=r(80380),s={connector:function(){return new n.Subject}};t.connect=function(e,t){void 0===t&&(t=s);var r=t.connector;return o.operate(function(t,n){var o=r();i.innerFrom(e(a.fromSubscribable(o))).subscribe(n),n.add(t.subscribe(o))})}},61786:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.count=void 0;var n=r(48916);t.count=function(e){return n.reduce(function(t,r,n){return!e||e(r,n)?t+1:t},0)}},92031:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0;var n=r(40141),i=r(60917),o=r(81188),a=r(55684);t.debounce=function(e){return n.operate(function(t,r){var n=!1,s=null,l=null,u=function(){if(null==l||l.unsubscribe(),l=null,n){n=!1;var e=s;s=null,r.next(e)}};t.subscribe(o.createOperatorSubscriber(r,function(t){null==l||l.unsubscribe(),n=!0,s=t,l=o.createOperatorSubscriber(r,u,i.noop),a.innerFrom(e(t)).subscribe(l)},function(){u(),r.complete()},void 0,function(){s=l=null}))})}},32202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounceTime=void 0;var n=r(54163),i=r(40141),o=r(81188);t.debounceTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.operate(function(r,n){var i=null,a=null,s=null,l=function(){if(i){i.unsubscribe(),i=null;var e=a;a=null,n.next(e)}};function u(){var r=s+e,o=t.now();if(o<r){i=this.schedule(void 0,r-o),n.add(i);return}l()}r.subscribe(o.createOperatorSubscriber(n,function(r){a=r,s=t.now(),i||(i=t.schedule(u,e),n.add(i))},function(){l(),n.complete()},void 0,function(){a=i=null}))})}},75907:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultIfEmpty=void 0;var n=r(40141),i=r(81188);t.defaultIfEmpty=function(e){return n.operate(function(t,r){var n=!1;t.subscribe(i.createOperatorSubscriber(r,function(e){n=!0,r.next(e)},function(){n||r.next(e),r.complete()}))})}},51182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0;var n=r(54163),i=r(33506),o=r(66474);t.delay=function(e,t){void 0===t&&(t=n.asyncScheduler);var r=o.timer(e,t);return i.delayWhen(function(){return r})}},33506:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delayWhen=void 0;var n=r(5672),i=r(74181),o=r(80078),a=r(51886),s=r(66271),l=r(55684);t.delayWhen=function e(t,r){return r?function(a){return n.concat(r.pipe(i.take(1),o.ignoreElements()),a.pipe(e(t)))}:s.mergeMap(function(e,r){return l.innerFrom(t(e,r)).pipe(i.take(1),a.mapTo(e))})}},74757:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dematerialize=void 0;var n=r(60874),i=r(40141),o=r(81188);t.dematerialize=function(){return i.operate(function(e,t){e.subscribe(o.createOperatorSubscriber(t,function(e){return n.observeNotification(e,t)}))})}},97068:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinct=void 0;var n=r(40141),i=r(81188),o=r(60917),a=r(55684);t.distinct=function(e,t){return n.operate(function(r,n){var s=new Set;r.subscribe(i.createOperatorSubscriber(n,function(t){var r=e?e(t):t;s.has(r)||(s.add(r),n.next(t))})),t&&a.innerFrom(t).subscribe(i.createOperatorSubscriber(n,function(){return s.clear()},o.noop))})}},19530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinctUntilChanged=void 0;var n=r(95121),i=r(40141),o=r(81188);function a(e,t){return e===t}t.distinctUntilChanged=function(e,t){return void 0===t&&(t=n.identity),e=null!=e?e:a,i.operate(function(r,n){var i,a=!0;r.subscribe(o.createOperatorSubscriber(n,function(r){var o=t(r);(a||!e(i,o))&&(a=!1,i=o,n.next(r))}))})}},62602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinctUntilKeyChanged=void 0;var n=r(19530);t.distinctUntilKeyChanged=function(e,t){return n.distinctUntilChanged(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}},46672:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elementAt=void 0;var n=r(56338),i=r(14974),o=r(97075),a=r(75907),s=r(74181);t.elementAt=function(e,t){if(e<0)throw new n.ArgumentOutOfRangeError;var r=arguments.length>=2;return function(l){return l.pipe(i.filter(function(t,r){return r===e}),s.take(1),r?a.defaultIfEmpty(t):o.throwIfEmpty(function(){return new n.ArgumentOutOfRangeError}))}}},69436:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.endWith=void 0;var o=r(5672),a=r(51219);t.endWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return o.concat(t,a.of.apply(void 0,i([],n(e))))}}},75282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.every=void 0;var n=r(40141),i=r(81188);t.every=function(e,t){return n.operate(function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,function(i){e.call(t,i,o++,r)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}},17287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaust=void 0;var n=r(96741);t.exhaust=n.exhaustAll},96741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustAll=void 0;var n=r(40476),i=r(95121);t.exhaustAll=function(){return n.exhaustMap(i.identity)}},40476:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustMap=void 0;var n=r(95259),i=r(55684),o=r(40141),a=r(81188);t.exhaustMap=function e(t,r){return r?function(o){return o.pipe(e(function(e,o){return i.innerFrom(t(e,o)).pipe(n.map(function(t,n){return r(e,t,o,n)}))}))}:o.operate(function(e,r){var n=0,o=null,s=!1;e.subscribe(a.createOperatorSubscriber(r,function(e){o||(o=a.createOperatorSubscriber(r,void 0,function(){o=null,s&&r.complete()}),i.innerFrom(t(e,n++)).subscribe(o))},function(){s=!0,o||r.complete()}))})}},50464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expand=void 0;var n=r(40141),i=r(26390);t.expand=function(e,t,r){return void 0===t&&(t=1/0),t=1>(t||0)?1/0:t,n.operate(function(n,o){return i.mergeInternals(n,o,e,t,void 0,!0,r)})}},14974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filter=void 0;var n=r(40141),i=r(81188);t.filter=function(e,t){return n.operate(function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,function(r){return e.call(t,r,o++)&&n.next(r)}))})}},62321:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalize=void 0;var n=r(40141);t.finalize=function(e){return n.operate(function(t,r){try{t.subscribe(r)}finally{r.add(e)}})}},56398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFind=t.find=void 0;var n=r(40141),i=r(81188);function o(e,t,r){var n="index"===r;return function(r,o){var a=0;r.subscribe(i.createOperatorSubscriber(o,function(i){var s=a++;e.call(t,i,s,r)&&(o.next(n?s:i),o.complete())},function(){o.next(n?-1:void 0),o.complete()}))}}t.find=function(e,t){return n.operate(o(e,t,"value"))},t.createFind=o},17461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findIndex=void 0;var n=r(40141),i=r(56398);t.findIndex=function(e,t){return n.operate(i.createFind(e,t,"index"))}},90653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.first=void 0;var n=r(77668),i=r(14974),o=r(74181),a=r(75907),s=r(97075),l=r(95121);t.first=function(e,t){var r=arguments.length>=2;return function(u){return u.pipe(e?i.filter(function(t,r){return e(t,r,u)}):l.identity,o.take(1),r?a.defaultIfEmpty(t):s.throwIfEmpty(function(){return new n.EmptyError}))}}},94362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flatMap=void 0;var n=r(66271);t.flatMap=n.mergeMap},35939:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupBy=void 0;var n=r(19505),i=r(55684),o=r(25149),a=r(40141),s=r(81188);t.groupBy=function(e,t,r,l){return a.operate(function(a,u){t&&"function"!=typeof t?(r=t.duration,c=t.element,l=t.connector):c=t;var c,p=new Map,d=function(e){p.forEach(e),e(u)},f=function(e){return d(function(t){return t.error(e)})},h=0,y=!1,m=new s.OperatorSubscriber(u,function(t){try{var a=e(t),d=p.get(a);if(!d){p.set(a,d=l?l():new o.Subject);var v,g,b=(v=d,(g=new n.Observable(function(e){h++;var t=v.subscribe(e);return function(){t.unsubscribe(),0==--h&&y&&m.unsubscribe()}})).key=a,g);if(u.next(b),r){var _=s.createOperatorSubscriber(d,function(){d.complete(),null==_||_.unsubscribe()},void 0,void 0,function(){return p.delete(a)});m.add(i.innerFrom(r(b)).subscribe(_))}}d.next(c?c(t):t)}catch(e){f(e)}},function(){return d(function(e){return e.complete()})},f,function(){return p.clear()},function(){return y=!0,0===h});a.subscribe(m)})}},80078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ignoreElements=void 0;var n=r(40141),i=r(81188),o=r(60917);t.ignoreElements=function(){return n.operate(function(e,t){e.subscribe(i.createOperatorSubscriber(t,o.noop))})}},9733:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=void 0;var n=r(40141),i=r(81188);t.isEmpty=function(){return n.operate(function(e,t){e.subscribe(i.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}},45471:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinAllInternals=void 0;var n=r(95121),i=r(36383),o=r(81698),a=r(66271),s=r(90562);t.joinAllInternals=function(e,t){return o.pipe(s.toArray(),a.mergeMap(function(t){return e(t)}),t?i.mapOneOrManyArgs(t):n.identity)}},23582:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.last=void 0;var n=r(77668),i=r(14974),o=r(59275),a=r(97075),s=r(75907),l=r(95121);t.last=function(e,t){var r=arguments.length>=2;return function(u){return u.pipe(e?i.filter(function(t,r){return e(t,r,u)}):l.identity,o.takeLast(1),r?s.defaultIfEmpty(t):a.throwIfEmpty(function(){return new n.EmptyError}))}}},95259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.map=void 0;var n=r(40141),i=r(81188);t.map=function(e,t){return n.operate(function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,function(r){n.next(e.call(t,r,o++))}))})}},51886:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapTo=void 0;var n=r(95259);t.mapTo=function(e){return n.map(function(){return e})}},61529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.materialize=void 0;var n=r(60874),i=r(40141),o=r(81188);t.materialize=function(){return i.operate(function(e,t){e.subscribe(o.createOperatorSubscriber(t,function(e){t.next(n.Notification.createNext(e))},function(){t.next(n.Notification.createComplete()),t.complete()},function(e){t.next(n.Notification.createError(e)),t.complete()}))})}},93060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.max=void 0;var n=r(48916),i=r(86653);t.max=function(e){return n.reduce(i.isFunction(e)?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t})}},4489:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.merge=void 0;var o=r(40141),a=r(87603),s=r(30375),l=r(82544),u=r(45734);t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=l.popScheduler(e),c=l.popNumber(e,1/0);return e=a.argsOrArgArray(e),o.operate(function(t,o){s.mergeAll(c)(u.from(i([t],n(e)),r)).subscribe(o)})}},30375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAll=void 0;var n=r(66271),i=r(95121);t.mergeAll=function(e){return void 0===e&&(e=1/0),n.mergeMap(i.identity,e)}},26390:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeInternals=void 0;var n=r(55684),i=r(29870),o=r(81188);t.mergeInternals=function(e,t,r,a,s,l,u,c){var p=[],d=0,f=0,h=!1,y=function(){!h||p.length||d||t.complete()},m=function(e){return d<a?v(e):p.push(e)},v=function(e){l&&t.next(e),d++;var c=!1;n.innerFrom(r(e,f++)).subscribe(o.createOperatorSubscriber(t,function(e){null==s||s(e),l?m(e):t.next(e)},function(){c=!0},void 0,function(){if(c)try{for(d--;p.length&&d<a;)!function(){var e=p.shift();u?i.executeSchedule(t,u,function(){return v(e)}):v(e)}();y()}catch(e){t.error(e)}}))};return e.subscribe(o.createOperatorSubscriber(t,m,function(){h=!0,y()})),function(){null==c||c()}}},66271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMap=void 0;var n=r(95259),i=r(55684),o=r(40141),a=r(26390),s=r(86653);t.mergeMap=function e(t,r,l){return(void 0===l&&(l=1/0),s.isFunction(r))?e(function(e,o){return n.map(function(t,n){return r(e,t,o,n)})(i.innerFrom(t(e,o)))},l):("number"==typeof r&&(l=r),o.operate(function(e,r){return a.mergeInternals(e,r,t,l)}))}},45848:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMapTo=void 0;var n=r(66271),i=r(86653);t.mergeMapTo=function(e,t,r){return(void 0===r&&(r=1/0),i.isFunction(t))?n.mergeMap(function(){return e},t,r):("number"==typeof t&&(r=t),n.mergeMap(function(){return e},r))}},50147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeScan=void 0;var n=r(40141),i=r(26390);t.mergeScan=function(e,t,r){return void 0===r&&(r=1/0),n.operate(function(n,o){var a=t;return i.mergeInternals(n,o,function(t,r){return e(a,t,r)},r,function(e){a=e},!1,void 0,function(){return a=null})})}},84535:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeWith=void 0;var o=r(4489);t.mergeWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.merge.apply(void 0,i([],n(e)))}},75547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.min=void 0;var n=r(48916),i=r(86653);t.min=function(e){return n.reduce(i.isFunction(e)?function(t,r){return 0>e(t,r)?t:r}:function(e,t){return e<t?e:t})}},58404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multicast=void 0;var n=r(31756),i=r(86653),o=r(80369);t.multicast=function(e,t){var r=i.isFunction(e)?e:function(){return e};return i.isFunction(t)?o.connect(t,{connector:r}):function(e){return new n.ConnectableObservable(e,r)}}},36791:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeOn=void 0;var n=r(29870),i=r(40141),o=r(81188);t.observeOn=function(e,t){return void 0===t&&(t=0),i.operate(function(r,i){r.subscribe(o.createOperatorSubscriber(i,function(r){return n.executeSchedule(i,e,function(){return i.next(r)},t)},function(){return n.executeSchedule(i,e,function(){return i.complete()},t)},function(r){return n.executeSchedule(i,e,function(){return i.error(r)},t)}))})}},84708:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.onErrorResumeNext=t.onErrorResumeNextWith=void 0;var o=r(87603),a=r(44692);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.argsOrArgArray(e);return function(e){return a.onErrorResumeNext.apply(void 0,i([e],n(r)))}}t.onErrorResumeNextWith=s,t.onErrorResumeNext=s},9938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pairwise=void 0;var n=r(40141),i=r(81188);t.pairwise=function(){return n.operate(function(e,t){var r,n=!1;e.subscribe(i.createOperatorSubscriber(t,function(e){var i=r;r=e,n&&t.next([i,e]),n=!0}))})}},13907:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.partition=void 0;var n=r(34725),i=r(14974);t.partition=function(e,t){return function(r){return[i.filter(e,t)(r),i.filter(n.not(e,t))(r)]}}},43836:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluck=void 0;var n=r(95259);t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(0===r)throw Error("list of properties cannot be empty.");return n.map(function(t){for(var n=t,i=0;i<r;i++){var o=null==n?void 0:n[e[i]];if(void 0===o)return;n=o}return n})}},98254:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publish=void 0;var n=r(25149),i=r(58404),o=r(80369);t.publish=function(e){return e?function(t){return o.connect(e)(t)}:function(e){return i.multicast(new n.Subject)(e)}}},14610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishBehavior=void 0;var n=r(11755),i=r(31756);t.publishBehavior=function(e){return function(t){var r=new n.BehaviorSubject(e);return new i.ConnectableObservable(t,function(){return r})}}},19442:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishLast=void 0;var n=r(79809),i=r(31756);t.publishLast=function(){return function(e){var t=new n.AsyncSubject;return new i.ConnectableObservable(e,function(){return t})}}},6959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishReplay=void 0;var n=r(5729),i=r(58404),o=r(86653);t.publishReplay=function(e,t,r,a){r&&!o.isFunction(r)&&(a=r);var s=o.isFunction(r)?r:void 0;return function(r){return i.multicast(new n.ReplaySubject(e,t,a),s)(r)}}},60820:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.race=void 0;var o=r(87603),a=r(70872);t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.raceWith.apply(void 0,i([],n(o.argsOrArgArray(e))))}},70872:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.raceWith=void 0;var o=r(3469),a=r(40141),s=r(95121);t.raceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?a.operate(function(t,r){o.raceInit(i([t],n(e)))(r)}):s.identity}},48916:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduce=void 0;var n=r(43277),i=r(40141);t.reduce=function(e,t){return i.operate(n.scanInternals(e,t,arguments.length>=2,!1,!0))}},92140:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refCount=void 0;var n=r(40141),i=r(81188);t.refCount=function(){return n.operate(function(e,t){var r=null;e._refCount++;var n=i.createOperatorSubscriber(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){r=null;return}var n=e._connection,i=r;r=null,n&&(!i||n===i)&&n.unsubscribe(),t.unsubscribe()});e.subscribe(n),n.closed||(r=e.connect())})}},16922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repeat=void 0;var n=r(54469),i=r(40141),o=r(81188),a=r(55684),s=r(66474);t.repeat=function(e){var t,r,l=1/0;return null!=e&&("object"==typeof e?(l=void 0===(t=e.count)?1/0:t,r=e.delay):l=e),l<=0?function(){return n.EMPTY}:i.operate(function(e,t){var n,i=0,u=function(){if(null==n||n.unsubscribe(),n=null,null!=r){var e="number"==typeof r?s.timer(r):a.innerFrom(r(i)),l=o.createOperatorSubscriber(t,function(){l.unsubscribe(),c()});e.subscribe(l)}else c()},c=function(){var r=!1;n=e.subscribe(o.createOperatorSubscriber(t,void 0,function(){++i<l?n?u():r=!0:t.complete()})),r&&u()};c()})}},24304:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repeatWhen=void 0;var n=r(55684),i=r(25149),o=r(40141),a=r(81188);t.repeatWhen=function(e){return o.operate(function(t,r){var o,s,l=!1,u=!1,c=!1,p=function(){return c&&u&&(r.complete(),!0)},d=function(){c=!1,o=t.subscribe(a.createOperatorSubscriber(r,void 0,function(){c=!0,p()||(s||(s=new i.Subject,n.innerFrom(e(s)).subscribe(a.createOperatorSubscriber(r,function(){o?d():l=!0},function(){u=!0,p()}))),s).next()})),l&&(o.unsubscribe(),o=null,l=!1,d())};d()})}},88185:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retry=void 0;var n=r(40141),i=r(81188),o=r(95121),a=r(66474),s=r(55684);t.retry=function(e){void 0===e&&(e=1/0);var t,r=(t=e&&"object"==typeof e?e:{count:e}).count,l=void 0===r?1/0:r,u=t.delay,c=t.resetOnSuccess,p=void 0!==c&&c;return l<=0?o.identity:n.operate(function(e,t){var r,n=0,o=function(){var c=!1;r=e.subscribe(i.createOperatorSubscriber(t,function(e){p&&(n=0),t.next(e)},void 0,function(e){if(n++<l){var p=function(){r?(r.unsubscribe(),r=null,o()):c=!0};if(null!=u){var d="number"==typeof u?a.timer(u):s.innerFrom(u(e,n)),f=i.createOperatorSubscriber(t,function(){f.unsubscribe(),p()},function(){t.complete()});d.subscribe(f)}else p()}else t.error(e)})),c&&(r.unsubscribe(),r=null,o())};o()})}},44492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retryWhen=void 0;var n=r(55684),i=r(25149),o=r(40141),a=r(81188);t.retryWhen=function(e){return o.operate(function(t,r){var o,s,l=!1,u=function(){o=t.subscribe(a.createOperatorSubscriber(r,void 0,void 0,function(t){s||(s=new i.Subject,n.innerFrom(e(s)).subscribe(a.createOperatorSubscriber(r,function(){return o?u():l=!0}))),s&&s.next(t)})),l&&(o.unsubscribe(),o=null,l=!1,u())};u()})}},82726:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sample=void 0;var n=r(55684),i=r(40141),o=r(60917),a=r(81188);t.sample=function(e){return i.operate(function(t,r){var i=!1,s=null;t.subscribe(a.createOperatorSubscriber(r,function(e){i=!0,s=e})),n.innerFrom(e).subscribe(a.createOperatorSubscriber(r,function(){if(i){i=!1;var e=s;s=null,r.next(e)}},o.noop))})}},88886:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sampleTime=void 0;var n=r(54163),i=r(82726),o=r(19403);t.sampleTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),i.sample(o.interval(e,t))}},16484:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scan=void 0;var n=r(40141),i=r(43277);t.scan=function(e,t){return n.operate(i.scanInternals(e,t,arguments.length>=2,!0))}},43277:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanInternals=void 0;var n=r(81188);t.scanInternals=function(e,t,r,i,o){return function(a,s){var l=r,u=t,c=0;a.subscribe(n.createOperatorSubscriber(s,function(t){var r=c++;u=l?e(u,t,r):(l=!0,t),i&&s.next(u)},o&&function(){l&&s.next(u),s.complete()}))}}},73826:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sequenceEqual=void 0;var n=r(40141),i=r(81188),o=r(55684);function a(){return{buffer:[],complete:!1}}t.sequenceEqual=function(e,t){return void 0===t&&(t=function(e,t){return e===t}),n.operate(function(r,n){var s=a(),l=a(),u=function(e){n.next(e),n.complete()},c=function(e,r){var o=i.createOperatorSubscriber(n,function(n){var i=r.buffer,o=r.complete;0===i.length?o?u(!1):e.buffer.push(n):t(n,i.shift())||u(!1)},function(){e.complete=!0;var t=r.complete,n=r.buffer;t&&u(0===n.length),null==o||o.unsubscribe()});return o};r.subscribe(c(s,l)),o.innerFrom(e).subscribe(c(l,s))})}},47756:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.share=void 0;var o=r(55684),a=r(25149),s=r(64901),l=r(40141);function u(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];if(!0===t){e();return}if(!1!==t){var l=new s.SafeSubscriber({next:function(){l.unsubscribe(),e()}});return o.innerFrom(t.apply(void 0,i([],n(r)))).subscribe(l)}}t.share=function(e){void 0===e&&(e={});var t=e.connector,r=void 0===t?function(){return new a.Subject}:t,n=e.resetOnError,i=void 0===n||n,c=e.resetOnComplete,p=void 0===c||c,d=e.resetOnRefCountZero,f=void 0===d||d;return function(e){var t,n,a,c=0,d=!1,h=!1,y=function(){null==n||n.unsubscribe(),n=void 0},m=function(){y(),t=a=void 0,d=h=!1},v=function(){var e=t;m(),null==e||e.unsubscribe()};return l.operate(function(e,l){c++,h||d||y();var g=a=null!=a?a:r();l.add(function(){0!=--c||h||d||(n=u(v,f))}),g.subscribe(l),!t&&c>0&&(t=new s.SafeSubscriber({next:function(e){return g.next(e)},error:function(e){h=!0,y(),n=u(m,i,e),g.error(e)},complete:function(){d=!0,y(),n=u(m,p),g.complete()}}),o.innerFrom(e).subscribe(t))})(e)}}},15521:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shareReplay=void 0;var n=r(5729),i=r(47756);t.shareReplay=function(e,t,r){var o,a,s,l,u=!1;return e&&"object"==typeof e?(l=void 0===(o=e.bufferSize)?1/0:o,t=void 0===(a=e.windowTime)?1/0:a,u=void 0!==(s=e.refCount)&&s,r=e.scheduler):l=null!=e?e:1/0,i.share({connector:function(){return new n.ReplaySubject(l,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}},73993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.single=void 0;var n=r(77668),i=r(80325),o=r(56073),a=r(40141),s=r(81188);t.single=function(e){return a.operate(function(t,r){var a,l=!1,u=!1,c=0;t.subscribe(s.createOperatorSubscriber(r,function(n){u=!0,(!e||e(n,c++,t))&&(l&&r.error(new i.SequenceError("Too many matching values")),l=!0,a=n)},function(){l?(r.next(a),r.complete()):r.error(u?new o.NotFoundError("No matching values"):new n.EmptyError)}))})}},61053:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skip=void 0;var n=r(14974);t.skip=function(e){return n.filter(function(t,r){return e<=r})}},75492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipLast=void 0;var n=r(95121),i=r(40141),o=r(81188);t.skipLast=function(e){return e<=0?n.identity:i.operate(function(t,r){var n=Array(e),i=0;return t.subscribe(o.createOperatorSubscriber(r,function(t){var o=i++;if(o<e)n[o]=t;else{var a=o%e,s=n[a];n[a]=t,r.next(s)}})),function(){n=null}})}},50087:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipUntil=void 0;var n=r(40141),i=r(81188),o=r(55684),a=r(60917);t.skipUntil=function(e){return n.operate(function(t,r){var n=!1,s=i.createOperatorSubscriber(r,function(){null==s||s.unsubscribe(),n=!0},a.noop);o.innerFrom(e).subscribe(s),t.subscribe(i.createOperatorSubscriber(r,function(e){return n&&r.next(e)}))})}},66971:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipWhile=void 0;var n=r(40141),i=r(81188);t.skipWhile=function(e){return n.operate(function(t,r){var n=!1,o=0;t.subscribe(i.createOperatorSubscriber(r,function(t){return(n||(n=!e(t,o++)))&&r.next(t)}))})}},56834:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startWith=void 0;var n=r(5672),i=r(82544),o=r(40141);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.popScheduler(e);return o.operate(function(t,i){(r?n.concat(e,t,r):n.concat(e,t)).subscribe(i)})}},54611:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeOn=void 0;var n=r(40141);t.subscribeOn=function(e,t){return void 0===t&&(t=0),n.operate(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}},20161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchAll=void 0;var n=r(65324),i=r(95121);t.switchAll=function(){return n.switchMap(i.identity)}},65324:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchMap=void 0;var n=r(55684),i=r(40141),o=r(81188);t.switchMap=function(e,t){return i.operate(function(r,i){var a=null,s=0,l=!1,u=function(){return l&&!a&&i.complete()};r.subscribe(o.createOperatorSubscriber(i,function(r){null==a||a.unsubscribe();var l=0,c=s++;n.innerFrom(e(r,c)).subscribe(a=o.createOperatorSubscriber(i,function(e){return i.next(t?t(r,e,c,l++):e)},function(){a=null,u()}))},function(){l=!0,u()}))})}},28246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchMapTo=void 0;var n=r(65324),i=r(86653);t.switchMapTo=function(e,t){return i.isFunction(t)?n.switchMap(function(){return e},t):n.switchMap(function(){return e})}},32436:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchScan=void 0;var n=r(65324),i=r(40141);t.switchScan=function(e,t){return i.operate(function(r,i){var o=t;return n.switchMap(function(t,r){return e(o,t,r)},function(e,t){return o=t,t})(r).subscribe(i),function(){o=null}})}},74181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.take=void 0;var n=r(54469),i=r(40141),o=r(81188);t.take=function(e){return e<=0?function(){return n.EMPTY}:i.operate(function(t,r){var n=0;t.subscribe(o.createOperatorSubscriber(r,function(t){++n<=e&&(r.next(t),e<=n&&r.complete())}))})}},59275:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.takeLast=void 0;var i=r(54469),o=r(40141),a=r(81188);t.takeLast=function(e){return e<=0?function(){return i.EMPTY}:o.operate(function(t,r){var i=[];t.subscribe(a.createOperatorSubscriber(r,function(t){i.push(t),e<i.length&&i.shift()},function(){var e,t;try{for(var o=n(i),a=o.next();!a.done;a=o.next()){var s=a.value;r.next(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}r.complete()},void 0,function(){i=null}))})}},83203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeUntil=void 0;var n=r(40141),i=r(81188),o=r(55684),a=r(60917);t.takeUntil=function(e){return n.operate(function(t,r){o.innerFrom(e).subscribe(i.createOperatorSubscriber(r,function(){return r.complete()},a.noop)),r.closed||t.subscribe(r)})}},40710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeWhile=void 0;var n=r(40141),i=r(81188);t.takeWhile=function(e,t){return void 0===t&&(t=!1),n.operate(function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,function(r){var i=e(r,o++);(i||t)&&n.next(r),i||n.complete()}))})}},19683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tap=void 0;var n=r(86653),i=r(40141),o=r(81188),a=r(95121);t.tap=function(e,t,r){var s=n.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return s?i.operate(function(e,t){null===(r=s.subscribe)||void 0===r||r.call(s);var r,n=!0;e.subscribe(o.createOperatorSubscriber(t,function(e){var r;null===(r=s.next)||void 0===r||r.call(s,e),t.next(e)},function(){var e;n=!1,null===(e=s.complete)||void 0===e||e.call(s),t.complete()},function(e){var r;n=!1,null===(r=s.error)||void 0===r||r.call(s,e),t.error(e)},function(){var e,t;n&&(null===(e=s.unsubscribe)||void 0===e||e.call(s)),null===(t=s.finalize)||void 0===t||t.call(s)}))}):a.identity}},71289:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=void 0;var n=r(40141),i=r(81188),o=r(55684);t.throttle=function(e,t){return n.operate(function(r,n){var a=null!=t?t:{},s=a.leading,l=void 0===s||s,u=a.trailing,c=void 0!==u&&u,p=!1,d=null,f=null,h=!1,y=function(){null==f||f.unsubscribe(),f=null,c&&(g(),h&&n.complete())},m=function(){f=null,h&&n.complete()},v=function(t){return f=o.innerFrom(e(t)).subscribe(i.createOperatorSubscriber(n,y,m))},g=function(){if(p){p=!1;var e=d;d=null,n.next(e),h||v(e)}};r.subscribe(i.createOperatorSubscriber(n,function(e){p=!0,d=e,f&&!f.closed||(l?g():v(e))},function(){h=!0,c&&p&&f&&!f.closed||n.complete()}))})}},96638:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttleTime=void 0;var n=r(54163),i=r(71289),o=r(66474);t.throttleTime=function(e,t,r){void 0===t&&(t=n.asyncScheduler);var a=o.timer(e,t);return i.throttle(function(){return a},r)}},97075:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwIfEmpty=void 0;var n=r(77668),i=r(40141),o=r(81188);function a(){return new n.EmptyError}t.throwIfEmpty=function(e){return void 0===e&&(e=a),i.operate(function(t,r){var n=!1;t.subscribe(o.createOperatorSubscriber(r,function(e){n=!0,r.next(e)},function(){return n?r.complete():r.error(e())}))})}},28419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeInterval=t.timeInterval=void 0;var n=r(54163),i=r(40141),o=r(81188);t.timeInterval=function(e){return void 0===e&&(e=n.asyncScheduler),i.operate(function(t,r){var n=e.now();t.subscribe(o.createOperatorSubscriber(r,function(t){var i=e.now(),o=i-n;n=i,r.next(new a(t,o))}))})};var a=function(e,t){this.value=e,this.interval=t};t.TimeInterval=a},73458:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeout=t.TimeoutError=void 0;var n=r(54163),i=r(89808),o=r(40141),a=r(55684),s=r(8607),l=r(81188),u=r(29870);function c(e){throw new t.TimeoutError(e)}t.TimeoutError=s.createErrorClass(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}),t.timeout=function(e,t){var r=i.isValidDate(e)?{first:e}:"number"==typeof e?{each:e}:e,s=r.first,p=r.each,d=r.with,f=void 0===d?c:d,h=r.scheduler,y=void 0===h?null!=t?t:n.asyncScheduler:h,m=r.meta,v=void 0===m?null:m;if(null==s&&null==p)throw TypeError("No timeout provided.");return o.operate(function(e,t){var r,n,i=null,o=0,c=function(e){n=u.executeSchedule(t,y,function(){try{r.unsubscribe(),a.innerFrom(f({meta:v,lastValue:i,seen:o})).subscribe(t)}catch(e){t.error(e)}},e)};r=e.subscribe(l.createOperatorSubscriber(t,function(e){null==n||n.unsubscribe(),o++,t.next(i=e),p>0&&c(p)},void 0,void 0,function(){(null==n?void 0:n.closed)||null==n||n.unsubscribe(),i=null})),o||c(null!=s?"number"==typeof s?s:+s-y.now():p)})}},4020:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutWith=void 0;var n=r(54163),i=r(89808),o=r(73458);t.timeoutWith=function(e,t,r){var a,s,l;if(r=null!=r?r:n.async,i.isValidDate(e)?a=e:"number"==typeof e&&(s=e),t)l=function(){return t};else throw TypeError("No observable provided to switch to");if(null==a&&null==s)throw TypeError("No timeout provided.");return o.timeout({first:a,each:s,scheduler:r,with:l})}},26279:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestamp=void 0;var n=r(38592),i=r(95259);t.timestamp=function(e){return void 0===e&&(e=n.dateTimestampProvider),i.map(function(t){return{value:t,timestamp:e.now()}})}},90562:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=void 0;var n=r(48916),i=r(40141),o=function(e,t){return e.push(t),e};t.toArray=function(){return i.operate(function(e,t){n.reduce(o,[])(e).subscribe(t)})}},47506:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.window=void 0;var n=r(25149),i=r(40141),o=r(81188),a=r(60917),s=r(55684);t.window=function(e){return i.operate(function(t,r){var i=new n.Subject;r.next(i.asObservable());var l=function(e){i.error(e),r.error(e)};return t.subscribe(o.createOperatorSubscriber(r,function(e){return null==i?void 0:i.next(e)},function(){i.complete(),r.complete()},l)),s.innerFrom(e).subscribe(o.createOperatorSubscriber(r,function(){i.complete(),r.next(i=new n.Subject)},a.noop,l)),function(){null==i||i.unsubscribe(),i=null}})}},1909:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.windowCount=void 0;var i=r(25149),o=r(40141),a=r(81188);t.windowCount=function(e,t){void 0===t&&(t=0);var r=t>0?t:e;return o.operate(function(t,o){var s=[new i.Subject],l=0;o.next(s[0].asObservable()),t.subscribe(a.createOperatorSubscriber(o,function(t){try{for(var a,u,c=n(s),p=c.next();!p.done;p=c.next())p.value.next(t)}catch(e){a={error:e}}finally{try{p&&!p.done&&(u=c.return)&&u.call(c)}finally{if(a)throw a.error}}var d=l-e+1;if(d>=0&&d%r==0&&s.shift().complete(),++l%r==0){var f=new i.Subject;s.push(f),o.next(f.asObservable())}},function(){for(;s.length>0;)s.shift().complete();o.complete()},function(e){for(;s.length>0;)s.shift().error(e);o.error(e)},function(){s=null}))})}},74572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowTime=void 0;var n=r(25149),i=r(54163),o=r(8122),a=r(40141),s=r(81188),l=r(8500),u=r(82544),c=r(29870);t.windowTime=function(e){for(var t,r,p=[],d=1;d<arguments.length;d++)p[d-1]=arguments[d];var f=null!==(t=u.popScheduler(p))&&void 0!==t?t:i.asyncScheduler,h=null!==(r=p[0])&&void 0!==r?r:null,y=p[1]||1/0;return a.operate(function(t,r){var i=[],a=!1,u=function(e){var t=e.window,r=e.subs;t.complete(),r.unsubscribe(),l.arrRemove(i,e),a&&p()},p=function(){if(i){var t=new o.Subscription;r.add(t);var a=new n.Subject,s={window:a,subs:t,seen:0};i.push(s),r.next(a.asObservable()),c.executeSchedule(t,f,function(){return u(s)},e)}};null!==h&&h>=0?c.executeSchedule(r,f,p,h,!0):a=!0,p();var d=function(e){return i.slice().forEach(e)},m=function(e){d(function(t){return e(t.window)}),e(r),r.unsubscribe()};return t.subscribe(s.createOperatorSubscriber(r,function(e){d(function(t){t.window.next(e),y<=++t.seen&&u(t)})},function(){return m(function(e){return e.complete()})},function(e){return m(function(t){return t.error(e)})})),function(){i=null}})}},25512:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.windowToggle=void 0;var i=r(25149),o=r(8122),a=r(40141),s=r(55684),l=r(81188),u=r(60917),c=r(8500);t.windowToggle=function(e,t){return a.operate(function(r,a){var p=[],d=function(e){for(;0<p.length;)p.shift().error(e);a.error(e)};s.innerFrom(e).subscribe(l.createOperatorSubscriber(a,function(e){var r,n=new i.Subject;p.push(n);var f=new o.Subscription;try{r=s.innerFrom(t(e))}catch(e){d(e);return}a.next(n.asObservable()),f.add(r.subscribe(l.createOperatorSubscriber(a,function(){c.arrRemove(p,n),n.complete(),f.unsubscribe()},u.noop,d)))},u.noop)),r.subscribe(l.createOperatorSubscriber(a,function(e){var t,r,i=p.slice();try{for(var o=n(i),a=o.next();!a.done;a=o.next())a.value.next(e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},function(){for(;0<p.length;)p.shift().complete();a.complete()},d,function(){for(;0<p.length;)p.shift().unsubscribe()}))})}},41058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowWhen=void 0;var n=r(25149),i=r(40141),o=r(81188),a=r(55684);t.windowWhen=function(e){return i.operate(function(t,r){var i,s,l=function(e){i.error(e),r.error(e)},u=function(){var t;null==s||s.unsubscribe(),null==i||i.complete(),i=new n.Subject,r.next(i.asObservable());try{t=a.innerFrom(e())}catch(e){l(e);return}t.subscribe(s=o.createOperatorSubscriber(r,u,u,l))};u(),t.subscribe(o.createOperatorSubscriber(r,function(e){return i.next(e)},function(){i.complete(),r.complete()},l,function(){null==s||s.unsubscribe(),i=null}))})}},69362:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.withLatestFrom=void 0;var o=r(40141),a=r(81188),s=r(55684),l=r(95121),u=r(60917),c=r(82544);t.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=c.popResultSelector(e);return o.operate(function(t,o){for(var c=e.length,p=Array(c),d=e.map(function(){return!1}),f=!1,h=function(t){s.innerFrom(e[t]).subscribe(a.createOperatorSubscriber(o,function(e){p[t]=e,!f&&!d[t]&&(d[t]=!0,(f=d.every(l.identity))&&(d=null))},u.noop))},y=0;y<c;y++)h(y);t.subscribe(a.createOperatorSubscriber(o,function(e){if(f){var t=i([e],n(p));o.next(r?r.apply(void 0,i([],n(t))):t)}}))})}},72247:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zip=void 0;var o=r(41452),a=r(40141);t.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.operate(function(t,r){o.zip.apply(void 0,i([t],n(e))).subscribe(r)})}},20823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zipAll=void 0;var n=r(41452),i=r(45471);t.zipAll=function(e){return i.joinAllInternals(n.zip,e)}},38153:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zipWith=void 0;var o=r(72247);t.zipWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.zip.apply(void 0,i([],n(e)))}},1556:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleArray=void 0;var n=r(19505);t.scheduleArray=function(e,t){return new n.Observable(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}},49437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleAsyncIterable=void 0;var n=r(19505),i=r(29870);t.scheduleAsyncIterable=function(e,t){if(!e)throw Error("Iterable cannot be null");return new n.Observable(function(r){i.executeSchedule(r,t,function(){var n=e[Symbol.asyncIterator]();i.executeSchedule(r,t,function(){n.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}},17433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleIterable=void 0;var n=r(19505),i=r(41807),o=r(86653),a=r(29870);t.scheduleIterable=function(e,t){return new n.Observable(function(r){var n;return a.executeSchedule(r,t,function(){n=e[i.iterator](),a.executeSchedule(r,t,function(){var e,t,i;try{t=(e=n.next()).value,i=e.done}catch(e){r.error(e);return}i?r.complete():r.next(t)},0,!0)}),function(){return o.isFunction(null==n?void 0:n.return)&&n.return()}})}},79189:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleObservable=void 0;var n=r(55684),i=r(36791),o=r(54611);t.scheduleObservable=function(e,t){return n.innerFrom(e).pipe(o.subscribeOn(t),i.observeOn(t))}},33755:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.schedulePromise=void 0;var n=r(55684),i=r(36791),o=r(54611);t.schedulePromise=function(e,t){return n.innerFrom(e).pipe(o.subscribeOn(t),i.observeOn(t))}},83170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleReadableStreamLike=void 0;var n=r(49437),i=r(11012);t.scheduleReadableStreamLike=function(e,t){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(e),t)}},20633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduled=void 0;var n=r(79189),i=r(33755),o=r(1556),a=r(17433),s=r(49437),l=r(87472),u=r(1583),c=r(92895),p=r(89926),d=r(75380),f=r(27132),h=r(11012),y=r(83170);t.scheduled=function(e,t){if(null!=e){if(l.isInteropObservable(e))return n.scheduleObservable(e,t);if(c.isArrayLike(e))return o.scheduleArray(e,t);if(u.isPromise(e))return i.schedulePromise(e,t);if(d.isAsyncIterable(e))return s.scheduleAsyncIterable(e,t);if(p.isIterable(e))return a.scheduleIterable(e,t);if(h.isReadableStreamLike(e))return y.scheduleReadableStreamLike(e,t)}throw f.createInvalidObservableTypeError(e)}},85146:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;var i=function(e){function t(t,r){return e.call(this)||this}return n(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r(8122).Subscription);t.Action=i},14285:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncAction=void 0;var i=r(85146),o=r(40883),a=r(8500),s=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return n(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r,n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),o.intervalProvider.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&o.intervalProvider.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,a.arrRemove(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(i.Action);t.AsyncAction=s},40923:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScheduler=void 0;var i=r(96976),o=function(e){function t(t,r){void 0===r&&(r=i.Scheduler.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return n(t,e),t.prototype.flush=function(e){var t,r=this.actions;if(this._active){r.push(e);return}this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=r.shift());if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}},t}(i.Scheduler);t.AsyncScheduler=o},54163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.async=t.asyncScheduler=void 0;var n=r(14285),i=r(40923);t.asyncScheduler=new i.AsyncScheduler(n.AsyncAction),t.async=t.asyncScheduler},38592:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateTimestampProvider=void 0,t.dateTimestampProvider={now:function(){return(t.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},40883:(e,t)=>{"use strict";var r=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},n=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.intervalProvider=void 0,t.intervalProvider={setInterval:function(e,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=t.intervalProvider.delegate;return(null==s?void 0:s.setInterval)?s.setInterval.apply(s,n([e,i],r(o))):setInterval.apply(void 0,n([e,i],r(o)))},clearInterval:function(e){var r=t.intervalProvider.delegate;return((null==r?void 0:r.clearInterval)||clearInterval)(e)},delegate:void 0}},14138:(e,t)=>{"use strict";var r=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},n=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutProvider=void 0,t.timeoutProvider={setTimeout:function(e,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=t.timeoutProvider.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,n([e,i],r(o))):setTimeout.apply(void 0,n([e,i],r(o)))},clearTimeout:function(e){var r=t.timeoutProvider.delegate;return((null==r?void 0:r.clearTimeout)||clearTimeout)(e)},delegate:void 0}},41807:(e,t)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(t,"__esModule",{value:!0}),t.iterator=t.getSymbolIterator=void 0,t.getSymbolIterator=r,t.iterator=r()},97199:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observable=void 0,t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},56338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentOutOfRangeError=void 0;var n=r(8607);t.ArgumentOutOfRangeError=n.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},77668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyError=void 0;var n=r(8607);t.EmptyError=n.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}})},56073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundError=void 0;var n=r(8607);t.NotFoundError=n.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}})},40747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectUnsubscribedError=void 0;var n=r(8607);t.ObjectUnsubscribedError=n.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},80325:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceError=void 0;var n=r(8607);t.SequenceError=n.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}})},23376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsubscriptionError=void 0;var n=r(8607);t.UnsubscriptionError=n.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}})},82544:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.popNumber=t.popScheduler=t.popResultSelector=void 0;var n=r(86653),i=r(26941);function o(e){return e[e.length-1]}t.popResultSelector=function(e){return n.isFunction(o(e))?e.pop():void 0},t.popScheduler=function(e){return i.isScheduler(o(e))?e.pop():void 0},t.popNumber=function(e,t){return"number"==typeof o(e)?e.pop():t}},8359:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.argsArgArrayOrObject=void 0;var r=Array.isArray,n=Object.getPrototypeOf,i=Object.prototype,o=Object.keys;t.argsArgArrayOrObject=function(e){if(1===e.length){var t=e[0];if(r(t))return{args:t,keys:null};if(t&&"object"==typeof t&&n(t)===i){var a=o(t);return{args:a.map(function(e){return t[e]}),keys:a}}}return{args:e,keys:null}}},87603:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.argsOrArgArray=void 0;var r=Array.isArray;t.argsOrArgArray=function(e){return 1===e.length&&r(e[0])?e[0]:e}},8500:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrRemove=void 0,t.arrRemove=function(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}},8607:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createErrorClass=void 0,t.createErrorClass=function(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}},57448:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createObject=void 0,t.createObject=function(e,t){return e.reduce(function(e,r,n){return e[r]=t[n],e},{})}},3078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.captureError=t.errorContext=void 0;var n=r(76830),i=null;t.errorContext=function(e){if(n.config.useDeprecatedSynchronousErrorHandling){var t=!i;if(t&&(i={errorThrown:!1,error:null}),e(),t){var r=i,o=r.errorThrown,a=r.error;if(i=null,o)throw a}}else e()},t.captureError=function(e){n.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=e)}},29870:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeSchedule=void 0,t.executeSchedule=function(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var o=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}},95121:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=void 0,t.identity=function(e){return e}},92895:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArrayLike=void 0,t.isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},75380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=void 0;var n=r(86653);t.isAsyncIterable=function(e){return Symbol.asyncIterator&&n.isFunction(null==e?void 0:e[Symbol.asyncIterator])}},89808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidDate=void 0,t.isValidDate=function(e){return e instanceof Date&&!isNaN(e)}},86653:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=void 0,t.isFunction=function(e){return"function"==typeof e}},87472:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInteropObservable=void 0;var n=r(97199),i=r(86653);t.isInteropObservable=function(e){return i.isFunction(e[n.observable])}},89926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIterable=void 0;var n=r(41807),i=r(86653);t.isIterable=function(e){return i.isFunction(null==e?void 0:e[n.iterator])}},1583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=void 0;var n=r(86653);t.isPromise=function(e){return n.isFunction(null==e?void 0:e.then)}},11012:(e,t,r)=>{"use strict";var n=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=function(e){return this instanceof i?(this.v=e,this):new i(e)},o=function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise(function(r,n){a.push([e,t,r,n])>1||l(e,t)})})}function l(e,t){try{var r;(r=o[e](t)).value instanceof i?Promise.resolve(r.value.v).then(u,c):p(a[0][2],r)}catch(e){p(a[0][3],e)}}function u(e){l("next",e)}function c(e){l("throw",e)}function p(e,t){e(t),a.shift(),a.length&&l(a[0][0],a[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.isReadableStreamLike=t.readableStreamLikeToAsyncGenerator=void 0;var a=r(86653);t.readableStreamLikeToAsyncGenerator=function(e){return o(this,arguments,function(){var t,r,o;return n(this,function(n){switch(n.label){case 0:t=e.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,i(t.read())];case 3:if(o=(r=n.sent()).value,!r.done)return[3,5];return[4,i(void 0)];case 4:return[2,n.sent()];case 5:return[4,i(o)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})},t.isReadableStreamLike=function(e){return a.isFunction(null==e?void 0:e.getReader)}},26941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduler=void 0;var n=r(86653);t.isScheduler=function(e){return e&&n.isFunction(e.schedule)}},40141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operate=t.hasLift=void 0;var n=r(86653);function i(e){return n.isFunction(null==e?void 0:e.lift)}t.hasLift=i,t.operate=function(e){return function(t){if(i(t))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}},36383:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},i=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.mapOneOrManyArgs=void 0;var o=r(95259),a=Array.isArray;t.mapOneOrManyArgs=function(e){return o.map(function(t){return a(t)?e.apply(void 0,i([],n(t))):e(t)})}},60917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=void 0,t.noop=function(){}},34725:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.not=void 0,t.not=function(e,t){return function(r,n){return!e.call(t,r,n)}}},81698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipeFromArray=t.pipe=void 0;var n=r(95121);function i(e){return 0===e.length?n.identity:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(e)},t.pipeFromArray=i},56066:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportUnhandledError=void 0;var n=r(76830),i=r(14138);t.reportUnhandledError=function(e){i.timeoutProvider.setTimeout(function(){var t=n.config.onUnhandledError;if(t)t(e);else throw e})}},27132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInvalidObservableTypeError=void 0,t.createInvalidObservableTypeError=function(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},3105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAll=t.merge=t.max=t.materialize=t.mapTo=t.map=t.last=t.isEmpty=t.ignoreElements=t.groupBy=t.first=t.findIndex=t.find=t.finalize=t.filter=t.expand=t.exhaustMap=t.exhaustAll=t.exhaust=t.every=t.endWith=t.elementAt=t.distinctUntilKeyChanged=t.distinctUntilChanged=t.distinct=t.dematerialize=t.delayWhen=t.delay=t.defaultIfEmpty=t.debounceTime=t.debounce=t.count=t.connect=t.concatWith=t.concatMapTo=t.concatMap=t.concatAll=t.concat=t.combineLatestWith=t.combineLatest=t.combineLatestAll=t.combineAll=t.catchError=t.bufferWhen=t.bufferToggle=t.bufferTime=t.bufferCount=t.buffer=t.auditTime=t.audit=void 0,t.timeInterval=t.throwIfEmpty=t.throttleTime=t.throttle=t.tap=t.takeWhile=t.takeUntil=t.takeLast=t.take=t.switchScan=t.switchMapTo=t.switchMap=t.switchAll=t.subscribeOn=t.startWith=t.skipWhile=t.skipUntil=t.skipLast=t.skip=t.single=t.shareReplay=t.share=t.sequenceEqual=t.scan=t.sampleTime=t.sample=t.refCount=t.retryWhen=t.retry=t.repeatWhen=t.repeat=t.reduce=t.raceWith=t.race=t.publishReplay=t.publishLast=t.publishBehavior=t.publish=t.pluck=t.partition=t.pairwise=t.onErrorResumeNext=t.observeOn=t.multicast=t.min=t.mergeWith=t.mergeScan=t.mergeMapTo=t.mergeMap=t.flatMap=void 0,t.zipWith=t.zipAll=t.zip=t.withLatestFrom=t.windowWhen=t.windowToggle=t.windowTime=t.windowCount=t.window=t.toArray=t.timestamp=t.timeoutWith=t.timeout=void 0;var n=r(93979);Object.defineProperty(t,"audit",{enumerable:!0,get:function(){return n.audit}});var i=r(37723);Object.defineProperty(t,"auditTime",{enumerable:!0,get:function(){return i.auditTime}});var o=r(58921);Object.defineProperty(t,"buffer",{enumerable:!0,get:function(){return o.buffer}});var a=r(25176);Object.defineProperty(t,"bufferCount",{enumerable:!0,get:function(){return a.bufferCount}});var s=r(86822);Object.defineProperty(t,"bufferTime",{enumerable:!0,get:function(){return s.bufferTime}});var l=r(13291);Object.defineProperty(t,"bufferToggle",{enumerable:!0,get:function(){return l.bufferToggle}});var u=r(61514);Object.defineProperty(t,"bufferWhen",{enumerable:!0,get:function(){return u.bufferWhen}});var c=r(53850);Object.defineProperty(t,"catchError",{enumerable:!0,get:function(){return c.catchError}});var p=r(9805);Object.defineProperty(t,"combineAll",{enumerable:!0,get:function(){return p.combineAll}});var d=r(69102);Object.defineProperty(t,"combineLatestAll",{enumerable:!0,get:function(){return d.combineLatestAll}});var f=r(40510);Object.defineProperty(t,"combineLatest",{enumerable:!0,get:function(){return f.combineLatest}});var h=r(20317);Object.defineProperty(t,"combineLatestWith",{enumerable:!0,get:function(){return h.combineLatestWith}});var y=r(18132);Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return y.concat}});var m=r(74788);Object.defineProperty(t,"concatAll",{enumerable:!0,get:function(){return m.concatAll}});var v=r(63875);Object.defineProperty(t,"concatMap",{enumerable:!0,get:function(){return v.concatMap}});var g=r(60286);Object.defineProperty(t,"concatMapTo",{enumerable:!0,get:function(){return g.concatMapTo}});var b=r(15678);Object.defineProperty(t,"concatWith",{enumerable:!0,get:function(){return b.concatWith}});var _=r(80369);Object.defineProperty(t,"connect",{enumerable:!0,get:function(){return _.connect}});var T=r(61786);Object.defineProperty(t,"count",{enumerable:!0,get:function(){return T.count}});var E=r(92031);Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return E.debounce}});var O=r(32202);Object.defineProperty(t,"debounceTime",{enumerable:!0,get:function(){return O.debounceTime}});var S=r(75907);Object.defineProperty(t,"defaultIfEmpty",{enumerable:!0,get:function(){return S.defaultIfEmpty}});var w=r(51182);Object.defineProperty(t,"delay",{enumerable:!0,get:function(){return w.delay}});var I=r(33506);Object.defineProperty(t,"delayWhen",{enumerable:!0,get:function(){return I.delayWhen}});var N=r(74757);Object.defineProperty(t,"dematerialize",{enumerable:!0,get:function(){return N.dematerialize}});var A=r(97068);Object.defineProperty(t,"distinct",{enumerable:!0,get:function(){return A.distinct}});var C=r(19530);Object.defineProperty(t,"distinctUntilChanged",{enumerable:!0,get:function(){return C.distinctUntilChanged}});var P=r(62602);Object.defineProperty(t,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return P.distinctUntilKeyChanged}});var R=r(46672);Object.defineProperty(t,"elementAt",{enumerable:!0,get:function(){return R.elementAt}});var D=r(69436);Object.defineProperty(t,"endWith",{enumerable:!0,get:function(){return D.endWith}});var F=r(75282);Object.defineProperty(t,"every",{enumerable:!0,get:function(){return F.every}});var j=r(17287);Object.defineProperty(t,"exhaust",{enumerable:!0,get:function(){return j.exhaust}});var L=r(96741);Object.defineProperty(t,"exhaustAll",{enumerable:!0,get:function(){return L.exhaustAll}});var x=r(40476);Object.defineProperty(t,"exhaustMap",{enumerable:!0,get:function(){return x.exhaustMap}});var M=r(50464);Object.defineProperty(t,"expand",{enumerable:!0,get:function(){return M.expand}});var k=r(14974);Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return k.filter}});var $=r(62321);Object.defineProperty(t,"finalize",{enumerable:!0,get:function(){return $.finalize}});var U=r(56398);Object.defineProperty(t,"find",{enumerable:!0,get:function(){return U.find}});var V=r(17461);Object.defineProperty(t,"findIndex",{enumerable:!0,get:function(){return V.findIndex}});var G=r(90653);Object.defineProperty(t,"first",{enumerable:!0,get:function(){return G.first}});var q=r(35939);Object.defineProperty(t,"groupBy",{enumerable:!0,get:function(){return q.groupBy}});var B=r(80078);Object.defineProperty(t,"ignoreElements",{enumerable:!0,get:function(){return B.ignoreElements}});var W=r(9733);Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return W.isEmpty}});var H=r(23582);Object.defineProperty(t,"last",{enumerable:!0,get:function(){return H.last}});var Q=r(95259);Object.defineProperty(t,"map",{enumerable:!0,get:function(){return Q.map}});var K=r(51886);Object.defineProperty(t,"mapTo",{enumerable:!0,get:function(){return K.mapTo}});var z=r(61529);Object.defineProperty(t,"materialize",{enumerable:!0,get:function(){return z.materialize}});var Y=r(93060);Object.defineProperty(t,"max",{enumerable:!0,get:function(){return Y.max}});var J=r(4489);Object.defineProperty(t,"merge",{enumerable:!0,get:function(){return J.merge}});var X=r(30375);Object.defineProperty(t,"mergeAll",{enumerable:!0,get:function(){return X.mergeAll}});var Z=r(94362);Object.defineProperty(t,"flatMap",{enumerable:!0,get:function(){return Z.flatMap}});var ee=r(66271);Object.defineProperty(t,"mergeMap",{enumerable:!0,get:function(){return ee.mergeMap}});var et=r(45848);Object.defineProperty(t,"mergeMapTo",{enumerable:!0,get:function(){return et.mergeMapTo}});var er=r(50147);Object.defineProperty(t,"mergeScan",{enumerable:!0,get:function(){return er.mergeScan}});var en=r(84535);Object.defineProperty(t,"mergeWith",{enumerable:!0,get:function(){return en.mergeWith}});var ei=r(75547);Object.defineProperty(t,"min",{enumerable:!0,get:function(){return ei.min}});var eo=r(58404);Object.defineProperty(t,"multicast",{enumerable:!0,get:function(){return eo.multicast}});var ea=r(36791);Object.defineProperty(t,"observeOn",{enumerable:!0,get:function(){return ea.observeOn}});var es=r(84708);Object.defineProperty(t,"onErrorResumeNext",{enumerable:!0,get:function(){return es.onErrorResumeNext}});var el=r(9938);Object.defineProperty(t,"pairwise",{enumerable:!0,get:function(){return el.pairwise}});var eu=r(13907);Object.defineProperty(t,"partition",{enumerable:!0,get:function(){return eu.partition}});var ec=r(43836);Object.defineProperty(t,"pluck",{enumerable:!0,get:function(){return ec.pluck}});var ep=r(98254);Object.defineProperty(t,"publish",{enumerable:!0,get:function(){return ep.publish}});var ed=r(14610);Object.defineProperty(t,"publishBehavior",{enumerable:!0,get:function(){return ed.publishBehavior}});var ef=r(19442);Object.defineProperty(t,"publishLast",{enumerable:!0,get:function(){return ef.publishLast}});var eh=r(6959);Object.defineProperty(t,"publishReplay",{enumerable:!0,get:function(){return eh.publishReplay}});var ey=r(60820);Object.defineProperty(t,"race",{enumerable:!0,get:function(){return ey.race}});var em=r(70872);Object.defineProperty(t,"raceWith",{enumerable:!0,get:function(){return em.raceWith}});var ev=r(48916);Object.defineProperty(t,"reduce",{enumerable:!0,get:function(){return ev.reduce}});var eg=r(16922);Object.defineProperty(t,"repeat",{enumerable:!0,get:function(){return eg.repeat}});var eb=r(24304);Object.defineProperty(t,"repeatWhen",{enumerable:!0,get:function(){return eb.repeatWhen}});var e_=r(88185);Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return e_.retry}});var eT=r(44492);Object.defineProperty(t,"retryWhen",{enumerable:!0,get:function(){return eT.retryWhen}});var eE=r(92140);Object.defineProperty(t,"refCount",{enumerable:!0,get:function(){return eE.refCount}});var eO=r(82726);Object.defineProperty(t,"sample",{enumerable:!0,get:function(){return eO.sample}});var eS=r(88886);Object.defineProperty(t,"sampleTime",{enumerable:!0,get:function(){return eS.sampleTime}});var ew=r(16484);Object.defineProperty(t,"scan",{enumerable:!0,get:function(){return ew.scan}});var eI=r(73826);Object.defineProperty(t,"sequenceEqual",{enumerable:!0,get:function(){return eI.sequenceEqual}});var eN=r(47756);Object.defineProperty(t,"share",{enumerable:!0,get:function(){return eN.share}});var eA=r(15521);Object.defineProperty(t,"shareReplay",{enumerable:!0,get:function(){return eA.shareReplay}});var eC=r(73993);Object.defineProperty(t,"single",{enumerable:!0,get:function(){return eC.single}});var eP=r(61053);Object.defineProperty(t,"skip",{enumerable:!0,get:function(){return eP.skip}});var eR=r(75492);Object.defineProperty(t,"skipLast",{enumerable:!0,get:function(){return eR.skipLast}});var eD=r(50087);Object.defineProperty(t,"skipUntil",{enumerable:!0,get:function(){return eD.skipUntil}});var eF=r(66971);Object.defineProperty(t,"skipWhile",{enumerable:!0,get:function(){return eF.skipWhile}});var ej=r(56834);Object.defineProperty(t,"startWith",{enumerable:!0,get:function(){return ej.startWith}});var eL=r(54611);Object.defineProperty(t,"subscribeOn",{enumerable:!0,get:function(){return eL.subscribeOn}});var ex=r(20161);Object.defineProperty(t,"switchAll",{enumerable:!0,get:function(){return ex.switchAll}});var eM=r(65324);Object.defineProperty(t,"switchMap",{enumerable:!0,get:function(){return eM.switchMap}});var ek=r(28246);Object.defineProperty(t,"switchMapTo",{enumerable:!0,get:function(){return ek.switchMapTo}});var e$=r(32436);Object.defineProperty(t,"switchScan",{enumerable:!0,get:function(){return e$.switchScan}});var eU=r(74181);Object.defineProperty(t,"take",{enumerable:!0,get:function(){return eU.take}});var eV=r(59275);Object.defineProperty(t,"takeLast",{enumerable:!0,get:function(){return eV.takeLast}});var eG=r(83203);Object.defineProperty(t,"takeUntil",{enumerable:!0,get:function(){return eG.takeUntil}});var eq=r(40710);Object.defineProperty(t,"takeWhile",{enumerable:!0,get:function(){return eq.takeWhile}});var eB=r(19683);Object.defineProperty(t,"tap",{enumerable:!0,get:function(){return eB.tap}});var eW=r(71289);Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return eW.throttle}});var eH=r(96638);Object.defineProperty(t,"throttleTime",{enumerable:!0,get:function(){return eH.throttleTime}});var eQ=r(97075);Object.defineProperty(t,"throwIfEmpty",{enumerable:!0,get:function(){return eQ.throwIfEmpty}});var eK=r(28419);Object.defineProperty(t,"timeInterval",{enumerable:!0,get:function(){return eK.timeInterval}});var ez=r(73458);Object.defineProperty(t,"timeout",{enumerable:!0,get:function(){return ez.timeout}});var eY=r(4020);Object.defineProperty(t,"timeoutWith",{enumerable:!0,get:function(){return eY.timeoutWith}});var eJ=r(26279);Object.defineProperty(t,"timestamp",{enumerable:!0,get:function(){return eJ.timestamp}});var eX=r(90562);Object.defineProperty(t,"toArray",{enumerable:!0,get:function(){return eX.toArray}});var eZ=r(47506);Object.defineProperty(t,"window",{enumerable:!0,get:function(){return eZ.window}});var e0=r(1909);Object.defineProperty(t,"windowCount",{enumerable:!0,get:function(){return e0.windowCount}});var e1=r(74572);Object.defineProperty(t,"windowTime",{enumerable:!0,get:function(){return e1.windowTime}});var e2=r(25512);Object.defineProperty(t,"windowToggle",{enumerable:!0,get:function(){return e2.windowToggle}});var e4=r(41058);Object.defineProperty(t,"windowWhen",{enumerable:!0,get:function(){return e4.windowWhen}});var e3=r(69362);Object.defineProperty(t,"withLatestFrom",{enumerable:!0,get:function(){return e3.withLatestFrom}});var e5=r(72247);Object.defineProperty(t,"zip",{enumerable:!0,get:function(){return e5.zip}});var e8=r(20823);Object.defineProperty(t,"zipAll",{enumerable:!0,get:function(){return e8.zipAll}});var e6=r(38153);Object.defineProperty(t,"zipWith",{enumerable:!0,get:function(){return e6.zipWith}})},93156:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ArgumentOutOfRangeError:()=>e4,AsyncSubject:()=>Z,BehaviorSubject:()=>Y,ConnectableObservable:()=>V,EMPTY:()=>ew,EmptyError:()=>e0,NEVER:()=>tD,NotFoundError:()=>e3,Notification:()=>eJ,NotificationKind:()=>i,ObjectUnsubscribedError:()=>Q,Observable:()=>j,ReplaySubject:()=>X,Scheduler:()=>ep,SequenceError:()=>e5,Subject:()=>K,Subscriber:()=>E,Subscription:()=>c,TimeoutError:()=>e6,UnsubscriptionError:()=>l,VirtualAction:()=>eS,VirtualTimeScheduler:()=>eO,animationFrame:()=>eE,animationFrameScheduler:()=>eT,animationFrames:()=>B,asap:()=>eh,asapScheduler:()=>ef,async:()=>em,asyncScheduler:()=>ey,audit:()=>tW,auditTime:()=>tH,bindCallback:()=>ti,bindNodeCallback:()=>to,buffer:()=>tQ,bufferCount:()=>tK,bufferTime:()=>tz,bufferToggle:()=>tY,bufferWhen:()=>tJ,catchError:()=>function e(t){return M(function(r,n){var i,o=null,a=!1;o=r.subscribe(k(n,void 0,void 0,function(s){i=eU(t(s,e(t)(r))),o?(o.unsubscribe(),o=null,i.subscribe(n)):a=!0})),a&&(o.unsubscribe(),o=null,i.subscribe(n))})},combineAll:()=>t3,combineLatest:()=>td,combineLatestAll:()=>t4,combineLatestWith:()=>t8,concat:()=>tg,concatAll:()=>tv,concatMap:()=>t6,concatMapTo:()=>t7,concatWith:()=>re,config:()=>h,connect:()=>rr,connectable:()=>tT,count:()=>rn,debounce:()=>ri,debounceTime:()=>ro,defaultIfEmpty:()=>ra,defer:()=>tb,delay:()=>rp,delayWhen:()=>rc,dematerialize:()=>rd,distinct:()=>rf,distinctUntilChanged:()=>rh,distinctUntilKeyChanged:()=>rm,elementAt:()=>rb,empty:()=>eI,endWith:()=>r_,every:()=>rT,exhaust:()=>rS,exhaustAll:()=>rO,exhaustMap:()=>rE,expand:()=>rw,filter:()=>tk,finalize:()=>rI,find:()=>rN,findIndex:()=>rC,first:()=>rP,firstValueFrom:()=>e2,flatMap:()=>rM,forkJoin:()=>tE,from:()=>eK,fromEvent:()=>function e(t,r,n,i){if(a(n)&&(i=n,n=void 0),i)return e(t,r,n).pipe(tr(i));var s=(0,o.__read)(a(t.addEventListener)&&a(t.removeEventListener)?tS.map(function(e){return function(i){return t[e](r,i,n)}}):a(t.addListener)&&a(t.removeListener)?tO.map(tI(t,r)):a(t.on)&&a(t.off)?tw.map(tI(t,r)):[],2),l=s[0],u=s[1];if(!l&&eD(t))return ty(function(t){return e(t,r,n)})(eU(t));if(!l)throw TypeError("Invalid event target");return new j(function(e){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1<t.length?t:t[0])};return l(t),function(){return u(t)}})},fromEventPattern:()=>function e(t,r,n){return n?e(t,r).pipe(tr(n)):new j(function(e){var n=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1===t.length?t[0]:t)},i=t(n);return a(r)?function(){return r(n,i)}:void 0})},generate:()=>tN,groupBy:()=>rR,identity:()=>R,ignoreElements:()=>rl,iif:()=>tA,interval:()=>tP,isEmpty:()=>rD,isObservable:()=>eZ,last:()=>rj,lastValueFrom:()=>e1,map:()=>te,mapTo:()=>ru,materialize:()=>rL,max:()=>rx,merge:()=>tR,mergeAll:()=>tm,mergeMap:()=>ty,mergeMapTo:()=>rk,mergeScan:()=>r$,mergeWith:()=>rV,min:()=>rG,multicast:()=>rq,never:()=>tF,noop:()=>v,observable:()=>P,observeOn:()=>eq,of:()=>ez,onErrorResumeNext:()=>tx,onErrorResumeNextWith:()=>rB,pairs:()=>tM,pairwise:()=>rW,partition:()=>t$,pipe:()=>D,pluck:()=>rH,publish:()=>rQ,publishBehavior:()=>rK,publishLast:()=>rz,publishReplay:()=>rY,queue:()=>eb,queueScheduler:()=>eg,race:()=>tU,raceWith:()=>rJ,range:()=>tG,reduce:()=>tZ,refCount:()=>U,repeat:()=>rX,repeatWhen:()=>rZ,retry:()=>r0,retryWhen:()=>r1,sample:()=>r2,sampleTime:()=>r4,scan:()=>r3,scheduled:()=>eQ,sequenceEqual:()=>r5,share:()=>r6,shareReplay:()=>r9,single:()=>ne,skip:()=>nt,skipLast:()=>nr,skipUntil:()=>nn,skipWhile:()=>ni,startWith:()=>no,subscribeOn:()=>eB,switchAll:()=>ns,switchMap:()=>na,switchMapTo:()=>nl,switchScan:()=>nu,take:()=>rs,takeLast:()=>rF,takeUntil:()=>nc,takeWhile:()=>np,tap:()=>nd,throttle:()=>nf,throttleTime:()=>nh,throwError:()=>eY,throwIfEmpty:()=>rv,timeInterval:()=>ny,timeout:()=>e7,timeoutWith:()=>nv,timer:()=>tC,timestamp:()=>ng,toArray:()=>t1,using:()=>tq,window:()=>nb,windowCount:()=>n_,windowTime:()=>nT,windowToggle:()=>nE,windowWhen:()=>nO,withLatestFrom:()=>nS,zip:()=>tB,zipAll:()=>nw,zipWith:()=>nN});var n,i,o=r(82174);function a(e){return"function"==typeof e}function s(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var l=s(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function u(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var c=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,r,n,i,s=this._parentage;if(s){if(this._parentage=null,Array.isArray(s))try{for(var u=(0,o.__values)(s),c=u.next();!c.done;c=u.next())c.value.remove(this)}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}else s.remove(this)}var p=this.initialTeardown;if(a(p))try{p()}catch(e){i=e instanceof l?e.errors:[e]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=(0,o.__values)(d),y=h.next();!y.done;y=h.next()){var m=y.value;try{f(m)}catch(e){i=null!=i?i:[],e instanceof l?i=(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(i)),(0,o.__read)(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{y&&!y.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}}if(i)throw new l(i)}},t.prototype.add=function(e){var r;if(e&&e!==this){if(this.closed)f(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&u(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&u(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),p=c.EMPTY;function d(e){return e instanceof c||e&&"closed"in e&&a(e.remove)&&a(e.add)&&a(e.unsubscribe)}function f(e){a(e)?e():e.unsubscribe()}var h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},y={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=y.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,(0,o.__spreadArray)([e,t],(0,o.__read)(r))):setTimeout.apply(void 0,(0,o.__spreadArray)([e,t],(0,o.__read)(r)))},clearTimeout:function(e){var t=y.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function m(e){y.setTimeout(function(){var t=h.onUnhandledError;if(t)t(e);else throw e})}function v(){}var g=b("C",void 0,void 0);function b(e,t,r){return{kind:e,value:t,error:r}}var _=null;function T(e){if(h.useDeprecatedSynchronousErrorHandling){var t=!_;if(t&&(_={errorThrown:!1,error:null}),e(),t){var r=_,n=r.errorThrown,i=r.error;if(_=null,n)throw i}}else e()}var E=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,d(t)&&t.add(r)):r.destination=C,r}return(0,o.__extends)(t,e),t.create=function(e,t,r){return new I(e,t,r)},t.prototype.next=function(e){this.isStopped?A(b("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?A(b("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?A(g,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(c),O=Function.prototype.bind;function S(e,t){return O.call(e,t)}var w=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){N(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){N(e)}else N(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){N(e)}},e}(),I=function(e){function t(t,r,n){var i,o,s=e.call(this)||this;return a(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:s&&h.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&S(t.next,o),error:t.error&&S(t.error,o),complete:t.complete&&S(t.complete,o)}):i=t,s.destination=new w(i),s}return(0,o.__extends)(t,e),t}(E);function N(e){h.useDeprecatedSynchronousErrorHandling?h.useDeprecatedSynchronousErrorHandling&&_&&(_.errorThrown=!0,_.error=e):m(e)}function A(e,t){var r=h.onStoppedNotification;r&&y.setTimeout(function(){return r(e,t)})}var C={closed:!0,next:v,error:function(e){throw e},complete:v},P="function"==typeof Symbol&&Symbol.observable||"@@observable";function R(e){return e}function D(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return F(e)}function F(e){return 0===e.length?R:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}var j=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,i=this,o=(n=e)&&n instanceof E||n&&a(n.next)&&a(n.error)&&a(n.complete)&&d(n)?e:new I(e,t,r);return T(function(){var e=i.operator,t=i.source;o.add(e?e.call(o,t):t?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=L(t))(function(t,n){var i=new I({next:function(t){try{e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t});r.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[P]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return F(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=L(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function L(e){var t;return null!==(t=null!=e?e:h.Promise)&&void 0!==t?t:Promise}function x(e){return a(null==e?void 0:e.lift)}function M(e){return function(t){if(x(t))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function k(e,t,r,n,i){return new $(e,t,r,n,i)}var $=function(e){function t(t,r,n,i,o,a){var s=e.call(this,t)||this;return s.onFinalize=o,s.shouldUnsubscribe=a,s._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return(0,o.__extends)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(E);function U(){return M(function(e,t){var r=null;e._refCount++;var n=k(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){r=null;return}var n=e._connection,i=r;r=null,n&&(!i||n===i)&&n.unsubscribe(),t.unsubscribe()});e.subscribe(n),n.closed||(r=e.connect())})}var V=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._subject=null,n._refCount=0,n._connection=null,x(t)&&(n.lift=t.lift),n}return(0,o.__extends)(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new c;var r=this.getSubject();t.add(this.source.subscribe(k(r,void 0,function(){e._teardown(),r.complete()},function(t){e._teardown(),r.error(t)},function(){return e._teardown()}))),t.closed&&(this._connection=null,t=c.EMPTY)}return t},t.prototype.refCount=function(){return U()(this)},t}(j),G={now:function(){return(G.delegate||performance).now()},delegate:void 0},q={schedule:function(e){var t=requestAnimationFrame,r=cancelAnimationFrame,n=q.delegate;n&&(t=n.requestAnimationFrame,r=n.cancelAnimationFrame);var i=t(function(t){r=void 0,e(t)});return new c(function(){return null==r?void 0:r(i)})},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=q.delegate;return((null==r?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=q.delegate;return((null==r?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e)))},delegate:void 0};function B(e){return e?W(e):H}function W(e){return new j(function(t){var r=e||G,n=r.now(),i=0,o=function(){t.closed||(i=q.requestAnimationFrame(function(a){i=0;var s=r.now();t.next({timestamp:e?s:a,elapsed:s-n}),o()}))};return o(),function(){i&&q.cancelAnimationFrame(i)}})}var H=W(),Q=s(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),K=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,o.__extends)(t,e),t.prototype.lift=function(e){var t=new z(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new Q},t.prototype.next=function(e){var t=this;T(function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=(0,o.__values)(t.currentObservers),a=i.next();!a.done;a=i.next())a.value.next(e)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}})},t.prototype.error=function(e){var t=this;T(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}})},t.prototype.complete=function(){var e=this;T(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,i=this.observers;return r||n?p:(this.currentObservers=null,i.push(e),new c(function(){t.currentObservers=null,u(i,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},t.prototype.asObservable=function(){var e=new j;return e.source=this,e},t.create=function(e,t){return new z(e,t)},t}(j),z=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return(0,o.__extends)(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:p},t}(K),Y=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return(0,o.__extends)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r.closed||t.next(this._value),r},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(K),J={now:function(){return(J.delegate||Date).now()},delegate:void 0},X=function(e){function t(t,r,n){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===n&&(n=J);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=r,i._timestampProvider=n,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=r===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,r),i}return(0,o.__extends)(t,e),t.prototype.next=function(t){var r=this.isStopped,n=this._buffer,i=this._infiniteTimeWindow,o=this._timestampProvider,a=this._windowTime;!r&&(n.push(t),i||n.push(o.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),i=0;i<n.length&&!e.closed;i+=r?1:2)e.next(n[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,r=this._buffer,n=this._infiniteTimeWindow,i=(n?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!n){for(var o=t.now(),a=0,s=1;s<r.length&&r[s]<=o;s+=2)a=s;a&&r.splice(0,a+1)}},t}(K),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return(0,o.__extends)(t,e),t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this._hasValue,n=this._value,i=this.thrownError,o=this.isStopped,a=this._isComplete;t?e.error(i):(o||a)&&(r&&e.next(n),e.complete())},t.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},t.prototype.complete=function(){var t=this._hasValue,r=this._value;this._isComplete||(this._isComplete=!0,t&&e.prototype.next.call(this,r),e.prototype.complete.call(this))},t}(K),ee=function(e){function t(t,r){return e.call(this)||this}return(0,o.__extends)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(c),et={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=et.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,(0,o.__spreadArray)([e,t],(0,o.__read)(r))):setInterval.apply(void 0,(0,o.__spreadArray)([e,t],(0,o.__read)(r)))},clearInterval:function(e){var t=et.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},er=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return(0,o.__extends)(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r,n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),et.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&et.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,u(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(ee),en=1,ei={};function eo(e){return e in ei&&(delete ei[e],!0)}var ea={setImmediate:function(e){var t=en++;return ei[t]=!0,n||(n=Promise.resolve()),n.then(function(){return eo(t)&&e()}),t},clearImmediate:function(e){eo(e)}},es=ea.setImmediate,el=ea.clearImmediate,eu={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eu.delegate;return((null==r?void 0:r.setImmediate)||es).apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e)))},clearImmediate:function(e){var t=eu.delegate;return((null==t?void 0:t.clearImmediate)||el)(e)},delegate:void 0},ec=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return(0,o.__extends)(t,e),t.prototype.requestAsyncId=function(t,r,n){return(void 0===n&&(n=0),null!==n&&n>0)?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t._scheduled||(t._scheduled=eu.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!=n?n>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);var i,o=t.actions;null!=r&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==r&&(eu.clearImmediate(r),t._scheduled===r&&(t._scheduled=void 0))},t}(er),ep=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=J.now,e}(),ed=function(e){function t(t,r){void 0===r&&(r=ep.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return(0,o.__extends)(t,e),t.prototype.flush=function(e){var t,r=this.actions;if(this._active){r.push(e);return}this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=r.shift());if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}},t}(ep),ef=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.__extends)(t,e),t.prototype.flush=function(e){this._active=!0;var t,r=this._scheduled;this._scheduled=void 0;var n=this.actions;e=e||n.shift();do if(t=e.execute(e.state,e.delay))break;while((e=n[0])&&e.id===r&&n.shift());if(this._active=!1,t){for(;(e=n[0])&&e.id===r&&n.shift();)e.unsubscribe();throw t}},t}(ed))(ec),eh=ef,ey=new ed(er),em=ey,ev=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return(0,o.__extends)(t,e),t.prototype.schedule=function(t,r){return(void 0===r&&(r=0),r>0)?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return(void 0===n&&(n=0),null!=n&&n>0||null==n&&this.delay>0)?e.prototype.requestAsyncId.call(this,t,r,n):(t.flush(this),0)},t}(er),eg=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.__extends)(t,e),t}(ed))(ev),eb=eg,e_=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return(0,o.__extends)(t,e),t.prototype.requestAsyncId=function(t,r,n){return(void 0===n&&(n=0),null!==n&&n>0)?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t._scheduled||(t._scheduled=q.requestAnimationFrame(function(){return t.flush(void 0)})))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!=n?n>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);var i,o=t.actions;null!=r&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==r&&(q.cancelAnimationFrame(r),t._scheduled=void 0)},t}(er),eT=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.__extends)(t,e),t.prototype.flush=function(e){this._active=!0;var t,r=this._scheduled;this._scheduled=void 0;var n=this.actions;e=e||n.shift();do if(t=e.execute(e.state,e.delay))break;while((e=n[0])&&e.id===r&&n.shift());if(this._active=!1,t){for(;(e=n[0])&&e.id===r&&n.shift();)e.unsubscribe();throw t}},t}(ed))(e_),eE=eT,eO=function(e){function t(t,r){void 0===t&&(t=eS),void 0===r&&(r=1/0);var n=e.call(this,t,function(){return n.frame})||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return(0,o.__extends)(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(ed),eS=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1);var i=e.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.index=n,i.active=!0,i.index=t.index=n,i}return(0,o.__extends)(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!Number.isFinite(n))return c.EMPTY;if(!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var i=e.actions;return i.push(this),i.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(er),ew=new j(function(e){return e.complete()});function eI(e){return e?new j(function(t){return e.schedule(function(){return t.complete()})}):ew}function eN(e){return e&&a(e.schedule)}function eA(e){return e[e.length-1]}function eC(e){return a(eA(e))?e.pop():void 0}function eP(e){return eN(eA(e))?e.pop():void 0}function eR(e,t){return"number"==typeof eA(e)?e.pop():t}var eD=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function eF(e){return a(null==e?void 0:e.then)}function ej(e){return Symbol.asyncIterator&&a(null==e?void 0:e[Symbol.asyncIterator])}function eL(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ex="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function eM(e){return a(null==e?void 0:e[ex])}function ek(e){return(0,o.__asyncGenerator)(this,arguments,function(){var t,r,n;return(0,o.__generator)(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,(0,o.__await)(t.read())];case 3:if(n=(r=i.sent()).value,!r.done)return[3,5];return[4,(0,o.__await)(void 0)];case 4:return[2,i.sent()];case 5:return[4,(0,o.__await)(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function e$(e){return a(null==e?void 0:e.getReader)}function eU(e){if(e instanceof j)return e;if(null!=e){if(a(e[P]))return new j(function(t){var r=e[P]();if(a(r.subscribe))return r.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(eD(e))return new j(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()});if(eF(e))return new j(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,m)});if(ej(e))return eV(e);if(eM(e))return new j(function(t){var r,n;try{for(var i=(0,o.__values)(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(t.next(s),t.closed)return}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()});if(e$(e))return eV(ek(e))}throw eL(e)}function eV(e){return new j(function(t){(function(e,t){var r,n,i,a;return(0,o.__awaiter)(this,void 0,void 0,function(){var s;return(0,o.__generator)(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=(0,o.__asyncValues)(e),l.label=1;case 1:return[4,r.next()];case 2:if((n=l.sent()).done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:l.sent()},[3,11];case 6:if(l.trys.push([6,,9,10]),!(n&&!n.done&&(a=r.return)))return[3,8];return[4,a.call(r)];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}function eG(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var o=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}function eq(e,t){return void 0===t&&(t=0),M(function(r,n){r.subscribe(k(n,function(r){return eG(n,e,function(){return n.next(r)},t)},function(){return eG(n,e,function(){return n.complete()},t)},function(r){return eG(n,e,function(){return n.error(r)},t)}))})}function eB(e,t){return void 0===t&&(t=0),M(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function eW(e,t){return new j(function(r){var n;return eG(r,t,function(){n=e[ex](),eG(r,t,function(){var e,t,i;try{t=(e=n.next()).value,i=e.done}catch(e){r.error(e);return}i?r.complete():r.next(t)},0,!0)}),function(){return a(null==n?void 0:n.return)&&n.return()}})}function eH(e,t){if(!e)throw Error("Iterable cannot be null");return new j(function(r){eG(r,t,function(){var n=e[Symbol.asyncIterator]();eG(r,t,function(){n.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}function eQ(e,t){if(null!=e){if(a(e[P]))return eU(e).pipe(eB(t),eq(t));if(eD(e))return new j(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})});if(eF(e))return eU(e).pipe(eB(t),eq(t));if(ej(e))return eH(e,t);if(eM(e))return eW(e,t);if(e$(e))return eH(ek(e),t)}throw eL(e)}function eK(e,t){return t?eQ(e,t):eU(e)}function ez(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eP(e);return eK(e,r)}function eY(e,t){var r=a(e)?e:function(){return e},n=function(e){return e.error(r())};return new j(t?function(e){return t.schedule(n,0,e)}:n)}!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(i||(i={}));var eJ=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){return eX(this,e)},e.prototype.do=function(e,t,r){var n=this.kind,i=this.value,o=this.error;return"N"===n?null==e?void 0:e(i):"E"===n?null==t?void 0:t(o):null==r?void 0:r()},e.prototype.accept=function(e,t,r){return a(null==e?void 0:e.next)?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){var e=this.kind,t=this.value,r=this.error,n="N"===e?ez(t):"E"===e?eY(function(){return r}):"C"===e?ew:0;if(!n)throw TypeError("Unexpected notification kind "+e);return n},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function eX(e,t){var r,n,i,o=e.kind,a=e.value,s=e.error;if("string"!=typeof o)throw TypeError('Invalid notification, missing "kind"');"N"===o?null===(r=t.next)||void 0===r||r.call(t,a):"E"===o?null===(n=t.error)||void 0===n||n.call(t,s):null===(i=t.complete)||void 0===i||i.call(t)}function eZ(e){return!!e&&(e instanceof j||a(e.lift)&&a(e.subscribe))}var e0=s(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function e1(e,t){var r="object"==typeof t;return new Promise(function(n,i){var o,a=!1;e.subscribe({next:function(e){o=e,a=!0},error:i,complete:function(){a?n(o):r?n(t.defaultValue):i(new e0)}})})}function e2(e,t){var r="object"==typeof t;return new Promise(function(n,i){var o=new I({next:function(e){n(e),o.unsubscribe()},error:i,complete:function(){r?n(t.defaultValue):i(new e0)}});e.subscribe(o)})}var e4=s(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),e3=s(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}}),e5=s(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}});function e8(e){return e instanceof Date&&!isNaN(e)}var e6=s(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function e7(e,t){var r=e8(e)?{first:e}:"number"==typeof e?{each:e}:e,n=r.first,i=r.each,o=r.with,a=void 0===o?e9:o,s=r.scheduler,l=void 0===s?null!=t?t:ey:s,u=r.meta,c=void 0===u?null:u;if(null==n&&null==i)throw TypeError("No timeout provided.");return M(function(e,t){var r,o,s=null,u=0,p=function(e){o=eG(t,l,function(){try{r.unsubscribe(),eU(a({meta:c,lastValue:s,seen:u})).subscribe(t)}catch(e){t.error(e)}},e)};r=e.subscribe(k(t,function(e){null==o||o.unsubscribe(),u++,t.next(s=e),i>0&&p(i)},void 0,void 0,function(){(null==o?void 0:o.closed)||null==o||o.unsubscribe(),s=null})),u||p(null!=n?"number"==typeof n?n:+n-l.now():i)})}function e9(e){throw new e6(e)}function te(e,t){return M(function(r,n){var i=0;r.subscribe(k(n,function(r){n.next(e.call(t,r,i++))}))})}var tt=Array.isArray;function tr(e){return te(function(t){return tt(t)?e.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(t))):e(t)})}function tn(e,t,r,n){if(r){if(!eN(r))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return tn(e,t,n).apply(this,i).pipe(tr(r))};n=r}return n?function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return tn(e,t).apply(this,r).pipe(eB(n),eq(n))}:function(){for(var r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=new Z,s=!0;return new j(function(i){var l=a.subscribe(i);if(s){s=!1;var u=!1,c=!1;t.apply(r,(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(n)),[function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(e){var n=t.shift();if(null!=n){a.error(n);return}}a.next(1<t.length?t:t[0]),c=!0,u&&a.complete()}])),c&&a.complete(),u=!0}return l})}}function ti(e,t,r){return tn(!1,e,t,r)}function to(e,t,r){return tn(!0,e,t,r)}var ta=Array.isArray,ts=Object.getPrototypeOf,tl=Object.prototype,tu=Object.keys;function tc(e){if(1===e.length){var t=e[0];if(ta(t))return{args:t,keys:null};if(t&&"object"==typeof t&&ts(t)===tl){var r=tu(t);return{args:r.map(function(e){return t[e]}),keys:r}}}return{args:e,keys:null}}function tp(e,t){return e.reduce(function(e,r,n){return e[r]=t[n],e},{})}function td(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eP(e),n=eC(e),i=tc(e),o=i.args,a=i.keys;if(0===o.length)return eK([],r);var s=new j(tf(o,r,a?function(e){return tp(a,e)}:R));return n?s.pipe(tr(n)):s}function tf(e,t,r){return void 0===r&&(r=R),function(n){var i;i=function(){for(var i=e.length,o=Array(i),a=i,s=i,l=function(i){var l;l=function(){var l=eK(e[i],t),u=!1;l.subscribe(k(n,function(e){o[i]=e,!u&&(u=!0,s--),s||n.next(r(o.slice()))},function(){--a||n.complete()}))},t?eG(n,t,l):l()},u=0;u<i;u++)l(u)},t?eG(n,t,i):i()}}function th(e,t,r,n,i,o,a,s){var l=[],u=0,c=0,p=!1,d=function(){!p||l.length||u||t.complete()},f=function(e){return u<n?h(e):l.push(e)},h=function(e){o&&t.next(e),u++;var s=!1;eU(r(e,c++)).subscribe(k(t,function(e){null==i||i(e),o?f(e):t.next(e)},function(){s=!0},void 0,function(){if(s)try{for(u--;l.length&&u<n;)!function(){var e=l.shift();a?eG(t,a,function(){return h(e)}):h(e)}();d()}catch(e){t.error(e)}}))};return e.subscribe(k(t,f,function(){p=!0,d()})),function(){null==s||s()}}function ty(e,t,r){return(void 0===r&&(r=1/0),a(t))?ty(function(r,n){return te(function(e,i){return t(r,e,n,i)})(eU(e(r,n)))},r):("number"==typeof t&&(r=t),M(function(t,n){return th(t,n,e,r)}))}function tm(e){return void 0===e&&(e=1/0),ty(R,e)}function tv(){return tm(1)}function tg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tv()(eK(e,eP(e)))}function tb(e){return new j(function(t){eU(e()).subscribe(t)})}var t_={connector:function(){return new K},resetOnDisconnect:!0};function tT(e,t){void 0===t&&(t=t_);var r=null,n=t.connector,i=t.resetOnDisconnect,o=void 0===i||i,a=n(),s=new j(function(e){return a.subscribe(e)});return s.connect=function(){return(!r||r.closed)&&(r=tb(function(){return e}).subscribe(a),o&&r.add(function(){return a=n()})),r},s}function tE(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eC(e),n=tc(e),i=n.args,o=n.keys,a=new j(function(e){var t=i.length;if(!t){e.complete();return}for(var r=Array(t),n=t,a=t,s=function(t){var s=!1;eU(i[t]).subscribe(k(e,function(e){!s&&(s=!0,a--),r[t]=e},function(){return n--},void 0,function(){n&&s||(a||e.next(o?tp(o,r):r),e.complete())}))},l=0;l<t;l++)s(l)});return r?a.pipe(tr(r)):a}var tO=["addListener","removeListener"],tS=["addEventListener","removeEventListener"],tw=["on","off"];function tI(e,t){return function(r){return function(n){return e[r](t,n)}}}function tN(e,t,r,n,i){var a,s,l;function u(){var e;return(0,o.__generator)(this,function(n){switch(n.label){case 0:e=l,n.label=1;case 1:if(!(!t||t(e)))return[3,4];return[4,s(e)];case 2:n.sent(),n.label=3;case 3:return e=r(e),[3,1];case 4:return[2]}})}return 1==arguments.length?(l=e.initialState,t=e.condition,r=e.iterate,s=void 0===(a=e.resultSelector)?R:a,i=e.scheduler):(l=e,!n||eN(n)?(s=R,i=n):s=n),tb(i?function(){return eW(u(),i)}:u)}function tA(e,t,r){return tb(function(){return e()?t:r})}function tC(e,t,r){void 0===e&&(e=0),void 0===r&&(r=em);var n=-1;return null!=t&&(eN(t)?r=t:n=t),new j(function(t){var i=e8(e)?+e-r.now():e;i<0&&(i=0);var o=0;return r.schedule(function(){t.closed||(t.next(o++),0<=n?this.schedule(void 0,n):t.complete())},i)})}function tP(e,t){return void 0===e&&(e=0),void 0===t&&(t=ey),e<0&&(e=0),tC(e,e,t)}function tR(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eP(e),n=eR(e,1/0);return e.length?1===e.length?eU(e[0]):tm(n)(eK(e,r)):ew}var tD=new j(v);function tF(){return tD}var tj=Array.isArray;function tL(e){return 1===e.length&&tj(e[0])?e[0]:e}function tx(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=tL(e);return new j(function(e){var t=0,n=function(){if(t<r.length){var i=void 0;try{i=eU(r[t++])}catch(e){n();return}var o=new $(e,void 0,v,v);i.subscribe(o),o.add(n)}else e.complete()};n()})}function tM(e,t){return eK(Object.entries(e),t)}function tk(e,t){return M(function(r,n){var i=0;r.subscribe(k(n,function(r){return e.call(t,r,i++)&&n.next(r)}))})}function t$(e,t,r){return[tk(t,r)(eU(e)),tk(function(e,n){return!t.call(r,e,n)})(eU(e))]}function tU(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=tL(e)).length?eU(e[0]):new j(tV(e))}function tV(e){return function(t){for(var r=[],n=function(n){r.push(eU(e[n]).subscribe(k(t,function(e){if(r){for(var i=0;i<r.length;i++)i!==n&&r[i].unsubscribe();r=null}t.next(e)})))},i=0;r&&!t.closed&&i<e.length;i++)n(i)}}function tG(e,t,r){if(null==t&&(t=e,e=0),t<=0)return ew;var n=t+e;return new j(r?function(t){var i=e;return r.schedule(function(){i<n?(t.next(i++),this.schedule()):t.complete()})}:function(t){for(var r=e;r<n&&!t.closed;)t.next(r++);t.complete()})}function tq(e,t){return new j(function(r){var n=e(),i=t(n);return(i?eU(i):ew).subscribe(r),function(){n&&n.unsubscribe()}})}function tB(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eC(e),n=tL(e);return n.length?new j(function(e){var t=n.map(function(){return[]}),i=n.map(function(){return!1});e.add(function(){t=i=null});for(var a=function(a){eU(n[a]).subscribe(k(e,function(n){if(t[a].push(n),t.every(function(e){return e.length})){var s=t.map(function(e){return e.shift()});e.next(r?r.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(s))):s),t.some(function(e,t){return!e.length&&i[t]})&&e.complete()}},function(){i[a]=!0,t[a].length||e.complete()}))},s=0;!e.closed&&s<n.length;s++)a(s);return function(){t=i=null}}):ew}function tW(e){return M(function(t,r){var n=!1,i=null,o=null,a=!1,s=function(){if(null==o||o.unsubscribe(),o=null,n){n=!1;var e=i;i=null,r.next(e)}a&&r.complete()},l=function(){o=null,a&&r.complete()};t.subscribe(k(r,function(t){n=!0,i=t,o||eU(e(t)).subscribe(o=k(r,s,l))},function(){a=!0,n&&o&&!o.closed||r.complete()}))})}function tH(e,t){return void 0===t&&(t=ey),tW(function(){return tC(e,t)})}function tQ(e){return M(function(t,r){var n=[];return t.subscribe(k(r,function(e){return n.push(e)},function(){r.next(n),r.complete()})),eU(e).subscribe(k(r,function(){var e=n;n=[],r.next(e)},v)),function(){n=null}})}function tK(e,t){return void 0===t&&(t=null),t=null!=t?t:e,M(function(r,n){var i=[],a=0;r.subscribe(k(n,function(r){var s,l,c,p,d=null;a++%t==0&&i.push([]);try{for(var f=(0,o.__values)(i),h=f.next();!h.done;h=f.next()){var y=h.value;y.push(r),e<=y.length&&(d=null!=d?d:[]).push(y)}}catch(e){s={error:e}}finally{try{h&&!h.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}if(d)try{for(var m=(0,o.__values)(d),v=m.next();!v.done;v=m.next()){var y=v.value;u(i,y),n.next(y)}}catch(e){c={error:e}}finally{try{v&&!v.done&&(p=m.return)&&p.call(m)}finally{if(c)throw c.error}}},function(){var e,t;try{for(var r=(0,o.__values)(i),a=r.next();!a.done;a=r.next()){var s=a.value;n.next(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}n.complete()},void 0,function(){i=null}))})}function tz(e){for(var t,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=null!==(t=eP(n))&&void 0!==t?t:ey,s=null!==(r=n[0])&&void 0!==r?r:null,l=n[1]||1/0;return M(function(t,r){var n=[],i=!1,p=function(e){var t=e.buffer;e.subs.unsubscribe(),u(n,e),r.next(t),i&&d()},d=function(){if(n){var t=new c;r.add(t);var i={buffer:[],subs:t};n.push(i),eG(t,a,function(){return p(i)},e)}};null!==s&&s>=0?eG(r,a,d,s,!0):i=!0,d();var f=k(r,function(e){var t,r,i=n.slice();try{for(var a=(0,o.__values)(i),s=a.next();!s.done;s=a.next()){var u=s.value,c=u.buffer;c.push(e),l<=c.length&&p(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}},function(){for(;null==n?void 0:n.length;)r.next(n.shift().buffer);null==f||f.unsubscribe(),r.complete(),r.unsubscribe()},void 0,function(){return n=null});t.subscribe(f)})}function tY(e,t){return M(function(r,n){var i=[];eU(e).subscribe(k(n,function(e){var r=[];i.push(r);var o=new c;o.add(eU(t(e)).subscribe(k(n,function(){u(i,r),n.next(r),o.unsubscribe()},v)))},v)),r.subscribe(k(n,function(e){var t,r;try{for(var n=(0,o.__values)(i),a=n.next();!a.done;a=n.next())a.value.push(e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},function(){for(;i.length>0;)n.next(i.shift());n.complete()}))})}function tJ(e){return M(function(t,r){var n=null,i=null,o=function(){null==i||i.unsubscribe();var t=n;n=[],t&&r.next(t),eU(e()).subscribe(i=k(r,o,v))};o(),t.subscribe(k(r,function(e){return null==n?void 0:n.push(e)},function(){n&&r.next(n),r.complete()},void 0,function(){return n=i=null}))})}function tX(e,t,r,n,i){return function(o,a){var s=r,l=t,u=0;o.subscribe(k(a,function(t){var r=u++;l=s?e(l,t,r):(s=!0,t),n&&a.next(l)},i&&function(){s&&a.next(l),a.complete()}))}}function tZ(e,t){return M(tX(e,t,arguments.length>=2,!1,!0))}var t0=function(e,t){return e.push(t),e};function t1(){return M(function(e,t){tZ(t0,[])(e).subscribe(t)})}function t2(e,t){return D(t1(),ty(function(t){return e(t)}),t?tr(t):R)}function t4(e){return t2(td,e)}var t3=t4;function t5(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eC(e);return r?D(t5.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e))),tr(r)):M(function(t,r){tf((0,o.__spreadArray)([t],(0,o.__read)(tL(e))))(r)})}function t8(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return t5.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e)))}function t6(e,t){return a(t)?ty(e,t,1):ty(e,1)}function t7(e,t){return a(t)?t6(function(){return e},t):t6(function(){return e})}function t9(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eP(e);return M(function(t,n){tv()(eK((0,o.__spreadArray)([t],(0,o.__read)(e)),r)).subscribe(n)})}function re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return t9.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e)))}var rt={connector:function(){return new K}};function rr(e,t){void 0===t&&(t=rt);var r=t.connector;return M(function(t,n){var i=r();eU(e(new j(function(e){return i.subscribe(e)}))).subscribe(n),n.add(t.subscribe(i))})}function rn(e){return tZ(function(t,r,n){return!e||e(r,n)?t+1:t},0)}function ri(e){return M(function(t,r){var n=!1,i=null,o=null,a=function(){if(null==o||o.unsubscribe(),o=null,n){n=!1;var e=i;i=null,r.next(e)}};t.subscribe(k(r,function(t){null==o||o.unsubscribe(),n=!0,i=t,o=k(r,a,v),eU(e(t)).subscribe(o)},function(){a(),r.complete()},void 0,function(){i=o=null}))})}function ro(e,t){return void 0===t&&(t=ey),M(function(r,n){var i=null,o=null,a=null,s=function(){if(i){i.unsubscribe(),i=null;var e=o;o=null,n.next(e)}};function l(){var r=a+e,o=t.now();if(o<r){i=this.schedule(void 0,r-o),n.add(i);return}s()}r.subscribe(k(n,function(r){o=r,a=t.now(),i||(i=t.schedule(l,e),n.add(i))},function(){s(),n.complete()},void 0,function(){o=i=null}))})}function ra(e){return M(function(t,r){var n=!1;t.subscribe(k(r,function(e){n=!0,r.next(e)},function(){n||r.next(e),r.complete()}))})}function rs(e){return e<=0?function(){return ew}:M(function(t,r){var n=0;t.subscribe(k(r,function(t){++n<=e&&(r.next(t),e<=n&&r.complete())}))})}function rl(){return M(function(e,t){e.subscribe(k(t,v))})}function ru(e){return te(function(){return e})}function rc(e,t){return t?function(r){return tg(t.pipe(rs(1),rl()),r.pipe(rc(e)))}:ty(function(t,r){return eU(e(t,r)).pipe(rs(1),ru(t))})}function rp(e,t){void 0===t&&(t=ey);var r=tC(e,t);return rc(function(){return r})}function rd(){return M(function(e,t){e.subscribe(k(t,function(e){return eX(e,t)}))})}function rf(e,t){return M(function(r,n){var i=new Set;r.subscribe(k(n,function(t){var r=e?e(t):t;i.has(r)||(i.add(r),n.next(t))})),t&&eU(t).subscribe(k(n,function(){return i.clear()},v))})}function rh(e,t){return void 0===t&&(t=R),e=null!=e?e:ry,M(function(r,n){var i,o=!0;r.subscribe(k(n,function(r){var a=t(r);(o||!e(i,a))&&(o=!1,i=a,n.next(r))}))})}function ry(e,t){return e===t}function rm(e,t){return rh(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}function rv(e){return void 0===e&&(e=rg),M(function(t,r){var n=!1;t.subscribe(k(r,function(e){n=!0,r.next(e)},function(){return n?r.complete():r.error(e())}))})}function rg(){return new e0}function rb(e,t){if(e<0)throw new e4;var r=arguments.length>=2;return function(n){return n.pipe(tk(function(t,r){return r===e}),rs(1),r?ra(t):rv(function(){return new e4}))}}function r_(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return tg(t,ez.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e))))}}function rT(e,t){return M(function(r,n){var i=0;r.subscribe(k(n,function(o){e.call(t,o,i++,r)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}function rE(e,t){return t?function(r){return r.pipe(rE(function(r,n){return eU(e(r,n)).pipe(te(function(e,i){return t(r,e,n,i)}))}))}:M(function(t,r){var n=0,i=null,o=!1;t.subscribe(k(r,function(t){i||(i=k(r,void 0,function(){i=null,o&&r.complete()}),eU(e(t,n++)).subscribe(i))},function(){o=!0,i||r.complete()}))})}function rO(){return rE(R)}var rS=rO;function rw(e,t,r){return void 0===t&&(t=1/0),t=1>(t||0)?1/0:t,M(function(n,i){return th(n,i,e,t,void 0,!0,r)})}function rI(e){return M(function(t,r){try{t.subscribe(r)}finally{r.add(e)}})}function rN(e,t){return M(rA(e,t,"value"))}function rA(e,t,r){var n="index"===r;return function(r,i){var o=0;r.subscribe(k(i,function(a){var s=o++;e.call(t,a,s,r)&&(i.next(n?s:a),i.complete())},function(){i.next(n?-1:void 0),i.complete()}))}}function rC(e,t){return M(rA(e,t,"index"))}function rP(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?tk(function(t,r){return e(t,r,n)}):R,rs(1),r?ra(t):rv(function(){return new e0}))}}function rR(e,t,r,n){return M(function(i,o){t&&"function"!=typeof t?(r=t.duration,a=t.element,n=t.connector):a=t;var a,s=new Map,l=function(e){s.forEach(e),e(o)},u=function(e){return l(function(t){return t.error(e)})},c=0,p=!1,d=new $(o,function(t){try{var i=e(t),l=s.get(i);if(!l){s.set(i,l=n?n():new K);var f,h,y=(f=l,(h=new j(function(e){c++;var t=f.subscribe(e);return function(){t.unsubscribe(),0==--c&&p&&d.unsubscribe()}})).key=i,h);if(o.next(y),r){var m=k(l,function(){l.complete(),null==m||m.unsubscribe()},void 0,void 0,function(){return s.delete(i)});d.add(eU(r(y)).subscribe(m))}}l.next(a?a(t):t)}catch(e){u(e)}},function(){return l(function(e){return e.complete()})},u,function(){return s.clear()},function(){return p=!0,0===c});i.subscribe(d)})}function rD(){return M(function(e,t){e.subscribe(k(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}function rF(e){return e<=0?function(){return ew}:M(function(t,r){var n=[];t.subscribe(k(r,function(t){n.push(t),e<n.length&&n.shift()},function(){var e,t;try{for(var i=(0,o.__values)(n),a=i.next();!a.done;a=i.next()){var s=a.value;r.next(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}r.complete()},void 0,function(){n=null}))})}function rj(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?tk(function(t,r){return e(t,r,n)}):R,rF(1),r?ra(t):rv(function(){return new e0}))}}function rL(){return M(function(e,t){e.subscribe(k(t,function(e){t.next(eJ.createNext(e))},function(){t.next(eJ.createComplete()),t.complete()},function(e){t.next(eJ.createError(e)),t.complete()}))})}function rx(e){return tZ(a(e)?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t})}var rM=ty;function rk(e,t,r){return(void 0===r&&(r=1/0),a(t))?ty(function(){return e},t,r):("number"==typeof t&&(r=t),ty(function(){return e},r))}function r$(e,t,r){return void 0===r&&(r=1/0),M(function(n,i){var o=t;return th(n,i,function(t,r){return e(o,t,r)},r,function(e){o=e},!1,void 0,function(){return o=null})})}function rU(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eP(e),n=eR(e,1/0);return e=tL(e),M(function(t,i){tm(n)(eK((0,o.__spreadArray)([t],(0,o.__read)(e)),r)).subscribe(i)})}function rV(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return rU.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e)))}function rG(e){return tZ(a(e)?function(t,r){return 0>e(t,r)?t:r}:function(e,t){return e<t?e:t})}function rq(e,t){var r=a(e)?e:function(){return e};return a(t)?rr(t,{connector:r}):function(e){return new V(e,r)}}function rB(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=tL(e);return function(e){return tx.apply(void 0,(0,o.__spreadArray)([e],(0,o.__read)(r)))}}function rW(){return M(function(e,t){var r,n=!1;e.subscribe(k(t,function(e){var i=r;r=e,n&&t.next([i,e]),n=!0}))})}function rH(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(0===r)throw Error("list of properties cannot be empty.");return te(function(t){for(var n=t,i=0;i<r;i++){var o=null==n?void 0:n[e[i]];if(void 0===o)return;n=o}return n})}function rQ(e){return e?function(t){return rr(e)(t)}:function(e){return rq(new K)(e)}}function rK(e){return function(t){var r=new Y(e);return new V(t,function(){return r})}}function rz(){return function(e){var t=new Z;return new V(e,function(){return t})}}function rY(e,t,r,n){r&&!a(r)&&(n=r);var i=a(r)?r:void 0;return function(r){return rq(new X(e,t,n),i)(r)}}function rJ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?M(function(t,r){tV((0,o.__spreadArray)([t],(0,o.__read)(e)))(r)}):R}function rX(e){var t,r,n=1/0;return null!=e&&("object"==typeof e?(n=void 0===(t=e.count)?1/0:t,r=e.delay):n=e),n<=0?function(){return ew}:M(function(e,t){var i,o=0,a=function(){if(null==i||i.unsubscribe(),i=null,null!=r){var e="number"==typeof r?tC(r):eU(r(o)),n=k(t,function(){n.unsubscribe(),s()});e.subscribe(n)}else s()},s=function(){var r=!1;i=e.subscribe(k(t,void 0,function(){++o<n?i?a():r=!0:t.complete()})),r&&a()};s()})}function rZ(e){return M(function(t,r){var n,i,o=!1,a=!1,s=!1,l=function(){return s&&a&&(r.complete(),!0)},u=function(){s=!1,n=t.subscribe(k(r,void 0,function(){s=!0,l()||(i||eU(e(i=new K)).subscribe(k(r,function(){n?u():o=!0},function(){a=!0,l()})),i).next()})),o&&(n.unsubscribe(),n=null,o=!1,u())};u()})}function r0(e){void 0===e&&(e=1/0);var t,r=(t=e&&"object"==typeof e?e:{count:e}).count,n=void 0===r?1/0:r,i=t.delay,o=t.resetOnSuccess,a=void 0!==o&&o;return n<=0?R:M(function(e,t){var r,o=0,s=function(){var l=!1;r=e.subscribe(k(t,function(e){a&&(o=0),t.next(e)},void 0,function(e){if(o++<n){var a=function(){r?(r.unsubscribe(),r=null,s()):l=!0};if(null!=i){var u="number"==typeof i?tC(i):eU(i(e,o)),c=k(t,function(){c.unsubscribe(),a()},function(){t.complete()});u.subscribe(c)}else a()}else t.error(e)})),l&&(r.unsubscribe(),r=null,s())};s()})}function r1(e){return M(function(t,r){var n,i,o=!1,a=function(){n=t.subscribe(k(r,void 0,void 0,function(t){i||eU(e(i=new K)).subscribe(k(r,function(){return n?a():o=!0})),i&&i.next(t)})),o&&(n.unsubscribe(),n=null,o=!1,a())};a()})}function r2(e){return M(function(t,r){var n=!1,i=null;t.subscribe(k(r,function(e){n=!0,i=e})),eU(e).subscribe(k(r,function(){if(n){n=!1;var e=i;i=null,r.next(e)}},v))})}function r4(e,t){return void 0===t&&(t=ey),r2(tP(e,t))}function r3(e,t){return M(tX(e,t,arguments.length>=2,!0))}function r5(e,t){return void 0===t&&(t=function(e,t){return e===t}),M(function(r,n){var i=r8(),o=r8(),a=function(e){n.next(e),n.complete()},s=function(e,r){var i=k(n,function(n){var i=r.buffer,o=r.complete;0===i.length?o?a(!1):e.buffer.push(n):t(n,i.shift())||a(!1)},function(){e.complete=!0;var t=r.complete,n=r.buffer;t&&a(0===n.length),null==i||i.unsubscribe()});return i};r.subscribe(s(i,o)),eU(e).subscribe(s(o,i))})}function r8(){return{buffer:[],complete:!1}}function r6(e){void 0===e&&(e={});var t=e.connector,r=void 0===t?function(){return new K}:t,n=e.resetOnError,i=void 0===n||n,o=e.resetOnComplete,a=void 0===o||o,s=e.resetOnRefCountZero,l=void 0===s||s;return function(e){var t,n,o,s=0,u=!1,c=!1,p=function(){null==n||n.unsubscribe(),n=void 0},d=function(){p(),t=o=void 0,u=c=!1},f=function(){var e=t;d(),null==e||e.unsubscribe()};return M(function(e,h){s++,c||u||p();var y=o=null!=o?o:r();h.add(function(){0!=--s||c||u||(n=r7(f,l))}),y.subscribe(h),!t&&s>0&&(t=new I({next:function(e){return y.next(e)},error:function(e){c=!0,p(),n=r7(d,i,e),y.error(e)},complete:function(){u=!0,p(),n=r7(d,a),y.complete()}}),eU(e).subscribe(t))})(e)}}function r7(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!0===t){e();return}if(!1!==t){var i=new I({next:function(){i.unsubscribe(),e()}});return eU(t.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(r)))).subscribe(i)}}function r9(e,t,r){var n,i,o,a,s=!1;return e&&"object"==typeof e?(a=void 0===(n=e.bufferSize)?1/0:n,t=void 0===(i=e.windowTime)?1/0:i,s=void 0!==(o=e.refCount)&&o,r=e.scheduler):a=null!=e?e:1/0,r6({connector:function(){return new X(a,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function ne(e){return M(function(t,r){var n,i=!1,o=!1,a=0;t.subscribe(k(r,function(s){o=!0,(!e||e(s,a++,t))&&(i&&r.error(new e5("Too many matching values")),i=!0,n=s)},function(){i?(r.next(n),r.complete()):r.error(o?new e3("No matching values"):new e0)}))})}function nt(e){return tk(function(t,r){return e<=r})}function nr(e){return e<=0?R:M(function(t,r){var n=Array(e),i=0;return t.subscribe(k(r,function(t){var o=i++;if(o<e)n[o]=t;else{var a=o%e,s=n[a];n[a]=t,r.next(s)}})),function(){n=null}})}function nn(e){return M(function(t,r){var n=!1,i=k(r,function(){null==i||i.unsubscribe(),n=!0},v);eU(e).subscribe(i),t.subscribe(k(r,function(e){return n&&r.next(e)}))})}function ni(e){return M(function(t,r){var n=!1,i=0;t.subscribe(k(r,function(t){return(n||(n=!e(t,i++)))&&r.next(t)}))})}function no(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eP(e);return M(function(t,n){(r?tg(e,t,r):tg(e,t)).subscribe(n)})}function na(e,t){return M(function(r,n){var i=null,o=0,a=!1,s=function(){return a&&!i&&n.complete()};r.subscribe(k(n,function(r){null==i||i.unsubscribe();var a=0,l=o++;eU(e(r,l)).subscribe(i=k(n,function(e){return n.next(t?t(r,e,l,a++):e)},function(){i=null,s()}))},function(){a=!0,s()}))})}function ns(){return na(R)}function nl(e,t){return a(t)?na(function(){return e},t):na(function(){return e})}function nu(e,t){return M(function(r,n){var i=t;return na(function(t,r){return e(i,t,r)},function(e,t){return i=t,t})(r).subscribe(n),function(){i=null}})}function nc(e){return M(function(t,r){eU(e).subscribe(k(r,function(){return r.complete()},v)),r.closed||t.subscribe(r)})}function np(e,t){return void 0===t&&(t=!1),M(function(r,n){var i=0;r.subscribe(k(n,function(r){var o=e(r,i++);(o||t)&&n.next(r),o||n.complete()}))})}function nd(e,t,r){var n=a(e)||t||r?{next:e,error:t,complete:r}:e;return n?M(function(e,t){null===(r=n.subscribe)||void 0===r||r.call(n);var r,i=!0;e.subscribe(k(t,function(e){var r;null===(r=n.next)||void 0===r||r.call(n,e),t.next(e)},function(){var e;i=!1,null===(e=n.complete)||void 0===e||e.call(n),t.complete()},function(e){var r;i=!1,null===(r=n.error)||void 0===r||r.call(n,e),t.error(e)},function(){var e,t;i&&(null===(e=n.unsubscribe)||void 0===e||e.call(n)),null===(t=n.finalize)||void 0===t||t.call(n)}))}):R}function nf(e,t){return M(function(r,n){var i=null!=t?t:{},o=i.leading,a=void 0===o||o,s=i.trailing,l=void 0!==s&&s,u=!1,c=null,p=null,d=!1,f=function(){null==p||p.unsubscribe(),p=null,l&&(m(),d&&n.complete())},h=function(){p=null,d&&n.complete()},y=function(t){return p=eU(e(t)).subscribe(k(n,f,h))},m=function(){if(u){u=!1;var e=c;c=null,n.next(e),d||y(e)}};r.subscribe(k(n,function(e){u=!0,c=e,p&&!p.closed||(a?m():y(e))},function(){d=!0,l&&u&&p&&!p.closed||n.complete()}))})}function nh(e,t,r){void 0===t&&(t=ey);var n=tC(e,t);return nf(function(){return n},r)}function ny(e){return void 0===e&&(e=ey),M(function(t,r){var n=e.now();t.subscribe(k(r,function(t){var i=e.now(),o=i-n;n=i,r.next(new nm(t,o))}))})}var nm=function(e,t){this.value=e,this.interval=t};function nv(e,t,r){var n,i,o;if(r=null!=r?r:em,e8(e)?n=e:"number"==typeof e&&(i=e),t)o=function(){return t};else throw TypeError("No observable provided to switch to");if(null==n&&null==i)throw TypeError("No timeout provided.");return e7({first:n,each:i,scheduler:r,with:o})}function ng(e){return void 0===e&&(e=J),te(function(t){return{value:t,timestamp:e.now()}})}function nb(e){return M(function(t,r){var n=new K;r.next(n.asObservable());var i=function(e){n.error(e),r.error(e)};return t.subscribe(k(r,function(e){return null==n?void 0:n.next(e)},function(){n.complete(),r.complete()},i)),eU(e).subscribe(k(r,function(){n.complete(),r.next(n=new K)},v,i)),function(){null==n||n.unsubscribe(),n=null}})}function n_(e,t){void 0===t&&(t=0);var r=t>0?t:e;return M(function(t,n){var i=[new K],a=0;n.next(i[0].asObservable()),t.subscribe(k(n,function(t){try{for(var s,l,u=(0,o.__values)(i),c=u.next();!c.done;c=u.next())c.value.next(t)}catch(e){s={error:e}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(s)throw s.error}}var p=a-e+1;if(p>=0&&p%r==0&&i.shift().complete(),++a%r==0){var d=new K;i.push(d),n.next(d.asObservable())}},function(){for(;i.length>0;)i.shift().complete();n.complete()},function(e){for(;i.length>0;)i.shift().error(e);n.error(e)},function(){i=null}))})}function nT(e){for(var t,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=null!==(t=eP(n))&&void 0!==t?t:ey,a=null!==(r=n[0])&&void 0!==r?r:null,s=n[1]||1/0;return M(function(t,r){var n=[],i=!1,l=function(e){var t=e.window,r=e.subs;t.complete(),r.unsubscribe(),u(n,e),i&&p()},p=function(){if(n){var t=new c;r.add(t);var i=new K,a={window:i,subs:t,seen:0};n.push(a),r.next(i.asObservable()),eG(t,o,function(){return l(a)},e)}};null!==a&&a>=0?eG(r,o,p,a,!0):i=!0,p();var d=function(e){return n.slice().forEach(e)},f=function(e){d(function(t){return e(t.window)}),e(r),r.unsubscribe()};return t.subscribe(k(r,function(e){d(function(t){t.window.next(e),s<=++t.seen&&l(t)})},function(){return f(function(e){return e.complete()})},function(e){return f(function(t){return t.error(e)})})),function(){n=null}})}function nE(e,t){return M(function(r,n){var i=[],a=function(e){for(;0<i.length;)i.shift().error(e);n.error(e)};eU(e).subscribe(k(n,function(e){var r,o=new K;i.push(o);var s=new c;try{r=eU(t(e))}catch(e){a(e);return}n.next(o.asObservable()),s.add(r.subscribe(k(n,function(){u(i,o),o.complete(),s.unsubscribe()},v,a)))},v)),r.subscribe(k(n,function(e){var t,r,n=i.slice();try{for(var a=(0,o.__values)(n),s=a.next();!s.done;s=a.next())s.value.next(e)}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}},function(){for(;0<i.length;)i.shift().complete();n.complete()},a,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}function nO(e){return M(function(t,r){var n,i,o=function(e){n.error(e),r.error(e)},a=function(){var t;null==i||i.unsubscribe(),null==n||n.complete(),n=new K,r.next(n.asObservable());try{t=eU(e())}catch(e){o(e);return}t.subscribe(i=k(r,a,a,o))};a(),t.subscribe(k(r,function(e){return n.next(e)},function(){n.complete(),r.complete()},o,function(){null==i||i.unsubscribe(),n=null}))})}function nS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eC(e);return M(function(t,n){for(var i=e.length,a=Array(i),s=e.map(function(){return!1}),l=!1,u=function(t){eU(e[t]).subscribe(k(n,function(e){a[t]=e,!l&&!s[t]&&(s[t]=!0,(l=s.every(R))&&(s=null))},v))},c=0;c<i;c++)u(c);t.subscribe(k(n,function(e){if(l){var t=(0,o.__spreadArray)([e],(0,o.__read)(a));n.next(r?r.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(t))):t)}}))})}function nw(e){return t2(tB,e)}function nI(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M(function(t,r){tB.apply(void 0,(0,o.__spreadArray)([t],(0,o.__read)(e))).subscribe(r)})}function nN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return nI.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e)))}},12925:(e,t,r)=>{let n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof i){if(!!t.loose===e.loose)return e;e=e.value}u("comparator",e=e.trim().split(/\s+/).join(" "),t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){let t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new p(e.value,t).test(this.value):""===e.operator?""===e.value||new p(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}e.exports=i;let o=r(78949),{safeRe:a,t:s}=r(81520),l=r(43978),u=r(1410),c=r(28871),p=r(88889)},88889:(e,t,r)=>{let n=/\s+/g;class i{constructor(e,t){if(t=a(t),e instanceof i){if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;return new i(e.raw,t)}if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!v(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&y)|(this.options.loose&&m))+":"+e,r=o.get(t);if(r)return r;let n=this.options.loose,i=n?c[p.HYPHENRANGELOOSE]:c[p.HYPHENRANGE];l("hyphen replace",e=e.replace(i,P(this.options.includePrerelease))),l("comparator trim",e=e.replace(c[p.COMPARATORTRIM],d)),l("tilde trim",e=e.replace(c[p.TILDETRIM],f)),l("caret trim",e=e.replace(c[p.CARETTRIM],h));let a=e.split(" ").map(e=>_(e,this.options)).join(" ").split(/\s+/).map(e=>C(e,this.options));n&&(a=a.filter(e=>(l("loose invalid filter",e,this.options),!!e.match(c[p.COMPARATORLOOSE])))),l("range list",a);let u=new Map;for(let e of a.map(e=>new s(e,this.options))){if(v(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");let g=[...u.values()];return o.set(t,g),g}intersects(e,t){if(!(e instanceof i))throw TypeError("a Range is required");return this.set.some(r=>b(r,t)&&e.set.some(e=>b(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}e.exports=i;let o=new(r(50241)),a=r(78949),s=r(12925),l=r(1410),u=r(28871),{safeRe:c,t:p,comparatorTrimReplace:d,tildeTrimReplace:f,caretTrimReplace:h}=r(81520),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:m}=r(73651),v=e=>"<0.0.0-0"===e.value,g=e=>""===e.value,b=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(e=>i.intersects(e,t)),i=n.pop();return r},_=(e,t)=>(l("comp",e,t),l("caret",e=S(e,t)),l("tildes",e=E(e,t)),l("xrange",e=I(e,t)),l("stars",e=A(e,t)),e),T=e=>!e||"x"===e.toLowerCase()||"*"===e,E=(e,t)=>e.trim().split(/\s+/).map(e=>O(e,t)).join(" "),O=(e,t)=>{let r=t.loose?c[p.TILDELOOSE]:c[p.TILDE];return e.replace(r,(t,r,n,i,o)=>{let a;return l("tilde",e,t,r,n,i,o),T(r)?a="":T(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:T(i)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(l("replaceTilde pr",o),a=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,l("tilde return",a),a})},S=(e,t)=>e.trim().split(/\s+/).map(e=>w(e,t)).join(" "),w=(e,t)=>{l("caret",e,t);let r=t.loose?c[p.CARETLOOSE]:c[p.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,o,a)=>{let s;return l("caret",e,t,r,i,o,a),T(r)?s="":T(i)?s=`>=${r}.0.0${n} <${+r+1}.0.0-0`:T(o)?s="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:a?(l("replaceCaret pr",a),s="0"===r?"0"===i?`>=${r}.${i}.${o}-${a} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${a} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${a} <${+r+1}.0.0-0`):(l("no pr"),s="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),l("caret return",s),s})},I=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map(e=>N(e,t)).join(" ")),N=(e,t)=>{e=e.trim();let r=t.loose?c[p.XRANGELOOSE]:c[p.XRANGE];return e.replace(r,(r,n,i,o,a,s)=>{l("xRange",e,r,n,i,o,a,s);let u=T(i),c=u||T(o),p=c||T(a);return"="===n&&p&&(n=""),s=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(o=0),a=0,">"===n?(n=">=",c?(i=+i+1,o=0):o=+o+1,a=0):"<="===n&&(n="<",c?i=+i+1:o=+o+1),"<"===n&&(s="-0"),r=`${n+i}.${o}.${a}${s}`):c?r=`>=${i}.0.0${s} <${+i+1}.0.0-0`:p&&(r=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`),l("xRange return",r),r})},A=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[p.STAR],"")),C=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?p.GTE0PRE:p.GTE0],"")),P=e=>(t,r,n,i,o,a,s,l,u,c,p,d)=>(r=T(n)?"":T(i)?`>=${n}.0.0${e?"-0":""}`:T(o)?`>=${n}.${i}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`,l=T(u)?"":T(c)?`<${+u+1}.0.0-0`:T(p)?`<${u}.${+c+1}.0-0`:d?`<=${u}.${c}.${p}-${d}`:e?`<${u}.${c}.${+p+1}-0`:`<=${l}`,`${r} ${l}`.trim()),R=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},28871:(e,t,r)=>{let n=r(1410),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(73651),{safeRe:a,t:s}=r(81520),l=r(78949),{compareIdentifiers:u}=r(88178);class c{constructor(e,t){if(t=l(t),e instanceof c){if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<o)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;if(r===i)continue;else return u(r,i)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(n("build compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;if(r===i)continue;else return u(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=Number(r)?1:0;if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=c},62485:(e,t,r)=>{let n=r(48242);e.exports=(e,t)=>{let r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},43978:(e,t,r)=>{let n=r(58884),i=r(28305),o=r(58368),a=r(76483),s=r(89673),l=r(94106);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return i(e,r,u);case">":return o(e,r,u);case">=":return a(e,r,u);case"<":return s(e,r,u);case"<=":return l(e,r,u);default:throw TypeError(`Invalid operator: ${t}`)}}},39150:(e,t,r)=>{let n=r(28871),i=r(48242),{safeRe:o,t:a}=r(81520);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n;let i=t.includePrerelease?o[a.COERCERTLFULL]:o[a.COERCERTL];for(;(n=i.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),i.lastIndex=n.index+n[1].length+n[2].length;i.lastIndex=-1}else r=e.match(t.includePrerelease?o[a.COERCEFULL]:o[a.COERCE]);if(null===r)return null;let s=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",p=t.includePrerelease&&r[6]?`+${r[6]}`:"";return i(`${s}.${l}.${u}${c}${p}`,t)}},84472:(e,t,r)=>{let n=r(28871);e.exports=(e,t,r)=>{let i=new n(e,r),o=new n(t,r);return i.compare(o)||i.compareBuild(o)}},98136:(e,t,r)=>{let n=r(51586);e.exports=(e,t)=>n(e,t,!0)},51586:(e,t,r)=>{let n=r(28871);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},10906:(e,t,r)=>{let n=r(48242);e.exports=(e,t)=>{let r=n(e,null,!0),i=n(t,null,!0),o=r.compare(i);if(0===o)return null;let a=o>0,s=a?r:i,l=a?i:r,u=!!s.prerelease.length;if(l.prerelease.length&&!u)return l.patch||l.minor?s.patch?"patch":s.minor?"minor":"major":"major";let c=u?"pre":"";return r.major!==i.major?c+"major":r.minor!==i.minor?c+"minor":r.patch!==i.patch?c+"patch":"prerelease"}},58884:(e,t,r)=>{let n=r(51586);e.exports=(e,t,r)=>0===n(e,t,r)},58368:(e,t,r)=>{let n=r(51586);e.exports=(e,t,r)=>n(e,t,r)>0},76483:(e,t,r)=>{let n=r(51586);e.exports=(e,t,r)=>n(e,t,r)>=0},44580:(e,t,r)=>{let n=r(28871);e.exports=(e,t,r,i,o)=>{"string"==typeof r&&(o=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,o).version}catch(e){return null}}},89673:(e,t,r)=>{let n=r(51586);e.exports=(e,t,r)=>0>n(e,t,r)},94106:(e,t,r)=>{let n=r(51586);e.exports=(e,t,r)=>0>=n(e,t,r)},31148:(e,t,r)=>{let n=r(28871);e.exports=(e,t)=>new n(e,t).major},95662:(e,t,r)=>{let n=r(28871);e.exports=(e,t)=>new n(e,t).minor},28305:(e,t,r)=>{let n=r(51586);e.exports=(e,t,r)=>0!==n(e,t,r)},48242:(e,t,r)=>{let n=r(28871);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},34234:(e,t,r)=>{let n=r(28871);e.exports=(e,t)=>new n(e,t).patch},92606:(e,t,r)=>{let n=r(48242);e.exports=(e,t)=>{let r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},92490:(e,t,r)=>{let n=r(51586);e.exports=(e,t,r)=>n(t,e,r)},11302:(e,t,r)=>{let n=r(84472);e.exports=(e,t)=>e.sort((e,r)=>n(r,e,t))},24520:(e,t,r)=>{let n=r(88889);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},83975:(e,t,r)=>{let n=r(84472);e.exports=(e,t)=>e.sort((e,r)=>n(e,r,t))},40628:(e,t,r)=>{let n=r(48242);e.exports=(e,t)=>{let r=n(e,t);return r?r.version:null}},90799:(e,t,r)=>{let n=r(81520),i=r(73651),o=r(28871),a=r(88178),s=r(48242),l=r(40628),u=r(62485),c=r(44580),p=r(10906),d=r(31148),f=r(95662),h=r(34234),y=r(92606),m=r(51586),v=r(92490),g=r(98136),b=r(84472),_=r(83975),T=r(11302),E=r(58368),O=r(89673),S=r(58884),w=r(28305),I=r(76483),N=r(94106),A=r(43978),C=r(39150),P=r(12925),R=r(88889),D=r(24520),F=r(19835),j=r(1446),L=r(75030),x=r(30091),M=r(16269),k=r(45400),$=r(45760),U=r(62884),V=r(53225),G=r(86861),q=r(64550);e.exports={parse:s,valid:l,clean:u,inc:c,diff:p,major:d,minor:f,patch:h,prerelease:y,compare:m,rcompare:v,compareLoose:g,compareBuild:b,sort:_,rsort:T,gt:E,lt:O,eq:S,neq:w,gte:I,lte:N,cmp:A,coerce:C,Comparator:P,Range:R,satisfies:D,toComparators:F,maxSatisfying:j,minSatisfying:L,minVersion:x,validRange:M,outside:k,gtr:$,ltr:U,intersects:V,simplifyRange:G,subset:q,SemVer:o,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},73651:e=>{let t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},1410:e=>{let t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},88178:e=>{let t=/^[0-9]+$/,r=(e,r)=>{let n=t.test(e),i=t.test(r);return n&&i&&(e=+e,r=+r),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},50241:e=>{class t{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}e.exports=t},78949:e=>{let t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},81520:(e,t,r)=>{let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=r(73651),a=r(1410),s=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.t={},p=0,d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[d,i]],h=e=>{for(let[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},y=(e,t,r)=>{let n=h(t),i=p++;a(e,i,t),c[e]=i,u[i]=t,s[i]=new RegExp(t,r?"g":void 0),l[i]=new RegExp(n,r?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),y("MAINVERSION",`(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${u[c.NUMERICIDENTIFIER]}|${u[c.NONNUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${u[c.NUMERICIDENTIFIERLOOSE]}|${u[c.NONNUMERICIDENTIFIER]})`),y("PRERELEASE",`(?:-(${u[c.PRERELEASEIDENTIFIER]}(?:\\.${u[c.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${u[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[c.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${d}+`),y("BUILD",`(?:\\+(${u[c.BUILDIDENTIFIER]}(?:\\.${u[c.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${u[c.MAINVERSION]}${u[c.PRERELEASE]}?${u[c.BUILD]}?`),y("FULL",`^${u[c.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${u[c.MAINVERSIONLOOSE]}${u[c.PRERELEASELOOSE]}?${u[c.BUILD]}?`),y("LOOSE",`^${u[c.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${u[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${u[c.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:${u[c.PRERELEASE]})?${u[c.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:${u[c.PRERELEASELOOSE]})?${u[c.BUILD]}?)?)?`),y("XRANGE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${u[c.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",u[c.COERCEPLAIN]+`(?:${u[c.PRERELEASE]})?`+`(?:${u[c.BUILD]})?`+"(?:$|[^\\d])"),y("COERCERTL",u[c.COERCE],!0),y("COERCERTLFULL",u[c.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${u[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${u[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${u[c.LONECARET]}${u[c.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${u[c.LONECARET]}${u[c.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${u[c.GTLT]}\\s*(${u[c.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]}|${u[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${u[c.XRANGEPLAIN]})\\s+-\\s+(${u[c.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${u[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[c.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},45760:(e,t,r)=>{let n=r(45400);e.exports=(e,t,r)=>n(e,t,">",r)},53225:(e,t,r)=>{let n=r(88889);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},62884:(e,t,r)=>{let n=r(45400);e.exports=(e,t,r)=>n(e,t,"<",r)},1446:(e,t,r)=>{let n=r(28871),i=r(88889);e.exports=(e,t,r)=>{let o=null,a=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!o||-1===a.compare(e))&&(a=new n(o=e,r))}),o}},75030:(e,t,r)=>{let n=r(28871),i=r(88889);e.exports=(e,t,r)=>{let o=null,a=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!o||1===a.compare(e))&&(a=new n(o=e,r))}),o}},30091:(e,t,r)=>{let n=r(28871),i=r(88889),o=r(58368);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r)||(r=new n("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let i=e.set[t],a=null;i.forEach(e=>{let t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!a||o(t,a))&&(a=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),a&&(!r||o(r,a))&&(r=a)}return r&&e.test(r)?r:null}},45400:(e,t,r)=>{let n=r(28871),i=r(12925),{ANY:o}=i,a=r(88889),s=r(24520),l=r(58368),u=r(89673),c=r(94106),p=r(76483);e.exports=(e,t,r,d)=>{let f,h,y,m,v;switch(e=new n(e,d),t=new a(t,d),r){case">":f=l,h=c,y=u,m=">",v=">=";break;case"<":f=u,h=p,y=l,m="<",v="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,d))return!1;for(let r=0;r<t.set.length;++r){let n=t.set[r],a=null,s=null;if(n.forEach(e=>{e.semver===o&&(e=new i(">=0.0.0")),a=a||e,s=s||e,f(e.semver,a.semver,d)?a=e:y(e.semver,s.semver,d)&&(s=e)}),a.operator===m||a.operator===v||(!s.operator||s.operator===m)&&h(e,s.semver)||s.operator===v&&y(e,s.semver))return!1}return!0}},86861:(e,t,r)=>{let n=r(24520),i=r(51586);e.exports=(e,t,r)=>{let o=[],a=null,s=null,l=e.sort((e,t)=>i(e,t,r));for(let e of l)n(e,t,r)?(s=e,a||(a=e)):(s&&o.push([a,s]),s=null,a=null);a&&o.push([a,null]);let u=[];for(let[e,t]of o)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");let c=u.join(" || "),p="string"==typeof t.raw?t.raw:String(t);return c.length<p.length?c:t}},64550:(e,t,r)=>{let n=r(88889),i=r(12925),{ANY:o}=i,a=r(24520),s=r(51586),l=[new i(">=0.0.0-0")],u=[new i(">=0.0.0")],c=(e,t,r)=>{let n,i,c,f,h,y,m;if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=r.includePrerelease?l:u}if(1===t.length&&t[0].semver===o){if(r.includePrerelease)return!0;t=u}let v=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=p(n,t,r):"<"===t.operator||"<="===t.operator?i=d(i,t,r):v.add(t.semver);if(v.size>1||n&&i&&((c=s(n.semver,i.semver,r))>0||0===c&&(">="!==n.operator||"<="!==i.operator)))return null;for(let e of v){if(n&&!a(e,String(n),r)||i&&!a(e,String(i),r))return null;for(let n of t)if(!a(e,String(n),r))return!1;return!0}let g=!!i&&!r.includePrerelease&&!!i.semver.prerelease.length&&i.semver,b=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(g&&1===g.prerelease.length&&"<"===i.operator&&0===g.prerelease[0]&&(g=!1),t)){if(m=m||">"===e.operator||">="===e.operator,y=y||"<"===e.operator||"<="===e.operator,n){if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if((f=p(n,e,r))===e&&f!==n)return!1}else if(">="===n.operator&&!a(n.semver,String(e),r))return!1}if(i){if(g&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===g.major&&e.semver.minor===g.minor&&e.semver.patch===g.patch&&(g=!1),"<"===e.operator||"<="===e.operator){if((h=d(i,e,r))===e&&h!==i)return!1}else if("<="===i.operator&&!a(i.semver,String(e),r))return!1}if(!e.operator&&(i||n)&&0!==c)return!1}return(!n||!y||!!i||0===c)&&(!i||!m||!!n||0===c)&&!b&&!g},p=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n>0?e:n<0?t:">"===t.operator&&">="===e.operator?t:e},d=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n<0?e:n>0?t:"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;n:for(let n of e.set){for(let e of t.set){let t=c(n,e,r);if(i=i||null!==t,t)continue n}if(i)return!1}return!0}},19835:(e,t,r)=>{let n=r(88889);e.exports=(e,t)=>new n(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},16269:(e,t,r)=>{let n=r(88889);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},10481:e=>{"use strict";function t(e,t,r,n,i){for(let o=0;o<i;++o)if(e[t+o]!==r[n+o])return!1;return!0}class r{constructor(e,t){if("function"!=typeof t)throw Error("Missing match callback");if("string"==typeof e)e=Buffer.from(e);else if(!Buffer.isBuffer(e))throw Error(`Expected Buffer for needle, got ${typeof e}`);let r=e.length;if(this.maxMatches=1/0,this.matches=0,this._cb=t,this._lookbehindSize=0,this._needle=e,this._bufPos=0,this._lookbehind=Buffer.allocUnsafe(r),this._occ=[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r],r>1)for(let t=0;t<r-1;++t)this._occ[e[t]]=r-1-t}reset(){this.matches=0,this._lookbehindSize=0,this._bufPos=0}push(e,r){let i;Buffer.isBuffer(e)||(e=Buffer.from(e,"latin1"));let o=e.length;for(this._bufPos=r||0;i!==o&&this.matches<this.maxMatches;)i=function(e,r){let i=r.length,o=e._needle,a=o.length,s=-e._lookbehindSize,l=a-1,u=o[l],c=i-a,p=e._occ,d=e._lookbehind;if(s<0){for(;s<0&&s<=c;){let t=s+l,i=t<0?d[e._lookbehindSize+t]:r[t];if(i===u&&n(e,r,s,l))return e._lookbehindSize=0,++e.matches,s>-e._lookbehindSize?e._cb(!0,d,0,e._lookbehindSize+s,!1):e._cb(!0,void 0,0,0,!0),e._bufPos=s+a;s+=p[i]}for(;s<0&&!n(e,r,s,i-s);)++s;if(s<0){let t=e._lookbehindSize+s;return t>0&&e._cb(!1,d,0,t,!1),e._lookbehindSize-=t,d.copy(d,0,t,e._lookbehindSize),d.set(r,e._lookbehindSize),e._lookbehindSize+=i,e._bufPos=i,i}e._cb(!1,d,0,e._lookbehindSize,!1),e._lookbehindSize=0}s+=e._bufPos;let f=o[0];for(;s<=c;){let n=r[s+l];if(n===u&&r[s]===f&&t(o,0,r,s,l))return++e.matches,s>0?e._cb(!0,r,e._bufPos,s,!0):e._cb(!0,void 0,0,0,!0),e._bufPos=s+a;s+=p[n]}for(;s<i;){if(r[s]!==f||!t(r,s,o,0,i-s)){++s;continue}r.copy(d,0,s,i),e._lookbehindSize=i-s;break}return s>0&&e._cb(!1,r,e._bufPos,s<i?s:i,!0),e._bufPos=i,i}(this,e);return i}destroy(){let e=this._lookbehindSize;e&&this._cb(!1,this._lookbehind,0,e,!1),this.reset()}}function n(e,t,r,n){let i=e._lookbehind,o=e._lookbehindSize,a=e._needle;for(let e=0;e<n;++e,++r)if((r<0?i[o+r]:t[r])!==a[e])return!1;return!0}e.exports=r},67057:(e,t,r)=>{"use strict";let n;let i=r(22037),o=r(76224),a=r(72616),{env:s}=process;function l(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function u(e,t){if(0===n)return 0;if(a("color=16m")||a("color=full")||a("color=truecolor"))return 3;if(a("color=256"))return 2;if(e&&!t&&void 0===n)return 0;let r=n||0;if("dumb"===s.TERM)return r;if("win32"===process.platform){let e=i.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in s)||"codeship"===s.CI_NAME?1:r;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){let e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:r}a("no-color")||a("no-colors")||a("color=false")||a("color=never")?n=0:(a("color")||a("colors")||a("color=true")||a("color=always"))&&(n=1),"FORCE_COLOR"in s&&(n="true"===s.FORCE_COLOR?1:"false"===s.FORCE_COLOR?0:0===s.FORCE_COLOR.length?1:Math.min(parseInt(s.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return l(u(e,e&&e.isTTY))},stdout:l(u(!0,o.isatty(1))),stderr:l(u(!0,o.isatty(2)))}},34495:(e,t,r)=>{"use strict";let n=r(79631),i=(e,t,r)=>{if(!1===n(e))throw TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===n(t))throw TypeError("toRegexRange: expected the second argument to be a number.");let s={relaxZeros:!0,...r};"boolean"==typeof s.strictZeros&&(s.relaxZeros=!1===s.strictZeros);let l=e+":"+t+"="+String(s.relaxZeros)+String(s.shorthand)+String(s.capture)+String(s.wrap);if(i.cache.hasOwnProperty(l))return i.cache[l].result;let u=Math.min(e,t),c=Math.max(e,t);if(1===Math.abs(u-c)){let r=e+"|"+t;return s.capture?`(${r})`:!1===s.wrap?r:`(?:${r})`}let p=d(e)||d(t),f={min:e,max:t,a:u,b:c},h=[],y=[];return p&&(f.isPadded=p,f.maxLen=String(f.max).length),u<0&&(y=o(c<0?Math.abs(c):1,Math.abs(u),f,s),u=f.a=0),c>=0&&(h=o(u,c,f,s)),f.negatives=y,f.positives=h,f.result=function(e,t,r){let n=a(e,t,"-",!1,r)||[],i=a(t,e,"",!1,r)||[],o=a(e,t,"-?",!0,r)||[];return n.concat(o).concat(i).join("|")}(y,h,s),!0===s.capture?f.result=`(${f.result})`:!1!==s.wrap&&h.length+y.length>1&&(f.result=`(?:${f.result})`),i.cache[l]=f,f.result};function o(e,t,r,n){let i,o=function(e,t){let r=1,n=1,i=u(e,1),o=new Set([t]);for(;e<=i&&i<=t;)o.add(i),r+=1,i=u(e,r);for(i=c(t+1,n)-1;e<i&&i<=t;)o.add(i),n+=1,i=c(t+1,n)-1;return(o=[...o]).sort(s),o}(e,t),a=[],l=e;for(let e=0;e<o.length;e++){let t=o[e],s=function(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=function(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}(e,t),i=n.length,o="",a=0;for(let e=0;e<i;e++){let[t,r]=n[e];t===r?o+=t:"0"!==t||"9"!==r?o+=`[${t}${r-t==1?"":"-"}${r}]`:a++}return a&&(o+=!0===r.shorthand?"\\d":"[0-9]"),{pattern:o,count:[a],digits:i}}(String(l),String(t),n),u="";if(!r.isPadded&&i&&i.pattern===s.pattern){i.count.length>1&&i.count.pop(),i.count.push(s.count[0]),i.string=i.pattern+p(i.count),l=t+1;continue}r.isPadded&&(u=function(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),i=!1!==r.relaxZeros;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}(t,r,n)),s.string=u+s.pattern+p(s.count),a.push(s),l=t+1,i=s}return a}function a(e,t,r,n,i){let o=[];for(let i of e){let{string:e}=i;n||l(t,"string",e)||o.push(r+e),n&&l(t,"string",e)&&o.push(r+e)}return o}function s(e,t){return e>t?1:t>e?-1:0}function l(e,t,r){return e.some(e=>e[t]===r)}function u(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function c(e,t){return e-e%Math.pow(10,t)}function p(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function d(e){return/^-?(0+)\d/.test(e)}i.cache={},i.clearCache=()=>i.cache={},e.exports=i},65106:(e,t,r)=>{"use strict";function n(e){let t,r,n;return"object"==typeof e?(t=e.hashFunction,r=e.expiring,n=e.tags):t=e,(e,i,o)=>{if(null!=o.value)o.value=s(o.value,t,r,n);else if(null!=o.get)o.get=s(o.get,t,r,n);else throw"Only put a Memoize() decorator on a method or get accessor."}}function i(e,t){return n({expiring:e,hashFunction:t})}r.r(t),r.d(t,{Memoize:()=>n,MemoizeExpiring:()=>i,clear:()=>a});let o=new Map;function a(e){let t=new Set;for(let r of e){let e=o.get(r);if(e)for(let r of e)t.has(r)||(r.clear(),t.add(r))}return t.size}function s(e,t,r=0,n){let i=Symbol("__memoized_map__");return function(...a){let s;this.hasOwnProperty(i)||Object.defineProperty(this,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let l=this[i];if(Array.isArray(n))for(let e of n)o.has(e)?o.get(e).push(l):o.set(e,[l]);if(t||a.length>0||r>0){let n;n=!0===t?a.map(e=>e.toString()).join("!"):t?t.apply(this,a):a[0];let i=`${n}__timestamp`,o=!1;if(r>0){if(l.has(i)){let e=l.get(i);o=Date.now()-e>r}else o=!0}l.has(n)&&!o?s=l.get(n):(s=e.apply(this,a),l.set(n,s),r>0&&l.set(i,Date.now()))}else l.has(this)?s=l.get(this):(s=e.apply(this,a),l.set(this,s));return s}}},37359:(e,t,r)=>{"use strict";let n,i;r.r(t),r.d(t,{NIL:()=>S,parse:()=>g,stringify:()=>h,v1:()=>v,v3:()=>_,v4:()=>E,v5:()=>O,validate:()=>p,version:()=>w});var o=r(6113),a=r.n(o);let s=new Uint8Array(256),l=s.length;function u(){return l>s.length-16&&(a().randomFillSync(s),l=0),s.slice(l,l+=16)}let c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,p=function(e){return"string"==typeof e&&c.test(e)},d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).slice(1));function f(e,t=0){return d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]}let h=function(e,t=0){let r=f(e,t);if(!p(r))throw TypeError("Stringified UUID is invalid");return r},y=0,m=0,v=function(e,t,r){let o=t&&r||0,a=t||Array(16),s=(e=e||{}).node||n,l=void 0!==e.clockseq?e.clockseq:i;if(null==s||null==l){let t=e.random||(e.rng||u)();null==s&&(s=n=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==l&&(l=i=(t[6]<<8|t[7])&16383)}let c=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:m+1,d=c-y+(p-m)/1e4;if(d<0&&void 0===e.clockseq&&(l=l+1&16383),(d<0||c>y)&&void 0===e.nsecs&&(p=0),p>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");y=c,m=p,i=l;let h=((268435455&(c+=122192928e5))*1e4+p)%4294967296;a[o++]=h>>>24&255,a[o++]=h>>>16&255,a[o++]=h>>>8&255,a[o++]=255&h;let v=c/4294967296*1e4&268435455;a[o++]=v>>>8&255,a[o++]=255&v,a[o++]=v>>>24&15|16,a[o++]=v>>>16&255,a[o++]=l>>>8|128,a[o++]=255&l;for(let e=0;e<6;++e)a[o+e]=s[e];return t||f(a)},g=function(e){let t;if(!p(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function b(e,t,r){function n(e,n,i,o){var a;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=g(n)),(null===(a=n)||void 0===a?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=s[e];return i}return f(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}let _=b("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),a().createHash("md5").update(e).digest()}),T={randomUUID:a().randomUUID},E=function(e,t,r){if(T.randomUUID&&!t&&!e)return T.randomUUID();let n=(e=e||{}).random||(e.rng||u)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return f(n)},O=b("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),a().createHash("sha1").update(e).digest()}),S="00000000-0000-0000-0000-000000000000",w=function(e){if(!p(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},43983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cacheControlFromInfo=t.maybeCacheControlFromInfo=void 0,t.maybeCacheControlFromInfo=function(e){return e.cacheControl?.cacheHint?.restrict?e.cacheControl:null},t.cacheControlFromInfo=function(e){if(!("cacheControl"in e))throw Error("The `info` argument does not appear to have a cacheControl field. Check that you are using Apollo Server 3 or newer and that you aren't using ApolloServerPluginCacheControlDisabled.");if(!e.cacheControl?.cacheHint?.restrict)throw Error("The `info` argument has a cacheControl field but it does not appear to be from ApolloServer 3 or newer. Check that you are using Apollo Server 3 or newer and that you aren't using ApolloServerPluginCacheControlDisabled.");return e.cacheControl}},28135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyExtensions=t.mergeExtensions=t.extractExtensionsFromSchema=void 0;let n=r(14364);var i=r(14364);function o(e,t){if(e&&t&&t!==e.extensions){if(!e.extensions){e.extensions=t;return}e.extensions=(0,n.mergeDeep)([e.extensions,t],!1,!0)}}Object.defineProperty(t,"extractExtensionsFromSchema",{enumerable:!0,get:function(){return i.extractExtensionsFromSchema}}),t.mergeExtensions=function(e){return(0,n.mergeDeep)(e,!1,!0)},t.applyExtensions=function(e,t){for(let[r,n]of(o(e,t.schemaExtensions),Object.entries(t.types||{}))){let t=e.getType(r);if(t){if(o(t,n.extensions),"object"===n.type||"interface"===n.type)for(let[e,r]of Object.entries(n.fields)){let n=t.getFields()[e];if(n)for(let[e,t]of(o(n,r.extensions),Object.entries(r.arguments)))o(n.args.find(t=>t.name===e),t)}else if("input"===n.type)for(let[e,r]of Object.entries(n.fields))o(t.getFields()[e],r.extensions);else if("enum"===n.type)for(let[e,r]of Object.entries(n.values))o(t.getValue(e),r)}}return e}},21602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(82174);n.__exportStar(r(13558),t),n.__exportStar(r(45188),t),n.__exportStar(r(28135),t)},13558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeResolvers=void 0;let n=r(14364);t.mergeResolvers=function e(t,r){if(!t||Array.isArray(t)&&0===t.length)return{};if(!Array.isArray(t))return t;if(1===t.length)return t[0]||{};let i=[];for(let r of t)Array.isArray(r)&&(r=e(r)),"object"==typeof r&&r&&i.push(r);let o=(0,n.mergeDeep)(i,!0);if(r?.exclusions)for(let e of r.exclusions){let[t,r]=e.split(".");r&&"*"!==r?o[t]&&delete o[t][r]:delete o[t]}return o}},45811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeArguments=void 0;let n=r(14364);t.mergeArguments=function(e,t,r){let i=[...t,...e].filter(n.isSome).reduce((e,t)=>{let n=e.findIndex(e=>e.name.value===t.name.value);return -1===n?e.concat([t]):(r?.reverseArguments||(e[n]=t),e)},[]);return r&&r.sort&&i.sort(n.compareNodes),i}},90047:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeDirective=t.mergeDirectives=void 0;let n=r(14364);function i(e,t){return!!t?.[e.name.value]?.repeatable}function o(e,t){return t.some(({value:t})=>t===e.value)}function a(e,t){let r=[...t];for(let t of e){let e=r.findIndex(e=>e.name.value===t.name.value);if(e>-1){let n=r[e];if("ListValue"===n.value.kind){let e=n.value.values,r=t.value.values;n.value.values=s(e,r,(e,t)=>{let r=e.value;return!r||!t.some(e=>e.value===r)})}else n.value=t.value}else r.push(t)}return r}function s(e,t,r){return e.concat(t.filter(t=>r(t,e)))}t.mergeDirectives=function(e=[],t=[],r,o){let s=r&&r.reverseDirectives,l=[...s?e:t].map((e,t,r)=>{let n=r.findIndex(t=>t.name.value===e.name.value);if(n!==t&&!i(e,o)){let t=r[n];return e.arguments=a(e.arguments,t.arguments),null}return e}).filter(n.isSome);for(let r of s?t:e)if(function(e,t){return!!e.find(e=>e.name.value===t.name.value)}(l,r)&&!i(r,o)){let e=l.findIndex(e=>e.name.value===r.name.value),t=l[e];l[e].arguments=a(r.arguments||[],t.arguments||[])}else l.push(r);return l},t.mergeDirective=function(e,t){return t?{...e,arguments:s(t.arguments||[],e.arguments||[],(e,t)=>!o(e.name,t.map(e=>e.name))),locations:[...t.locations,...e.locations.filter(e=>!o(e,t.locations))]}:e}},22507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeEnumValues=void 0;let n=r(14364),i=r(90047);t.mergeEnumValues=function(e,t,r,o){if(r?.consistentEnumMerge){let r=[];e&&r.push(...e),e=t,t=r}let a=new Map;if(e)for(let t of e)a.set(t.name.value,t);if(t)for(let e of t){let t=e.name.value;if(a.has(t)){let r=a.get(t);r.description=e.description||r.description,r.directives=(0,i.mergeDirectives)(e.directives,r.directives,o)}else a.set(t,e)}let s=[...a.values()];return r&&r.sort&&s.sort(n.compareNodes),s}},12340:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeEnum=void 0;let n=r(57343),i=r(90047),o=r(22507);t.mergeEnum=function(e,t,r,a){return t?{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"EnumTypeDefinition"===e.kind||"EnumTypeDefinition"===t.kind?"EnumTypeDefinition":"EnumTypeExtension",loc:e.loc,directives:(0,i.mergeDirectives)(e.directives,t.directives,r,a),values:(0,o.mergeEnumValues)(e.values,t.values,r)}:r?.convertExtensions?{...e,kind:n.Kind.ENUM_TYPE_DEFINITION}:e}},18596:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeFields=void 0;let n=r(14364),i=r(45811),o=r(90047),a=r(11463);t.mergeFields=function(e,t,r,s,l){let u=[];if(null!=r&&u.push(...r),null!=t)for(let r of t){let[t,n]=function(e,t){let r=e.findIndex(e=>e.name.value===t.name.value);return[r>-1?e[r]:null,r]}(u,r);if(t&&!s?.ignoreFieldConflicts){let c=s?.onFieldTypeConflict&&s.onFieldTypeConflict(t,r,e,s?.throwOnConflict)||function(e,t,r,n=!1){let i=(0,a.printTypeNode)(t.type),o=(0,a.printTypeNode)(r.type);if(i!==o){let s=(0,a.extractType)(t.type),l=(0,a.extractType)(r.type);if(s.name.value!==l.name.value)throw Error(`Field "${r.name.value}" already defined with a different type. Declared as "${s.name.value}", but you tried to override with "${l.name.value}"`);if(!function e(t,r,n=!1){return(0,a.isWrappingTypeNode)(t)||(0,a.isWrappingTypeNode)(r)?(0,a.isNonNullTypeNode)(r)?e((0,a.isNonNullTypeNode)(t)?t.type:t,r.type):(0,a.isNonNullTypeNode)(t)?e(r,t,n):!!(0,a.isListTypeNode)(t)&&((0,a.isListTypeNode)(r)&&e(t.type,r.type)||(0,a.isNonNullTypeNode)(r)&&e(t,r.type)):t.toString()===r.toString()}(t.type,r.type,!n))throw Error(`Field '${e.name.value}.${t.name.value}' changed type from '${i}' to '${o}'`)}return(0,a.isNonNullTypeNode)(r.type)&&!(0,a.isNonNullTypeNode)(t.type)&&(t.type=r.type),t}(e,t,r,s?.throwOnConflict);c.arguments=(0,i.mergeArguments)(r.arguments||[],t.arguments||[],s),c.directives=(0,o.mergeDirectives)(r.directives,t.directives,s,l),c.description=r.description||t.description,u[n]=c}else u.push(r)}if(s&&s.sort&&u.sort(n.compareNodes),s&&s.exclusions){let t=s.exclusions;return u.filter(r=>!t.includes(`${e.name.value}.${r.name.value}`))}return u}},45188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(82174);n.__exportStar(r(45811),t),n.__exportStar(r(90047),t),n.__exportStar(r(22507),t),n.__exportStar(r(12340),t),n.__exportStar(r(18596),t),n.__exportStar(r(70843),t),n.__exportStar(r(26234),t),n.__exportStar(r(13752),t),n.__exportStar(r(56484),t),n.__exportStar(r(92387),t),n.__exportStar(r(18889),t),n.__exportStar(r(96057),t),n.__exportStar(r(6915),t),n.__exportStar(r(11463),t)},70843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeInputType=void 0;let n=r(57343),i=r(90047),o=r(18596);t.mergeInputType=function(e,t,r,a){if(t)try{return{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"InputObjectTypeDefinition"===e.kind||"InputObjectTypeDefinition"===t.kind?"InputObjectTypeDefinition":"InputObjectTypeExtension",loc:e.loc,fields:(0,o.mergeFields)(e,e.fields,t.fields,r),directives:(0,i.mergeDirectives)(e.directives,t.directives,r,a)}}catch(t){throw Error(`Unable to merge GraphQL input type "${e.name.value}": ${t.message}`)}return r?.convertExtensions?{...e,kind:n.Kind.INPUT_OBJECT_TYPE_DEFINITION}:e}},26234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeInterface=void 0;let n=r(57343),i=r(90047),o=r(18596),a=r(13752);t.mergeInterface=function(e,t,r,s){if(t)try{return{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"InterfaceTypeDefinition"===e.kind||"InterfaceTypeDefinition"===t.kind?"InterfaceTypeDefinition":"InterfaceTypeExtension",loc:e.loc,fields:(0,o.mergeFields)(e,e.fields,t.fields,r,s),directives:(0,i.mergeDirectives)(e.directives,t.directives,r,s),interfaces:e.interfaces?(0,a.mergeNamedTypeArray)(e.interfaces,t.interfaces,r):void 0}}catch(t){throw Error(`Unable to merge GraphQL interface "${e.name.value}": ${t.message}`)}return r?.convertExtensions?{...e,kind:n.Kind.INTERFACE_TYPE_DEFINITION}:e}},13752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeNamedTypeArray=void 0;let n=r(14364);t.mergeNamedTypeArray=function(e=[],t=[],r={}){let i=[...t,...e.filter(e=>!t.find(t=>t.name.value===e.name.value))];return r&&r.sort&&i.sort(n.compareNodes),i}},56484:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeGraphQLNodes=t.isNamedDefinitionNode=t.schemaDefSymbol=void 0;let n=r(57343),i=r(14364),o=r(90047),a=r(12340),s=r(70843),l=r(26234),u=r(18889),c=r(16333),p=r(96057),d=r(6915);function f(e){return"name"in e}t.schemaDefSymbol="SCHEMA_DEF_SYMBOL",t.isNamedDefinitionNode=f,t.mergeGraphQLNodes=function(e,r,h={}){for(let m of e)if(f(m)){let e=m.name?.value;if(r?.commentDescriptions&&(0,i.collectComment)(m),null==e)continue;if(r?.exclusions?.includes(e+".*")||r?.exclusions?.includes(e))delete h[e];else switch(m.kind){case n.Kind.OBJECT_TYPE_DEFINITION:case n.Kind.OBJECT_TYPE_EXTENSION:h[e]=(0,p.mergeType)(m,h[e],r,h);break;case n.Kind.ENUM_TYPE_DEFINITION:case n.Kind.ENUM_TYPE_EXTENSION:h[e]=(0,a.mergeEnum)(m,h[e],r,h);break;case n.Kind.UNION_TYPE_DEFINITION:case n.Kind.UNION_TYPE_EXTENSION:h[e]=(0,d.mergeUnion)(m,h[e],r,h);break;case n.Kind.SCALAR_TYPE_DEFINITION:case n.Kind.SCALAR_TYPE_EXTENSION:h[e]=(0,u.mergeScalar)(m,h[e],r,h);break;case n.Kind.INPUT_OBJECT_TYPE_DEFINITION:case n.Kind.INPUT_OBJECT_TYPE_EXTENSION:h[e]=(0,s.mergeInputType)(m,h[e],r,h);break;case n.Kind.INTERFACE_TYPE_DEFINITION:case n.Kind.INTERFACE_TYPE_EXTENSION:h[e]=(0,l.mergeInterface)(m,h[e],r,h);break;case n.Kind.DIRECTIVE_DEFINITION:var y;h[e]&&e in{}&&!(null!=(y=h[e])&&"object"==typeof y&&"kind"in y&&"string"==typeof y.kind)&&(h[e]=void 0),h[e]=(0,o.mergeDirective)(m,h[e])}}else(m.kind===n.Kind.SCHEMA_DEFINITION||m.kind===n.Kind.SCHEMA_EXTENSION)&&(h[t.schemaDefSymbol]=(0,c.mergeSchemaDefs)(m,h[t.schemaDefSymbol],r));return h}},92387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeGraphQLTypes=t.mergeTypeDefs=void 0;let n=r(57343),i=r(14364),o=r(56484),a=r(16333),s=r(11463);function l(e,t){(0,i.resetComments)();let{allDirectives:r,allNodes:l}=function e(t,r,o=[],a=[],l=new Set){if(t&&!l.has(t)){if(l.add(t),"function"==typeof t)e(t(),r,o,a,l);else if(Array.isArray(t))for(let n of t)e(n,r,o,a,l);else if((0,n.isSchema)(t))e((0,i.getDocumentNodeFromSchema)(t,r).definitions,r,o,a,l);else if((0,s.isStringTypes)(t)||(0,s.isSourceTypes)(t))e((0,n.parse)(t,r).definitions,r,o,a,l);else if("object"==typeof t&&(0,n.isDefinitionNode)(t))t.kind===n.Kind.DIRECTIVE_DEFINITION?o.push(t):a.push(t);else if((0,i.isDocumentNode)(t))e(t.definitions,r,o,a,l);else throw Error(`typeDefs must contain only strings, documents, schemas, or functions, got ${typeof t}`)}return{allDirectives:o,allNodes:a}}(e,t),u=(0,o.mergeGraphQLNodes)(r,t),c=(0,o.mergeGraphQLNodes)(l,t,u);if(t?.useSchemaDefinition){let e=c[o.schemaDefSymbol]||{kind:n.Kind.SCHEMA_DEFINITION,operationTypes:[]},t=e.operationTypes;for(let e in a.DEFAULT_OPERATION_TYPE_NAME_MAP)if(!t.find(t=>t.operation===e)){let r=c[a.DEFAULT_OPERATION_TYPE_NAME_MAP[e]];null!=r&&null!=r.name&&t.push({kind:n.Kind.OPERATION_TYPE_DEFINITION,type:{kind:n.Kind.NAMED_TYPE,name:r.name},operation:e})}e?.operationTypes?.length!=null&&e.operationTypes.length>0&&(c[o.schemaDefSymbol]=e)}t?.forceSchemaDefinition&&!c[o.schemaDefSymbol]?.operationTypes?.length&&(c[o.schemaDefSymbol]={kind:n.Kind.SCHEMA_DEFINITION,operationTypes:[{kind:n.Kind.OPERATION_TYPE_DEFINITION,operation:"query",type:{kind:n.Kind.NAMED_TYPE,name:{kind:n.Kind.NAME,value:"Query"}}}]});let p=Object.values(c);if(t?.sort){let e="function"==typeof t.sort?t.sort:s.defaultStringComparator;p.sort((t,r)=>e(t.name?.value,r.name?.value))}return p}t.mergeTypeDefs=function(e,t){let r;(0,i.resetComments)();let o={kind:n.Kind.DOCUMENT,definitions:l(e,{useSchemaDefinition:!0,forceSchemaDefinition:!1,throwOnConflict:!1,commentDescriptions:!1,...t})};return r=t?.commentDescriptions?(0,i.printWithComments)(o):o,(0,i.resetComments)(),r},t.mergeGraphQLTypes=l},18889:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeScalar=void 0;let n=r(57343),i=r(90047);t.mergeScalar=function(e,t,r,o){return t?{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"ScalarTypeDefinition"===e.kind||"ScalarTypeDefinition"===t.kind?"ScalarTypeDefinition":"ScalarTypeExtension",loc:e.loc,directives:(0,i.mergeDirectives)(e.directives,t.directives,r,o)}:r?.convertExtensions?{...e,kind:n.Kind.SCALAR_TYPE_DEFINITION}:e}},16333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeSchemaDefs=t.DEFAULT_OPERATION_TYPE_NAME_MAP=void 0;let n=r(57343),i=r(90047);t.DEFAULT_OPERATION_TYPE_NAME_MAP={query:"Query",mutation:"Mutation",subscription:"Subscription"},t.mergeSchemaDefs=function(e,r,o,a){return r?{kind:e.kind===n.Kind.SCHEMA_DEFINITION||r.kind===n.Kind.SCHEMA_DEFINITION?n.Kind.SCHEMA_DEFINITION:n.Kind.SCHEMA_EXTENSION,description:e.description||r.description,directives:(0,i.mergeDirectives)(e.directives,r.directives,o,a),operationTypes:function(e=[],r=[]){let n=[];for(let i in t.DEFAULT_OPERATION_TYPE_NAME_MAP){let t=e.find(e=>e.operation===i)||r.find(e=>e.operation===i);t&&n.push(t)}return n}(e.operationTypes,r.operationTypes)}:o?.convertExtensions?{...e,kind:n.Kind.SCHEMA_DEFINITION}:e}},96057:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeType=void 0;let n=r(57343),i=r(90047),o=r(18596),a=r(13752);t.mergeType=function(e,t,r,s){if(t)try{return{name:e.name,description:e.description||t.description,kind:r?.convertExtensions||"ObjectTypeDefinition"===e.kind||"ObjectTypeDefinition"===t.kind?"ObjectTypeDefinition":"ObjectTypeExtension",loc:e.loc,fields:(0,o.mergeFields)(e,e.fields,t.fields,r,s),directives:(0,i.mergeDirectives)(e.directives,t.directives,r,s),interfaces:(0,a.mergeNamedTypeArray)(e.interfaces,t.interfaces,r)}}catch(t){throw Error(`Unable to merge GraphQL type "${e.name.value}": ${t.message}`)}return r?.convertExtensions?{...e,kind:n.Kind.OBJECT_TYPE_DEFINITION}:e}},6915:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeUnion=void 0;let n=r(57343),i=r(90047),o=r(13752);t.mergeUnion=function(e,t,r,a){return t?{name:e.name,description:e.description||t.description,directives:(0,i.mergeDirectives)(e.directives,t.directives,r,a),kind:r?.convertExtensions||"UnionTypeDefinition"===e.kind||"UnionTypeDefinition"===t.kind?n.Kind.UNION_TYPE_DEFINITION:n.Kind.UNION_TYPE_EXTENSION,loc:e.loc,types:(0,o.mergeNamedTypeArray)(e.types,t.types,r)}:r?.convertExtensions?{...e,kind:n.Kind.UNION_TYPE_DEFINITION}:e}},11463:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.defaultStringComparator=t.CompareVal=t.printTypeNode=t.isNonNullTypeNode=t.isListTypeNode=t.isWrappingTypeNode=t.extractType=t.isSourceTypes=t.isStringTypes=void 0;let i=r(57343);function o(e){return e.kind===i.Kind.LIST_TYPE}function a(e){return e.kind===i.Kind.NON_NULL_TYPE}t.isStringTypes=function(e){return"string"==typeof e},t.isSourceTypes=function(e){return e instanceof i.Source},t.extractType=function(e){let t=e;for(;t.kind===i.Kind.LIST_TYPE||"NonNullType"===t.kind;)t=t.type;return t},t.isWrappingTypeNode=function(e){return e.kind!==i.Kind.NAMED_TYPE},t.isListTypeNode=o,t.isNonNullTypeNode=a,t.printTypeNode=function e(t){return o(t)?`[${e(t.type)}]`:a(t)?`${e(t.type)}!`:t.name.value},function(e){e[e.A_SMALLER_THAN_B=-1]="A_SMALLER_THAN_B",e[e.A_EQUALS_B=0]="A_EQUALS_B",e[e.A_GREATER_THAN_B=1]="A_GREATER_THAN_B"}(n||(t.CompareVal=n={})),t.defaultStringComparator=function(e,t){return null==e&&null==t?n.A_EQUALS_B:null==e?n.A_SMALLER_THAN_B:null==t?n.A_GREATER_THAN_B:e<t?n.A_SMALLER_THAN_B:e>t?n.A_GREATER_THAN_B:n.A_EQUALS_B}},38431:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chainFunctions=void 0,t.chainFunctions=function(e){return 1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}},48244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(82174).__exportStar(r(79542),t)},79542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.composeResolvers=void 0;let n=r(82174),i=n.__importDefault(r(41623)),o=n.__importDefault(r(21242)),a=r(14364),s=r(38431);function l(e,t){if(!e)return[];let[r,n]=t.split("."),i=o.default.matcher(r),a=n;a.includes("{")&&!a.includes(",")&&(a=n.replace("{","").replace("}","")),a=a.replace(", ",",").trim();let s=o.default.matcher(a),l=[];for(let t in e){var u;if(!i(t)||(u=e[t])&&"serialize"in u&&"parseLiteral"in u)continue;let r=e[t];if(!r)return[];for(let n in r){if(!s(n))continue;let r=`${t}.${n}`;e[t]&&e[t][n]&&(e[t][n].subscribe&&l.push(r+".subscribe"),e[t][n].resolve&&l.push(r+".resolve"),"function"==typeof e[t][n]&&l.push(r))}}return l}t.composeResolvers=function(e,t={}){let r={};for(let n in t){let i=t[n];if(i instanceof Array||"function"==typeof i)for(let t of l(e,n))r[t]=(0,a.asArray)(i);else if(i)for(let t in i){let o=i[t];for(let i of l(e,n+"."+t))r[i]=(0,a.asArray)(o)}}for(let t in r){let n=(0,s.chainFunctions)([...(0,a.asArray)(r[t]),()=>i.default.get(e,t)]);i.default.set(e,t,n())}return e}},65782:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addResolversToSchema=void 0;let n=r(57343),i=r(14364),o=r(81009),a=r(50728);function s(e,t){for(let r in t)e[r]=t[r]}t.addResolversToSchema=function({schema:e,resolvers:t,defaultFieldResolver:r,resolverValidationOptions:l={},inheritResolversFromInterfaces:u=!1,updateResolversInPlace:c=!1}){var p;let{requireResolversToMatchSchema:d="error",requireResolversForResolveType:f}=l,h=u?(0,a.extendResolversFromInterfaces)(e,t):t;for(let t in h){let r=h[t];if("object"!=typeof r)throw Error(`"${t}" defined in resolvers, but has invalid value "${r}". The resolver's value must be of type object.`);let i=e.getType(t);if(null==i){let e=`"${t}" defined in resolvers, but not in schema`;if(d&&"error"!==d){"warn"===d&&console.warn(e);continue}throw Error(e)}if((0,n.isSpecifiedScalarType)(i))for(let e in r)e.startsWith("__")?i[e.substring(2)]=r[e]:i[e]=r[e];else if((0,n.isEnumType)(i)){let e=i.getValues();for(let t in r)if(!t.startsWith("__")&&!e.some(e=>e.name===t)&&d&&"ignore"!==d){let e=`${i.name}.${t} was defined in resolvers, but not present within ${i.name}`;if("error"===d)throw Error(e);console.warn(e)}}else if((0,n.isUnionType)(i)){for(let e in r)if(!e.startsWith("__")&&d&&"ignore"!==d){let t=`${i.name}.${e} was defined in resolvers, but ${i.name} is not an object or interface type`;if("error"===d)throw Error(t);console.warn(t)}}else if((0,n.isObjectType)(i)||(0,n.isInterfaceType)(i)){for(let e in r)if(!e.startsWith("__")){if(null==i.getFields()[e]){if(d&&"ignore"!==d){let r=`${t}.${e} defined in resolvers, but not in schema`;if("error"===d)throw Error(r);console.error(r)}}else{let n=r[e];if("function"!=typeof n&&"object"!=typeof n)throw Error(`Resolver ${t}.${e} must be object or function`)}}}}return e=c?function(e,t,r){let o=e.getTypeMap();for(let r in t){let i=e.getType(r),a=t[r];if((0,n.isScalarType)(i))for(let e in a)e.startsWith("__")?i[e.substring(2)]=a[e]:"astNode"===e&&null!=i.astNode?i.astNode={...i.astNode,description:a?.astNode?.description??i.astNode.description,directives:(i.astNode.directives??[]).concat(a?.astNode?.directives??[])}:"extensionASTNodes"===e&&null!=i.extensionASTNodes?i.extensionASTNodes=i.extensionASTNodes.concat(a?.extensionASTNodes??[]):"extensions"===e&&null!=i.extensions&&null!=a.extensions?i.extensions=Object.assign(Object.create(null),i.extensions,a.extensions):i[e]=a[e];else if((0,n.isEnumType)(i)){let e=i.toConfig(),t=e.values;for(let r in a)r.startsWith("__")?e[r.substring(2)]=a[r]:"astNode"===r&&null!=e.astNode?e.astNode={...e.astNode,description:a?.astNode?.description??e.astNode.description,directives:(e.astNode.directives??[]).concat(a?.astNode?.directives??[])}:"extensionASTNodes"===r&&null!=e.extensionASTNodes?e.extensionASTNodes=e.extensionASTNodes.concat(a?.extensionASTNodes??[]):"extensions"===r&&null!=i.extensions&&null!=a.extensions?i.extensions=Object.assign(Object.create(null),i.extensions,a.extensions):t[r]&&(t[r].value=a[r]);o[r]=new n.GraphQLEnumType(e)}else if((0,n.isUnionType)(i))for(let e in a)e.startsWith("__")&&(i[e.substring(2)]=a[e]);else if((0,n.isObjectType)(i)||(0,n.isInterfaceType)(i))for(let e in a){if(e.startsWith("__")){i[e.substring(2)]=a[e];continue}let t=i.getFields()[e];if(null!=t){let r=a[e];"function"==typeof r?t.resolve=r.bind(a):s(t,r)}}}return(0,i.forEachDefaultValue)(e,i.serializeInputValue),(0,i.healSchema)(e),(0,i.forEachDefaultValue)(e,i.parseInputValue),null!=r&&(0,i.forEachField)(e,e=>{e.resolve||(e.resolve=r)}),e}(e,h,r):(p=e,p=(0,i.mapSchema)(p,{[i.MapperKind.SCALAR_TYPE]:e=>{let t=e.toConfig(),r=h[e.name];if(!(0,n.isSpecifiedScalarType)(e)&&null!=r){for(let n in r)n.startsWith("__")?t[n.substring(2)]=r[n]:"astNode"===n&&null!=t.astNode?t.astNode={...t.astNode,description:r?.astNode?.description??t.astNode.description,directives:(t.astNode.directives??[]).concat(r?.astNode?.directives??[])}:"extensionASTNodes"===n&&null!=t.extensionASTNodes?t.extensionASTNodes=t.extensionASTNodes.concat(r?.extensionASTNodes??[]):"extensions"===n&&null!=t.extensions&&null!=r.extensions?t.extensions=Object.assign(Object.create(null),e.extensions,r.extensions):t[n]=r[n];return new n.GraphQLScalarType(t)}},[i.MapperKind.ENUM_TYPE]:e=>{let t=h[e.name],r=e.toConfig(),i=r.values;if(null!=t){for(let n in t)n.startsWith("__")?r[n.substring(2)]=t[n]:"astNode"===n&&null!=r.astNode?r.astNode={...r.astNode,description:t?.astNode?.description??r.astNode.description,directives:(r.astNode.directives??[]).concat(t?.astNode?.directives??[])}:"extensionASTNodes"===n&&null!=r.extensionASTNodes?r.extensionASTNodes=r.extensionASTNodes.concat(t?.extensionASTNodes??[]):"extensions"===n&&null!=r.extensions&&null!=t.extensions?r.extensions=Object.assign(Object.create(null),e.extensions,t.extensions):i[n]&&(i[n].value=t[n]);return new n.GraphQLEnumType(r)}},[i.MapperKind.UNION_TYPE]:e=>{let t=h[e.name];if(null!=t){let r=e.toConfig();return t.__resolveType&&(r.resolveType=t.__resolveType),new n.GraphQLUnionType(r)}},[i.MapperKind.OBJECT_TYPE]:e=>{let t=h[e.name];if(null!=t){let r=e.toConfig();return t.__isTypeOf&&(r.isTypeOf=t.__isTypeOf),new n.GraphQLObjectType(r)}},[i.MapperKind.INTERFACE_TYPE]:e=>{let t=h[e.name];if(null!=t){let r=e.toConfig();return t.__resolveType&&(r.resolveType=t.__resolveType),new n.GraphQLInterfaceType(r)}},[i.MapperKind.COMPOSITE_FIELD]:(e,t,r)=>{let n=h[r];if(null!=n){let r=n[t];if(null!=r){let t={...e};return"function"==typeof r?t.resolve=r.bind(n):s(t,r),t}}}}),null!=r&&(p=(0,i.mapSchema)(p,{[i.MapperKind.OBJECT_FIELD]:e=>({...e,resolve:null!=e.resolve?e.resolve:r})})),p),f&&"ignore"!==f&&(0,o.checkForResolveTypeResolver)(e,f),e}},15054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertResolversPresent=void 0;let n=r(57343),i=r(14364);function o(e,t,r,n,i){if(!r.resolve){let r=`Resolver missing for "${n}.${i}".
To disable this validator, use:
  resolverValidationOptions: {
    ${e}: 'ignore'
  }`;if("error"===t)throw Error(r);"warn"===t&&console.warn(r);return}if("function"!=typeof r.resolve)throw Error(`Resolver "${n}.${i}" must be a function`)}t.assertResolversPresent=function(e,t={}){let{requireResolversForArgs:r,requireResolversForNonScalar:a,requireResolversForAllFields:s}=t;if(s&&(r||a))throw TypeError("requireResolversForAllFields takes precedence over the more specific assertions. Please configure either requireResolversForAllFields or requireResolversForArgs / requireResolversForNonScalar, but not a combination of them.");(0,i.forEachField)(e,(e,t,i)=>{s&&o("requireResolversForAllFields",s,e,t,i),r&&e.args.length>0&&o("requireResolversForArgs",r,e,t,i),"ignore"===a||(0,n.isScalarType)((0,n.getNamedType)(e.type))||o("requireResolversForNonScalar",a,e,t,i)})}},12873:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chainResolvers=void 0;let n=r(57343);t.chainResolvers=function(e){return(t,r,i,o)=>e.reduce((e,t)=>null!=t?t(e,r,i,o):(0,n.defaultFieldResolver)(e,r,i,o),t)}},81009:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkForResolveTypeResolver=void 0;let n=r(14364);t.checkForResolveTypeResolver=function(e,t){(0,n.mapSchema)(e,{[n.MapperKind.ABSTRACT_TYPE]:e=>{if(!e.resolveType){let r=`Type "${e.name}" is missing a "__resolveType" resolver. Pass 'ignore' into "resolverValidationOptions.requireResolversForResolveType" to disable this error.`;if("error"===t)throw Error(r);"warn"===t&&console.warn(r)}}})}},50728:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendResolversFromInterfaces=void 0,t.extendResolversFromInterfaces=function(e,t){let r={},n=e.getTypeMap();for(let e in n){let i=n[e];if("getInterfaces"in i){for(let n of(r[e]={},i.getInterfaces()))if(t[n.name])for(let i in t[n.name])"__isTypeOf"!==i&&i.startsWith("__")||(r[e][i]=t[n.name][i]);let n=t[e];r[e]={...r[e],...n}}else{let n=t[e];null!=n&&(r[e]=n)}}return r}},44487:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractExtensionsFromSchema=t.extendResolversFromInterfaces=t.checkForResolveTypeResolver=t.addResolversToSchema=t.chainResolvers=t.assertResolversPresent=void 0;let n=r(82174);var i=r(15054);Object.defineProperty(t,"assertResolversPresent",{enumerable:!0,get:function(){return i.assertResolversPresent}});var o=r(12873);Object.defineProperty(t,"chainResolvers",{enumerable:!0,get:function(){return o.chainResolvers}});var a=r(65782);Object.defineProperty(t,"addResolversToSchema",{enumerable:!0,get:function(){return a.addResolversToSchema}});var s=r(81009);Object.defineProperty(t,"checkForResolveTypeResolver",{enumerable:!0,get:function(){return s.checkForResolveTypeResolver}});var l=r(50728);Object.defineProperty(t,"extendResolversFromInterfaces",{enumerable:!0,get:function(){return l.extendResolversFromInterfaces}}),n.__exportStar(r(43162),t),n.__exportStar(r(86734),t),n.__exportStar(r(48842),t);var u=r(14364);Object.defineProperty(t,"extractExtensionsFromSchema",{enumerable:!0,get:function(){return u.extractExtensionsFromSchema}})},43162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeExecutableSchema=void 0;let n=r(57343),i=r(21602),o=r(14364),a=r(65782),s=r(15054);t.makeExecutableSchema=function({typeDefs:e,resolvers:t={},resolverValidationOptions:r={},inheritResolversFromInterfaces:l=!1,updateResolversInPlace:u=!1,schemaExtensions:c,defaultFieldResolver:p,...d}){let f;if("object"!=typeof r)throw Error("Expected `resolverValidationOptions` to be an object");if(!e)throw Error("Must provide typeDefs");if((0,n.isSchema)(e))f=e;else if(d?.commentDescriptions){let t=(0,i.mergeTypeDefs)(e,{...d,commentDescriptions:!0});f=(0,n.buildSchema)(t,d)}else{let t=(0,i.mergeTypeDefs)(e,d);f=(0,n.buildASTSchema)(t,d)}return f=(0,a.addResolversToSchema)({schema:f,resolvers:(0,i.mergeResolvers)(t),resolverValidationOptions:r,inheritResolversFromInterfaces:l,updateResolversInPlace:u,defaultFieldResolver:p}),Object.keys(r).length>0&&(0,s.assertResolversPresent)(f,r),c&&(c=(0,i.mergeExtensions)((0,o.asArray)(c)),(0,i.applyExtensions)(f,c)),f}},48842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeSchemas=void 0;let n=r(14364),i=r(43162);t.mergeSchemas=function(e){let t=[],r=[],o=[];if(null!=e.schemas)for(let i of e.schemas)t.push(i),r.push((0,n.getResolversFromSchema)(i)),o.push((0,n.extractExtensionsFromSchema)(i));if(null!=e.typeDefs&&t.push(e.typeDefs),null!=e.resolvers){let t=(0,n.asArray)(e.resolvers);r.push(...t)}if(null!=e.schemaExtensions){let t=(0,n.asArray)(e.schemaExtensions);o.push(...t)}return(0,i.makeExecutableSchema)({...e,typeDefs:t,resolvers:r,schemaExtensions:o})}},86734:()=>{},8308:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccumulatorMap=void 0;class r extends Map{get[Symbol.toStringTag](){return"AccumulatorMap"}add(e,t){let r=this.get(e);void 0===r?this.set(e,[t]):r.push(t)}}t.AccumulatorMap=r},98061:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MapperKind=void 0,function(e){e.TYPE="MapperKind.TYPE",e.SCALAR_TYPE="MapperKind.SCALAR_TYPE",e.ENUM_TYPE="MapperKind.ENUM_TYPE",e.COMPOSITE_TYPE="MapperKind.COMPOSITE_TYPE",e.OBJECT_TYPE="MapperKind.OBJECT_TYPE",e.INPUT_OBJECT_TYPE="MapperKind.INPUT_OBJECT_TYPE",e.ABSTRACT_TYPE="MapperKind.ABSTRACT_TYPE",e.UNION_TYPE="MapperKind.UNION_TYPE",e.INTERFACE_TYPE="MapperKind.INTERFACE_TYPE",e.ROOT_OBJECT="MapperKind.ROOT_OBJECT",e.QUERY="MapperKind.QUERY",e.MUTATION="MapperKind.MUTATION",e.SUBSCRIPTION="MapperKind.SUBSCRIPTION",e.DIRECTIVE="MapperKind.DIRECTIVE",e.FIELD="MapperKind.FIELD",e.COMPOSITE_FIELD="MapperKind.COMPOSITE_FIELD",e.OBJECT_FIELD="MapperKind.OBJECT_FIELD",e.ROOT_FIELD="MapperKind.ROOT_FIELD",e.QUERY_ROOT_FIELD="MapperKind.QUERY_ROOT_FIELD",e.MUTATION_ROOT_FIELD="MapperKind.MUTATION_ROOT_FIELD",e.SUBSCRIPTION_ROOT_FIELD="MapperKind.SUBSCRIPTION_ROOT_FIELD",e.INTERFACE_FIELD="MapperKind.INTERFACE_FIELD",e.INPUT_OBJECT_FIELD="MapperKind.INPUT_OBJECT_FIELD",e.ARGUMENT="MapperKind.ARGUMENT",e.ENUM_VALUE="MapperKind.ENUM_VALUE"}(r||(t.MapperKind=r={}))},73167:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printPathArray=t.pathToArray=t.addPath=void 0,t.addPath=function(e,t,r){return{prev:e,key:t,typename:r}},t.pathToArray=function(e){let t=[],r=e;for(;r;)t.push(r.key),r=r.prev;return t.reverse()},t.printPathArray=function(e){return e.map(e=>"number"==typeof e?"["+e.toString()+"]":"."+e).join("")}},99685:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTypes=void 0;let n=r(57343),i=r(83955),o=r(24178);t.addTypes=function(e,t){let r=e.toConfig(),a={};for(let e of r.types)a[e.name]=e;let s={};for(let e of r.directives)s[e.name]=e;for(let e of t)(0,n.isNamedType)(e)?a[e.name]=e:(0,n.isDirective)(e)&&(s[e.name]=e);let{typeMap:l,directives:u}=(0,o.rewireTypes)(a,Object.values(s));return new n.GraphQLSchema({...r,query:(0,i.getObjectTypeFromTypeMap)(l,e.getQueryType()),mutation:(0,i.getObjectTypeFromTypeMap)(l,e.getMutationType()),subscription:(0,i.getObjectTypeFromTypeMap)(l,e.getSubscriptionType()),types:Object.values(l),directives:u})}},99867:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.astFromType=void 0;let n=r(53113),i=r(57343);t.astFromType=function e(t){if((0,i.isNonNullType)(t)){let r=e(t.ofType);if(r.kind===i.Kind.NON_NULL_TYPE)throw Error(`Invalid type node ${(0,n.inspect)(t)}. Inner type of non-null type cannot be a non-null type.`);return{kind:i.Kind.NON_NULL_TYPE,type:r}}return(0,i.isListType)(t)?{kind:i.Kind.LIST_TYPE,type:e(t.ofType)}:{kind:i.Kind.NAMED_TYPE,name:{kind:i.Kind.NAME,value:t.name}}}},22935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.astFromValue=void 0;let n=r(53113),i=r(57343),o=r(98591),a=r(80883);t.astFromValue=function e(t,r){if((0,i.isNonNullType)(r)){let n=e(t,r.ofType);return n?.kind===i.Kind.NULL?null:n}if(null===t)return{kind:i.Kind.NULL};if(void 0===t)return null;if((0,i.isListType)(r)){let n=r.ofType;if((0,a.isIterableObject)(t)){let r=[];for(let i of t){let t=e(i,n);null!=t&&r.push(t)}return{kind:i.Kind.LIST,values:r}}return e(t,n)}if((0,i.isInputObjectType)(r)){if(!(0,a.isObjectLike)(t))return null;let n=[];for(let o of Object.values(r.getFields())){let r=e(t[o.name],o.type);r&&n.push({kind:i.Kind.OBJECT_FIELD,name:{kind:i.Kind.NAME,value:o.name},value:r})}return{kind:i.Kind.OBJECT,fields:n}}if((0,i.isLeafType)(r)){let e=r.serialize(t);return null==e?null:(0,i.isEnumType)(r)?{kind:i.Kind.ENUM,value:e}:"ID"===r.name&&"string"==typeof e&&s.test(e)?{kind:i.Kind.INT,value:e}:(0,o.astFromValueUntyped)(e)}console.assert(!1,"Unexpected input type: "+(0,n.inspect)(r))};let s=/^-?(?:0|[1-9][0-9]*)$/},98591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.astFromValueUntyped=void 0;let n=r(57343);t.astFromValueUntyped=function e(t){if(null===t)return{kind:n.Kind.NULL};if(void 0===t)return null;if(Array.isArray(t)){let r=[];for(let n of t){let t=e(n);null!=t&&r.push(t)}return{kind:n.Kind.LIST,values:r}}if("object"==typeof t){if(t?.toJSON)return e(t.toJSON());let r=[];for(let i in t){let o=e(t[i]);o&&r.push({kind:n.Kind.OBJECT_FIELD,name:{kind:n.Kind.NAME,value:i},value:o})}return{kind:n.Kind.OBJECT,fields:r}}if("boolean"==typeof t)return{kind:n.Kind.BOOLEAN,value:t};if("bigint"==typeof t)return{kind:n.Kind.INT,value:String(t)};if("number"==typeof t&&isFinite(t)){let e=String(t);return i.test(e)?{kind:n.Kind.INT,value:e}:{kind:n.Kind.FLOAT,value:e}}if("string"==typeof t)return{kind:n.Kind.STRING,value:t};throw TypeError(`Cannot convert value to AST: ${t}.`)};let i=/^-?(?:0|[1-9][0-9]*)$/},77139:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildOperationNodeForField=void 0;let n=r(57343),i=r(27036),o=[],a=new Map;function s(){a=new Map}function l(e,t){return{kind:n.Kind.VARIABLE_DEFINITION,variable:{kind:n.Kind.VARIABLE,name:{kind:n.Kind.NAME,value:t||e.name}},type:function e(t){return(0,n.isListType)(t)?{kind:n.Kind.LIST_TYPE,type:e(t.ofType)}:(0,n.isNonNullType)(t)?{kind:n.Kind.NON_NULL_TYPE,type:e(t.ofType)}:{kind:n.Kind.NAMED_TYPE,name:{kind:n.Kind.NAME,value:t.name}}}(e.type)}}function u(e,t){return[...t,e].join("_")}function c(e,t={depth:1}){let r=e[e.length-1];return!(0,n.isScalarType)(r)&&e.filter(e=>e.name===r.name).length>t.depth}t.buildOperationNodeForField=function({schema:e,kind:t,field:r,models:p,ignore:d=[],depthLimit:f,circularReferenceDepth:h,argNames:y,selectedFields:m=!0}){o=[],s();let v=(0,i.getRootTypeNames)(e),g=function({schema:e,fieldName:t,kind:r,models:s,ignore:p,depthLimit:d,circularReferenceDepth:f,argNames:h,selectedFields:y,rootTypeNames:m}){let v=(0,i.getDefinedRootType)(e,r),g=v.getFields()[t],b=`${t}_${r}`;if(g.args)for(let e of g.args){let t=e.name;if(!h||h.includes(t)){var _;_=l(e,t),o.push(_)}}return{kind:n.Kind.OPERATION_DEFINITION,operation:r,name:{kind:n.Kind.NAME,value:b},variableDefinitions:[],selectionSet:{kind:n.Kind.SELECTION_SET,selections:[function e({type:t,field:r,models:i,firstCall:s,path:p,ancestors:d,ignore:f,depthLimit:h,circularReferenceDepth:y,schema:m,depth:v,argNames:g,selectedFields:b,rootTypeNames:_}){let T=(0,n.getNamedType)(r.type),E=[],O=!1;if(r.args&&r.args.length&&(E=r.args.map(e=>{let t=u(e.name,p);if(g&&!g.includes(t))return(0,n.isNonNullType)(e.type)&&(O=!0),null;if(!s){var r;r=l(e,t),o.push(r)}return{kind:n.Kind.ARGUMENT,name:{kind:n.Kind.NAME,value:e.name},value:{kind:n.Kind.VARIABLE,name:{kind:n.Kind.NAME,value:u(e.name,p)}}}}).filter(Boolean)),O)return null;let S=[...p,r.name],w=S.join("."),I=r.name;return(a.has(w)&&a.get(w)!==r.type.toString()&&(I+=r.type.toString().replace("!","NonNull").replace("[","List").replace("]","")),a.set(w,r.type.toString()),(0,n.isScalarType)(T)||(0,n.isEnumType)(T))?{kind:n.Kind.FIELD,name:{kind:n.Kind.NAME,value:r.name},...I!==r.name&&{alias:{kind:n.Kind.NAME,value:I}},arguments:E}:{kind:n.Kind.FIELD,name:{kind:n.Kind.NAME,value:r.name},...I!==r.name&&{alias:{kind:n.Kind.NAME,value:I}},selectionSet:function t({parent:r,type:i,models:o,firstCall:a,path:s,ancestors:l,ignore:u,depthLimit:p,circularReferenceDepth:d,schema:f,depth:h,argNames:y,selectedFields:m,rootTypeNames:v}){if("boolean"!=typeof m||!(h>p)){if((0,n.isUnionType)(i)){let e=i.getTypes();return{kind:n.Kind.SELECTION_SET,selections:e.filter(e=>!c([...l,e],{depth:d})).map(e=>({kind:n.Kind.INLINE_FRAGMENT,typeCondition:{kind:n.Kind.NAMED_TYPE,name:{kind:n.Kind.NAME,value:e.name}},selectionSet:t({parent:i,type:e,models:o,path:s,ancestors:l,ignore:u,depthLimit:p,circularReferenceDepth:d,schema:f,depth:h,argNames:y,selectedFields:m,rootTypeNames:v})})).filter(e=>e?.selectionSet?.selections?.length>0)}}if((0,n.isInterfaceType)(i)){let e=Object.values(f.getTypeMap()).filter(e=>(0,n.isObjectType)(e)&&e.getInterfaces().includes(i));return{kind:n.Kind.SELECTION_SET,selections:e.filter(e=>!c([...l,e],{depth:d})).map(e=>({kind:n.Kind.INLINE_FRAGMENT,typeCondition:{kind:n.Kind.NAMED_TYPE,name:{kind:n.Kind.NAME,value:e.name}},selectionSet:t({parent:i,type:e,models:o,path:s,ancestors:l,ignore:u,depthLimit:p,circularReferenceDepth:d,schema:f,depth:h,argNames:y,selectedFields:m,rootTypeNames:v})})).filter(e=>e?.selectionSet?.selections?.length>0)}}if((0,n.isObjectType)(i)&&!v.has(i.name)){let t=u.includes(i.name)||u.includes(`${r.name}.${s[s.length-1]}`),g=o.includes(i.name);if(!a&&g&&!t)return{kind:n.Kind.SELECTION_SET,selections:[{kind:n.Kind.FIELD,name:{kind:n.Kind.NAME,value:"id"}}]};let b=i.getFields();return{kind:n.Kind.SELECTION_SET,selections:Object.keys(b).filter(e=>!c([...l,(0,n.getNamedType)(b[e].type)],{depth:d})).map(t=>{let r="object"!=typeof m||m[t];return r?e({type:i,field:b[t],models:o,path:[...s,t],ancestors:l,ignore:u,depthLimit:p,circularReferenceDepth:d,schema:f,depth:h,argNames:y,selectedFields:r,rootTypeNames:v}):null}).filter(e=>null!=e&&(!("selectionSet"in e)||!!e.selectionSet?.selections?.length))}}}}({parent:t,type:T,models:i,firstCall:s,path:S,ancestors:[...d,t],ignore:f,depthLimit:h,circularReferenceDepth:y,schema:m,depth:v+1,argNames:g,selectedFields:b,rootTypeNames:_})||void 0,arguments:E}}({type:v,field:g,models:s,firstCall:!0,path:[],ancestors:[],ignore:p,depthLimit:d,circularReferenceDepth:f,schema:e,depth:0,argNames:h,selectedFields:y,rootTypeNames:m})]}}}({schema:e,fieldName:r,kind:t,models:p||[],ignore:d,depthLimit:f||1/0,circularReferenceDepth:h||1,argNames:y,selectedFields:m,rootTypeNames:v});return g.variableDefinitions=[...o],o=[],s(),g}},64058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectSubFields=t.getDeferValues=t.getFieldEntryKey=t.doesFragmentConditionMatch=t.shouldIncludeNode=t.collectFields=void 0;let n=r(57343),i=r(8308),o=r(90518),a=r(91869);function s(e,t,r,o,a,d,f,h){for(let y of a.selections)switch(y.kind){case n.Kind.FIELD:if(!l(r,y))continue;d.add(c(y),y);break;case n.Kind.INLINE_FRAGMENT:{if(!l(r,y)||!u(e,y,o))continue;let n=p(r,y);if(n){let a=new i.AccumulatorMap;s(e,t,r,o,y.selectionSet,a,f,h),f.push({label:n.label,fields:a})}else s(e,t,r,o,y.selectionSet,d,f,h);break}case n.Kind.FRAGMENT_SPREAD:{let n=y.name.value;if(!l(r,y))continue;let a=p(r,y);if(h.has(n)&&!a)continue;let c=t[n];if(!c||!u(e,c,o))continue;if(a||h.add(n),a){let n=new i.AccumulatorMap;s(e,t,r,o,c.selectionSet,n,f,h),f.push({label:a.label,fields:n})}else s(e,t,r,o,c.selectionSet,d,f,h)}}}function l(e,t){let r=(0,n.getDirectiveValues)(n.GraphQLSkipDirective,t,e);if(r?.if===!0)return!1;let i=(0,n.getDirectiveValues)(n.GraphQLIncludeDirective,t,e);return i?.if!==!1}function u(e,t,r){let i=t.typeCondition;if(!i)return!0;let o=(0,n.typeFromAST)(e,i);return o===r||!!(0,n.isAbstractType)(o)&&e.getPossibleTypes(o).includes(r)}function c(e){return e.alias?e.alias.value:e.name.value}function p(e,t){let r=(0,n.getDirectiveValues)(o.GraphQLDeferDirective,t,e);if(r&&!1!==r.if)return{label:"string"==typeof r.label?r.label:void 0}}t.collectFields=function(e,t,r,n,o){let a=new i.AccumulatorMap,l=[];return s(e,t,r,n,o,a,l,new Set),{fields:a,patches:l}},t.shouldIncludeNode=l,t.doesFragmentConditionMatch=u,t.getFieldEntryKey=c,t.getDeferValues=p,t.collectSubFields=(0,a.memoize5)(function(e,t,r,n,o){let a=new i.AccumulatorMap,l=new Set,u=[];for(let i of o)i.selectionSet&&s(e,t,r,n,i.selectionSet,a,u,l);return{fields:a,patches:u}})},44185:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBlockStringIndentation=t.dedentBlockStringValue=t.getLeadingCommentBlock=t.getComment=t.getDescription=t.printWithComments=t.printComment=t.pushComment=t.collectComment=t.resetComments=void 0;let n=r(57343),i={};function o(e,t,r,n){let o=h(e);if("string"!=typeof o||0===o.length)return;let a=[t];r&&(a.push(r),n&&a.push(n));let s=a.join(".");i[s]||(i[s]=[]),i[s].push(o)}function a(e){return"\n# "+e.replace(/\n/g,"\n# ")}function s(e,t){return e?e.filter(e=>e).join(t||""):""}function l(e){return e?.some(e=>e.includes("\n"))??!1}function u(e){return e&&`  ${e.replace(/\n/g,"\n  ")}`}function c(e){return e&&0!==e.length?`{
${u(s(e,"\n"))}
}`:""}function p(e,t,r){return t?e+t+(r||""):""}t.resetComments=function(){i={}},t.collectComment=function(e){let t=e.name?.value;if(null!=t)switch(o(e,t),e.kind){case"EnumTypeDefinition":if(e.values)for(let r of e.values)o(r,t,r.name.value);break;case"ObjectTypeDefinition":case"InputObjectTypeDefinition":case"InterfaceTypeDefinition":if(e.fields){for(let r of e.fields)if(o(r,t,r.name.value),"FieldDefinition"===r.kind&&r.arguments)for(let e of r.arguments)o(e,t,r.name.value,e.name.value)}}},t.pushComment=o,t.printComment=a;let d={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>s(e.definitions,"\n\n")},OperationDefinition:{leave:e=>{let t=p("(",s(e.variableDefinitions,", "),")");return s([e.operation,s([e.name,t]),s(e.directives," ")]," ")+" "+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:r,directives:n})=>e+": "+t+p(" = ",r)+p(" ",s(n," "))},SelectionSet:{leave:({selections:e})=>c(e)},Field:{leave({alias:e,name:t,arguments:r,directives:n,selectionSet:i}){let o=p("",e,": ")+t,a=o+p("(",s(r,", "),")");return a.length>80&&(a=o+p("(\n",u(s(r,"\n")),"\n)")),s([a,s(n," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+p(" ",s(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:r})=>s(["...",p("on ",e),s(t," "),r]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:r,directives:n,selectionSet:i})=>`fragment ${e}${p("(",s(r,", "),")")} on ${t} ${p("",s(n," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?function(e,t=!1){let r=e.replace(/"""/g,'\\"""');return(" "===e[0]||"	"===e[0])&&-1===e.indexOf("\n")?`"""${r.replace(/"$/,'"\n')}"""`:`"""
${t?r:u(r)}
"""`}(e):JSON.stringify(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+s(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+s(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+p("(",s(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({directives:e,operationTypes:t})=>s(["schema",s(e," "),c(t)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({name:e,directives:t})=>s(["scalar",e,s(t," ")]," ")},ObjectTypeDefinition:{leave:({name:e,interfaces:t,directives:r,fields:n})=>s(["type",e,p("implements ",s(t," & ")),s(r," "),c(n)]," ")},FieldDefinition:{leave:({name:e,arguments:t,type:r,directives:n})=>e+(l(t)?p("(\n",u(s(t,"\n")),"\n)"):p("(",s(t,", "),")"))+": "+r+p(" ",s(n," "))},InputValueDefinition:{leave:({name:e,type:t,defaultValue:r,directives:n})=>s([e+": "+t,p("= ",r),s(n," ")]," ")},InterfaceTypeDefinition:{leave:({name:e,interfaces:t,directives:r,fields:n})=>s(["interface",e,p("implements ",s(t," & ")),s(r," "),c(n)]," ")},UnionTypeDefinition:{leave:({name:e,directives:t,types:r})=>s(["union",e,s(t," "),p("= ",s(r," | "))]," ")},EnumTypeDefinition:{leave:({name:e,directives:t,values:r})=>s(["enum",e,s(t," "),c(r)]," ")},EnumValueDefinition:{leave:({name:e,directives:t})=>s([e,s(t," ")]," ")},InputObjectTypeDefinition:{leave:({name:e,directives:t,fields:r})=>s(["input",e,s(t," "),c(r)]," ")},DirectiveDefinition:{leave:({name:e,arguments:t,repeatable:r,locations:n})=>"directive @"+e+(l(t)?p("(\n",u(s(t,"\n")),"\n)"):p("(",s(t,", "),")"))+(r?" repeatable":"")+" on "+s(n," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>s(["extend schema",s(e," "),c(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>s(["extend scalar",e,s(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>s(["extend type",e,p("implements ",s(t," & ")),s(r," "),c(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>s(["extend interface",e,p("implements ",s(t," & ")),s(r," "),c(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:r})=>s(["extend union",e,s(t," "),p("= ",s(r," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:r})=>s(["extend enum",e,s(t," "),c(r)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:r})=>s(["extend input",e,s(t," "),c(r)]," ")}},f=Object.keys(d).reduce((e,t)=>{var r;return{...e,[t]:{leave:(r=d[t].leave,(e,t,n,o,l)=>{let u=[],c=o.reduce((e,t)=>(["fields","arguments","values"].includes(t)&&e.name&&u.push(e.name.value),e[t]),l[0]),p=[...u,c?.name?.value].filter(Boolean).join("."),d=[];return e.kind.includes("Definition")&&i[p]&&d.push(...i[p]),s([...d.map(a),e.description,r(e,t,n,o,l)],"\n")})}}},{});function h(e){let t=y(e);if(void 0!==t)return m(`
${t}`)}function y(e){let t=e.loc;if(!t)return;let r=[],i=t.startToken.prev;for(;null!=i&&i.kind===n.TokenKind.COMMENT&&null!=i.next&&null!=i.prev&&i.line+1===i.next.line&&i.line!==i.prev.line;){let e=String(i.value);r.push(e),i=i.prev}return r.length>0?r.reverse().join("\n"):void 0}function m(e){let t=e.split(/\r\n|[\n\r]/g),r=v(t);if(0!==r)for(let e=1;e<t.length;e++)t[e]=t[e].slice(r);for(;t.length>0&&b(t[0]);)t.shift();for(;t.length>0&&b(t[t.length-1]);)t.pop();return t.join("\n")}function v(e){let t=null;for(let r=1;r<e.length;r++){let n=e[r],i=g(n);if(i!==n.length&&(null===t||i<t)&&0===(t=i))break}return null===t?0:t}function g(e){let t=0;for(;t<e.length&&(" "===e[t]||"	"===e[t]);)t++;return t}function b(e){return g(e)===e.length}t.printWithComments=function(e){return(0,n.visit)(e,f)},t.getDescription=function(e,t){return null!=e.description?e.description.value:t?.commentDescriptions?h(e):void 0},t.getComment=h,t.getLeadingCommentBlock=y,t.dedentBlockStringValue=m,t.getBlockStringIndentation=v},84150:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugTimerEnd=t.debugTimerStart=void 0;let r=new Set;t.debugTimerStart=function(e){let t=globalThis.process?.env?.DEBUG||globalThis.DEBUG;("1"===t||t?.includes(e))&&(r.add(e),console.time(e))},t.debugTimerEnd=function(e){r.has(e)&&console.timeEnd(e)}},83796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDescriptionNode=void 0;let n=r(57343);t.getDescriptionNode=function(e){return e.astNode?.description?{...e.astNode.description,block:!0}:e.description?{kind:n.Kind.STRING,value:e.description,block:!0}:void 0}},90518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLStreamDirective=t.GraphQLDeferDirective=void 0;let n=r(57343);t.GraphQLDeferDirective=new n.GraphQLDirective({name:"defer",description:"Directs the executor to defer this fragment when the `if` argument is true or undefined.",locations:[n.DirectiveLocation.FRAGMENT_SPREAD,n.DirectiveLocation.INLINE_FRAGMENT],args:{if:{type:new n.GraphQLNonNull(n.GraphQLBoolean),description:"Deferred when true or undefined.",defaultValue:!0},label:{type:n.GraphQLString,description:"Unique name"}}}),t.GraphQLStreamDirective=new n.GraphQLDirective({name:"stream",description:"Directs the executor to stream plural fields when the `if` argument is true or undefined.",locations:[n.DirectiveLocation.FIELD],args:{if:{type:new n.GraphQLNonNull(n.GraphQLBoolean),description:"Stream when true or undefined.",defaultValue:!0},label:{type:n.GraphQLString,description:"Unique name"},initialCount:{defaultValue:0,type:n.GraphQLInt,description:"Number of items to return immediately"}}})},25197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.relocatedError=t.createGraphQLError=void 0;let n=r(57343),i=["message","locations","path","nodes","source","positions","originalError","name","stack","extensions"];function o(e,t){var r;return t?.originalError&&!(t.originalError instanceof Error)&&null!=(r=t.originalError)&&"object"==typeof r&&Object.keys(r).every(e=>i.includes(e))&&(t.originalError=o(t.originalError.message,t.originalError)),n.versionInfo.major>=17?new n.GraphQLError(e,t):new n.GraphQLError(e,t?.nodes,t?.source,t?.positions,t?.path,t?.originalError,t?.extensions)}t.createGraphQLError=o,t.relocatedError=function(e,t){return o(e.message,{nodes:e.nodes,source:e.source,positions:e.positions,path:null==t?e.path:t,originalError:e,extensions:e.extensions})}},71894:()=>{},55219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractExtensionsFromSchema=void 0;let n=r(840),i=r(98061),o=r(70183);function a(e,t){let{directives:r,...i}=e=e||{},o={...i};if(!t&&null!=r){let e={};for(let t in r)e[t]=[...(0,n.asArray)(r[t])];o.directives=e}return o}t.extractExtensionsFromSchema=function(e,t=!1){let r={schemaExtensions:a(e.extensions,t),types:{}};return(0,o.mapSchema)(e,{[i.MapperKind.OBJECT_TYPE]:e=>(r.types[e.name]={fields:{},type:"object",extensions:a(e.extensions,t)},e),[i.MapperKind.INTERFACE_TYPE]:e=>(r.types[e.name]={fields:{},type:"interface",extensions:a(e.extensions,t)},e),[i.MapperKind.FIELD]:(e,n,i)=>{r.types[i].fields[n]={arguments:{},extensions:a(e.extensions,t)};let o=e.args;if(null!=o)for(let e in o)r.types[i].fields[n].arguments[e]=a(o[e].extensions,t);return e},[i.MapperKind.ENUM_TYPE]:e=>(r.types[e.name]={values:{},type:"enum",extensions:a(e.extensions,t)},e),[i.MapperKind.ENUM_VALUE]:(e,n,i,o)=>(r.types[n].values[o]=a(e.extensions,t),e),[i.MapperKind.SCALAR_TYPE]:e=>(r.types[e.name]={type:"scalar",extensions:a(e.extensions,t)},e),[i.MapperKind.UNION_TYPE]:e=>(r.types[e.name]={type:"union",extensions:a(e.extensions,t)},e),[i.MapperKind.INPUT_OBJECT_TYPE]:e=>(r.types[e.name]={fields:{},type:"input",extensions:a(e.extensions,t)},e),[i.MapperKind.INPUT_OBJECT_FIELD]:(e,n,i)=>(r.types[i].fields[n]={extensions:a(e.extensions,t)},e)}),r}},89590:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modifyObjectFields=t.selectObjectFields=t.removeObjectFields=t.appendObjectFields=void 0;let n=r(57343),i=r(99685),o=r(98061),a=r(70183);t.appendObjectFields=function(e,t,r){return null==e.getType(t)?(0,i.addTypes)(e,[new n.GraphQLObjectType({name:t,fields:r})]):(0,a.mapSchema)(e,{[o.MapperKind.OBJECT_TYPE]:e=>{if(e.name===t){let t=e.toConfig(),i=t.fields,o={};for(let e in i)o[e]=i[e];for(let e in r)o[e]=r[e];return(0,a.correctASTNodes)(new n.GraphQLObjectType({...t,fields:o}))}}})},t.removeObjectFields=function(e,t,r){let i={};return[(0,a.mapSchema)(e,{[o.MapperKind.OBJECT_TYPE]:e=>{if(e.name===t){let t=e.toConfig(),o=t.fields,s={};for(let e in o){let t=o[e];r(e,t)?i[e]=t:s[e]=t}return(0,a.correctASTNodes)(new n.GraphQLObjectType({...t,fields:s}))}}}),i]},t.selectObjectFields=function(e,t,r){let n={};return(0,a.mapSchema)(e,{[o.MapperKind.OBJECT_TYPE]:e=>{if(e.name===t){let t=e.toConfig().fields;for(let e in t){let i=t[e];r(e,i)&&(n[e]=i)}}}}),n},t.modifyObjectFields=function(e,t,r,i){let s={};return[(0,a.mapSchema)(e,{[o.MapperKind.OBJECT_TYPE]:e=>{if(e.name===t){let t=e.toConfig(),o=t.fields,l={};for(let e in o){let t=o[e];r(e,t)?s[e]=t:l[e]=t}for(let e in i){let t=i[e];l[e]=t}return(0,a.correctASTNodes)(new n.GraphQLObjectType({...t,fields:l}))}}}),s]}},27123:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterSchema=void 0;let n=r(57343),i=r(98061),o=r(70183);function a(e,t,r,i){if(r||i){let o=e.toConfig();for(let n in o.fields){let a=o.fields[n];if(r&&!r(t,n,o.fields[n]))delete o.fields[n];else if(i&&a.args)for(let t in a.args)i(e.name,n,t,a.args[t])||delete a.args[t]}return new n.GraphQLObjectType(o)}return e}function s(e,t,r,n){if(r||n){let i=t.toConfig();for(let e in i.fields){let o=i.fields[e];if(r&&!r(t.name,e,i.fields[e]))delete i.fields[e];else if(n&&"args"in o)for(let r in o.args)n(t.name,e,r,o.args[r])||delete o.args[r]}return new e(i)}}t.filterSchema=function({schema:e,typeFilter:t=()=>!0,fieldFilter:r,rootFieldFilter:l,objectFieldFilter:u,interfaceFieldFilter:c,inputObjectFieldFilter:p,argumentFilter:d,directiveFilter:f,enumValueFilter:h}){return(0,o.mapSchema)(e,{[i.MapperKind.QUERY]:e=>a(e,"Query",l,d),[i.MapperKind.MUTATION]:e=>a(e,"Mutation",l,d),[i.MapperKind.SUBSCRIPTION]:e=>a(e,"Subscription",l,d),[i.MapperKind.OBJECT_TYPE]:e=>t(e.name,e)?s(n.GraphQLObjectType,e,u||r,d):null,[i.MapperKind.INTERFACE_TYPE]:e=>t(e.name,e)?s(n.GraphQLInterfaceType,e,c||r,d):null,[i.MapperKind.INPUT_OBJECT_TYPE]:e=>t(e.name,e)?s(n.GraphQLInputObjectType,e,p||r):null,[i.MapperKind.UNION_TYPE]:e=>t(e.name,e)?void 0:null,[i.MapperKind.ENUM_TYPE]:e=>t(e.name,e)?void 0:null,[i.MapperKind.SCALAR_TYPE]:e=>t(e.name,e)?void 0:null,[i.MapperKind.DIRECTIVE]:e=>f&&!f(e.name,e)?null:void 0,[i.MapperKind.ENUM_VALUE]:(e,t,r,n)=>h&&!h(t,n,e)?null:void 0})}},42059:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixSchemaAst=void 0;let n=r(57343),i=r(92928);t.fixSchemaAst=function(e,t){let r;return e.astNode&&e.extensionASTNodes||(r=function(e,t){let r=(0,i.getDocumentNodeFromSchema)(e);return(0,n.buildASTSchema)(r,{...t||{}})}(e,t)),!e.astNode&&r?.astNode&&(e.astNode=r.astNode),!e.extensionASTNodes&&r?.astNode&&(e.extensionASTNodes=r.extensionASTNodes),e}},57472:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEachDefaultValue=void 0;let n=r(57343);t.forEachDefaultValue=function(e,t){let r=e.getTypeMap();for(let e in r){let i=r[e];if(!(0,n.getNamedType)(i).name.startsWith("__")){if((0,n.isObjectType)(i)){let e=i.getFields();for(let r in e)for(let n of e[r].args)n.defaultValue=t(n.type,n.defaultValue)}else if((0,n.isInputObjectType)(i)){let e=i.getFields();for(let r in e){let n=e[r];n.defaultValue=t(n.type,n.defaultValue)}}}}}},5857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEachField=void 0;let n=r(57343);t.forEachField=function(e,t){let r=e.getTypeMap();for(let e in r){let i=r[e];if(!(0,n.getNamedType)(i).name.startsWith("__")&&(0,n.isObjectType)(i)){let r=i.getFields();for(let n in r)t(r[n],e,n)}}}},75567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArgumentsWithDirectives=void 0;let n=r(57343);function i(e){return e.kind===n.Kind.OBJECT_TYPE_DEFINITION||e.kind===n.Kind.OBJECT_TYPE_EXTENSION}t.getArgumentsWithDirectives=function(e){let t={};for(let r of e.definitions.filter(i))if(null!=r.fields)for(let e of r.fields){let i=e.arguments?.filter(e=>e.directives?.length);if(!i?.length)continue;let o=t[`${r.name.value}.${e.name.value}`]={};for(let e of i){let t=e.directives.map(e=>({name:e.name.value,args:(e.arguments||[]).reduce((e,t)=>({...e,[t.name.value]:(0,n.valueFromASTUntyped)(t.value)}),{})}));o[e.name.value]=t}}return t}},37992:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDirective=t.getDirectives=t.getDirectiveInExtensions=t.getDirectivesInExtensions=void 0;let n=r(47959);t.getDirectivesInExtensions=function(e,t=["directives"]){return Object.entries((0,n.getDirectiveExtensions)(e,void 0,t)).map(([e,t])=>t?.map(t=>({name:e,args:t}))).flat(1/0).filter(Boolean)},t.getDirectiveInExtensions=function(e,t,r=["directives"]){return(0,n.getDirectiveExtensions)(e,void 0,r)[t]},t.getDirectives=function(e,t,r=["directives"]){return Object.entries((0,n.getDirectiveExtensions)(t,e,r)).map(([e,t])=>t?.map(t=>({name:e,args:t}))).flat(1/0).filter(Boolean)},t.getDirective=function(e,t,r,i=["directives"]){return(0,n.getDirectiveExtensions)(t,e,i)[r]}},83073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFieldsWithDirectives=void 0;let n=r(57343);t.getFieldsWithDirectives=function(e,t={}){let r={},i=["ObjectTypeDefinition","ObjectTypeExtension"];for(let o of(t.includeInputTypes&&(i=[...i,"InputObjectTypeDefinition","InputObjectTypeExtension"]),e.definitions.filter(e=>i.includes(e.kind)))){let e=o.name.value;if(null!=o.fields){for(let t of o.fields)if(t.directives&&t.directives.length>0){let i=t.name.value,o=`${e}.${i}`,a=t.directives.map(e=>({name:e.name.value,args:(e.arguments||[]).reduce((e,t)=>({...e,[t.name.value]:(0,n.valueFromASTUntyped)(t.value)}),{})}));r[o]=a}}}return r}},23338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImplementingTypes=void 0,t.getImplementingTypes=function(e,t){let r=t.getTypeMap(),n=[];for(let t in r){let i=r[t];"getInterfaces"in i&&i.getInterfaces().find(t=>t.name===e)&&n.push(i.name)}return n}},71238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArgumentValues=void 0;let n=r(53113),i=r(57343),o=r(25197),a=r(80883);t.getArgumentValues=function(e,t,r={}){let s={},l=(t.arguments??[]).reduce((e,t)=>({...e,[t.name.value]:t}),{});for(let{name:u,type:c,defaultValue:p}of e.args){let e=l[u];if(!e){if(void 0!==p)s[u]=p;else if((0,i.isNonNullType)(c))throw(0,o.createGraphQLError)(`Argument "${u}" of required type "${(0,n.inspect)(c)}" was not provided.`,{nodes:[t]});continue}let d=e.value,f=d.kind===i.Kind.NULL;if(d.kind===i.Kind.VARIABLE){let e=d.name.value;if(null==r||!(0,a.hasOwnProperty)(r,e)){if(void 0!==p)s[u]=p;else if((0,i.isNonNullType)(c))throw(0,o.createGraphQLError)(`Argument "${u}" of required type "${(0,n.inspect)(c)}" was provided the variable "$${e}" which was not provided a runtime value.`,{nodes:[d]});continue}f=null==r[e]}if(f&&(0,i.isNonNullType)(c))throw(0,o.createGraphQLError)(`Argument "${u}" of non-null type "${(0,n.inspect)(c)}" must not be null.`,{nodes:[d]});let h=(0,i.valueFromAST)(d,c,r);if(void 0===h)throw(0,o.createGraphQLError)(`Argument "${u}" has invalid value ${(0,i.print)(d)}.`,{nodes:[d]});s[u]=h}return s}},47959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDirectiveExtensions=void 0;let n=r(57343),i=r(71238),o=r(91869);t.getDirectiveExtensions=function(e,t,r=["directives"]){let a={};if(e.extensions){let t=e.extensions;for(let e of r)t=t?.[e];if(null!=t)for(let e in t){let r=t[e];if(Array.isArray(r))for(let t of r){let r=a[e];r||(r=[],a[e]=r),r.push(t)}else{let t=a[e];t||(t=[],a[e]=t),t.push(r)}}}let s=(0,o.memoize1)(e=>JSON.stringify(e)),l=[];for(let r of(e.astNode&&l.push(e.astNode),e.extensionASTNodes&&l.push(...e.extensionASTNodes),l))if(r.directives?.length)for(let e of r.directives){let r=e.name.value,o=a[r];o||(o=[],a[r]=o);let u=t?.getDirective(r),c={};if(u&&(c=(0,i.getArgumentValues)(u,e)),e.arguments)for(let t of e.arguments){let e=t.name.value;if(null==c[e]){let r=u?.args.find(t=>t.name===e);r&&(c[e]=(0,n.valueFromAST)(t.value,r.type))}null==c[e]&&(c[e]=(0,n.valueFromASTUntyped)(t.value))}if(l.length>0&&o.length>0){let e=s(c);if(o.some(t=>s(t)===e))continue}o.push(c)}return a}},83955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getObjectTypeFromTypeMap=void 0;let n=r(57343);t.getObjectTypeFromTypeMap=function(e,t){if(t){let r=e[t.name];if((0,n.isObjectType)(r))return r}}},15040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperationASTFromRequest=t.getOperationASTFromDocument=void 0;let n=r(57343),i=r(91869);function o(e,t){let r=(0,n.getOperationAST)(e,t);if(!r)throw Error(`Cannot infer operation ${t||""}`);return r}t.getOperationASTFromDocument=o,t.getOperationASTFromRequest=(0,i.memoize1)(function(e){return o(e.document,e.operationName)})},88367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResolversFromSchema=void 0;let n=r(57343);t.getResolversFromSchema=function(e,t){let r=Object.create(null),i=e.getTypeMap();for(let e in i)if(!e.startsWith("__")){let o=i[e];if((0,n.isScalarType)(o)){if(!(0,n.isSpecifiedScalarType)(o)){let t=o.toConfig();delete t.astNode,r[e]=new n.GraphQLScalarType(t)}}else if((0,n.isEnumType)(o))for(let t of(r[e]={},o.getValues()))r[e][t.name]=t.value;else if((0,n.isInterfaceType)(o))null!=o.resolveType&&(r[e]={__resolveType:o.resolveType});else if((0,n.isUnionType)(o))null!=o.resolveType&&(r[e]={__resolveType:o.resolveType});else if((0,n.isObjectType)(o)){r[e]={},null!=o.isTypeOf&&(r[e].__isTypeOf=o.isTypeOf);let n=o.getFields();for(let i in n){let o=n[i];if(null!=o.subscribe&&(r[e][i]=r[e][i]||{},r[e][i].subscribe=o.subscribe),null!=o.resolve&&o.resolve?.name!=="defaultFieldResolver"){switch(o.resolve?.name){case"defaultMergedResolver":if(!t)continue;break;case"defaultFieldResolver":continue}r[e][i]=r[e][i]||{},r[e][i].resolve=o.resolve}}}}return r}},61832:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResponseKeyFromInfo=void 0,t.getResponseKeyFromInfo=function(e){return null!=e.fieldNodes[0].alias?e.fieldNodes[0].alias.value:e.fieldName}},99936:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.healTypes=t.healSchema=void 0;let n=r(57343);function i(e,t){let r=Object.create(null);for(let t in e){let n=e[t];if(null==n||t.startsWith("__"))continue;let i=n.name;if(!i.startsWith("__")){if(null!=r[i]){console.warn(`Duplicate schema type name ${i} found; keeping the existing one found in the schema`);continue}r[i]=n}}for(let t in r){let n=r[t];e[t]=n}for(let e of t)e.args=e.args.filter(e=>(e.type=a(e.type),null!==e.type));for(let t in e){let s=e[t];!t.startsWith("__")&&t in r&&null!=s&&function(e){if((0,n.isObjectType)(e)){i(e),o(e);return}if((0,n.isInterfaceType)(e)){i(e),"getInterfaces"in e&&o(e);return}if((0,n.isUnionType)(e)){(function(e){let t=e.getTypes();t.push(...t.splice(0).map(e=>a(e)).filter(Boolean))})(e);return}if((0,n.isInputObjectType)(e)){(function(e){let t=e.getFields();for(let[e,r]of Object.entries(t))r.type=a(r.type),null===r.type&&delete t[e]})(e);return}if(!(0,n.isLeafType)(e))throw Error(`Unexpected schema type: ${e}`)}(s)}for(let t in e)t.startsWith("__")||t in r||delete e[t];function i(e){let t=e.getFields();for(let[e,r]of Object.entries(t))r.args.map(e=>(e.type=a(e.type),null===e.type?null:e)).filter(Boolean),r.type=a(r.type),null===r.type&&delete t[e]}function o(e){if("getInterfaces"in e){let t=e.getInterfaces();t.push(...t.splice(0).map(e=>a(e)).filter(Boolean))}}function a(t){if((0,n.isListType)(t)){let e=a(t.ofType);return null!=e?new n.GraphQLList(e):null}if((0,n.isNonNullType)(t)){let e=a(t.ofType);return null!=e?new n.GraphQLNonNull(e):null}if((0,n.isNamedType)(t)){let r=e[t.name];if(r&&t!==r)return r}return t}}t.healSchema=function(e){return i(e.getTypeMap(),e.getDirectives()),e},t.healTypes=i},840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertSome=t.isSome=t.compareNodes=t.nodeToString=t.compareStrings=t.isValidPath=t.isDocumentString=t.asArray=void 0;let n=r(57343);t.asArray=e=>Array.isArray(e)?e:e?[e]:[];let i=/\.[a-z0-9]+$/i;t.isDocumentString=function(e){if("string"!=typeof e||i.test(e))return!1;try{return(0,n.parse)(e),!0}catch(e){}return!1};let o=/[!%^<>`\n]/;function a(e,t){return String(e)<String(t)?-1:String(e)>String(t)?1:0}function s(e){let t;return"alias"in e&&(t=e.alias?.value),null==t&&"name"in e&&(t=e.name?.value),null==t&&(t=e.kind),t}t.isValidPath=function(e){return"string"==typeof e&&!o.test(e)},t.compareStrings=a,t.nodeToString=s,t.compareNodes=function(e,t,r){let n=s(e),i=s(t);return"function"==typeof r?r(n,i):a(n,i)},t.isSome=function(e){return null!=e},t.assertSome=function(e,t="Value should be something"){if(null==e)throw Error(t)}},99480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.implementsAbstractType=void 0;let n=r(57343);t.implementsAbstractType=function(e,t,r){if(null==r||null==t);else if(t===r)return!0;else if((0,n.isCompositeType)(t)&&(0,n.isCompositeType)(r))return(0,n.doTypesOverlap)(e,t,r);return!1}},14364:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inspect=void 0;let n=r(82174);n.__exportStar(r(85665),t),n.__exportStar(r(840),t),n.__exportStar(r(37992),t),n.__exportStar(r(83073),t),n.__exportStar(r(75567),t),n.__exportStar(r(23338),t),n.__exportStar(r(92928),t),n.__exportStar(r(83073),t),n.__exportStar(r(31132),t),n.__exportStar(r(89433),t),n.__exportStar(r(86899),t),n.__exportStar(r(77139),t),n.__exportStar(r(2153),t),n.__exportStar(r(27123),t),n.__exportStar(r(99936),t),n.__exportStar(r(88367),t),n.__exportStar(r(5857),t),n.__exportStar(r(57472),t),n.__exportStar(r(70183),t),n.__exportStar(r(99685),t),n.__exportStar(r(24178),t),n.__exportStar(r(40986),t),n.__exportStar(r(87950),t),n.__exportStar(r(98061),t),n.__exportStar(r(89156),t),n.__exportStar(r(93237),t),n.__exportStar(r(61832),t),n.__exportStar(r(89590),t),n.__exportStar(r(65577),t),n.__exportStar(r(95912),t),n.__exportStar(r(10791),t),n.__exportStar(r(66744),t),n.__exportStar(r(99480),t),n.__exportStar(r(25197),t),n.__exportStar(r(17660),t),n.__exportStar(r(11846),t),n.__exportStar(r(71238),t),n.__exportStar(r(6333),t),n.__exportStar(r(96012),t),n.__exportStar(r(22035),t),n.__exportStar(r(98591),t),n.__exportStar(r(71894),t),n.__exportStar(r(83025),t),n.__exportStar(r(27036),t),n.__exportStar(r(44185),t),n.__exportStar(r(64058),t);var i=r(53113);Object.defineProperty(t,"inspect",{enumerable:!0,get:function(){return i.inspect}}),n.__exportStar(r(91869),t),n.__exportStar(r(42059),t),n.__exportStar(r(15040),t),n.__exportStar(r(55219),t),n.__exportStar(r(73167),t),n.__exportStar(r(80883),t),n.__exportStar(r(90518),t),n.__exportStar(r(7477),t),n.__exportStar(r(84150),t),n.__exportStar(r(47959),t)},96012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=void 0,t.isAsyncIterable=function(e){return e?.[Symbol.asyncIterator]!=null}},22035:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDocumentNode=void 0;let n=r(57343);t.isDocumentNode=function(e){return e&&"object"==typeof e&&"kind"in e&&e.kind===n.Kind.DOCUMENT}},80883:(e,t)=>{"use strict";function r(e){return e?.then!=null}Object.defineProperty(t,"__esModule",{value:!0}),t.hasOwnProperty=t.promiseReduce=t.isPromise=t.isObjectLike=t.isIterableObject=void 0,t.isIterableObject=function(e){return null!=e&&"object"==typeof e&&Symbol.iterator in e},t.isObjectLike=function(e){return"object"==typeof e&&null!==e},t.isPromise=r,t.promiseReduce=function(e,t,n){let i=n;for(let n of e)i=r(i)?i.then(e=>t(e,n)):t(i,n);return i},t.hasOwnProperty=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},85665:()=>{},10791:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapAsyncIterator=void 0;let n=r(80883);function i(e,t){return new Promise(r=>r(t(e)))}function o(e){return{value:e,done:!1}}t.mapAsyncIterator=function(e,t,r,a){let s,l,u,c;function p(e){return e.done?u?u(e):e:i(e.value,t).then(o,l)}return Symbol.asyncIterator in e&&(e=e[Symbol.asyncIterator]()),a&&(u=e=>{let t=a();return(0,n.isPromise)(t)?t.then(()=>e):e}),"function"==typeof e.return&&(s=e.return,l=t=>{let r=()=>Promise.reject(t);return s.call(e).then(r,r)}),r&&(c=e=>i(e,r).then(o,l)),{next:()=>e.next().then(p,c),return(){let t=s?s.call(e).then(p,c):Promise.resolve({value:void 0,done:!0});return u?t.then(u):t},throw:t=>"function"==typeof e.throw?e.throw(t).then(p,c):Promise.reject(t).catch(l),[Symbol.asyncIterator](){return this}}}},70183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.correctASTNodes=t.mapSchema=void 0;let n=r(57343),i=r(83955),o=r(98061),a=r(24178),s=r(95912);function l(e,t,r,i=()=>!0){let a={};for(let s in e)if(!s.startsWith("__")){let l=e[s];if(null==l||!i(l)){a[s]=l;continue}let u=function(e,t,r){let i;let a=[...function(e,t){let r=e.getType(t),i=[o.MapperKind.TYPE];return(0,n.isObjectType)(r)?(i.push(o.MapperKind.COMPOSITE_TYPE,o.MapperKind.OBJECT_TYPE),t===e.getQueryType()?.name?i.push(o.MapperKind.ROOT_OBJECT,o.MapperKind.QUERY):t===e.getMutationType()?.name?i.push(o.MapperKind.ROOT_OBJECT,o.MapperKind.MUTATION):t===e.getSubscriptionType()?.name&&i.push(o.MapperKind.ROOT_OBJECT,o.MapperKind.SUBSCRIPTION)):(0,n.isInputObjectType)(r)?i.push(o.MapperKind.INPUT_OBJECT_TYPE):(0,n.isInterfaceType)(r)?i.push(o.MapperKind.COMPOSITE_TYPE,o.MapperKind.ABSTRACT_TYPE,o.MapperKind.INTERFACE_TYPE):(0,n.isUnionType)(r)?i.push(o.MapperKind.COMPOSITE_TYPE,o.MapperKind.ABSTRACT_TYPE,o.MapperKind.UNION_TYPE):(0,n.isEnumType)(r)?i.push(o.MapperKind.ENUM_TYPE):(0,n.isScalarType)(r)&&i.push(o.MapperKind.SCALAR_TYPE),i}(e,r)];for(;!i&&a.length>0;)i=t[a.pop()];return null!=i?i:null}(t,r,s);if(null==u){a[s]=l;continue}let c=u(l,t);if(void 0===c){a[s]=l;continue}a[s]=c}return a}function u(e,t,r){let n=d(e,t,{[o.MapperKind.ARGUMENT]:t=>{if(void 0===t.defaultValue)return t;let n=c(e,t.type);if(null!=n)return{...t,defaultValue:r(n,t.defaultValue)}}});return p(n,t,{[o.MapperKind.INPUT_OBJECT_FIELD]:e=>{if(void 0===e.defaultValue)return e;let t=c(n,e.type);if(null!=t)return{...e,defaultValue:r(t,e.defaultValue)}}})}function c(e,t){if((0,n.isListType)(t)){let r=c(e,t.ofType);return null!=r?new n.GraphQLList(r):null}if((0,n.isNonNullType)(t)){let r=c(e,t.ofType);return null!=r?new n.GraphQLNonNull(r):null}if((0,n.isNamedType)(t)){let r=e[t.name];return null!=r?r:null}return null}function p(e,t,r){let i={};for(let a in e)if(!a.startsWith("__")){let s=e[a];if(!(0,n.isObjectType)(s)&&!(0,n.isInterfaceType)(s)&&!(0,n.isInputObjectType)(s)){i[a]=s;continue}let l=function(e,t,r){let i;let a=[...function(e,t){let r=e.getType(t),i=[o.MapperKind.FIELD];return(0,n.isObjectType)(r)?(i.push(o.MapperKind.COMPOSITE_FIELD,o.MapperKind.OBJECT_FIELD),t===e.getQueryType()?.name?i.push(o.MapperKind.ROOT_FIELD,o.MapperKind.QUERY_ROOT_FIELD):t===e.getMutationType()?.name?i.push(o.MapperKind.ROOT_FIELD,o.MapperKind.MUTATION_ROOT_FIELD):t===e.getSubscriptionType()?.name&&i.push(o.MapperKind.ROOT_FIELD,o.MapperKind.SUBSCRIPTION_ROOT_FIELD)):(0,n.isInterfaceType)(r)?i.push(o.MapperKind.COMPOSITE_FIELD,o.MapperKind.INTERFACE_FIELD):(0,n.isInputObjectType)(r)&&i.push(o.MapperKind.INPUT_OBJECT_FIELD),i}(e,r)];for(;!i&&a.length>0;)i=t[a.pop()];return i??null}(t,r,a);if(null==l){i[a]=s;continue}let u=s.toConfig(),c=u.fields,p={};for(let e in c){let r=c[e],n=l(r,e,a,t);if(void 0===n)p[e]=r;else if(Array.isArray(n)){let[e,t]=n;null!=t.astNode&&(t.astNode={...t.astNode,name:{...t.astNode.name,value:e}}),p[e]=void 0===t?r:t}else null!==n&&(p[e]=n)}(0,n.isObjectType)(s)?i[a]=f(new n.GraphQLObjectType({...u,fields:p})):(0,n.isInterfaceType)(s)?i[a]=f(new n.GraphQLInterfaceType({...u,fields:p})):i[a]=f(new n.GraphQLInputObjectType({...u,fields:p}))}return i}function d(e,t,r){let i={};for(let a in e)if(!a.startsWith("__")){let s=e[a];if(!(0,n.isObjectType)(s)&&!(0,n.isInterfaceType)(s)){i[a]=s;continue}let l=function(e){let t=e[o.MapperKind.ARGUMENT];return null!=t?t:null}(r);if(null==l){i[a]=s;continue}let u=s.toConfig(),c=u.fields,p={};for(let e in c){let r=c[e],n=r.args;if(null==n){p[e]=r;continue}let i=Object.keys(n);if(!i.length){p[e]=r;continue}let o={};for(let r of i){let i=n[r],s=l(i,e,a,t);if(void 0===s)o[r]=i;else if(Array.isArray(s)){let[e,t]=s;o[e]=t}else null!==s&&(o[r]=s)}p[e]={...r,args:o}}(0,n.isObjectType)(s)?i[a]=new n.GraphQLObjectType({...u,fields:p}):(0,n.isInterfaceType)(s)?i[a]=new n.GraphQLInterfaceType({...u,fields:p}):i[a]=new n.GraphQLInputObjectType({...u,fields:p})}return i}function f(e){if((0,n.isObjectType)(e)){let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.fields){let n=t.fields[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,kind:n.Kind.OBJECT_TYPE_DEFINITION,fields:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,kind:n.Kind.OBJECT_TYPE_EXTENSION,fields:void 0}))),new n.GraphQLObjectType(t)}if((0,n.isInterfaceType)(e)){let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.fields){let n=t.fields[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,kind:n.Kind.INTERFACE_TYPE_DEFINITION,fields:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,kind:n.Kind.INTERFACE_TYPE_EXTENSION,fields:void 0}))),new n.GraphQLInterfaceType(t)}if((0,n.isInputObjectType)(e)){let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.fields){let n=t.fields[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,kind:n.Kind.INPUT_OBJECT_TYPE_DEFINITION,fields:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,kind:n.Kind.INPUT_OBJECT_TYPE_EXTENSION,fields:void 0}))),new n.GraphQLInputObjectType(t)}{if(!(0,n.isEnumType)(e))return e;let t=e.toConfig();if(null!=t.astNode){let e=[];for(let r in t.values){let n=t.values[r];null!=n.astNode&&e.push(n.astNode)}t.astNode={...t.astNode,values:e}}return null!=t.extensionASTNodes&&(t.extensionASTNodes=t.extensionASTNodes.map(e=>({...e,values:void 0}))),new n.GraphQLEnumType(t)}}t.mapSchema=function(e,t={}){let r=d(p(l(u(function(e,t,r){let i=function(e){let t=e[o.MapperKind.ENUM_VALUE];return null!=t?t:null}(r);return i?l(e,t,{[o.MapperKind.ENUM_TYPE]:e=>{let r=e.toConfig(),o=r.values,a={};for(let r in o){let n=o[r],s=i(n,e.name,t,r);if(void 0===s)a[r]=n;else if(Array.isArray(s)){let[e,t]=s;a[e]=void 0===t?n:t}else null!==s&&(a[r]=s)}return f(new n.GraphQLEnumType({...r,values:a}))}},e=>(0,n.isEnumType)(e)):e}(l(u(e.getTypeMap(),e,s.serializeInputValue),e,t,e=>(0,n.isLeafType)(e)),e,t),e,s.parseInputValue),e,t,e=>!(0,n.isLeafType)(e)),e,t),e,t),c=function(e,t,r){let n=function(e){let t=e[o.MapperKind.DIRECTIVE];return null!=t?t:null}(r);if(null==n)return e.slice();let i=[];for(let r of e){let e=n(r,t);void 0===e?i.push(r):null!==e&&i.push(e)}return i}(e.getDirectives(),e,t),{typeMap:h,directives:y}=(0,a.rewireTypes)(r,c);return new n.GraphQLSchema({...e.toConfig(),query:(0,i.getObjectTypeFromTypeMap)(h,(0,i.getObjectTypeFromTypeMap)(r,e.getQueryType())),mutation:(0,i.getObjectTypeFromTypeMap)(h,(0,i.getObjectTypeFromTypeMap)(r,e.getMutationType())),subscription:(0,i.getObjectTypeFromTypeMap)(h,(0,i.getObjectTypeFromTypeMap)(r,e.getSubscriptionType())),types:Object.values(h),directives:y})},t.correctASTNodes=f},91869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.memoize2of5=t.memoize2of4=t.memoize5=t.memoize4=t.memoize3=t.memoize2=t.memoize1=void 0,t.memoize1=function(e){let t=new WeakMap;return function(r){let n=t.get(r);if(void 0===n){let n=e(r);return t.set(r,n),n}return n}},t.memoize2=function(e){let t=new WeakMap;return function(r,n){let i=t.get(r);if(!i){i=new WeakMap,t.set(r,i);let o=e(r,n);return i.set(n,o),o}let o=i.get(n);if(void 0===o){let t=e(r,n);return i.set(n,t),t}return o}},t.memoize3=function(e){let t=new WeakMap;return function(r,n,i){let o=t.get(r);if(!o){o=new WeakMap,t.set(r,o);let a=new WeakMap;o.set(n,a);let s=e(r,n,i);return a.set(i,s),s}let a=o.get(n);if(!a){a=new WeakMap,o.set(n,a);let t=e(r,n,i);return a.set(i,t),t}let s=a.get(i);if(void 0===s){let t=e(r,n,i);return a.set(i,t),t}return s}},t.memoize4=function(e){let t=new WeakMap;return function(r,n,i,o){let a=t.get(r);if(!a){a=new WeakMap,t.set(r,a);let s=new WeakMap;a.set(n,s);let l=new WeakMap;s.set(i,l);let u=e(r,n,i,o);return l.set(o,u),u}let s=a.get(n);if(!s){s=new WeakMap,a.set(n,s);let t=new WeakMap;s.set(i,t);let l=e(r,n,i,o);return t.set(o,l),l}let l=s.get(i);if(!l){let t=new WeakMap;s.set(i,t);let a=e(r,n,i,o);return t.set(o,a),a}let u=l.get(o);if(void 0===u){let t=e(r,n,i,o);return l.set(o,t),t}return u}},t.memoize5=function(e){let t=new WeakMap;return function(r,n,i,o,a){let s=t.get(r);if(!s){s=new WeakMap,t.set(r,s);let l=new WeakMap;s.set(n,l);let u=new WeakMap;l.set(i,u);let c=new WeakMap;u.set(o,c);let p=e(r,n,i,o,a);return c.set(a,p),p}let l=s.get(n);if(!l){l=new WeakMap,s.set(n,l);let t=new WeakMap;l.set(i,t);let u=new WeakMap;t.set(o,u);let c=e(r,n,i,o,a);return u.set(a,c),c}let u=l.get(i);if(!u){u=new WeakMap,l.set(i,u);let t=new WeakMap;u.set(o,t);let s=e(r,n,i,o,a);return t.set(a,s),s}let c=u.get(o);if(!c){c=new WeakMap,u.set(o,c);let t=e(r,n,i,o,a);return c.set(a,t),t}let p=c.get(a);if(void 0===p){let t=e(r,n,i,o,a);return c.set(a,t),t}return p}},t.memoize2of4=function(e){let t=new WeakMap;return function(r,n,i,o){let a=t.get(r);if(!a){a=new WeakMap,t.set(r,a);let s=e(r,n,i,o);return a.set(n,s),s}let s=a.get(n);if(void 0===s){let t=e(r,n,i,o);return a.set(n,t),t}return s}},t.memoize2of5=function(e){let t=new WeakMap;return function(r,n,i,o,a){let s=t.get(r);if(!s){s=new WeakMap,t.set(r,s);let l=e(r,n,i,o,a);return s.set(n,l),l}let l=s.get(n);if(void 0===l){let t=e(r,n,i,o,a);return s.set(n,t),t}return l}}},87950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeDeep=void 0;let n=r(840);function i(e){return e&&"object"==typeof e&&!Array.isArray(e)}t.mergeDeep=function e(t,r=!1,o=!1,a=!1){if(o&&a){let n;if(t.every(e=>{if(Array.isArray(e)){if(void 0===n)return n=e.length,!0;if(n===e.length)return!0}return!1}))return Array(n).fill(null).map((n,i)=>e(t.map(e=>e[i]),r,o,a))}let s={};for(let l of(r&&Object.setPrototypeOf(s,Object.create(Object.getPrototypeOf(t[0]))),t))if(i(l)){if(r){let e=Object.getPrototypeOf(s),t=Object.getPrototypeOf(l);if(t)for(let r of Object.getOwnPropertyNames(t)){let i=Object.getOwnPropertyDescriptor(t,r);(0,n.isSome)(i)&&Object.defineProperty(e,r,i)}}for(let t in l)i(l[t])?t in s?s[t]=e([s[t],l[t]],r,o,a):Object.assign(s,{[t]:l[t]}):o&&Array.isArray(s[t])?Array.isArray(l[t])?a&&s[t].length===l[t].length?s[t]=e([s[t],l[t]],r,o,a):s[t].push(...l[t]):s[t].push(l[t]):Object.assign(s,{[t]:l[t]})}return s}},7477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeIncrementalResult=void 0;let n=r(286);t.mergeIncrementalResult=function e({incrementalResult:t,executionResult:r}){let i=["data",...t.path??[]];if(t.items)for(let e of t.items)(0,n.dset)(r,i,e),i[i.length-1]++;t.data&&(0,n.dset)(r,i,t.data),t.errors&&(r.errors=r.errors||[],r.errors.push(...t.errors)),t.extensions&&(0,n.dset)(r,"extensions",t.extensions),t.incremental&&t.incremental.forEach(t=>{e({incrementalResult:t,executionResult:r})})}},17660:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observableToAsyncIterable=void 0,t.observableToAsyncIterable=function(e){let t=[],r=[],n=!0,i=e=>{0!==t.length?t.shift()({value:e,done:!1}):r.push({value:e,done:!1})},o=e=>{0!==t.length?t.shift()({value:{errors:[e]},done:!1}):r.push({value:{errors:[e]},done:!1})},a=()=>{0!==t.length?t.shift()({done:!0}):r.push({done:!0})},s=()=>new Promise(e=>{0!==r.length?e(r.shift()):t.push(e)}),l=e.subscribe({next(e){i(e)},error(e){o(e)},complete(){a()}}),u=()=>{if(n){for(let e of(n=!1,l.unsubscribe(),t))e({value:void 0,done:!0});t.length=0,r.length=0}};return{next(){return n?s():this.return()},return:()=>(u(),Promise.resolve({value:void 0,done:!0})),throw:e=>(u(),Promise.reject(e)),[Symbol.asyncIterator](){return this}}}},89433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGraphQLJSON=void 0;let n=r(57343);t.parseGraphQLJSON=function(e,t,r){var i;let o=JSON.parse((65279===(i=(i=t).toString()).charCodeAt(0)&&(i=i.slice(1)),i));if(o.data&&(o=o.data),"Document"===o.kind)return{location:e,document:o};if(o.__schema)return{location:e,schema:(0,n.buildClientSchema)(o,r)};if("string"==typeof o)return{location:e,rawSDL:o};throw Error("Not valid JSON content")}},86899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDescribable=t.transformCommentsToDescriptions=t.parseGraphQLSDL=void 0;let n=r(57343),i=r(44185);function o(e,t={}){let r=(0,n.parse)(e,{...t,noLocation:!1});return(0,n.visit)(r,{leave:e=>{if(a(e)){let t=(0,i.getLeadingCommentBlock)(e);if(void 0!==t){let r=(0,i.dedentBlockStringValue)("\n"+t),o=r.includes("\n");return e.description?{...e,description:{...e.description,value:e.description.value+"\n"+r,block:!0}}:{...e,description:{kind:n.Kind.STRING,value:r,block:o}}}}}})}function a(e){return(0,n.isTypeSystemDefinitionNode)(e)||e.kind===n.Kind.FIELD_DEFINITION||e.kind===n.Kind.INPUT_VALUE_DEFINITION||e.kind===n.Kind.ENUM_VALUE_DEFINITION}t.parseGraphQLSDL=function(e,t,r={}){let i;try{r.commentDescriptions&&t.includes("#")?(i=o(t,r),r.noLocation&&(i=(0,n.parse)((0,n.print)(i),r))):i=(0,n.parse)(new n.Source(t,e),r)}catch(e){if(e.message.includes("EOF")&&""===t.replace(/(\#[^*]*)/g,"").trim())i={kind:n.Kind.DOCUMENT,definitions:[]};else throw e}return{location:e,document:i}},t.transformCommentsToDescriptions=o,t.isDescribable=a},92928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDirectiveNodes=t.makeDirectiveNode=t.makeDeprecatedDirective=t.astFromEnumValue=t.astFromInputField=t.astFromField=t.astFromScalarType=t.astFromEnumType=t.astFromInputObjectType=t.astFromUnionType=t.astFromInterfaceType=t.astFromObjectType=t.astFromArg=t.getDirectiveNodes=t.astFromDirective=t.astFromSchema=t.printSchemaWithDirectives=t.getDocumentNodeFromSchema=void 0;let n=r(57343),i=r(99867),o=r(22935),a=r(98591),s=r(83796),l=r(37992),u=r(840),c=r(27036);function p(e,t={}){let r=t.pathToDirectivesInExtensions,i=e.getTypeMap(),o=d(e,r),a=null!=o?[o]:[];for(let t of e.getDirectives())(0,n.isSpecifiedDirective)(t)||a.push(f(t,e,r));for(let t in i){let o=i[t],s=(0,n.isSpecifiedScalarType)(o),l=(0,n.isIntrospectionType)(o);if(!s&&!l){if((0,n.isObjectType)(o))a.push(m(o,e,r));else if((0,n.isInterfaceType)(o))a.push(v(o,e,r));else if((0,n.isUnionType)(o))a.push(g(o,e,r));else if((0,n.isInputObjectType)(o))a.push(b(o,e,r));else if((0,n.isEnumType)(o))a.push(_(o,e,r));else if((0,n.isScalarType)(o))a.push(T(o,e,r));else throw Error(`Unknown type ${o}.`)}}return{kind:n.Kind.DOCUMENT,definitions:a}}function d(e,t){let r=new Map([["query",void 0],["mutation",void 0],["subscription",void 0]]),o=[];if(null!=e.astNode&&o.push(e.astNode),null!=e.extensionASTNodes)for(let t of e.extensionASTNodes)o.push(t);for(let e of o)if(e.operationTypes)for(let t of e.operationTypes)r.set(t.operation,t);let a=(0,c.getRootTypeMap)(e);for(let[e,t]of r){let o=a.get(e);if(null!=o){let a=(0,i.astFromType)(o);null!=t?t.type=a:r.set(e,{kind:n.Kind.OPERATION_TYPE_DEFINITION,operation:e,type:a})}}let l=[...r.values()].filter(u.isSome),p=h(e,e,t);if(!l.length&&!p.length)return null;let d={kind:null!=l?n.Kind.SCHEMA_DEFINITION:n.Kind.SCHEMA_EXTENSION,operationTypes:l,directives:p},f=(0,s.getDescriptionNode)(e);return f&&(d.description=f),d}function f(e,t,r){return{kind:n.Kind.DIRECTIVE_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},arguments:e.args?.map(e=>y(e,t,r)),repeatable:e.isRepeatable,locations:e.locations?.map(e=>({kind:n.Kind.NAME,value:e}))||[]}}function h(e,t,r){let n,i=[],o=(0,l.getDirectivesInExtensions)(e,r);null!=o&&(n=N(t,o));let a=null,s=null;return null!=n&&(i=n.filter(e=>"deprecated"!==e.name.value&&"specifiedBy"!==e.name.value),null!=e.deprecationReason&&(a=n.filter(e=>"deprecated"===e.name.value)?.[0]),(null!=e.specifiedByUrl||null!=e.specifiedByURL)&&(s=n.filter(e=>"specifiedBy"===e.name.value)?.[0])),null!=e.deprecationReason&&null==a&&(a=w(e.deprecationReason)),(null!=e.specifiedByUrl||null!=e.specifiedByURL&&null==s)&&(s=I("specifiedBy",{url:e.specifiedByUrl||e.specifiedByURL})),null!=a&&i.push(a),null!=s&&i.push(s),i}function y(e,t,r){return{kind:n.Kind.INPUT_VALUE_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},type:(0,i.astFromType)(e.type),defaultValue:void 0!==e.defaultValue?(0,o.astFromValue)(e.defaultValue,e.type)??void 0:void 0,directives:h(e,t,r)}}function m(e,t,r){return{kind:n.Kind.OBJECT_TYPE_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(e=>E(e,t,r)),interfaces:Object.values(e.getInterfaces()).map(e=>(0,i.astFromType)(e)),directives:h(e,t,r)}}function v(e,t,r){let o={kind:n.Kind.INTERFACE_TYPE_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(e=>E(e,t,r)),directives:h(e,t,r)};return"getInterfaces"in e&&(o.interfaces=Object.values(e.getInterfaces()).map(e=>(0,i.astFromType)(e))),o}function g(e,t,r){return{kind:n.Kind.UNION_TYPE_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},directives:h(e,t,r),types:e.getTypes().map(e=>(0,i.astFromType)(e))}}function b(e,t,r){return{kind:n.Kind.INPUT_OBJECT_TYPE_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},fields:Object.values(e.getFields()).map(e=>O(e,t,r)),directives:h(e,t,r)}}function _(e,t,r){return{kind:n.Kind.ENUM_TYPE_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},values:Object.values(e.getValues()).map(e=>S(e,t,r)),directives:h(e,t,r)}}function T(e,t,r){let i=N(t,(0,l.getDirectivesInExtensions)(e,r)),o=e.specifiedByUrl||e.specifiedByURL;return o&&!i.some(e=>"specifiedBy"===e.name.value)&&i.push(I("specifiedBy",{url:o})),{kind:n.Kind.SCALAR_TYPE_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},directives:i}}function E(e,t,r){return{kind:n.Kind.FIELD_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},arguments:e.args.map(e=>y(e,t,r)),type:(0,i.astFromType)(e.type),directives:h(e,t,r)}}function O(e,t,r){return{kind:n.Kind.INPUT_VALUE_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},type:(0,i.astFromType)(e.type),directives:h(e,t,r),defaultValue:(0,o.astFromValue)(e.defaultValue,e.type)??void 0}}function S(e,t,r){return{kind:n.Kind.ENUM_VALUE_DEFINITION,description:(0,s.getDescriptionNode)(e),name:{kind:n.Kind.NAME,value:e.name},directives:h(e,t,r)}}function w(e){return I("deprecated",{reason:e},n.GraphQLDeprecatedDirective)}function I(e,t,r){let i=[];for(let e in t){let s;let l=t[e];if(null!=r){let t=r.args.find(t=>t.name===e);t&&(s=(0,o.astFromValue)(l,t.type))}null==s&&(s=(0,a.astFromValueUntyped)(l)),null!=s&&i.push({kind:n.Kind.ARGUMENT,name:{kind:n.Kind.NAME,value:e},value:s})}return{kind:n.Kind.DIRECTIVE,name:{kind:n.Kind.NAME,value:e},arguments:i}}function N(e,t){let r=[];for(let{name:n,args:i}of t){let t=e?.getDirective(n);r.push(I(n,i,t))}return r}t.getDocumentNodeFromSchema=p,t.printSchemaWithDirectives=function(e,t={}){let r=p(e,t);return(0,n.print)(r)},t.astFromSchema=d,t.astFromDirective=f,t.getDirectiveNodes=h,t.astFromArg=y,t.astFromObjectType=m,t.astFromInterfaceType=v,t.astFromUnionType=g,t.astFromInputObjectType=b,t.astFromEnumType=_,t.astFromScalarType=T,t.astFromField=E,t.astFromInputField=O,t.astFromEnumValue=S,t.makeDeprecatedDirective=w,t.makeDirectiveNode=I,t.makeDirectiveNodes=N},40986:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pruneSchema=void 0;let n=r(57343),i=r(23338),o=r(98061),a=r(70183),s=r(27036);function l(e,t,r=new Set){let o=new Map;for(;e.length;){let a=e.pop();if(r.has(a)&&!0!==o[a])continue;let s=t.getType(a);if(s){if((0,n.isUnionType)(s)&&e.push(...s.getTypes().map(e=>e.name)),(0,n.isInterfaceType)(s)&&!0===o[a]&&(e.push(...(0,i.getImplementingTypes)(s.name,t)),o[a]=!1),(0,n.isEnumType)(s)&&e.push(...s.getValues().flatMap(e=>u(t,e))),"getInterfaces"in s&&e.push(...s.getInterfaces().map(e=>e.name)),"getFields"in s){let r=Object.entries(s.getFields());if(!r.length)continue;for(let[,i]of r){(0,n.isObjectType)(s)&&e.push(...i.args.flatMap(e=>{let r=[(0,n.getNamedType)(e.type).name];return r.push(...u(t,e)),r}));let r=(0,n.getNamedType)(i.type);e.push(r.name),e.push(...u(t,i)),!(0,n.isInterfaceType)(r)||r.name in o||(o[r.name]=!0)}}e.push(...u(t,s)),r.add(a)}}return r}function u(e,t){let r=new Set;if(t.astNode?.directives)for(let i of t.astNode.directives){let t=e.getDirective(i.name.value);if(t?.args)for(let e of t.args){let t=(0,n.getNamedType)(e.type);r.add(t.name)}}if(t.extensions?.directives)for(let i in t.extensions.directives){let t=e.getDirective(i);if(t?.args)for(let e of t.args){let t=(0,n.getNamedType)(e.type);r.add(t.name)}}return[...r]}t.pruneSchema=function(e,t={}){let{skipEmptyCompositeTypePruning:r,skipEmptyUnionPruning:i,skipPruning:u,skipUnimplementedInterfacesPruning:c,skipUnusedTypesPruning:p}=t,d=[],f=e;do{let e=function(e){let t=[];for(let r of(0,s.getRootTypes)(e))t.push(r.name);return l(t,e)}(f);if(u){let t=[];for(let e in f.getTypeMap()){if(e.startsWith("__"))continue;let r=f.getType(e);r&&u(r)&&t.push(e)}e=l(t,f,e)}d=[],f=(0,a.mapSchema)(f,{[o.MapperKind.TYPE]:t=>e.has(t.name)||(0,n.isSpecifiedScalarType)(t)?t:((0,n.isUnionType)(t)||(0,n.isInputObjectType)(t)||(0,n.isInterfaceType)(t)||(0,n.isObjectType)(t)||(0,n.isScalarType)(t))&&(p||(0,n.isUnionType)(t)&&i&&!Object.keys(t.getTypes()).length||((0,n.isInputObjectType)(t)||(0,n.isInterfaceType)(t)||(0,n.isObjectType)(t))&&r&&!Object.keys(t.getFields()).length||(0,n.isInterfaceType)(t)&&c)?t:(d.push(t.name),e.delete(t.name),null)})}while(d.length);return f}},65577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renameType=void 0;let n=r(57343);t.renameType=function(e,t){if((0,n.isObjectType)(e))return new n.GraphQLObjectType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});if((0,n.isInterfaceType)(e))return new n.GraphQLInterfaceType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});if((0,n.isUnionType)(e))return new n.GraphQLUnionType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});if((0,n.isInputObjectType)(e))return new n.GraphQLInputObjectType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});if((0,n.isEnumType)(e))return new n.GraphQLEnumType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});if((0,n.isScalarType)(e))return new n.GraphQLScalarType({...e.toConfig(),name:t,astNode:null==e.astNode?e.astNode:{...e.astNode,name:{...e.astNode.name,value:t}},extensionASTNodes:null==e.extensionASTNodes?e.extensionASTNodes:e.extensionASTNodes.map(e=>({...e,name:{...e.name,value:t}}))});throw Error(`Unknown type ${e}.`)}},24178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rewireTypes=void 0;let n=r(57343),i=r(89156);t.rewireTypes=function(e,t){let r=Object.create(null);for(let t in e)r[t]=e[t];let o=Object.create(null);for(let e in r){let t=r[e];if(null==t||e.startsWith("__"))continue;let n=t.name;if(!n.startsWith("__")){if(null!=o[n]){console.warn(`Duplicate schema type name ${n} found; keeping the existing one found in the schema`);continue}o[n]=t}}for(let e in o)o[e]=s(o[e]);return{typeMap:o,directives:t.map(e=>(function(e){if((0,n.isSpecifiedDirective)(e))return e;let t=e.toConfig();return t.args=a(t.args),new n.GraphQLDirective(t)})(e))};function a(e){let t={};for(let r in e){let n=e[r],i=c(n.type);null!=i&&(n.type=i,t[r]=n)}return t}function s(e){if((0,n.isObjectType)(e)){let t=e.toConfig(),r={...t,fields:()=>l(t.fields),interfaces:()=>u(t.interfaces)};return new n.GraphQLObjectType(r)}if((0,n.isInterfaceType)(e)){let t=e.toConfig(),r={...t,fields:()=>l(t.fields)};return"interfaces"in r&&(r.interfaces=()=>u(t.interfaces)),new n.GraphQLInterfaceType(r)}if((0,n.isUnionType)(e)){let t=e.toConfig(),r={...t,types:()=>u(t.types)};return new n.GraphQLUnionType(r)}if((0,n.isInputObjectType)(e)){let t=e.toConfig(),r={...t,fields:()=>(function(e){let t={};for(let r in e){let n=e[r],i=c(n.type);null!=i&&(n.type=i,t[r]=n)}return t})(t.fields)};return new n.GraphQLInputObjectType(r)}if((0,n.isEnumType)(e)){let t=e.toConfig();return new n.GraphQLEnumType(t)}if((0,n.isScalarType)(e)){if((0,n.isSpecifiedScalarType)(e))return e;let t=e.toConfig();return new n.GraphQLScalarType(t)}throw Error(`Unexpected schema type: ${e}`)}function l(e){let t={};for(let r in e){let n=e[r],i=c(n.type);null!=i&&n.args&&(n.type=i,n.args=a(n.args),t[r]=n)}return t}function u(e){let t=[];for(let r of e){let e=c(r);null!=e&&t.push(e)}return t}function c(e){if((0,n.isListType)(e)){let t=c(e.ofType);return null!=t?new n.GraphQLList(t):null}if((0,n.isNonNullType)(e)){let t=c(e.ofType);return null!=t?new n.GraphQLNonNull(t):null}if((0,n.isNamedType)(e)){let t=r[e.name];return void 0===t&&(o[(t=(0,i.isNamedStub)(e)?(0,i.getBuiltInForStub)(e):s(e)).name]=r[e.name]=t),null!=t?o[t.name]:null}return null}}},27036:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRootTypeMap=t.getRootTypes=t.getRootTypeNames=t.getDefinedRootType=void 0;let n=r(25197),i=r(91869);t.getDefinedRootType=function(e,r,i){let o=(0,t.getRootTypeMap)(e).get(r);if(null==o)throw(0,n.createGraphQLError)(`Schema is not configured to execute ${r} operation.`,{nodes:i});return o},t.getRootTypeNames=(0,i.memoize1)(function(e){return new Set([...(0,t.getRootTypes)(e)].map(e=>e.name))}),t.getRootTypes=(0,i.memoize1)(function(e){return new Set((0,t.getRootTypeMap)(e).values())}),t.getRootTypeMap=(0,i.memoize1)(function(e){let t=new Map,r=e.getQueryType();r&&t.set("query",r);let n=e.getMutationType();n&&t.set("mutation",n);let i=e.getSubscriptionType();return i&&t.set("subscription",i),t})},93237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelectionSet=void 0;let n=r(57343);t.parseSelectionSet=function(e,t){return(0,n.parse)(e,t).definitions[0].selectionSet}},89156:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBuiltInForStub=t.isNamedStub=t.createStub=t.createNamedStub=void 0;let n=r(57343);function i(e,t){return new("object"===t?n.GraphQLObjectType:"interface"===t?n.GraphQLInterfaceType:n.GraphQLInputObjectType)({name:e,fields:{_fake:{type:n.GraphQLString}}})}t.createNamedStub=i,t.createStub=function e(t,r){switch(t.kind){case n.Kind.LIST_TYPE:return new n.GraphQLList(e(t.type,r));case n.Kind.NON_NULL_TYPE:return new n.GraphQLNonNull(e(t.type,r));default:if("output"===r)return i(t.name.value,"object");return i(t.name.value,"input")}},t.isNamedStub=function(e){if("getFields"in e){let t=e.getFields();for(let e in t)return"_fake"===t[e].name}return!1},t.getBuiltInForStub=function(e){switch(e.name){case n.GraphQLInt.name:return n.GraphQLInt;case n.GraphQLFloat.name:return n.GraphQLFloat;case n.GraphQLString.name:return n.GraphQLString;case n.GraphQLBoolean.name:return n.GraphQLBoolean;case n.GraphQLID.name:return n.GraphQLID;default:return e}}},95912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseInputValueLiteral=t.parseInputValue=t.serializeInputValue=t.transformInputValue=void 0;let n=r(57343),i=r(840);function o(e,t,r=null,a=null){if(null==t)return t;let s=(0,n.getNullableType)(e);if((0,n.isLeafType)(s))return null!=r?r(s,t):t;if((0,n.isListType)(s))return(0,i.asArray)(t).map(e=>o(s.ofType,e,r,a));if((0,n.isInputObjectType)(s)){let e=s.getFields(),n={};for(let i in t){let s=e[i];null!=s&&(n[i]=o(s.type,t[i],r,a))}return null!=a?a(s,n):n}}t.transformInputValue=o,t.serializeInputValue=function(e,t){return o(e,t,(e,t)=>{try{return e.serialize(t)}catch{return t}})},t.parseInputValue=function(e,t){return o(e,t,(e,t)=>{try{return e.parseValue(t)}catch{return t}})},t.parseInputValueLiteral=function(e,t){return o(e,t,(e,t)=>e.parseLiteral(t,{}))}},2153:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveLocation=void 0,function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"}(r||(t.DirectiveLocation=r={}))},66744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVariableNameGenerator=t.updateArgument=void 0;let n=r(57343),i=r(99867);t.updateArgument=function(e,t,r,o,a,s,l){if(e[o]={kind:n.Kind.ARGUMENT,name:{kind:n.Kind.NAME,value:o},value:{kind:n.Kind.VARIABLE,name:{kind:n.Kind.NAME,value:a}}},t[a]={kind:n.Kind.VARIABLE_DEFINITION,variable:{kind:n.Kind.VARIABLE,name:{kind:n.Kind.NAME,value:a}},type:(0,i.astFromType)(s)},void 0!==l){r[a]=l;return}a in r&&delete r[a]},t.createVariableNameGenerator=function(e){let t=0;return r=>{let n;do n=`_v${(t++).toString()}_${r}`;while(n in e);return n}}},31132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultRules=t.validateGraphQlDocuments=void 0;let n=r(57343);function i(){let e=["NoUnusedFragmentsRule","NoUnusedVariablesRule","KnownDirectivesRule"];return n.versionInfo.major<15&&(e=e.map(e=>e.replace(/Rule$/,""))),n.specifiedRules.filter(t=>!e.includes(t.name))}t.validateGraphQlDocuments=function(e,t,r=i()){let o=new Set,a=new Map;for(let e of t)for(let t of e.definitions)t.kind===n.Kind.FRAGMENT_DEFINITION?a.set(t.name.value,t):o.add(t);let s={kind:n.Kind.DOCUMENT,definitions:Array.from([...o,...a.values()])},l=(0,n.validate)(e,s,r);for(let e of l)if(e.stack=e.message,e.locations)for(let t of e.locations)e.stack+=`
    at ${e.source?.name}:${t.line}:${t.column}`;return l},t.createDefaultRules=i},6333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.valueMatchesCriteria=void 0,t.valueMatchesCriteria=function e(t,r){if(null==t);else if(Array.isArray(t))return Array.isArray(r)&&t.every((t,n)=>e(t,r[n]));else if("object"==typeof t)return"object"==typeof r&&r&&Object.keys(r).every(n=>e(t[n],r[n]));else if(r instanceof RegExp)return r.test(t);return t===r}},11846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visitResult=t.visitErrors=t.visitData=void 0;let n=r(57343),i=r(64058),o=r(15040);function a(e,t,r,n,i){if(null==n){e[t]=r;return}let o=n[i];if(null==o){e[t]=r;return}let a=o(r);if(void 0===a){delete e[t];return}e[t]=a}t.visitData=function e(t,r,n){if(Array.isArray(t))return t.map(t=>e(t,r,n));if("object"==typeof t){let i=null!=r?r(t):t;if(null!=i)for(let t in i){let o=i[t];Object.defineProperty(i,t,{value:e(o,r,n)})}return null!=n?n(i):i}return t},t.visitErrors=function(e,t){return e.map(e=>t(e))},t.visitResult=function(e,t,r,s,l){let u=t.document.definitions.reduce((e,t)=>(t.kind===n.Kind.FRAGMENT_DEFINITION&&(e[t.name.value]=t),e),{}),c=t.variables||{},p={segmentInfoMap:new Map,unpathedErrors:new Set},d=e.data,f=e.errors,h=null!=f&&null!=l,y=(0,o.getOperationASTFromRequest)(t);return null!=d&&null!=y&&(e.data=function(e,t,r,o,s,l,u,c){let p=function(e,t){switch(t.operation){case"query":return e.getQueryType();case"mutation":return e.getMutationType();case"subscription":return e.getSubscriptionType()}}(r,t),{fields:d}=(0,i.collectFields)(r,o,s,p,t.selectionSet);return function e(t,r,o,s,l,u,c,p,d,f){let h;let y=r.getFields(),m=c?.[r.name],v=m?.__enter,g=null!=v?v(t):t,b=null;if(null!=d)for(let e of(b=(h=function(e,t){let r=Object.create(null),n=new Set;for(let i of e){let e=i.path?.[t];if(null==e){n.add(i);continue}e in r?r[e].push(i):r[e]=[i]}return{errorMap:r,unpathedErrors:n}}(d,p)).errorMap,h.unpathedErrors))f.unpathedErrors.add(e);for(let[d,h]of o){let o;let v=h[0].name.value,_=y[v]?.type;if(null==_)switch(v){case"__typename":_=n.TypeNameMetaFieldDef.type;break;case"__schema":_=n.SchemaMetaFieldDef.type;break;case"__type":_=n.TypeMetaFieldDef.type}let T=p+1;b&&(null!=(o=b[d])&&delete b[d],function(e,t,r,n=[],i){for(let o of n){let n={type:e,fieldName:t,pathIndex:r},a=i.segmentInfoMap.get(o);null==a?i.segmentInfoMap.set(o,[n]):a.push(n)}}(r,v,T,o,f));let E=function t(r,o,a,s,l,u,c,p,d=[],f){if(null==r)return r;let h=(0,n.getNullableType)(o);if((0,n.isListType)(h)){var y;return y=h.ofType,r.map(e=>t(e,y,a,s,l,u,c,p+1,d,f))}if((0,n.isAbstractType)(h)){let t=s.getType(r.__typename),{fields:n,patches:o}=(0,i.collectSubFields)(s,l,u,t,a);if(o.length)for(let e of(n=new Map(n),o))for(let[t,r]of e.fields){let e=n.get(t);e?e.push(...r):n.set(t,r)}return e(r,t,n,s,l,u,c,p,d,f)}if((0,n.isObjectType)(h)){let{fields:t,patches:n}=(0,i.collectSubFields)(s,l,u,h,a);if(n.length)for(let e of(t=new Map(t),n))for(let[r,n]of e.fields){let e=t.get(r);e?e.push(...n):t.set(r,n)}return e(r,h,t,s,l,u,c,p,d,f)}let m=c?.[h.name];if(null==m)return r;let v=m(r);return void 0===v?r:v}(t[d],_,h,s,l,u,c,T,o,f);a(g,d,E,m,v)}let _=g.__typename;if(null!=_&&a(g,"__typename",_,m,"__typename"),b)for(let e in b)for(let t of b[e])f.unpathedErrors.add(t);let T=m?.__leave;return null!=T?T(g):g}(e,p,d,r,o,s,l,0,u,c)}(d,y,r,u,c,s,h?f:void 0,p)),null!=f&&l&&(e.errors=function(e,t,r){let n=r.segmentInfoMap,i=r.unpathedErrors,o=t.__unpathed;return e.map(e=>{let r=n.get(e),a=null==r?e:r.reduceRight((e,r)=>{let n=t[r.type.name];if(null==n)return e;let i=n[r.fieldName];return null==i?e:i(e,r.pathIndex)},e);return o&&i.has(e)?o(a):a})}(f,l,p)),e}},83025:(e,t,r)=>{"use strict";async function n(e){return{value:e,done:!0}}Object.defineProperty(t,"__esModule",{value:!0}),t.withCancel=t.getAsyncIterableWithCancel=t.getAsyncIteratorWithCancel=void 0;let i=(0,r(91869).memoize2)(function(e,t){return function(...r){return Reflect.apply(t,e,r)}});function o(e,t){return new Proxy(e,{has:(e,t)=>"return"===t||Reflect.has(e,t),get(e,r,o){let a=Reflect.get(e,r,o);if("return"===r){let r=a||n;return async function(n){return Reflect.apply(r,e,[await t(n)])}}return"function"==typeof a?i(e,a):a}})}function a(e,t){return new Proxy(e,{get(e,r,n){let a=Reflect.get(e,r,n);return Symbol.asyncIterator===r?function(){return o(Reflect.apply(a,e,[]),t)}:"function"==typeof a?i(e,a):a}})}t.getAsyncIteratorWithCancel=o,t.getAsyncIterableWithCancel=a,t.withCancel=a},7770:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillBlob=void 0,t.hasBufferMethod=a,t.hasArrayBufferMethod=s,t.hasBytesMethod=l,t.hasTextMethod=u,t.hasSizeProperty=c,t.hasStreamMethod=p,t.hasBlobSignature=d,t.isArrayBuffer=f;let n=r(95431),i=r(71663);function o(e){return"string"==typeof e?Buffer.from(e):Buffer.isBuffer(e)?e:(0,i.isArrayBufferView)(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength):Buffer.from(e)}function a(e){return null!=e&&null!=e.buffer&&"function"==typeof e.buffer}function s(e){return null!=e&&null!=e.arrayBuffer&&"function"==typeof e.arrayBuffer}function l(e){return null!=e&&null!=e.bytes&&"function"==typeof e.bytes}function u(e){return null!=e&&null!=e.text&&"function"==typeof e.text}function c(e){return null!=e&&"number"==typeof e.size}function p(e){return null!=e&&null!=e.stream&&"function"==typeof e.stream}function d(e){return null!=e&&"Blob"===e[Symbol.toStringTag]}function f(e){return null!=e&&null!=e.byteLength&&null!=e.slice}class h{blobParts;type;encoding;_size=null;constructor(e=[],t){if(this.blobParts=e,this.type=t?.type||"application/octet-stream",this.encoding=t?.encoding||"utf8",this._size=t?.size||null,1===e.length&&d(e[0]))return e[0]}_buffer=null;buffer(){if(this._buffer)return(0,i.fakePromise)(this._buffer);if(1===this.blobParts.length){let e=this.blobParts[0];return a(e)?e.buffer().then(e=>(this._buffer=e,this._buffer)):l(e)?e.bytes().then(e=>(this._buffer=Buffer.from(e),this._buffer)):s(e)?e.arrayBuffer().then(t=>(this._buffer=Buffer.from(t,void 0,e.size),this._buffer)):(this._buffer=o(e),(0,i.fakePromise)(this._buffer))}let e=[],t=this.blobParts.map((r,n)=>{if(a(r)){e.push(r.buffer().then(e=>{t[n]=e}));return}if(s(r)){e.push(r.arrayBuffer().then(e=>{t[n]=Buffer.from(e,void 0,r.size)}));return}if(!l(r))return o(r);e.push(r.bytes().then(e=>{t[n]=Buffer.from(e)}))});return e.length>0?Promise.all(e).then(()=>Buffer.concat(t,this._size||void 0)):(0,i.fakePromise)(Buffer.concat(t,this._size||void 0))}arrayBuffer(){if(this._buffer)return(0,i.fakePromise)(this._buffer);if(1===this.blobParts.length){if(f(this.blobParts[0]))return(0,i.fakePromise)(this.blobParts[0]);if(s(this.blobParts[0]))return this.blobParts[0].arrayBuffer()}return this.buffer()}bytes(){if(this._buffer)return(0,i.fakePromise)(this._buffer);if(1===this.blobParts.length){if(Buffer.isBuffer(this.blobParts[0]))return this._buffer=this.blobParts[0],(0,i.fakePromise)(this.blobParts[0]);if(this.blobParts[0]instanceof Uint8Array)return this._buffer=Buffer.from(this.blobParts[0]),(0,i.fakePromise)(this.blobParts[0]);if(l(this.blobParts[0]))return this.blobParts[0].bytes();if(a(this.blobParts[0]))return this.blobParts[0].buffer()}return this.buffer()}_text=null;text(){if(this._text)return(0,i.fakePromise)(this._text);if(1===this.blobParts.length){let e=this.blobParts[0];if("string"==typeof e)return this._text=e,(0,i.fakePromise)(this._text);if(u(e))return e.text().then(e=>(this._text=e,this._text));let t=o(e);return this._text=t.toString(this.encoding),(0,i.fakePromise)(this._text)}return this.buffer().then(e=>(this._text=e.toString(this.encoding),this._text))}get size(){if(null==this._size)for(let e of(this._size=0,this.blobParts))"string"==typeof e?this._size+=Buffer.byteLength(e):c(e)?this._size+=e.size:(0,i.isArrayBufferView)(e)&&(this._size+=e.byteLength);return this._size}stream(){let e;if(1===this.blobParts.length){let e=this.blobParts[0];if(p(e))return e.stream();let t=o(e);return new n.PonyfillReadableStream({start:e=>{e.enqueue(t),e.close()}})}return new n.PonyfillReadableStream(null!=this._buffer?{start:e=>{e.enqueue(this._buffer),e.close()}}:{start:t=>{if(0===this.blobParts.length){t.close();return}e=this.blobParts[Symbol.iterator]()},pull:t=>{let{value:r,done:n}=e.next();if(n){t.close();return}if(r){if(a(r))return r.buffer().then(e=>{t.enqueue(e)});if(l(r))return r.bytes().then(e=>{let r=Buffer.from(e);t.enqueue(r)});if(s(r))return r.arrayBuffer().then(e=>{let n=Buffer.from(e,void 0,r.size);t.enqueue(n)});let e=o(r);t.enqueue(e)}}})}slice(){throw Error("Not implemented")}}t.PonyfillBlob=h},56892:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillBody=void 0;let i=r(82174),o=r(12781),a=i.__importDefault(r(53410)),s=r(7770),l=r(99895),u=r(2944),c=r(95431),p=r(71663);!function(e){e.ReadableStream="ReadableStream",e.Blob="Blob",e.FormData="FormData",e.String="String",e.Readable="Readable",e.Buffer="Buffer"}(n||(n={}));class d{bodyInit;options;bodyUsed=!1;contentType=null;contentLength=null;constructor(e,t={}){this.bodyInit=e,this.options=t;let{bodyFactory:r,contentType:i,contentLength:a,bodyType:s,buffer:l}=function(e){if(null==e)return{bodyFactory:()=>null,contentType:null,contentLength:null};if("string"==typeof e){let t=Buffer.from(e),r=t.byteLength;return{bodyType:n.String,contentType:"text/plain;charset=UTF-8",contentLength:r,buffer:t,bodyFactory(){let e=o.Readable.from(t);return new c.PonyfillReadableStream(e)}}}if(Buffer.isBuffer(e))return{bodyType:n.Buffer,contentType:null,contentLength:e.length,buffer:e,bodyFactory(){let t=o.Readable.from(e);return new c.PonyfillReadableStream(t)}};if((0,p.isArrayBufferView)(e)){let t=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return{bodyType:n.Buffer,contentLength:e.byteLength,contentType:null,buffer:t,bodyFactory(){let e=o.Readable.from(t);return new c.PonyfillReadableStream(e)}}}if(e instanceof c.PonyfillReadableStream&&null!=e.readable)return{bodyType:n.ReadableStream,bodyFactory:()=>e,contentType:null,contentLength:null};if(e?.stream!=null)return{bodyType:n.Blob,contentType:e.type,contentLength:e.size,bodyFactory:()=>e.stream()};if(e instanceof ArrayBuffer){let t=e.byteLength,r=Buffer.from(e,void 0,e.byteLength);return{bodyType:n.Buffer,contentType:null,contentLength:t,buffer:r,bodyFactory(){let e=o.Readable.from(r);return new c.PonyfillReadableStream(e)}}}if(e instanceof o.Readable)return{bodyType:n.Readable,contentType:null,contentLength:null,bodyFactory:()=>new c.PonyfillReadableStream(e)};if(e?.sort!=null)return{bodyType:n.String,contentType:"application/x-www-form-urlencoded;charset=UTF-8",contentLength:null,bodyFactory:()=>new c.PonyfillReadableStream(o.Readable.from(e.toString()))};if(e?.forEach!=null){let t=Math.random().toString(36).substr(2),r=`multipart/form-data; boundary=${t}`;return{bodyType:n.FormData,contentType:r,contentLength:null,bodyFactory:()=>(0,u.getStreamFromFormData)(e,t)}}if(e?.getReader!=null)return{contentType:null,contentLength:null,bodyFactory:()=>new c.PonyfillReadableStream(e)};if(e[Symbol.iterator]||e[Symbol.asyncIterator])return{contentType:null,contentLength:null,bodyFactory(){let t=o.Readable.from(e);return new c.PonyfillReadableStream(t)}};throw Error("Unknown body type")}(e);this._bodyFactory=r,this.contentType=i,this.contentLength=a,this.bodyType=s,this._buffer=l}bodyType;_bodyFactory=()=>null;_generatedBody=null;_buffer;generateBody(){if(this._generatedBody?.readable?.destroyed&&this._buffer&&(this._generatedBody.readable=o.Readable.from(this._buffer)),this._generatedBody)return this._generatedBody;let e=this._bodyFactory();return this._generatedBody=e,e}handleContentLengthHeader(e=!1){let t=this.headers.get("content-type");t?this.contentType=t:this.contentType&&this.headers.set("content-type",this.contentType);let r=this.headers.get("content-length");e&&null==this.bodyInit&&!r&&(this.contentLength=0,this.headers.set("content-length","0")),r?this.contentLength=parseInt(r,10):this.contentLength&&this.headers.set("content-length",this.contentLength.toString())}get body(){let e=this.generateBody();if(null!=e){let t=e.readable;return new Proxy(e.readable,{get(r,n){if(n in e){let t=e[n];return"function"==typeof t?t.bind(e):t}if(n in t){let e=t[n];return"function"==typeof e?e.bind(t):e}}})}return null}_chunks=null;_collectChunksFromReadable(){if(this._chunks)return(0,p.fakePromise)(this._chunks);let e=this.generateBody();return e?(this._chunks=[],e.readable.on("data",e=>{this._chunks.push(e)}),new Promise((t,r)=>{e.readable.once("end",()=>{t(this._chunks)}),e.readable.once("error",e=>{r(e)})})):(0,p.fakePromise)([])}_blob=null;blob(){return this._blob?(0,p.fakePromise)(this._blob):this.bodyType===n.Blob?(this._blob=this.bodyInit,(0,p.fakePromise)(this._blob)):this._buffer?(this._blob=new s.PonyfillBlob([this._buffer],{type:this.contentType||"",size:this.contentLength}),(0,p.fakePromise)(this._blob)):this._collectChunksFromReadable().then(e=>(this._blob=new s.PonyfillBlob(e,{type:this.contentType||"",size:this.contentLength}),this._blob))}_formData=null;formData(e){if(this._formData)return(0,p.fakePromise)(this._formData);if(this.bodyType===n.FormData)return this._formData=this.bodyInit,(0,p.fakePromise)(this._formData);this._formData=new u.PonyfillFormData;let t=this.generateBody();if(null==t)return(0,p.fakePromise)(this._formData);let r={...this.options.formDataLimits,...e?.formDataLimits};return new Promise((e,n)=>{let i=(0,a.default)({headers:{"content-type":this.contentType||""},limits:r,defParamCharset:"utf-8"});i.on("field",(e,t,{nameTruncated:i,valueTruncated:o})=>{i&&n(Error(`Field name size exceeded: ${r?.fieldNameSize} bytes`)),o&&n(Error(`Field value size exceeded: ${r?.fieldSize} bytes`)),this._formData.set(e,t)}),i.on("fieldsLimit",()=>{n(Error(`Fields limit exceeded: ${r?.fields}`))}),i.on("file",(e,t,{filename:i,mimeType:o})=>{let a=[];t.on("limit",()=>{n(Error(`File size limit exceeded: ${r?.fileSize} bytes`))}),t.on("data",e=>{a.push(e)}),t.on("close",()=>{t.truncated&&n(Error(`File size limit exceeded: ${r?.fileSize} bytes`));let s=new l.PonyfillFile(a,i,{type:o});this._formData.set(e,s)})}),i.on("filesLimit",()=>{n(Error(`Files limit exceeded: ${r?.files}`))}),i.on("partsLimit",()=>{n(Error(`Parts limit exceeded: ${r?.parts}`))}),i.on("close",()=>{e(this._formData)}),i.on("error",(e="An error occurred while parsing the form data")=>{n(TypeError(e.message||e.toString(),e.cause))}),t?.readable.pipe(i)})}buffer(){if(this._buffer)return(0,p.fakePromise)(this._buffer);if(this.bodyType===n.Blob){if((0,s.hasBufferMethod)(this.bodyInit))return this.bodyInit.buffer().then(e=>(this._buffer=e,this._buffer));if((0,s.hasBytesMethod)(this.bodyInit))return this.bodyInit.bytes().then(e=>(this._buffer=Buffer.from(e),this._buffer));if((0,s.hasArrayBufferMethod)(this.bodyInit))return this.bodyInit.arrayBuffer().then(e=>(this._buffer=Buffer.from(e,void 0,e.byteLength),this._buffer))}return this._collectChunksFromReadable().then(e=>(1===e.length?this._buffer=e[0]:this._buffer=Buffer.concat(e),this._buffer))}bytes(){return this.buffer()}arrayBuffer(){return this.buffer()}_json=null;json(){return this._json?(0,p.fakePromise)(this._json):this.text().then(e=>{try{this._json=JSON.parse(e)}catch(t){throw t instanceof SyntaxError&&(t.message+=`, "${e}" is not valid JSON`),t}return this._json})}_text=null;text(){return this._text?(0,p.fakePromise)(this._text):this.bodyType===n.String?(this._text=this.bodyInit,(0,p.fakePromise)(this._text)):this.buffer().then(e=>(this._text=e.toString("utf-8"),this._text))}}t.PonyfillBody=d},54012:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillCompressionStream=void 0;let n=r(65628),i=r(23697);class o extends i.PonyfillTransformStream{static supportedFormats=globalThis.process?.version?.startsWith("v2")?["gzip","deflate","br"]:["gzip","deflate","deflate-raw","br"];constructor(e){switch(e){case"x-gzip":case"gzip":super((0,n.createGzip)());break;case"x-deflate":case"deflate":super((0,n.createDeflate)());break;case"deflate-raw":super((0,n.createDeflateRaw)());break;case"br":super((0,n.createBrotliCompress)());break;default:throw Error(`Unsupported compression format: ${e}`)}}}t.PonyfillCompressionStream=o},20958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillDecompressionStream=void 0;let n=r(65628),i=r(23697);class o extends i.PonyfillTransformStream{static supportedFormats=globalThis.process?.version?.startsWith("v2")?["gzip","deflate","br"]:["gzip","deflate","deflate-raw","br"];constructor(e){switch(e){case"x-gzip":case"gzip":super((0,n.createGunzip)());break;case"x-deflate":case"deflate":super((0,n.createInflate)());break;case"deflate-raw":super((0,n.createInflateRaw)());break;case"br":super((0,n.createBrotliDecompress)());break;default:throw TypeError(`Unsupported compression format: '${e}'`)}}}t.PonyfillDecompressionStream=o},99895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillFile=void 0;let n=r(7770);class i extends n.PonyfillBlob{name;lastModified;constructor(e,t,r){super(e,r),this.name=t,this.lastModified=r?.lastModified||Date.now()}webkitRelativePath=""}t.PonyfillFile=i},2944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillFormData=void 0,t.getStreamFromFormData=function(e,t="---"){let r=[],i=!1;return new n.PonyfillReadableStream({start:n=>{e.forEach((e,o)=>{i||(n.enqueue(Buffer.from(`--${t}\r
`)),i=!0),r.push([o,e])}),i||(n.enqueue(Buffer.from(`--${t}--\r
`)),n.close())},pull:async e=>{let n=r.shift();if(n){let[i,o]=n;if("string"==typeof o)e.enqueue(Buffer.from(`Content-Disposition: form-data; name="${i}"\r
\r
`)),e.enqueue(Buffer.from(o));else{let t="";for await(let r of(o.name&&(t=`; filename="${o.name}"`),e.enqueue(Buffer.from(`Content-Disposition: form-data; name="${i}"${t}\r
`)),e.enqueue(Buffer.from(`Content-Type: ${o.type||"application/octet-stream"}\r
\r
`)),o.stream()))e.enqueue(r)}0===r.length?(e.enqueue(Buffer.from(`\r
--${t}--\r
`)),e.close()):e.enqueue(Buffer.from(`\r
--${t}\r
`))}else e.enqueue(Buffer.from(`\r
--${t}--\r
`)),e.close()}})};let n=r(95431);class i{map=new Map;append(e,t,r){let n=this.map.get(e);n||(n=[],this.map.set(e,n));let i=a(t)?o(e,t,r):t;n.push(i)}delete(e){this.map.delete(e)}get(e){let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.map.get(e)||[]}has(e){return this.map.has(e)}set(e,t,r){let n=a(t)?o(e,t,r):t;this.map.set(e,[n])}*[Symbol.iterator](){for(let[e,t]of this.map)for(let r of t)yield[e,r]}entries(){return this[Symbol.iterator]()}keys(){return this.map.keys()}*values(){for(let e of this.map.values())for(let t of e)yield t}forEach(e){for(let[t,r]of this)e(r,t,this)}}function o(e,t,r){return Object.defineProperty(t,"name",{configurable:!0,enumerable:!0,value:r||t.name||e}),t}function a(e){return e?.arrayBuffer!=null}t.PonyfillFormData=i},78620:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillHeaders=void 0,t.isHeadersLike=i;let n=r(73837);function i(e){return e?.get&&e?.forEach}class o{headersInit;_map;objectNormalizedKeysOfHeadersInit=[];objectOriginalKeysOfHeadersInit=[];_setCookies=[];constructor(e){this.headersInit=e}_get(e){let t=e.toLowerCase();if("set-cookie"===t)return this._setCookies.join(", ");if(this._map)return this._map.get(t)||null;if(null==this.headersInit)return null;if(Array.isArray(this.headersInit))return this.headersInit.find(e=>e[0].toLowerCase()===t)?.[1]||null;if(i(this.headersInit))return this.headersInit.get(t);{let r=this.headersInit[e]||this.headersInit[t];if(null!=r)return r;this.objectNormalizedKeysOfHeadersInit.length||Object.keys(this.headersInit).forEach(e=>{this.objectOriginalKeysOfHeadersInit.push(e),this.objectNormalizedKeysOfHeadersInit.push(e.toLowerCase())});let n=this.objectNormalizedKeysOfHeadersInit.indexOf(t);if(-1===n)return null;let i=this.objectOriginalKeysOfHeadersInit[n];return this.headersInit[i]}}getMap(){if(!this._map){if(null!=this.headersInit){if(Array.isArray(this.headersInit))this._map=new Map,this.headersInit.forEach(([e,t])=>{let r=e.toLowerCase();if("set-cookie"===r){this._setCookies.push(t);return}this._map.set(r,t)});else if(i(this.headersInit))this._map=new Map,this.headersInit.forEach((e,t)=>{if("set-cookie"===t){this._setCookies.push(e);return}this._map.set(t,e)});else for(let e in this._map=new Map,this.headersInit){let t=this.headersInit[e];if(null!=t){let r=e.toLowerCase();if("set-cookie"===r){this._setCookies.push(t);continue}this._map.set(r,t)}}}else this._map=new Map}return this._map}append(e,t){let r=e.toLowerCase();if("set-cookie"===r){this._setCookies.push(t);return}let n=this.getMap().get(r),i=n?`${n}, ${t}`:t;this.getMap().set(r,i)}get(e){let t=this._get(e);return null==t?null:t}has(e){return"set-cookie"===e?this._setCookies.length>0:!!this._get(e)}set(e,t){let r=e.toLowerCase();if("set-cookie"===r){this._setCookies=[t];return}this.getMap().set(r,t)}delete(e){let t=e.toLowerCase();if("set-cookie"===t){this._setCookies=[];return}this.getMap().delete(t)}forEach(e){if(this._setCookies.forEach(t=>{e(t,"set-cookie",this)}),!this._map){if(this.headersInit){if(Array.isArray(this.headersInit)){this.headersInit.forEach(([t,r])=>{e(r,t,this)});return}if(i(this.headersInit)){this.headersInit.forEach(e);return}Object.entries(this.headersInit).forEach(([t,r])=>{null!=r&&e(r,t,this)})}return}this.getMap().forEach((t,r)=>{e(t,r,this)})}*keys(){if(this._setCookies.length&&(yield"set-cookie"),!this._map&&this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit.map(([e])=>e)[Symbol.iterator]();return}if(i(this.headersInit)){yield*this.headersInit.keys();return}yield*Object.keys(this.headersInit)[Symbol.iterator]();return}yield*this.getMap().keys()}*values(){if(yield*this._setCookies,!this._map&&this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit.map(([,e])=>e)[Symbol.iterator]();return}if(i(this.headersInit)){yield*this.headersInit.values();return}yield*Object.values(this.headersInit)[Symbol.iterator]();return}yield*this.getMap().values()}*entries(){if(yield*this._setCookies.map(e=>["set-cookie",e]),!this._map&&this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit;return}if(i(this.headersInit)){yield*this.headersInit.entries();return}yield*Object.entries(this.headersInit);return}yield*this.getMap().entries()}getSetCookie(){return this._setCookies}[Symbol.iterator](){return this.entries()}[Symbol.for("nodejs.util.inspect.custom")](){let e={};return this.forEach((t,r)=>{"set-cookie"===r?e["set-cookie"]=this._setCookies:e[r]=t.includes(",")?t.split(",").map(e=>e.trim()):t}),`Headers ${(0,n.inspect)(e)}`}}t.PonyfillHeaders=o},95431:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillReadableStream=void 0;let n=r(12781),i=r(71663);function o(e,t){let r=[],n=!1,i=!1;return{desiredSize:e,enqueue(e){let n="string"==typeof e?Buffer.from(e):e;i?t.push(n):r.push(n)},close(){r.length>0&&this._flush(),t.push(null),n=!0},error(e){r.length>0&&this._flush(),t.destroy(e)},get _closed(){return n},_flush(){if(i=!0,r.length>0){let e=r.length>1?Buffer.concat(r):r[0];t.push(e),r=[]}}}}function a(e){return e?.getReader!=null}class s{readable;constructor(e){if(e instanceof s&&null!=e.readable)this.readable=e.readable;else if(e?.read!=null)this.readable=e;else if(a(e))this.readable=n.Readable.fromWeb(e);else{let t=!1,r=!1;this.readable=new n.Readable({read(n){if(!r)return r=!0,Promise.resolve().then(async()=>{if(!t){let r=o(n,this);if(t=!0,await e?.start?.(r),r._flush(),r._closed)return}let i=o(n,this);await e?.pull?.(i),i._flush(),r=!1})},destroy(t,r){if(e?.cancel)try{let n=e.cancel(t);if(n?.then)return n.then(()=>{r(null)},e=>{r(e)})}catch(e){r(e);return}r(null)}})}}cancel(e){return this.readable.destroy(e),new Promise(e=>this.readable.once("end",e))}locked=!1;getReader(e){let t=this.readable[Symbol.asyncIterator]();return this.locked=!0,{read:()=>t.next(),releaseLock:()=>{if(t.return){let e=t.return();if(e.then){e.then(()=>{this.locked=!1});return}}this.locked=!1},cancel:e=>{if(t.return){let r=t.return(e);if(r.then)return r.then(()=>{this.locked=!1})}return this.locked=!1,(0,i.fakePromise)(void 0)},closed:new Promise((e,t)=>{this.readable.once("end",e),this.readable.once("error",t)})}}[Symbol.asyncIterator](){return this.readable[Symbol.asyncIterator]()}tee(){throw Error("Not implemented")}pipeTo(e){if(e?.writable!=null)return new Promise((t,r)=>{this.readable.pipe(e.writable),e.writable.once("finish",t),e.writable.once("error",r)});{let t=e.getWriter();return Promise.resolve().then(async()=>{try{for await(let e of this)await t.write(e);await t.close()}catch(e){await t.abort(e)}})}}pipeThrough({writable:e,readable:t}){return this.pipeTo(e),t}static[Symbol.hasInstance](e){return a(e)}}t.PonyfillReadableStream=s},77313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillRequest=void 0;let n=r(13685),i=r(95687),o=r(56892),a=r(78620);class s extends o.PonyfillBody{constructor(e,t){let r,o;let s=null;"string"==typeof e?r=e:e?.href!=null?r=e.toString():"Request"===e[Symbol.toStringTag]&&(r=e.url,s=e.body,o=e),null!=t&&(s=t.body||null,o=t),super(s,t),this.cache=o?.cache||"default",this.credentials=o?.credentials||"same-origin",this.headers=o?.headers&&(0,a.isHeadersLike)(o.headers)?o.headers:new a.PonyfillHeaders(o?.headers),this.integrity=o?.integrity||"",this.keepalive=o?.keepalive!=null&&o?.keepalive,this.method=o?.method?.toUpperCase()||"GET",this.mode=o?.mode||"cors",this.redirect=o?.redirect||"follow",this.referrer=o?.referrer||"about:client",this.referrerPolicy=o?.referrerPolicy||"no-referrer",this._signal=o?.signal,this.headersSerializer=o?.headersSerializer,this.duplex=o?.duplex||"half",this.url=r||"",this.destination="document",this.priority="auto","GET"!==this.method&&"HEAD"!==this.method&&this.handleContentLengthHeader(!0),o?.agent!=null&&(!1===o.agent?this.agent=!1:this.url.startsWith("http:/")&&o.agent instanceof n.Agent?this.agent=o.agent:this.url.startsWith("https:/")&&o.agent instanceof i.Agent&&(this.agent=o.agent))}headersSerializer;cache;credentials;destination;headers;integrity;keepalive;method;mode;priority;redirect;referrer;referrerPolicy;url;duplex;agent;_signal;get signal(){return this._signal||(this._signal=new AbortController().signal),this._signal}clone(){return this}[Symbol.toStringTag]="Request"}t.PonyfillRequest=s},5379:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillResponse=void 0;let n=r(13685),i=r(56892),o=r(78620);class a extends i.PonyfillBody{headers;constructor(e,t){super(e||null,t),this.headers=t?.headers&&(0,o.isHeadersLike)(t.headers)?t.headers:new o.PonyfillHeaders(t?.headers),this.status=t?.status||200,this.statusText=t?.statusText||n.STATUS_CODES[this.status]||"OK",this.url=t?.url||"",this.redirected=t?.redirected||!1,this.type=t?.type||"default",this.handleContentLengthHeader()}get ok(){return this.status>=200&&this.status<300}status;statusText;url;redirected;type;clone(){return this}static error(){return new a(null,{status:500,statusText:"Internal Server Error"})}static redirect(e,t=302){if(t<300||t>399)throw RangeError("Invalid status code");return new a(null,{headers:{location:e},status:t})}static json(e,t={}){return t.headers=t?.headers&&(0,o.isHeadersLike)(t.headers)?t.headers:new o.PonyfillHeaders(t?.headers),t.headers.has("content-type")||t.headers.set("content-type","application/json; charset=utf-8"),new a(JSON.stringify(e),t)}}t.PonyfillResponse=a},55114:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillTextDecoder=t.PonyfillTextEncoder=void 0,t.PonyfillBtoa=function(e){return Buffer.from(e,"binary").toString("base64")};let n=r(71663);class i{encoding;constructor(e="utf-8"){this.encoding=e}encode(e){return Buffer.from(e,this.encoding)}encodeInto(e,t){let r=this.encode(e).copy(t);return{read:r,written:r}}}t.PonyfillTextEncoder=i;class o{encoding;fatal=!1;ignoreBOM=!1;constructor(e="utf-8",t){this.encoding=e,t&&(this.fatal=t.fatal||!1,this.ignoreBOM=t.ignoreBOM||!1)}decode(e){return Buffer.isBuffer(e)?e.toString(this.encoding):(0,n.isArrayBufferView)(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString(this.encoding):Buffer.from(e).toString(this.encoding)}}t.PonyfillTextDecoder=o},23697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillTransformStream=void 0;let n=r(84492),i=r(95431),o=r(52777);class a{transform;writable;readable;constructor(e){if(e instanceof n.Transform)this.transform=e;else if(e){let t={enqueue(e){r.push(e)},error(e){r.destroy(e)},terminate(){r.end()},get desiredSize(){return r.writableLength}},r=new n.Transform({read(){},write(r,n,i){try{let n=e.transform?.(r,t);n instanceof Promise?n.then(()=>{i()},e=>{i(e)}):i()}catch(e){i(e)}},final(r){try{let n=e.flush?.(t);n instanceof Promise?n.then(()=>{r()},e=>{r(e)}):r()}catch(e){r(e)}}});this.transform=r}else this.transform=new n.Transform;this.writable=new o.PonyfillWritableStream(this.transform),this.readable=new i.PonyfillReadableStream(this.transform)}}t.PonyfillTransformStream=a},15966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillURL=void 0;let n=r(82174),i=r(14300),o=r(6113),a=n.__importDefault(r(61125)),s=n.__importDefault(r(74098)),l=r(83978);s.default.queryString=a.default;class u extends s.default{constructor(e,t){if(super(),e.startsWith("data:")){this.protocol="data:",this.pathname=e.slice(5);return}if(this.parse(e,!1),t){let e="string"==typeof t?new u(t):t;this.protocol=this.protocol||e.protocol,this.host=this.host||e.host,this.pathname=this.pathname||e.pathname}}get origin(){return`${this.protocol}//${this.host}`}_searchParams;get searchParams(){return this._searchParams||(this._searchParams=new l.PonyfillURLSearchParams(this.query)),this._searchParams}get username(){return this.auth?.split(":")[0]||""}set username(e){this.auth=`${e}:${this.password}`}get password(){return this.auth?.split(":")[1]||""}set password(e){this.auth=`${this.username}:${e}`}toString(){return this.format()}toJSON(){return this.toString()}static blobRegistry=new Map;static createObjectURL(e){let t=`blob:whatwgnode:${(0,o.randomUUID)()}`;return this.blobRegistry.set(t,e),t}static resolveObjectURL(e){this.blobRegistry.has(e)?this.blobRegistry.delete(e):URL.revokeObjectURL(e)}static getBlobFromURL(e){return this.blobRegistry.get(e)||(0,i.resolveObjectURL)(e)}}t.PonyfillURL=u},83978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillURLSearchParams=void 0;let n=r(82174).__importDefault(r(61125));class i{params;constructor(e){if(e){if("string"==typeof e)this.params=n.default.parse(e);else if(Array.isArray(e))for(let[t,r]of(this.params={},e))this.params[t]=r;else if(e?.entries!=null)for(let[t,r]of(this.params={},e.entries()))this.params[t]=r;else this.params=e}else this.params={}}append(e,t){let r=this.params[e],n=r?`${r},${t}`:t;this.params[e]=n}delete(e){delete this.params[e]}get(e){let t=this.params[e];return Array.isArray(t)?t[0]||null:t||null}getAll(e){let t=this.params[e];return Array.isArray(t)?t:t?[t]:[]}has(e){return e in this.params}set(e,t){this.params[e]=t}sort(){let e=Object.keys(this.params).sort(),t={};for(let r of e)t[r]=this.params[r];this.params=t}toString(){return n.default.stringify(this.params)}*keys(){for(let e in this.params)yield e}*entries(){for(let e of this.keys()){let t=this.params[e];if(Array.isArray(t))for(let r of t)yield[e,r];else yield[e,t]}}*values(){for(let[,e]of this)yield e}[Symbol.iterator](){return this.entries()}forEach(e){for(let[t,r]of this)e(r,t,this)}get size(){return Object.keys(this.params).length}}t.PonyfillURLSearchParams=i},52777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PonyfillWritableStream=void 0;let n=r(12781),i=r(71663);class o{writable;constructor(e){if(e instanceof n.Writable)this.writable=e;else if(e){let t,r;let i=new n.Writable({write(t,r,n){try{let r=e.write?.(t,o);r instanceof Promise?r.then(()=>{n()},e=>{n(e)}):n()}catch(e){n(e)}},final(t){let r=e.close?.();r instanceof Promise?r.then(()=>{t()},e=>{t(e)}):t()}});this.writable=i;let o={signal:{any:e=>AbortSignal.any([...e]),get reason(){return r},get aborted(){return i.destroyed},addEventListener:(e,t)=>{i.once("error",t),i.once("close",t)},removeEventListener:(e,t)=>{i.off("error",t),i.off("close",t)},dispatchEvent:e=>!1,get onabort(){return t},set onabort(value){t&&this.removeEventListener("abort",t),(t=value)&&this.addEventListener("abort",t)},throwIfAborted(){if(i.destroyed)throw r}},error:e=>{this.writable.destroy(e)}};this.writable.once("error",e=>{r=e})}else this.writable=new n.Writable}getWriter(){let e=this.writable;return{closed:new Promise(t=>{e.once("close",()=>{t(void 0)})}),get desiredSize(){return e.writableLength},ready:new Promise(t=>{e.once("drain",()=>{t(void 0)})}),releaseLock(){},write:t=>null==t?(0,i.fakePromise)(void 0):new Promise((r,n)=>{e.write(t,e=>{e?n(e):r()})}),close:()=>!e.errored&&e.closed?(0,i.fakePromise)(void 0):new Promise((t,r)=>{e.errored?r(e.errored):e.end(e=>{e?r(e):t()})}),abort:t=>new Promise(r=>{e.destroy(t),e.once("close",r)})}}close(){return!this.writable.errored&&this.writable.closed?(0,i.fakePromise)(void 0):new Promise((e,t)=>{this.writable.errored?t(this.writable.errored):this.writable.end(r=>{r?t(r):e()})})}abort(e){return new Promise(t=>{this.writable.destroy(e),this.writable.once("close",t)})}locked=!1}t.PonyfillWritableStream=o},65377:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPonyfill=function e(t,r){if("string"==typeof t||null!=t&&null!=t.href)return e(new s.PonyfillRequest(t,r));if(t.url.startsWith("data:")){let e=function(e){let[t="text/plain",...r]=e.substring(5).split(","),n=decodeURIComponent(r.join(","));if(t.endsWith(p)){let e=Buffer.from(n,"base64url"),r=t.slice(0,-p.length);return new l.PonyfillResponse(e,{status:200,statusText:"OK",headers:{"content-type":r}})}return new l.PonyfillResponse(n,{status:200,statusText:"OK",headers:{"content-type":t}})}(t.url);return(0,c.fakePromise)(e)}if(t.url.startsWith("file:")){let e=function(e){let t=(0,i.fileURLToPath)(e),r=(0,n.createReadStream)(t);return new l.PonyfillResponse(r)}(t.url);return(0,c.fakePromise)(e)}if(t.url.startsWith("blob:")){let e=function(e){let t=u.PonyfillURL.getBlobFromURL(e);if(!t)throw TypeError("Invalid Blob URL");return new l.PonyfillResponse(t,{status:200,headers:{"content-type":t.type,"content-length":t.size.toString()}})}(t.url);return(0,c.fakePromise)(e)}return globalThis.libcurl&&!t.agent?(0,o.fetchCurl)(t):(0,a.fetchNodeHttp)(t)};let n=r(57147),i=r(57310),o=r(27078),a=r(62565),s=r(77313),l=r(5379),u=r(15966),c=r(71663),p=";base64"},27078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCurl=function(e){let t;let{Curl:r,CurlFeature:a,CurlPause:s,CurlProgressFunc:l}=globalThis.libcurl,u=new r;if(u.enable(a.NoDataParsing),u.setOpt("URL",e.url),"0"===process.env.NODE_TLS_REJECT_UNAUTHORIZED&&u.setOpt("SSL_VERIFYPEER",!1),process.env.NODE_EXTRA_CA_CERTS&&u.setOpt("CAINFO",process.env.NODE_EXTRA_CA_CERTS),u.enable(a.StreamResponse),u.setStreamProgressCallback(function(){return e._signal?.aborted?process.env.DEBUG?l.Continue:1:0}),"String"===e.bodyType)u.setOpt("POSTFIELDS",e.bodyInit);else{let t=null!=e.body?(0,o.isNodeReadable)(e.body)?e.body:n.Readable.from(e.body):null;t&&(u.setOpt("UPLOAD",!0),u.setUploadStream(t))}process.env.DEBUG&&u.setOpt("VERBOSE",!0),u.setOpt("TRANSFER_ENCODING",!1),u.setOpt("HTTP_TRANSFER_DECODING",!0),u.setOpt("FOLLOWLOCATION","follow"===e.redirect),u.setOpt("MAXREDIRS",20),u.setOpt("ACCEPT_ENCODING",""),u.setOpt("CUSTOMREQUEST",e.method);let c=(e.headersSerializer||o.defaultHeadersSerializer)(e.headers,e=>{t=Number(e)});return null!=t&&u.setOpt("INFILESIZE",t),u.setOpt("HTTPHEADER",c),u.enable(a.NoHeaderParsing),new Promise(function(t,o){let a;e._signal&&(e._signal.onabort=()=>{if(u.isOpen)try{u.pause(s.Recv)}catch(e){o(e)}}),u.once("end",function(){try{u.close()}catch(e){o(e)}}),u.once("error",function(e){!a||a.closed||a.destroyed?("Operation was aborted by an application callback"===e.message&&(e.message="The operation was aborted."),o(e)):a.destroy(e);try{u.close()}catch(e){o(e)}}),u.once("stream",function(s,l,c){let p=new n.PassThrough;n.promises.pipeline(s,p,{end:!0,signal:e._signal??void 0}).then(()=>{s.destroyed||s.resume()}).catch(o);let d=c.toString("utf8").split(/\r?\n|\r/g).filter(t=>!!t&&!t.startsWith("HTTP/")&&("error"===e.redirect&&(t.includes("location")||t.includes("Location"))&&(s.destroyed||s.resume(),p.destroy(),o(Error("redirect is not allowed"))),!0)).map(e=>e.split(/:\s(.+)/).slice(0,2));t(new i.PonyfillResponse(p,{status:l,headers:d,url:u.getInfo(r.info.REDIRECT_URL)?.toString()||e.url,redirected:Number(u.getInfo(r.info.REDIRECT_COUNT))>0})),a=p}),u.perform()})};let n=r(12781),i=r(5379),o=r(71663)},62565:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchNodeHttp=function e(t){return new Promise((r,p)=>{try{let d=function(e){if(e.startsWith("http:"))return n.request;if(e.startsWith("https:"))return i.request;throw Error(`Unsupported protocol: ${e.split(":")[0]||e}`)}(t.url),f=null!=t.body?(0,c.isNodeReadable)(t.body)?t.body:o.Readable.from(t.body):null,h=(t.headersSerializer||c.getHeadersObj)(t.headers);null==h["accept-encoding"]&&(h["accept-encoding"]="gzip, deflate, br");let y=d(t.url,{method:t.method,headers:h,signal:t._signal??void 0,agent:t.agent});y.once("response",n=>{let i;switch(n.headers["content-encoding"]){case"x-gzip":case"gzip":i=(0,a.createGunzip)();break;case"x-deflate":case"deflate":i=(0,a.createInflate)();break;case"x-deflate-raw":case"deflate-raw":i=(0,a.createInflateRaw)();break;case"br":i=(0,a.createBrotliDecompress)();break;default:i=new o.PassThrough}if(n.headers.location){if("error"===t.redirect){let e=Error("Redirects are not allowed");p(e),n.resume();return}if("follow"===t.redirect){let i=new u.PonyfillURL(n.headers.location,t.url),o=e(new s.PonyfillRequest(i,t));r(o.then(e=>(e.redirected=!0,e))),n.resume();return}}o.promises.pipeline(n,i,{signal:t._signal??void 0,end:!0}).then(()=>{n.destroyed||n.resume()}).catch(p);let c=new l.PonyfillResponse(i,{status:n.statusCode,statusText:n.statusMessage,headers:n.headers,url:t.url});r(c)}),y.once("error",p),f?f.pipe(y):y.end()}catch(e){p(e)}})};let n=r(13685),i=r(95687),o=r(12781),a=r(59796),s=r(77313),l=r(5379),u=r(15966),c=r(71663)},31242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DecompressionStream=t.CompressionStream=t.TransformStream=t.WritableStream=t.URLSearchParams=t.URL=t.btoa=t.TextDecoder=t.TextEncoder=t.Blob=t.FormData=t.File=t.ReadableStream=t.Response=t.Request=t.Body=t.Headers=t.fetch=void 0;var n=r(65377);Object.defineProperty(t,"fetch",{enumerable:!0,get:function(){return n.fetchPonyfill}});var i=r(78620);Object.defineProperty(t,"Headers",{enumerable:!0,get:function(){return i.PonyfillHeaders}});var o=r(56892);Object.defineProperty(t,"Body",{enumerable:!0,get:function(){return o.PonyfillBody}});var a=r(77313);Object.defineProperty(t,"Request",{enumerable:!0,get:function(){return a.PonyfillRequest}});var s=r(5379);Object.defineProperty(t,"Response",{enumerable:!0,get:function(){return s.PonyfillResponse}});var l=r(95431);Object.defineProperty(t,"ReadableStream",{enumerable:!0,get:function(){return l.PonyfillReadableStream}});var u=r(99895);Object.defineProperty(t,"File",{enumerable:!0,get:function(){return u.PonyfillFile}});var c=r(2944);Object.defineProperty(t,"FormData",{enumerable:!0,get:function(){return c.PonyfillFormData}});var p=r(7770);Object.defineProperty(t,"Blob",{enumerable:!0,get:function(){return p.PonyfillBlob}});var d=r(55114);Object.defineProperty(t,"TextEncoder",{enumerable:!0,get:function(){return d.PonyfillTextEncoder}}),Object.defineProperty(t,"TextDecoder",{enumerable:!0,get:function(){return d.PonyfillTextDecoder}}),Object.defineProperty(t,"btoa",{enumerable:!0,get:function(){return d.PonyfillBtoa}});var f=r(15966);Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return f.PonyfillURL}});var h=r(83978);Object.defineProperty(t,"URLSearchParams",{enumerable:!0,get:function(){return h.PonyfillURLSearchParams}});var y=r(52777);Object.defineProperty(t,"WritableStream",{enumerable:!0,get:function(){return y.PonyfillWritableStream}});var m=r(23697);Object.defineProperty(t,"TransformStream",{enumerable:!0,get:function(){return m.PonyfillTransformStream}});var v=r(54012);Object.defineProperty(t,"CompressionStream",{enumerable:!0,get:function(){return v.PonyfillCompressionStream}});var g=r(20958);Object.defineProperty(t,"DecompressionStream",{enumerable:!0,get:function(){return g.PonyfillDecompressionStream}})},71663:(e,t)=>{"use strict";function r(e){return e?.then!=null}Object.defineProperty(t,"__esModule",{value:!0}),t.getHeadersObj=function(e){if(null==e||e?.forEach==null)return e;let t={};return e.forEach((e,r)=>{t[r]=e}),t},t.defaultHeadersSerializer=function(e,t){let r=[];return e.forEach((e,n)=>{t&&"content-length"===n&&t(e),r.push(`${n}: ${e}`)}),r},t.fakePromise=function e(t){return r(t)?t:{then(n){if(n){let i=n(t);return r(i)?i:e(i)}return this},catch(){return this},finally(n){if(n){let i=n();return r(i)?i.then(()=>t):e(t)}return this},[Symbol.toStringTag]:"Promise"}},t.isArrayBufferView=function(e){return null!=e&&null!=e.buffer&&null!=e.byteLength&&null!=e.byteOffset},t.isNodeReadable=function(e){return null!=e&&null!=e.pipe}},53113:(e,t)=>{"use strict";function r(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,t){if(null===e)return"null";if(e instanceof Error)return"AggregateError"===e.name?n(e)+"\n"+i(e.errors,t):n(e);if(t.includes(e))return"[Circular]";let o=[...t,e];if("function"==typeof e.toJSON){let t=e.toJSON();if(t!==e)return"string"==typeof t?t:r(t,o)}else if(Array.isArray(e))return i(e,o);return function(e,t){let n=Object.entries(e);return 0===n.length?"{}":t.length>3?"["+function(e){let t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){let t=e.constructor.name;if("string"==typeof t&&""!==t)return t}return t}(e)+"]":"{ "+n.map(([e,n])=>e+": "+r(n,t)).join(", ")+" }"}(e,o)}(e,t);default:return String(e)}}function n(e){return e.name="GraphQLError",e.toString()}function i(e,t){if(0===e.length)return"[]";if(t.length>3)return"[Array]";let n=e.length,i=[];for(let o=0;o<n;++o)i.push(r(e[o],t));return"["+i.join(", ")+"]"}Object.defineProperty(t,"__esModule",{value:!0}),t.inspect=void 0,t.inspect=function(e){return r(e,[])}},7492:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,o={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(o,{URLPattern:()=>$}),e.exports=((e,o,a,s)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let l of n(o))i.call(e,l)||l===a||t(e,l,{get:()=>o[l],enumerable:!(s=r(o,l))||s.enumerable});return e})(t({},"__esModule",{value:!0}),o);var a=class{type=3;name="";prefix="";value="";suffix="";modifier=3;constructor(e,t,r,n,i,o){this.type=e,this.name=t,this.prefix=r,this.value=n,this.suffix=i,this.modifier=o}hasCustomName(){return""!==this.name&&"number"!=typeof this.name}},s=/[$_\p{ID_Start}]/u,l=/[$_\u200C\u200D\p{ID_Continue}]/u;function u(e,t=!1){let r=[],n=0;for(;n<e.length;){let o=e[n],a=function(i){if(!t)throw TypeError(i);r.push({type:"INVALID_CHAR",index:n,value:e[n++]})};if("*"===o){r.push({type:"ASTERISK",index:n,value:e[n++]});continue}if("+"===o||"?"===o){r.push({type:"OTHER_MODIFIER",index:n,value:e[n++]});continue}if("\\"===o){r.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});continue}if("{"===o){r.push({type:"OPEN",index:n,value:e[n++]});continue}if("}"===o){r.push({type:"CLOSE",index:n,value:e[n++]});continue}if(":"===o){let t="",i=n+1;for(;i<e.length;){let r=e.substr(i,1);if(i===n+1&&s.test(r)||i!==n+1&&l.test(r)){t+=e[i++];continue}break}if(!t){a(`Missing parameter name at ${n}`);continue}r.push({type:"NAME",index:n,value:t}),n=i;continue}if("("===o){let t=1,o="",s=n+1,l=!1;if("?"===e[s]){a(`Pattern cannot start with "?" at ${s}`);continue}for(;s<e.length;){var i;if(i=e[s],!/^[\x00-\x7F]*$/.test(i)){a(`Invalid character '${e[s]}' at ${s}.`),l=!0;break}if("\\"===e[s]){o+=e[s++]+e[s++];continue}if(")"===e[s]){if(0==--t){s++;break}}else if("("===e[s]&&(t++,"?"!==e[s+1])){a(`Capturing groups are not allowed at ${s}`),l=!0;break}o+=e[s++]}if(l)continue;if(t){a(`Unbalanced pattern at ${n}`);continue}if(!o){a(`Missing pattern at ${n}`);continue}r.push({type:"REGEX",index:n,value:o}),n=s;continue}r.push({type:"CHAR",index:n,value:e[n++]})}return r.push({type:"END",index:n,value:""}),r}function c(e,t={}){let r=u(e);t.delimiter??="/#?",t.prefixes??="./";let n=`[^${p(t.delimiter)}]+?`,i=[],o=0,s=0,l=new Set,c=e=>{if(s<r.length&&r[s].type===e)return r[s++].value},d=()=>c("OTHER_MODIFIER")??c("ASTERISK"),f=e=>{let t=c(e);if(void 0!==t)return t;let{type:n,index:i}=r[s];throw TypeError(`Unexpected ${n} at ${i}, expected ${e}`)},h=()=>{let e="",t;for(;t=c("CHAR")??c("ESCAPED_CHAR");)e+=t;return e},y=t.encodePart||(e=>e),m="",v=e=>{m+=e},g=()=>{m.length&&(i.push(new a(3,"","",y(m),"",3)),m="")},b=(e,t,r,s,u)=>{let c,p,d=3;switch(u){case"?":d=1;break;case"*":d=0;break;case"+":d=2}if(!t&&!r&&3===d){v(e);return}if(g(),!t&&!r){if(!e)return;i.push(new a(3,"","",y(e),"",d));return}let f=2;if((c=r?"*"===r?".*":r:n)===n?(f=1,c=""):".*"===c&&(f=0,c=""),t?p=t:r&&(p=o++),l.has(p))throw TypeError(`Duplicate name '${p}'.`);l.add(p),i.push(new a(f,p,y(e),c,y(s),d))};for(;s<r.length;){let e=c("CHAR"),r=c("NAME"),n=c("REGEX");if(r||n||(n=c("ASTERISK")),r||n){let i=e??"";-1===t.prefixes.indexOf(i)&&(v(i),i=""),g(),b(i,r,n,"",d());continue}let i=e??c("ESCAPED_CHAR");if(i){v(i);continue}if(c("OPEN")){let e=h(),t=c("NAME"),r=c("REGEX");t||r||(r=c("ASTERISK"));let n=h();f("CLOSE"),b(e,t,r,n,d());continue}g(),f("END")}return i}function p(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function d(e){return e&&e.ignoreCase?"ui":"u"}function f(e){switch(e){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function h(e,t,r={}){r.delimiter??="/#?",r.prefixes??="./",r.sensitive??=!1,r.strict??=!1,r.end??=!0,r.start??=!0,r.endsWith="";let n=r.start?"^":"";for(let i of e){if(3===i.type){3===i.modifier?n+=p(i.value):n+=`(?:${p(i.value)})${f(i.modifier)}`;continue}t&&t.push(i.name);let e=`[^${p(r.delimiter)}]+?`,o=i.value;if(1===i.type?o=e:0===i.type&&(o=".*"),!i.prefix.length&&!i.suffix.length){3===i.modifier||1===i.modifier?n+=`(${o})${f(i.modifier)}`:n+=`((?:${o})${f(i.modifier)})`;continue}if(3===i.modifier||1===i.modifier){n+=`(?:${p(i.prefix)}(${o})${p(i.suffix)})`+f(i.modifier);continue}n+=`(?:${p(i.prefix)}((?:${o})(?:`+p(i.suffix)+p(i.prefix)+`(?:${o}))*)${p(i.suffix)})`,0===i.modifier&&(n+="?")}let i=`[${p(r.endsWith)}]|$`,o=`[${p(r.delimiter)}]`;if(r.end)return r.strict||(n+=`${o}?`),r.endsWith.length?n+=`(?=${i})`:n+="$",new RegExp(n,d(r));r.strict||(n+=`(?:${o}(?=${i}))?`);let a=!1;if(e.length){let t=e[e.length-1];3===t.type&&3===t.modifier&&(a=r.delimiter.indexOf(t)>-1)}return a||(n+=`(?=${o}|${i})`),new RegExp(n,d(r))}var y={delimiter:"",prefixes:"",sensitive:!0,strict:!0},m={delimiter:".",prefixes:"",sensitive:!0,strict:!0},v={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function g(e,t){return e.startsWith(t)?e.substring(t.length,e.length):e}function b(e){return!!e&&!(e.length<2)&&("["===e[0]||("\\"===e[0]||"{"===e[0])&&"["===e[1])}var _=["ftp","file","http","https","ws","wss"];function T(e){if(!e)return!0;for(let t of _)if(e.test(t))return!0;return!1}function E(e){switch(e){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function O(e){if(""===e)return e;if(/^[-+.A-Za-z0-9]*$/.test(e))return e.toLowerCase();throw TypeError(`Invalid protocol '${e}'.`)}function S(e){if(""===e)return e;let t=new URL("https://example.com");return t.username=e,t.username}function w(e){if(""===e)return e;let t=new URL("https://example.com");return t.password=e,t.password}function I(e){if(""===e)return e;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(e))throw TypeError(`Invalid hostname '${e}'`);let t=new URL("https://example.com");return t.hostname=e,t.hostname}function N(e){if(""===e)return e;if(/[^0-9a-fA-F[\]:]/g.test(e))throw TypeError(`Invalid IPv6 hostname '${e}'`);return e.toLowerCase()}function A(e){if(""===e||/^[0-9]*$/.test(e)&&65535>=parseInt(e))return e;throw TypeError(`Invalid port '${e}'.`)}function C(e){if(""===e)return e;let t=new URL("https://example.com");return t.pathname="/"!==e[0]?"/-"+e:e,"/"!==e[0]?t.pathname.substring(2,t.pathname.length):t.pathname}function P(e){return""===e?e:new URL(`data:${e}`).pathname}function R(e){if(""===e)return e;let t=new URL("https://example.com");return t.search=e,t.search.substring(1,t.search.length)}function D(e){if(""===e)return e;let t=new URL("https://example.com");return t.hash=e,t.hash.substring(1,t.hash.length)}var F=class{#q;#B=[];#W={};#H=0;#Q=1;#K=0;#z=0;#Y=0;#J=0;#X=!1;constructor(e){this.#q=e}get result(){return this.#W}parse(){for(this.#B=u(this.#q,!0);this.#H<this.#B.length;this.#H+=this.#Q){if(this.#Q=1,"END"===this.#B[this.#H].type){if(0===this.#z){this.#Z(),this.#ee()?this.#et(9,1):this.#er()?this.#et(8,1):this.#et(7,0);continue}if(2===this.#z){this.#en(5);continue}this.#et(10,0);break}if(this.#Y>0){if(!this.#ei())continue;this.#Y-=1}if(this.#eo()){this.#Y+=1;continue}switch(this.#z){case 0:this.#ea()&&this.#en(1);break;case 1:if(this.#ea()){this.#es();let e=7,t=1;this.#el()?(e=2,t=3):this.#X&&(e=2),this.#et(e,t)}break;case 2:this.#eu()?this.#en(3):(this.#ec()||this.#er()||this.#ee())&&this.#en(5);break;case 3:this.#ep()?this.#et(4,1):this.#eu()&&this.#et(5,1);break;case 4:this.#eu()&&this.#et(5,1);break;case 5:this.#ed()?this.#J+=1:this.#ef()&&(this.#J-=1),this.#eh()&&!this.#J?this.#et(6,1):this.#ec()?this.#et(7,0):this.#er()?this.#et(8,1):this.#ee()&&this.#et(9,1);break;case 6:this.#ec()?this.#et(7,0):this.#er()?this.#et(8,1):this.#ee()&&this.#et(9,1);break;case 7:this.#er()?this.#et(8,1):this.#ee()&&this.#et(9,1);break;case 8:this.#ee()&&this.#et(9,1)}}void 0!==this.#W.hostname&&void 0===this.#W.port&&(this.#W.port="")}#et(e,t){switch(this.#z){case 0:case 2:break;case 1:this.#W.protocol=this.#ey();break;case 3:this.#W.username=this.#ey();break;case 4:this.#W.password=this.#ey();break;case 5:this.#W.hostname=this.#ey();break;case 6:this.#W.port=this.#ey();break;case 7:this.#W.pathname=this.#ey();break;case 8:this.#W.search=this.#ey();break;case 9:this.#W.hash=this.#ey()}0!==this.#z&&10!==e&&([1,2,3,4].includes(this.#z)&&[6,7,8,9].includes(e)&&(this.#W.hostname??=""),[1,2,3,4,5,6].includes(this.#z)&&[8,9].includes(e)&&(this.#W.pathname??=this.#X?"/":""),[1,2,3,4,5,6,7].includes(this.#z)&&9===e&&(this.#W.search??="")),this.#em(e,t)}#em(e,t){this.#z=e,this.#K=this.#H+t,this.#H+=t,this.#Q=0}#Z(){this.#H=this.#K,this.#Q=0}#en(e){this.#Z(),this.#z=e}#ev(e){return e<0&&(e=this.#B.length-e),e<this.#B.length?this.#B[e]:this.#B[this.#B.length-1]}#eg(e,t){let r=this.#ev(e);return r.value===t&&("CHAR"===r.type||"ESCAPED_CHAR"===r.type||"INVALID_CHAR"===r.type)}#ea(){return this.#eg(this.#H,":")}#el(){return this.#eg(this.#H+1,"/")&&this.#eg(this.#H+2,"/")}#eu(){return this.#eg(this.#H,"@")}#ep(){return this.#eg(this.#H,":")}#eh(){return this.#eg(this.#H,":")}#ec(){return this.#eg(this.#H,"/")}#er(){if(this.#eg(this.#H,"?"))return!0;if("?"!==this.#B[this.#H].value)return!1;let e=this.#ev(this.#H-1);return"NAME"!==e.type&&"REGEX"!==e.type&&"CLOSE"!==e.type&&"ASTERISK"!==e.type}#ee(){return this.#eg(this.#H,"#")}#eo(){return"OPEN"==this.#B[this.#H].type}#ei(){return"CLOSE"==this.#B[this.#H].type}#ed(){return this.#eg(this.#H,"[")}#ef(){return this.#eg(this.#H,"]")}#ey(){let e=this.#B[this.#H],t=this.#ev(this.#K).index;return this.#q.substring(t,e.index)}#es(){var e,t;let r={};Object.assign(r,y),r.encodePart=O;let n=(e=this.#ey(),t=void 0,h(c(e,r),t,r));this.#X=T(n)}},j=["protocol","username","password","hostname","port","pathname","search","hash"];function L(e,t){if("string"!=typeof e)throw TypeError("parameter 1 is not of type 'string'.");let r=new URL(e,t);return{protocol:r.protocol.substring(0,r.protocol.length-1),username:r.username,password:r.password,hostname:r.hostname,port:r.port,pathname:r.pathname,search:""!==r.search?r.search.substring(1,r.search.length):void 0,hash:""!==r.hash?r.hash.substring(1,r.hash.length):void 0}}function x(e,t){return t?k(e):e}function M(e,t,r){var n,i,o,a,s;let l;if("string"==typeof t.baseURL)try{l=new URL(t.baseURL),void 0===t.protocol&&(e.protocol=x(l.protocol.substring(0,l.protocol.length-1),r)),r||void 0!==t.protocol||void 0!==t.hostname||void 0!==t.port||void 0!==t.username||(e.username=x(l.username,r)),r||void 0!==t.protocol||void 0!==t.hostname||void 0!==t.port||void 0!==t.username||void 0!==t.password||(e.password=x(l.password,r)),void 0===t.protocol&&void 0===t.hostname&&(e.hostname=x(l.hostname,r)),void 0===t.protocol&&void 0===t.hostname&&void 0===t.port&&(e.port=x(l.port,r)),void 0===t.protocol&&void 0===t.hostname&&void 0===t.port&&void 0===t.pathname&&(e.pathname=x(l.pathname,r)),void 0===t.protocol&&void 0===t.hostname&&void 0===t.port&&void 0===t.pathname&&void 0===t.search&&(e.search=x(l.search.substring(1,l.search.length),r)),void 0===t.protocol&&void 0===t.hostname&&void 0===t.port&&void 0===t.pathname&&void 0===t.search&&void 0===t.hash&&(e.hash=x(l.hash.substring(1,l.hash.length),r))}catch{throw TypeError(`invalid baseURL '${t.baseURL}'.`)}if("string"==typeof t.protocol&&(e.protocol=(n=(i=n=t.protocol).endsWith(":")?i.substr(0,i.length-1):i,r||""===n?n:O(n))),"string"==typeof t.username&&(e.username=function(e,t){if(t||""===e)return e;let r=new URL("https://example.com");return r.username=e,r.username}(t.username,r)),"string"==typeof t.password&&(e.password=function(e,t){if(t||""===e)return e;let r=new URL("https://example.com");return r.password=e,r.password}(t.password,r)),"string"==typeof t.hostname&&(e.hostname=(o=t.hostname,r||""===o?o:b(o)?N(o):I(o))),"string"==typeof t.port&&(e.port=(a=t.port,E(e.protocol)===a&&(a=""),r||""===a?a:A(a))),"string"==typeof t.pathname){if(e.pathname=t.pathname,l&&(!(s=e.pathname).length||"/"!==s[0]&&(!r||s.length<2||"\\"!=s[0]&&"{"!=s[0]||"/"!=s[1]))){let t=l.pathname.lastIndexOf("/");t>=0&&(e.pathname=x(l.pathname.substring(0,t+1),r)+e.pathname)}e.pathname=function(e,t,r){if(r||""===e)return e;if(t&&!_.includes(t))return new URL(`${t}:${e}`).pathname;let n="/"==e[0];return e=new URL(n?e:"/-"+e,"https://example.com").pathname,n||(e=e.substring(2,e.length)),e}(e.pathname,e.protocol,r)}return"string"==typeof t.search&&(e.search=function(e,t){if(e=g(e,"?"),t||""===e)return e;let r=new URL("https://example.com");return r.search=e,r.search?r.search.substring(1,r.search.length):""}(t.search,r)),"string"==typeof t.hash&&(e.hash=function(e,t){if(e=g(e,"#"),t||""===e)return e;let r=new URL("https://example.com");return r.hash=e,r.hash?r.hash.substring(1,r.hash.length):""}(t.hash,r)),e}function k(e){return e.replace(/([+*?:{}()\\])/g,"\\$1")}var $=class{#q;#B={};#W={};#H={};#Q={};#K=!1;constructor(e={},t,r){try{let n,i;if("string"==typeof t?n=t:r=t,"string"==typeof e){let t=new F(e);if(t.parse(),e=t.result,void 0===n&&"string"!=typeof e.protocol)throw TypeError("A base URL must be provided for a relative constructor string.");e.baseURL=n}else{if(!e||"object"!=typeof e)throw TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(n)throw TypeError("parameter 1 is not of type 'string'.")}typeof r>"u"&&(r={ignoreCase:!1});let o={ignoreCase:!0===r.ignoreCase};for(i of(this.#q=M({pathname:"*",protocol:"*",username:"*",password:"*",hostname:"*",port:"*",search:"*",hash:"*"},e,!0),E(this.#q.protocol)===this.#q.port&&(this.#q.port=""),j)){if(!(i in this.#q))continue;let e={},t=this.#q[i];switch(this.#W[i]=[],i){case"protocol":Object.assign(e,y),e.encodePart=O;break;case"username":Object.assign(e,y),e.encodePart=S;break;case"password":Object.assign(e,y),e.encodePart=w;break;case"hostname":Object.assign(e,m),b(t)?e.encodePart=N:e.encodePart=I;break;case"port":Object.assign(e,y),e.encodePart=A;break;case"pathname":T(this.#B.protocol)?(Object.assign(e,v,o),e.encodePart=C):(Object.assign(e,y,o),e.encodePart=P);break;case"search":Object.assign(e,y,o),e.encodePart=R;break;case"hash":Object.assign(e,y,o),e.encodePart=D}try{this.#Q[i]=c(t,e),this.#B[i]=h(this.#Q[i],this.#W[i],e),this.#H[i]=function(e,t){t.delimiter??="/#?",t.prefixes??="./",t.sensitive??=!1,t.strict??=!1,t.end??=!0,t.start??=!0,t.endsWith="";let r=`[^${t.delimiter.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}]+?`,n=/[$_\u200C\u200D\p{ID_Continue}]/u,i="";for(let o=0;o<e.length;++o){let a=e[o];if(3===a.type){if(3===a.modifier){i+=k(a.value);continue}i+=`{${k(a.value)}}${f(a.modifier)}`;continue}let s=a.hasCustomName(),l=!!a.suffix.length||!!a.prefix.length&&(1!==a.prefix.length||!t.prefixes.includes(a.prefix)),u=o>0?e[o-1]:null,c=o<e.length-1?e[o+1]:null;if(!l&&s&&1===a.type&&3===a.modifier&&c&&!c.prefix.length&&!c.suffix.length){if(3===c.type){let e=c.value.length>0?c.value[0]:"";l=n.test(e)}else l=!c.hasCustomName()}if(!l&&!a.prefix.length&&u&&3===u.type){let e=u.value[u.value.length-1];l=t.prefixes.includes(e)}l&&(i+="{"),i+=k(a.prefix),s&&(i+=`:${a.name}`),2===a.type?i+=`(${a.value})`:1===a.type?s||(i+=`(${r})`):0===a.type&&(s||u&&3!==u.type&&3===u.modifier&&!l&&""===a.prefix?i+="(.*)":i+="*"),1===a.type&&s&&a.suffix.length&&n.test(a.suffix[0])&&(i+="\\"),i+=k(a.suffix),l&&(i+="}"),3!==a.modifier&&(i+=f(a.modifier))}return i}(this.#Q[i],e),this.#K=this.#K||this.#Q[i].some(e=>2===e.type)}catch{throw TypeError(`invalid ${i} pattern '${this.#q[i]}'.`)}}}catch(e){throw TypeError(`Failed to construct 'URLPattern': ${e.message}`)}}test(e={},t){let r,n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if("string"!=typeof e&&t)throw TypeError("parameter 1 is not of type 'string'.");if(typeof e>"u")return!1;try{n="object"==typeof e?M(n,e,!1):M(n,L(e,t),!1)}catch{return!1}for(r of j)if(!this.#B[r].exec(n[r]))return!1;return!0}exec(e={},t){let r,n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if("string"!=typeof e&&t)throw TypeError("parameter 1 is not of type 'string'.");if(typeof e>"u")return;try{n="object"==typeof e?M(n,e,!1):M(n,L(e,t),!1)}catch{return null}let i={};for(r of(t?i.inputs=[e,t]:i.inputs=[e],j)){let e=this.#B[r].exec(n[r]);if(!e)return null;let t={};for(let[n,i]of this.#W[r].entries())if("string"==typeof i||"number"==typeof i){let r=e[n+1];t[i]=r}i[r]={input:n[r]??"",groups:t}}return i}static compareComponent(e,t,r){let n=(e,t)=>{for(let r of["type","modifier","prefix","value","suffix"]){if(e[r]<t[r])return -1;if(e[r]!==t[r])return 1}return 0},i=new a(3,"","","","",3),o=new a(0,"","","","",3),s=(e,t)=>{let r=0;for(;r<Math.min(e.length,t.length);++r){let i=n(e[r],t[r]);if(i)return i}return e.length===t.length?0:n(e[r]??i,t[r]??i)};return t.#H[e]||r.#H[e]?t.#H[e]&&!r.#H[e]?s(t.#Q[e],[o]):s(!t.#H[e]&&r.#H[e]?[o]:t.#Q[e],r.#Q[e]):0}get protocol(){return this.#H.protocol}get username(){return this.#H.username}get password(){return this.#H.password}get hostname(){return this.#H.hostname}get port(){return this.#H.port}get pathname(){return this.#H.pathname}get search(){return this.#H.search}get hash(){return this.#H.hash}get hasRegExpGroups(){return this.#K}}},36203:(e,t,r)=>{let{URLPattern:n}=r(7492);e.exports={URLPattern:n},globalThis.URLPattern||(globalThis.URLPattern=n)},82174:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>j,__assign:()=>o,__asyncDelegator:()=>w,__asyncGenerator:()=>S,__asyncValues:()=>I,__await:()=>O,__awaiter:()=>h,__classPrivateFieldGet:()=>R,__classPrivateFieldIn:()=>F,__classPrivateFieldSet:()=>D,__createBinding:()=>m,__decorate:()=>s,__disposeResources:()=>x,__esDecorate:()=>u,__exportStar:()=>v,__extends:()=>i,__generator:()=>y,__importDefault:()=>P,__importStar:()=>C,__makeTemplateObject:()=>N,__metadata:()=>f,__param:()=>l,__propKey:()=>p,__read:()=>b,__rest:()=>a,__runInitializers:()=>c,__setFunctionName:()=>d,__spread:()=>_,__spreadArray:()=>E,__spreadArrays:()=>T,__values:()=>g,default:()=>M});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function s(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,n){t(r,n,e)}}function u(e,t,r,n,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,l=n.kind,u="getter"===l?"get":"setter"===l?"set":"value",c=!t&&e?n.static?e:e.prototype:null,p=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d=!1,f=r.length-1;f>=0;f--){var h={};for(var y in n)h[y]="access"===y?{}:n[y];for(var y in n.access)h.access[y]=n.access[y];h.addInitializer=function(e){if(d)throw TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var m=(0,r[f])("accessor"===l?{get:p.get,set:p.set}:p[u],h);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw TypeError("Object expected");(s=a(m.get))&&(p.get=s),(s=a(m.set))&&(p.set=s),(s=a(m.init))&&i.unshift(s)}else(s=a(m))&&("field"===l?i.unshift(s):p[u]=s)}c&&Object.defineProperty(c,n.name,p),d=!0}function c(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function p(e){return"symbol"==typeof e?e:"".concat(e)}function d(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})}function y(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var m=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function v(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||m(t,e,r)}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function T(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function E(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function O(e){return this instanceof O?(this.v=e,this):new O(e)}function S(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||s(e,t)})},t&&(n[e]=t(n[e])))}function s(e,t){try{var r;(r=i[e](t)).value instanceof O?Promise.resolve(r.value.v).then(l,u):c(o[0][2],r)}catch(e){c(o[0][3],e)}}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:O(e[n](t)),done:!1}:i?i(t):t}:i}}function I(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=g(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,i,(t=e[r](t)).done,t.value)})}}}function N(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var A=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&m(t,e,r);return A(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function R(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function D(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function F(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function j(e,t,r){if(null!=t){var n,i;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var L="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function x(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function i(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(i,function(e){return t(e),i()})}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}let M={__extends:i,__assign:o,__rest:a,__decorate:s,__param:l,__metadata:f,__awaiter:h,__generator:y,__createBinding:m,__exportStar:v,__values:g,__read:b,__spread:_,__spreadArrays:T,__spreadArray:E,__await:O,__asyncGenerator:S,__asyncDelegator:w,__asyncValues:I,__makeTemplateObject:N,__importStar:C,__importDefault:P,__classPrivateFieldGet:R,__classPrivateFieldSet:D,__classPrivateFieldIn:F,__addDisposableResource:j,__disposeResources:x}},20206:e=>{"use strict";e.exports=JSON.parse('{"name":"@neo4j/graphql","version":"5.6.1","description":"A GraphQL to Cypher query execution layer for Neo4j and JavaScript GraphQL implementations","keywords":["neo4j","graphql","server"],"license":"Apache-2.0","bugs":{"url":"https://github.com/neo4j/graphql/issues"},"homepage":"https://github.com/neo4j/graphql/tree/dev/packages/graphql","exports":"./dist/index.js","main":"./dist/index.js","types":"./dist/index.d.ts","files":["dist/**/*.ts","dist/**/*.ts.map","dist/**/*.js","dist/**/*.js.map"],"engines":{"node":">=16.0.0"},"scripts":{"build":"tsc --build src/tsconfig.production.json","clean":"cd src/ && tsc --build --clean","cleanup:package-tests":"cd ../package-tests/ && yarn run cleanup && rimraf ./package/ && rimraf *.tgz","performance":"ts-node tests/performance/performance.ts","posttest:package-tests":"yarn run cleanup:package-tests","setup:package-tests":"yarn pack && mv *.tgz ../package-tests/ && cd ../package-tests/ && rimraf package && tar -xvzf *.tgz && cd package && cd ../ && yarn install && yarn run setup","test:e2e":"jest tests/e2e","test:int":"jest tests/integration","test:package-tests":"yarn run setup:package-tests && cd ../package-tests/ && yarn run test:all","test:schema":"jest tests/schema -c jest.minimal.config.js","test:tck":"jest tests/tck -c jest.minimal.config.js","test:unit":"jest src --coverage=true -c jest.minimal.config.js","test":"jest"},"author":"Neo4j Inc.","devDependencies":{"@apollo/gateway":"2.9.0","@apollo/server":"4.11.0","@types/deep-equal":"1.0.4","@types/is-uuid":"1.0.2","@types/jest":"29.5.12","@types/jsonwebtoken":"9.0.6","@types/node":"20.16.2","@types/pluralize":"0.0.33","@types/randomstring":"1.3.0","@types/semver":"7.5.8","@types/supertest":"6.0.2","@types/ws":"8.5.12","graphql-middleware":"6.1.35","graphql-tag":"2.12.6","graphql-ws":"5.16.0","is-uuid":"1.0.2","jest":"29.7.0","jest-extended":"4.0.2","jwks-rsa":"3.1.0","koa":"2.15.3","koa-jwt":"4.0.4","koa-router":"12.0.1","mock-jwks":"1.0.10","nock":"13.5.5","randomstring":"1.3.0","rimraf":"5.0.10","supertest":"7.0.0","ts-jest":"29.2.5","ts-node":"10.9.2","typescript":"5.1.6","ws":"8.18.0"},"dependencies":{"@apollo/subgraph":"^2.2.3","@graphql-tools/merge":"^9.0.0","@graphql-tools/resolvers-composition":"^7.0.0","@graphql-tools/schema":"10.0.4","@graphql-tools/utils":"^10.0.0","@neo4j/cypher-builder":"^1.17.1","camelcase":"^6.3.0","debug":"^4.3.4","dot-prop":"^6.0.1","graphql-compose":"^9.0.8","graphql-parse-resolve-info":"^4.12.3","graphql-relay":"^0.10.0","jose":"^5.0.0","pluralize":"^8.0.0","semver":"^7.5.4","typescript-memoize":"^1.1.1"},"peerDependencies":{"graphql":"^16.0.0","neo4j-driver":"^5.8.0"}}')}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948],()=>r(60797));module.exports=n})();